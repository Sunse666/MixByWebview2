(function(Fv){"use strict";function aS(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function en(t){const e=Object.create(null);for(const i of t.split(","))e[i]=1;return i=>i in e}const Dt={},_a=[],tn=()=>{},ba=()=>!1,Po=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ad=t=>t.startsWith("onUpdate:"),Ot=Object.assign,kd=(t,e)=>{const i=t.indexOf(e);i>-1&&t.splice(i,1)},lS=Object.prototype.hasOwnProperty,Wt=(t,e)=>lS.call(t,e),Qe=Array.isArray,ya=t=>wa(t)==="[object Map]",Do=t=>wa(t)==="[object Set]",cp=t=>wa(t)==="[object Date]",Bv=t=>wa(t)==="[object RegExp]",dt=t=>typeof t=="function",ht=t=>typeof t=="string",On=t=>typeof t=="symbol",Kt=t=>t!==null&&typeof t=="object",Cd=t=>(Kt(t)||dt(t))&&dt(t.then)&&dt(t.catch),dp=Object.prototype.toString,wa=t=>dp.call(t),Nv=t=>wa(t).slice(8,-1),ku=t=>wa(t)==="[object Object]",Ld=t=>ht(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,zr=en(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Uv=en("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Id=t=>{const e=Object.create(null);return(i=>e[i]||(e[i]=t(i)))},uS=/-(\w)/g,ci=Id(t=>t.replace(uS,(e,i)=>i?i.toUpperCase():"")),cS=/\B([A-Z])/g,bn=Id(t=>t.replace(cS,"-$1").toLowerCase()),Oo=Id(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ea=Id(t=>t?`on${Oo(t)}`:""),yn=(t,e)=>!Object.is(t,e),Sa=(t,...e)=>{for(let i=0;i<t.length;i++)t[i](...e)},fp=(t,e,i,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:i})},Cu=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Lu=t=>{const e=ht(t)?Number(t):NaN;return isNaN(e)?t:e};let Vv;const Iu=()=>Vv||(Vv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),dS=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function fS(t){return dS.test(t)?`__props.${t}`:`__props[${JSON.stringify(t)}]`}function hS(t,e){return t+JSON.stringify(e,(i,n)=>typeof n=="function"?n.toString():n)}const pS={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},mS={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"CACHED",[-2]:"BAIL"},gS={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},vS={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},_S={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},hp=en("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol"),bS=hp,jv=2;function Hv(t,e=0,i=t.length){if(e=Math.max(0,Math.min(e,t.length)),i=Math.max(0,Math.min(i,t.length)),e>i)return"";let n=t.split(/(\r?\n)/);const s=n.filter((a,l)=>l%2===1);n=n.filter((a,l)=>l%2===0);let r=0;const o=[];for(let a=0;a<n.length;a++)if(r+=n[a].length+(s[a]&&s[a].length||0),r>=e){for(let l=a-jv;l<=a+jv||i>r;l++){if(l<0||l>=n.length)continue;const u=l+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${n[l]}`);const c=n[l].length,d=s[l]&&s[l].length||0;if(l===a){const f=e-(r-(c+d)),h=Math.max(1,i>r?c-f:i-e);o.push("   |  "+" ".repeat(f)+"^".repeat(h))}else if(l>a){if(i>r){const f=Math.max(Math.min(i-r,c),1);o.push("   |  "+"^".repeat(f))}r+=c+d}}break}return o.join(`
`)}function Ue(t){if(Qe(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],s=ht(n)?pp(n):Ue(n);if(s)for(const r in s)e[r]=s[r]}return e}else if(ht(t)||Kt(t))return t}const yS=/;(?![^(]*\))/g,wS=/:([^]+)/,ES=/\/\*[^]*?\*\//g;function pp(t){const e={};return t.replace(ES,"").split(yS).forEach(i=>{if(i){const n=i.split(wS);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function SS(t){if(!t)return"";if(ht(t))return t;let e="";for(const i in t){const n=t[i];if(ht(n)||typeof n=="number"){const s=i.startsWith("--")?i:bn(i);e+=`${s}:${n};`}}return e}function Ie(t){let e="";if(ht(t))e=t;else if(Qe(t))for(let i=0;i<t.length;i++){const n=Ie(t[i]);n&&(e+=n+" ")}else if(Kt(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}function zv(t){if(!t)return null;let{class:e,style:i}=t;return e&&!ht(e)&&(t.class=Ie(e)),i&&(t.style=Ue(i)),t}const xS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",TS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",AS="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",kS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Gv=en(xS),Wv=en(TS),Kv=en(AS),Yv=en(kS),Xv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qv=en(Xv),CS=en(Xv+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function mp(t){return!!t||t===""}const LS=/[>/="'\u0009\u000a\u000c\u0020]/,gp={};function IS(t){if(gp.hasOwnProperty(t))return gp[t];const e=LS.test(t);return e&&console.error(`unsafe attribute name: ${t}`),gp[t]=!e}const RS={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},PS=en("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),DS=en("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),OS=en("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function MS(t){if(t==null)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"}const $S=/["'&<>]/;function FS(t){const e=""+t,i=$S.exec(e);if(!i)return e;let n="",s,r,o=0;for(r=i.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}o!==r&&(n+=e.slice(o,r)),o=r+1,n+=s}return o!==r?n+e.slice(o,r):n}const BS=/^-?>|<!--|-->|--!>|<!-$/g;function NS(t){return t.replace(BS,"")}const Zv=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function US(t,e){return t.replace(Zv,i=>e?i==='"'?'\\\\\\"':`\\\\${i}`:`\\${i}`)}function VS(t,e){if(t.length!==e.length)return!1;let i=!0;for(let n=0;i&&n<t.length;n++)i=Gr(t[n],e[n]);return i}function Gr(t,e){if(t===e)return!0;let i=cp(t),n=cp(e);if(i||n)return i&&n?t.getTime()===e.getTime():!1;if(i=On(t),n=On(e),i||n)return t===e;if(i=Qe(t),n=Qe(e),i||n)return i&&n?VS(t,e):!1;if(i=Kt(t),n=Kt(e),i||n){if(!i||!n)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Gr(t[o],e[o]))return!1}}return String(t)===String(e)}function Ru(t,e){return t.findIndex(i=>Gr(i,e))}const Qv=t=>!!(t&&t.__v_isRef===!0),G=t=>ht(t)?t:t==null?"":Qe(t)||Kt(t)&&(t.toString===dp||!dt(t.toString))?Qv(t)?G(t.value):JSON.stringify(t,Jv,2):String(t),Jv=(t,e)=>Qv(e)?Jv(t,e.value):ya(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((i,[n,s],r)=>(i[vp(n,r)+" =>"]=s,i),{})}:Do(e)?{[`Set(${e.size})`]:[...e.values()].map(i=>vp(i))}:On(e)?vp(e):Kt(e)&&!Qe(e)&&!ku(e)?String(e):e,vp=(t,e="")=>{var i;return On(t)?`Symbol(${(i=t.description)!=null?i:e})`:t};function e_(t){return t==null?"initial":typeof t=="string"?t===""?" ":t:String(t)}const jS=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:_a,EMPTY_OBJ:Dt,NO:ba,NOOP:tn,PatchFlagNames:mS,PatchFlags:pS,ShapeFlags:gS,SlotFlags:vS,camelize:ci,capitalize:Oo,cssVarNameEscapeSymbolsRE:Zv,def:fp,escapeHtml:FS,escapeHtmlComment:NS,extend:Ot,genCacheKey:hS,genPropsAccessExp:fS,generateCodeFrame:Hv,getEscapedCssVarName:US,getGlobalThis:Iu,hasChanged:yn,hasOwn:Wt,hyphenate:bn,includeBooleanAttr:mp,invokeArrayFns:Sa,isArray:Qe,isBooleanAttr:CS,isBuiltInDirective:Uv,isDate:cp,isFunction:dt,isGloballyAllowed:hp,isGloballyWhitelisted:bS,isHTMLTag:Gv,isIntegerKey:Ld,isKnownHtmlAttr:PS,isKnownMathMLAttr:OS,isKnownSvgAttr:DS,isMap:ya,isMathMLTag:Kv,isModelListener:Ad,isObject:Kt,isOn:Po,isPlainObject:ku,isPromise:Cd,isRegExp:Bv,isRenderableAttrValue:MS,isReservedProp:zr,isSSRSafeAttrName:IS,isSVGTag:Wv,isSet:Do,isSpecialBooleanAttr:qv,isString:ht,isSymbol:On,isVoidTag:Yv,looseEqual:Gr,looseIndexOf:Ru,looseToNumber:Cu,makeMap:en,normalizeClass:Ie,normalizeCssVarValue:e_,normalizeProps:zv,normalizeStyle:Ue,objectToString:dp,parseStringStyle:pp,propsToAttrMap:RS,remove:kd,slotFlagsText:_S,stringifyStyle:SS,toDisplayString:G,toHandlerKey:Ea,toNumber:Lu,toRawType:Nv,toTypeString:wa},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wn;class _p{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wn,!e&&wn&&(this.index=(wn.scopes||(wn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].pause();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,i;if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].resume();for(e=0,i=this.effects.length;e<i;e++)this.effects[e].resume()}}run(e){if(this._active){const i=wn;try{return wn=this,e()}finally{wn=i}}}on(){++this._on===1&&(this.prevScope=wn,wn=this)}off(){this._on>0&&--this._on===0&&(wn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Rd(t){return new _p(t)}function Pd(){return wn}function Dd(t,e=!1){wn&&wn.cleanups.push(t)}let di;const bp=new WeakSet;class Pu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wn&&wn.active&&wn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,bp.has(this)&&(bp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||i_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,a_(this),n_(this);const e=di,i=Ks;di=this,Ks=!0;try{return this.fn()}finally{s_(this),di=e,Ks=i,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Sp(e);this.deps=this.depsTail=void 0,a_(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?bp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ep(this)&&this.run()}get dirty(){return Ep(this)}}let t_=0,Du,Ou;function i_(t,e=!1){if(t.flags|=8,e){t.next=Ou,Ou=t;return}t.next=Du,Du=t}function yp(){t_++}function wp(){if(--t_>0)return;if(Ou){let e=Ou;for(Ou=void 0;e;){const i=e.next;e.next=void 0,e.flags&=-9,e=i}}let t;for(;Du;){let e=Du;for(Du=void 0;e;){const i=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=i}}if(t)throw t}function n_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function s_(t){let e,i=t.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),Sp(n),HS(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}t.deps=e,t.depsTail=i}function Ep(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(r_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function r_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Mu)||(t.globalVersion=Mu,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Ep(t))))return;t.flags|=2;const e=t.dep,i=di,n=Ks;di=t,Ks=!0;try{n_(t);const s=t.fn(t._value);(e.version===0||yn(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{di=i,Ks=n,s_(t),t.flags&=-3}}function Sp(t,e=!1){const{dep:i,prevSub:n,nextSub:s}=t;if(n&&(n.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=n,t.nextSub=void 0),i.subs===t&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Sp(r,!0)}!e&&!--i.sc&&i.map&&i.map.delete(i.key)}function HS(t){const{prevDep:e,nextDep:i}=t;e&&(e.nextDep=i,t.prevDep=void 0),i&&(i.prevDep=e,t.nextDep=void 0)}function zS(t,e){t.effect instanceof Pu&&(t=t.effect.fn);const i=new Pu(t);e&&Ot(i,e);try{i.run()}catch(s){throw i.stop(),s}const n=i.run.bind(i);return n.effect=i,n}function GS(t){t.effect.stop()}let Ks=!0;const o_=[];function vr(){o_.push(Ks),Ks=!1}function _r(){const t=o_.pop();Ks=t===void 0?!0:t}function a_(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const i=di;di=void 0;try{e()}finally{di=i}}}let Mu=0;class WS{constructor(e,i){this.sub=e,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Od{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!di||!Ks||di===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==di)i=this.activeLink=new WS(di,this),di.deps?(i.prevDep=di.depsTail,di.depsTail.nextDep=i,di.depsTail=i):di.deps=di.depsTail=i,l_(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=di.depsTail,i.nextDep=void 0,di.depsTail.nextDep=i,di.depsTail=i,di.deps===i&&(di.deps=n)}return i}trigger(e){this.version++,Mu++,this.notify(e)}notify(e){yp();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{wp()}}}function l_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)l_(n)}const i=t.dep.subs;i!==t&&(t.prevSub=i,i&&(i.nextSub=t)),t.dep.subs=t}}const Md=new WeakMap,xa=Symbol(""),xp=Symbol(""),$u=Symbol("");function En(t,e,i){if(Ks&&di){let n=Md.get(t);n||Md.set(t,n=new Map);let s=n.get(i);s||(n.set(i,s=new Od),s.map=n,s.key=i),s.track()}}function Wr(t,e,i,n,s,r){const o=Md.get(t);if(!o){Mu++;return}const a=l=>{l&&l.trigger()};if(yp(),e==="clear")o.forEach(a);else{const l=Qe(t),u=l&&Ld(i);if(l&&i==="length"){const c=Number(n);o.forEach((d,f)=>{(f==="length"||f===$u||!On(f)&&f>=c)&&a(d)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),u&&a(o.get($u)),e){case"add":l?u&&a(o.get("length")):(a(o.get(xa)),ya(t)&&a(o.get(xp)));break;case"delete":l||(a(o.get(xa)),ya(t)&&a(o.get(xp)));break;case"set":ya(t)&&a(o.get(xa));break}}wp()}function KS(t,e){const i=Md.get(t);return i&&i.get(e)}function pl(t){const e=Ct(t);return e===t?e:(En(e,"iterate",$u),ds(t)?e:e.map(un))}function $d(t){return En(t=Ct(t),"iterate",$u),t}const YS={__proto__:null,[Symbol.iterator](){return Tp(this,Symbol.iterator,un)},concat(...t){return pl(this).concat(...t.map(e=>Qe(e)?pl(e):e))},entries(){return Tp(this,"entries",t=>(t[1]=un(t[1]),t))},every(t,e){return Kr(this,"every",t,e,void 0,arguments)},filter(t,e){return Kr(this,"filter",t,e,i=>i.map(un),arguments)},find(t,e){return Kr(this,"find",t,e,un,arguments)},findIndex(t,e){return Kr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Kr(this,"findLast",t,e,un,arguments)},findLastIndex(t,e){return Kr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Kr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ap(this,"includes",t)},indexOf(...t){return Ap(this,"indexOf",t)},join(t){return pl(this).join(t)},lastIndexOf(...t){return Ap(this,"lastIndexOf",t)},map(t,e){return Kr(this,"map",t,e,void 0,arguments)},pop(){return Fu(this,"pop")},push(...t){return Fu(this,"push",t)},reduce(t,...e){return u_(this,"reduce",t,e)},reduceRight(t,...e){return u_(this,"reduceRight",t,e)},shift(){return Fu(this,"shift")},some(t,e){return Kr(this,"some",t,e,void 0,arguments)},splice(...t){return Fu(this,"splice",t)},toReversed(){return pl(this).toReversed()},toSorted(t){return pl(this).toSorted(t)},toSpliced(...t){return pl(this).toSpliced(...t)},unshift(...t){return Fu(this,"unshift",t)},values(){return Tp(this,"values",un)}};function Tp(t,e,i){const n=$d(t),s=n[e]();return n!==t&&!ds(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const XS=Array.prototype;function Kr(t,e,i,n,s,r){const o=$d(t),a=o!==t&&!ds(t),l=o[e];if(l!==XS[e]){const d=l.apply(t,r);return a?un(d):d}let u=i;o!==t&&(a?u=function(d,f){return i.call(this,un(d),f,t)}:i.length>2&&(u=function(d,f){return i.call(this,d,f,t)}));const c=l.call(o,u,n);return a&&s?s(c):c}function u_(t,e,i,n){const s=$d(t);let r=i;return s!==t&&(ds(t)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,t)}):r=function(o,a,l){return i.call(this,o,un(a),l,t)}),s[e](r,...n)}function Ap(t,e,i){const n=Ct(t);En(n,"iterate",$u);const s=n[e](...i);return(s===-1||s===!1)&&Vd(i[0])?(i[0]=Ct(i[0]),n[e](...i)):s}function Fu(t,e,i=[]){vr(),yp();const n=Ct(t)[e].apply(t,i);return wp(),_r(),n}const qS=en("__proto__,__v_isRef,__isVue"),c_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(On));function ZS(t){On(t)||(t=String(t));const e=Ct(this);return En(e,"has",t),e.hasOwnProperty(t)}class d_{constructor(e=!1,i=!1){this._isReadonly=e,this._isShallow=i}get(e,i,n){if(i==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?v_:g_:r?m_:p_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Qe(e);if(!s){let l;if(o&&(l=YS[i]))return l;if(i==="hasOwnProperty")return ZS}const a=Reflect.get(e,i,kt(e)?e:n);return(On(i)?c_.has(i):qS(i))||(s||En(e,"get",i),r)?a:kt(a)?o&&Ld(i)?a:a.value:Kt(a)?s?Ta(a):Mt(a):a}}class f_ extends d_{constructor(e=!1){super(!1,e)}set(e,i,n,s){let r=e[i];if(!this._isShallow){const l=Yr(r);if(!ds(n)&&!Yr(n)&&(r=Ct(r),n=Ct(n)),!Qe(e)&&kt(r)&&!kt(n))return l||(r.value=n),!0}const o=Qe(e)&&Ld(i)?Number(i)<e.length:Wt(e,i),a=Reflect.set(e,i,n,kt(e)?e:s);return e===Ct(s)&&(o?yn(n,r)&&Wr(e,"set",i,n):Wr(e,"add",i,n)),a}deleteProperty(e,i){const n=Wt(e,i);e[i];const s=Reflect.deleteProperty(e,i);return s&&n&&Wr(e,"delete",i,void 0),s}has(e,i){const n=Reflect.has(e,i);return(!On(i)||!c_.has(i))&&En(e,"has",i),n}ownKeys(e){return En(e,"iterate",Qe(e)?"length":xa),Reflect.ownKeys(e)}}class h_ extends d_{constructor(e=!1){super(!0,e)}set(e,i){return!0}deleteProperty(e,i){return!0}}const QS=new f_,JS=new h_,ex=new f_(!0),tx=new h_(!0),kp=t=>t,Fd=t=>Reflect.getPrototypeOf(t);function ix(t,e,i){return function(...n){const s=this.__v_raw,r=Ct(s),o=ya(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...n),c=i?kp:e?Hd:un;return!e&&En(r,"iterate",l?xp:xa),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Bd(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function nx(t,e){const i={get(s){const r=this.__v_raw,o=Ct(r),a=Ct(s);t||(yn(s,a)&&En(o,"get",s),En(o,"get",a));const{has:l}=Fd(o),u=e?kp:t?Hd:un;if(l.call(o,s))return u(r.get(s));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!t&&En(Ct(s),"iterate",xa),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=Ct(r),a=Ct(s);return t||(yn(s,a)&&En(o,"has",s),En(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=Ct(a),u=e?kp:t?Hd:un;return!t&&En(l,"iterate",xa),a.forEach((c,d)=>s.call(r,u(c),u(d),o))}};return Ot(i,t?{add:Bd("add"),set:Bd("set"),delete:Bd("delete"),clear:Bd("clear")}:{add(s){!e&&!ds(s)&&!Yr(s)&&(s=Ct(s));const r=Ct(this);return Fd(r).has.call(r,s)||(r.add(s),Wr(r,"add",s,s)),this},set(s,r){!e&&!ds(r)&&!Yr(r)&&(r=Ct(r));const o=Ct(this),{has:a,get:l}=Fd(o);let u=a.call(o,s);u||(s=Ct(s),u=a.call(o,s));const c=l.call(o,s);return o.set(s,r),u?yn(r,c)&&Wr(o,"set",s,r):Wr(o,"add",s,r),this},delete(s){const r=Ct(this),{has:o,get:a}=Fd(r);let l=o.call(r,s);l||(s=Ct(s),l=o.call(r,s)),a&&a.call(r,s);const u=r.delete(s);return l&&Wr(r,"delete",s,void 0),u},clear(){const s=Ct(this),r=s.size!==0,o=s.clear();return r&&Wr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=ix(s,t,e)}),i}function Nd(t,e){const i=nx(t,e);return(n,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?n:Reflect.get(Wt(i,s)&&s in n?i:n,s,r)}const sx={get:Nd(!1,!1)},rx={get:Nd(!1,!0)},ox={get:Nd(!0,!1)},ax={get:Nd(!0,!0)},p_=new WeakMap,m_=new WeakMap,g_=new WeakMap,v_=new WeakMap;function lx(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ux(t){return t.__v_skip||!Object.isExtensible(t)?0:lx(Nv(t))}function Mt(t){return Yr(t)?t:Ud(t,!1,QS,sx,p_)}function __(t){return Ud(t,!1,ex,rx,m_)}function Ta(t){return Ud(t,!0,JS,ox,g_)}function b_(t){return Ud(t,!0,tx,ax,v_)}function Ud(t,e,i,n,s){if(!Kt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=ux(t);if(r===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,r===2?n:i);return s.set(t,a),a}function Ys(t){return Yr(t)?Ys(t.__v_raw):!!(t&&t.__v_isReactive)}function Yr(t){return!!(t&&t.__v_isReadonly)}function ds(t){return!!(t&&t.__v_isShallow)}function Vd(t){return t?!!t.__v_raw:!1}function Ct(t){const e=t&&t.__v_raw;return e?Ct(e):t}function jd(t){return!Wt(t,"__v_skip")&&Object.isExtensible(t)&&fp(t,"__v_skip",!0),t}const un=t=>Kt(t)?Mt(t):t,Hd=t=>Kt(t)?Ta(t):t;function kt(t){return t?t.__v_isRef===!0:!1}function z(t){return y_(t,!1)}function Zt(t){return y_(t,!0)}function y_(t,e){return kt(t)?t:new cx(t,e)}class cx{constructor(e,i){this.dep=new Od,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?e:Ct(e),this._value=i?e:un(e),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(e){const i=this._rawValue,n=this.__v_isShallow||ds(e)||Yr(e);e=n?e:Ct(e),yn(e,i)&&(this._rawValue=e,this._value=n?e:un(e),this.dep.trigger())}}function dx(t){t.dep&&t.dep.trigger()}function w(t){return kt(t)?t.value:t}function Vt(t){return dt(t)?t():w(t)}const fx={get:(t,e,i)=>e==="__v_raw"?t:w(Reflect.get(t,e,i)),set:(t,e,i,n)=>{const s=t[e];return kt(s)&&!kt(i)?(s.value=i,!0):Reflect.set(t,e,i,n)}};function Cp(t){return Ys(t)?t:new Proxy(t,fx)}class hx{constructor(e){this.__v_isRef=!0,this._value=void 0;const i=this.dep=new Od,{get:n,set:s}=e(i.track.bind(i),i.trigger.bind(i));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function Lp(t){return new hx(t)}function w_(t){const e=Qe(t)?new Array(t.length):{};for(const i in t)e[i]=E_(t,i);return e}class px{constructor(e,i,n){this._object=e,this._key=i,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return KS(Ct(this._object),this._key)}}class mx{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ip(t,e,i){return kt(t)?t:dt(t)?new mx(t):Kt(t)&&arguments.length>1?E_(t,e,i):z(t)}function E_(t,e,i){const n=t[e];return kt(n)?n:new px(t,e,i)}class gx{constructor(e,i,n){this.fn=e,this.setter=i,this._value=void 0,this.dep=new Od(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Mu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&di!==this)return i_(this,!0),!0}get value(){const e=this.dep.track();return r_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function vx(t,e,i=!1){let n,s;return dt(t)?n=t:(n=t.get,s=t.set),new gx(n,s,i)}const _x={GET:"get",HAS:"has",ITERATE:"iterate"},bx={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},zd={},Gd=new WeakMap;let Mo;function yx(){return Mo}function S_(t,e=!1,i=Mo){if(i){let n=Gd.get(i);n||Gd.set(i,n=[]),n.push(t)}}function wx(t,e,i=Dt){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,u=y=>s?y:ds(y)||s===!1||s===0?Xr(y,1):Xr(y);let c,d,f,h,p=!1,m=!1;if(kt(t)?(d=()=>t.value,p=ds(t)):Ys(t)?(d=()=>u(t),p=!0):Qe(t)?(m=!0,p=t.some(y=>Ys(y)||ds(y)),d=()=>t.map(y=>{if(kt(y))return y.value;if(Ys(y))return u(y);if(dt(y))return l?l(y,2):y()})):dt(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){vr();try{f()}finally{_r()}}const y=Mo;Mo=c;try{return l?l(t,3,[h]):t(h)}finally{Mo=y}}:d=tn,e&&s){const y=d,E=s===!0?1/0:s;d=()=>Xr(y(),E)}const g=Pd(),v=()=>{c.stop(),g&&g.active&&kd(g.effects,c)};if(r&&e){const y=e;e=(...E)=>{y(...E),v()}}let b=m?new Array(t.length).fill(zd):zd;const _=y=>{if(!(!(c.flags&1)||!c.dirty&&!y))if(e){const E=c.run();if(s||p||(m?E.some((S,A)=>yn(S,b[A])):yn(E,b))){f&&f();const S=Mo;Mo=c;try{const A=[E,b===zd?void 0:m&&b[0]===zd?[]:b,h];b=E,l?l(e,3,A):e(...A)}finally{Mo=S}}}else c.run()};return a&&a(_),c=new Pu(d),c.scheduler=o?()=>o(_,!1):_,h=y=>S_(y,!1,c),f=c.onStop=()=>{const y=Gd.get(c);if(y){if(l)l(y,4);else for(const E of y)E();Gd.delete(c)}},e?n?_(!0):b=c.run():o?o(_.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Xr(t,e=1/0,i){if(e<=0||!Kt(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),e--,kt(t))Xr(t.value,e,i);else if(Qe(t))for(let n=0;n<t.length;n++)Xr(t[n],e,i);else if(Do(t)||ya(t))t.forEach(n=>{Xr(n,e,i)});else if(ku(t)){for(const n in t)Xr(t[n],e,i);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Xr(t[n],e,i)}return t}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Aa=[];function Ex(t){Aa.push(t)}function Sx(){Aa.pop()}let Rp=!1;function ile(t,...e){if(Rp)return;Rp=!0,vr();const i=Aa.length?Aa[Aa.length-1].component:null,n=i&&i.appContext.config.warnHandler,s=xx();if(n)ka(n,i,11,[t+e.map(r=>{var o,a;return(a=(o=r.toString)==null?void 0:o.call(r))!=null?a:JSON.stringify(r)}).join(""),i&&i.proxy,s.map(({vnode:r})=>`at <${Fb(i,r.type)}>`).join(`
`),s]);else{const r=[`[Vue warn]: ${t}`,...e];s.length&&r.push(`
`,...Tx(s)),console.warn(...r)}_r(),Rp=!1}function xx(){let t=Aa[Aa.length-1];if(!t)return[];const e=[];for(;t;){const i=e[0];i&&i.vnode===t?i.recurseCount++:e.push({vnode:t,recurseCount:0});const n=t.component&&t.component.parent;t=n&&n.vnode}return e}function Tx(t){const e=[];return t.forEach((i,n)=>{e.push(...n===0?[]:[`
`],...Ax(i))}),e}function Ax({vnode:t,recurseCount:e}){const i=e>0?`... (${e} recursive calls)`:"",n=t.component?t.component.parent==null:!1,s=` at <${Fb(t.component,t.type,n)}`,r=">"+i;return t.props?[s,...kx(t.props),r]:[s+r]}function kx(t){const e=[],i=Object.keys(t);return i.slice(0,3).forEach(n=>{e.push(...x_(n,t[n]))}),i.length>3&&e.push(" ..."),e}function x_(t,e,i){return ht(e)?(e=JSON.stringify(e),i?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?i?e:[`${t}=${e}`]:kt(e)?(e=x_(t,Ct(e.value),!0),i?e:[`${t}=Ref<`,e,">"]):dt(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=Ct(e),i?e:[`${t}=`,e])}function Cx(t,e){}const Lx={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},Ix={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ka(t,e,i,n){try{return n?t(...n):t()}catch(s){Ca(s,e,i)}}function Ls(t,e,i,n){if(dt(t)){const s=ka(t,e,i,n);return s&&Cd(s)&&s.catch(r=>{Ca(r,e,i)}),s}if(Qe(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Ls(t[r],e,i,n));return s}}function Ca(t,e,i,n=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Dt;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,l,u)===!1)return}a=a.parent}if(r){vr(),ka(r,null,10,[t,l,u]),_r();return}}Rx(t,i,s,n,o)}function Rx(t,e,i,n=!0,s=!1){if(s)throw t;console.error(t)}const Mn=[];let br=-1;const ml=[];let $o=null,gl=0;const T_=Promise.resolve();let Wd=null;function ot(t){const e=Wd||T_;return t?e.then(this?t.bind(this):t):e}function Px(t){let e=br+1,i=Mn.length;for(;e<i;){const n=e+i>>>1,s=Mn[n],r=Nu(s);r<t||r===t&&s.flags&2?e=n+1:i=n}return e}function Pp(t){if(!(t.flags&1)){const e=Nu(t),i=Mn[Mn.length-1];!i||!(t.flags&2)&&e>=Nu(i)?Mn.push(t):Mn.splice(Px(e),0,t),t.flags|=1,A_()}}function A_(){Wd||(Wd=T_.then(C_))}function Bu(t){Qe(t)?ml.push(...t):$o&&t.id===-1?$o.splice(gl+1,0,t):t.flags&1||(ml.push(t),t.flags|=1),A_()}function k_(t,e,i=br+1){for(;i<Mn.length;i++){const n=Mn[i];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Mn.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Kd(t){if(ml.length){const e=[...new Set(ml)].sort((i,n)=>Nu(i)-Nu(n));if(ml.length=0,$o){$o.push(...e);return}for($o=e,gl=0;gl<$o.length;gl++){const i=$o[gl];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}$o=null,gl=0}}const Nu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function C_(t){try{for(br=0;br<Mn.length;br++){const e=Mn[br];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ka(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;br<Mn.length;br++){const e=Mn[br];e&&(e.flags&=-2)}br=-1,Mn.length=0,Kd(),Wd=null,(Mn.length||ml.length)&&C_()}}let vl,Yd=[];function L_(t,e){var i,n;vl=t,vl?(vl.enabled=!0,Yd.forEach(({event:s,args:r})=>vl.emit(s,...r)),Yd=[]):typeof window<"u"&&window.HTMLElement&&!((n=(i=window.navigator)==null?void 0:i.userAgent)!=null&&n.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{L_(r,e)}),setTimeout(()=>{vl||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Yd=[])},3e3)):Yd=[]}let cn=null,Xd=null;function Uu(t){const e=cn;return cn=t,Xd=t&&t.type.__scopeId||null,e}function Dx(t){Xd=t}function Ox(){Xd=null}const Mx=t=>H;function H(t,e=cn,i){if(!e||t._n)return t;const n=(...s)=>{n._d&&nm(-1);const r=Uu(e);let o;try{o=t(...s)}finally{Uu(r),n._d&&nm(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Bt(t,e){if(cn===null)return t;const i=Ju(cn),n=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=Dt]=e[s];r&&(dt(r)&&(r={mounted:r,updated:r}),r.deep&&Xr(o),n.push({dir:r,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function yr(t,e,i,n){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(vr(),Ls(l,i,8,[t.el,a,t,e]),_r())}}const I_=Symbol("_vte"),R_=t=>t.__isTeleport,Vu=t=>t&&(t.disabled||t.disabled===""),P_=t=>t&&(t.defer||t.defer===""),D_=t=>typeof SVGElement<"u"&&t instanceof SVGElement,O_=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Dp=(t,e)=>{const i=t&&t.to;return ht(i)?e?e(i):null:i},M_={name:"Teleport",__isTeleport:!0,process(t,e,i,n,s,r,o,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:g}}=u,v=Vu(e.props);let{shapeFlag:b,children:_,dynamicChildren:y}=e;if(t==null){const E=e.el=m(""),S=e.anchor=m("");h(E,i,n),h(S,i,n);const A=(T,I)=>{b&16&&(s&&s.isCE&&(s.ce._teleportTarget=T),c(_,T,I,s,r,o,a,l))},C=()=>{const T=e.target=Dp(e.props,p),I=$_(T,e,m,h);T&&(o!=="svg"&&D_(T)?o="svg":o!=="mathml"&&O_(T)&&(o="mathml"),v||(A(T,I),Zd(e,!1)))};v&&(A(i,S),Zd(e,!0)),P_(e.props)?(e.el.__isMounted=!1,Yi(()=>{C(),delete e.el.__isMounted},r)):C()}else{if(P_(e.props)&&t.el.__isMounted===!1){Yi(()=>{M_.process(t,e,i,n,s,r,o,a,l,u)},r);return}e.el=t.el,e.targetStart=t.targetStart;const E=e.anchor=t.anchor,S=e.target=t.target,A=e.targetAnchor=t.targetAnchor,C=Vu(t.props),T=C?i:S,I=C?E:A;if(o==="svg"||D_(S)?o="svg":(o==="mathml"||O_(S))&&(o="mathml"),y?(f(t.dynamicChildren,y,T,s,r,o,a),tm(t,e,!0)):l||d(t,e,T,I,s,r,o,a,!1),v)C?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):qd(e,i,E,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const D=e.target=Dp(e.props,p);D&&qd(e,D,null,u,0)}else C&&qd(e,S,A,u,1);Zd(e,v)}},remove(t,e,i,{um:n,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:c,target:d,props:f}=t;if(d&&(s(u),s(c)),r&&s(l),o&16){const h=r||!Vu(f);for(let p=0;p<a.length;p++){const m=a[p];n(m,e,i,h,!!m.dynamicChildren)}}},move:qd,hydrate:$x};function qd(t,e,i,{o:{insert:n},m:s},r=2){r===0&&n(t.targetAnchor,e,i);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,d=r===2;if(d&&n(o,e,i),(!d||Vu(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],e,i,2);d&&n(a,e,i)}function $x(t,e,i,n,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:c}},d){const f=e.target=Dp(e.props,l);if(f){const h=Vu(e.props),p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(o(t),e,a(t),i,n,s,r),e.targetStart=p,e.targetAnchor=p&&o(p);else{e.anchor=o(t);let m=p;for(;m;){if(m&&m.nodeType===8){if(m.data==="teleport start anchor")e.targetStart=m;else if(m.data==="teleport anchor"){e.targetAnchor=m,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}m=o(m)}e.targetAnchor||$_(f,e,c,u),d(p&&o(p),e,f,i,n,s,r)}Zd(e,h)}return e.anchor&&o(e.anchor)}const La=M_;function Zd(t,e){const i=t.ctx;if(i&&i.ut){let n,s;for(e?(n=t.el,s=t.anchor):(n=t.targetStart,s=t.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",i.uid),n=n.nextSibling;i.ut()}}function $_(t,e,i,n){const s=e.targetStart=i(""),r=e.targetAnchor=i("");return s[I_]=r,t&&(n(s,t),n(r,t)),r}const qr=Symbol("_leaveCb"),Qd=Symbol("_enterCb");function Op(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return st(()=>{t.isMounted=!0}),Ki(()=>{t.isUnmounting=!0}),t}const Is=[Function,Array],Mp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Is,onEnter:Is,onAfterEnter:Is,onEnterCancelled:Is,onBeforeLeave:Is,onLeave:Is,onAfterLeave:Is,onLeaveCancelled:Is,onBeforeAppear:Is,onAppear:Is,onAfterAppear:Is,onAppearCancelled:Is},F_=t=>{const e=t.subTree;return e.component?F_(e.component):e},Fx={name:"BaseTransition",props:Mp,setup(t,{slots:e}){const i=Fi(),n=Op();return()=>{const s=e.default&&Jd(e.default(),!0);if(!s||!s.length)return;const r=B_(s),o=Ct(t),{mode:a}=o;if(n.isLeaving)return $p(r);const l=V_(r);if(!l)return $p(r);let u=_l(l,o,n,i,d=>u=d);l.type!==$i&&Zr(l,u);let c=i.subTree&&V_(i.subTree);if(c&&c.type!==$i&&!Xs(l,c)&&F_(i).type!==$i){let d=_l(c,o,n,i);if(Zr(c,d),a==="out-in"&&l.type!==$i)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,i.job.flags&8||i.update(),delete d.afterLeave,c=void 0},$p(r);a==="in-out"&&l.type!==$i?d.delayLeave=(f,h,p)=>{const m=U_(n,c);m[String(c.key)]=c,f[qr]=()=>{h(),f[qr]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{p(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return r}}};function B_(t){let e=t[0];if(t.length>1){for(const i of t)if(i.type!==$i){e=i;break}}return e}const N_=Fx;function U_(t,e){const{leavingVNodes:i}=t;let n=i.get(e.type);return n||(n=Object.create(null),i.set(e.type,n)),n}function _l(t,e,i,n,s){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:b,onAppearCancelled:_}=e,y=String(t.key),E=U_(i,t),S=(T,I)=>{T&&Ls(T,n,9,I)},A=(T,I)=>{const D=I[1];S(T,I),Qe(T)?T.every(R=>R.length<=1)&&D():T.length<=1&&D()},C={mode:o,persisted:a,beforeEnter(T){let I=l;if(!i.isMounted)if(r)I=g||l;else return;T[qr]&&T[qr](!0);const D=E[y];D&&Xs(t,D)&&D.el[qr]&&D.el[qr](),S(I,[T])},enter(T){let I=u,D=c,R=d;if(!i.isMounted)if(r)I=v||u,D=b||c,R=_||d;else return;let O=!1;const M=T[Qd]=U=>{O||(O=!0,U?S(R,[T]):S(D,[T]),C.delayedLeave&&C.delayedLeave(),T[Qd]=void 0)};I?A(I,[T,M]):M()},leave(T,I){const D=String(t.key);if(T[Qd]&&T[Qd](!0),i.isUnmounting)return I();S(f,[T]);let R=!1;const O=T[qr]=M=>{R||(R=!0,I(),M?S(m,[T]):S(p,[T]),T[qr]=void 0,E[D]===t&&delete E[D])};E[D]=t,h?A(h,[T,O]):O()},clone(T){const I=_l(T,e,i,n,s);return s&&s(I),I}};return C}function $p(t){if(ju(t))return t=Er(t),t.children=null,t}function V_(t){if(!ju(t))return R_(t.type)&&t.children?B_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:i}=t;if(i){if(e&16)return i[0];if(e&32&&dt(i.default))return i.default()}}function Zr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Zr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Jd(t,e=!1,i){let n=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:r);o.type===Te?(o.patchFlag&128&&s++,n=n.concat(Jd(o.children,e,a))):(e||o.type!==$i)&&n.push(a!=null?Er(o,{key:a}):o)}if(s>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Me(t,e){return dt(t)?Ot({name:t.name},e,{setup:t}):t}function Bx(){const t=Fi();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Fp(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Nx(t){const e=Fi(),i=Zt(null);if(e){const s=e.refs===Dt?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>i.value,set:r=>i.value=r})}return i}function bl(t,e,i,n,s=!1){if(Qe(t)){t.forEach((p,m)=>bl(p,e&&(Qe(e)?e[m]:e),i,n,s));return}if(Fo(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&bl(t,e,i,n.component.subTree);return}const r=n.shapeFlag&4?Ju(n.component):n.el,o=s?null:r,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Dt?a.refs={}:a.refs,d=a.setupState,f=Ct(d),h=d===Dt?ba:p=>Wt(f,p);if(u!=null&&u!==l){if(ht(u))c[u]=null,h(u)&&(d[u]=null);else if(kt(u)){u.value=null;const p=e;p.k&&(c[p.k]=null)}}if(dt(l))ka(l,a,12,[o,c]);else{const p=ht(l),m=kt(l);if(p||m){const g=()=>{if(t.f){const v=p?h(l)?d[l]:c[l]:l.value;if(s)Qe(v)&&kd(v,r);else if(Qe(v))v.includes(r)||v.push(r);else if(p)c[l]=[r],h(l)&&(d[l]=c[l]);else{const b=[r];l.value=b,t.k&&(c[t.k]=b)}}else p?(c[l]=o,h(l)&&(d[l]=o)):m&&(l.value=o,t.k&&(c[t.k]=o))};o?(g.id=-1,Yi(g,i)):g()}}}let j_=!1;const yl=()=>{j_||(console.error("Hydration completed but contains mismatches."),j_=!0)},Ux=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Vx=t=>t.namespaceURI.includes("MathML"),ef=t=>{if(t.nodeType===1){if(Ux(t))return"svg";if(Vx(t))return"mathml"}},wl=t=>t.nodeType===8;function jx(t){const{mt:e,p:i,o:{patchProp:n,createText:s,nextSibling:r,parentNode:o,remove:a,insert:l,createComment:u}}=t,c=(_,y)=>{if(!y.hasChildNodes()){i(null,_,y),Kd(),y._vnode=_;return}d(y.firstChild,_,null,null,null),Kd(),y._vnode=_},d=(_,y,E,S,A,C=!1)=>{C=C||!!y.dynamicChildren;const T=wl(_)&&_.data==="[",I=()=>m(_,y,E,S,A,T),{type:D,ref:R,shapeFlag:O,patchFlag:M}=y;let U=_.nodeType;y.el=_,M===-2&&(C=!1,y.dynamicChildren=null);let $=null;switch(D){case eo:U!==3?y.children===""?(l(y.el=s(""),o(_),_),$=_):$=I():(_.data!==y.children&&(yl(),_.data=y.children),$=r(_));break;case $i:b(_)?($=r(_),v(y.el=_.content.firstChild,_,E)):U!==8||T?$=I():$=r(_);break;case Da:if(T&&(_=r(_),U=_.nodeType),U===1||U===3){$=_;const B=!y.children.length;for(let W=0;W<y.staticCount;W++)B&&(y.children+=$.nodeType===1?$.outerHTML:$.data),W===y.staticCount-1&&(y.anchor=$),$=r($);return T?r($):$}else I();break;case Te:T?$=p(_,y,E,S,A,C):$=I();break;default:if(O&1)(U!==1||y.type.toLowerCase()!==_.tagName.toLowerCase())&&!b(_)?$=I():$=f(_,y,E,S,A,C);else if(O&6){y.slotScopeIds=A;const B=o(_);if(T?$=g(_):wl(_)&&_.data==="teleport start"?$=g(_,_.data,"teleport end"):$=r(_),e(y,B,null,E,S,ef(B),C),Fo(y)&&!y.type.__asyncResolved){let W;T?(W=F(Te),W.anchor=$?$.previousSibling:B.lastChild):W=_.nodeType===3?He(""):F("div"),W.el=_,y.component.subTree=W}}else O&64?U!==8?$=I():$=y.type.hydrate(_,y,E,S,A,C,t,h):O&128&&($=y.type.hydrate(_,y,E,S,ef(o(_)),A,C,t,d))}return R!=null&&bl(R,null,S,y),$},f=(_,y,E,S,A,C)=>{C=C||!!y.dynamicChildren;const{type:T,props:I,patchFlag:D,shapeFlag:R,dirs:O,transition:M}=y,U=T==="input"||T==="option";if(U||D!==-1){O&&yr(y,null,E,"created");let $=!1;if(b(_)){$=gb(null,M)&&E&&E.vnode.props&&E.vnode.props.appear;const W=_.content.firstChild;if($){const te=W.getAttribute("class");te&&(W.$cls=te),M.beforeEnter(W)}v(W,_,E),y.el=_=W}if(R&16&&!(I&&(I.innerHTML||I.textContent))){let W=h(_.firstChild,y,_,E,S,A,C);for(;W;){tf(_,1)||yl();const te=W;W=W.nextSibling,a(te)}}else if(R&8){let W=y.children;W[0]===`
`&&(_.tagName==="PRE"||_.tagName==="TEXTAREA")&&(W=W.slice(1)),_.textContent!==W&&(tf(_,0)||yl(),_.textContent=y.children)}if(I){if(U||!C||D&48){const W=_.tagName.includes("-");for(const te in I)(U&&(te.endsWith("value")||te==="indeterminate")||Po(te)&&!zr(te)||te[0]==="."||W)&&n(_,te,null,I[te],void 0,E)}else if(I.onClick)n(_,"onClick",null,I.onClick,void 0,E);else if(D&4&&Ys(I.style))for(const W in I.style)I.style[W]}let B;(B=I&&I.onVnodeBeforeMount)&&Jn(B,E,y),O&&yr(y,null,E,"beforeMount"),((B=I&&I.onVnodeMounted)||O||$)&&kb(()=>{B&&Jn(B,E,y),$&&M.enter(_),O&&yr(y,null,E,"mounted")},S)}return _.nextSibling},h=(_,y,E,S,A,C,T)=>{T=T||!!y.dynamicChildren;const I=y.children,D=I.length;for(let R=0;R<D;R++){const O=T?I[R]:I[R]=Qn(I[R]),M=O.type===eo;_?(M&&!T&&R+1<D&&Qn(I[R+1]).type===eo&&(l(s(_.data.slice(O.children.length)),E,r(_)),_.data=O.children),_=d(_,O,S,A,C,T)):M&&!O.children?l(O.el=s(""),E):(tf(E,1)||yl(),i(null,O,E,null,S,A,ef(E),C))}return _},p=(_,y,E,S,A,C)=>{const{slotScopeIds:T}=y;T&&(A=A?A.concat(T):T);const I=o(_),D=h(r(_),y,I,E,S,A,C);return D&&wl(D)&&D.data==="]"?r(y.anchor=D):(yl(),l(y.anchor=u("]"),I,D),D)},m=(_,y,E,S,A,C)=>{if(tf(_.parentElement,1)||yl(),y.el=null,C){const D=g(_);for(;;){const R=r(_);if(R&&R!==D)a(R);else break}}const T=r(_),I=o(_);return a(_),i(null,y,I,T,E,S,ef(I),A),E&&(E.vnode.el=y.el,cf(E,y.el)),T},g=(_,y="[",E="]")=>{let S=0;for(;_;)if(_=r(_),_&&wl(_)&&(_.data===y&&S++,_.data===E)){if(S===0)return r(_);S--}return _},v=(_,y,E)=>{const S=y.parentNode;S&&S.replaceChild(_,y);let A=E;for(;A;)A.vnode.el===y&&(A.vnode.el=A.subTree.el=_),A=A.parent},b=_=>_.nodeType===1&&_.tagName==="TEMPLATE";return[c,d]}const H_="data-allow-mismatch",Hx={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function tf(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(H_);)t=t.parentElement;const i=t&&t.getAttribute(H_);if(i==null)return!1;if(i==="")return!0;{const n=i.split(",");return e===0&&n.includes("children")?!0:n.includes(Hx[e])}}const zx=Iu().requestIdleCallback||(t=>setTimeout(t,1)),Gx=Iu().cancelIdleCallback||(t=>clearTimeout(t)),Wx=(t=1e4)=>e=>{const i=zx(e,{timeout:t});return()=>Gx(i)};function Kx(t){const{top:e,left:i,bottom:n,right:s}=t.getBoundingClientRect(),{innerHeight:r,innerWidth:o}=window;return(e>0&&e<r||n>0&&n<r)&&(i>0&&i<o||s>0&&s<o)}const Yx=t=>(e,i)=>{const n=new IntersectionObserver(s=>{for(const r of s)if(r.isIntersecting){n.disconnect(),e();break}},t);return i(s=>{if(s instanceof Element){if(Kx(s))return e(),n.disconnect(),!1;n.observe(s)}}),()=>n.disconnect()},Xx=t=>e=>{if(t){const i=matchMedia(t);if(i.matches)e();else return i.addEventListener("change",e,{once:!0}),()=>i.removeEventListener("change",e)}},qx=(t=[])=>(e,i)=>{ht(t)&&(t=[t]);let n=!1;const s=o=>{n||(n=!0,r(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},r=()=>{i(o=>{for(const a of t)o.removeEventListener(a,s)})};return i(o=>{for(const a of t)o.addEventListener(a,s,{once:!0})}),r};function Zx(t,e){if(wl(t)&&t.data==="["){let i=1,n=t.nextSibling;for(;n;){if(n.nodeType===1){if(e(n)===!1)break}else if(wl(n))if(n.data==="]"){if(--i===0)break}else n.data==="["&&i++;n=n.nextSibling}}else e(t)}const Fo=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function jt(t){dt(t)&&(t={loader:t});const{loader:e,loadingComponent:i,errorComponent:n,delay:s=200,hydrate:r,timeout:o,suspensible:a=!0,onError:l}=t;let u=null,c,d=0;const f=()=>(d++,u=null,h()),h=()=>{let p;return u||(p=u=e().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),l)return new Promise((g,v)=>{l(m,()=>g(f()),()=>v(m),d+1)});throw m}).then(m=>p!==u&&u?u:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),c=m,m)))};return Me({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(p,m,g){let v=!1;(m.bu||(m.bu=[])).push(()=>v=!0);const b=()=>{v||g()},_=r?()=>{const y=r(b,E=>Zx(p,E));y&&(m.bum||(m.bum=[])).push(y)}:b;c?_():h().then(()=>!m.isUnmounted&&_())},get __asyncResolved(){return c},setup(){const p=dn;if(Fp(p),c)return()=>Bp(c,p);const m=_=>{u=null,Ca(_,p,13,!n)};if(a&&p.suspense||xl)return h().then(_=>()=>Bp(_,p)).catch(_=>(m(_),()=>n?F(n,{error:_}):null));const g=z(!1),v=z(),b=z(!!s);return s&&setTimeout(()=>{b.value=!1},s),o!=null&&setTimeout(()=>{if(!g.value&&!v.value){const _=new Error(`Async component timed out after ${o}ms.`);m(_),v.value=_}},o),h().then(()=>{g.value=!0,p.parent&&ju(p.parent.vnode)&&p.parent.update()}).catch(_=>{m(_),v.value=_}),()=>{if(g.value&&c)return Bp(c,p);if(v.value&&n)return F(n,{error:v.value});if(i&&!b.value)return F(i)}}})}function Bp(t,e){const{ref:i,props:n,children:s,ce:r}=e.vnode,o=F(t,n,s);return o.ref=i,o.ce=r,delete e.vnode.ce,o}const ju=t=>t.type.__isKeepAlive,Hu={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const i=Fi(),n=i.ctx;if(!n.renderer)return()=>{const b=e.default&&e.default();return b&&b.length===1?b[0]:b};const s=new Map,r=new Set;let o=null;const a=i.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:d}}}=n,f=d("div");n.activate=(b,_,y,E,S)=>{const A=b.component;u(b,_,y,0,a),l(A.vnode,b,_,y,A,a,E,b.slotScopeIds,S),Yi(()=>{A.isDeactivated=!1,A.a&&Sa(A.a);const C=b.props&&b.props.onVnodeMounted;C&&Jn(C,A.parent,b)},a)},n.deactivate=b=>{const _=b.component;af(_.m),af(_.a),u(b,f,null,1,a),Yi(()=>{_.da&&Sa(_.da);const y=b.props&&b.props.onVnodeUnmounted;y&&Jn(y,_.parent,b),_.isDeactivated=!0},a)};function h(b){Np(b),c(b,i,a,!0)}function p(b){s.forEach((_,y)=>{const E=mf(_.type);E&&!b(E)&&m(y)})}function m(b){const _=s.get(b);_&&(!o||!Xs(_,o))?h(_):o&&Np(o),s.delete(b),r.delete(b)}Pe(()=>[t.include,t.exclude],([b,_])=>{b&&p(y=>zu(b,y)),_&&p(y=>!zu(_,y))},{flush:"post",deep:!0});let g=null;const v=()=>{g!=null&&(df(i.subTree.type)?Yi(()=>{s.set(g,nf(i.subTree))},i.subTree.suspense):s.set(g,nf(i.subTree)))};return st(v),Ia(v),Ki(()=>{s.forEach(b=>{const{subTree:_,suspense:y}=i,E=nf(_);if(b.type===E.type&&b.key===E.key){Np(E);const S=E.component.da;S&&Yi(S,y);return}h(b)})}),()=>{if(g=null,!e.default)return o=null;const b=e.default(),_=b[0];if(b.length>1)return o=null,b;if(!to(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let y=nf(_);if(y.type===$i)return o=null,y;const E=y.type,S=mf(Fo(y)?y.type.__asyncResolved||{}:E),{include:A,exclude:C,max:T}=t;if(A&&(!S||!zu(A,S))||C&&S&&zu(C,S))return y.shapeFlag&=-257,o=y,_;const I=y.key==null?E:y.key,D=s.get(I);return y.el&&(y=Er(y),_.shapeFlag&128&&(_.ssContent=y)),g=I,D?(y.el=D.el,y.component=D.component,y.transition&&Zr(y,y.transition),y.shapeFlag|=512,r.delete(I),r.add(I)):(r.add(I),T&&r.size>parseInt(T,10)&&m(r.values().next().value)),y.shapeFlag|=256,o=y,df(_.type)?_:y}}};function zu(t,e){return Qe(t)?t.some(i=>zu(i,e)):ht(t)?t.split(",").includes(e):Bv(t)?(t.lastIndex=0,t.test(e)):!1}function fs(t,e){z_(t,"a",e)}function Gu(t,e){z_(t,"da",e)}function z_(t,e,i=dn){const n=t.__wdc||(t.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(sf(e,n,i),i){let s=i.parent;for(;s&&s.parent;)ju(s.parent.vnode)&&Qx(n,e,i,s),s=s.parent}}function Qx(t,e,i,n){const s=sf(e,t,n,!0);ki(()=>{kd(n[e],s)},i)}function Np(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function nf(t){return t.shapeFlag&128?t.ssContent:t}function sf(t,e,i=dn,n=!1){if(i){const s=i[t]||(i[t]=[]),r=e.__weh||(e.__weh=(...o)=>{vr();const a=Ma(i),l=Ls(e,i,t,o);return a(),_r(),l});return n?s.unshift(r):s.push(r),r}}const Qr=t=>(e,i=dn)=>{(!xl||t==="sp")&&sf(t,(...n)=>e(...n),i)},G_=Qr("bm"),st=Qr("m"),Up=Qr("bu"),Ia=Qr("u"),Ki=Qr("bum"),ki=Qr("um"),W_=Qr("sp"),K_=Qr("rtg"),Y_=Qr("rtc");function X_(t,e=dn){sf("ec",t,e)}const Vp="components",Jx="directives";function Ge(t,e){return jp(Vp,t,!0,e)||t}const q_=Symbol.for("v-ndc");function wr(t){return ht(t)?jp(Vp,t,!1)||t:t||q_}function eT(t){return jp(Jx,t)}function jp(t,e,i=!0,n=!1){const s=cn||dn;if(s){const r=s.type;if(t===Vp){const a=mf(r,!1);if(a&&(a===e||a===ci(e)||a===Oo(ci(e))))return r}const o=Z_(s[t]||r[t],e)||Z_(s.appContext[t],e);return!o&&n?r:o}}function Z_(t,e){return t&&(t[e]||t[ci(e)]||t[Oo(ci(e))])}function Ne(t,e,i,n){let s;const r=i&&i[n],o=Qe(t);if(o||ht(t)){const a=o&&Ys(t);let l=!1,u=!1;a&&(l=!ds(t),u=Yr(t),t=$d(t)),s=new Array(t.length);for(let c=0,d=t.length;c<d;c++)s[c]=e(l?u?Hd(un(t[c])):un(t[c]):t[c],c,void 0,r&&r[c])}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,r&&r[a])}else if(Kt(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,r&&r[l]));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];s[l]=e(t[c],c,l,r&&r[l])}}else s=[];return i&&(i[n]=s),s}function El(t,e){for(let i=0;i<e.length;i++){const n=e[i];if(Qe(n))for(let s=0;s<n.length;s++)t[n[s].name]=n[s].fn;else n&&(t[n.name]=n.key?(...s)=>{const r=n.fn(...s);return r&&(r.key=n.key),r}:n.fn)}return t}function mi(t,e,i={},n,s){if(cn.ce||cn.parent&&Fo(cn.parent)&&cn.parent.ce)return e!=="default"&&(i.name=e),L(),_e(Te,null,[F("slot",i,n&&n())],64);let r=t[e];r&&r._c&&(r._d=!1),L();const o=r&&Hp(r(i)),a=i.key||o&&o.key,l=_e(Te,{key:(a&&!On(a)?a:`_${e}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function Hp(t){return t.some(e=>to(e)?!(e.type===$i||e.type===Te&&!Hp(e.children)):!0)?t:null}function zp(t,e){const i={};for(const n in t)i[e&&/[A-Z]/.test(n)?`on:${n}`:Ea(n)]=t[n];return i}const Gp=t=>t?Db(t)?Ju(t):Gp(t.parent):null,Wu=Ot(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Gp(t.parent),$root:t=>Gp(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Xp(t),$forceUpdate:t=>t.f||(t.f=()=>{Pp(t.update)}),$nextTick:t=>t.n||(t.n=ot.bind(t.proxy)),$watch:t=>LT.bind(t)}),Wp=(t,e)=>t!==Dt&&!t.__isScriptSetup&&Wt(t,e),Kp={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return n[e];case 2:return s[e];case 4:return i[e];case 3:return r[e]}else{if(Wp(n,e))return o[e]=1,n[e];if(s!==Dt&&Wt(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&Wt(u,e))return o[e]=3,r[e];if(i!==Dt&&Wt(i,e))return o[e]=4,i[e];Yp&&(o[e]=0)}}const c=Wu[e];let d,f;if(c)return e==="$attrs"&&En(t.attrs,"get",""),c(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(i!==Dt&&Wt(i,e))return o[e]=4,i[e];if(f=l.config.globalProperties,Wt(f,e))return f[e]},set({_:t},e,i){const{data:n,setupState:s,ctx:r}=t;return Wp(s,e)?(s[e]=i,!0):n!==Dt&&Wt(n,e)?(n[e]=i,!0):Wt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=i,!0)},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:s,propsOptions:r,type:o}},a){let l,u;return!!(i[a]||t!==Dt&&a[0]!=="$"&&Wt(t,a)||Wp(e,a)||(l=r[0])&&Wt(l,a)||Wt(n,a)||Wt(Wu,a)||Wt(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(t,e,i){return i.get!=null?t._.accessCache[e]=0:Wt(i,"value")&&this.set(t,e,i.value,null),Reflect.defineProperty(t,e,i)}},tT=Ot({},Kp,{get(t,e){if(e!==Symbol.unscopables)return Kp.get(t,e,t)},has(t,e){return e[0]!=="_"&&!hp(e)}});function iT(){return null}function nT(){return null}function sT(t){}function rT(t){}function oT(){return null}function aT(){}function lT(t,e){return null}function uT(){return Q_().slots}function cT(){return Q_().attrs}function Q_(t){const e=Fi();return e.setupContext||(e.setupContext=$b(e))}function Ku(t){return Qe(t)?t.reduce((e,i)=>(e[i]=null,e),{}):t}function dT(t,e){const i=Ku(t);for(const n in e){if(n.startsWith("__skip"))continue;let s=i[n];s?Qe(s)||dt(s)?s=i[n]={type:s,default:e[n]}:s.default=e[n]:s===null&&(s=i[n]={default:e[n]}),s&&e[`__skip_${n}`]&&(s.skipFactory=!0)}return i}function Sn(t,e){return!t||!e?t||e:Qe(t)&&Qe(e)?t.concat(e):Ot({},Ku(t),Ku(e))}function fT(t,e){const i={};for(const n in t)e.includes(n)||Object.defineProperty(i,n,{enumerable:!0,get:()=>t[n]});return i}function hT(t){const e=Fi();let i=t();return om(),Cd(i)&&(i=i.catch(n=>{throw Ma(e),n})),[i,()=>Ma(e)]}let Yp=!0;function pT(t){const e=Xp(t),i=t.proxy,n=t.ctx;Yp=!1,e.beforeCreate&&J_(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:_,unmounted:y,render:E,renderTracked:S,renderTriggered:A,errorCaptured:C,serverPrefetch:T,expose:I,inheritAttrs:D,components:R,directives:O,filters:M}=e;if(u&&mT(u,n,null),o)for(const B in o){const W=o[B];dt(W)&&(n[B]=W.bind(i))}if(s){const B=s.call(i,i);Kt(B)&&(t.data=Mt(B))}if(Yp=!0,r)for(const B in r){const W=r[B],te=dt(W)?W.bind(i,i):dt(W.get)?W.get.bind(i,i):tn,re=!dt(W)&&dt(W.set)?W.set.bind(i):tn,q=ge({get:te,set:re});Object.defineProperty(n,B,{enumerable:!0,configurable:!0,get:()=>q.value,set:le=>q.value=le})}if(a)for(const B in a)eb(a[B],n,i,B);if(l){const B=dt(l)?l.call(i):l;Reflect.ownKeys(B).forEach(W=>{Xu(W,B[W])})}c&&J_(c,t,"c");function $(B,W){Qe(W)?W.forEach(te=>B(te.bind(i))):W&&B(W.bind(i))}if($(G_,d),$(st,f),$(Up,h),$(Ia,p),$(fs,m),$(Gu,g),$(X_,C),$(Y_,S),$(K_,A),$(Ki,b),$(ki,y),$(W_,T),Qe(I))if(I.length){const B=t.exposed||(t.exposed={});I.forEach(W=>{Object.defineProperty(B,W,{get:()=>i[W],set:te=>i[W]=te,enumerable:!0})})}else t.exposed||(t.exposed={});E&&t.render===tn&&(t.render=E),D!=null&&(t.inheritAttrs=D),R&&(t.components=R),O&&(t.directives=O),T&&Fp(t)}function mT(t,e,i=tn){Qe(t)&&(t=qp(t));for(const n in t){const s=t[n];let r;Kt(s)?"default"in s?r=hs(s.from||n,s.default,!0):r=hs(s.from||n):r=hs(s),kt(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function J_(t,e,i){Ls(Qe(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,i)}function eb(t,e,i,n){let s=n.includes(".")?wb(i,n):()=>i[n];if(ht(t)){const r=e[t];dt(r)&&Pe(s,r)}else if(dt(t))Pe(s,t.bind(i));else if(Kt(t))if(Qe(t))t.forEach(r=>eb(r,e,i,n));else{const r=dt(t.handler)?t.handler.bind(i):e[t.handler];dt(r)&&Pe(s,r,t)}}function Xp(t){const e=t.type,{mixins:i,extends:n}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!i&&!n?l=e:(l={},s.length&&s.forEach(u=>rf(l,u,o,!0)),rf(l,e,o)),Kt(e)&&r.set(e,l),l}function rf(t,e,i,n=!1){const{mixins:s,extends:r}=e;r&&rf(t,r,i,!0),s&&s.forEach(o=>rf(t,o,i,!0));for(const o in e)if(!(n&&o==="expose")){const a=gT[o]||i&&i[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const gT={data:tb,props:ib,emits:ib,methods:Yu,computed:Yu,beforeCreate:$n,created:$n,beforeMount:$n,mounted:$n,beforeUpdate:$n,updated:$n,beforeDestroy:$n,beforeUnmount:$n,destroyed:$n,unmounted:$n,activated:$n,deactivated:$n,errorCaptured:$n,serverPrefetch:$n,components:Yu,directives:Yu,watch:_T,provide:tb,inject:vT};function tb(t,e){return e?t?function(){return Ot(dt(t)?t.call(this,this):t,dt(e)?e.call(this,this):e)}:e:t}function vT(t,e){return Yu(qp(t),qp(e))}function qp(t){if(Qe(t)){const e={};for(let i=0;i<t.length;i++)e[t[i]]=t[i];return e}return t}function $n(t,e){return t?[...new Set([].concat(t,e))]:e}function Yu(t,e){return t?Ot(Object.create(null),t,e):e}function ib(t,e){return t?Qe(t)&&Qe(e)?[...new Set([...t,...e])]:Ot(Object.create(null),Ku(t),Ku(e??{})):e}function _T(t,e){if(!t)return e;if(!e)return t;const i=Ot(Object.create(null),t);for(const n in e)i[n]=$n(t[n],e[n]);return i}function nb(){return{app:null,config:{isNativeTag:ba,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bT=0;function yT(t,e){return function(n,s=null){dt(n)||(n=Ot({},n)),s!=null&&!Kt(s)&&(s=null);const r=nb(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:bT++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Bb,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&dt(c.install)?(o.add(c),c.install(u,...d)):dt(c)&&(o.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||F(n,s);return h.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(h,c):t(h,c,f),l=!0,u._container=c,c.__vue_app__=u,Ju(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Ls(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=Ra;Ra=u;try{return c()}finally{Ra=d}}};return u}}let Ra=null;function Xu(t,e){if(dn){let i=dn.provides;const n=dn.parent&&dn.parent.provides;n===i&&(i=dn.provides=Object.create(n)),i[t]=e}}function hs(t,e,i=!1){const n=Fi();if(n||Ra){let s=Ra?Ra._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return i&&dt(e)?e.call(n&&n.proxy):e}}function of(){return!!(Fi()||Ra)}const sb={},rb=()=>Object.create(sb),ob=t=>Object.getPrototypeOf(t)===sb;function wT(t,e,i,n=!1){const s={},r=rb();t.propsDefaults=Object.create(null),ab(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);i?t.props=n?s:__(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function ET(t,e,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=Ct(s),[l]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(lf(t.emitsOptions,f))continue;const h=e[f];if(l)if(Wt(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const p=ci(f);s[p]=Zp(l,a,p,h,t,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{ab(t,e,s,r)&&(u=!0);let c;for(const d in a)(!e||!Wt(e,d)&&((c=bn(d))===d||!Wt(e,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(s[d]=Zp(l,a,d,void 0,t,!0)):delete s[d]);if(r!==a)for(const d in r)(!e||!Wt(e,d))&&(delete r[d],u=!0)}u&&Wr(t.attrs,"set","")}function ab(t,e,i,n){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(zr(l))continue;const u=e[l];let c;s&&Wt(s,c=ci(l))?!r||!r.includes(c)?i[c]=u:(a||(a={}))[c]=u:lf(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(r){const l=Ct(i),u=a||Dt;for(let c=0;c<r.length;c++){const d=r[c];i[d]=Zp(s,l,d,u[d],t,!Wt(u,d))}}return o}function Zp(t,e,i,n,s,r){const o=t[i];if(o!=null){const a=Wt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&dt(l)){const{propsDefaults:u}=s;if(i in u)n=u[i];else{const c=Ma(s);n=u[i]=l.call(null,e),c()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===bn(i))&&(n=!0))}return n}const ST=new WeakMap;function lb(t,e,i=!1){const n=i?ST:e.propsCache,s=n.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!dt(t)){const c=d=>{l=!0;const[f,h]=lb(d,e,!0);Ot(o,f),h&&a.push(...h)};!i&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!r&&!l)return Kt(t)&&n.set(t,_a),_a;if(Qe(r))for(let c=0;c<r.length;c++){const d=ci(r[c]);ub(d)&&(o[d]=Dt)}else if(r)for(const c in r){const d=ci(c);if(ub(d)){const f=r[c],h=o[d]=Qe(f)||dt(f)?{type:f}:Ot({},f),p=h.type;let m=!1,g=!0;if(Qe(p))for(let v=0;v<p.length;++v){const b=p[v],_=dt(b)&&b.name;if(_==="Boolean"){m=!0;break}else _==="String"&&(g=!1)}else m=dt(p)&&p.name==="Boolean";h[0]=m,h[1]=g,(m||Wt(h,"default"))&&a.push(d)}}const u=[o,a];return Kt(t)&&n.set(t,u),u}function ub(t){return t[0]!=="$"&&!zr(t)}const Qp=t=>t==="_"||t==="_ctx"||t==="$stable",Jp=t=>Qe(t)?t.map(Qn):[Qn(t)],xT=(t,e,i)=>{if(e._n)return e;const n=H((...s)=>Jp(e(...s)),i);return n._c=!1,n},cb=(t,e,i)=>{const n=t._ctx;for(const s in t){if(Qp(s))continue;const r=t[s];if(dt(r))e[s]=xT(s,r,n);else if(r!=null){const o=Jp(r);e[s]=()=>o}}},db=(t,e)=>{const i=Jp(e);t.slots.default=()=>i},fb=(t,e,i)=>{for(const n in e)(i||!Qp(n))&&(t[n]=e[n])},TT=(t,e,i)=>{const n=t.slots=rb();if(t.vnode.shapeFlag&32){const s=e._;s?(fb(n,e,i),i&&fp(n,"_",s,!0)):cb(e,n)}else e&&db(t,e)},AT=(t,e,i)=>{const{vnode:n,slots:s}=t;let r=!0,o=Dt;if(n.shapeFlag&32){const a=e._;a?i&&a===1?r=!1:fb(s,e,i):(r=!e.$stable,cb(e,s)),o=e}else e&&(db(t,e),o={default:1});if(r)for(const a in s)!Qp(a)&&o[a]==null&&delete s[a]},Yi=kb;function hb(t){return mb(t)}function pb(t){return mb(t,jx)}function mb(t,e){const i=Iu();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=tn,insertStaticContent:p}=t,m=(Z,ae,ie,ue=null,ve=null,j=null,K=void 0,oe=null,he=!!ae.dynamicChildren)=>{if(Z===ae)return;Z&&!Xs(Z,ae)&&(ue=ye(Z),le(Z,ve,j,!0),Z=null),ae.patchFlag===-2&&(he=!1,ae.dynamicChildren=null);const{type:ce,ref:me,shapeFlag:Q}=ae;switch(ce){case eo:g(Z,ae,ie,ue);break;case $i:v(Z,ae,ie,ue);break;case Da:Z==null&&b(ae,ie,ue,K);break;case Te:R(Z,ae,ie,ue,ve,j,K,oe,he);break;default:Q&1?E(Z,ae,ie,ue,ve,j,K,oe,he):Q&6?O(Z,ae,ie,ue,ve,j,K,oe,he):(Q&64||Q&128)&&ce.process(Z,ae,ie,ue,ve,j,K,oe,he,Ke)}me!=null&&ve?bl(me,Z&&Z.ref,j,ae||Z,!ae):me==null&&Z&&Z.ref!=null&&bl(Z.ref,null,j,Z,!0)},g=(Z,ae,ie,ue)=>{if(Z==null)n(ae.el=a(ae.children),ie,ue);else{const ve=ae.el=Z.el;ae.children!==Z.children&&u(ve,ae.children)}},v=(Z,ae,ie,ue)=>{Z==null?n(ae.el=l(ae.children||""),ie,ue):ae.el=Z.el},b=(Z,ae,ie,ue)=>{[Z.el,Z.anchor]=p(Z.children,ae,ie,ue,Z.el,Z.anchor)},_=({el:Z,anchor:ae},ie,ue)=>{let ve;for(;Z&&Z!==ae;)ve=f(Z),n(Z,ie,ue),Z=ve;n(ae,ie,ue)},y=({el:Z,anchor:ae})=>{let ie;for(;Z&&Z!==ae;)ie=f(Z),s(Z),Z=ie;s(ae)},E=(Z,ae,ie,ue,ve,j,K,oe,he)=>{ae.type==="svg"?K="svg":ae.type==="math"&&(K="mathml"),Z==null?S(ae,ie,ue,ve,j,K,oe,he):T(Z,ae,ve,j,K,oe,he)},S=(Z,ae,ie,ue,ve,j,K,oe)=>{let he,ce;const{props:me,shapeFlag:Q,transition:Y,dirs:ee}=Z;if(he=Z.el=o(Z.type,j,me&&me.is,me),Q&8?c(he,Z.children):Q&16&&C(Z.children,he,null,ue,ve,em(Z,j),K,oe),ee&&yr(Z,null,ue,"created"),A(he,Z,Z.scopeId,K,ue),me){for(const ke in me)ke!=="value"&&!zr(ke)&&r(he,ke,null,me[ke],j,ue);"value"in me&&r(he,"value",null,me.value,j),(ce=me.onVnodeBeforeMount)&&Jn(ce,ue,Z)}ee&&yr(Z,null,ue,"beforeMount");const we=gb(ve,Y);we&&Y.beforeEnter(he),n(he,ae,ie),((ce=me&&me.onVnodeMounted)||we||ee)&&Yi(()=>{ce&&Jn(ce,ue,Z),we&&Y.enter(he),ee&&yr(Z,null,ue,"mounted")},ve)},A=(Z,ae,ie,ue,ve)=>{if(ie&&h(Z,ie),ue)for(let j=0;j<ue.length;j++)h(Z,ue[j]);if(ve){let j=ve.subTree;if(ae===j||df(j.type)&&(j.ssContent===ae||j.ssFallback===ae)){const K=ve.vnode;A(Z,K,K.scopeId,K.slotScopeIds,ve.parent)}}},C=(Z,ae,ie,ue,ve,j,K,oe,he=0)=>{for(let ce=he;ce<Z.length;ce++){const me=Z[ce]=oe?Bo(Z[ce]):Qn(Z[ce]);m(null,me,ae,ie,ue,ve,j,K,oe)}},T=(Z,ae,ie,ue,ve,j,K)=>{const oe=ae.el=Z.el;let{patchFlag:he,dynamicChildren:ce,dirs:me}=ae;he|=Z.patchFlag&16;const Q=Z.props||Dt,Y=ae.props||Dt;let ee;if(ie&&Pa(ie,!1),(ee=Y.onVnodeBeforeUpdate)&&Jn(ee,ie,ae,Z),me&&yr(ae,Z,ie,"beforeUpdate"),ie&&Pa(ie,!0),(Q.innerHTML&&Y.innerHTML==null||Q.textContent&&Y.textContent==null)&&c(oe,""),ce?I(Z.dynamicChildren,ce,oe,ie,ue,em(ae,ve),j):K||W(Z,ae,oe,null,ie,ue,em(ae,ve),j,!1),he>0){if(he&16)D(oe,Q,Y,ie,ve);else if(he&2&&Q.class!==Y.class&&r(oe,"class",null,Y.class,ve),he&4&&r(oe,"style",Q.style,Y.style,ve),he&8){const we=ae.dynamicProps;for(let ke=0;ke<we.length;ke++){const de=we[ke],N=Q[de],J=Y[de];(J!==N||de==="value")&&r(oe,de,N,J,ve,ie)}}he&1&&Z.children!==ae.children&&c(oe,ae.children)}else!K&&ce==null&&D(oe,Q,Y,ie,ve);((ee=Y.onVnodeUpdated)||me)&&Yi(()=>{ee&&Jn(ee,ie,ae,Z),me&&yr(ae,Z,ie,"updated")},ue)},I=(Z,ae,ie,ue,ve,j,K)=>{for(let oe=0;oe<ae.length;oe++){const he=Z[oe],ce=ae[oe],me=he.el&&(he.type===Te||!Xs(he,ce)||he.shapeFlag&198)?d(he.el):ie;m(he,ce,me,null,ue,ve,j,K,!0)}},D=(Z,ae,ie,ue,ve)=>{if(ae!==ie){if(ae!==Dt)for(const j in ae)!zr(j)&&!(j in ie)&&r(Z,j,ae[j],null,ve,ue);for(const j in ie){if(zr(j))continue;const K=ie[j],oe=ae[j];K!==oe&&j!=="value"&&r(Z,j,oe,K,ve,ue)}"value"in ie&&r(Z,"value",ae.value,ie.value,ve)}},R=(Z,ae,ie,ue,ve,j,K,oe,he)=>{const ce=ae.el=Z?Z.el:a(""),me=ae.anchor=Z?Z.anchor:a("");let{patchFlag:Q,dynamicChildren:Y,slotScopeIds:ee}=ae;ee&&(oe=oe?oe.concat(ee):ee),Z==null?(n(ce,ie,ue),n(me,ie,ue),C(ae.children||[],ie,me,ve,j,K,oe,he)):Q>0&&Q&64&&Y&&Z.dynamicChildren?(I(Z.dynamicChildren,Y,ie,ve,j,K,oe),(ae.key!=null||ve&&ae===ve.subTree)&&tm(Z,ae,!0)):W(Z,ae,ie,me,ve,j,K,oe,he)},O=(Z,ae,ie,ue,ve,j,K,oe,he)=>{ae.slotScopeIds=oe,Z==null?ae.shapeFlag&512?ve.ctx.activate(ae,ie,ue,K,he):M(ae,ie,ue,ve,j,K,he):U(Z,ae,he)},M=(Z,ae,ie,ue,ve,j,K)=>{const oe=Z.component=Pb(Z,ue,ve);if(ju(Z)&&(oe.ctx.renderer=Ke),Ob(oe,!1,K),oe.asyncDep){if(ve&&ve.registerDep(oe,$,K),!Z.el){const he=oe.subTree=F($i);v(null,he,ae,ie),Z.placeholder=he.el}}else $(oe,Z,ae,ie,ve,j,K)},U=(Z,ae,ie)=>{const ue=ae.component=Z.component;if(OT(Z,ae,ie))if(ue.asyncDep&&!ue.asyncResolved){B(ue,ae,ie);return}else ue.next=ae,ue.update();else ae.el=Z.el,ue.vnode=ae},$=(Z,ae,ie,ue,ve,j,K)=>{const oe=()=>{if(Z.isMounted){let{next:Q,bu:Y,u:ee,parent:we,vnode:ke}=Z;{const Ee=vb(Z);if(Ee){Q&&(Q.el=ke.el,B(Z,Q,K)),Ee.asyncDep.then(()=>{Z.isUnmounted||oe()});return}}let de=Q,N;Pa(Z,!1),Q?(Q.el=ke.el,B(Z,Q,K)):Q=ke,Y&&Sa(Y),(N=Q.props&&Q.props.onVnodeBeforeUpdate)&&Jn(N,we,Q,ke),Pa(Z,!0);const J=uf(Z),fe=Z.subTree;Z.subTree=J,m(fe,J,d(fe.el),ye(fe),Z,ve,j),Q.el=J.el,de===null&&cf(Z,J.el),ee&&Yi(ee,ve),(N=Q.props&&Q.props.onVnodeUpdated)&&Yi(()=>Jn(N,we,Q,ke),ve)}else{let Q;const{el:Y,props:ee}=ae,{bm:we,m:ke,parent:de,root:N,type:J}=Z,fe=Fo(ae);if(Pa(Z,!1),we&&Sa(we),!fe&&(Q=ee&&ee.onVnodeBeforeMount)&&Jn(Q,de,ae),Pa(Z,!0),Y&&Re){const Ee=()=>{Z.subTree=uf(Z),Re(Y,Z.subTree,Z,ve,null)};fe&&J.__asyncHydrate?J.__asyncHydrate(Y,Z,Ee):Ee()}else{N.ce&&N.ce._def.shadowRoot!==!1&&N.ce._injectChildStyle(J);const Ee=Z.subTree=uf(Z);m(null,Ee,ie,ue,Z,ve,j),ae.el=Ee.el}if(ke&&Yi(ke,ve),!fe&&(Q=ee&&ee.onVnodeMounted)){const Ee=ae;Yi(()=>Jn(Q,de,Ee),ve)}(ae.shapeFlag&256||de&&Fo(de.vnode)&&de.vnode.shapeFlag&256)&&Z.a&&Yi(Z.a,ve),Z.isMounted=!0,ae=ie=ue=null}};Z.scope.on();const he=Z.effect=new Pu(oe);Z.scope.off();const ce=Z.update=he.run.bind(he),me=Z.job=he.runIfDirty.bind(he);me.i=Z,me.id=Z.uid,he.scheduler=()=>Pp(me),Pa(Z,!0),ce()},B=(Z,ae,ie)=>{ae.component=Z;const ue=Z.vnode.props;Z.vnode=ae,Z.next=null,ET(Z,ae.props,ue,ie),AT(Z,ae.children,ie),vr(),k_(Z),_r()},W=(Z,ae,ie,ue,ve,j,K,oe,he=!1)=>{const ce=Z&&Z.children,me=Z?Z.shapeFlag:0,Q=ae.children,{patchFlag:Y,shapeFlag:ee}=ae;if(Y>0){if(Y&128){re(ce,Q,ie,ue,ve,j,K,oe,he);return}else if(Y&256){te(ce,Q,ie,ue,ve,j,K,oe,he);return}}ee&8?(me&16&&pe(ce,ve,j),Q!==ce&&c(ie,Q)):me&16?ee&16?re(ce,Q,ie,ue,ve,j,K,oe,he):pe(ce,ve,j,!0):(me&8&&c(ie,""),ee&16&&C(Q,ie,ue,ve,j,K,oe,he))},te=(Z,ae,ie,ue,ve,j,K,oe,he)=>{Z=Z||_a,ae=ae||_a;const ce=Z.length,me=ae.length,Q=Math.min(ce,me);let Y;for(Y=0;Y<Q;Y++){const ee=ae[Y]=he?Bo(ae[Y]):Qn(ae[Y]);m(Z[Y],ee,ie,null,ve,j,K,oe,he)}ce>me?pe(Z,ve,j,!0,!1,Q):C(ae,ie,ue,ve,j,K,oe,he,Q)},re=(Z,ae,ie,ue,ve,j,K,oe,he)=>{let ce=0;const me=ae.length;let Q=Z.length-1,Y=me-1;for(;ce<=Q&&ce<=Y;){const ee=Z[ce],we=ae[ce]=he?Bo(ae[ce]):Qn(ae[ce]);if(Xs(ee,we))m(ee,we,ie,null,ve,j,K,oe,he);else break;ce++}for(;ce<=Q&&ce<=Y;){const ee=Z[Q],we=ae[Y]=he?Bo(ae[Y]):Qn(ae[Y]);if(Xs(ee,we))m(ee,we,ie,null,ve,j,K,oe,he);else break;Q--,Y--}if(ce>Q){if(ce<=Y){const ee=Y+1,we=ee<me?ae[ee].el:ue;for(;ce<=Y;)m(null,ae[ce]=he?Bo(ae[ce]):Qn(ae[ce]),ie,we,ve,j,K,oe,he),ce++}}else if(ce>Y)for(;ce<=Q;)le(Z[ce],ve,j,!0),ce++;else{const ee=ce,we=ce,ke=new Map;for(ce=we;ce<=Y;ce++){const Ve=ae[ce]=he?Bo(ae[ce]):Qn(ae[ce]);Ve.key!=null&&ke.set(Ve.key,ce)}let de,N=0;const J=Y-we+1;let fe=!1,Ee=0;const Ae=new Array(J);for(ce=0;ce<J;ce++)Ae[ce]=0;for(ce=ee;ce<=Q;ce++){const Ve=Z[ce];if(N>=J){le(Ve,ve,j,!0);continue}let tt;if(Ve.key!=null)tt=ke.get(Ve.key);else for(de=we;de<=Y;de++)if(Ae[de-we]===0&&Xs(Ve,ae[de])){tt=de;break}tt===void 0?le(Ve,ve,j,!0):(Ae[tt-we]=ce+1,tt>=Ee?Ee=tt:fe=!0,m(Ve,ae[tt],ie,null,ve,j,K,oe,he),N++)}const De=fe?kT(Ae):_a;for(de=De.length-1,ce=J-1;ce>=0;ce--){const Ve=we+ce,tt=ae[Ve],Fe=ae[Ve+1],je=Ve+1<me?Fe.el||Fe.placeholder:ue;Ae[ce]===0?m(null,tt,ie,je,ve,j,K,oe,he):fe&&(de<0||ce!==De[de]?q(tt,ie,je,2):de--)}}},q=(Z,ae,ie,ue,ve=null)=>{const{el:j,type:K,transition:oe,children:he,shapeFlag:ce}=Z;if(ce&6){q(Z.component.subTree,ae,ie,ue);return}if(ce&128){Z.suspense.move(ae,ie,ue);return}if(ce&64){K.move(Z,ae,ie,Ke);return}if(K===Te){n(j,ae,ie);for(let Q=0;Q<he.length;Q++)q(he[Q],ae,ie,ue);n(Z.anchor,ae,ie);return}if(K===Da){_(Z,ae,ie);return}if(ue!==2&&ce&1&&oe)if(ue===0)oe.beforeEnter(j),n(j,ae,ie),Yi(()=>oe.enter(j),ve);else{const{leave:Q,delayLeave:Y,afterLeave:ee}=oe,we=()=>{Z.ctx.isUnmounted?s(j):n(j,ae,ie)},ke=()=>{j._isLeaving&&j[qr](!0),Q(j,()=>{we(),ee&&ee()})};Y?Y(j,we,ke):ke()}else n(j,ae,ie)},le=(Z,ae,ie,ue=!1,ve=!1)=>{const{type:j,props:K,ref:oe,children:he,dynamicChildren:ce,shapeFlag:me,patchFlag:Q,dirs:Y,cacheIndex:ee}=Z;if(Q===-2&&(ve=!1),oe!=null&&(vr(),bl(oe,null,ie,Z,!0),_r()),ee!=null&&(ae.renderCache[ee]=void 0),me&256){ae.ctx.deactivate(Z);return}const we=me&1&&Y,ke=!Fo(Z);let de;if(ke&&(de=K&&K.onVnodeBeforeUnmount)&&Jn(de,ae,Z),me&6)ne(Z.component,ie,ue);else{if(me&128){Z.suspense.unmount(ie,ue);return}we&&yr(Z,null,ae,"beforeUnmount"),me&64?Z.type.remove(Z,ae,ie,Ke,ue):ce&&!ce.hasOnce&&(j!==Te||Q>0&&Q&64)?pe(ce,ae,ie,!1,!0):(j===Te&&Q&384||!ve&&me&16)&&pe(he,ae,ie),ue&&be(Z)}(ke&&(de=K&&K.onVnodeUnmounted)||we)&&Yi(()=>{de&&Jn(de,ae,Z),we&&yr(Z,null,ae,"unmounted")},ie)},be=Z=>{const{type:ae,el:ie,anchor:ue,transition:ve}=Z;if(ae===Te){se(ie,ue);return}if(ae===Da){y(Z);return}const j=()=>{s(ie),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(Z.shapeFlag&1&&ve&&!ve.persisted){const{leave:K,delayLeave:oe}=ve,he=()=>K(ie,j);oe?oe(Z.el,j,he):he()}else j()},se=(Z,ae)=>{let ie;for(;Z!==ae;)ie=f(Z),s(Z),Z=ie;s(ae)},ne=(Z,ae,ie)=>{const{bum:ue,scope:ve,job:j,subTree:K,um:oe,m:he,a:ce}=Z;af(he),af(ce),ue&&Sa(ue),ve.stop(),j&&(j.flags|=8,le(K,Z,ae,ie)),oe&&Yi(oe,ae),Yi(()=>{Z.isUnmounted=!0},ae)},pe=(Z,ae,ie,ue=!1,ve=!1,j=0)=>{for(let K=j;K<Z.length;K++)le(Z[K],ae,ie,ue,ve)},ye=Z=>{if(Z.shapeFlag&6)return ye(Z.component.subTree);if(Z.shapeFlag&128)return Z.suspense.next();const ae=f(Z.anchor||Z.el),ie=ae&&ae[I_];return ie?f(ie):ae};let xe=!1;const Be=(Z,ae,ie)=>{Z==null?ae._vnode&&le(ae._vnode,null,null,!0):m(ae._vnode||null,Z,ae,null,null,null,ie),ae._vnode=Z,xe||(xe=!0,k_(),Kd(),xe=!1)},Ke={p:m,um:le,m:q,r:be,mt:M,mc:C,pc:W,pbc:I,n:ye,o:t};let Xe,Re;return e&&([Xe,Re]=e(Ke)),{render:Be,hydrate:Xe,createApp:yT(Be,Xe)}}function em({type:t,props:e},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:i}function Pa({effect:t,job:e},i){i?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function gb(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function tm(t,e,i=!1){const n=t.children,s=e.children;if(Qe(n)&&Qe(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=Bo(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&tm(o,a)),a.type===eo&&a.patchFlag!==-1&&(a.el=o.el),a.type===$i&&!a.el&&(a.el=o.el)}}function kT(t){const e=t.slice(),i=[0];let n,s,r,o,a;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(s=i[i.length-1],t[s]<u){e[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,t[i[a]]<u?r=a+1:o=a;u<t[i[r]]&&(r>0&&(e[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=e[o];return i}function vb(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:vb(e)}function af(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const _b=Symbol.for("v-scx"),bb=()=>hs(_b);function Jr(t,e){return qu(t,null,e)}function CT(t,e){return qu(t,null,{flush:"post"})}function yb(t,e){return qu(t,null,{flush:"sync"})}function Pe(t,e,i){return qu(t,e,i)}function qu(t,e,i=Dt){const{immediate:n,deep:s,flush:r,once:o}=i,a=Ot({},i),l=e&&n||!e&&r!=="post";let u;if(xl){if(r==="sync"){const h=bb();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=tn,h.resume=tn,h.pause=tn,h}}const c=dn;a.call=(h,p,m)=>Ls(h,c,p,m);let d=!1;r==="post"?a.scheduler=h=>{Yi(h,c&&c.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(h,p)=>{p?h():Pp(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=wx(t,e,a);return xl&&(u?u.push(f):l&&f()),f}function LT(t,e,i){const n=this.proxy,s=ht(t)?t.includes(".")?wb(n,t):()=>n[t]:t.bind(n,n);let r;dt(e)?r=e:(r=e.handler,i=e);const o=Ma(this),a=qu(s,r.bind(n),i);return o(),a}function wb(t,e){const i=e.split(".");return()=>{let n=t;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}function Fn(t,e,i=Dt){const n=Fi(),s=ci(e),r=bn(e),o=Eb(t,s),a=Lp((l,u)=>{let c,d=Dt,f;return yb(()=>{const h=t[s];yn(c,h)&&(c=h,u())}),{get(){return l(),i.get?i.get(c):c},set(h){const p=i.set?i.set(h):h;if(!yn(p,c)&&!(d!==Dt&&yn(h,d)))return;const m=n.vnode.props;m&&(e in m||s in m||r in m)&&(`onUpdate:${e}`in m||`onUpdate:${s}`in m||`onUpdate:${r}`in m)||(c=h,u()),n.emit(`update:${e}`,p),yn(h,p)&&yn(h,d)&&!yn(p,f)&&u(),d=h,f=p}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Dt:a,done:!1}:{done:!0}}}},a}const Eb=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ci(e)}Modifiers`]||t[`${bn(e)}Modifiers`];function IT(t,e,...i){if(t.isUnmounted)return;const n=t.vnode.props||Dt;let s=i;const r=e.startsWith("update:"),o=r&&Eb(n,e.slice(7));o&&(o.trim&&(s=i.map(c=>ht(c)?c.trim():c)),o.number&&(s=i.map(Cu)));let a,l=n[a=Ea(e)]||n[a=Ea(ci(e))];!l&&r&&(l=n[a=Ea(bn(e))]),l&&Ls(l,t,6,s);const u=n[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ls(u,t,6,s)}}function Sb(t,e,i=!1){const n=e.emitsCache,s=n.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!dt(t)){const l=u=>{const c=Sb(u,e,!0);c&&(a=!0,Ot(o,c))};!i&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(Kt(t)&&n.set(t,null),null):(Qe(r)?r.forEach(l=>o[l]=null):Ot(o,r),Kt(t)&&n.set(t,o),o)}function lf(t,e){return!t||!Po(e)?!1:(e=e.slice(2).replace(/Once$/,""),Wt(t,e[0].toLowerCase()+e.slice(1))||Wt(t,bn(e))||Wt(t,e))}function sle(){}function uf(t){const{type:e,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=t,g=Uu(t);let v,b;try{if(i.shapeFlag&4){const y=s||n,E=y;v=Qn(u.call(E,y,c,d,h,f,p)),b=a}else{const y=e;v=Qn(y.length>1?y(d,{attrs:a,slots:o,emit:l}):y(d,null)),b=e.props?a:PT(a)}}catch(y){Qu.length=0,Ca(y,t,1),v=F($i)}let _=v;if(b&&m!==!1){const y=Object.keys(b),{shapeFlag:E}=_;y.length&&E&7&&(r&&y.some(Ad)&&(b=DT(b,r)),_=Er(_,b,!1,!0))}return i.dirs&&(_=Er(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(i.dirs):i.dirs),i.transition&&Zr(_,i.transition),v=_,Uu(g),v}function RT(t,e=!0){let i;for(let n=0;n<t.length;n++){const s=t[n];if(to(s)){if(s.type!==$i||s.children==="v-if"){if(i)return;i=s}}else return}return i}const PT=t=>{let e;for(const i in t)(i==="class"||i==="style"||Po(i))&&((e||(e={}))[i]=t[i]);return e},DT=(t,e)=>{const i={};for(const n in t)(!Ad(n)||!(n.slice(9)in e))&&(i[n]=t[n]);return i};function OT(t,e,i){const{props:n,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?xb(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(o[f]!==n[f]&&!lf(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?xb(n,o,u):!0:!!o;return!1}function xb(t,e,i){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(e[r]!==t[r]&&!lf(i,r))return!0}return!1}function cf({vnode:t,parent:e},i){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=i,e=e.parent;else break}}const df=t=>t.__isSuspense;let im=0;const MT={name:"Suspense",__isSuspense:!0,process(t,e,i,n,s,r,o,a,l,u){if(t==null)$T(e,i,n,s,r,o,a,l,u);else{if(r&&r.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}FT(t,e,i,n,s,o,a,l,u)}},hydrate:BT,normalize:NT};function Zu(t,e){const i=t.props&&t.props[e];dt(i)&&i()}function $T(t,e,i,n,s,r,o,a,l){const{p:u,o:{createElement:c}}=l,d=c("div"),f=t.suspense=Tb(t,s,n,e,d,i,r,o,a,l);u(null,f.pendingBranch=t.ssContent,d,null,n,f,r,o),f.deps>0?(Zu(t,"onPending"),Zu(t,"onFallback"),u(null,t.ssFallback,e,i,n,null,r,o),Sl(f,t.ssFallback)):f.resolve(!1,!0)}function FT(t,e,i,n,s,r,o,a,{p:l,um:u,o:{createElement:c}}){const d=e.suspense=t.suspense;d.vnode=e,e.el=t.el;const f=e.ssContent,h=e.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:v}=d;if(m)d.pendingBranch=f,Xs(f,m)?(l(m,f,d.hiddenContainer,null,s,d,r,o,a),d.deps<=0?d.resolve():g&&(v||(l(p,h,i,n,s,null,r,o,a),Sl(d,h)))):(d.pendingId=im++,v?(d.isHydrating=!1,d.activeBranch=m):u(m,s,d),d.deps=0,d.effects.length=0,d.hiddenContainer=c("div"),g?(l(null,f,d.hiddenContainer,null,s,d,r,o,a),d.deps<=0?d.resolve():(l(p,h,i,n,s,null,r,o,a),Sl(d,h))):p&&Xs(f,p)?(l(p,f,i,n,s,d,r,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,s,d,r,o,a),d.deps<=0&&d.resolve()));else if(p&&Xs(f,p))l(p,f,i,n,s,d,r,o,a),Sl(d,f);else if(Zu(e,"onPending"),d.pendingBranch=f,f.shapeFlag&512?d.pendingId=f.component.suspenseId:d.pendingId=im++,l(null,f,d.hiddenContainer,null,s,d,r,o,a),d.deps<=0)d.resolve();else{const{timeout:b,pendingId:_}=d;b>0?setTimeout(()=>{d.pendingId===_&&d.fallback(h)},b):b===0&&d.fallback(h)}}function Tb(t,e,i,n,s,r,o,a,l,u,c=!1){const{p:d,m:f,um:h,n:p,o:{parentNode:m,remove:g}}=u;let v;const b=UT(t);b&&e&&e.pendingBranch&&(v=e.pendingId,e.deps++);const _=t.props?Lu(t.props.timeout):void 0,y=r,E={vnode:t,parent:e,parentComponent:i,namespace:o,container:n,hiddenContainer:s,deps:0,pendingId:im++,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(S=!1,A=!1){const{vnode:C,activeBranch:T,pendingBranch:I,pendingId:D,effects:R,parentComponent:O,container:M}=E;let U=!1;E.isHydrating?E.isHydrating=!1:S||(U=T&&I.transition&&I.transition.mode==="out-in",U&&(T.transition.afterLeave=()=>{D===E.pendingId&&(f(I,M,r===y?p(T):r,0),Bu(R))}),T&&(m(T.el)===M&&(r=p(T)),h(T,O,E,!0)),U||f(I,M,r,0)),Sl(E,I),E.pendingBranch=null,E.isInFallback=!1;let $=E.parent,B=!1;for(;$;){if($.pendingBranch){$.effects.push(...R),B=!0;break}$=$.parent}!B&&!U&&Bu(R),E.effects=[],b&&e&&e.pendingBranch&&v===e.pendingId&&(e.deps--,e.deps===0&&!A&&e.resolve()),Zu(C,"onResolve")},fallback(S){if(!E.pendingBranch)return;const{vnode:A,activeBranch:C,parentComponent:T,container:I,namespace:D}=E;Zu(A,"onFallback");const R=p(C),O=()=>{E.isInFallback&&(d(null,S,I,R,T,null,D,a,l),Sl(E,S))},M=S.transition&&S.transition.mode==="out-in";M&&(C.transition.afterLeave=O),E.isInFallback=!0,h(C,T,null,!0),M||O()},move(S,A,C){E.activeBranch&&f(E.activeBranch,S,A,C),E.container=S},next(){return E.activeBranch&&p(E.activeBranch)},registerDep(S,A,C){const T=!!E.pendingBranch;T&&E.deps++;const I=S.vnode.el;S.asyncDep.catch(D=>{Ca(D,S,0)}).then(D=>{if(S.isUnmounted||E.isUnmounted||E.pendingId!==S.suspenseId)return;S.asyncResolved=!0;const{vnode:R}=S;am(S,D,!1),I&&(R.el=I);const O=!I&&S.subTree.el;A(S,R,m(I||S.subTree.el),I?null:p(S.subTree),E,o,C),O&&g(O),cf(S,R.el),T&&--E.deps===0&&E.resolve()})},unmount(S,A){E.isUnmounted=!0,E.activeBranch&&h(E.activeBranch,i,S,A),E.pendingBranch&&h(E.pendingBranch,i,S,A)}};return E}function BT(t,e,i,n,s,r,o,a,l){const u=e.suspense=Tb(e,n,i,t.parentNode,document.createElement("div"),null,s,r,o,a,!0),c=l(t,u.pendingBranch=e.ssContent,i,u,r,o);return u.deps===0&&u.resolve(!1,!0),c}function NT(t){const{shapeFlag:e,children:i}=t,n=e&32;t.ssContent=Ab(n?i.default:i),t.ssFallback=n?Ab(i.fallback):F($i)}function Ab(t){let e;if(dt(t)){const i=Oa&&t._c;i&&(t._d=!1,L()),t=t(),i&&(t._d=!0,e=xn,Cb())}return Qe(t)&&(t=RT(t)),t=Qn(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(i=>i!==t)),t}function kb(t,e){e&&e.pendingBranch?Qe(t)?e.effects.push(...t):e.effects.push(t):Bu(t)}function Sl(t,e){t.activeBranch=e;const{vnode:i,parentComponent:n}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;i.el=s,n&&n.subTree===i&&(n.vnode.el=s,cf(n,s))}function UT(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Te=Symbol.for("v-fgt"),eo=Symbol.for("v-txt"),$i=Symbol.for("v-cmt"),Da=Symbol.for("v-stc"),Qu=[];let xn=null;function L(t=!1){Qu.push(xn=t?null:[])}function Cb(){Qu.pop(),xn=Qu[Qu.length-1]||null}let Oa=1;function nm(t,e=!1){Oa+=t,t<0&&xn&&e&&(xn.hasOnce=!0)}function Lb(t){return t.dynamicChildren=Oa>0?xn||_a:null,Cb(),Oa>0&&xn&&xn.push(t),t}function P(t,e,i,n,s,r){return Lb(x(t,e,i,n,s,r,!0))}function _e(t,e,i,n,s){return Lb(F(t,e,i,n,s,!0))}function to(t){return t?t.__v_isVNode===!0:!1}function Xs(t,e){return t.type===e.type&&t.key===e.key}function VT(t){}const Ib=({key:t})=>t??null,ff=({ref:t,ref_key:e,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?ht(t)||kt(t)||dt(t)?{i:cn,r:t,k:e,f:!!i}:t:null);function x(t,e=null,i=null,n=0,s=null,r=t===Te?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ib(e),ref:e&&ff(e),scopeId:Xd,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:cn};return a?(sm(l,i),r&128&&t.normalize(l)):i&&(l.shapeFlag|=ht(i)?8:16),Oa>0&&!o&&xn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&xn.push(l),l}const F=jT;function jT(t,e=null,i=null,n=0,s=null,r=!1){if((!t||t===q_)&&(t=$i),to(t)){const a=Er(t,e,!0);return i&&sm(a,i),Oa>0&&!r&&xn&&(a.shapeFlag&6?xn[xn.indexOf(t)]=a:xn.push(a)),a.patchFlag=-2,a}if(QT(t)&&(t=t.__vccOpts),e){e=Rb(e);let{class:a,style:l}=e;a&&!ht(a)&&(e.class=Ie(a)),Kt(l)&&(Vd(l)&&!Qe(l)&&(l=Ot({},l)),e.style=Ue(l))}const o=ht(t)?1:df(t)?128:R_(t)?64:Kt(t)?4:dt(t)?2:0;return x(t,e,i,n,s,o,r,!0)}function Rb(t){return t?Vd(t)||ob(t)?Ot({},t):t:null}function Er(t,e,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=t,u=e?Sr(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ib(u),ref:e&&e.ref?i&&r?Qe(r)?r.concat(ff(e)):[r,ff(e)]:ff(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Te?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Er(t.ssContent),ssFallback:t.ssFallback&&Er(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&Zr(c,l.clone(c)),c}function He(t=" ",e=0){return F(eo,null,t,e)}function HT(t,e){const i=F(Da,null,t);return i.staticCount=e,i}function X(t="",e=!1){return e?(L(),_e($i,null,t)):F($i,null,t)}function Qn(t){return t==null||typeof t=="boolean"?F($i):Qe(t)?F(Te,null,t.slice()):to(t)?Bo(t):F(eo,null,String(t))}function Bo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Er(t)}function sm(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(Qe(e))i=16;else if(typeof e=="object")if(n&65){const s=e.default;s&&(s._c&&(s._d=!1),sm(t,s()),s._c&&(s._d=!0));return}else{i=32;const s=e._;!s&&!ob(e)?e._ctx=cn:s===3&&cn&&(cn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else dt(e)?(e={default:e,_ctx:cn},i=32):(e=String(e),n&64?(i=16,e=[He(e)]):i=8);t.children=e,t.shapeFlag|=i}function Sr(...t){const e={};for(let i=0;i<t.length;i++){const n=t[i];for(const s in n)if(s==="class")e.class!==n.class&&(e.class=Ie([e.class,n.class]));else if(s==="style")e.style=Ue([e.style,n.style]);else if(Po(s)){const r=e[s],o=n[s];o&&r!==o&&!(Qe(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=n[s])}return e}function Jn(t,e,i,n=null){Ls(t,e,7,[i,n])}const zT=nb();let GT=0;function Pb(t,e,i){const n=t.type,s=(e?e.appContext:t.appContext)||zT,r={uid:GT++,vnode:t,type:n,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _p(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lb(n,s),emitsOptions:Sb(n,s),emit:null,emitted:null,propsDefaults:Dt,inheritAttrs:n.inheritAttrs,ctx:Dt,data:Dt,props:Dt,attrs:Dt,slots:Dt,refs:Dt,setupState:Dt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=IT.bind(null,r),t.ce&&t.ce(r),r}let dn=null;const Fi=()=>dn||cn;let hf,rm;{const t=Iu(),e=(i,n)=>{let s;return(s=t[i])||(s=t[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};hf=e("__VUE_INSTANCE_SETTERS__",i=>dn=i),rm=e("__VUE_SSR_SETTERS__",i=>xl=i)}const Ma=t=>{const e=dn;return hf(t),t.scope.on(),()=>{t.scope.off(),hf(e)}},om=()=>{dn&&dn.scope.off(),hf(null)};function Db(t){return t.vnode.shapeFlag&4}let xl=!1;function Ob(t,e=!1,i=!1){e&&rm(e);const{props:n,children:s}=t.vnode,r=Db(t);wT(t,n,r,e),TT(t,s,i||e);const o=r?WT(t,e):void 0;return e&&rm(!1),o}function WT(t,e){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Kp);const{setup:n}=i;if(n){vr();const s=t.setupContext=n.length>1?$b(t):null,r=Ma(t),o=ka(n,t,0,[t.props,s]),a=Cd(o);if(_r(),r(),(a||t.sp)&&!Fo(t)&&Fp(t),a){if(o.then(om,om),e)return o.then(l=>{am(t,l,e)}).catch(l=>{Ca(l,t,0)});t.asyncDep=o}else am(t,o,e)}else Mb(t,e)}function am(t,e,i){dt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Kt(e)&&(t.setupState=Cp(e)),Mb(t,i)}let pf,lm;function KT(t){pf=t,lm=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,tT))}}const YT=()=>!pf;function Mb(t,e,i){const n=t.type;if(!t.render){if(!e&&pf&&!n.render){const s=n.template||Xp(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=n,u=Ot(Ot({isCustomElement:r,delimiters:a},o),l);n.render=pf(s,u)}}t.render=n.render||tn,lm&&lm(t)}{const s=Ma(t);vr();try{pT(t)}finally{_r(),s()}}}const XT={get(t,e){return En(t,"get",""),t[e]}};function $b(t){const e=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,XT),slots:t.slots,emit:t.emit,expose:e}}function Ju(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cp(jd(t.exposed)),{get(e,i){if(i in e)return e[i];if(i in Wu)return Wu[i](t)},has(e,i){return i in e||i in Wu}})):t.proxy}const qT=/(?:^|[-_])(\w)/g,ZT=t=>t.replace(qT,e=>e.toUpperCase()).replace(/[-_]/g,"");function mf(t,e=!0){return dt(t)?t.displayName||t.name:t.name||e&&t.__name}function Fb(t,e,i=!1){let n=mf(e);if(!n&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(n=s[1])}if(!n&&t&&t.parent){const s=r=>{for(const o in r)if(r[o]===e)return o};n=s(t.components||t.parent.type.components)||s(t.appContext.components)}return n?ZT(n):i?"App":"Anonymous"}function QT(t){return dt(t)&&"__vccOpts"in t}const ge=(t,e)=>vx(t,e,xl);function nn(t,e,i){const n=arguments.length;return n===2?Kt(e)&&!Qe(e)?to(e)?F(t,null,[e]):F(t,e):F(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&to(i)&&(i=[i]),F(t,e,i))}function JT(){}function eA(t,e,i,n){const s=i[n];if(s&&um(s,t))return s;const r=e();return r.memo=t.slice(),r.cacheIndex=n,i[n]=r}function um(t,e){const i=t.memo;if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(yn(i[n],e[n]))return!1;return Oa>0&&xn&&xn.push(t),!0}const Bb="3.5.19",tA=tn,iA=Ix,nA=vl,sA=L_,rA={createComponentInstance:Pb,setupComponent:Ob,renderComponentRoot:uf,setCurrentRenderingInstance:Uu,isVNode:to,normalizeVNode:Qn,getComponentPublicInstance:Ju,ensureValidVNode:Hp,pushWarningContext:Ex,popWarningContext:Sx},oA=null,aA=null,lA=null;/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cm;const Nb=typeof window<"u"&&window.trustedTypes;if(Nb)try{cm=Nb.createPolicy("vue",{createHTML:t=>t})}catch{}const Ub=cm?t=>cm.createHTML(t):t=>t,uA="http://www.w3.org/2000/svg",cA="http://www.w3.org/1998/Math/MathML",io=typeof document<"u"?document:null,Vb=io&&io.createElement("template"),dA={insert:(t,e,i)=>{e.insertBefore(t,i||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,i,n)=>{const s=e==="svg"?io.createElementNS(uA,t):e==="mathml"?io.createElementNS(cA,t):i?io.createElement(t,{is:i}):io.createElement(t);return t==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:t=>io.createTextNode(t),createComment:t=>io.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>io.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,i,n,s,r){const o=i?i.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{Vb.innerHTML=Ub(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=Vb.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,i)}return[o?o.nextSibling:e.firstChild,i?i.previousSibling:e.lastChild]}},No="transition",ec="animation",Tl=Symbol("_vtc"),jb={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Hb=Ot({},Mp,jb),nt=(t=>(t.displayName="Transition",t.props=Hb,t))((t,{slots:e})=>nn(N_,Gb(t),e)),$a=(t,e=[])=>{Qe(t)?t.forEach(i=>i(...e)):t&&t(...e)},zb=t=>t?Qe(t)?t.some(e=>e.length>1):t.length>1:!1;function Gb(t){const e={};for(const R in t)R in jb||(e[R]=t[R]);if(t.css===!1)return e;const{name:i="v",type:n,duration:s,enterFromClass:r=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=r,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:d=`${i}-leave-from`,leaveActiveClass:f=`${i}-leave-active`,leaveToClass:h=`${i}-leave-to`}=t,p=fA(s),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:_,onLeave:y,onLeaveCancelled:E,onBeforeAppear:S=v,onAppear:A=b,onAppearCancelled:C=_}=e,T=(R,O,M,U)=>{R._enterCancelled=U,Uo(R,O?c:a),Uo(R,O?u:o),M&&M()},I=(R,O)=>{R._isLeaving=!1,Uo(R,d),Uo(R,h),Uo(R,f),O&&O()},D=R=>(O,M)=>{const U=R?A:b,$=()=>T(O,R,M);$a(U,[O,$]),Wb(()=>{Uo(O,R?l:r),xr(O,R?c:a),zb(U)||Kb(O,n,m,$)})};return Ot(e,{onBeforeEnter(R){$a(v,[R]),xr(R,r),xr(R,o)},onBeforeAppear(R){$a(S,[R]),xr(R,l),xr(R,u)},onEnter:D(!1),onAppear:D(!0),onLeave(R,O){R._isLeaving=!0;const M=()=>I(R,O);xr(R,d),R._enterCancelled?(xr(R,f),fm()):(fm(),xr(R,f)),Wb(()=>{R._isLeaving&&(Uo(R,d),xr(R,h),zb(y)||Kb(R,n,g,M))}),$a(y,[R,M])},onEnterCancelled(R){T(R,!1,void 0,!0),$a(_,[R])},onAppearCancelled(R){T(R,!0,void 0,!0),$a(C,[R])},onLeaveCancelled(R){I(R),$a(E,[R])}})}function fA(t){if(t==null)return null;if(Kt(t))return[dm(t.enter),dm(t.leave)];{const e=dm(t);return[e,e]}}function dm(t){return Lu(t)}function xr(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t[Tl]||(t[Tl]=new Set)).add(e)}function Uo(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const i=t[Tl];i&&(i.delete(e),i.size||(t[Tl]=void 0))}function Wb(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let hA=0;function Kb(t,e,i,n){const s=t._endId=++hA,r=()=>{s===t._endId&&n()};if(i!=null)return setTimeout(r,i);const{type:o,timeout:a,propCount:l}=Yb(t,e);if(!o)return n();const u=o+"end";let c=0;const d=()=>{t.removeEventListener(u,f),r()},f=h=>{h.target===t&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),t.addEventListener(u,f)}function Yb(t,e){const i=window.getComputedStyle(t),n=p=>(i[p]||"").split(", "),s=n(`${No}Delay`),r=n(`${No}Duration`),o=Xb(s,r),a=n(`${ec}Delay`),l=n(`${ec}Duration`),u=Xb(a,l);let c=null,d=0,f=0;e===No?o>0&&(c=No,d=o,f=r.length):e===ec?u>0&&(c=ec,d=u,f=l.length):(d=Math.max(o,u),c=d>0?o>u?No:ec:null,f=c?c===No?r.length:l.length:0);const h=c===No&&/\b(transform|all)(,|$)/.test(n(`${No}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function Xb(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((i,n)=>qb(i)+qb(t[n])))}function qb(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function fm(){return document.body.offsetHeight}function pA(t,e,i){const n=t[Tl];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):i?t.setAttribute("class",e):t.className=e}const gf=Symbol("_vod"),Zb=Symbol("_vsh"),ii={beforeMount(t,{value:e},{transition:i}){t[gf]=t.style.display==="none"?"":t.style.display,i&&e?i.beforeEnter(t):tc(t,e)},mounted(t,{value:e},{transition:i}){i&&e&&i.enter(t)},updated(t,{value:e,oldValue:i},{transition:n}){!e!=!i&&(n?e?(n.beforeEnter(t),tc(t,!0),n.enter(t)):n.leave(t,()=>{tc(t,!1)}):tc(t,e))},beforeUnmount(t,{value:e}){tc(t,e)}};function tc(t,e){t.style.display=e?t[gf]:"none",t[Zb]=!e}function mA(){ii.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const Qb=Symbol("");function gA(t){const e=Fi();if(!e)return;const i=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>vf(r,s))},n=()=>{const s=t(e.proxy);e.ce?vf(e.ce,s):hm(e.subTree,s),i(s)};Up(()=>{Bu(n)}),st(()=>{Pe(n,tn,{flush:"post"});const s=new MutationObserver(n);s.observe(e.subTree.el.parentNode,{childList:!0}),ki(()=>s.disconnect())})}function hm(t,e){if(t.shapeFlag&128){const i=t.suspense;t=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{hm(i.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)vf(t.el,e);else if(t.type===Te)t.children.forEach(i=>hm(i,e));else if(t.type===Da){let{el:i,anchor:n}=t;for(;i&&(vf(i,e),i!==n);)i=i.nextSibling}}function vf(t,e){if(t.nodeType===1){const i=t.style;let n="";for(const s in e){const r=e_(e[s]);i.setProperty(`--${s}`,r),n+=`--${s}: ${r};`}i[Qb]=n}}const vA=/(^|;)\s*display\s*:/;function _A(t,e,i){const n=t.style,s=ht(i);let r=!1;if(i&&!s){if(e)if(ht(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&_f(n,a,"")}else for(const o in e)i[o]==null&&_f(n,o,"");for(const o in i)o==="display"&&(r=!0),_f(n,o,i[o])}else if(s){if(e!==i){const o=n[Qb];o&&(i+=";"+o),n.cssText=i,r=vA.test(i)}}else e&&t.removeAttribute("style");gf in t&&(t[gf]=r?n.display:"",t[Zb]&&(n.display="none"))}const Jb=/\s*!important$/;function _f(t,e,i){if(Qe(i))i.forEach(n=>_f(t,e,n));else if(i==null&&(i=""),e.startsWith("--"))t.setProperty(e,i);else{const n=bA(t,e);Jb.test(i)?t.setProperty(bn(n),i.replace(Jb,""),"important"):t[n]=i}}const ey=["Webkit","Moz","ms"],pm={};function bA(t,e){const i=pm[e];if(i)return i;let n=ci(e);if(n!=="filter"&&n in t)return pm[e]=n;n=Oo(n);for(let s=0;s<ey.length;s++){const r=ey[s]+n;if(r in t)return pm[e]=r}return e}const ty="http://www.w3.org/1999/xlink";function iy(t,e,i,n,s,r=qv(e)){n&&e.startsWith("xlink:")?i==null?t.removeAttributeNS(ty,e.slice(6,e.length)):t.setAttributeNS(ty,e,i):i==null||r&&!mp(i)?t.removeAttribute(e):t.setAttribute(e,r?"":On(i)?String(i):i)}function ny(t,e,i,n,s){if(e==="innerHTML"||e==="textContent"){i!=null&&(t[e]=e==="innerHTML"?Ub(i):i);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,l=i==null?t.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in t))&&(t.value=l),i==null&&t.removeAttribute(e),t._value=i;return}let o=!1;if(i===""||i==null){const a=typeof t[e];a==="boolean"?i=mp(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{t[e]=i}catch{}o&&t.removeAttribute(s||e)}function no(t,e,i,n){t.addEventListener(e,i,n)}function yA(t,e,i,n){t.removeEventListener(e,i,n)}const sy=Symbol("_vei");function wA(t,e,i,n,s=null){const r=t[sy]||(t[sy]={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=EA(e);if(n){const u=r[e]=TA(n,s);no(t,a,u,l)}else o&&(yA(t,a,o,l),r[e]=void 0)}}const ry=/(?:Once|Passive|Capture)$/;function EA(t){let e;if(ry.test(t)){e={};let n;for(;n=t.match(ry);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):bn(t.slice(2)),e]}let mm=0;const SA=Promise.resolve(),xA=()=>mm||(SA.then(()=>mm=0),mm=Date.now());function TA(t,e){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Ls(AA(n,i.value),e,5,[n])};return i.value=t,i.attached=xA(),i}function AA(t,e){if(Qe(e)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},e.map(n=>s=>!s._stopped&&n&&n(s))}else return e}const oy=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,kA=(t,e,i,n,s,r)=>{const o=s==="svg";e==="class"?pA(t,n,o):e==="style"?_A(t,i,n):Po(e)?Ad(e)||wA(t,e,i,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):CA(t,e,n,o))?(ny(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&iy(t,e,n,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ht(n))?ny(t,ci(e),n,r,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),iy(t,e,n,o))};function CA(t,e,i,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&oy(e)&&dt(i));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return oy(e)&&ht(i)?!1:e in t}const ay={};/*! #__NO_SIDE_EFFECTS__ */function ly(t,e,i){const n=Me(t,e);ku(n)&&Ot(n,e);class s extends bf{constructor(o){super(n,o,i)}}return s.def=n,s}const LA=((t,e)=>ly(t,e,xy)),IA=typeof HTMLElement<"u"?HTMLElement:class{};class bf extends IA{constructor(e,i={},n=nc){super(),this._def=e,this._props=i,this._createApp=n,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&n!==nc?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof bf){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,ot(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);this._ob=new MutationObserver(n=>{for(const s of n)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(n,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:r,styles:o}=n;let a;if(r&&!Qe(r))for(const l in r){const u=r[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=Lu(this._props[l])),(a||(a=Object.create(null)))[ci(l)]=!0)}this._numberProps=a,this._resolveProps(n),this.shadowRoot&&this._applyStyles(o),this._mount(n)},i=this._def.__asyncLoader;i?this._pendingResolve=i().then(n=>{n.configureApp=this._def.configureApp,e(this._def=n,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const i=this._instance&&this._instance.exposed;if(i)for(const n in i)Wt(this,n)||Object.defineProperty(this,n,{get:()=>w(i[n])})}_resolveProps(e){const{props:i}=e,n=Qe(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&n.includes(s)&&this._setProp(s,this[s]);for(const s of n.map(ci))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(r){this._setProp(s,r,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const i=this.hasAttribute(e);let n=i?this.getAttribute(e):ay;const s=ci(e);i&&this._numberProps&&this._numberProps[s]&&(n=Lu(n)),this._setProp(s,n,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,i,n=!0,s=!1){if(i!==this._props[e]&&(i===ay?delete this._props[e]:(this._props[e]=i,e==="key"&&this._app&&(this._app._ceVNode.key=i)),s&&this._instance&&this._update(),n)){const r=this._ob;r&&r.disconnect(),i===!0?this.setAttribute(bn(e),""):typeof i=="string"||typeof i=="number"?this.setAttribute(bn(e),i+""):i||this.removeAttribute(bn(e)),r&&r.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),Sy(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const i=F(this._def,Ot(e,this._props));return this._instance||(i.ce=n=>{this._instance=n,n.ce=this,n.isCE=!0;const s=(r,o)=>{this.dispatchEvent(new CustomEvent(r,ku(o[0])?Ot({detail:o},o[0]):{detail:o}))};n.emit=(r,...o)=>{s(r,o),bn(r)!==r&&s(bn(r),o)},this._setParent()}),i}_applyStyles(e,i){if(!e)return;if(i){if(i===this._def||this._styleChildren.has(i))return;this._styleChildren.add(i)}const n=this._nonce;for(let s=e.length-1;s>=0;s--){const r=document.createElement("style");n&&r.setAttribute("nonce",n),r.textContent=e[s],this.shadowRoot.prepend(r)}}_parseSlots(){const e=this._slots={};let i;for(;i=this.firstChild;){const n=i.nodeType===1&&i.getAttribute("slot")||"default";(e[n]||(e[n]=[])).push(i),this.removeChild(i)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),i=this._instance.type.__scopeId;for(let n=0;n<e.length;n++){const s=e[n],r=s.getAttribute("name")||"default",o=this._slots[r],a=s.parentNode;if(o)for(const l of o){if(i&&l.nodeType===1){const u=i+"-s",c=document.createTreeWalker(l,1);l.setAttribute(u,"");let d;for(;d=c.nextNode();)d.setAttribute(u,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function uy(t){const e=Fi(),i=e&&e.ce;return i||null}function RA(){const t=uy();return t&&t.shadowRoot}function PA(t="$style"){{const e=Fi();if(!e)return Dt;const i=e.type.__cssModules;if(!i)return Dt;const n=i[t];return n||Dt}}const cy=new WeakMap,dy=new WeakMap,yf=Symbol("_moveCb"),fy=Symbol("_enterCb"),so=(t=>(delete t.props.mode,t))({name:"TransitionGroup",props:Ot({},Hb,{tag:String,moveClass:String}),setup(t,{slots:e}){const i=Fi(),n=Op();let s,r;return Ia(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!$A(s[0].el,i.vnode.el,o)){s=[];return}s.forEach(DA),s.forEach(OA);const a=s.filter(MA);fm(),a.forEach(l=>{const u=l.el,c=u.style;xr(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[yf]=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u[yf]=null,Uo(u,o))};u.addEventListener("transitionend",d)}),s=[]}),()=>{const o=Ct(t),a=Gb(o);let l=o.tag||Te;if(s=[],r)for(let u=0;u<r.length;u++){const c=r[u];c.el&&c.el instanceof Element&&(s.push(c),Zr(c,_l(c,a,n,i)),cy.set(c,c.el.getBoundingClientRect()))}r=e.default?Jd(e.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&Zr(c,_l(c,a,n,i))}return F(l,null,r)}}});function DA(t){const e=t.el;e[yf]&&e[yf](),e[fy]&&e[fy]()}function OA(t){dy.set(t,t.el.getBoundingClientRect())}function MA(t){const e=cy.get(t),i=dy.get(t),n=e.left-i.left,s=e.top-i.top;if(n||s){const r=t.el.style;return r.transform=r.webkitTransform=`translate(${n}px,${s}px)`,r.transitionDuration="0s",t}}function $A(t,e,i){const n=t.cloneNode(),s=t[Tl];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),i.split(/\s+/).forEach(a=>a&&n.classList.add(a)),n.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(n);const{hasTransform:o}=Yb(n);return r.removeChild(n),o}const Vo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Qe(e)?i=>Sa(e,i):e};function FA(t){t.target.composing=!0}function hy(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Rs=Symbol("_assign"),qs={created(t,{modifiers:{lazy:e,trim:i,number:n}},s){t[Rs]=Vo(s);const r=n||s.props&&s.props.type==="number";no(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;i&&(a=a.trim()),r&&(a=Cu(a)),t[Rs](a)}),i&&no(t,"change",()=>{t.value=t.value.trim()}),e||(no(t,"compositionstart",FA),no(t,"compositionend",hy),no(t,"change",hy))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:i,modifiers:{lazy:n,trim:s,number:r}},o){if(t[Rs]=Vo(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?Cu(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===i||s&&t.value.trim()===l)||(t.value=l))}},wf={deep:!0,created(t,e,i){t[Rs]=Vo(i),no(t,"change",()=>{const n=t._modelValue,s=Al(t),r=t.checked,o=t[Rs];if(Qe(n)){const a=Ru(n,s),l=a!==-1;if(r&&!l)o(n.concat(s));else if(!r&&l){const u=[...n];u.splice(a,1),o(u)}}else if(Do(n)){const a=new Set(n);r?a.add(s):a.delete(s),o(a)}else o(vy(t,r))})},mounted:py,beforeUpdate(t,e,i){t[Rs]=Vo(i),py(t,e,i)}};function py(t,{value:e,oldValue:i},n){t._modelValue=e;let s;if(Qe(e))s=Ru(e,n.props.value)>-1;else if(Do(e))s=e.has(n.props.value);else{if(e===i)return;s=Gr(e,vy(t,!0))}t.checked!==s&&(t.checked=s)}const gm={created(t,{value:e},i){t.checked=Gr(e,i.props.value),t[Rs]=Vo(i),no(t,"change",()=>{t[Rs](Al(t))})},beforeUpdate(t,{value:e,oldValue:i},n){t[Rs]=Vo(n),e!==i&&(t.checked=Gr(e,n.props.value))}},my={deep:!0,created(t,{value:e,modifiers:{number:i}},n){const s=Do(e);no(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?Cu(Al(o)):Al(o));t[Rs](t.multiple?s?new Set(r):r:r[0]),t._assigning=!0,ot(()=>{t._assigning=!1})}),t[Rs]=Vo(n)},mounted(t,{value:e}){gy(t,e)},beforeUpdate(t,e,i){t[Rs]=Vo(i)},updated(t,{value:e}){t._assigning||gy(t,e)}};function gy(t,e){const i=t.multiple,n=Qe(e);if(!(i&&!n&&!Do(e))){for(let s=0,r=t.options.length;s<r;s++){const o=t.options[s],a=Al(o);if(i)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Ru(e,a)>-1}else o.selected=e.has(a);else if(Gr(Al(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!i&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Al(t){return"_value"in t?t._value:t.value}function vy(t,e){const i=e?"_trueValue":"_falseValue";return i in t?t[i]:e}const vm={created(t,e,i){Ef(t,e,i,null,"created")},mounted(t,e,i){Ef(t,e,i,null,"mounted")},beforeUpdate(t,e,i,n){Ef(t,e,i,n,"beforeUpdate")},updated(t,e,i,n){Ef(t,e,i,n,"updated")}};function _y(t,e){switch(t){case"SELECT":return my;case"TEXTAREA":return qs;default:switch(e){case"checkbox":return wf;case"radio":return gm;default:return qs}}}function Ef(t,e,i,n,s){const o=_y(t.tagName,i.props&&i.props.type)[s];o&&o(t,e,i,n)}function BA(){qs.getSSRProps=({value:t})=>({value:t}),gm.getSSRProps=({value:t},e)=>{if(e.props&&Gr(e.props.value,t))return{checked:!0}},wf.getSSRProps=({value:t},e)=>{if(Qe(t)){if(e.props&&Ru(t,e.props.value)>-1)return{checked:!0}}else if(Do(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},vm.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const i=_y(e.type.toUpperCase(),e.props&&e.props.type);if(i.getSSRProps)return i.getSSRProps(t,e)}}const NA=["ctrl","shift","alt","meta"],UA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>NA.some(i=>t[`${i}Key`]&&!e.includes(i))},ft=(t,e)=>{const i=t._withMods||(t._withMods={}),n=e.join(".");return i[n]||(i[n]=((s,...r)=>{for(let o=0;o<e.length;o++){const a=UA[e[o]];if(a&&a(s,e))return}return t(s,...r)}))},VA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},kl=(t,e)=>{const i=t._withKeys||(t._withKeys={}),n=e.join(".");return i[n]||(i[n]=(s=>{if(!("key"in s))return;const r=bn(s.key);if(e.some(o=>o===r||VA[o]===r))return t(s)}))},by=Ot({patchProp:kA},dA);let ic,yy=!1;function wy(){return ic||(ic=hb(by))}function Ey(){return ic=yy?ic:pb(by),yy=!0,ic}const Sy=((...t)=>{wy().render(...t)}),jA=((...t)=>{Ey().hydrate(...t)}),nc=((...t)=>{const e=wy().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=Ay(n);if(!s)return;const r=e._component;!dt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,Ty(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),xy=((...t)=>{const e=Ey().createApp(...t),{mount:i}=e;return e.mount=n=>{const s=Ay(n);if(s)return i(s,!0,Ty(s))},e});function Ty(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ay(t){return ht(t)?document.querySelector(t):t}let ky=!1;const HA=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:N_,BaseTransitionPropsValidators:Mp,Comment:$i,DeprecationTypes:lA,EffectScope:_p,ErrorCodes:Lx,ErrorTypeStrings:iA,Fragment:Te,KeepAlive:Hu,ReactiveEffect:Pu,Static:Da,Suspense:MT,Teleport:La,Text:eo,TrackOpTypes:_x,Transition:nt,TransitionGroup:so,TriggerOpTypes:bx,VueElement:bf,assertNumber:Cx,callWithAsyncErrorHandling:Ls,callWithErrorHandling:ka,camelize:ci,capitalize:Oo,cloneVNode:Er,compatUtils:aA,computed:ge,createApp:nc,createBlock:_e,createCommentVNode:X,createElementBlock:P,createElementVNode:x,createHydrationRenderer:pb,createPropsRestProxy:fT,createRenderer:hb,createSSRApp:xy,createSlots:El,createStaticVNode:HT,createTextVNode:He,createVNode:F,customRef:Lp,defineAsyncComponent:jt,defineComponent:Me,defineCustomElement:ly,defineEmits:nT,defineExpose:sT,defineModel:aT,defineOptions:rT,defineProps:iT,defineSSRCustomElement:LA,defineSlots:oT,devtools:nA,effect:zS,effectScope:Rd,getCurrentInstance:Fi,getCurrentScope:Pd,getCurrentWatcher:yx,getTransitionRawChildren:Jd,guardReactiveProps:Rb,h:nn,handleError:Ca,hasInjectionContext:of,hydrate:jA,hydrateOnIdle:Wx,hydrateOnInteraction:qx,hydrateOnMediaQuery:Xx,hydrateOnVisible:Yx,initCustomFormatter:JT,initDirectivesForSSR:()=>{ky||(ky=!0,BA(),mA())},inject:hs,isMemoSame:um,isProxy:Vd,isReactive:Ys,isReadonly:Yr,isRef:kt,isRuntimeOnly:YT,isShallow:ds,isVNode:to,markRaw:jd,mergeDefaults:dT,mergeModels:Sn,mergeProps:Sr,nextTick:ot,normalizeClass:Ie,normalizeProps:zv,normalizeStyle:Ue,onActivated:fs,onBeforeMount:G_,onBeforeUnmount:Ki,onBeforeUpdate:Up,onDeactivated:Gu,onErrorCaptured:X_,onMounted:st,onRenderTracked:Y_,onRenderTriggered:K_,onScopeDispose:Dd,onServerPrefetch:W_,onUnmounted:ki,onUpdated:Ia,onWatcherCleanup:S_,openBlock:L,popScopeId:Ox,provide:Xu,proxyRefs:Cp,pushScopeId:Dx,queuePostFlushCb:Bu,reactive:Mt,readonly:Ta,ref:z,registerRuntimeCompiler:KT,render:Sy,renderList:Ne,renderSlot:mi,resolveComponent:Ge,resolveDirective:eT,resolveDynamicComponent:wr,resolveFilter:oA,resolveTransitionHooks:_l,setBlockTracking:nm,setDevtoolsHook:sA,setTransitionHooks:Zr,shallowReactive:__,shallowReadonly:b_,shallowRef:Zt,ssrContextKey:_b,ssrUtils:rA,stop:GS,toDisplayString:G,toHandlerKey:Ea,toHandlers:zp,toRaw:Ct,toRef:Ip,toRefs:w_,toValue:Vt,transformVNodeArgs:VT,triggerRef:dx,unref:w,useAttrs:cT,useCssModule:PA,useCssVars:gA,useHost:uy,useId:Bx,useModel:Fn,useSSRContext:bb,useShadowRoot:RA,useSlots:uT,useTemplateRef:Nx,useTransitionState:Op,vModelCheckbox:wf,vModelDynamic:vm,vModelRadio:gm,vModelSelect:my,vModelText:qs,vShow:ii,version:Bb,warn:tA,watch:Pe,watchEffect:Jr,watchPostEffect:CT,watchSyncEffect:yb,withAsyncContext:hT,withCtx:H,withDefaults:lT,withDirectives:Bt,withKeys:kl,withMemo:eA,withModifiers:ft,withScopeId:Mx},Symbol.toStringTag,{value:"Module"}));function Sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xf(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),i}var Tf={exports:{}},zA=Tf.exports,Cy;function GA(){return Cy||(Cy=1,(function(t,e){(function(i,n){n(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:zA,function(i){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)i.exports=globalThis.browser;else{const n="The message port closed before a response was received.",s=r=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(A,C=void 0){super(C),this.createItem=A}get(A){return this.has(A)||this.set(A,this.createItem(A)),super.get(A)}}const l=S=>S&&typeof S=="object"&&typeof S.then=="function",u=(S,A)=>(...C)=>{r.runtime.lastError?S.reject(new Error(r.runtime.lastError.message)):A.singleCallbackArg||C.length<=1&&A.singleCallbackArg!==!1?S.resolve(C[0]):S.resolve(C)},c=S=>S==1?"argument":"arguments",d=(S,A)=>function(T,...I){if(I.length<A.minArgs)throw new Error(`Expected at least ${A.minArgs} ${c(A.minArgs)} for ${S}(), got ${I.length}`);if(I.length>A.maxArgs)throw new Error(`Expected at most ${A.maxArgs} ${c(A.maxArgs)} for ${S}(), got ${I.length}`);return new Promise((D,R)=>{if(A.fallbackToNoCallback)try{T[S](...I,u({resolve:D,reject:R},A))}catch(O){console.warn(`${S} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,O),T[S](...I),A.fallbackToNoCallback=!1,A.noCallback=!0,D()}else A.noCallback?(T[S](...I),D()):T[S](...I,u({resolve:D,reject:R},A))})},f=(S,A,C)=>new Proxy(A,{apply(T,I,D){return C.call(I,S,...D)}});let h=Function.call.bind(Object.prototype.hasOwnProperty);const p=(S,A={},C={})=>{let T=Object.create(null),I={has(R,O){return O in S||O in T},get(R,O,M){if(O in T)return T[O];if(!(O in S))return;let U=S[O];if(typeof U=="function")if(typeof A[O]=="function")U=f(S,S[O],A[O]);else if(h(C,O)){let $=d(O,C[O]);U=f(S,S[O],$)}else U=U.bind(S);else if(typeof U=="object"&&U!==null&&(h(A,O)||h(C,O)))U=p(U,A[O],C[O]);else if(h(C,"*"))U=p(U,A[O],C["*"]);else return Object.defineProperty(T,O,{configurable:!0,enumerable:!0,get(){return S[O]},set($){S[O]=$}}),U;return T[O]=U,U},set(R,O,M,U){return O in T?T[O]=M:S[O]=M,!0},defineProperty(R,O,M){return Reflect.defineProperty(T,O,M)},deleteProperty(R,O){return Reflect.deleteProperty(T,O)}},D=Object.create(S);return new Proxy(D,I)},m=S=>({addListener(A,C,...T){A.addListener(S.get(C),...T)},hasListener(A,C){return A.hasListener(S.get(C))},removeListener(A,C){A.removeListener(S.get(C))}}),g=new a(S=>typeof S!="function"?S:function(C){const T=p(C,{},{getContent:{minArgs:0,maxArgs:0}});S(T)}),v=new a(S=>typeof S!="function"?S:function(C,T,I){let D=!1,R,O=new Promise(B=>{R=function(W){D=!0,B(W)}}),M;try{M=S(C,T,R)}catch(B){M=Promise.reject(B)}const U=M!==!0&&l(M);if(M!==!0&&!U&&!D)return!1;const $=B=>{B.then(W=>{I(W)},W=>{let te;W&&(W instanceof Error||typeof W.message=="string")?te=W.message:te="An unexpected error occurred",I({__mozWebExtensionPolyfillReject__:!0,message:te})}).catch(W=>{console.error("Failed to send onMessage rejected reply",W)})};return $(U?M:O),!0}),b=({reject:S,resolve:A},C)=>{r.runtime.lastError?r.runtime.lastError.message===n?A():S(new Error(r.runtime.lastError.message)):C&&C.__mozWebExtensionPolyfillReject__?S(new Error(C.message)):A(C)},_=(S,A,C,...T)=>{if(T.length<A.minArgs)throw new Error(`Expected at least ${A.minArgs} ${c(A.minArgs)} for ${S}(), got ${T.length}`);if(T.length>A.maxArgs)throw new Error(`Expected at most ${A.maxArgs} ${c(A.maxArgs)} for ${S}(), got ${T.length}`);return new Promise((I,D)=>{const R=b.bind(null,{resolve:I,reject:D});T.push(R),C.sendMessage(...T)})},y={devtools:{network:{onRequestFinished:m(g)}},runtime:{onMessage:m(v),onMessageExternal:m(v),sendMessage:_.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:_.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},E={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":E},services:{"*":E},websites:{"*":E}},p(r,y,o)};i.exports=s(chrome)}})})(Tf)),Tf.exports}var jo=GA();const Zs=Sf(jo);function sc(t){return Pd()?(Dd(t),!0):!1}const _m=new WeakMap,WA=(...t)=>{var e;const i=t[0],n=(e=Fi())==null?void 0:e.proxy;if(n==null&&!of())throw new Error("injectLocal must be called in setup");return n&&_m.has(n)&&i in _m.get(n)?_m.get(n)[i]:hs(...t)},bm=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ly=t=>t!=null,KA=Object.prototype.toString,YA=t=>KA.call(t)==="[object Object]",es=()=>{},XA=qA();function qA(){var t,e;return bm&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function ZA(...t){if(t.length!==1)return Ip(...t);const e=t[0];return typeof e=="function"?Ta(Lp(()=>({get:e,set:es}))):z(e)}function ym(t,e){function i(...n){return new Promise((s,r)=>{Promise.resolve(t(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(s).catch(r)})}return i}const QA=t=>t();function JA(t,e={}){let i,n,s=es;const r=l=>{clearTimeout(l),s(),s=es};let o;return l=>{const u=Vt(t),c=Vt(e.maxWait);return i&&r(i),u<=0||c!==void 0&&c<=0?(n&&(r(n),n=void 0),Promise.resolve(l())):new Promise((d,f)=>{s=e.rejectOnCancel?f:d,o=l,c&&!n&&(n=setTimeout(()=>{i&&r(i),n=void 0,d(o())},c)),i=setTimeout(()=>{n&&r(n),n=void 0,d(l())},u)})}}function ek(...t){let e=0,i,n=!0,s=es,r,o,a,l,u;!kt(t[0])&&typeof t[0]=="object"?{delay:o,trailing:a=!0,leading:l=!0,rejectOnCancel:u=!1}=t[0]:[o,a=!0,l=!0,u=!1]=t;const c=()=>{i&&(clearTimeout(i),i=void 0,s(),s=es)};return f=>{const h=Vt(o),p=Date.now()-e,m=()=>r=f();return c(),h<=0?(e=Date.now(),m()):(p>h&&(l||!n)?(e=Date.now(),m()):a&&(r=new Promise((g,v)=>{s=u?v:g,i=setTimeout(()=>{e=Date.now(),n=!0,g(m()),c()},Math.max(0,h-p))})),!l&&!i&&(i=setTimeout(()=>n=!0,h)),n=!1,r)}}function Iy(t){return t.endsWith("rem")?Number.parseFloat(t)*16:Number.parseFloat(t)}function Cl(t){return Array.isArray(t)?t:[t]}function tk(t){return Fi()}function wm(t,e=200,i={}){return ym(JA(e,i),t)}function Ho(t,e=200,i=!1,n=!0,s=!1){return ym(ek(e,i,n,s),t)}function ik(t,e,i={}){const{eventFilter:n=QA,...s}=i;return Pe(t,ym(n,e),s)}function Em(t,e=!0,i){tk()?st(t,i):e?t():ot(t)}const nk=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,sk=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;function rk(t,e,i,n){let s=t<12?"AM":"PM";return n&&(s=s.split("").reduce((r,o)=>r+=`${o}.`,"")),i?s.toLowerCase():s}function Fa(t){const e=["th","st","nd","rd"],i=t%100;return t+(e[(i-20)%10]||e[i]||e[0])}function ok(t,e,i={}){var n;const s=t.getFullYear(),r=t.getMonth(),o=t.getDate(),a=t.getHours(),l=t.getMinutes(),u=t.getSeconds(),c=t.getMilliseconds(),d=t.getDay(),f=(n=i.customMeridiem)!=null?n:rk,h=m=>{var g;return(g=m.split(" ")[1])!=null?g:""},p={Yo:()=>Fa(s),YY:()=>String(s).slice(-2),YYYY:()=>s,M:()=>r+1,Mo:()=>Fa(r+1),MM:()=>`${r+1}`.padStart(2,"0"),MMM:()=>t.toLocaleDateString(Vt(i.locales),{month:"short"}),MMMM:()=>t.toLocaleDateString(Vt(i.locales),{month:"long"}),D:()=>String(o),Do:()=>Fa(o),DD:()=>`${o}`.padStart(2,"0"),H:()=>String(a),Ho:()=>Fa(a),HH:()=>`${a}`.padStart(2,"0"),h:()=>`${a%12||12}`.padStart(1,"0"),ho:()=>Fa(a%12||12),hh:()=>`${a%12||12}`.padStart(2,"0"),m:()=>String(l),mo:()=>Fa(l),mm:()=>`${l}`.padStart(2,"0"),s:()=>String(u),so:()=>Fa(u),ss:()=>`${u}`.padStart(2,"0"),SSS:()=>`${c}`.padStart(3,"0"),d:()=>d,dd:()=>t.toLocaleDateString(Vt(i.locales),{weekday:"narrow"}),ddd:()=>t.toLocaleDateString(Vt(i.locales),{weekday:"short"}),dddd:()=>t.toLocaleDateString(Vt(i.locales),{weekday:"long"}),A:()=>f(a,l),AA:()=>f(a,l,!1,!0),a:()=>f(a,l,!0),aa:()=>f(a,l,!0,!0),z:()=>h(t.toLocaleDateString(Vt(i.locales),{timeZoneName:"shortOffset"})),zz:()=>h(t.toLocaleDateString(Vt(i.locales),{timeZoneName:"shortOffset"})),zzz:()=>h(t.toLocaleDateString(Vt(i.locales),{timeZoneName:"shortOffset"})),zzzz:()=>h(t.toLocaleDateString(Vt(i.locales),{timeZoneName:"longOffset"}))};return e.replace(sk,(m,g)=>{var v,b;return(b=g??((v=p[m])==null?void 0:v.call(p)))!=null?b:m})}function ak(t){if(t===null)return new Date(Number.NaN);if(t===void 0)return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){const e=t.match(nk);if(e){const i=e[2]-1||0,n=(e[7]||"0").substring(0,3);return new Date(e[1],i,e[3]||1,e[4]||0,e[5]||0,e[6]||0,n)}}return new Date(t)}function Af(t,e="HH:mm:ss",i={}){return ge(()=>ok(ak(Vt(t)),Vt(e),i))}function lk(t=!1,e={}){const{truthyValue:i=!0,falsyValue:n=!1}=e,s=kt(t),r=Zt(t);function o(a){if(arguments.length)return r.value=a,r.value;{const l=Vt(i);return r.value=r.value===l?Vt(n):l,r.value}}return s?o:[r,o]}function uk(t,e,i){return Pe(t,e,{...i,immediate:!0})}function ck(t,e,i){return Pe(t,e,{...i,once:!0})}function dk(t,e,i){const n=Pe(t,(s,r,o)=>{s&&(i?.once&&ot(()=>n()),e(s,r,o))},{...i,once:!1});return n}const Bn=bm?window:void 0,fk=bm?window.document:void 0;function Ci(t){var e;const i=Vt(t);return(e=i?.$el)!=null?e:i}function Ht(...t){const e=[],i=()=>{e.forEach(a=>a()),e.length=0},n=(a,l,u,c)=>(a.addEventListener(l,u,c),()=>a.removeEventListener(l,u,c)),s=ge(()=>{const a=Cl(Vt(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),r=uk(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(u=>Ci(u)))!=null?l:[Bn].filter(u=>u!=null),Cl(Vt(s.value?t[1]:t[0])),Cl(w(s.value?t[2]:t[1])),Vt(s.value?t[3]:t[2])]},([a,l,u,c])=>{if(i(),!a?.length||!l?.length||!u?.length)return;const d=YA(c)?{...c}:c;e.push(...a.flatMap(f=>l.flatMap(h=>u.map(p=>n(f,h,p,d)))))},{flush:"post"}),o=()=>{r(),i()};return sc(i),o}let Ry=!1;function Py(t,e,i={}){const{window:n=Bn,ignore:s=[],capture:r=!0,detectIframe:o=!1,controls:a=!1}=i;if(!n)return a?{stop:es,cancel:es,trigger:es}:es;if(XA&&!Ry){Ry=!0;const g={passive:!0};Array.from(n.document.body.children).forEach(v=>v.addEventListener("click",es,g)),n.document.documentElement.addEventListener("click",es,g)}let l=!0;const u=g=>Vt(s).some(v=>{if(typeof v=="string")return Array.from(n.document.querySelectorAll(v)).some(b=>b===g.target||g.composedPath().includes(b));{const b=Ci(v);return b&&(g.target===b||g.composedPath().includes(b))}});function c(g){const v=Vt(g);return v&&v.$.subTree.shapeFlag===16}function d(g,v){const b=Vt(g),_=b.$.subTree&&b.$.subTree.children;return _==null||!Array.isArray(_)?!1:_.some(y=>y.el===v.target||v.composedPath().includes(y.el))}const f=g=>{const v=Ci(t);if(g.target!=null&&!(!(v instanceof Element)&&c(t)&&d(t,g))&&!(!v||v===g.target||g.composedPath().includes(v))){if("detail"in g&&g.detail===0&&(l=!u(g)),!l){l=!0;return}e(g)}};let h=!1;const p=[Ht(n,"click",g=>{h||(h=!0,setTimeout(()=>{h=!1},0),f(g))},{passive:!0,capture:r}),Ht(n,"pointerdown",g=>{const v=Ci(t);l=!u(g)&&!!(v&&!g.composedPath().includes(v))},{passive:!0}),o&&Ht(n,"blur",g=>{setTimeout(()=>{var v;const b=Ci(t);((v=n.document.activeElement)==null?void 0:v.tagName)==="IFRAME"&&!b?.contains(n.document.activeElement)&&e(g)},0)},{passive:!0})].filter(Boolean),m=()=>p.forEach(g=>g());return a?{stop:m,cancel:()=>{l=!1},trigger:g=>{l=!0,f(g),l=!1}}:m}function hk(){const t=Zt(!1),e=Fi();return e&&st(()=>{t.value=!0},e),t}function kf(t){const e=hk();return ge(()=>(e.value,!!t()))}function Cf(t,e,i={}){const{window:n=Bn,...s}=i;let r;const o=kf(()=>n&&"MutationObserver"in n),a=()=>{r&&(r.disconnect(),r=void 0)},l=ge(()=>{const f=Vt(t),h=Cl(f).map(Ci).filter(Ly);return new Set(h)}),u=Pe(l,f=>{a(),o.value&&f.size&&(r=new MutationObserver(e),f.forEach(h=>r.observe(h,s)))},{immediate:!0,flush:"post"}),c=()=>r?.takeRecords(),d=()=>{u(),a()};return sc(d),{isSupported:o,stop:d,takeRecords:c}}function pk(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function Ps(...t){let e,i,n={};t.length===3?(e=t[0],i=t[1],n=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,i=t[0],n=t[1]):(e=t[0],i=t[1]):(e=!0,i=t[0]);const{target:s=Bn,eventName:r="keydown",passive:o=!1,dedupe:a=!1}=n,l=pk(e);return Ht(s,r,c=>{c.repeat&&Vt(a)||l(c)&&i(c)},o)}const mk=Symbol("vueuse-ssr-width");function gk(){const t=of()?WA(mk,null):null;return typeof t=="number"?t:void 0}function Dy(t,e={}){const{window:i=Bn,ssrWidth:n=gk()}=e,s=kf(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function"),r=Zt(typeof n=="number"),o=Zt(),a=Zt(!1),l=u=>{a.value=u.matches};return Jr(()=>{if(r.value){r.value=!s.value;const u=Vt(t).split(",");a.value=u.some(c=>{const d=c.includes("not all"),f=c.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),h=c.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let p=!!(f||h);return f&&p&&(p=n>=Iy(f[1])),h&&p&&(p=n<=Iy(h[1])),d?!p:p});return}s.value&&(o.value=i.matchMedia(Vt(t)),a.value=o.value.matches)}),Ht(o,"change",l,{passive:!0}),ge(()=>a.value)}const Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},If="__vueuse_ssr_handlers__",vk=_k();function _k(){return If in Lf||(Lf[If]=Lf[If]||{}),Lf[If]}function bk(t,e){return vk[t]||e}function yk(t){return Dy("(prefers-color-scheme: dark)",t)}function wk(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const Ek={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}};function rc(t,e,i={}){const{window:n=Bn,...s}=i;let r;const o=kf(()=>n&&"ResizeObserver"in n),a=()=>{r&&(r.disconnect(),r=void 0)},l=ge(()=>{const d=Vt(t);return Array.isArray(d)?d.map(f=>Ci(f)):[Ci(d)]}),u=Pe(l,d=>{if(a(),o.value&&n){r=new ResizeObserver(e);for(const f of d)f&&r.observe(f,s)}},{immediate:!0,flush:"post"}),c=()=>{a(),u()};return sc(c),{isSupported:o,stop:c}}function Sk(t,e={width:0,height:0},i={}){const{window:n=Bn,box:s="content-box"}=i,r=ge(()=>{var d,f;return(f=(d=Ci(t))==null?void 0:d.namespaceURI)==null?void 0:f.includes("svg")}),o=Zt(e.width),a=Zt(e.height),{stop:l}=rc(t,([d])=>{const f=s==="border-box"?d.borderBoxSize:s==="content-box"?d.contentBoxSize:d.devicePixelContentBoxSize;if(n&&r.value){const h=Ci(t);if(h){const p=h.getBoundingClientRect();o.value=p.width,a.value=p.height}}else if(f){const h=Cl(f);o.value=h.reduce((p,{inlineSize:m})=>p+m,0),a.value=h.reduce((p,{blockSize:m})=>p+m,0)}else o.value=d.contentRect.width,a.value=d.contentRect.height},i);Em(()=>{const d=Ci(t);d&&(o.value="offsetWidth"in d?d.offsetWidth:e.width,a.value="offsetHeight"in d?d.offsetHeight:e.height)});const u=Pe(()=>Ci(t),d=>{o.value=d?e.width:0,a.value=d?e.height:0});function c(){l(),u()}return{width:o,height:a,stop:c}}function Oy(t,e,i={}){const{root:n,rootMargin:s="0px",threshold:r=0,window:o=Bn,immediate:a=!0}=i,l=kf(()=>o&&"IntersectionObserver"in o),u=ge(()=>{const p=Vt(t);return Cl(p).map(Ci).filter(Ly)});let c=es;const d=Zt(a),f=l.value?Pe(()=>[u.value,Ci(n),d.value],([p,m])=>{if(c(),!d.value||!p.length)return;const g=new IntersectionObserver(e,{root:Ci(m),rootMargin:s,threshold:r});p.forEach(v=>v&&g.observe(v)),c=()=>{g.disconnect(),c=es}},{immediate:a,flush:"post"}):es,h=()=>{c(),f(),d.value=!1};return sc(h),{isSupported:l,isActive:d,pause(){c(),d.value=!1},resume(){d.value=!0},stop:h}}function xk(t,e={}){const{window:i=Bn,scrollTarget:n,threshold:s=0,rootMargin:r,once:o=!1}=e,a=Zt(!1),{stop:l}=Oy(t,u=>{let c=a.value,d=0;for(const f of u)f.time>=d&&(d=f.time,c=f.isIntersecting);a.value=c,o&&ck(a,()=>{l()})},{root:n,window:i,threshold:s,rootMargin:Vt(r)});return a}const Tk={page:t=>[t.pageX,t.pageY],client:t=>[t.clientX,t.clientY],screen:t=>[t.screenX,t.screenY],movement:t=>t instanceof MouseEvent?[t.movementX,t.movementY]:null};function Ak(t={}){const{type:e="page",touch:i=!0,resetOnTouchEnds:n=!1,initialValue:s={x:0,y:0},window:r=Bn,target:o=r,scroll:a=!0,eventFilter:l}=t;let u=null,c=0,d=0;const f=Zt(s.x),h=Zt(s.y),p=Zt(null),m=typeof e=="function"?e:Tk[e],g=A=>{const C=m(A);u=A,C&&([f.value,h.value]=C,p.value="mouse"),r&&(c=r.scrollX,d=r.scrollY)},v=A=>{if(A.touches.length>0){const C=m(A.touches[0]);C&&([f.value,h.value]=C,p.value="touch")}},b=()=>{if(!u||!r)return;const A=m(u);u instanceof MouseEvent&&A&&(f.value=A[0]+r.scrollX-c,h.value=A[1]+r.scrollY-d)},_=()=>{f.value=s.x,h.value=s.y},y=l?A=>l(()=>g(A),{}):A=>g(A),E=l?A=>l(()=>v(A),{}):A=>v(A),S=l?()=>l(()=>b(),{}):()=>b();if(o){const A={passive:!0};Ht(o,["mousemove","dragover"],y,A),i&&e!=="movement"&&(Ht(o,["touchstart","touchmove"],E,A),n&&Ht(o,"touchend",_,A)),a&&e==="page"&&Ht(r,"scroll",S,A)}return{x:f,y:h,sourceType:p}}function My(t,e={}){const{windowResize:i=!0,windowScroll:n=!0,handleOutside:s=!0,window:r=Bn}=e,o=e.type||"page",{x:a,y:l,sourceType:u}=Ak(e),c=Zt(t??r?.document.body),d=Zt(0),f=Zt(0),h=Zt(0),p=Zt(0),m=Zt(0),g=Zt(0),v=Zt(!0);function b(){if(!r)return;const E=Ci(c);if(!E||!(E instanceof Element))return;const{left:S,top:A,width:C,height:T}=E.getBoundingClientRect();h.value=S+(o==="page"?r.pageXOffset:0),p.value=A+(o==="page"?r.pageYOffset:0),m.value=T,g.value=C;const I=a.value-h.value,D=l.value-p.value;v.value=C===0||T===0||I<0||D<0||I>C||D>T,(s||!v.value)&&(d.value=I,f.value=D)}const _=[];function y(){_.forEach(E=>E()),_.length=0}if(Em(()=>{b()}),r){const{stop:E}=rc(c,b),{stop:S}=Cf(c,b,{attributeFilter:["style","class"]}),A=Pe([c,a,l],b);_.push(E,S,A),Ht(document,"mouseleave",()=>v.value=!0,{passive:!0}),n&&_.push(Ht("scroll",b,{capture:!0,passive:!0})),i&&_.push(Ht("resize",b,{passive:!0}))}return{x:a,y:l,sourceType:u,elementX:d,elementY:f,elementPositionX:h,elementPositionY:p,elementHeight:m,elementWidth:g,isOutside:v,stop:y}}function kk(t,e,i,n={}){var s;const{flush:r="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:u=!1,shallow:c,window:d=Bn,eventFilter:f,onError:h=E=>{console.error(E)},onReady:p}=n,m=Vt(e),g=wk(m),v=(c?Zt:z)(Vt(e)),b=(s=n.serializer)!=null?s:Ek[g];if(!i)try{i=bk("getDefaultStorageAsync",()=>{var E;return(E=Bn)==null?void 0:E.localStorage})()}catch(E){h(E)}async function _(E){if(!(!i||E&&E.key!==t))try{const S=E?E.newValue:await i.getItem(t);if(S==null)v.value=m,l&&m!==null&&await i.setItem(t,await b.write(m));else if(u){const A=await b.read(S);typeof u=="function"?v.value=u(A,m):g==="object"&&!Array.isArray(A)?v.value={...m,...A}:v.value=A}else v.value=await b.read(S)}catch(S){h(S)}}const y=new Promise(E=>{_().then(()=>{p?.(v.value),E(v)})});return d&&a&&Ht(d,"storage",E=>Promise.resolve().then(()=>_(E)),{passive:!0}),i&&ik(v,async()=>{try{v.value==null?await i.removeItem(t):await i.setItem(t,await b.write(v.value))}catch(E){h(E)}},{flush:r,deep:o,eventFilter:f}),Object.assign(v,{then:y.then.bind(y),catch:y.catch.bind(y)}),v}function Ck(t=null,e={}){var i,n,s;const{document:r=fk,restoreOnUnmount:o=d=>d}=e,a=(i=r?.title)!=null?i:"",l=ZA((n=t??r?.title)!=null?n:null),u=!!(t&&typeof t=="function");function c(d){if(!("titleTemplate"in e))return d;const f=e.titleTemplate||"%s";return typeof f=="function"?f(d):Vt(f).replace(/%s/g,d)}return Pe(l,(d,f)=>{d!==f&&r&&(r.title=c(d??""))},{immediate:!0}),e.observe&&!e.titleTemplate&&r&&!u&&Cf((s=r.head)==null?void 0:s.querySelector("title"),()=>{r&&r.title!==l.value&&(l.value=c(r.title))},{childList:!0}),sc(()=>{if(o){const d=o(a,l.value||"");d!=null&&r&&(r.title=d)}}),l}function Lk(t={}){const{window:e=Bn}=t;if(!e)return Zt(!1);const i=Zt(e.document.hasFocus()),n={passive:!0};return Ht(e,"blur",()=>{i.value=!1},n),Ht(e,"focus",()=>{i.value=!0},n),i}function Ik(t={}){const{window:e=Bn,initialWidth:i=Number.POSITIVE_INFINITY,initialHeight:n=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:r=!0,type:o="inner"}=t,a=Zt(i),l=Zt(n),u=()=>{if(e)if(o==="outer")a.value=e.outerWidth,l.value=e.outerHeight;else if(o==="visual"&&e.visualViewport){const{width:d,height:f,scale:h}=e.visualViewport;a.value=Math.round(d*h),l.value=Math.round(f*h)}else r?(a.value=e.innerWidth,l.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,l.value=e.document.documentElement.clientHeight)};u(),Em(u);const c={passive:!0};if(Ht("resize",u,c),e&&o==="visual"&&e.visualViewport&&Ht(e.visualViewport,"resize",u,c),s){const d=Dy("(orientation: portrait)");Pe(d,()=>u())}return{width:a,height:l}}const Rk={removeItem(t){return jo.storage.local.remove(t)},setItem(t,e){return jo.storage.local.set({[t]:e})},async getItem(t){const i=(await jo.storage.local.get(t))[t];return i!=null?String(i):null}};function Qs(t,e,i){return kk(t,e,Rk,i)}var Nn=(t=>(t.English="en",t.Mandarin_CN="cmn-CN",t.Mandarin_TW="cmn-TW",t.Cantonese="jyut",t))(Nn||{}),_t=(t=>(t.Home="Home",t.Search="Search",t.SearchResults="SearchResults",t.Anime="Anime",t.History="History",t.Favorites="Favorites",t.WatchLater="WatchLater",t.Moments="Moments",t))(_t||{}),Un=(t=>(t.AlwaysShow="alwaysShow",t.AlwaysHide="alwaysHide",t.ShowOnMouse="showOnMouse",t.ShowOnScroll="showOnScroll",t))(Un||{});Qs("webext-demo","Storage Demo");const $y={accessToken:"",refreshToken:"",accessTokenExpiresAt:null,refreshTokenExpiresAt:null,mid:null,lastUpdatedAt:null},ts=Qs("appAuthTokens",$y,{mergeDefaults:!0}),Sm=Qs("accessKey","");Pe(()=>Sm.value,t=>{t&&(ts.value.accessToken||(ts.value={...ts.value,accessToken:t,lastUpdatedAt:Date.now()}),Sm.value="")},{immediate:!0});function Pk(){ts.value={...$y},Sm.value=""}const Rf=1,Pf=20,Ll={base:1,sm:2,md:3,lg:4,xl:5,xxl:6},oc={sm:640,md:768,lg:1024,xl:1280,xxl:1536},Dk={locallyUploadedWallpaper:null,customizeCSS:!1,customizeCSSContent:""},ro={touchScreenOptimization:!1,showHomeButtonInTouchMode:!0,enableGridLayoutSwitcher:!0,enableHorizontalScrolling:!1,showIPLocation:!0,showSex:!0,showCommentHostTag:!0,adjustCommentImageHeight:!0,enlargeFavoriteDialog:!1,externalWatchLaterButton:!1,gridColumns:{...Ll},language:"",customizeFont:"default",fontFamily:"",overrideDanmakuFont:!0,removeTheIndentFromChinesePunctuation:!1,enableFrostedGlass:!1,frostedGlassBlurIntensity:10,disableShadow:!1,videoCardLinkOpenMode:"newTab",topBarLinkOpenMode:"currentTabIfNotHomepage",searchBarLinkOpenMode:"currentTabIfNotHomepage",closeDrawerWithoutPressingEscAgain:!1,blockAds:!1,blockTopSearchPageAds:!1,cleanUrlArgument:!0,enableVideoPreview:!0,enableVideoCtrlBarOnVideoCard:!1,hoverVideoCardDelayed:!1,showVideoCardRecommendTag:!0,autoHideTopBar:!1,videoPageTopBarConfig:Un.ShowOnScroll,alwaysUseTransparentTopBar:!1,showTopBarThemeColorGradient:!0,showBewlyOrBiliTopBarSwitcher:!0,showBewlyOrBiliPageSwitcher:!0,topBarIconBadges:"number",showWatchLaterBadge:!1,topBarComponentsConfig:[{key:"moments",visible:!0,badgeType:"number"},{key:"favorites",visible:!0,badgeType:"number"},{key:"history",visible:!0,badgeType:"number"},{key:"watchLater",visible:!0,badgeType:"number"},{key:"creatorCenter",visible:!0,badgeType:"none"},{key:"upload",visible:!0,badgeType:"none"},{key:"notifications",visible:!0,badgeType:"number"}],topBarPinnedChannels:[],openNotificationsPageAsDrawer:!0,showBCoinReceiveReminder:!0,autoReceiveBCoinCoupon:!1,autoReceiveVipExp:!1,filterArticlesInMoments:!0,alwaysUseDock:!1,autoHideDock:!1,halfHideDock:!1,dockPosition:"right",dockItemsConfig:[],disableDockGlowingEffect:!1,disableLightDarkModeSwitcherOnDock:!1,backToTopAndRefreshButtonsAreSeparated:!0,enableUndoRefreshButton:!0,sidebarPosition:"right",autoHideSidebar:!1,theme:"auto",themeColor:"#00a1d6",darkModeBaseColor:"#2a2d32",useLinearGradientThemeColorBackground:!1,wallpaperMode:"buildIn",wallpaper:"",enableWallpaperMasking:!1,wallpaperMaskOpacity:80,wallpaperBlurIntensity:0,wallpaperCacheTime:0,searchPageDarkenOnSearchFocus:!0,searchPageBlurredOnSearchFocus:!1,searchPageLogoColor:"themeColor",searchPageLogoGlow:!0,searchPageShowLogo:!0,searchPageSearchBarFocusCharacter:"",individuallySetSearchPageWallpaper:!1,searchPageWallpaperMode:"buildIn",searchPageWallpaper:"",searchPageEnableWallpaperMasking:!1,searchPageWallpaperMaskOpacity:80,searchPageWallpaperBlurIntensity:0,searchPageWallpaperCacheTime:0,showHotSearchInTopBar:!0,showSearchRecommendation:!1,usePluginSearchResultsPage:!0,searchResultsPaginationMode:"scroll",recommendationMode:"web",autoSwitchRecommendationMode:!0,disableFilterForFollowedUser:!1,filterOutVerticalVideos:!1,enableFilterByViewCount:!1,filterByViewCount:1e4,enableFilterByDuration:!1,filterByDuration:3600,enableFilterByTitle:!1,filterByTitle:[],enableFilterByUser:!1,filterByUser:[],enableFilterByPublishTime:!1,filterByPublishTime:30,followingTabShowLivestreamingVideos:!1,followingFilterChargingVideos:!1,followingFilterDynamicVideos:!1,useFollowingNewLayout:!1,followingInactiveDays:100,homePageTabVisibilityList:[],alwaysShowTabsOnHomePage:!1,homeAdaptiveTitleFontSize:16,homeAdaptiveTitleAutoSize:!0,videoCardTitleFontSize:"base",videoCardAuthorFontSize:"sm",videoCardMetaFontSize:"xs",videoCardLayout:"modern",videoCardShadowCurve:[{position:0,opacity:80},{position:30,opacity:70},{position:100,opacity:0}],videoCardShadowHeight:1,useSearchPageModeOnHomePage:!1,searchPageModeWallpaperFixed:!1,preserveForYouState:!1,adaptToOtherPageStyles:!0,showTopBar:!0,useOriginalBilibiliTopBar:!1,useOriginalBilibiliHomepage:!1,defaultVideoPlayerMode:"default",defaultDanmakuState:"system",keepCollectionVideoDefaultMode:!1,autoExitFullscreenOnEnd:!1,autoExitFullscreenExcludeAutoPlay:!1,useBilibiliDefaultAutoPlay:!0,autoPlayMultipart:"autoPlay",autoPlayCollection:"autoPlay",autoPlayRecommend:"autoPlay",autoPlayPlaylist:"autoPlay",keyboard:!0,videoPlayerScroll:!0,shortcuts:{danmuStatus:{key:"Shift+D",enabled:!0},webFullscreen:{key:"W",enabled:!0},widescreen:{key:"T",enabled:!0},shortStepBackward:{key:"J",enabled:!0},longStepBackward:{key:"Shift+J",enabled:!0},playPause:{key:"K",enabled:!0},shortStepForward:{key:"L",enabled:!0},longStepForward:{key:"Shift+L",enabled:!0},pip:{key:"P",enabled:!0},turnOffLight:{key:"I",enabled:!0},caption:{key:"C",enabled:!0},increasePlaybackRate:{key:"+",enabled:!0},decreasePlaybackRate:{key:"-",enabled:!0},resetPlaybackRate:{key:"0",enabled:!0},previousFrame:{key:",",enabled:!0},nextFrame:{key:".",enabled:!0},replay:{key:"Shift+Backspace",enabled:!0},increaseVideoSize:{key:"Shift++",enabled:!0},decreaseVideoSize:{key:"Shift+-",enabled:!0},resetVideoSize:{key:"Shift+0",enabled:!0},videoTitle:{key:"B",enabled:!0},videoTime:{key:"G",enabled:!0},clockTime:{key:"H",enabled:!0},homeRefresh:{key:"R",enabled:!0}},enableVolumeNormalization:!1,targetVolume:50,normalizationStrength:12,adaptiveGainSpeed:5,voiceGateDb:-34,volumeNormalizationDebug:!1,rememberPlaybackRate:!1,savedPlaybackRate:1,enableRandomPlay:!1,randomPlayMode:"manual",minVideosForRandom:5},k=Qs("settings",ro,{mergeDefaults:!0});Pe(()=>k.value,t=>{const e=t;Number.isFinite(e.frostedGlassBlurIntensity)||(e.frostedGlassBlurIntensity=ro.frostedGlassBlurIntensity),"reduceFrostedGlassBlur"in e&&(e.reduceFrostedGlassBlur===!0&&e.frostedGlassBlurIntensity===ro.frostedGlassBlurIntensity&&(e.frostedGlassBlurIntensity=10),Reflect.deleteProperty(e,"reduceFrostedGlassBlur")),e.frostedGlassBlurIntensity<Rf&&(e.frostedGlassBlurIntensity=Rf),e.frostedGlassBlurIntensity>Pf&&(e.frostedGlassBlurIntensity=Pf);const i=["autoPlayMultipart","autoPlayCollection","autoPlayRecommend","autoPlayPlaylist"];if(i.some(r=>typeof e[r]=="boolean"))for(const r of i)typeof e[r]=="boolean"&&(e[r]=e[r]?"autoPlay":"pauseAtEnd");"useBilibiliDefaultAutoPlay"in e||(e.useBilibiliDefaultAutoPlay=!0),"disableFrostedGlass"in e&&(e.enableFrostedGlass=!e.disableFrostedGlass,Reflect.deleteProperty(e,"disableFrostedGlass")),e.gridColumns&&typeof e.gridColumns=="object"&&"base"in e.gridColumns&&Object.keys(e.gridColumns).length>0||Zs.storage.local.get(["gridColumns"]).then(r=>{if(r.gridColumns)try{let o=r.gridColumns;typeof o=="string"&&(o=JSON.parse(o)),o&&typeof o=="object"&&"base"in o?(e.gridColumns=o,k.value=e,Zs.storage.local.remove(["gridColumns"])):(e.gridColumns={...Ll},k.value=e)}catch{e.gridColumns={...Ll},k.value=e}else e.gridColumns={...Ll},k.value=e})},{immediate:!0});const Yt=Qs("localSettings",Dk,{mergeDefaults:!0});async function Ok(){try{const e=(await Zs.storage.local.get("settings")).settings;if(e&&typeof e=="string"){const i=JSON.parse(e);if("locallyUploadedWallpaper"in i||"customizeCSS"in i||"customizeCSSContent"in i){const s={locallyUploadedWallpaper:i.locallyUploadedWallpaper||null,customizeCSS:i.customizeCSS||!1,customizeCSSContent:i.customizeCSSContent||""};await Zs.storage.local.set({localSettings:JSON.stringify(s)}),delete i.locallyUploadedWallpaper,delete i.customizeCSS,delete i.customizeCSSContent,await Zs.storage.local.set({settings:JSON.stringify(i)}),console.log(" ")}}}catch(t){console.error(" :",t)}}Ok();const Df=Qs("gridLayout",z({home:"adaptive"}),{mergeDefaults:!0});Qs("gridColumns",z({...Ll}),{mergeDefaults:!0}),Qs("gridBreakpoints",z([{minWidth:0,columns:1},{minWidth:640,columns:2},{minWidth:900,columns:3},{minWidth:1200,columns:4},{minWidth:1500,columns:5},{minWidth:1800,columns:6}]),{mergeDefaults:!0}),Qs("sidePanel",z({home:!0}),{mergeDefaults:!0});function xm(t){const i=`; ${document.cookie}`.split(`; ${t}=`);return i.length===2&&i?.pop()?.split(";").shift()||""}function ac(t,e,i){const n=new Date;n.setTime(n.getTime()+i*24*60*60*1e3);const s=`expires=${n.toUTCString()}`;document.cookie=`${t}=${e}; ${s}; domain=.bilibili.com; path=/`}const Ds=()=>xm("DedeUserID"),oi=()=>xm("bili_jct");function Li(t){return t.replace(/^https?:/,"")}function Os(t,e=""){window.open(t,"_blank",e)}function Fy(){return typeof navigator>"u"?!1:!!/Electron/i.test(navigator.userAgent)}function By(t,e=null){if(t=t.replace(/^#/,""),t.length!==6)throw new Error("Invalid HEX color.");let i=Number.parseInt(t.substring(0,2),16),n=Number.parseInt(t.substring(2,4),16),s=Number.parseInt(t.substring(4,6),16);i/=255,n/=255,s/=255;const r=Math.max(i,n,s),o=Math.min(i,n,s);let a=0,l=0,u=(r+o)/2;if(r===o)a=l=0;else{const c=r-o;switch(l=u>.5?c/(2-r-o):c/(r+o),r){case i:a=(n-s)/c+(n<s?6:0);break;case n:a=(s-i)/c+2;break;case s:a=(i-n)/c+4;break}a/=6}return a=Math.round(a*360),l=Math.round(l*100),u=Math.round(u*100),e!==null?`hsla(${a}, ${l}%, ${u}%, ${e})`:`hsl(${a}, ${l}%, ${u}%)`}function Ba(t,e=0){t.scrollTop!==e&&t.scrollTo({top:e,behavior:"smooth"})}function Tr(t,e=document.documentElement){const i=document.createElement("style");return i.setAttribute("rel","stylesheet"),i.textContent=t,e.appendChild(i),i}function Et(t=location.href){return!!(/https?:\/\/(?:www\.)?bilibili.com\/?(?:#\/?)?$/.test(t)||/https?:\/\/(?:www\.)?bilibili.com\/index\.html$/.test(t)||/https?:\/\/(?:www\.)?bilibili.com\/\?spm_id_from=.*/.test(t)||/https?:\/\/www\.bilibili\.com\/\?.*$/.test(t))}function fn(t=location.href){return!!(/https?:\/\/(?:www\.)?bilibili\.com\/(?:video|list)\/.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/bangumi\/play\/.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/list\/watchlater\?(?:bvid|avid).*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/list\/ml.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/festival\/.*/.test(t))}function lc(t=location.href){return!!/https?:\/\/message\.bilibili\.com\.*/.test(t)}function Of(t=location.href){return!!(/https?:\/\/search\.bilibili\.com\/.*/.test(t)||new URL(t).searchParams.get("page")==="Search")}function Ny(t=location.href){return!!/https?:\/\/space\.bilibili\.com\.*/.test(t)}function Uy(t,e,i,n,s){const r=new Image,o=new FileReader;o.onload=function(a){r.src=a.target?.result,r.onload=function(){const l=document.createElement("canvas"),u=l.getContext("2d");let c=r.width,d=r.height;if(c>d?c>e&&(d=Math.round(d*e/c),c=e):d>i&&(c=Math.round(c*i/d),d=i),l.width=c,l.height=d,!u){console.error("compressAndResizeImage => ctx is null");return}u.drawImage(r,0,0,c,d),l.toBlob(f=>{const h=new File([f],t.name,{type:"image/jpeg",lastModified:Date.now()});s(h)},"image/jpeg",n)}},o.readAsDataURL(t)}function Vy(t,e){const i=t.split(".").map(Number),n=e.split(".").map(Number),s=Math.max(i.length,n.length);for(let r=0;r<s;r++){const o=i[r]||0,a=n[r]||0;if(o>a)return 1;if(o<a)return-1}return 0}function jy(t,e=500,i){return new Promise(n=>{const s=setInterval(()=>{const r=document.querySelector(t);r&&(clearInterval(s),n(r))},e);i&&i.signal.addEventListener("abort",()=>{clearInterval(s),n(null)})})}function ai(){try{return window.self!==window.top}catch{return!0}}const Mk=Object.freeze(Object.defineProperty({__proto__:null,compareVersions:Vy,compressAndResizeImage:Uy,getCSRF:oi,getCookie:xm,getUserID:Ds,hexToHSL:By,injectCSS:Tr,isElectron:Fy,isHomePage:Et,isInIframe:ai,isNotificationPage:lc,isSearchResultsPage:Of,isUserSpacePage:Ny,isVideoOrBangumiPage:fn,openLinkToNewTab:Os,queryDomUntilFound:jy,removeHttpFromUrl:Li,scrollToTop:Ba,setCookie:ac},Symbol.toStringTag,{value:"Module"}));async function $k(){const t=document.URL;Et()?(await Promise.resolve().then(()=>PK),document.documentElement.classList.add("homePage")):/https?:\/\/message\.bilibili\.com\.*/.test(t)?(await Promise.resolve().then(()=>DK),document.documentElement.classList.add("notificationsPage"),ai()&&k.value.openNotificationsPageAsDrawer&&document.documentElement.classList.add("drawer")):/https?:\/\/t\.bilibili\.com\.*/.test(t)||/https?:\/\/www\.bilibili\.com\/opus\/.*/.test(t)?(await Promise.resolve().then(()=>OK),document.documentElement.classList.add("momentsPage")):/https?:\/\/(?:www\.)?bilibili\.com\/account\/history.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/history.*/.test(t)?(await Promise.resolve().then(()=>MK),document.documentElement.classList.add("historyPage")):/https?:\/\/(?:www\.)?bilibili\.com\/watchlater\/list.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/watchlater\/#\/list.*/.test(t)?(await Promise.resolve().then(()=>$K),document.documentElement.classList.add("watchLaterPage")):/https?:\/\/space.bilibili\.com\.*\/v\/note-list/.test(t)?(await Promise.resolve().then(()=>FK),document.documentElement.classList.add("notePage")):/https?:\/\/space.bilibili\.com\.*/.test(t)?(await Promise.resolve().then(()=>BK),document.documentElement.classList.add("userSpacePage")):/https?:\/\/search.bilibili\.com\.*/.test(t)?(await Promise.resolve().then(()=>NK),document.documentElement.classList.add("searchPage")):/https?:\/\/(?:www\.)?bilibili\.com\/video\/.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/list\/watchlater.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/list\/ml.*/.test(t)||/https?:\/\/(?:www\.)?bilibili\.com\/list\/.*/.test(t)?(await Promise.resolve().then(()=>UK),document.documentElement.classList.add("videoPage")):/https?:\/\/(?:www\.)?bilibili\.com\/bangumi\/play\/.*/.test(t)?(await Promise.resolve().then(()=>VK),document.documentElement.classList.add("animePlaybackAndMoviePage")):/https?:\/\/(?:www\.)?bilibili\.com\/(?:anime|guochuang).*/.test(t)?(await Promise.resolve().then(()=>jK),document.documentElement.classList.add("animePage")):/https?:\/\/(?:www\.)?bilibili\.com\/(?:tv|movie|variety|mooc|documentary).*/.test(t)?(await Promise.resolve().then(()=>HK),document.documentElement.classList.add("channelPage")):/https?:\/\/(?:www\.)?bilibili\.com\/read.*/.test(t)?(await Promise.resolve().then(()=>zK),document.documentElement.classList.add("articlesPage")):/https?:\/\/(?:www\.)?bilibili\.com\/v\/topic\/detail\/.*/.test(t)?(await Promise.resolve().then(()=>GK),document.documentElement.classList.add("topicPage")):/^https?:\/\/(?:www\.)?bilibili\.com\/404.*$/.test(t)?(await Promise.resolve().then(()=>WK),document.documentElement.classList.add("error404Page")):/^https?:\/\/member\.bilibili\.com\/platform.*$/.test(t)?(await Promise.resolve().then(()=>KK),document.documentElement.classList.add("forceDark"),await Promise.resolve().then(()=>YK),document.documentElement.classList.add("creativeCenterPage")):/^https?:\/\/account\.bilibili\.com\/(?!big).*$/.test(t)?(await Promise.resolve().then(()=>XK),document.documentElement.classList.add("accountSettingsPage")):/^https?:\/\/account\.bilibili\.com\/big.*$/.test(t)?(await Promise.resolve().then(()=>qK),document.documentElement.classList.add("premiumPage")):/^https?:\/\/passport\.bilibili\.com\/login.*$/.test(t)&&(await Promise.resolve().then(()=>ZK),document.documentElement.classList.add("loginPage"))}$k();const Na="topBarVisibilityChange",Ua="overlayScrollBarScroll",Mf="overlayScrollStateChange",Hy="bewlyMounted",Tm="drawerVideoEnterPageFull",Am="drawerVideoExitPageFull",zy="iframePageSwitchBewly",Gy="iframePageSwitchBili",zo="iframeDarkModeChange",uc="iframeTopBarChange",Fk="darkModeBaseColorChange";let Il;(function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?Il=t=>{let e=!1;return setTimeout(()=>{if(e)return;const i=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))}),{dispose(){e||(e=!0)}}}:Il=(t,e)=>{const i=requestIdleCallback(t,typeof e=="number"?{timeout:e}:void 0);let n=!1;return{dispose(){n||(n=!0,cancelIdleCallback(i))}}}})();class Bk{constructor(e){this.executor=e,this._didRun=!1}get value(){return this._didRun||(this._value=this.executor(),this._didRun=!0),this._value}}function Wy(t,e,i=1e3){let n=0,s;return s=setInterval(async()=>{await t(),n++,n>=e&&clearInterval(s)},i),s}function Nk(){return/https?:\/\/(?:www\.)?bilibili\.com\/festival\/.*/.test(document.URL)}function Ky(t){document.documentElement.style.setProperty("--bew-dark-base-color",t);const e=document.getElementById("bewly");e?.shadowRoot&&e.style.setProperty("--bew-dark-base-color",t)}function Js(){const t=yk(),e=ge(()=>t.value?"dark":"light"),i=ge(()=>k.value.theme!=="auto"?k.value.theme:e.value),n=ge(()=>i.value==="dark");let s=null;Pe(()=>[k.value.theme,t.value],()=>{r()},{immediate:!0}),Pe(()=>k.value.darkModeBaseColor,a=>{Ky(a),window.dispatchEvent(new CustomEvent(Fk,{detail:a}))},{immediate:!0}),Jr(()=>{Il(()=>{n.value?(ac("theme_style","dark",365*10),s=Wy(()=>{window.dispatchEvent(new CustomEvent("global.themeChange",{detail:"dark"}))},10,500)):(ac("theme_style","light",365*10),s=Wy(()=>{window.dispatchEvent(new CustomEvent("global.themeChange",{detail:"light"}))},10,500))})});function r(){s&&clearInterval(s);const a=Nk()&&k.value.adaptToOtherPageStyles;n.value?(document.querySelector("#bewly")?.classList.add("dark"),a||(document.documentElement.classList.add("dark"),document.body?.classList.add("dark"),document.documentElement.classList.add("bili_dark")),Ky(k.value.darkModeBaseColor),ac("theme_style","dark",365*10),window.dispatchEvent(new CustomEvent("global.themeChange",{detail:"dark"}))):(document.querySelector("#bewly")?.classList?.remove("dark"),a||(document.documentElement.classList.remove("dark"),document.body?.classList.remove("dark"),document.documentElement.classList.remove("bili_dark")),ac("theme_style","light",365*10),window.dispatchEvent(new CustomEvent("global.themeChange",{detail:"light"}))),i.value==="dark"&&document.documentElement.classList.contains("bili_dark")&&document.documentElement.classList.remove("bili_dark")}function o(a){const l=()=>{i.value!==e.value?k.value.theme="auto":k.value.theme=t.value?"light":"dark"};if(!(typeof document<"u"&&document.startViewTransition&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches))l();else{const c=a.clientX,d=a.clientY,f=Math.hypot(Math.max(c,innerWidth-c),Math.max(d,innerHeight-d)),h=document.createElement("style");h.appendChild(document.createTextNode(`
            *, *::before, *::after
            {-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}`)),document.head.appendChild(h);const m=document.createElement("style");m.textContent=`
            ::view-transition-old(root),
            ::view-transition-new(root) {
              animation: none !important;
              mix-blend-mode: normal;
            }
            `,document.head.appendChild(m);const g=document.createElement("style");g.appendChild(document.createTextNode(`
            *, *::before, *::after
            {-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important; will-change: background}`));const _=document.getElementById("bewly")?.shadowRoot?.getElementById("bewly-wrapper");if(!_)throw new Error("mainAppRef is not found");_.appendChild(g);const y=document.startViewTransition(async()=>{l(),await ot()});y.ready.then(()=>{const E=document.documentElement.classList.contains("dark"),S=document.createElement("style");S.textContent=`
            ::view-transition-old(root) { z-index: ${E?1:9999}; }
            ::view-transition-new(root) { z-index: ${E?9999:1}; }
            `,document.head.appendChild(S);const A=[`circle(0px at ${c}px ${d}px)`,`circle(${f}px at ${c}px ${d}px)`];document.documentElement.animate({clipPath:E?A:[...A].reverse()},{duration:300,easing:"ease-in-out",pseudoElement:E?"::view-transition-new(root)":"::view-transition-old(root)"}).finished.then(()=>{S.remove()})}),y.finished.then(()=>{h.remove(),m.remove(),g.remove()})}}return{isDark:n,toggleDark:o}}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Yy;const $f=t=>Yy=t,Xy=Symbol();function km(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var cc;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(cc||(cc={}));function Uk(){const t=Rd(!0),e=t.run(()=>z({}));let i=[],n=[];const s=jd({install(r){$f(s),s._a=r,r.provide(Xy,s),r.config.globalProperties.$pinia=s,n.forEach(o=>i.push(o)),n=[]},use(r){return this._a?i.push(r):n.push(r),this},_p:i,_a:null,_e:t,_s:new Map,state:e});return s}const qy=()=>{};function Zy(t,e,i,n=qy){t.push(e);const s=()=>{const r=t.indexOf(e);r>-1&&(t.splice(r,1),n())};return!i&&Pd()&&Dd(s),s}function Rl(t,...e){t.slice().forEach(i=>{i(...e)})}const Vk=t=>t(),Qy=Symbol(),Cm=Symbol();function Lm(t,e){t instanceof Map&&e instanceof Map?e.forEach((i,n)=>t.set(n,i)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const i in e){if(!e.hasOwnProperty(i))continue;const n=e[i],s=t[i];km(s)&&km(n)&&t.hasOwnProperty(i)&&!kt(n)&&!Ys(n)?t[i]=Lm(s,n):t[i]=n}return t}const jk=Symbol();function Hk(t){return!km(t)||!Object.prototype.hasOwnProperty.call(t,jk)}const{assign:Go}=Object;function zk(t){return!!(kt(t)&&t.effect)}function Gk(t,e,i,n){const{state:s,actions:r,getters:o}=e,a=i.state.value[t];let l;function u(){a||(i.state.value[t]=s?s():{});const c=w_(i.state.value[t]);return Go(c,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=jd(ge(()=>{$f(i);const h=i._s.get(t);return o[f].call(h,h)})),d),{}))}return l=Jy(t,u,e,i,n,!0),l}function Jy(t,e,i={},n,s,r){let o;const a=Go({actions:{}},i),l={deep:!0};let u,c,d=[],f=[],h;const p=n.state.value[t];!r&&!p&&(n.state.value[t]={}),z({});let m;function g(C){let T;u=c=!1,typeof C=="function"?(C(n.state.value[t]),T={type:cc.patchFunction,storeId:t,events:h}):(Lm(n.state.value[t],C),T={type:cc.patchObject,payload:C,storeId:t,events:h});const I=m=Symbol();ot().then(()=>{m===I&&(u=!0)}),c=!0,Rl(d,T,n.state.value[t])}const v=r?function(){const{state:T}=i,I=T?T():{};this.$patch(D=>{Go(D,I)})}:qy;function b(){o.stop(),d=[],f=[],n._s.delete(t)}const _=(C,T="")=>{if(Qy in C)return C[Cm]=T,C;const I=function(){$f(n);const D=Array.from(arguments),R=[],O=[];function M(B){R.push(B)}function U(B){O.push(B)}Rl(f,{args:D,name:I[Cm],store:E,after:M,onError:U});let $;try{$=C.apply(this&&this.$id===t?this:E,D)}catch(B){throw Rl(O,B),B}return $ instanceof Promise?$.then(B=>(Rl(R,B),B)).catch(B=>(Rl(O,B),Promise.reject(B))):(Rl(R,$),$)};return I[Qy]=!0,I[Cm]=T,I},y={_p:n,$id:t,$onAction:Zy.bind(null,f),$patch:g,$reset:v,$subscribe(C,T={}){const I=Zy(d,C,T.detached,()=>D()),D=o.run(()=>Pe(()=>n.state.value[t],R=>{(T.flush==="sync"?c:u)&&C({storeId:t,type:cc.direct,events:h},R)},Go({},l,T)));return I},$dispose:b},E=Mt(y);n._s.set(t,E);const A=(n._a&&n._a.runWithContext||Vk)(()=>n._e.run(()=>(o=Rd()).run(()=>e({action:_}))));for(const C in A){const T=A[C];if(kt(T)&&!zk(T)||Ys(T))r||(p&&Hk(T)&&(kt(T)?T.value=p[C]:Lm(T,p[C])),n.state.value[t][C]=T);else if(typeof T=="function"){const I=_(T,C);A[C]=I,a.actions[C]=T}}return Go(E,A),Go(Ct(E),A),Object.defineProperty(E,"$state",{get:()=>n.state.value[t],set:C=>{g(T=>{Go(T,C)})}}),n._p.forEach(C=>{Go(E,o.run(()=>C({store:E,app:n._a,pinia:n,options:a})))}),p&&r&&i.hydrate&&i.hydrate(E.$state,p),u=!0,c=!0,E}/*! #__NO_SIDE_EFFECTS__ */function Ff(t,e,i){let n;const s=typeof e=="function";n=s?i:e;function r(o,a){const l=of();return o=o||(l?hs(Xy,null):null),o&&$f(o),o=Yy,o._s.has(t)||(s?Jy(t,e,n,o):Gk(t,n,o)),o._s.get(t)}return r.$id=t,r}function Va(t){const e=Ct(t),i={};for(const n in e){const s=e[n];s.effect?i[n]=ge({get:()=>t[n],set(r){t[n]=r}}):(kt(s)||Ys(s))&&(i[n]=Ip(t,n))}return i}var Wk=Object.defineProperty,e3=Object.getOwnPropertySymbols,Kk=Object.prototype.hasOwnProperty,Yk=Object.prototype.propertyIsEnumerable,t3=(t,e,i)=>e in t?Wk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,i3=(t,e)=>{for(var i in e||(e={}))Kk.call(e,i)&&t3(t,i,e[i]);if(e3)for(var i of e3(e))Yk.call(e,i)&&t3(t,i,e[i]);return t},Bf=t=>typeof t=="function",Nf=t=>typeof t=="string",n3=t=>Nf(t)&&t.trim().length>0,Xk=t=>typeof t=="number",ja=t=>typeof t>"u",dc=t=>typeof t=="object"&&t!==null,qk=t=>Ar(t,"tag")&&n3(t.tag),s3=t=>window.TouchEvent&&t instanceof TouchEvent,r3=t=>Ar(t,"component")&&o3(t.component),Zk=t=>Bf(t)||dc(t),o3=t=>!ja(t)&&(Nf(t)||Zk(t)||r3(t)),a3=t=>dc(t)&&["height","width","right","left","top","bottom"].every(e=>Xk(t[e])),Ar=(t,e)=>(dc(t)||Bf(t))&&e in t,Qk=(t=>()=>t++)(0);function Im(t){return s3(t)?t.targetTouches[0].clientX:t.clientX}function l3(t){return s3(t)?t.targetTouches[0].clientY:t.clientY}var Jk=t=>{ja(t.remove)?t.parentNode&&t.parentNode.removeChild(t):t.remove()},fc=t=>r3(t)?fc(t.component):qk(t)?Me({render(){return t}}):typeof t=="string"?t:Ct(w(t)),eC=t=>{if(typeof t=="string")return t;const e=Ar(t,"props")&&dc(t.props)?t.props:{},i=Ar(t,"listeners")&&dc(t.listeners)?t.listeners:{};return{component:fc(t),props:e,listeners:i}},tC=()=>typeof window<"u",Rm=class{constructor(){this.allHandlers={}}getHandlers(t){return this.allHandlers[t]||[]}on(t,e){const i=this.getHandlers(t);i.push(e),this.allHandlers[t]=i}off(t,e){const i=this.getHandlers(t);i.splice(i.indexOf(e)>>>0,1)}emit(t,e){this.getHandlers(t).forEach(n=>n(e))}},iC=t=>["on","off","emit"].every(e=>Ar(t,e)&&Bf(t[e])),ps;(function(t){t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t.DEFAULT="default"})(ps||(ps={}));var hc;(function(t){t.TOP_LEFT="top-left",t.TOP_CENTER="top-center",t.TOP_RIGHT="top-right",t.BOTTOM_LEFT="bottom-left",t.BOTTOM_CENTER="bottom-center",t.BOTTOM_RIGHT="bottom-right"})(hc||(hc={}));var ms;(function(t){t.ADD="add",t.DISMISS="dismiss",t.UPDATE="update",t.CLEAR="clear",t.UPDATE_DEFAULTS="update_defaults"})(ms||(ms={}));var er="Vue-Toastification",tr={type:{type:String,default:ps.DEFAULT},classNames:{type:[String,Array],default:()=>[]},trueBoolean:{type:Boolean,default:!0}},u3={type:tr.type,customIcon:{type:[String,Boolean,Object,Function],default:!0}},Uf={component:{type:[String,Object,Function,Boolean],default:"button"},classNames:tr.classNames,showOnHover:{type:Boolean,default:!1},ariaLabel:{type:String,default:"close"}},Pm={timeout:{type:[Number,Boolean],default:5e3},hideProgressBar:{type:Boolean,default:!1},isRunning:{type:Boolean,default:!1}},c3={transition:{type:[Object,String],default:`${er}__bounce`}},nC={position:{type:String,default:hc.TOP_RIGHT},draggable:tr.trueBoolean,draggablePercent:{type:Number,default:.6},pauseOnFocusLoss:tr.trueBoolean,pauseOnHover:tr.trueBoolean,closeOnClick:tr.trueBoolean,timeout:Pm.timeout,hideProgressBar:Pm.hideProgressBar,toastClassName:tr.classNames,bodyClassName:tr.classNames,icon:u3.customIcon,closeButton:Uf.component,closeButtonClassName:Uf.classNames,showCloseButtonOnHover:Uf.showOnHover,accessibility:{type:Object,default:()=>({toastRole:"alert",closeButtonLabel:"close"})},rtl:{type:Boolean,default:!1},eventBus:{type:Object,required:!1,default:()=>new Rm}},sC={id:{type:[String,Number],required:!0,default:0},type:tr.type,content:{type:[String,Object,Function],required:!0,default:""},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0}},rC={container:{type:[Object,Function],default:()=>document.body},newestOnTop:tr.trueBoolean,maxToasts:{type:Number,default:20},transition:c3.transition,toastDefaults:Object,filterBeforeCreate:{type:Function,default:t=>t},filterToasts:{type:Function,default:t=>t},containerClassName:tr.classNames,onMounted:Function,shareAppContext:[Boolean,Object]},oo={CORE_TOAST:nC,TOAST:sC,CONTAINER:rC,PROGRESS_BAR:Pm,ICON:u3,TRANSITION:c3,CLOSE_BUTTON:Uf},d3=Me({name:"VtProgressBar",props:oo.PROGRESS_BAR,data(){return{hasClass:!0}},computed:{style(){return{animationDuration:`${this.timeout}ms`,animationPlayState:this.isRunning?"running":"paused",opacity:this.hideProgressBar?0:1}},cpClass(){return this.hasClass?`${er}__progress-bar`:""}},watch:{timeout(){this.hasClass=!1,this.$nextTick(()=>this.hasClass=!0)}},mounted(){this.$el.addEventListener("animationend",this.animationEnded)},beforeUnmount(){this.$el.removeEventListener("animationend",this.animationEnded)},methods:{animationEnded(){this.$emit("close-toast")}}});function oC(t,e){return L(),P("div",{style:Ue(t.style),class:Ie(t.cpClass)},null,6)}d3.render=oC;var aC=d3,f3=Me({name:"VtCloseButton",props:oo.CLOSE_BUTTON,computed:{buttonComponent(){return this.component!==!1?fc(this.component):"button"},classes(){const t=[`${er}__close-button`];return this.showOnHover&&t.push("show-on-hover"),t.concat(this.classNames)}}}),lC=He("  ");function uC(t,e){return L(),_e(wr(t.buttonComponent),Sr({"aria-label":t.ariaLabel,class:t.classes},t.$attrs),{default:H(()=>[lC]),_:1},16,["aria-label","class"])}f3.render=uC;var cC=f3,h3={},dC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"check-circle",class:"svg-inline--fa fa-check-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},fC=x("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},null,-1),hC=[fC];function pC(t,e){return L(),P("svg",dC,hC)}h3.render=pC;var mC=h3,p3={},gC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"info-circle",class:"svg-inline--fa fa-info-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},vC=x("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},null,-1),_C=[vC];function bC(t,e){return L(),P("svg",gC,_C)}p3.render=bC;var m3=p3,g3={},yC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-circle",class:"svg-inline--fa fa-exclamation-circle fa-w-16",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},wC=x("path",{fill:"currentColor",d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),EC=[wC];function SC(t,e){return L(),P("svg",yC,EC)}g3.render=SC;var xC=g3,v3={},TC={"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"exclamation-triangle",class:"svg-inline--fa fa-exclamation-triangle fa-w-18",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},AC=x("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},null,-1),kC=[AC];function CC(t,e){return L(),P("svg",TC,kC)}v3.render=CC;var LC=v3,_3=Me({name:"VtIcon",props:oo.ICON,computed:{customIconChildren(){return Ar(this.customIcon,"iconChildren")?this.trimValue(this.customIcon.iconChildren):""},customIconClass(){return Nf(this.customIcon)?this.trimValue(this.customIcon):Ar(this.customIcon,"iconClass")?this.trimValue(this.customIcon.iconClass):""},customIconTag(){return Ar(this.customIcon,"iconTag")?this.trimValue(this.customIcon.iconTag,"i"):"i"},hasCustomIcon(){return this.customIconClass.length>0},component(){return this.hasCustomIcon?this.customIconTag:o3(this.customIcon)?fc(this.customIcon):this.iconTypeComponent},iconTypeComponent(){return{[ps.DEFAULT]:m3,[ps.INFO]:m3,[ps.SUCCESS]:mC,[ps.ERROR]:LC,[ps.WARNING]:xC}[this.type]},iconClasses(){const t=[`${er}__icon`];return this.hasCustomIcon?t.concat(this.customIconClass):t}},methods:{trimValue(t,e=""){return n3(t)?t.trim():e}}});function IC(t,e){return L(),_e(wr(t.component),{class:Ie(t.iconClasses)},{default:H(()=>[He(G(t.customIconChildren),1)]),_:1},8,["class"])}_3.render=IC;var RC=_3,b3=Me({name:"VtToast",components:{ProgressBar:aC,CloseButton:cC,Icon:RC},inheritAttrs:!1,props:Object.assign({},oo.CORE_TOAST,oo.TOAST),data(){return{isRunning:!0,disableTransitions:!1,beingDragged:!1,dragStart:0,dragPos:{x:0,y:0},dragRect:{}}},computed:{classes(){const t=[`${er}__toast`,`${er}__toast--${this.type}`,`${this.position}`].concat(this.toastClassName);return this.disableTransitions&&t.push("disable-transition"),this.rtl&&t.push(`${er}__toast--rtl`),t},bodyClasses(){return[`${er}__toast-${Nf(this.content)?"body":"component-body"}`].concat(this.bodyClassName)},draggableStyle(){return this.dragStart===this.dragPos.x?{}:this.beingDragged?{transform:`translateX(${this.dragDelta}px)`,opacity:1-Math.abs(this.dragDelta/this.removalDistance)}:{transition:"transform 0.2s, opacity 0.2s",transform:"translateX(0)",opacity:1}},dragDelta(){return this.beingDragged?this.dragPos.x-this.dragStart:0},removalDistance(){return a3(this.dragRect)?(this.dragRect.right-this.dragRect.left)*this.draggablePercent:0}},mounted(){this.draggable&&this.draggableSetup(),this.pauseOnFocusLoss&&this.focusSetup()},beforeUnmount(){this.draggable&&this.draggableCleanup(),this.pauseOnFocusLoss&&this.focusCleanup()},methods:{hasProp:Ar,getVueComponentFromObj:fc,closeToast(){this.eventBus.emit(ms.DISMISS,this.id)},clickHandler(){this.onClick&&this.onClick(this.closeToast),this.closeOnClick&&(!this.beingDragged||this.dragStart===this.dragPos.x)&&this.closeToast()},timeoutHandler(){this.closeToast()},hoverPause(){this.pauseOnHover&&(this.isRunning=!1)},hoverPlay(){this.pauseOnHover&&(this.isRunning=!0)},focusPause(){this.isRunning=!1},focusPlay(){this.isRunning=!0},focusSetup(){addEventListener("blur",this.focusPause),addEventListener("focus",this.focusPlay)},focusCleanup(){removeEventListener("blur",this.focusPause),removeEventListener("focus",this.focusPlay)},draggableSetup(){const t=this.$el;t.addEventListener("touchstart",this.onDragStart,{passive:!0}),t.addEventListener("mousedown",this.onDragStart),addEventListener("touchmove",this.onDragMove,{passive:!1}),addEventListener("mousemove",this.onDragMove),addEventListener("touchend",this.onDragEnd),addEventListener("mouseup",this.onDragEnd)},draggableCleanup(){const t=this.$el;t.removeEventListener("touchstart",this.onDragStart),t.removeEventListener("mousedown",this.onDragStart),removeEventListener("touchmove",this.onDragMove),removeEventListener("mousemove",this.onDragMove),removeEventListener("touchend",this.onDragEnd),removeEventListener("mouseup",this.onDragEnd)},onDragStart(t){this.beingDragged=!0,this.dragPos={x:Im(t),y:l3(t)},this.dragStart=Im(t),this.dragRect=this.$el.getBoundingClientRect()},onDragMove(t){this.beingDragged&&(t.preventDefault(),this.isRunning&&(this.isRunning=!1),this.dragPos={x:Im(t),y:l3(t)})},onDragEnd(){this.beingDragged&&(Math.abs(this.dragDelta)>=this.removalDistance?(this.disableTransitions=!0,this.$nextTick(()=>this.closeToast())):setTimeout(()=>{this.beingDragged=!1,a3(this.dragRect)&&this.pauseOnHover&&this.dragRect.bottom>=this.dragPos.y&&this.dragPos.y>=this.dragRect.top&&this.dragRect.left<=this.dragPos.x&&this.dragPos.x<=this.dragRect.right?this.isRunning=!1:this.isRunning=!0}))}}}),PC=["role"];function DC(t,e){const i=Ge("Icon"),n=Ge("CloseButton"),s=Ge("ProgressBar");return L(),P("div",{class:Ie(t.classes),style:Ue(t.draggableStyle),onClick:e[0]||(e[0]=(...r)=>t.clickHandler&&t.clickHandler(...r)),onMouseenter:e[1]||(e[1]=(...r)=>t.hoverPause&&t.hoverPause(...r)),onMouseleave:e[2]||(e[2]=(...r)=>t.hoverPlay&&t.hoverPlay(...r))},[t.icon?(L(),_e(i,{key:0,"custom-icon":t.icon,type:t.type},null,8,["custom-icon","type"])):X("v-if",!0),x("div",{role:t.accessibility.toastRole||"alert",class:Ie(t.bodyClasses)},[typeof t.content=="string"?(L(),P(Te,{key:0},[He(G(t.content),1)],2112)):(L(),_e(wr(t.getVueComponentFromObj(t.content)),Sr({key:1,"toast-id":t.id},t.hasProp(t.content,"props")?t.content.props:{},zp(t.hasProp(t.content,"listeners")?t.content.listeners:{}),{onCloseToast:t.closeToast}),null,16,["toast-id","onCloseToast"]))],10,PC),t.closeButton?(L(),_e(n,{key:1,component:t.closeButton,"class-names":t.closeButtonClassName,"show-on-hover":t.showCloseButtonOnHover,"aria-label":t.accessibility.closeButtonLabel,onClick:ft(t.closeToast,["stop"])},null,8,["component","class-names","show-on-hover","aria-label","onClick"])):X("v-if",!0),t.timeout?(L(),_e(s,{key:2,"is-running":t.isRunning,"hide-progress-bar":t.hideProgressBar,timeout:t.timeout,onCloseToast:t.timeoutHandler},null,8,["is-running","hide-progress-bar","timeout","onCloseToast"])):X("v-if",!0)],38)}b3.render=DC;var OC=b3,y3=Me({name:"VtTransition",props:oo.TRANSITION,emits:["leave"],methods:{hasProp:Ar,leave(t){t instanceof HTMLElement&&(t.style.left=t.offsetLeft+"px",t.style.top=t.offsetTop+"px",t.style.width=getComputedStyle(t).width,t.style.position="absolute")}}});function MC(t,e){return L(),_e(so,{tag:"div","enter-active-class":t.transition.enter?t.transition.enter:`${t.transition}-enter-active`,"move-class":t.transition.move?t.transition.move:`${t.transition}-move`,"leave-active-class":t.transition.leave?t.transition.leave:`${t.transition}-leave-active`,onLeave:t.leave},{default:H(()=>[mi(t.$slots,"default")]),_:3},8,["enter-active-class","move-class","leave-active-class","onLeave"])}y3.render=MC;var $C=y3,w3=Me({name:"VueToastification",devtools:{hide:!0},components:{Toast:OC,VtTransition:$C},props:Object.assign({},oo.CORE_TOAST,oo.CONTAINER,oo.TRANSITION),data(){return{count:0,positions:Object.values(hc),toasts:{},defaults:{}}},computed:{toastArray(){return Object.values(this.toasts)},filteredToasts(){return this.defaults.filterToasts(this.toastArray)}},beforeMount(){const t=this.eventBus;t.on(ms.ADD,this.addToast),t.on(ms.CLEAR,this.clearToasts),t.on(ms.DISMISS,this.dismissToast),t.on(ms.UPDATE,this.updateToast),t.on(ms.UPDATE_DEFAULTS,this.updateDefaults),this.defaults=this.$props},mounted(){this.setup(this.container)},methods:{async setup(t){Bf(t)&&(t=await t()),Jk(this.$el),t.appendChild(this.$el)},setToast(t){ja(t.id)||(this.toasts[t.id]=t)},addToast(t){t.content=eC(t.content);const e=Object.assign({},this.defaults,t.type&&this.defaults.toastDefaults&&this.defaults.toastDefaults[t.type],t),i=this.defaults.filterBeforeCreate(e,this.toastArray);i&&this.setToast(i)},dismissToast(t){const e=this.toasts[t];!ja(e)&&!ja(e.onClose)&&e.onClose(),delete this.toasts[t]},clearToasts(){Object.keys(this.toasts).forEach(t=>{this.dismissToast(t)})},getPositionToasts(t){const e=this.filteredToasts.filter(i=>i.position===t).slice(0,this.defaults.maxToasts);return this.defaults.newestOnTop?e.reverse():e},updateDefaults(t){ja(t.container)||this.setup(t.container),this.defaults=Object.assign({},this.defaults,t)},updateToast({id:t,options:e,create:i}){this.toasts[t]?(e.timeout&&e.timeout===this.toasts[t].timeout&&e.timeout++,this.setToast(Object.assign({},this.toasts[t],e))):i&&this.addToast(Object.assign({},{id:t},e))},getClasses(t){return[`${er}__container`,t].concat(this.defaults.containerClassName)}}});function FC(t,e){const i=Ge("Toast"),n=Ge("VtTransition");return L(),P("div",null,[(L(!0),P(Te,null,Ne(t.positions,s=>(L(),P("div",{key:s},[F(n,{transition:t.defaults.transition,class:Ie(t.getClasses(s))},{default:H(()=>[(L(!0),P(Te,null,Ne(t.getPositionToasts(s),r=>(L(),_e(i,Sr({key:r.id},r),null,16))),128))]),_:2},1032,["transition","class"])]))),128))])}w3.render=FC;var BC=w3,E3=(t={},e=!0)=>{const i=t.eventBus=t.eventBus||new Rm;e&&ot(()=>{const r=nc(BC,i3({},t)),o=r.mount(document.createElement("div")),a=t.onMounted;if(ja(a)||a(o,r),t.shareAppContext){const l=t.shareAppContext;l===!0?console.warn(`[${er}] App to share context with was not provided.`):(r._context.components=l._context.components,r._context.directives=l._context.directives,r._context.mixins=l._context.mixins,r._context.provides=l._context.provides,r.config.globalProperties=l.config.globalProperties)}});const n=(r,o)=>{const a=Object.assign({},{id:Qk(),type:ps.DEFAULT},o,{content:r});return i.emit(ms.ADD,a),a.id};n.clear=()=>i.emit(ms.CLEAR,void 0),n.updateDefaults=r=>{i.emit(ms.UPDATE_DEFAULTS,r)},n.dismiss=r=>{i.emit(ms.DISMISS,r)};function s(r,{content:o,options:a},l=!1){const u=Object.assign({},a,{content:o});i.emit(ms.UPDATE,{id:r,options:u,create:l})}return n.update=s,n.success=(r,o)=>n(r,Object.assign({},o,{type:ps.SUCCESS})),n.info=(r,o)=>n(r,Object.assign({},o,{type:ps.INFO})),n.error=(r,o)=>n(r,Object.assign({},o,{type:ps.ERROR})),n.warning=(r,o)=>n(r,Object.assign({},o,{type:ps.WARNING})),n},NC=()=>{const t=()=>console.warn(`[${er}] This plugin does not support SSR!`);return new Proxy(t,{get(){return t}})};function S3(t){return tC()?iC(t)?E3({eventBus:t},!1):E3(t,!0):NC()}var x3=Symbol("VueToastification"),T3=new Rm,UC=(t,e)=>{e?.shareAppContext===!0&&(e.shareAppContext=t);const i=S3(i3({eventBus:T3},e));t.provide(x3,i)},Ha=t=>{const e=Fi()?hs(x3,void 0):void 0;return e||S3(T3)},VC=UC,Vn=(t=>(t.Hidden="hidden",t.ShowUndo="showUndo",t.ShowForward="showForward",t))(Vn||{}),gs=(t=>(t.None="none",t.IframeDrawer="iframe",t.NotificationsDrawer="notifications",t))(gs||{});function $t(){return hs("BEWLY_APP")}async function A3(t,e){const i={type:t,data:e};return Zs.runtime.sendMessage(i)}var Dm=(t=>(t.OPEN_LINK_IN_BACKGROUND="openLinkInBackground",t))(Dm||{});async function Wo(t){try{await A3(Dm.OPEN_LINK_IN_BACKGROUND,{contentScriptQuery:Dm.OPEN_LINK_IN_BACKGROUND,url:t})}catch(e){console.error("Failed to open link in background:",e)}}const jC=["href","target","title","rel"],kr=Me({__name:"ALink",props:{href:{},title:{},rel:{},type:{},customClickEvent:{type:Boolean},stopPropagation:{type:Boolean}},emits:["click"],setup(t,{emit:e}){const i=t,n=e,{openIframeDrawer:s}=$t(),r=ge(()=>i.href?i.href:"javascript:void(0)"),o=ge(()=>i.type==="topBar"?k.value.topBarLinkOpenMode:i.type==="videoCard"?k.value.videoCardLinkOpenMode:i.type==="searchBar"?k.value.searchBarLinkOpenMode:"newTab"),a=ge(()=>o.value==="newTab"?"_blank":o.value==="currentTabIfNotHomepage"?ai()||Et()?"_blank":"_top":(o.value==="currentTab","_top"));function l(u){if(i.stopPropagation&&u.stopPropagation(),!(u.ctrlKey||u.metaKey||u.altKey)){if(i.customClickEvent){u.preventDefault(),n("click",u);return}if(i.type==="topBar"&&k.value.touchScreenOptimization){const c=u.target,d=c.closest(".bew-popover"),f=c.closest(".home-button"),h=c.closest(".pinned-channels__item");if(!d&&!f&&!h){u.preventDefault();return}}if(o.value==="drawer"){u.preventDefault(),i.href&&s(r.value);return}o.value==="background"&&i.href&&(u.preventDefault(),Wo(r.value))}}return(u,c)=>(L(),P("a",{href:w(r),target:w(a),title:u.title,rel:u.rel,onClick:l},[mi(u.$slots,"default")],8,jC))}}),HC=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),Pl=Qs("localWallpapers",{});function zC(t){const e=Date.now(),i=Math.random().toString(36).substring(2,8),n=t.split(".").pop()||"";return`wallpaper_${e}_${i}.${n}`}async function GC(t,e){const i=zC(t.name),n={id:i,name:t.name,base64:e,size:t.size,type:t.type,lastModified:t.lastModified,timestamp:Date.now()},s=Pl.value||{};return s[i]=n,Pl.value=s,{id:i,name:t.name,isLocal:!0}}function k3(t){const i=(Pl.value||{})[t];return i?i.base64:null}function C3(t){const e=Pl.value||{};e[t]&&(delete e[t],Pl.value=e)}function L3(t){return!!(Pl.value||{})[t]}function Om(t){if(!t)return null;if(t.startsWith("local-wallpaper:")){const e=t.replace("local-wallpaper:","");return k3(e)}return t}function Ko(t){return t.startsWith("local-wallpaper:")}const Dl=Qs("wallpaperCache",{});async function WC(t,e){if(Ko(t)||e<=0)return null;const i=Dl.value||{},n=i[t];if(!n)return null;const r=Date.now()-n.timestamp,o=e*60*60*1e3;return r>o?(delete i[t],Dl.value=i,null):n.dataUrl}async function KC(t,e){if(!Ko(t)&&!(e<=0))try{Vf();const i=await fetch(t);if(!i.ok)throw new Error(`Failed to fetch wallpaper: ${i.status}`);const n=await i.blob(),s=await YC(n),r=Dl.value||{};r[t]={url:t,dataUrl:s,timestamp:Date.now(),cacheTime:e},Dl.value=r}catch(i){console.error("Failed to cache wallpaper:",i)}}async function I3(t,e){if(!t||Ko(t)||e<=0)return t;const i=await WC(t,e);return i||(KC(t,e).catch(n=>console.error("Failed to cache wallpaper:",n)),t)}function Vf(t){const e=Dl.value||{},i=Date.now();let n=0;Object.keys(e).forEach(s=>{const r=e[s],a=(t!==void 0?t:r.cacheTime)*60*60*1e3;i-r.timestamp>a&&(delete e[s],n++)}),n>0&&(Dl.value=e,console.log(`Cleaned up ${n} expired wallpaper cache entries`))}function YC(t){return new Promise((e,i)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=i,n.readAsDataURL(t)})}const XC={key:0},qC={key:1},ZC=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"AppBackground",props:{activatedPage:{}},setup(t){const e=t,{isDark:i}=Js();st(()=>{Vf(),h()});const n=z(""),s=z("");async function r(){const p=k.value.wallpaper;if(Ko(p)){n.value=Om(p)||"";return}p?n.value=await I3(p,k.value.wallpaperCacheTime):n.value=""}async function o(){const p=k.value.searchPageWallpaper;if(Ko(p)){s.value=Om(p)||"";return}p?s.value=await I3(p,k.value.searchPageWallpaperCacheTime):s.value=""}Pe(()=>[k.value.wallpaper,k.value.wallpaperCacheTime],([,p],m)=>{m&&p!==m[1]&&Vf(p),r()},{immediate:!0}),Pe(()=>[k.value.searchPageWallpaper,k.value.searchPageWallpaperCacheTime],([,p],m)=>{m&&p!==m[1]&&Vf(p),o()},{immediate:!0});const a=ge(()=>e.activatedPage===_t.Search&&k.value.individuallySetSearchPageWallpaper?s.value:n.value),l=ge(()=>By(k.value.themeColor).replace("hsl(","").replace(")","")),u=ge(()=>Number(l.value.split(",")[0])||0),c=ge(()=>Number(l.value.split(",")[1].replace("%",""))||0),d=ge(()=>Number(l.value.split(",")[2].replace("%",""))||0),f=ge(()=>`linear-gradient(180deg, 
    transparent 0% 44%,
    hsla(${u.value}, ${c.value+20}%, ${d.value}%, 0.4) 62%, 
    hsl(${u.value}, ${c.value}%, ${d.value}%) 80%,
    hsl(${u.value}, ${c.value}%, 100%) 100%)`);Pe(()=>k.value.wallpaperMaskOpacity,()=>{h()}),Pe(()=>k.value.searchPageWallpaperMaskOpacity,()=>{h()}),Pe(()=>e.activatedPage,(p,m)=>{const g=v=>v===_t.Search;k.value.individuallySetSearchPageWallpaper&&(g(p)||g(m))&&h()});function h(){const p=document.querySelector("#bewly"),m=e.activatedPage===_t.Search;k.value.individuallySetSearchPageWallpaper&&m?p.style.setProperty("--bew-homepage-bg-mask-opacity",`${k.value.searchPageWallpaperMaskOpacity}%`):p.style.setProperty("--bew-homepage-bg-mask-opacity",`${k.value.wallpaperMaskOpacity}%`)}return(p,m)=>(L(),P("div",null,[F(nt,{name:"fade"},{default:H(()=>[w(k).useLinearGradientThemeColorBackground&&w(i)?(L(),P("div",{key:0,style:Ue({opacity:p.activatedPage===w(_t).Search?1:.4,background:w(f)}),pos:"absolute top-0 left-0","w-full":"","h-full":"","z-0":"","pointer-events-none":""},null,4)):X("",!0)]),_:1}),F(nt,{name:"fade"},{default:H(()=>[p.activatedPage===w(_t).Search?(L(),P("div",XC,[x("div",{pos:"absolute top-0 left-0","w-full":"","h-full":"","duration-300":"",bg:"cover center $bew-homepage-bg","z--1":"",style:Ue({backgroundImage:`url('${w(a)}')`})},null,4),F(nt,{name:"fade"},{default:H(()=>[!w(k).individuallySetSearchPageWallpaper&&w(k).enableWallpaperMasking||w(k).searchPageEnableWallpaperMasking?(L(),P("div",{key:0,pos:"absolute top-0 left-0","w-full":"","h-full":"","pointer-events-none":"",bg:"$bew-homepage-bg-mask","duration-300":"","z--1":"",style:Ue({backdropFilter:`blur(${w(k).individuallySetSearchPageWallpaper?w(k).searchPageWallpaperBlurIntensity:w(k).wallpaperBlurIntensity}px)`})},null,4)):X("",!0)]),_:1})])):(L(),P("div",qC,[x("div",{style:Ue({backgroundImage:`url('${w(a)}')`}),pos:"absolute top-0 left-0","w-full":"","h-full":"","duration-300":"",bg:"cover center $bew-homepage-bg","z--1":""},null,4),F(nt,{name:"fade"},{default:H(()=>[w(k).enableWallpaperMasking?(L(),P("div",{key:0,pos:"absolute top-0 left-0","w-full":"","h-full":"","pointer-events-none":"",bg:"$bew-homepage-bg-mask","duration-300":"","z--1":"",style:Ue({backdropFilter:`blur(${w(k).wallpaperBlurIntensity}px)`})},null,4)):X("",!0)]),_:1})]))]),_:1})]))}})},Symbol.toStringTag,{value:"Module"})),QC={class:"article-content","flex-1":"","min-w-0":""},JC={class:"article-title",text:"base $bew-text-1","font-medium":"","line-clamp-2":"","mb-2":""},eL={key:0,class:"article-desc",text:"sm $bew-text-2","line-clamp-2":"","mb-2":""},tL={class:"article-meta",flex:"","items-center":"","gap-3":"",text:"xs $bew-text-3"},iL={class:"author"},nL={key:0},sL={key:1},rL={class:"article-stats",flex:"","items-center":"","gap-3":"",text:"xs $bew-text-3","mt-2":""},oL={key:0,flex:"","items-center":"","gap-1":""},aL={key:1,flex:"","items-center":"","gap-1":""},lL={key:2,flex:"","items-center":"","gap-1":""},uL={key:1,class:"article-tags",flex:"","flex-wrap":"","gap-2":"","mt-2":""},cL={key:0,class:"article-cover","w-32":"","h-24":"",rounded:"$bew-radius-half","overflow-hidden":"","flex-shrink-0":"",bg:"$bew-fill-1"},dL=["src","alt"],fL=Me({__name:"ArticleCard",props:{id:{},title:{},desc:{},cover:{},author:{},authorMid:{},view:{},like:{},reply:{},publishTime:{},categoryName:{},tags:{}},setup(t){function e(n){return n?n>=1e4?`${(n/1e4).toFixed(1)}`:n.toString():"0"}function i(n){if(!n)return"";const s=new Date(n*1e3),o=new Date().getTime()-s.getTime(),a=Math.floor(o/(1e3*60*60*24));if(a===0){const l=Math.floor(o/36e5);if(l===0){const u=Math.floor(o/6e4);return u===0?"":`${u}`}return`${l}`}else return a===1?"":a<30?`${a}`:a<365?`${Math.floor(a/30)}`:`${Math.floor(a/365)}`}return(n,s)=>(L(),_e(kr,{href:`https://www.bilibili.com/read/cv${n.id}`,type:"videoCard",class:"article-card",flex:"","gap-4":"","p-4":"",bg:"$bew-elevated hover:$bew-elevated-hover",rounded:"$bew-radius","transition-all":"","duration-300":"","cursor-pointer":""},{default:H(()=>[x("div",QC,[x("h3",JC,G(n.title),1),n.desc?(L(),P("p",eL,G(n.desc),1)):X("",!0),x("div",tL,[x("span",iL,G(n.author),1),n.categoryName?(L(),P("span",nL,G(n.categoryName),1)):X("",!0),n.publishTime?(L(),P("span",sL,G(i(n.publishTime)),1)):X("",!0)]),x("div",rL,[n.view!==void 0?(L(),P("div",oL,[s[0]||(s[0]=x("div",{"i-tabler:eye":""},null,-1)),x("span",null,G(e(n.view)),1)])):X("",!0),n.like!==void 0?(L(),P("div",aL,[s[1]||(s[1]=x("div",{"i-tabler:thumb-up":""},null,-1)),x("span",null,G(e(n.like)),1)])):X("",!0),n.reply!==void 0?(L(),P("div",lL,[s[2]||(s[2]=x("div",{"i-tabler:message":""},null,-1)),x("span",null,G(e(n.reply)),1)])):X("",!0)]),n.tags&&n.tags.length>0?(L(),P("div",uL,[(L(!0),P(Te,null,Ne(n.tags.slice(0,3),r=>(L(),P("span",{key:r.name,text:"xs $bew-text-3",bg:"$bew-fill-1","px-2":"","py-0.5":"","rounded-full":""},G(r.name),1))),128))])):X("",!0)]),n.cover?(L(),P("div",cL,[x("img",{src:n.cover,alt:n.title,"w-full":"","h-full":"","object-cover":""},null,8,dL)])):X("",!0)]),_:1},8,["href"]))}}),qe=(t,e)=>{const i=t.__vccOpts||t;for(const[n,s]of e)i[n]=s;return i},Mm=qe(fL,[["__scopeId","data-v-1b78a685"]]),hL=Object.freeze(Object.defineProperty({__proto__:null,default:Mm},Symbol.toStringTag,{value:"Module"})),$m=t=>t&&typeof t=="object"&&!Array.isArray(t),Fm=(t,...e)=>{if(!e.length)return t;const i=e.shift();if($m(t)&&$m(i))for(const n in i)$m(i[n])?(t[n]||Object.assign(t,{[n]:{}}),Fm(t[n],i[n])):Object.assign(t,{[n]:i[n]});return Fm(t,...e)},pL=Fm({},{"cmn-CN":{common:{view_all:{t:0,b:{t:2,i:[{t:3}],s:""}},play_all:{t:0,b:{t:2,i:[{t:3}],s:""}},loading:{t:0,b:{t:2,i:[{t:3}],s:"..."}},search:{t:0,b:{t:2,i:[{t:3}],s:""}},undo:{t:0,b:{t:2,i:[{t:3}],s:""}},days:{t:0,b:{t:2,i:[{t:3}],s:""}},view:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:""}]}},viewWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},danmaku:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" "}]}},danmakuWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},like:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" "}]}},likeWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},anime_follow_count:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:""}]}},year:{t:0,b:{t:2,i:[{t:3}],s:""}},month:{t:0,b:{t:2,i:[{t:3}],s:""}},week:{t:0,b:{t:2,i:[{t:3}],s:""}},day:{t:0,b:{t:2,i:[{t:3}],s:""}},hour:{t:0,b:{t:2,i:[{t:3}],s:""}},minute:{t:0,b:{t:2,i:[{t:3}],s:""}},second:{t:0,b:{t:2,i:[{t:3}],s:""}},yesterday:{t:0,b:{t:2,i:[{t:3}],s:""}},just_now:{t:0,b:{t:2,i:[{t:3}],s:""}},please_log_in_first:{t:0,b:{t:2,i:[{t:3}],s:""}},login:{t:0,b:{t:2,i:[{t:3}],s:""}},save_to_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},added:{t:0,b:{t:2,i:[{t:3}],s:""}},performance_impact_warn:{t:0,b:{t:2,i:[{t:3}],s:""}},no_data:{t:0,b:{t:2,i:[{t:3}],s:""}},no_more_content:{t:0,b:{t:2,i:[{t:3}],s:""}},operation:{add:{t:0,b:{t:2,i:[{t:3}],s:""}},edit:{t:0,b:{t:2,i:[{t:3}],s:""}},delete:{t:0,b:{t:2,i:[{t:3}],s:""}},confirm:{t:0,b:{t:2,i:[{t:3}],s:""}},cancel:{t:0,b:{t:2,i:[{t:3}],s:""}},enable:{t:0,b:{t:2,i:[{t:3}],s:""}},disable:{t:0,b:{t:2,i:[{t:3}],s:""}},refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},reset:{t:0,b:{t:2,i:[{t:3}],s:""}},import:{t:0,b:{t:2,i:[{t:3}],s:""}},export:{t:0,b:{t:2,i:[{t:3}],s:""}},undo_refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},remove:{t:0,b:{t:2,i:[{t:3}],s:""}}},table:{index:{t:0,b:{t:2,i:[{t:3}],s:""}},title:{t:0,b:{t:2,i:[{t:3}],s:""}},name:{t:0,b:{t:2,i:[{t:3}],s:""}},remark:{t:0,b:{t:2,i:[{t:3}],s:""}},operations:{t:0,b:{t:2,i:[{t:3}],s:""}}},position:{left:{t:0,b:{t:2,i:[{t:3}],s:""}},right:{t:0,b:{t:2,i:[{t:3}],s:""}},top:{t:0,b:{t:2,i:[{t:3}],s:""}},bottom:{t:0,b:{t:2,i:[{t:3}],s:""}}}},iframe_drawer:{open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},close:{t:0,b:{t:2,i:[{t:3}],s:""}},press_esc_again_to_close:{t:0,b:{t:2,i:[{t:3}],s:" Esc "}}},settings:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_plugin_components_and_pages:{t:0,b:{t:2,i:[{t:3}],s:"BewlyCat"}},menu_bilibili_features_enhancement:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili"}},menu_appearance:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_compatibility:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_about:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_changelog:{t:0,b:{t:2,i:[{t:3}],s:""}},experimental:{t:0,b:{t:2,i:[{t:3}],s:""}},plugin:{general:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_and_sidebar:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},search:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_balance:{t:0,b:{t:2,i:[{t:3}],s:""}}},bilibili_features:{comments:{t:0,b:{t:2,i:[{t:3}],s:""}},video_playback:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},vip_features:{t:0,b:{t:2,i:[{t:3}],s:""}},vip_features_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}}},changelog_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}},group_common:{t:0,b:{t:2,i:[{t:3}],s:""}},group_language:{t:0,b:{t:2,i:[{t:3}],s:""}},group_ad_blocking:{t:0,b:{t:2,i:[{t:3}],s:""}},group_comments:{t:0,b:{t:2,i:[{t:3}],s:""}},group_languages_and_fonts:{t:0,b:{t:2,i:[{t:3}],s:""}},group_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},group_video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},group_performance:{t:0,b:{t:2,i:[{t:3}],s:""}},group_player_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},group_player_components:{t:0,b:{t:2,i:[{t:3}],s:""}},group_playback_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},group_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},group_random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},group_topbar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_navigation:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},group_dock:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},group_sidebar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_sidebar_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},group_color:{t:0,b:{t:2,i:[{t:3}],s:""}},group_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},group_logo:{t:0,b:{t:2,i:[{t:3}],s:"LOGO"}},group_search_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_hot_search:{t:0,b:{t:2,i:[{t:3}],s:""}},group_search_results:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:" "}},group_recommendation_filters:{t:0,b:{t:2,i:[{t:3}],s:" "}},group_recommendation_filters_desc:{t:0,b:{t:2,i:[{t:3}],s:`BIP!
`}},group_following:{t:0,b:{t:2,i:[{t:3}],s:""}},group_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},group_home_tabs:{t:0,b:{t:2,i:[{t:3}],s:""}},group_home_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},btn:{authorize:{t:0,b:{t:2,i:[{t:3}],s:""}},revoke:{t:0,b:{t:2,i:[{t:3}],s:""}},open_settings:{t:0,b:{t:2,i:[{t:3}],s:"..."}}},touch_screen_optimization:{t:0,b:{t:2,i:[{t:3}],s:""}},touch_screen_optimization_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},show_home_button_in_touch_mode:{t:0,b:{t:2,i:[{t:3}],s:" Home "}},show_home_button_in_touch_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},chk_box:{show:{t:0,b:{t:2,i:[{t:3}],s:""}},hidden:{t:0,b:{t:2,i:[{t:3}],s:""}}},visibility:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_grid_layout_switcher:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_horizontal_scrolling:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_horizontal_scrolling_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},select_language:{t:0,b:{t:2,i:[{t:3}],s:""}},select_language_opt:{english:{t:0,b:{t:2,i:[{t:3}],s:""}},mandarin_cn:{t:0,b:{t:2,i:[{t:3}],s:" - "}},mandarin_tw:{t:0,b:{t:2,i:[{t:3}],s:" - "}},jyut:{t:0,b:{t:2,i:[{t:3}],s:""}}},customize_font:{t:0,b:{t:2,i:[{t:3}],s:""}},customize_font_opt:{default:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili "}},recommend:{t:0,b:{t:2,i:[{t:3}],s:""}},custom:{t:0,b:{t:2,i:[{t:3}],s:""}}},customize_font_desc:{t:0,b:{t:2,i:[{t:3}],s:` <a class="link" href="https://github.com/GuiWonder/Shanggu" target="_blank">Shanggu Fonts ()</a>  <a class="link" href="https://github.com/ayaka14732/FanWunHak" target="_blank">Fan Wun Hak ()</a>
/
`}},override_danmaku_font:{t:0,b:{t:2,i:[{t:3}],s:""}},override_danmaku_font_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},remove_the_indent_from_chinese_punctuation:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_the_indent_from_chinese_punctuation_desc:{t:0,b:{t:2,i:[{t:3}],s:`Bilibili  
`}},enable_frosted_glass:{t:0,b:{t:2,i:[{t:3}],s:""}},frosted_glass_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:""}},disable_shadow:{t:0,b:{t:2,i:[{t:3}],s:""}},link_opening_behavior_opt:{current_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},current_tab_if_not_homepage:{t:0,b:{t:2,i:[{t:3}],s:""}},background:{t:0,b:{t:2,i:[{t:3}],s:""}},new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},drawer:{t:0,b:{t:2,i:[{t:3}],s:""}}},top_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},search_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},close_drawer_without_pressing_esc_again:{t:0,b:{t:2,i:[{t:3}],s:" <kbd>Esc</kbd> "}},block_ads:{t:0,b:{t:2,i:[{t:3}],s:""}},block_top_search_page_ads:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},block_top_search_page_ads_desc:{t:0,b:{t:2,i:[{t:3}],s:` 
`}},video_default_player_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state_opt:{system:{t:0,b:{t:2,i:[{t:3}],s:""}},on:{t:0,b:{t:2,i:[{t:3}],s:""}},off:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_player_mode:{default:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_player_scroll:{t:0,b:{t:2,i:[{t:3}],s:""}},video_player_scroll_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enlarge_favorite_dialog:{t:0,b:{t:2,i:[{t:3}],s:""}},enlarge_favorite_dialog_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},external_watch_later_button:{t:0,b:{t:2,i:[{t:3}],s:""}},external_watch_later_button_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},keep_collection_video_default_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},keep_collection_video_default_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},remember_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},remember_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_on_end:{t:0,b:{t:2,i:[{t:3}],s:"/"}},auto_exit_fullscreen_on_end_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_exclude_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_exclude_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_bilibili_default_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"B"}},use_bilibili_default_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_play_mode_default:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_play_mode_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_mode_auto_play_with_recommend:{t:0,b:{t:2,i:[{t:3}],s:"()"}},auto_play_mode_pause_at_end:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_mode_loop:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_multipart:{t:0,b:{t:2,i:[{t:3}],s:"P"}},auto_play_multipart_desc:{t:0,b:{t:2,i:[{t:3}],s:"P"}},auto_play_collection:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_collection_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_recommend:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_recommend_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_playlist:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_playlist_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_random_play_desc:{t:0,b:{t:2,i:[{t:3}],s:"P"}},random_play_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_mode_manual:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_mode_auto:{t:0,b:{t:2,i:[{t:3}],s:""}},min_videos_for_random:{t:0,b:{t:2,i:[{t:3}],s:""}},min_videos_for_random_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_enabled:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_disabled:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_not_enabled:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_min_videos_required:{t:0,b:{t:2,i:[{t:3,v:""},{t:4,k:"count"},{t:3,v:""}]}},enable_video_preview:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_video_ctrl_bar_on_video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},hover_video_card_delayed:{t:0,b:{t:2,i:[{t:3}],s:""}},show_video_card_recommend_tag:{t:0,b:{t:2,i:[{t:3}],s:""}},show_video_card_recommend_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:'""""""'}},auto_hide_top_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config_opt:{alwaysShow:{t:0,b:{t:2,i:[{t:3}],s:""}},alwaysHide:{t:0,b:{t:2,i:[{t:3}],s:""}},showOnMouse:{t:0,b:{t:2,i:[{t:3}],s:""}},showOnScroll:{t:0,b:{t:2,i:[{t:3}],s:""}}},always_use_transparent_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"()"}},show_top_bar_theme_color_gradient:{t:0,b:{t:2,i:[{t:3}],s:""}},show_bewly_or_bili_top_bar_switcher:{t:0,b:{t:2,i:[{t:3}],s:" BewlyCat/Bilibili "}},show_bewly_or_bili_page_switcher:{t:0,b:{t:2,i:[{t:3}],s:" BewlyCat/Bilibili "}},enable_settings_sync:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_settings_sync_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},top_bar_icon_badges:{t:0,b:{t:2,i:[{t:3}],s:""}},top_bar_icon_badges_opt:{number:{t:0,b:{t:2,i:[{t:3}],s:""}},dot:{t:0,b:{t:2,i:[{t:3}],s:""}},none:{t:0,b:{t:2,i:[{t:3}],s:""}}},show_watch_later_badge:{t:0,b:{t:2,i:[{t:3}],s:""}},show_bcoin_receive_reminder:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_receive_bcoin_coupon:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_receive_bcoin_coupon_desc:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_receive_vip_exp:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_receive_vip_exp_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},open_notifications_page_as_drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},group_video_card_grid:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_breakpoints:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_breakpoints_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_min_width:{t:0,b:{t:2,i:[{t:3}],s:" "}},grid_columns:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_columns_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_add_breakpoint:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_auto_size:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_auto_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_author_font_size:{t:0,b:{t:2,i:[{t:3}],s:"UP "}},video_card_author_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:" UP "}},video_card_meta_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_meta_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_height:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_height_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_reset:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout_option:{modern:{t:0,b:{t:2,i:[{t:3}],s:""}},old:{t:0,b:{t:2,i:[{t:3}],s:""}}},font_size_option:{xs:{t:0,b:{t:2,i:[{t:3}],s:""}},sm:{t:0,b:{t:2,i:[{t:3}],s:""}},base:{t:0,b:{t:2,i:[{t:3}],s:""}},lg:{t:0,b:{t:2,i:[{t:3}],s:""}}},group_topbar_components:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_components_adjustment:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_components_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},group_topbar_pinned_channels:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_desc:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},topbar_pinned_channels_title:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_all_selected:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_empty:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_order_tip:{t:0,b:{t:2,i:[{t:3}],s:""}},badge_type:{t:0,b:{t:2,i:[{t:3}],s:""}},always_use_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},always_use_dock_desc:{t:0,b:{t:2,i:[{t:3}],s:"Dock  Dock "}},auto_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},half_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},dock_position:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},dock_position_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_content_adjustment:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},dock_content_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},dock_item_open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_item_use_original_bili_web_page:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},disable_dock_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},disable_light_dark_mode_switcher:{t:0,b:{t:2,i:[{t:3}],s:"/"}},back_to_top_and_refresh_buttons_are_separated:{t:0,b:{t:2,i:[{t:3}],s:""}},sidebar_position:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_hide_sidebar:{t:0,b:{t:2,i:[{t:3}],s:""}},theme:{t:0,b:{t:2,i:[{t:3}],s:""}},theme_opt:{light:{t:0,b:{t:2,i:[{t:3}],s:""}},dark:{t:0,b:{t:2,i:[{t:3}],s:""}},auto:{t:0,b:{t:2,i:[{t:3}],s:""}}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:""}},dark_mode_base_color:{t:0,b:{t:2,i:[{t:3}],s:""}},gradient_theme_color_background:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:": "}},wallpaper_mode_opt:{build_in:{t:0,b:{t:2,i:[{t:3}],s:""}},by_url:{t:0,b:{t:2,i:[{t:3}],s:""}}},choose_ur_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},image_url:{t:0,b:{t:2,i:[{t:3}],s:""}},image_url_hint:{t:0,b:{t:2,i:[{t:3}],s:`: https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/rocky-mountain-cloudscape.jpg
https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/green-white-mountains.jpg
`}},enable_wallpaper_masking:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_cache_time:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_cache_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"URL()0,"}},no_cache:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mask_opacity:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:""}},customize_css:{t:0,b:{t:2,i:[{t:3}],s:" CSS"}},customize_css_desc:{t:0,b:{t:2,i:[{t:3}],s:` CSS CSS
 CSS  BewlyCat`}},logo_color:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},logo_color_opt:{white:{t:0,b:{t:2,i:[{t:3}],s:""}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_results_pagination_mode_opt:{scroll:{t:0,b:{t:2,i:[{t:3}],s:""}},pagination:{t:0,b:{t:2,i:[{t:3}],s:""}}},logo_visibility:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},enable_logo_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},bg_darkens_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:""}},bg_blurs_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:""}},choose_search_bar_focused_character:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_top_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_top_bar_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_search_page:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},show_search_recommendation:{t:0,b:{t:2,i:[{t:3}],s:""}},show_search_recommendation_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_plugin_search_results_page:{t:0,b:{t:2,i:[{t:3}],s:""}},use_plugin_search_results_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},search_results_pagination_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},search_results_pagination_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},individually_set_search_page_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:` app  BewlyCat  access key
`}},auto_switch_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_switch_recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:` App  Web 
`}},authorize_app:{t:0,b:{t:2,i:[{t:3}],s:" BewlyCat  access key"}},authorize_app_desc:{t:0,b:{t:2,i:[{t:3}],s:` bilibili App  key  access key
`}},authorize_app_more_info_access_key:{t:0,b:{t:2,i:[{t:3}],s:" access key"}},scan_qrcode_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili  access key"}},disable_filters_for_followed_users:{t:0,b:{t:2,i:[{t:3}],s:""}},disable_filters_for_followed_users_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},filter_out_vertical_videos:{t:0,b:{t:2,i:[{t:3}],s:" app "}},filter_by_view_count:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_view_count_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_view_count_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_publish_time:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_publish_time_desc:{t:0,b:{t:2,i:[{t:3}],s:" Web  7 "}},filter_by_publish_time_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_item_already_exist:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_title:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_title_desc:{t:0,b:{t:2,i:[{t:3}],s:` <code>/abc&#124;\\d+/</code> <code>/</code>  <br/>  <kbd>Enter</kbd>   <kbd>Esc</kbd>  
`}},filter_by_user:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_user_desc:{t:0,b:{t:2,i:[{t:3}],s:` MID  <code>/abc&#124;\\d+/</code> <code>/</code>  <br/>  <kbd>Enter</kbd>   <kbd>Esc</kbd>  
`}},filter_by_user_table:{username_or_mid:{t:0,b:{t:2,i:[{t:3}],s:" / MID"}}},following_tab_show_livestreaming_videos:{t:0,b:{t:2,i:[{t:3}],s:' "" '}},following_filter_charging_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_charging_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:' "" '}},following_filter_dynamic_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_dynamic_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:' "" '}},use_following_new_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},use_following_new_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},following_inactive_days:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},following_inactive_days_desc:{t:0,b:{t:2,i:[{t:3}],s:"UPALLUP"}},preserve_for_you_state:{t:0,b:{t:2,i:[{t:3}],s:""}},preserve_for_you_state_desc:{t:0,b:{t:2,i:[{t:3}],s:"dock"}},use_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},settings_shared_with_the_search_page:{t:0,b:{t:2,i:[{t:3}],s:""}},settings_shared_with_the_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},search_page_mode_wallpaper_fixed:{t:0,b:{t:2,i:[{t:3}],s:""}},home_tabs_adjustment:{t:0,b:{t:2,i:[{t:3}],s:""}},home_tabs_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},always_show_tabs_on_home_page:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_visibility:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_visibility_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved  BewlyCat "}},use_original_bilibili_homepage:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},use_original_bilibili_homepage_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_original_bilibili_topbar:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},adapt_to_other_page_styles:{t:0,b:{t:2,i:[{t:3}],s:""}},adapt_to_other_page_styles_desc:{t:0,b:{t:2,i:[{t:3}],s:" BewlyCat "}},follow_bilibili_evolved_color:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved "}},follow_bilibili_evolved_color_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved "}},links:{t:0,b:{t:2,i:[{t:3}],s:""}},import_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},export_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},export_settings_desc:{t:0,b:{t:2,i:[{t:3}],s:" access key"}},reset_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_settings_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},contributors:{t:0,b:{t:2,i:[{t:3}],s:"BewlyBewly"}},enable_undo_refresh_button:{t:0,b:{t:2,i:[{t:3}],s:"Web"}},enable_undo_refresh_button_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},shortcuts:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_all_shortcuts_toggle:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_all_shortcuts_toggle_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},group:{official_bilibili:{t:0,b:{t:2,i:[{t:3}],s:"bilibili "}},homepage:{t:0,b:{t:2,i:[{t:3}],s:""}},general:{t:0,b:{t:2,i:[{t:3}],s:""}},fullscreen_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},global_actions:{t:0,b:{t:2,i:[{t:3}],s:""}}},official:{play_pause:{t:0,b:{t:2,i:[{t:3}],s:"/"}},forward:{t:0,b:{t:2,i:[{t:3}],s:"5"}},backward:{t:0,b:{t:2,i:[{t:3}],s:"5"}},volume_up:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_down:{t:0,b:{t:2,i:[{t:3}],s:""}},exit_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_toggle:{t:0,b:{t:2,i:[{t:3}],s:""}},mute:{t:0,b:{t:2,i:[{t:3}],s:""}},prev_video:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video:{t:0,b:{t:2,i:[{t:3}],s:""}},speed_1:{t:0,b:{t:2,i:[{t:3}],s:"1"}},speed_2:{t:0,b:{t:2,i:[{t:3}],s:"2"}},input_danmu:{t:0,b:{t:2,i:[{t:3}],s:""}}},item:{edit_key:{t:0,b:{t:2,i:[{t:3}],s:""}},cancel_edit:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_default:{t:0,b:{t:2,i:[{t:3}],s:""}}},reset_all_button:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_all_ext_shortcuts:{t:0,b:{t:2,i:[{t:3}],s:""}},press_keys:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_status:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_status_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_backward:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:"5"}},long_step_backward:{t:0,b:{t:2,i:[{t:3}],s:""}},long_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:"30"}},play_pause_ext:{t:0,b:{t:2,i:[{t:3}],s:"/"}},play_pause_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},short_step_forward:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:"5"}},long_step_forward:{t:0,b:{t:2,i:[{t:3}],s:""}},long_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:"30"}},next_video_ext:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},pip:{t:0,b:{t:2,i:[{t:3}],s:""}},pip_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_off_light:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_off_light_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},caption:{t:0,b:{t:2,i:[{t:3}],s:""}},caption_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},increase_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},previous_frame:{t:0,b:{t:2,i:[{t:3}],s:""}},previous_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},next_frame:{t:0,b:{t:2,i:[{t:3}],s:""}},next_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},replay:{t:0,b:{t:2,i:[{t:3}],s:""}},replay_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_title:{t:0,b:{t:2,i:[{t:3}],s:""}},video_title_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},video_time:{t:0,b:{t:2,i:[{t:3}],s:""}},video_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},clock_time:{t:0,b:{t:2,i:[{t:3}],s:""}},clock_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},home_refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},home_refresh_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},toggle_follow:{t:0,b:{t:2,i:[{t:3}],s:"/"}},toggle_follow_desc:{t:0,b:{t:2,i:[{t:3}],s:"UP"}}},clean_url_argument:{t:0,b:{t:2,i:[{t:3}],s:"URL"}},clean_url_argument_desc:{t:0,b:{t:2,i:[{t:3}],s:"URL"}},show_ip_location:{t:0,b:{t:2,i:[{t:3}],s:"IP"}},show_ip_location_desc:{t:0,b:{t:2,i:[{t:3}],s:"/IP"}},show_sex:{t:0,b:{t:2,i:[{t:3}],s:""}},show_sex_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},show_comment_host_tag:{t:0,b:{t:2,i:[{t:3}],s:""}},show_comment_host_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},adjust_comment_image_height:{t:0,b:{t:2,i:[{t:3}],s:""}},adjust_comment_image_height_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_normalization:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},enable:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},target_volume:{t:0,b:{t:2,i:[{t:3}],s:""}},target_volume_desc:{t:0,b:{t:2,i:[{t:3}],s:"0-10050  -20dBFS"}},strength:{t:0,b:{t:2,i:[{t:3}],s:""}},strength_desc:{t:0,b:{t:2,i:[{t:3}],s:"1-20 8-15"}},adaptive_speed:{t:0,b:{t:2,i:[{t:3}],s:""}},adaptive_speed_desc:{t:0,b:{t:2,i:[{t:3}],s:"1-10 3-7"}},voice_gate:{t:0,b:{t:2,i:[{t:3}],s:""}},voice_gate_desc:{t:0,b:{t:2,i:[{t:3}],s:"-60  -10 dB -40  -30"}},debug:{t:0,b:{t:2,i:[{t:3}],s:""}},debug_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},usage_guide:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},desc:{t:0,b:{t:2,i:[{t:3}],s:`
 
 


 0-1000  -30dBFS50  -20dBFS100  -10dBFS
 1-10


 
 
 `}}}},menu_volume_normalization:{t:0,b:{t:2,i:[{t:3}],s:""}},group_fonts:{t:0,b:{t:2,i:[{t:3}],s:""}},group_visual_effects:{t:0,b:{t:2,i:[{t:3}],s:""}}},auth:{auth_access_key_first:{t:0,b:{t:2,i:[{t:3}],s:" BewlyCat  access key"}}},topbar:{switch_to_bewly_top_bar:{t:0,b:{t:2,i:[{t:3}],s:" BewlyCat "}},switch_to_bili_top_bar:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili/Bilibili-Evolved "}},sign_in:{t:0,b:{t:2,i:[{t:3}],s:""}},notifications:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},favorites:{t:0,b:{t:2,i:[{t:3}],s:""}},history:{t:0,b:{t:2,i:[{t:3}],s:""}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},creative_center:{t:0,b:{t:2,i:[{t:3}],s:""}},upload:{t:0,b:{t:2,i:[{t:3}],s:""}},logo_dropdown:{anime:{t:0,b:{t:2,i:[{t:3}],s:""}},movies:{t:0,b:{t:2,i:[{t:3}],s:""}},chinese_anime:{t:0,b:{t:2,i:[{t:3}],s:""}},tv_shows:{t:0,b:{t:2,i:[{t:3}],s:""}},variety_shows:{t:0,b:{t:2,i:[{t:3}],s:""}},documentary_films:{t:0,b:{t:2,i:[{t:3}],s:""}},animations:{t:0,b:{t:2,i:[{t:3}],s:""}},gaming:{t:0,b:{t:2,i:[{t:3}],s:""}},kichiku:{t:0,b:{t:2,i:[{t:3}],s:""}},music:{t:0,b:{t:2,i:[{t:3}],s:""}},dance:{t:0,b:{t:2,i:[{t:3}],s:""}},cinephile:{t:0,b:{t:2,i:[{t:3}],s:""}},showbiz:{t:0,b:{t:2,i:[{t:3}],s:""}},painting:{t:0,b:{t:2,i:[{t:3}],s:""}},ai:{t:0,b:{t:2,i:[{t:3}],s:"AI"}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},outdoors:{t:0,b:{t:2,i:[{t:3}],s:""}},gym:{t:0,b:{t:2,i:[{t:3}],s:""}},handmake:{t:0,b:{t:2,i:[{t:3}],s:""}},travel:{t:0,b:{t:2,i:[{t:3}],s:""}},rural:{t:0,b:{t:2,i:[{t:3}],s:""}},parenting:{t:0,b:{t:2,i:[{t:3}],s:""}},health:{t:0,b:{t:2,i:[{t:3}],s:""}},emotion:{t:0,b:{t:2,i:[{t:3}],s:""}},life_joy:{t:0,b:{t:2,i:[{t:3}],s:""}},life_experience:{t:0,b:{t:2,i:[{t:3}],s:""}},knowledge:{t:0,b:{t:2,i:[{t:3}],s:""}},technology:{t:0,b:{t:2,i:[{t:3}],s:""}},news:{t:0,b:{t:2,i:[{t:3}],s:""}},foods:{t:0,b:{t:2,i:[{t:3}],s:""}},shortplay:{t:0,b:{t:2,i:[{t:3}],s:""}},cars:{t:0,b:{t:2,i:[{t:3}],s:""}},fashion:{t:0,b:{t:2,i:[{t:3}],s:""}},sports:{t:0,b:{t:2,i:[{t:3}],s:""}},animals:{t:0,b:{t:2,i:[{t:3}],s:""}},vlog:{t:0,b:{t:2,i:[{t:3}],s:"VLOG"}},community:{t:0,b:{t:2,i:[{t:3}],s:""}},music_plus:{t:0,b:{t:2,i:[{t:3}],s:""}},game_center:{t:0,b:{t:2,i:[{t:3}],s:""}},comic_con_and_goods:{t:0,b:{t:2,i:[{t:3}],s:""}},manga:{t:0,b:{t:2,i:[{t:3}],s:""}},game_competitions:{t:0,b:{t:2,i:[{t:3}],s:""}},articles:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},activities:{t:0,b:{t:2,i:[{t:3}],s:""}},paid_courses:{t:0,b:{t:2,i:[{t:3}],s:""}},charitable_events:{t:0,b:{t:2,i:[{t:3}],s:""}}},user_dropdown:{money:{t:0,b:{t:2,i:[{t:3}],s:""}},b_coins:{t:0,b:{t:2,i:[{t:3}],s:"B"}},exp_desc:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"current_exp"},{t:3,v:" LV "},{t:4,k:"level"},{t:3,v:"  "},{t:4,k:"need_exp"}]}},following:{t:0,b:{t:2,i:[{t:3}],s:""}},followers:{t:0,b:{t:2,i:[{t:3}],s:""}},posts:{t:0,b:{t:2,i:[{t:3}],s:""}},bilibili_premium:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili "}},account_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},uploads_manager:{t:0,b:{t:2,i:[{t:3}],s:""}},b_coins_wallet:{t:0,b:{t:2,i:[{t:3}],s:"B"}},orders:{t:0,b:{t:2,i:[{t:3}],s:""}},workshop:{t:0,b:{t:2,i:[{t:3}],s:""}},my_stream_info:{t:0,b:{t:2,i:[{t:3}],s:""}},my_courses:{t:0,b:{t:2,i:[{t:3}],s:""}},bilibili_premium_rewards:{t:0,b:{t:2,i:[{t:3}],s:""}},log_out:{t:0,b:{t:2,i:[{t:3}],s:""}},last_login_time:{t:0,b:{t:2,i:[{t:3}],s:""}},last_login_location:{t:0,b:{t:2,i:[{t:3}],s:""}}},noti_dropdown:{replys:{t:0,b:{t:2,i:[{t:3}],s:""}},mentions:{t:0,b:{t:2,i:[{t:3}],s:""}},likes:{t:0,b:{t:2,i:[{t:3}],s:""}},messages:{t:0,b:{t:2,i:[{t:3}],s:""}},chats:{t:0,b:{t:2,i:[{t:3}],s:""}}},moments_dropdown:{tabs:{videos:{t:0,b:{t:2,i:[{t:3}],s:""}},all:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},articles:{t:0,b:{t:2,i:[{t:3}],s:""}}},uploaded:{t:0,b:{t:2,i:[{t:3}],s:""}},now_streaming:{t:0,b:{t:2,i:[{t:3}],s:""}},live_status:{t:0,b:{t:2,i:[{t:3}],s:""}}},upload_dropdown:{article:{t:0,b:{t:2,i:[{t:3}],s:""}},music:{t:0,b:{t:2,i:[{t:3}],s:""}},sticker:{t:0,b:{t:2,i:[{t:3}],s:""}},video:{t:0,b:{t:2,i:[{t:3}],s:""}},manager:{t:0,b:{t:2,i:[{t:3}],s:""}}}},dock:{search:{t:0,b:{t:2,i:[{t:3}],s:""}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},anime:{t:0,b:{t:2,i:[{t:3}],s:""}},history:{t:0,b:{t:2,i:[{t:3}],s:""}},favorites:{t:0,b:{t:2,i:[{t:3}],s:""}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},dark_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},light_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},settings:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_card:{operation:{not_interested:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_background:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_new_window:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_current_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},copy_video_link:{t:0,b:{t:2,i:[{t:3}],s:""}},copy_bv_number:{t:0,b:{t:2,i:[{t:3}],s:" BV "}},copy_av_number:{t:0,b:{t:2,i:[{t:3}],s:" AV "}},view_the_original_cover:{t:0,b:{t:2,i:[{t:3}],s:""}},follow_user:{t:0,b:{t:2,i:[{t:3}],s:""}},unfollow_user:{t:0,b:{t:2,i:[{t:3}],s:""}},block_user:{t:0,b:{t:2,i:[{t:3}],s:""}}},follow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},unfollow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},block_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},group_contribution:{t:0,b:{t:2,i:[{t:4,k:"firstAuthor"},{t:3,v:"  "},{t:4,k:"num"},{t:3,v:" "}]}},video_removed:{t:0,b:{t:2,i:[{t:3}],s:""}}},home:{tell_us_why:{t:0,b:{t:2,i:[{t:3}],s:"..."}},not_interested_desc:{t:0,b:{t:2,i:[{t:3}],s:` <kbd></kbd>  <kbd></kbd>  <kbd>Enter</kbd> 
`}},for_you:{t:0,b:{t:2,i:[{t:3}],s:""}},following:{t:0,b:{t:2,i:[{t:3}],s:""}},trending:{t:0,b:{t:2,i:[{t:3}],s:""}},ranking:{t:0,b:{t:2,i:[{t:3}],s:""}},subscribed_series:{t:0,b:{t:2,i:[{t:3}],s:""}},weekly:{t:0,b:{t:2,i:[{t:3}],s:""}},precious:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},uploaders_with_updates:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:"UP"}]}}},ranking:{all:{t:0,b:{t:2,i:[{t:3}],s:""}},original_content:{t:0,b:{t:2,i:[{t:3}],s:""}},debut_work:{t:0,b:{t:2,i:[{t:3}],s:""}}},anime:{total_episodes:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"ep"},{t:3,v:" "}]}},update_to_n_episodes:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"ep"},{t:3,v:" "}]}},your_watch_list:{t:0,b:{t:2,i:[{t:3}],s:""}},recommended_for_you:{t:0,b:{t:2,i:[{t:3}],s:""}},havent_seen:{t:0,b:{t:2,i:[{t:3}],s:""}},popular_anime:{t:0,b:{t:2,i:[{t:3}],s:""}},follow:{t:0,b:{t:2,i:[{t:4,k:"num"},{t:3,v:""}]}},anime_timetable:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},days_of_week:{mon:{t:0,b:{t:2,i:[{t:3}],s:""}},tue:{t:0,b:{t:2,i:[{t:3}],s:""}},wed:{t:0,b:{t:2,i:[{t:3}],s:""}},thu:{t:0,b:{t:2,i:[{t:3}],s:""}},fri:{t:0,b:{t:2,i:[{t:3}],s:""}},sat:{t:0,b:{t:2,i:[{t:3}],s:""}},sun:{t:0,b:{t:2,i:[{t:3}],s:""}}}}},history:{clear_all_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},pause_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},pause_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},search_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},title:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_on_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_on_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}}},favorites:{unfavorite:{t:0,b:{t:2,i:[{t:3}],s:""}},unfavorite_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},search_current_folder:{t:0,b:{t:2,i:[{t:3}],s:""}},search_all_folders:{t:0,b:{t:2,i:[{t:3}],s:""}},search_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}},global_search_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}},global_search_hint:{t:0,b:{t:2,i:[{t:3}],s:""}}},watch_later:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},remove_watched_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_watched_videos_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},play_video:{t:0,b:{t:2,i:[{t:3}],s:""}},play_in_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_from_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_bar:{history_title:{t:0,b:{t:2,i:[{t:3}],s:""}},hot_search_title:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_history:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_page:{hot_search_ranking:{t:0,b:{t:2,i:[{t:3}],s:""}},loading:{t:0,b:{t:2,i:[{t:3}],s:"..."}},no_hot_search_data:{t:0,b:{t:2,i:[{t:3}],s:""}},view_all_esports:{t:0,b:{t:2,i:[{t:3}],s:""}}}}},{"cmn-TW":{common:{view_all:{t:0,b:{t:2,i:[{t:3}],s:""}},play_all:{t:0,b:{t:2,i:[{t:3}],s:""}},loading:{t:0,b:{t:2,i:[{t:3}],s:"..."}},search:{t:0,b:{t:2,i:[{t:3}],s:""}},undo:{t:0,b:{t:2,i:[{t:3}],s:""}},days:{t:0,b:{t:2,i:[{t:3}],s:""}},view:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:""}]}},viewWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},danmaku:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" "}]}},danmakuWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},like:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" "}]}},likeWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},anime_follow_count:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:""}]}},year:{t:0,b:{t:2,i:[{t:3}],s:""}},month:{t:0,b:{t:2,i:[{t:3}],s:""}},week:{t:0,b:{t:2,i:[{t:3}],s:""}},day:{t:0,b:{t:2,i:[{t:3}],s:""}},hour:{t:0,b:{t:2,i:[{t:3}],s:""}},minute:{t:0,b:{t:2,i:[{t:3}],s:""}},second:{t:0,b:{t:2,i:[{t:3}],s:""}},yesterday:{t:0,b:{t:2,i:[{t:3}],s:""}},just_now:{t:0,b:{t:2,i:[{t:3}],s:""}},please_log_in_first:{t:0,b:{t:2,i:[{t:3}],s:""}},login:{t:0,b:{t:2,i:[{t:3}],s:""}},save_to_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},added:{t:0,b:{t:2,i:[{t:3}],s:""}},performance_impact_warn:{t:0,b:{t:2,i:[{t:3}],s:""}},no_data:{t:0,b:{t:2,i:[{t:3}],s:""}},no_more_content:{t:0,b:{t:2,i:[{t:3}],s:""}},operation:{add:{t:0,b:{t:2,i:[{t:3}],s:""}},edit:{t:0,b:{t:2,i:[{t:3}],s:""}},delete:{t:0,b:{t:2,i:[{t:3}],s:""}},confirm:{t:0,b:{t:2,i:[{t:3}],s:""}},cancel:{t:0,b:{t:2,i:[{t:3}],s:""}},enable:{t:0,b:{t:2,i:[{t:3}],s:""}},disable:{t:0,b:{t:2,i:[{t:3}],s:""}},refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},reset:{t:0,b:{t:2,i:[{t:3}],s:""}},import:{t:0,b:{t:2,i:[{t:3}],s:""}},export:{t:0,b:{t:2,i:[{t:3}],s:""}},undo_refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},remove:{t:0,b:{t:2,i:[{t:3}],s:""}}},table:{index:{t:0,b:{t:2,i:[{t:3}],s:""}},title:{t:0,b:{t:2,i:[{t:3}],s:""}},name:{t:0,b:{t:2,i:[{t:3}],s:""}},remark:{t:0,b:{t:2,i:[{t:3}],s:""}},operations:{t:0,b:{t:2,i:[{t:3}],s:""}}},position:{left:{t:0,b:{t:2,i:[{t:3}],s:""}},right:{t:0,b:{t:2,i:[{t:3}],s:""}},top:{t:0,b:{t:2,i:[{t:3}],s:""}},bottom:{t:0,b:{t:2,i:[{t:3}],s:""}}}},iframe_drawer:{open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},close:{t:0,b:{t:2,i:[{t:3}],s:""}},press_esc_again_to_close:{t:0,b:{t:2,i:[{t:3}],s:" Esc "}}},settings:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_plugin_components_and_pages:{t:0,b:{t:2,i:[{t:3}],s:"BewlyCat"}},menu_bilibili_features_enhancement:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili"}},menu_appearance:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_compatibility:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_about:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_changelog:{t:0,b:{t:2,i:[{t:3}],s:""}},experimental:{t:0,b:{t:2,i:[{t:3}],s:""}},plugin:{general:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_and_sidebar:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},search:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_balance:{t:0,b:{t:2,i:[{t:3}],s:""}}},bilibili_features:{comments:{t:0,b:{t:2,i:[{t:3}],s:""}},video_playback:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},vip_features:{t:0,b:{t:2,i:[{t:3}],s:""}},vip_features_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}}},changelog_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}},group_common:{t:0,b:{t:2,i:[{t:3}],s:""}},group_language:{t:0,b:{t:2,i:[{t:3}],s:""}},group_ad_blocking:{t:0,b:{t:2,i:[{t:3}],s:""}},group_comments:{t:0,b:{t:2,i:[{t:3}],s:""}},group_languages_and_fonts:{t:0,b:{t:2,i:[{t:3}],s:""}},group_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},group_video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},group_performance:{t:0,b:{t:2,i:[{t:3}],s:""}},group_player_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},group_player_components:{t:0,b:{t:2,i:[{t:3}],s:""}},group_playback_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},group_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},group_random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},group_topbar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_navigation:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},group_dock:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},group_sidebar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_sidebar_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},group_color:{t:0,b:{t:2,i:[{t:3}],s:""}},group_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},group_logo:{t:0,b:{t:2,i:[{t:3}],s:"LOGO"}},group_search_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_hot_search:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_filters:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_filters_desc:{t:0,b:{t:2,i:[{t:3}],s:`BIP!
`}},group_following:{t:0,b:{t:2,i:[{t:3}],s:""}},group_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},group_home_tabs:{t:0,b:{t:2,i:[{t:3}],s:""}},group_home_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},btn:{authorize:{t:0,b:{t:2,i:[{t:3}],s:""}},revoke:{t:0,b:{t:2,i:[{t:3}],s:""}},open_settings:{t:0,b:{t:2,i:[{t:3}],s:"..."}}},touch_screen_optimization:{t:0,b:{t:2,i:[{t:3}],s:""}},touch_screen_optimization_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},show_home_button_in_touch_mode:{t:0,b:{t:2,i:[{t:3}],s:" Home "}},show_home_button_in_touch_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},chk_box:{show:{t:0,b:{t:2,i:[{t:3}],s:""}},hidden:{t:0,b:{t:2,i:[{t:3}],s:""}}},enable_grid_layout_switcher:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_horizontal_scrolling:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_horizontal_scrolling_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},select_language:{t:0,b:{t:2,i:[{t:3}],s:""}},select_language_opt:{english:{t:0,b:{t:2,i:[{t:3}],s:""}},mandarin_cn:{t:0,b:{t:2,i:[{t:3}],s:" - "}},mandarin_tw:{t:0,b:{t:2,i:[{t:3}],s:" - "}},jyut:{t:0,b:{t:2,i:[{t:3}],s:""}}},customize_font:{t:0,b:{t:2,i:[{t:3}],s:""}},customize_font_opt:{default:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili "}},recommend:{t:0,b:{t:2,i:[{t:3}],s:""}},custom:{t:0,b:{t:2,i:[{t:3}],s:""}}},customize_font_desc:{t:0,b:{t:2,i:[{t:3}],s:` <a class="link" href="https://github.com/GuiWonder/Shanggu" target="_blank">Shanggu Fonts ()</a>  <a class="link" href="https://github.com/ayaka14732/FanWunHak" target="_blank">Fan Wun Hak ()</a>
/
`}},override_danmaku_font:{t:0,b:{t:2,i:[{t:3}],s:""}},override_danmaku_font_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},remove_the_indent_from_chinese_punctuation:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_the_indent_from_chinese_punctuation_desc:{t:0,b:{t:2,i:[{t:3}],s:`Bilibili  
`}},enable_frosted_glass:{t:0,b:{t:2,i:[{t:3}],s:""}},frosted_glass_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:""}},disable_shadow:{t:0,b:{t:2,i:[{t:3}],s:""}},link_opening_behavior_opt:{current_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},current_tab_if_not_homepage:{t:0,b:{t:2,i:[{t:3}],s:""}},background:{t:0,b:{t:2,i:[{t:3}],s:""}},new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},drawer:{t:0,b:{t:2,i:[{t:3}],s:""}}},top_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},search_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},close_drawer_without_pressing_esc_again:{t:0,b:{t:2,i:[{t:3}],s:" <kbd>Esc</kbd> "}},block_ads:{t:0,b:{t:2,i:[{t:3}],s:""}},block_top_search_page_ads:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},group_video_card_grid:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_breakpoints:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_breakpoints_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_min_width:{t:0,b:{t:2,i:[{t:3}],s:" "}},grid_columns:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_columns_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_add_breakpoint:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_auto_size:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_auto_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_author_font_size:{t:0,b:{t:2,i:[{t:3}],s:"UP "}},video_card_author_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:" UP "}},video_card_meta_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_meta_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_height:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_height_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_reset:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout_option:{modern:{t:0,b:{t:2,i:[{t:3}],s:""}},old:{t:0,b:{t:2,i:[{t:3}],s:""}}},font_size_option:{xs:{t:0,b:{t:2,i:[{t:3}],s:""}},sm:{t:0,b:{t:2,i:[{t:3}],s:""}},base:{t:0,b:{t:2,i:[{t:3}],s:""}},lg:{t:0,b:{t:2,i:[{t:3}],s:""}}},block_top_search_page_ads_desc:{t:0,b:{t:2,i:[{t:3}],s:` 
`}},video_default_player_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state_opt:{system:{t:0,b:{t:2,i:[{t:3}],s:""}},on:{t:0,b:{t:2,i:[{t:3}],s:""}},off:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_player_mode:{default:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:""}}},enable_video_preview:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_video_ctrl_bar_on_video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},hover_video_card_delayed:{t:0,b:{t:2,i:[{t:3}],s:""}},show_video_card_recommend_tag:{t:0,b:{t:2,i:[{t:3}],s:""}},show_video_card_recommend_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_hide_top_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config_opt:{alwaysShow:{t:0,b:{t:2,i:[{t:3}],s:""}},alwaysHide:{t:0,b:{t:2,i:[{t:3}],s:""}},showOnMouse:{t:0,b:{t:2,i:[{t:3}],s:""}},showOnScroll:{t:0,b:{t:2,i:[{t:3}],s:""}}},always_use_transparent_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"()"}},show_top_bar_theme_color_gradient:{t:0,b:{t:2,i:[{t:3}],s:""}},show_bewly_or_bili_top_bar_switcher:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly/Bilibili "}},show_bewly_or_bili_page_switcher:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly/Bilibili "}},top_bar_icon_badges:{t:0,b:{t:2,i:[{t:3}],s:""}},top_bar_icon_badges_opt:{number:{t:0,b:{t:2,i:[{t:3}],s:""}},dot:{t:0,b:{t:2,i:[{t:3}],s:""}},none:{t:0,b:{t:2,i:[{t:3}],s:""}}},show_watch_later_badge:{t:0,b:{t:2,i:[{t:3}],s:""}},show_bcoin_receive_reminder:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_receive_bcoin_coupon:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_receive_bcoin_coupon_desc:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_receive_vip_exp:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_receive_vip_exp_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},open_notifications_page_as_drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},always_use_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock"}},always_use_dock_desc:{t:0,b:{t:2,i:[{t:3}],s:"Dock  Dock"}},auto_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock"}},half_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock"}},dock_position:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},dock_position_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_content_adjustment:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},dock_content_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},dock_item_open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_item_use_original_bili_web_page:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},disable_dock_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},disable_light_dark_mode_switcher:{t:0,b:{t:2,i:[{t:3}],s:"/"}},back_to_top_and_refresh_buttons_are_separated:{t:0,b:{t:2,i:[{t:3}],s:""}},sidebar_position:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_hide_sidebar:{t:0,b:{t:2,i:[{t:3}],s:""}},theme:{t:0,b:{t:2,i:[{t:3}],s:""}},theme_opt:{light:{t:0,b:{t:2,i:[{t:3}],s:""}},dark:{t:0,b:{t:2,i:[{t:3}],s:""}},auto:{t:0,b:{t:2,i:[{t:3}],s:""}}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:""}},dark_mode_base_color:{t:0,b:{t:2,i:[{t:3}],s:""}},gradient_theme_color_background:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:": "}},wallpaper_mode_opt:{build_in:{t:0,b:{t:2,i:[{t:3}],s:""}},by_url:{t:0,b:{t:2,i:[{t:3}],s:""}}},choose_ur_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},image_url:{t:0,b:{t:2,i:[{t:3}],s:""}},image_url_hint:{t:0,b:{t:2,i:[{t:3}],s:`: https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/rocky-mountain-cloudscape.jpg
https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/green-white-mountains.jpg
`}},enable_wallpaper_masking:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_cache_time:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_cache_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"URL()0,"}},no_cache:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mask_opacity:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:""}},customize_css:{t:0,b:{t:2,i:[{t:3}],s:" CSS"}},customize_css_desc:{t:0,b:{t:2,i:[{t:3}],s:` CSS CSS
 CSS  BewlyBewly`}},logo_color:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},logo_color_opt:{white:{t:0,b:{t:2,i:[{t:3}],s:""}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_results_pagination_mode_opt:{scroll:{t:0,b:{t:2,i:[{t:3}],s:""}},pagination:{t:0,b:{t:2,i:[{t:3}],s:""}}},enable_logo_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},logo_visibility:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},bg_darkens_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:""}},bg_blurs_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:""}},choose_search_bar_focused_character:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_top_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_top_bar_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_search_page:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},show_search_recommendation:{t:0,b:{t:2,i:[{t:3}],s:""}},show_search_recommendation_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},individually_set_search_page_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:` BewlyBewly  access key
`}},auto_switch_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_switch_recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},authorize_app:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly  access key"}},authorize_app_desc:{t:0,b:{t:2,i:[{t:3}],s:` bilibili  key  access key
`}},authorize_app_more_info_access_key:{t:0,b:{t:2,i:[{t:3}],s:" access key"}},scan_qrcode_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili  QR Code access key"}},disable_filters_for_followed_users:{t:0,b:{t:2,i:[{t:3}],s:""}},disable_filters_for_followed_users_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},filter_out_vertical_videos:{t:0,b:{t:2,i:[{t:3}],s:" app "}},filter_by_view_count:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_view_count_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_view_count_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_publish_time:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_publish_time_desc:{t:0,b:{t:2,i:[{t:3}],s:" Web  7 "}},filter_by_publish_time_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_item_already_exist:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_title:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_title_desc:{t:0,b:{t:2,i:[{t:3}],s:` <code>/abc&#124;\\d+/</code> <code>/</code> 
<br/>
 <kbd>Enter</kbd> 
 <kbd>Esc</kbd> 

`}},filter_by_user:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_user_desc:{t:0,b:{t:2,i:[{t:3}],s:` MID  <code>/abc&#124;\\d+/</code> <code>/</code> 
<br/>
 <kbd>Enter</kbd> 
 <kbd>Esc</kbd> 

`}},filter_by_user_table:{username_or_mid:{t:0,b:{t:2,i:[{t:3}],s:" / MID"}}},following_tab_show_livestreaming_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_charging_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_charging_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_dynamic_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_dynamic_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_following_new_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},use_following_new_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},following_inactive_days:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},following_inactive_days_desc:{t:0,b:{t:2,i:[{t:3}],s:"UPALLUP"}},preserve_for_you_state:{t:0,b:{t:2,i:[{t:3}],s:""}},preserve_for_you_state_desc:{t:0,b:{t:2,i:[{t:3}],s:"dock"}},use_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},settings_shared_with_the_search_page:{t:0,b:{t:2,i:[{t:3}],s:""}},settings_shared_with_the_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},search_page_mode_wallpaper_fixed:{t:0,b:{t:2,i:[{t:3}],s:""}},home_tabs_adjustment:{t:0,b:{t:2,i:[{t:3}],s:""}},home_tabs_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},always_show_tabs_on_home_page:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_visibility:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_visibility_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved  BewlyBewly "}},use_original_bilibili_homepage:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},use_original_bilibili_homepage_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_original_bilibili_topbar:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},adapt_to_other_page_styles:{t:0,b:{t:2,i:[{t:3}],s:""}},adapt_to_other_page_styles_desc:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly "}},follow_bilibili_evolved_color:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved "}},follow_bilibili_evolved_color_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved "}},links:{t:0,b:{t:2,i:[{t:3}],s:""}},import_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},export_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},export_settings_desc:{t:0,b:{t:2,i:[{t:3}],s:" access key"}},reset_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_settings_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},contributors:{t:0,b:{t:2,i:[{t:3}],s:"BewlyBewly"}},enable_settings_sync:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_settings_sync_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},keep_collection_video_default_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},keep_collection_video_default_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},remember_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},remember_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_on_end:{t:0,b:{t:2,i:[{t:3}],s:"/"}},auto_exit_fullscreen_on_end_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_exclude_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_exclude_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_bilibili_default_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"B"}},use_bilibili_default_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_play_mode_default:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_play_mode_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_mode_auto_play_with_recommend:{t:0,b:{t:2,i:[{t:3}],s:"()"}},auto_play_mode_pause_at_end:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_mode_loop:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_multipart:{t:0,b:{t:2,i:[{t:3}],s:"P"}},auto_play_multipart_desc:{t:0,b:{t:2,i:[{t:3}],s:"P"}},auto_play_collection:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_collection_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_recommend:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_recommend_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_playlist:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_playlist_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_random_play_desc:{t:0,b:{t:2,i:[{t:3}],s:"P"}},random_play_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_mode_manual:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_mode_auto:{t:0,b:{t:2,i:[{t:3}],s:""}},min_videos_for_random:{t:0,b:{t:2,i:[{t:3}],s:""}},min_videos_for_random_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_enabled:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_disabled:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_not_enabled:{t:0,b:{t:2,i:[{t:3}],s:""}},random_play_min_videos_required:{t:0,b:{t:2,i:[{t:3,v:""},{t:4,k:"count"},{t:3,v:""}]}},enable_undo_refresh_button:{t:0,b:{t:2,i:[{t:3}],s:"Web"}},enable_undo_refresh_button_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},shortcuts:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_all_shortcuts_toggle:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_all_shortcuts_toggle_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},group:{official_bilibili:{t:0,b:{t:2,i:[{t:3}],s:"bilibili "}},general:{t:0,b:{t:2,i:[{t:3}],s:""}},fullscreen_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},global_actions:{t:0,b:{t:2,i:[{t:3}],s:""}},homepage:{t:0,b:{t:2,i:[{t:3}],s:""}}},official:{play_pause:{t:0,b:{t:2,i:[{t:3}],s:"/"}},forward:{t:0,b:{t:2,i:[{t:3}],s:"5"}},backward:{t:0,b:{t:2,i:[{t:3}],s:"5"}},volume_up:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_down:{t:0,b:{t:2,i:[{t:3}],s:""}},exit_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_toggle:{t:0,b:{t:2,i:[{t:3}],s:""}},mute:{t:0,b:{t:2,i:[{t:3}],s:""}},prev_video:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video:{t:0,b:{t:2,i:[{t:3}],s:""}},speed_1:{t:0,b:{t:2,i:[{t:3}],s:"1"}},speed_2:{t:0,b:{t:2,i:[{t:3}],s:"2"}},input_danmu:{t:0,b:{t:2,i:[{t:3}],s:""}}},item:{edit_key:{t:0,b:{t:2,i:[{t:3}],s:""}},cancel_edit:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_default:{t:0,b:{t:2,i:[{t:3}],s:""}}},reset_all_button:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_all_ext_shortcuts:{t:0,b:{t:2,i:[{t:3}],s:""}},press_keys:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_status:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_status_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_backward:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:"5"}},long_step_backward:{t:0,b:{t:2,i:[{t:3}],s:""}},long_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:"30"}},play_pause_ext:{t:0,b:{t:2,i:[{t:3}],s:"/"}},play_pause_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},short_step_forward:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:"5"}},long_step_forward:{t:0,b:{t:2,i:[{t:3}],s:""}},long_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:"30"}},next_video_ext:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},pip:{t:0,b:{t:2,i:[{t:3}],s:""}},pip_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_off_light:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_off_light_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},caption:{t:0,b:{t:2,i:[{t:3}],s:""}},caption_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},increase_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},previous_frame:{t:0,b:{t:2,i:[{t:3}],s:""}},previous_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},next_frame:{t:0,b:{t:2,i:[{t:3}],s:""}},next_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:"()"}},replay:{t:0,b:{t:2,i:[{t:3}],s:""}},replay_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_title:{t:0,b:{t:2,i:[{t:3}],s:""}},video_title_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},video_time:{t:0,b:{t:2,i:[{t:3}],s:""}},video_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},clock_time:{t:0,b:{t:2,i:[{t:3}],s:""}},clock_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},home_refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},home_refresh_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},toggle_follow:{t:0,b:{t:2,i:[{t:3}],s:"/"}},toggle_follow_desc:{t:0,b:{t:2,i:[{t:3}],s:"UP"}}},clean_url_argument:{t:0,b:{t:2,i:[{t:3}],s:"URL"}},clean_url_argument_desc:{t:0,b:{t:2,i:[{t:3}],s:"URL"}},show_ip_location:{t:0,b:{t:2,i:[{t:3}],s:"IP"}},show_ip_location_desc:{t:0,b:{t:2,i:[{t:3}],s:"/IP"}},show_sex:{t:0,b:{t:2,i:[{t:3}],s:""}},show_sex_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},show_comment_host_tag:{t:0,b:{t:2,i:[{t:3}],s:""}},show_comment_host_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},adjust_comment_image_height:{t:0,b:{t:2,i:[{t:3}],s:""}},adjust_comment_image_height_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_player_scroll:{t:0,b:{t:2,i:[{t:3}],s:""}},video_player_scroll_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enlarge_favorite_dialog:{t:0,b:{t:2,i:[{t:3}],s:""}},enlarge_favorite_dialog_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},external_watch_later_button:{t:0,b:{t:2,i:[{t:3}],s:""}},external_watch_later_button_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_normalization:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},enable:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},target_volume:{t:0,b:{t:2,i:[{t:3}],s:""}},target_volume_desc:{t:0,b:{t:2,i:[{t:3}],s:"0-10050  -20dBFS"}},strength:{t:0,b:{t:2,i:[{t:3}],s:""}},strength_desc:{t:0,b:{t:2,i:[{t:3}],s:"1-20 8-15"}},adaptive_speed:{t:0,b:{t:2,i:[{t:3}],s:""}},adaptive_speed_desc:{t:0,b:{t:2,i:[{t:3}],s:"1-10 3-7"}},voice_gate:{t:0,b:{t:2,i:[{t:3}],s:""}},voice_gate_desc:{t:0,b:{t:2,i:[{t:3}],s:"-60  -10 dB -40  -30"}},debug:{t:0,b:{t:2,i:[{t:3}],s:""}},debug_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},usage_guide:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},desc:{t:0,b:{t:2,i:[{t:3}],s:`
 
 


 0-1000  -30dBFS50  -20dBFS100  -10dBFS
 1-10


 
 
 `}}}},menu_volume_normalization:{t:0,b:{t:2,i:[{t:3}],s:""}},group_fonts:{t:0,b:{t:2,i:[{t:3}],s:""}},group_visual_effects:{t:0,b:{t:2,i:[{t:3}],s:""}},badge_type:{t:0,b:{t:2,i:[{t:3}],s:""}},group_topbar_components:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_components_adjustment:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_components_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},group_topbar_pinned_channels:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_desc:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},topbar_pinned_channels_title:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_all_selected:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_empty:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_order_tip:{t:0,b:{t:2,i:[{t:3}],s:""}},visibility:{t:0,b:{t:2,i:[{t:3}],s:""}},group_search_results:{t:0,b:{t:2,i:[{t:3}],s:""}},use_plugin_search_results_page:{t:0,b:{t:2,i:[{t:3}],s:""}},use_plugin_search_results_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},search_results_pagination_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},search_results_pagination_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}}},auth:{auth_access_key_first:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly  access key"}}},topbar:{switch_to_bewly_top_bar:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly "}},switch_to_bili_top_bar:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili/Bilibili-Evolved "}},sign_in:{t:0,b:{t:2,i:[{t:3}],s:""}},notifications:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},favorites:{t:0,b:{t:2,i:[{t:3}],s:""}},history:{t:0,b:{t:2,i:[{t:3}],s:""}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},creative_center:{t:0,b:{t:2,i:[{t:3}],s:""}},upload:{t:0,b:{t:2,i:[{t:3}],s:""}},logo_dropdown:{anime:{t:0,b:{t:2,i:[{t:3}],s:""}},movies:{t:0,b:{t:2,i:[{t:3}],s:""}},chinese_anime:{t:0,b:{t:2,i:[{t:3}],s:""}},tv_shows:{t:0,b:{t:2,i:[{t:3}],s:""}},variety_shows:{t:0,b:{t:2,i:[{t:3}],s:""}},documentary_films:{t:0,b:{t:2,i:[{t:3}],s:""}},animations:{t:0,b:{t:2,i:[{t:3}],s:""}},gaming:{t:0,b:{t:2,i:[{t:3}],s:""}},kichiku:{t:0,b:{t:2,i:[{t:3}],s:""}},music:{t:0,b:{t:2,i:[{t:3}],s:""}},dance:{t:0,b:{t:2,i:[{t:3}],s:""}},cinephile:{t:0,b:{t:2,i:[{t:3}],s:""}},showbiz:{t:0,b:{t:2,i:[{t:3}],s:""}},knowledge:{t:0,b:{t:2,i:[{t:3}],s:""}},technology:{t:0,b:{t:2,i:[{t:3}],s:""}},news:{t:0,b:{t:2,i:[{t:3}],s:""}},foods:{t:0,b:{t:2,i:[{t:3}],s:""}},shortplay:{t:0,b:{t:2,i:[{t:3}],s:""}},cars:{t:0,b:{t:2,i:[{t:3}],s:""}},fashion:{t:0,b:{t:2,i:[{t:3}],s:""}},sports:{t:0,b:{t:2,i:[{t:3}],s:""}},animals:{t:0,b:{t:2,i:[{t:3}],s:""}},vlog:{t:0,b:{t:2,i:[{t:3}],s:"VLOG"}},painting:{t:0,b:{t:2,i:[{t:3}],s:""}},ai:{t:0,b:{t:2,i:[{t:3}],s:""}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},outdoors:{t:0,b:{t:2,i:[{t:3}],s:""}},gym:{t:0,b:{t:2,i:[{t:3}],s:""}},handmake:{t:0,b:{t:2,i:[{t:3}],s:""}},travel:{t:0,b:{t:2,i:[{t:3}],s:""}},rural:{t:0,b:{t:2,i:[{t:3}],s:""}},parenting:{t:0,b:{t:2,i:[{t:3}],s:""}},health:{t:0,b:{t:2,i:[{t:3}],s:""}},emotion:{t:0,b:{t:2,i:[{t:3}],s:""}},life_joy:{t:0,b:{t:2,i:[{t:3}],s:""}},life_experience:{t:0,b:{t:2,i:[{t:3}],s:""}},charitable_events:{t:0,b:{t:2,i:[{t:3}],s:""}},articles:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},activities:{t:0,b:{t:2,i:[{t:3}],s:""}},paid_courses:{t:0,b:{t:2,i:[{t:3}],s:""}},community:{t:0,b:{t:2,i:[{t:3}],s:""}},music_plus:{t:0,b:{t:2,i:[{t:3}],s:""}},game_center:{t:0,b:{t:2,i:[{t:3}],s:""}},comic_con_and_goods:{t:0,b:{t:2,i:[{t:3}],s:""}},manga:{t:0,b:{t:2,i:[{t:3}],s:""}},game_competitions:{t:0,b:{t:2,i:[{t:3}],s:""}}},user_dropdown:{money:{t:0,b:{t:2,i:[{t:3}],s:""}},b_coins:{t:0,b:{t:2,i:[{t:3}],s:"B"}},exp_desc:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"current_exp"},{t:3,v:" LV "},{t:4,k:"level"},{t:3,v:"  "},{t:4,k:"need_exp"}]}},following:{t:0,b:{t:2,i:[{t:3}],s:""}},followers:{t:0,b:{t:2,i:[{t:3}],s:""}},posts:{t:0,b:{t:2,i:[{t:3}],s:""}},bilibili_premium:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili "}},account_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},uploads_manager:{t:0,b:{t:2,i:[{t:3}],s:""}},b_coins_wallet:{t:0,b:{t:2,i:[{t:3}],s:"B"}},orders:{t:0,b:{t:2,i:[{t:3}],s:""}},workshop:{t:0,b:{t:2,i:[{t:3}],s:""}},my_stream_info:{t:0,b:{t:2,i:[{t:3}],s:""}},my_courses:{t:0,b:{t:2,i:[{t:3}],s:""}},bilibili_premium_rewards:{t:0,b:{t:2,i:[{t:3}],s:""}},log_out:{t:0,b:{t:2,i:[{t:3}],s:""}},last_login_time:{t:0,b:{t:2,i:[{t:3}],s:""}},last_login_location:{t:0,b:{t:2,i:[{t:3}],s:""}}},noti_dropdown:{replys:{t:0,b:{t:2,i:[{t:3}],s:""}},mentions:{t:0,b:{t:2,i:[{t:3}],s:""}},likes:{t:0,b:{t:2,i:[{t:3}],s:""}},messages:{t:0,b:{t:2,i:[{t:3}],s:""}},chats:{t:0,b:{t:2,i:[{t:3}],s:""}}},moments_dropdown:{tabs:{videos:{t:0,b:{t:2,i:[{t:3}],s:""}},all:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},articles:{t:0,b:{t:2,i:[{t:3}],s:""}}},uploaded:{t:0,b:{t:2,i:[{t:3}],s:""}},now_streaming:{t:0,b:{t:2,i:[{t:3}],s:""}},live_status:{t:0,b:{t:2,i:[{t:3}],s:""}}},upload_dropdown:{article:{t:0,b:{t:2,i:[{t:3}],s:""}},music:{t:0,b:{t:2,i:[{t:3}],s:""}},sticker:{t:0,b:{t:2,i:[{t:3}],s:""}},video:{t:0,b:{t:2,i:[{t:3}],s:""}},manager:{t:0,b:{t:2,i:[{t:3}],s:""}}}},dock:{search:{t:0,b:{t:2,i:[{t:3}],s:""}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},anime:{t:0,b:{t:2,i:[{t:3}],s:""}},history:{t:0,b:{t:2,i:[{t:3}],s:""}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},favorites:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},dark_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},light_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},settings:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_card:{operation:{not_interested:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_background:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_new_window:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_current_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},copy_video_link:{t:0,b:{t:2,i:[{t:3}],s:""}},copy_bv_number:{t:0,b:{t:2,i:[{t:3}],s:" BV "}},copy_av_number:{t:0,b:{t:2,i:[{t:3}],s:" AV "}},view_the_original_cover:{t:0,b:{t:2,i:[{t:3}],s:""}},follow_user:{t:0,b:{t:2,i:[{t:3}],s:""}},unfollow_user:{t:0,b:{t:2,i:[{t:3}],s:""}},block_user:{t:0,b:{t:2,i:[{t:3}],s:""}}},follow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},unfollow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},block_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},group_contribution:{t:0,b:{t:2,i:[{t:4,k:"firstAuthor"},{t:3,v:"  "},{t:4,k:"num"},{t:3,v:" "}]}},video_removed:{t:0,b:{t:2,i:[{t:3}],s:""}}},home:{tell_us_why:{t:0,b:{t:2,i:[{t:3}],s:"..."}},not_interested_desc:{t:0,b:{t:2,i:[{t:3}],s:` <kbd></kbd>  <kbd></kbd>  <kbd>Enter</kbd> 
`}},for_you:{t:0,b:{t:2,i:[{t:3}],s:""}},following:{t:0,b:{t:2,i:[{t:3}],s:""}},trending:{t:0,b:{t:2,i:[{t:3}],s:""}},ranking:{t:0,b:{t:2,i:[{t:3}],s:""}},subscribed_series:{t:0,b:{t:2,i:[{t:3}],s:""}},weekly:{t:0,b:{t:2,i:[{t:3}],s:""}},precious:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},uploaders_with_updates:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:"UP"}]}}},ranking:{all:{t:0,b:{t:2,i:[{t:3}],s:""}},original_content:{t:0,b:{t:2,i:[{t:3}],s:""}},debut_work:{t:0,b:{t:2,i:[{t:3}],s:""}}},anime:{total_episodes:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"ep"},{t:3,v:" "}]}},update_to_n_episodes:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"ep"},{t:3,v:" "}]}},your_watch_list:{t:0,b:{t:2,i:[{t:3}],s:""}},recommended_for_you:{t:0,b:{t:2,i:[{t:3}],s:""}},havent_seen:{t:0,b:{t:2,i:[{t:3}],s:""}},popular_anime:{t:0,b:{t:2,i:[{t:3}],s:""}},follow:{t:0,b:{t:2,i:[{t:4,k:"num"},{t:3,v:""}]}},anime_timetable:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},days_of_week:{mon:{t:0,b:{t:2,i:[{t:3}],s:""}},tue:{t:0,b:{t:2,i:[{t:3}],s:""}},wed:{t:0,b:{t:2,i:[{t:3}],s:""}},thu:{t:0,b:{t:2,i:[{t:3}],s:""}},fri:{t:0,b:{t:2,i:[{t:3}],s:""}},sat:{t:0,b:{t:2,i:[{t:3}],s:""}},sun:{t:0,b:{t:2,i:[{t:3}],s:""}}}}},history:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_on_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},pause_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},pause_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},search_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_on_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}}},favorites:{unfavorite:{t:0,b:{t:2,i:[{t:3}],s:""}},unfavorite_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},global_search_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},global_search_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}},search_all_folders:{t:0,b:{t:2,i:[{t:3}],s:""}},search_current_folder:{t:0,b:{t:2,i:[{t:3}],s:""}},search_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}}},watch_later:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},remove_watched_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_watched_videos_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},play_video:{t:0,b:{t:2,i:[{t:3}],s:""}},play_in_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_from_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_bar:{history_title:{t:0,b:{t:2,i:[{t:3}],s:""}},hot_search_title:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_history:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_page:{hot_search_ranking:{t:0,b:{t:2,i:[{t:3}],s:""}},loading:{t:0,b:{t:2,i:[{t:3}],s:"..."}},no_hot_search_data:{t:0,b:{t:2,i:[{t:3}],s:""}},view_all_esports:{t:0,b:{t:2,i:[{t:3}],s:""}}}}},{en:{common:{view_all:{t:0,b:{t:2,i:[{t:3}],s:"View ALL"}},play_all:{t:0,b:{t:2,i:[{t:3}],s:"Play ALL"}},loading:{t:0,b:{t:2,i:[{t:3}],s:"Loading..."}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}},undo:{t:0,b:{t:2,i:[{t:3}],s:"UNDO"}},days:{t:0,b:{t:2,i:[{t:3}],s:"days"}},view:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"no view"},{t:2,i:[{t:4,k:"count"},{t:3,v:" view"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" views"}]}]}},viewWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:" views"}},danmaku:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"no danmaku"},{t:2,i:[{t:4,k:"count"},{t:3,v:" danmaku"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" danmakus"}]}]}},danmakuWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:" danmakus"}},like:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"no like"},{t:2,i:[{t:4,k:"count"},{t:3,v:" like"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" likes"}]}]}},likeWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:" likes"}},anime_follow_count:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"no follow"},{t:2,i:[{t:4,k:"count"},{t:3,v:" follow"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" follows"}]}]}},year:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"year ago"},{t:2,i:[{t:3}],s:"years ago"}]}},month:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"month ago"},{t:2,i:[{t:3}],s:"months ago"}]}},week:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"week ago"},{t:2,i:[{t:3}],s:"weeks ago"}]}},day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"day ago"},{t:2,i:[{t:3}],s:"days ago"}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"hour ago"},{t:2,i:[{t:3}],s:"hours ago"}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"minute ago"},{t:2,i:[{t:3}],s:"minutes ago"}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"second ago"},{t:2,i:[{t:3}],s:"seconds ago"}]}},yesterday:{t:0,b:{t:2,i:[{t:3}],s:"yesterday"}},just_now:{t:0,b:{t:2,i:[{t:3}],s:"just now"}},please_log_in_first:{t:0,b:{t:2,i:[{t:3}],s:"Please log in first"}},login:{t:0,b:{t:2,i:[{t:3}],s:"Login"}},save_to_watch_later:{t:0,b:{t:2,i:[{t:3}],s:"Save to Watch later"}},added:{t:0,b:{t:2,i:[{t:3}],s:"Added"}},performance_impact_warn:{t:0,b:{t:2,i:[{t:3}],s:"This feature may cause performance *DECREASE*!"}},no_data:{t:0,b:{t:2,i:[{t:3}],s:"No data available"}},no_more_content:{t:0,b:{t:2,i:[{t:3}],s:"No more content now, owari da"}},operation:{add:{t:0,b:{t:2,i:[{t:3}],s:"Add"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Edit"}},delete:{t:0,b:{t:2,i:[{t:3}],s:"Delete"}},confirm:{t:0,b:{t:2,i:[{t:3}],s:"Confirm"}},cancel:{t:0,b:{t:2,i:[{t:3}],s:"Cancel"}},enable:{t:0,b:{t:2,i:[{t:3}],s:"Enable"}},disable:{t:0,b:{t:2,i:[{t:3}],s:"Disable"}},refresh:{t:0,b:{t:2,i:[{t:3}],s:"Refresh"}},reset:{t:0,b:{t:2,i:[{t:3}],s:"Reset"}},import:{t:0,b:{t:2,i:[{t:3}],s:"Import"}},export:{t:0,b:{t:2,i:[{t:3}],s:"Export"}},undo_refresh:{t:0,b:{t:2,i:[{t:3}],s:"Undo Refresh"}},remove:{t:0,b:{t:2,i:[{t:3}],s:"Remove"}}},table:{index:{t:0,b:{t:2,i:[{t:3}],s:"Index"}},title:{t:0,b:{t:2,i:[{t:3}],s:"Title"}},name:{t:0,b:{t:2,i:[{t:3}],s:"Name"}},remark:{t:0,b:{t:2,i:[{t:3}],s:"Remark"}},operations:{t:0,b:{t:2,i:[{t:3}],s:"Operations"}}},position:{left:{t:0,b:{t:2,i:[{t:3}],s:"Left"}},right:{t:0,b:{t:2,i:[{t:3}],s:"Right"}},top:{t:0,b:{t:2,i:[{t:3}],s:"Top"}},bottom:{t:0,b:{t:2,i:[{t:3}],s:"Bottom"}}}},iframe_drawer:{open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:"Open in new tab"}},close:{t:0,b:{t:2,i:[{t:3}],s:"Close"}},press_esc_again_to_close:{t:0,b:{t:2,i:[{t:3}],s:"Press Esc again to close"}}},settings:{title:{t:0,b:{t:2,i:[{t:3}],s:"Settings"}},menu_plugin_components_and_pages:{t:0,b:{t:2,i:[{t:3}],s:"BewlyCat Interface"}},menu_bilibili_features_enhancement:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili Features"}},menu_appearance:{t:0,b:{t:2,i:[{t:3}],s:"Appearance"}},menu_compatibility:{t:0,b:{t:2,i:[{t:3}],s:"Compatibility"}},menu_about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},menu_changelog:{t:0,b:{t:2,i:[{t:3}],s:"Changelog"}},experimental:{t:0,b:{t:2,i:[{t:3}],s:"Experimental"}},plugin:{general:{t:0,b:{t:2,i:[{t:3}],s:"General"}},video_card:{t:0,b:{t:2,i:[{t:3}],s:"Video Card"}},topbar:{t:0,b:{t:2,i:[{t:3}],s:"Top Bar"}},dock_and_sidebar:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}},volume_balance:{t:0,b:{t:2,i:[{t:3}],s:"Volume Normalization"}}},bilibili_features:{comments:{t:0,b:{t:2,i:[{t:3}],s:"Comments"}},video_playback:{t:0,b:{t:2,i:[{t:3}],s:"Player"}},auto_play:{t:0,b:{t:2,i:[{t:3}],s:"Auto Play"}},vip_features:{t:0,b:{t:2,i:[{t:3}],s:"VIP Features"}},vip_features_placeholder:{t:0,b:{t:2,i:[{t:3}],s:"VIP feature enhancements will be added here in future updates."}}},changelog_placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Changelog content will be displayed here."}},group_common:{t:0,b:{t:2,i:[{t:3}],s:"Common"}},group_language:{t:0,b:{t:2,i:[{t:3}],s:"Language"}},group_ad_blocking:{t:0,b:{t:2,i:[{t:3}],s:"Ad Blocking"}},group_comments:{t:0,b:{t:2,i:[{t:3}],s:"Comments"}},group_languages_and_fonts:{t:0,b:{t:2,i:[{t:3}],s:"Languages & Fonts"}},group_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:"Link Opening Behavior"}},group_video_card:{t:0,b:{t:2,i:[{t:3}],s:"Video Card"}},group_performance:{t:0,b:{t:2,i:[{t:3}],s:"Frosted Glass & Performance"}},group_player_settings:{t:0,b:{t:2,i:[{t:3}],s:"Player Settings"}},group_player_components:{t:0,b:{t:2,i:[{t:3}],s:"Player Components"}},group_playback_behavior:{t:0,b:{t:2,i:[{t:3}],s:"Playback Behavior"}},group_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"Auto Play"}},group_random_play:{t:0,b:{t:2,i:[{t:3}],s:"Random Play"}},group_topbar:{t:0,b:{t:2,i:[{t:3}],s:"Top Bar"}},group_navigation:{t:0,b:{t:2,i:[{t:3}],s:"Dock & Sidebar"}},group_dock:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},group_sidebar:{t:0,b:{t:2,i:[{t:3}],s:"Sidebar"}},group_sidebar_desc:{t:0,b:{t:2,i:[{t:3}],s:"Located on the right or left side of pages other than the homepage, typically includes a light/dark mode toggle button and settings button."}},group_color:{t:0,b:{t:2,i:[{t:3}],s:"Color"}},group_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:"Wallpaper"}},group_logo:{t:0,b:{t:2,i:[{t:3}],s:"LOGO"}},group_search_bar:{t:0,b:{t:2,i:[{t:3}],s:"Search Bar"}},group_hot_search:{t:0,b:{t:2,i:[{t:3}],s:"Hot Search"}},group_search_results:{t:0,b:{t:2,i:[{t:3}],s:"Search Results"}},group_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:'"For you" Recommendation Mode'}},group_recommendation_filters:{t:0,b:{t:2,i:[{t:3}],s:'"For you" Recommendation Filters'}},group_recommendation_filters_desc:{t:0,b:{t:2,i:[{t:3}],s:`Do not set the restricted value too large, as this may increase loading time! Frequent requests may result in IP blocking by Bilibili!
`}},group_following:{t:0,b:{t:2,i:[{t:3}],s:"Following"}},group_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:"Search Page Mode"}},group_home_tabs:{t:0,b:{t:2,i:[{t:3}],s:"Home Tabs"}},group_home_layout:{t:0,b:{t:2,i:[{t:3}],s:"Home Layout"}},btn:{authorize:{t:0,b:{t:2,i:[{t:3}],s:"Authorize"}},revoke:{t:0,b:{t:2,i:[{t:3}],s:"Revoke"}},open_settings:{t:0,b:{t:2,i:[{t:3}],s:"Open Settings..."}}},touch_screen_optimization:{t:0,b:{t:2,i:[{t:3}],s:"Touch screen optimization"}},touch_screen_optimization_desc:{t:0,b:{t:2,i:[{t:3}],s:`After this setting is turned on, like the top bar, you must click on items to view more information instead of hovering over them. (This feature is not supported by the old top bar.)
`}},show_home_button_in_touch_mode:{t:0,b:{t:2,i:[{t:3}],s:"Show Home button"}},show_home_button_in_touch_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:"When touch screen optimization is enabled, show a Home button next to the top bar Logo to navigate directly to the homepage."}},chk_box:{show:{t:0,b:{t:2,i:[{t:3}],s:"Show"}},hidden:{t:0,b:{t:2,i:[{t:3}],s:"Hidden"}}},enable_grid_layout_switcher:{t:0,b:{t:2,i:[{t:3}],s:"Enable grid layout switcher"}},enable_horizontal_scrolling:{t:0,b:{t:2,i:[{t:3}],s:"Enable horizontal scrolling"}},enable_horizontal_scrolling_desc:{t:0,b:{t:2,i:[{t:3}],s:"After enabling, mouse scrolling will directly scroll the horizontal scroll list."}},select_language:{t:0,b:{t:2,i:[{t:3}],s:"Language"}},select_language_opt:{english:{t:0,b:{t:2,i:[{t:3}],s:"English"}},mandarin_cn:{t:0,b:{t:2,i:[{t:3}],s:"Mandarin - Simplified Chinese"}},mandarin_tw:{t:0,b:{t:2,i:[{t:3}],s:"Mandarin - Traditional Chinese"}},jyut:{t:0,b:{t:2,i:[{t:3}],s:"Cantonese"}}},customize_font:{t:0,b:{t:2,i:[{t:3}],s:"Customize font"}},customize_font_opt:{default:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili Default"}},recommend:{t:0,b:{t:2,i:[{t:3}],s:"Recommend"}},custom:{t:0,b:{t:2,i:[{t:3}],s:"Custom"}}},customize_font_desc:{t:0,b:{t:2,i:[{t:3}],s:`For users who favor the old form of Chinese characters, we recommend <a class="link" href="https://github.com/GuiWonder/Shanggu" target="_blank">Shanggu Fonts ()</a> and <a class="link" href="https://github.com/ayaka14732/FanWunHak" target="_blank">Fan Wun Hak ()</a>.
These fonts also possess the capability to convert simplified Chinese into traditional characters.`}},override_danmaku_font:{t:0,b:{t:2,i:[{t:3}],s:"Override danmaku font"}},override_danmaku_font_desc:{t:0,b:{t:2,i:[{t:3}],s:`Set the danmaku font to your customized font to override the default. The video player won't be able to change it afterwards.
`}},remove_the_indent_from_chinese_punctuation:{t:0,b:{t:2,i:[{t:3}],s:"Remove the indent from Chinese punctuation"}},remove_the_indent_from_chinese_punctuation_desc:{t:0,b:{t:2,i:[{t:3}],s:`By default, Bilibili will specifically handle Chinese punctuation to achieve left alignment. If you are using a custom font, it is recommended to remove the indent.
`}},enable_frosted_glass:{t:0,b:{t:2,i:[{t:3}],s:"Enable frosted glass effect"}},frosted_glass_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:"Frosted glass blur intensity"}},disable_shadow:{t:0,b:{t:2,i:[{t:3}],s:"Disable shadow"}},link_opening_behavior_opt:{current_tab:{t:0,b:{t:2,i:[{t:3}],s:"Current tab"}},current_tab_if_not_homepage:{t:0,b:{t:2,i:[{t:3}],s:"New tab on homepage, otherwise current tab"}},background:{t:0,b:{t:2,i:[{t:3}],s:"New tab,but in background"}},new_tab:{t:0,b:{t:2,i:[{t:3}],s:"New tab"}},drawer:{t:0,b:{t:2,i:[{t:3}],s:"Open in drawer"}}},top_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:"Top bar link opening behavior"}},video_card_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:"Video card and bangumi card link opening behavior"}},search_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:"Search bar link opening behavior"}},close_drawer_without_pressing_esc_again:{t:0,b:{t:2,i:[{t:3}],s:"Close the drawer without pressing <kbd>Esc</kbd> again"}},block_ads:{t:0,b:{t:2,i:[{t:3}],s:"Block ads"}},block_top_search_page_ads:{t:0,b:{t:2,i:[{t:3}],s:"Block Bilibili top search page ads"}},block_top_search_page_ads_desc:{t:0,b:{t:2,i:[{t:3}],s:`Sometimes, the ads above search results are actually year-end summaries or annual reports. If you don't want these to be accidentally removed, please disable this option.
`}},video_default_player_mode:{t:0,b:{t:2,i:[{t:3}],s:"Default video display mode"}},video_danmaku_default_state:{t:0,b:{t:2,i:[{t:3}],s:"Default danmaku state"}},video_danmaku_default_state_desc:{t:0,b:{t:2,i:[{t:3}],s:"Automatically toggle danmaku when a video loads, or leave it unchanged."}},video_danmaku_default_state_opt:{system:{t:0,b:{t:2,i:[{t:3}],s:"Do not adjust"}},on:{t:0,b:{t:2,i:[{t:3}],s:"Always enable"}},off:{t:0,b:{t:2,i:[{t:3}],s:"Always disable"}}},video_player_mode:{default:{t:0,b:{t:2,i:[{t:3}],s:"Default"}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:"Web Fullscreen"}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:"Widescreen"}}},enable_video_preview:{t:0,b:{t:2,i:[{t:3}],s:"Enable video preview feature (if possible)"}},enable_video_ctrl_bar_on_video_card:{t:0,b:{t:2,i:[{t:3}],s:"Display the video control bar on the video card"}},hover_video_card_delayed:{t:0,b:{t:2,i:[{t:3}],s:"Delayed video preview on hover over the video card"}},show_video_card_recommend_tag:{t:0,b:{t:2,i:[{t:3}],s:"Show plugin-calculated recommendation tags"}},show_video_card_recommend_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:'Display tags calculated by the plugin, such as "High Engagement", "Popular", etc.'}},auto_hide_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"Auto-hide top bar"}},video_page_top_bar_config:{t:0,b:{t:2,i:[{t:3}],s:"Video page top bar configuration"}},video_page_top_bar_config_desc:{t:0,b:{t:2,i:[{t:3}],s:"Configure the display behavior of the top bar on video pages"}},video_page_top_bar_config_opt:{alwaysShow:{t:0,b:{t:2,i:[{t:3}],s:"Always show"}},alwaysHide:{t:0,b:{t:2,i:[{t:3}],s:"Always hide"}},showOnMouse:{t:0,b:{t:2,i:[{t:3}],s:"Show on mouse"}},showOnScroll:{t:0,b:{t:2,i:[{t:3}],s:"Show on scroll"}}},always_use_transparent_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"Always use transparent (legacy) style for top bar"}},show_top_bar_theme_color_gradient:{t:0,b:{t:2,i:[{t:3}],s:"Show theme color gradient in top bar (only works in dark mode)"}},show_bewly_or_bili_top_bar_switcher:{t:0,b:{t:2,i:[{t:3}],s:"Show BewlyBewly/Bilibili top bar switcher"}},show_bewly_or_bili_page_switcher:{t:0,b:{t:2,i:[{t:3}],s:"Show BewlyBewly/Bilibili page switcher"}},top_bar_icon_badges:{t:0,b:{t:2,i:[{t:3}],s:"Icon badges"}},top_bar_icon_badges_opt:{number:{t:0,b:{t:2,i:[{t:3}],s:"Number"}},dot:{t:0,b:{t:2,i:[{t:3}],s:"Dot"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Do not show"}}},show_watch_later_badge:{t:0,b:{t:2,i:[{t:3}],s:"Show watch later badge"}},show_bcoin_receive_reminder:{t:0,b:{t:2,i:[{t:3}],s:"VIP B-coin receive reminder"}},auto_receive_bcoin_coupon:{t:0,b:{t:2,i:[{t:3}],s:"Auto receive B-coin coupon"}},auto_receive_bcoin_coupon_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, B-coin coupons will be automatically received when detected"}},auto_receive_vip_exp:{t:0,b:{t:2,i:[{t:3}],s:"Auto receive VIP experience"}},auto_receive_vip_exp_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, will automatically receive daily VIP experience"}},open_notifications_page_as_drawer:{t:0,b:{t:2,i:[{t:3}],s:"Open notifications page as drawer"}},group_video_card_grid:{t:0,b:{t:2,i:[{t:3}],s:"Video Card Grid"}},grid_breakpoints:{t:0,b:{t:2,i:[{t:3}],s:"Grid Breakpoints"}},grid_breakpoints_desc:{t:0,b:{t:2,i:[{t:3}],s:"Set the number of columns at different screen widths. When screen width is greater than or equal to the set value, use the corresponding columns."}},grid_min_width:{t:0,b:{t:2,i:[{t:3}],s:"Width "}},grid_columns:{t:0,b:{t:2,i:[{t:3}],s:"Show"}},grid_columns_unit:{t:0,b:{t:2,i:[{t:3}],s:"cols"}},grid_add_breakpoint:{t:0,b:{t:2,i:[{t:3}],s:"Add Breakpoint"}},home_adaptive_title_auto_size:{t:0,b:{t:2,i:[{t:3}],s:"Auto adjust title font size"}},home_adaptive_title_auto_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Adjusts title font size based on the grid width"}},home_adaptive_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:"Title font size"}},home_adaptive_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Fixed title font size (px); disabled when auto is on"}},video_card_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:"Title Font Size"}},video_card_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Controls the font size of the video card title."}},video_card_author_font_size:{t:0,b:{t:2,i:[{t:3}],s:"UP info font size"}},video_card_author_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Controls the font size for uploader names shown on video cards."}},video_card_meta_font_size:{t:0,b:{t:2,i:[{t:3}],s:"Tag & timestamp font size"}},video_card_meta_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Controls the font size for tags and timestamps shown below the title."}},video_card_shadow_curve:{t:0,b:{t:2,i:[{t:3}],s:"Shadow gradient curve"}},video_card_shadow_curve_desc:{t:0,b:{t:2,i:[{t:3}],s:"Customize the gradient effect of the bottom shadow on video cards"}},video_card_shadow_curve_hint:{t:0,b:{t:2,i:[{t:3}],s:"Drag the line to create control points, right-click to delete"}},video_card_shadow_height:{t:0,b:{t:2,i:[{t:3}],s:"Shadow height"}},video_card_shadow_height_desc:{t:0,b:{t:2,i:[{t:3}],s:"Adjust the height ratio of the shadow covering the cover"}},video_card_shadow_reset:{t:0,b:{t:2,i:[{t:3}],s:"Reset shadow settings"}},video_card_layout:{t:0,b:{t:2,i:[{t:3}],s:"Video card layout"}},video_card_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:"Switch between the redesigned card and the legacy layout."}},video_card_layout_option:{modern:{t:0,b:{t:2,i:[{t:3}],s:"Modern layout"}},old:{t:0,b:{t:2,i:[{t:3}],s:"Classic layout"}}},font_size_option:{xs:{t:0,b:{t:2,i:[{t:3}],s:"Extra small"}},sm:{t:0,b:{t:2,i:[{t:3}],s:"Small"}},base:{t:0,b:{t:2,i:[{t:3}],s:"Medium"}},lg:{t:0,b:{t:2,i:[{t:3}],s:"Large"}}},group_topbar_components:{t:0,b:{t:2,i:[{t:3}],s:"Top Bar Components Settings"}},topbar_components_adjustment:{t:0,b:{t:2,i:[{t:3}],s:"Top Bar Components Badge Settings"}},topbar_components_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:"Configure the badge display mode for each top bar icon"}},group_topbar_pinned_channels:{t:0,b:{t:2,i:[{t:3}],s:"Top Bar Pinned Channels"}},topbar_pinned_channels_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose items from the logo dropdown to keep directly on the top bar and arrange their priority."}},topbar_pinned_channels_title:{t:0,b:{t:2,i:[{t:3}],s:"Pinned channels"}},topbar_pinned_channels_hint:{t:0,b:{t:2,i:[{t:3}],s:"Click a tile to pin or unpin it; the order follows the sequence of your clicks. Items toward the end hide first when space is tight."}},topbar_pinned_channels_all_selected:{t:0,b:{t:2,i:[{t:3}],s:"All channels have already been pinned."}},topbar_pinned_channels_empty:{t:0,b:{t:2,i:[{t:3}],s:"You have not pinned any channels yet."}},topbar_pinned_channels_order_tip:{t:0,b:{t:2,i:[{t:3}],s:"Selection order follows your clicks. Click an item again to unpin it."}},badge_type:{t:0,b:{t:2,i:[{t:3}],s:"Badge Type"}},always_use_dock:{t:0,b:{t:2,i:[{t:3}],s:"Always use the dock"}},always_use_dock_desc:{t:0,b:{t:2,i:[{t:3}],s:"The dock will always be visible and the sidebar will be hidden. We also recommend enabling auto-hide for the dock."}},auto_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:"Automatically hide the dock"}},half_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:"Half-hide dock"}},dock_position:{t:0,b:{t:2,i:[{t:3}],s:"Dock position"}},dock_position_desc:{t:0,b:{t:2,i:[{t:3}],s:"Position on screen."}},dock_content_adjustment:{t:0,b:{t:2,i:[{t:3}],s:"Dock content adjustment"}},dock_content_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:"The page of the first activated dock item will be the startup page."}},dock_item_open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:"Open in new tab"}},dock_item_use_original_bili_web_page:{t:0,b:{t:2,i:[{t:3}],s:"Use the original Bilibili web page"}},disable_dock_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:"Disable the dock glowing effect"}},disable_light_dark_mode_switcher:{t:0,b:{t:2,i:[{t:3}],s:"Disable light/dark mode switcher"}},back_to_top_and_refresh_buttons_are_separated:{t:0,b:{t:2,i:[{t:3}],s:"Separate Back to Top and Refresh Buttons"}},sidebar_position:{t:0,b:{t:2,i:[{t:3}],s:"Sidebar position"}},auto_hide_sidebar:{t:0,b:{t:2,i:[{t:3}],s:"Automatically hide the sidebar"}},theme:{t:0,b:{t:2,i:[{t:3}],s:"Theme"}},theme_opt:{light:{t:0,b:{t:2,i:[{t:3}],s:"Light"}},dark:{t:0,b:{t:2,i:[{t:3}],s:"Dark"}},auto:{t:0,b:{t:2,i:[{t:3}],s:"Auto"}}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:"Theme color"}},dark_mode_base_color:{t:0,b:{t:2,i:[{t:3}],s:"Dark mode base color"}},gradient_theme_color_background:{t:0,b:{t:2,i:[{t:3}],s:"Use a gradient theme color as the background in dark mode"}},wallpaper_mode:{t:0,b:{t:2,i:[{t:3}],s:"Wallpaper mode"}},wallpaper_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:`By URL: Choose an image from the Internet and use its URL to set it as the wallpaper.
`}},wallpaper_mode_opt:{build_in:{t:0,b:{t:2,i:[{t:3}],s:"Built-in"}},by_url:{t:0,b:{t:2,i:[{t:3}],s:"By URL"}}},choose_ur_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:"Choose your wallpaper"}},image_url:{t:0,b:{t:2,i:[{t:3}],s:"Image URL"}},image_url_hint:{t:0,b:{t:2,i:[{t:3}],s:`URL examples: https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/rocky-mountain-cloudscape.jpg
https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/green-white-mountains.jpg`}},enable_wallpaper_masking:{t:0,b:{t:2,i:[{t:3}],s:"Enable wallpaper masking"}},wallpaper_cache_time:{t:0,b:{t:2,i:[{t:3}],s:"Wallpaper cache time"}},wallpaper_cache_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"Set the cache time (hours) for URL wallpapers. 0 means no caching, reload every time. Locally uploaded images are not affected by this setting."}},no_cache:{t:0,b:{t:2,i:[{t:3}],s:"No cache"}},wallpaper_mask_opacity:{t:0,b:{t:2,i:[{t:3}],s:"Wallpaper masking opacity"}},wallpaper_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:"Wallpaper blur intensity"}},customize_css:{t:0,b:{t:2,i:[{t:3}],s:"Customize CSS"}},customize_css_desc:{t:0,b:{t:2,i:[{t:3}],s:`If you are unfamiliar with CSS, please DO NOT modify CSS. Doing so may cause unexpected display issues.
If you encounter any problems after modifying CSS, please reinstall BewlyBewly.`}},logo_color:{t:0,b:{t:2,i:[{t:3}],s:"Logo color"}},logo_color_opt:{white:{t:0,b:{t:2,i:[{t:3}],s:"White"}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:"Theme Color"}}},search_results_pagination_mode_opt:{scroll:{t:0,b:{t:2,i:[{t:3}],s:"Infinite Scroll"}},pagination:{t:0,b:{t:2,i:[{t:3}],s:"Pagination"}}},enable_logo_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:"Enable glowing effect for the logo"}},logo_visibility:{t:0,b:{t:2,i:[{t:3}],s:"Logo visibility"}},bg_darkens_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:"Background darkens when the search bar is focused"}},bg_blurs_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:"Background blurs when the search bar is focused"}},choose_search_bar_focused_character:{t:0,b:{t:2,i:[{t:3}],s:"Choose the character that appears when the search bar is focused"}},show_hot_search_in_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"Show hot search in top bar"}},show_hot_search_in_top_bar_desc:{t:0,b:{t:2,i:[{t:3}],s:"Display hot search list in the top bar search box"}},show_hot_search_in_search_page:{t:0,b:{t:2,i:[{t:3}],s:"Show hot search in search page"}},show_hot_search_in_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:"Display hot search ranking on the search page"}},show_search_recommendation:{t:0,b:{t:2,i:[{t:3}],s:"Show search recommendation"}},show_search_recommendation_desc:{t:0,b:{t:2,i:[{t:3}],s:"Display recommended search terms as placeholder in the search box, and search for them when pressing Enter with an empty input"}},use_plugin_search_results_page:{t:0,b:{t:2,i:[{t:3}],s:"Use plugin search results page"}},use_plugin_search_results_page_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, searches will use the plugin's built-in search results page with category filtering and more features"}},search_results_pagination_mode:{t:0,b:{t:2,i:[{t:3}],s:"Search results pagination mode"}},search_results_pagination_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose how search results are displayed: infinite scroll or page-based navigation"}},individually_set_search_page_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:"Individually set search page wallpaper"}},recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:"Recommendation mode"}},recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:`If you want to use the recommendation algorithm on the app, please ensure that you authorize the BewlyBewly to use the access key first.
`}},auto_switch_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:"Auto switch recommendation mode"}},auto_switch_recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:`Automatically switch from App mode to Web mode when App recommendation fails.
`}},authorize_app:{t:0,b:{t:2,i:[{t:3}],s:"Authorize the BewlyBewly to use the access key"}},authorize_app_desc:{t:0,b:{t:2,i:[{t:3}],s:`After authentication, you will receive the video recommendations based on the bilibili app recommendation algorithm. The access key is valid for about one month. After that, remember to re-authorize the BewlyBewly to use the access key.
`}},authorize_app_more_info_access_key:{t:0,b:{t:2,i:[{t:3}],s:"More information about the access key"}},scan_qrcode_desc:{t:0,b:{t:2,i:[{t:3}],s:"Use the Bilibili mobile app to scan this QR code in order to authorize the access key."}},disable_filters_for_followed_users:{t:0,b:{t:2,i:[{t:3}],s:"Disable filters for followed users"}},disable_filters_for_followed_users_desc:{t:0,b:{t:2,i:[{t:3}],s:`If you enable this option, all filters you set will be disabled for the users you follow.
`}},filter_out_vertical_videos:{t:0,b:{t:2,i:[{t:3}],s:"Filter out vertical videos (only works on the app recommendation mode)"}},filter_by_view_count:{t:0,b:{t:2,i:[{t:3}],s:"Filter by view count"}},filter_by_view_count_desc:{t:0,b:{t:2,i:[{t:3}],s:"Filtered out videos with less than the view count you set."}},filter_by_view_count_unit:{t:0,b:{t:2,i:[{t:3}],s:"views"}},filter_by_duration:{t:0,b:{t:2,i:[{t:3}],s:"Filter by duration"}},filter_by_duration_desc:{t:0,b:{t:2,i:[{t:3}],s:"Filtered out videos with less than the duration you set."}},filter_by_duration_unit:{t:0,b:{t:2,i:[{t:3}],s:"sec"}},filter_by_publish_time:{t:0,b:{t:2,i:[{t:3}],s:"Filter by publish time"}},filter_by_publish_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"Filter out videos published more than the specified number of days ago (only works in Web recommendation mode, minimum 7 days)."}},filter_by_publish_time_unit:{t:0,b:{t:2,i:[{t:3}],s:"days"}},filter_item_already_exist:{t:0,b:{t:2,i:[{t:3}],s:"This filter item already exists!"}},filter_by_title:{t:0,b:{t:2,i:[{t:3}],s:"Filter by title"}},filter_by_title_desc:{t:0,b:{t:2,i:[{t:3}],s:`Filtered out the videos that contain the titles you set (case-insensitive).
Alternatively, use regex, such as <code>/abc&#124;\\d+/</code>, wrapped in <code>/</code>.
<br/>
In the table below, you can press the <kbd>Enter</kbd> key to add a new filter or confirm a modification.
Press the <kbd>Esc</kbd> key to cancel the modification.
Double-click the column to edit the current column.`}},filter_by_user:{t:0,b:{t:2,i:[{t:3}],s:"Filter by user"}},filter_by_user_desc:{t:0,b:{t:2,i:[{t:3}],s:`Filtered out the videos that are uploaded by the username (full name, case-insensitive) or MID you set.
Alternatively, use regex, such as <code>/abc&#124;\\d+/</code>, wrapped in <code>/</code>.
<br/>
In the table below, you can press the <kbd>Enter</kbd> key to add a new filter or confirm a modification.
Press the <kbd>Esc</kbd> key to cancel the modification.
Double-click the column to edit the current column.`}},filter_by_user_table:{username_or_mid:{t:0,b:{t:2,i:[{t:3}],s:"Username / MID"}}},following_tab_show_livestreaming_videos:{t:0,b:{t:2,i:[{t:3}],s:'Show Live-streaming videos in the "Following" tab'}},following_filter_charging_videos:{t:0,b:{t:2,i:[{t:3}],s:"Filter charging exclusive videos"}},following_filter_charging_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:'When enabled, paid videos that require charging to watch will be hidden in the "Following" page'}},following_filter_dynamic_videos:{t:0,b:{t:2,i:[{t:3}],s:"Filter dynamic videos"}},following_filter_dynamic_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:'When enabled, videos marked as dynamic videos will be hidden in the "Following" page'}},use_following_new_layout:{t:0,b:{t:2,i:[{t:3}],s:"Use new layout for Following tab"}},use_following_new_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:"Display followed UPs list on the left and video feed on the right"}},following_inactive_days:{t:0,b:{t:2,i:[{t:3}],s:"UP inactive days"}},following_inactive_days_desc:{t:0,b:{t:2,i:[{t:3}],s:"When a UP has not posted for the specified number of days or has no videos, they will be automatically moved to the blacklist. They will be removed from the blacklist when appearing in ALL view or when clicked"}},preserve_for_you_state:{t:0,b:{t:2,i:[{t:3}],s:'Preserve "For You" pre-switch state'}},preserve_for_you_state_desc:{t:0,b:{t:2,i:[{t:3}],s:'When switching from dock to other pages, preserve the browsing state of the "For You" page and maintain content before switching when returning'}},use_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:"Use search page mode on homepage"}},settings_shared_with_the_search_page:{t:0,b:{t:2,i:[{t:3}],s:"Settings shared with the search page"}},settings_shared_with_the_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:"Those settings are used in common with the search page."}},search_page_mode_wallpaper_fixed:{t:0,b:{t:2,i:[{t:3}],s:"Make the wallpaper of the search page mode fixed"}},home_tabs_adjustment:{t:0,b:{t:2,i:[{t:3}],s:"Tabs adjustment"}},home_tabs_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:"The first activated tab is the default page."}},always_show_tabs_on_home_page:{t:0,b:{t:2,i:[{t:3}],s:"Always show tabs on the home page"}},topbar_visibility:{t:0,b:{t:2,i:[{t:3}],s:"BewlyBewly's top bar visibility"}},topbar_visibility_desc:{t:0,b:{t:2,i:[{t:3}],s:"If you are using Bilibili Evolved's top bar, you can turn BewlyBewly's top bar off here."}},use_original_bilibili_homepage:{t:0,b:{t:2,i:[{t:3}],s:"Use the original Bilibili homepage"}},use_original_bilibili_homepage_desc:{t:0,b:{t:2,i:[{t:3}],s:"After you change it, the page will automatically refresh if you are on the homepage!"}},use_original_bilibili_topbar:{t:0,b:{t:2,i:[{t:3}],s:"Use the original Bilibili top bar"}},adapt_to_other_page_styles:{t:0,b:{t:2,i:[{t:3}],s:"Adapt to other page styles"}},adapt_to_other_page_styles_desc:{t:0,b:{t:2,i:[{t:3}],s:"Adapt to some common pages to match with the BewlyBewly theme."}},follow_bilibili_evolved_color:{t:0,b:{t:2,i:[{t:3}],s:"Follow the Bilibili Evolved theme color"}},follow_bilibili_evolved_color_desc:{t:0,b:{t:2,i:[{t:3}],s:"After changing the theme color in Bilibili Evolved, you will need to re-select this option in order to update the theme color."}},links:{t:0,b:{t:2,i:[{t:3}],s:"Links"}},import_settings:{t:0,b:{t:2,i:[{t:3}],s:"Import Settings"}},export_settings:{t:0,b:{t:2,i:[{t:3}],s:"Export Settings"}},export_settings_desc:{t:0,b:{t:2,i:[{t:3}],s:"Some sensitive content, such as access key, will not be exported and may need to be reacquired again."}},reset_settings:{t:0,b:{t:2,i:[{t:3}],s:"Reset Settings"}},reset_settings_confirm:{t:0,b:{t:2,i:[{t:3}],s:`Reset settings?
This operation cannot be reversed. Are you sure you want to reset your settings?`}},contributors:{t:0,b:{t:2,i:[{t:3}],s:"BewlyBewly History Contributors"}},enable_settings_sync:{t:0,b:{t:2,i:[{t:3}],s:"Allow syncing settings"}},enable_settings_sync_desc:{t:0,b:{t:2,i:[{t:3}],s:"Sync extension settings across different devices (requires signing into the browser account)"}},disable_auto_play_collection:{t:0,b:{t:2,i:[{t:3}],s:"Auto disable collection autoplay"}},disable_auto_play_collection_desc:{t:0,b:{t:2,i:[{t:3}],s:"Automatically turn off the autoplay feature for video collections"}},keep_collection_video_default_mode:{t:0,b:{t:2,i:[{t:3}],s:"Keep collection videos in default mode"}},keep_collection_video_default_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, collection videos will always use the default player mode and won't apply widescreen or fullscreen settings"}},remember_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:"Remember playback rate"}},remember_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:`When enabled, the player will remember your last set playback rate and automatically apply it when opening videos
`}},auto_exit_fullscreen_on_end:{t:0,b:{t:2,i:[{t:3}],s:"Auto exit fullscreen/webFullscreen when video ends"}},auto_exit_fullscreen_on_end_desc:{t:0,b:{t:2,i:[{t:3}],s:`When enabled, the player will automatically exit fullscreen mode when the video finishes playing
`}},auto_exit_fullscreen_exclude_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"Exclude auto-play mode"}},auto_exit_fullscreen_exclude_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:`When enabled, videos in auto-play mode will not auto-exit fullscreen when finished, allowing continuous viewing
`}},use_bilibili_default_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"Use Bilibili's default auto-play behavior"}},use_bilibili_default_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:`When enabled, Bilibili's default auto-play behavior will be used, and custom auto-play settings below will be hidden and disabled
`}},auto_play_mode_default:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili Default"}},auto_play_mode_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"Auto-play"}},auto_play_mode_auto_play_with_recommend:{t:0,b:{t:2,i:[{t:3}],s:"Auto-play (with Recommendations)"}},auto_play_mode_pause_at_end:{t:0,b:{t:2,i:[{t:3}],s:"Pause at End"}},auto_play_mode_loop:{t:0,b:{t:2,i:[{t:3}],s:"Single Loop"}},auto_play_multipart:{t:0,b:{t:2,i:[{t:3}],s:"Multi-part Videos"}},auto_play_multipart_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose auto-play behavior for multi-part videos"}},auto_play_collection:{t:0,b:{t:2,i:[{t:3}],s:"Collection Videos"}},auto_play_collection_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose auto-play behavior for collection videos"}},auto_play_recommend:{t:0,b:{t:2,i:[{t:3}],s:"Recommended Videos"}},auto_play_recommend_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose auto-play behavior when video ends"}},auto_play_playlist:{t:0,b:{t:2,i:[{t:3}],s:"Playlist Videos"}},auto_play_playlist_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose auto-play behavior for playlist videos"}},enable_random_play:{t:0,b:{t:2,i:[{t:3}],s:"Enable video collection random play"}},enable_random_play_desc:{t:0,b:{t:2,i:[{t:3}],s:"Add random play feature for multi-part videos or collections"}},random_play_mode:{t:0,b:{t:2,i:[{t:3}],s:"Random play mode"}},random_play_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:"Choose how random play is enabled"}},random_play_mode_manual:{t:0,b:{t:2,i:[{t:3}],s:"Manual toggle"}},random_play_mode_auto:{t:0,b:{t:2,i:[{t:3}],s:"Auto enable"}},min_videos_for_random:{t:0,b:{t:2,i:[{t:3}],s:"Minimum videos for random play"}},min_videos_for_random_desc:{t:0,b:{t:2,i:[{t:3}],s:"Random play will only be enabled when video count is no less than this value"}},random_play:{t:0,b:{t:2,i:[{t:3}],s:"Random Play"}},random_play_enabled:{t:0,b:{t:2,i:[{t:3}],s:"Random play enabled"}},random_play_disabled:{t:0,b:{t:2,i:[{t:3}],s:"Random play disabled"}},random_play_not_enabled:{t:0,b:{t:2,i:[{t:3}],s:"Random play feature not enabled"}},random_play_min_videos_required:{t:0,b:{t:2,i:[{t:3,v:"At least "},{t:4,k:"count"},{t:3,v:" videos required to enable random play"}]}},enable_undo_refresh_button:{t:0,b:{t:2,i:[{t:3}],s:"Enable Undo Refresh Button(only effective in Web recommendation mode)"}},enable_undo_refresh_button_desc:{t:0,b:{t:2,i:[{t:3}],s:"After refreshing the page, display an undo button that restores the content before the refresh when clicked."}},shortcuts:{title:{t:0,b:{t:2,i:[{t:3}],s:"Keyboard Shortcuts"}},enable_all_shortcuts_toggle:{t:0,b:{t:2,i:[{t:3}],s:"Enable Keyboard Shortcuts"}},enable_all_shortcuts_toggle_desc:{t:0,b:{t:2,i:[{t:3}],s:"Enable or disable all keyboard shortcuts functionality"}},group:{official_bilibili:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili Official Shortcuts"}},homepage:{t:0,b:{t:2,i:[{t:3}],s:"Homepage Shortcuts"}},general:{t:0,b:{t:2,i:[{t:3}],s:"General Shortcuts"}},fullscreen_mode:{t:0,b:{t:2,i:[{t:3}],s:"Fullscreen Mode Shortcuts"}},global_actions:{t:0,b:{t:2,i:[{t:3}],s:"Global Actions"}}},official:{play_pause:{t:0,b:{t:2,i:[{t:3}],s:"Play/Pause"}},forward:{t:0,b:{t:2,i:[{t:3}],s:"Forward 5s"}},backward:{t:0,b:{t:2,i:[{t:3}],s:"Backward 5s"}},volume_up:{t:0,b:{t:2,i:[{t:3}],s:"Volume Up"}},volume_down:{t:0,b:{t:2,i:[{t:3}],s:"Volume Down"}},exit_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:"Exit Fullscreen"}},fullscreen:{t:0,b:{t:2,i:[{t:3}],s:"Toggle Fullscreen"}},danmu_toggle:{t:0,b:{t:2,i:[{t:3}],s:"Toggle Danmu"}},mute:{t:0,b:{t:2,i:[{t:3}],s:"Toggle Mute"}},prev_video:{t:0,b:{t:2,i:[{t:3}],s:"Play Previous Video"}},next_video:{t:0,b:{t:2,i:[{t:3}],s:"Play Next Video"}},speed_1:{t:0,b:{t:2,i:[{t:3}],s:"Set Speed to 1x"}},speed_2:{t:0,b:{t:2,i:[{t:3}],s:"Set Speed to 2x"}},input_danmu:{t:0,b:{t:2,i:[{t:3}],s:"Input Danmu"}}},item:{edit_key:{t:0,b:{t:2,i:[{t:3}],s:"Edit Shortcut"}},cancel_edit:{t:0,b:{t:2,i:[{t:3}],s:"Cancel Edit"}},reset_default:{t:0,b:{t:2,i:[{t:3}],s:"Reset to Default"}}},reset_all_button:{t:0,b:{t:2,i:[{t:3}],s:"Reset All Shortcuts"}},reset_all_ext_shortcuts:{t:0,b:{t:2,i:[{t:3}],s:"Reset All Extension Shortcuts"}},press_keys:{t:0,b:{t:2,i:[{t:3}],s:"Click the input box, then press the shortcut keys"}},danmu_status:{t:0,b:{t:2,i:[{t:3}],s:"Show Danmu Status"}},danmu_status_desc:{t:0,b:{t:2,i:[{t:3}],s:"Show current danmu toggle status"}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:"Web Fullscreen"}},web_fullscreen_desc:{t:0,b:{t:2,i:[{t:3}],s:"Toggle web fullscreen mode"}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:"Widescreen"}},widescreen_desc:{t:0,b:{t:2,i:[{t:3}],s:"Toggle widescreen mode"}},short_step_backward:{t:0,b:{t:2,i:[{t:3}],s:"Quick Rewind"}},short_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:"Rewind 5 seconds"}},long_step_backward:{t:0,b:{t:2,i:[{t:3}],s:"Long Rewind"}},long_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:"Rewind 30 seconds"}},play_pause_ext:{t:0,b:{t:2,i:[{t:3}],s:"Play/Pause"}},play_pause_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:"Play or pause video (extension)"}},short_step_forward:{t:0,b:{t:2,i:[{t:3}],s:"Quick Forward"}},short_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:"Forward 5 seconds"}},long_step_forward:{t:0,b:{t:2,i:[{t:3}],s:"Long Forward"}},long_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:"Forward 30 seconds"}},next_video_ext:{t:0,b:{t:2,i:[{t:3}],s:"Next Video"}},next_video_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:"Play next video in playlist (extension)"}},pip:{t:0,b:{t:2,i:[{t:3}],s:"Picture in Picture"}},pip_desc:{t:0,b:{t:2,i:[{t:3}],s:"Toggle picture-in-picture mode"}},turn_off_light:{t:0,b:{t:2,i:[{t:3}],s:"Turn Off Light"}},turn_off_light_desc:{t:0,b:{t:2,i:[{t:3}],s:"Toggle theater mode"}},caption:{t:0,b:{t:2,i:[{t:3}],s:"Captions"}},caption_desc:{t:0,b:{t:2,i:[{t:3}],s:"Toggle captions"}},increase_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:"Increase Speed"}},increase_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:"Increase playback speed"}},decrease_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:"Decrease Speed"}},decrease_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:"Decrease playback speed"}},reset_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:"Reset Speed"}},reset_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:"Reset to normal playback speed"}},previous_frame:{t:0,b:{t:2,i:[{t:3}],s:"Previous Frame"}},previous_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:"Go to previous frame (when paused)"}},next_frame:{t:0,b:{t:2,i:[{t:3}],s:"Next Frame"}},next_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:"Go to next frame (when paused)"}},replay:{t:0,b:{t:2,i:[{t:3}],s:"Replay"}},replay_desc:{t:0,b:{t:2,i:[{t:3}],s:"Start playing from beginning"}},increase_video_size:{t:0,b:{t:2,i:[{t:3}],s:"Increase Video Size"}},increase_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Make video larger"}},decrease_video_size:{t:0,b:{t:2,i:[{t:3}],s:"Decrease Video Size"}},decrease_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Make video smaller"}},reset_video_size:{t:0,b:{t:2,i:[{t:3}],s:"Reset Video Size"}},reset_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:"Reset to default video size"}},video_title:{t:0,b:{t:2,i:[{t:3}],s:"Video Title"}},video_title_desc:{t:0,b:{t:2,i:[{t:3}],s:"Show/Hide video title"}},video_time:{t:0,b:{t:2,i:[{t:3}],s:"Video Time"}},video_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"Show/Hide video time"}},clock_time:{t:0,b:{t:2,i:[{t:3}],s:"Clock"}},clock_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"Show/Hide system time"}},home_refresh:{t:0,b:{t:2,i:[{t:3}],s:"Homepage Refresh"}},home_refresh_desc:{t:0,b:{t:2,i:[{t:3}],s:"Refresh homepage content"}},toggle_follow:{t:0,b:{t:2,i:[{t:3}],s:"Toggle Follow/Unfollow"}},toggle_follow_desc:{t:0,b:{t:2,i:[{t:3}],s:"Toggle follow status of the uploader on video page"}}},clean_url_argument:{t:0,b:{t:2,i:[{t:3}],s:"Clean URL Tracking Parameters"}},clean_url_argument_desc:{t:0,b:{t:2,i:[{t:3}],s:"Automatically clean tracking parameters from URLs to make links cleaner"}},show_ip_location:{t:0,b:{t:2,i:[{t:3}],s:"Show IP home location"}},show_ip_location_desc:{t:0,b:{t:2,i:[{t:3}],s:"Display IP home in the video/dynamic comment area"}},show_sex:{t:0,b:{t:2,i:[{t:3}],s:"Show user gender"}},show_sex_desc:{t:0,b:{t:2,i:[{t:3}],s:"Display user gender in the video/dynamic comment area"}},show_comment_host_tag:{t:0,b:{t:2,i:[{t:3}],s:"Show OP tag"}},show_comment_host_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:"Show an OP tag on the root comment in reply detail view"}},adjust_comment_image_height:{t:0,b:{t:2,i:[{t:3}],s:"Adjust comment image height"}},adjust_comment_image_height_desc:{t:0,b:{t:2,i:[{t:3}],s:"Automatically adjust comment image height to match actual aspect ratio and prevent distortion"}},video_player_scroll:{t:0,b:{t:2,i:[{t:3}],s:"Scroll after adjusting the display mode"}},video_player_scroll_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, it will automatically scroll to the appropriate position when the default mode is widescreen and default."}},enlarge_favorite_dialog:{t:0,b:{t:2,i:[{t:3}],s:"Enlarge favorite dialog"}},enlarge_favorite_dialog_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, the favorite dialog on video pages will be displayed in a larger size for easier viewing and management."}},external_watch_later_button:{t:0,b:{t:2,i:[{t:3}],s:"External watch later button"}},external_watch_later_button_desc:{t:0,b:{t:2,i:[{t:3}],s:"When enabled, a standalone watch later button will be displayed on the video page toolbar for quick access."}},volume_normalization:{title:{t:0,b:{t:2,i:[{t:3}],s:"Volume Normalization"}},enable:{t:0,b:{t:2,i:[{t:3}],s:"Enable volume normalization"}},enable_desc:{t:0,b:{t:2,i:[{t:3}],s:"Real-time detection of voice loudness, automatically adjust volume to a consistent level"}},target_volume:{t:0,b:{t:2,i:[{t:3}],s:"Target volume"}},target_volume_desc:{t:0,b:{t:2,i:[{t:3}],s:"Target loudness level (0-100), 50 = -20dBFS, higher = louder"}},strength:{t:0,b:{t:2,i:[{t:3}],s:"Smoothness strength"}},strength_desc:{t:0,b:{t:2,i:[{t:3}],s:"Volume peak smoothing strength (1-20), recommended 8-15, usually no adjustment needed"}},adaptive_speed:{t:0,b:{t:2,i:[{t:3}],s:"Response speed"}},adaptive_speed_desc:{t:0,b:{t:2,i:[{t:3}],s:"Speed to reach target volume (1-10), higher = faster, recommended 3-7"}},voice_gate:{t:0,b:{t:2,i:[{t:3}],s:"Voice detection threshold"}},voice_gate_desc:{t:0,b:{t:2,i:[{t:3}],s:"Sounds below this level are ignored (-60 to -10 dB), recommended -40 to -30"}},debug:{t:0,b:{t:2,i:[{t:3}],s:"Debug mode"}},debug_desc:{t:0,b:{t:2,i:[{t:3}],s:"Output volume normalization debug info to console"}},usage_guide:{title:{t:0,b:{t:2,i:[{t:3}],s:"Usage Guide"}},desc:{t:0,b:{t:2,i:[{t:3}],s:`How it works:
 Real-time analysis of voice loudness in videos (ignoring background and silence)
 Automatically adjusts gain based on detected loudness to normalize all videos

Parameters:
 Target Volume (0-100): 0 = -30dBFS (quiet), 50 = -20dBFS (moderate), 100 = -10dBFS (loud)
 Response Speed (1-10): Controls time to reach target volume, higher = faster stabilization

Important notes:
 This is an experimental feature and may not work in some situations
 Refresh the page for changes to take effect
 Preserves original audio quality, only adjusts volume level`}}}},menu_volume_normalization:{t:0,b:{t:2,i:[{t:3}],s:"Volume Normalization"}},group_fonts:{t:0,b:{t:2,i:[{t:3}],s:"Font"}},group_visual_effects:{t:0,b:{t:2,i:[{t:3}],s:"Visual Effects"}},visibility:{t:0,b:{t:2,i:[{t:3}],s:"show"}}},auth:{auth_access_key_first:{t:0,b:{t:2,i:[{t:3}],s:"Before doing this, authorize BewlyBewly to use the access key."}}},topbar:{switch_to_bewly_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"Switch to BewlyBewly top bar"}},switch_to_bili_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"Switch to BiliBili/Bilibili-Evolved top bar"}},sign_in:{t:0,b:{t:2,i:[{t:3}],s:"Sign in"}},notifications:{t:0,b:{t:2,i:[{t:3}],s:"Notifications"}},moments:{t:0,b:{t:2,i:[{t:3}],s:"Moments"}},favorites:{t:0,b:{t:2,i:[{t:3}],s:"Favorites"}},history:{t:0,b:{t:2,i:[{t:3}],s:"History"}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:"Watch Later"}},creative_center:{t:0,b:{t:2,i:[{t:3}],s:"Creative Center"}},upload:{t:0,b:{t:2,i:[{t:3}],s:"Upload"}},logo_dropdown:{anime:{t:0,b:{t:2,i:[{t:3}],s:"Anime"}},movies:{t:0,b:{t:2,i:[{t:3}],s:"Movies"}},chinese_anime:{t:0,b:{t:2,i:[{t:3}],s:"Chinese Animation"}},tv_shows:{t:0,b:{t:2,i:[{t:3}],s:"TV Shows"}},variety_shows:{t:0,b:{t:2,i:[{t:3}],s:"Variety Shows"}},documentary_films:{t:0,b:{t:2,i:[{t:3}],s:"Documentary Films"}},animations:{t:0,b:{t:2,i:[{t:3}],s:"Animations"}},gaming:{t:0,b:{t:2,i:[{t:3}],s:"Gaming"}},kichiku:{t:0,b:{t:2,i:[{t:3}],s:"Kichiku"}},music:{t:0,b:{t:2,i:[{t:3}],s:"Music"}},dance:{t:0,b:{t:2,i:[{t:3}],s:"Dance"}},cinephile:{t:0,b:{t:2,i:[{t:3}],s:"Cinephile"}},showbiz:{t:0,b:{t:2,i:[{t:3}],s:"Showbiz"}},knowledge:{t:0,b:{t:2,i:[{t:3}],s:"Knowledge"}},technology:{t:0,b:{t:2,i:[{t:3}],s:"Technology"}},news:{t:0,b:{t:2,i:[{t:3}],s:"News"}},foods:{t:0,b:{t:2,i:[{t:3}],s:"Foods"}},shortplay:{t:0,b:{t:2,i:[{t:3}],s:"Short Play"}},cars:{t:0,b:{t:2,i:[{t:3}],s:"Cars"}},fashion:{t:0,b:{t:2,i:[{t:3}],s:"Fashion"}},sports:{t:0,b:{t:2,i:[{t:3}],s:"Sports"}},animals:{t:0,b:{t:2,i:[{t:3}],s:"Animals"}},vlog:{t:0,b:{t:2,i:[{t:3}],s:"VLOG"}},painting:{t:0,b:{t:2,i:[{t:3}],s:"Painting"}},ai:{t:0,b:{t:2,i:[{t:3}],s:"AI"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home & Real Estate"}},outdoors:{t:0,b:{t:2,i:[{t:3}],s:"Outdoors"}},gym:{t:0,b:{t:2,i:[{t:3}],s:"Fitness"}},handmake:{t:0,b:{t:2,i:[{t:3}],s:"Handicraft"}},travel:{t:0,b:{t:2,i:[{t:3}],s:"Travel"}},rural:{t:0,b:{t:2,i:[{t:3}],s:"Rural"}},parenting:{t:0,b:{t:2,i:[{t:3}],s:"Parenting"}},health:{t:0,b:{t:2,i:[{t:3}],s:"Health"}},emotion:{t:0,b:{t:2,i:[{t:3}],s:"Emotion"}},life_joy:{t:0,b:{t:2,i:[{t:3}],s:"Life Interests"}},life_experience:{t:0,b:{t:2,i:[{t:3}],s:"Life Experience"}},charitable_events:{t:0,b:{t:2,i:[{t:3}],s:"Charitable Events"}},articles:{t:0,b:{t:2,i:[{t:3}],s:"Articles"}},live:{t:0,b:{t:2,i:[{t:3}],s:"Live"}},activities:{t:0,b:{t:2,i:[{t:3}],s:"Activities"}},paid_courses:{t:0,b:{t:2,i:[{t:3}],s:"Courses"}},community:{t:0,b:{t:2,i:[{t:3}],s:"Community"}},music_plus:{t:0,b:{t:2,i:[{t:3}],s:"New Song Hotlist"}},game_center:{t:0,b:{t:2,i:[{t:3}],s:"Game Center"}},comic_con_and_goods:{t:0,b:{t:2,i:[{t:3}],s:"Comic Con & Goods"}},manga:{t:0,b:{t:2,i:[{t:3}],s:"Manga"}},game_competitions:{t:0,b:{t:2,i:[{t:3}],s:"Game Competitions"}}},user_dropdown:{money:{t:0,b:{t:2,i:[{t:3}],s:"Money: "}},b_coins:{t:0,b:{t:2,i:[{t:3}],s:"B-coins: "}},exp_desc:{t:0,b:{t:2,i:[{t:3,v:"Current XP: "},{t:4,k:"current_exp"},{t:3,v:"; need "},{t:4,k:"need_exp"},{t:3,v:" more for LV "},{t:4,k:"level"}]}},following:{t:0,b:{t:2,i:[{t:3}],s:"FOLLOWING"}},followers:{t:0,b:{t:2,i:[{t:3}],s:"FOLLOWERS"}},posts:{t:0,b:{t:2,i:[{t:3}],s:"POSTS"}},bilibili_premium:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili Premium"}},account_settings:{t:0,b:{t:2,i:[{t:3}],s:"Account settings"}},uploads_manager:{t:0,b:{t:2,i:[{t:3}],s:"Uploads manager"}},b_coins_wallet:{t:0,b:{t:2,i:[{t:3}],s:"B-coins wallet"}},orders:{t:0,b:{t:2,i:[{t:3}],s:"Orders"}},workshop:{t:0,b:{t:2,i:[{t:3}],s:"My workshop"}},my_stream_info:{t:0,b:{t:2,i:[{t:3}],s:"My stream info"}},my_courses:{t:0,b:{t:2,i:[{t:3}],s:"My courses"}},log_out:{t:0,b:{t:2,i:[{t:3}],s:"Log out"}},bilibili_premium_rewards:{t:0,b:{t:2,i:[{t:3}],s:"Premium Member Rewards"}},last_login_time:{t:0,b:{t:2,i:[{t:3}],s:"Last login"}},last_login_location:{t:0,b:{t:2,i:[{t:3}],s:"Location"}}},noti_dropdown:{replys:{t:0,b:{t:2,i:[{t:3}],s:"Replys"}},mentions:{t:0,b:{t:2,i:[{t:3}],s:"Mentions"}},likes:{t:0,b:{t:2,i:[{t:3}],s:"Likes"}},messages:{t:0,b:{t:2,i:[{t:3}],s:"Messages"}},chats:{t:0,b:{t:2,i:[{t:3}],s:"Chats"}}},moments_dropdown:{tabs:{videos:{t:0,b:{t:2,i:[{t:3}],s:"Videos"}},all:{t:0,b:{t:2,i:[{t:3}],s:"All"}},live:{t:0,b:{t:2,i:[{t:3}],s:"Live"}},articles:{t:0,b:{t:2,i:[{t:3}],s:"Articles"}}},uploaded:{t:0,b:{t:2,i:[{t:3}],s:"uploaded: "}},now_streaming:{t:0,b:{t:2,i:[{t:3}],s:"now streaming: "}},live_status:{t:0,b:{t:2,i:[{t:3}],s:"LIVE"}}},upload_dropdown:{article:{t:0,b:{t:2,i:[{t:3}],s:"Article"}},music:{t:0,b:{t:2,i:[{t:3}],s:"Music"}},sticker:{t:0,b:{t:2,i:[{t:3}],s:"Sticker"}},video:{t:0,b:{t:2,i:[{t:3}],s:"Video"}},manager:{t:0,b:{t:2,i:[{t:3}],s:"Manager"}}}},dock:{search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},anime:{t:0,b:{t:2,i:[{t:3}],s:"Anime"}},history:{t:0,b:{t:2,i:[{t:3}],s:"History"}},favorites:{t:0,b:{t:2,i:[{t:3}],s:"Favorites"}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:"Watch later"}},moments:{t:0,b:{t:2,i:[{t:3}],s:"Moments"}},dark_mode:{t:0,b:{t:2,i:[{t:3}],s:"Dark Mode"}},light_mode:{t:0,b:{t:2,i:[{t:3}],s:"Light Mode"}},settings:{t:0,b:{t:2,i:[{t:3}],s:"Settings"}}},video_card:{operation:{not_interested:{t:0,b:{t:2,i:[{t:3}],s:"Not Interested"}},open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:"Open in New Tab"}},open_in_background:{t:0,b:{t:2,i:[{t:3}],s:"Open In Background"}},open_in_new_window:{t:0,b:{t:2,i:[{t:3}],s:"Open in New Window"}},open_in_current_tab:{t:0,b:{t:2,i:[{t:3}],s:"Open in Current Tab"}},open_in_drawer:{t:0,b:{t:2,i:[{t:3}],s:"Open in Drawer"}},copy_video_link:{t:0,b:{t:2,i:[{t:3}],s:"Copy Video Link"}},copy_bv_number:{t:0,b:{t:2,i:[{t:3}],s:"Copy BV Number"}},copy_av_number:{t:0,b:{t:2,i:[{t:3}],s:"Copy AV Number"}},view_the_original_cover:{t:0,b:{t:2,i:[{t:3}],s:"View the Original Cover"}},follow_user:{t:0,b:{t:2,i:[{t:3}],s:"Follow User"}},unfollow_user:{t:0,b:{t:2,i:[{t:3}],s:"Unfollow User"}},block_user:{t:0,b:{t:2,i:[{t:3}],s:"Block User"}}},follow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:"Confirm Follow User"}},message:{t:0,b:{t:2,i:[{t:3,v:"Are you sure you want to follow "},{t:4,k:"name"},{t:3,v:"?"}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:"After following, you will see the latest content from this user."}}},unfollow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:"Confirm Unfollow User"}},message:{t:0,b:{t:2,i:[{t:3,v:"Are you sure you want to unfollow "},{t:4,k:"name"},{t:3,v:"?"}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:"After unfollowing, this user's content will no longer appear in your following list."}}},block_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:"Confirm Block User"}},message:{t:0,b:{t:2,i:[{t:3,v:"Are you sure you want to block "},{t:4,k:"name"},{t:3,v:"?"}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:"After blocking, you will not be able to see any content published by this user."}}},group_contribution:{t:0,b:{t:2,i:[{t:4,k:"firstAuthor"},{t:3,v:" and "},{t:4,k:"num"},{t:3,v:" others contributed"}]}},video_removed:{t:0,b:{t:2,i:[{t:3}],s:"Video removed"}}},home:{tell_us_why:{t:0,b:{t:2,i:[{t:3}],s:"Choose a reason why"}},not_interested_desc:{t:0,b:{t:2,i:[{t:3}],s:"You can use <kbd></kbd> and <kbd></kbd> to choose the reason, or using number keys to choose the reason directly, press <kbd>Enter</kbd> to confirm."}},for_you:{t:0,b:{t:2,i:[{t:3}],s:"For you"}},following:{t:0,b:{t:2,i:[{t:3}],s:"Following"}},trending:{t:0,b:{t:2,i:[{t:3}],s:"Trending"}},ranking:{t:0,b:{t:2,i:[{t:3}],s:"Ranking"}},subscribed_series:{t:0,b:{t:2,i:[{t:3}],s:"Subscribed Series"}},weekly:{t:0,b:{t:2,i:[{t:3}],s:"Weekly"}},precious:{t:0,b:{t:2,i:[{t:3}],s:"Must Watch"}},live:{t:0,b:{t:2,i:[{t:3}],s:"Live"}},moments:{t:0,b:{t:2,i:[{t:3}],s:"Moments"}},uploaders_with_updates:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"no uploader with updates"},{t:2,i:[{t:4,k:"count"},{t:3,v:" uploader with updates"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" uploaders with updates"}]}]}}},ranking:{all:{t:0,b:{t:2,i:[{t:3}],s:"All"}},original_content:{t:0,b:{t:2,i:[{t:3}],s:"Original Content"}},debut_work:{t:0,b:{t:2,i:[{t:3}],s:"Debut Work"}}},anime:{total_episodes:{t:0,b:{t:2,i:[{t:3,v:"EP "},{t:4,k:"ep"}]}},update_to_n_episodes:{t:0,b:{t:2,i:[{t:3,v:"Update to EP "},{t:4,k:"ep"}]}},your_watch_list:{t:0,b:{t:2,i:[{t:3}],s:"Your Watchlist"}},recommended_for_you:{t:0,b:{t:2,i:[{t:3}],s:"Recommended for you"}},havent_seen:{t:0,b:{t:2,i:[{t:3}],s:"Haven't seen"}},popular_anime:{t:0,b:{t:2,i:[{t:3}],s:"Popular Anime"}},follow:{t:0,b:{t:2,i:[{t:4,k:"num"},{t:3,v:" follow"}]}},anime_timetable:{title:{t:0,b:{t:2,i:[{t:3}],s:"Anime Timetable"}},days_of_week:{mon:{t:0,b:{t:2,i:[{t:3}],s:"MON"}},tue:{t:0,b:{t:2,i:[{t:3}],s:"TUE"}},wed:{t:0,b:{t:2,i:[{t:3}],s:"WED"}},thu:{t:0,b:{t:2,i:[{t:3}],s:"THU"}},fri:{t:0,b:{t:2,i:[{t:3}],s:"FRI"}},sat:{t:0,b:{t:2,i:[{t:3}],s:"SAT"}},sun:{t:0,b:{t:2,i:[{t:3}],s:"SUN"}}}}},history:{title:{t:0,b:{t:2,i:[{t:3}],s:"Watch History"}},search_watch_history:{t:0,b:{t:2,i:[{t:3}],s:"Search watch history"}},clear_all_watch_history:{t:0,b:{t:2,i:[{t:3}],s:"Clear all watch history"}},clear_all_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`Clear all watch history?
This operation cannot be reversed. Are you sure you want to clear all watch history?`}},pause_watch_history:{t:0,b:{t:2,i:[{t:3}],s:"Pause watch history"}},pause_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`Pause watch history?
Are you sure you want to pause watch history?`}},turn_on_watch_history:{t:0,b:{t:2,i:[{t:3}],s:"Turn on watch history"}},turn_on_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:"Turn on watch history? Are you sure you want to turn on watch history?"}}},favorites:{unfavorite:{t:0,b:{t:2,i:[{t:3}],s:"Unfavorite"}},unfavorite_confirm:{t:0,b:{t:2,i:[{t:3}],s:`Remove selected video(s)?
This operation cannot be reversed. Are you sure you want to remove the selected video(s) from your favorites?`}},global_search_hint:{t:0,b:{t:2,i:[{t:3}],s:"Search for all favorites"}},global_search_placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Search all favorites"}},search_all_folders:{t:0,b:{t:2,i:[{t:3}],s:"all"}},search_current_folder:{t:0,b:{t:2,i:[{t:3}],s:"current"}},search_placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Search for current favorites"}}},watch_later:{title:{t:0,b:{t:2,i:[{t:3}],s:"Watch Later"}},clear_all:{t:0,b:{t:2,i:[{t:3}],s:"Clear all watch later"}},clear_all_confirm:{t:0,b:{t:2,i:[{t:3}],s:`Clear all watch later?
This operation cannot be reversed. Are you sure you want to clear all watch later?`}},remove_watched_videos:{t:0,b:{t:2,i:[{t:3}],s:"Remove watched videos"}},remove_watched_videos_confirm:{t:0,b:{t:2,i:[{t:3}],s:`Remove watched videos?
This operation cannot be reversed. Are you sure you want to remove watched videos?`}},play_video:{t:0,b:{t:2,i:[{t:3}],s:"Remove and open video page"}},play_in_watch_later:{t:0,b:{t:2,i:[{t:3}],s:"Playlist"}},remove_from_watch_later:{t:0,b:{t:2,i:[{t:3}],s:"Remove"}}},search_bar:{history_title:{t:0,b:{t:2,i:[{t:3}],s:"Search History"}},hot_search_title:{t:0,b:{t:2,i:[{t:3}],s:"Hot Search"}},clear_history:{t:0,b:{t:2,i:[{t:3}],s:"Clear search history"}}},search_page:{hot_search_ranking:{t:0,b:{t:2,i:[{t:3}],s:"Hot Search Ranking"}},loading:{t:0,b:{t:2,i:[{t:3}],s:"Loading..."}},no_hot_search_data:{t:0,b:{t:2,i:[{t:3}],s:"No hot search data available"}},view_all_esports:{t:0,b:{t:2,i:[{t:3}],s:"View All Esports"}}}}},{jyut:{common:{view_all:{t:0,b:{t:2,i:[{t:3}],s:""}},play_all:{t:0,b:{t:2,i:[{t:3}],s:""}},loading:{t:0,b:{t:2,i:[{t:3}],s:"..."}},search:{t:0,b:{t:2,i:[{t:3}],s:""}},undo:{t:0,b:{t:2,i:[{t:3}],s:""}},days:{t:0,b:{t:2,i:[{t:3}],s:""}},view:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:""}]}},viewWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},danmaku:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" "}]}},danmakuWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},like:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" "}]}},likeWithoutNum:{t:0,b:{t:2,i:[{t:3}],s:""}},anime_follow_count:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:""}]}},year:{t:0,b:{t:2,i:[{t:3}],s:""}},month:{t:0,b:{t:2,i:[{t:3}],s:""}},week:{t:0,b:{t:2,i:[{t:3}],s:""}},day:{t:0,b:{t:2,i:[{t:3}],s:""}},hour:{t:0,b:{t:2,i:[{t:3}],s:""}},minute:{t:0,b:{t:2,i:[{t:3}],s:""}},second:{t:0,b:{t:2,i:[{t:3}],s:""}},yesterday:{t:0,b:{t:2,i:[{t:3}],s:""}},just_now:{t:0,b:{t:2,i:[{t:3}],s:""}},please_log_in_first:{t:0,b:{t:2,i:[{t:3}],s:""}},login:{t:0,b:{t:2,i:[{t:3}],s:""}},save_to_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},added:{t:0,b:{t:2,i:[{t:3}],s:""}},performance_impact_warn:{t:0,b:{t:2,i:[{t:3}],s:""}},no_data:{t:0,b:{t:2,i:[{t:3}],s:""}},no_more_content:{t:0,b:{t:2,i:[{t:3}],s:""}},operation:{add:{t:0,b:{t:2,i:[{t:3}],s:""}},edit:{t:0,b:{t:2,i:[{t:3}],s:""}},delete:{t:0,b:{t:2,i:[{t:3}],s:""}},confirm:{t:0,b:{t:2,i:[{t:3}],s:""}},cancel:{t:0,b:{t:2,i:[{t:3}],s:""}},enable:{t:0,b:{t:2,i:[{t:3}],s:""}},disable:{t:0,b:{t:2,i:[{t:3}],s:""}},refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},reset:{t:0,b:{t:2,i:[{t:3}],s:""}},import:{t:0,b:{t:2,i:[{t:3}],s:""}},export:{t:0,b:{t:2,i:[{t:3}],s:""}},undo_refresh:{t:0,b:{t:2,i:[{t:3}],s:""}},remove:{t:0,b:{t:2,i:[{t:3}],s:""}}},table:{index:{t:0,b:{t:2,i:[{t:3}],s:""}},title:{t:0,b:{t:2,i:[{t:3}],s:""}},name:{t:0,b:{t:2,i:[{t:3}],s:""}},remark:{t:0,b:{t:2,i:[{t:3}],s:""}},operations:{t:0,b:{t:2,i:[{t:3}],s:""}}},position:{left:{t:0,b:{t:2,i:[{t:3}],s:""}},right:{t:0,b:{t:2,i:[{t:3}],s:""}},top:{t:0,b:{t:2,i:[{t:3}],s:""}},bottom:{t:0,b:{t:2,i:[{t:3}],s:""}}}},iframe_drawer:{open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},close:{t:0,b:{t:2,i:[{t:3}],s:""}},press_esc_again_to_close:{t:0,b:{t:2,i:[{t:3}],s:" Esc "}}},settings:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_plugin_components_and_pages:{t:0,b:{t:2,i:[{t:3}],s:"BewlyCat"}},menu_bilibili_features_enhancement:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili"}},menu_appearance:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_compatibility:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_about:{t:0,b:{t:2,i:[{t:3}],s:""}},menu_changelog:{t:0,b:{t:2,i:[{t:3}],s:""}},experimental:{t:0,b:{t:2,i:[{t:3}],s:""}},plugin:{general:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_and_sidebar:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},search:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_balance:{t:0,b:{t:2,i:[{t:3}],s:""}}},bilibili_features:{comments:{t:0,b:{t:2,i:[{t:3}],s:""}},video_playback:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},vip_features:{t:0,b:{t:2,i:[{t:3}],s:""}},vip_features_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}}},changelog_placeholder:{t:0,b:{t:2,i:[{t:3}],s:""}},group_common:{t:0,b:{t:2,i:[{t:3}],s:""}},group_language:{t:0,b:{t:2,i:[{t:3}],s:""}},group_ad_blocking:{t:0,b:{t:2,i:[{t:3}],s:""}},group_comments:{t:0,b:{t:2,i:[{t:3}],s:""}},group_languages_and_fonts:{t:0,b:{t:2,i:[{t:3}],s:""}},group_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},group_video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},group_performance:{t:0,b:{t:2,i:[{t:3}],s:""}},group_player_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},group_player_components:{t:0,b:{t:2,i:[{t:3}],s:""}},group_playback_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},group_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},group_random_play:{t:0,b:{t:2,i:[{t:3}],s:""}},group_topbar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_navigation:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},group_dock:{t:0,b:{t:2,i:[{t:3}],s:"Dock"}},group_sidebar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_sidebar_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},group_color:{t:0,b:{t:2,i:[{t:3}],s:""}},group_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},group_logo:{t:0,b:{t:2,i:[{t:3}],s:"LOGO"}},group_search_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},group_hot_search:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_filters:{t:0,b:{t:2,i:[{t:3}],s:""}},group_recommendation_filters_desc:{t:0,b:{t:2,i:[{t:3}],s:`BIP!
`}},group_following:{t:0,b:{t:2,i:[{t:3}],s:""}},group_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},group_home_tabs:{t:0,b:{t:2,i:[{t:3}],s:""}},group_home_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},btn:{authorize:{t:0,b:{t:2,i:[{t:3}],s:""}},revoke:{t:0,b:{t:2,i:[{t:3}],s:""}},open_settings:{t:0,b:{t:2,i:[{t:3}],s:"..."}}},touch_screen_optimization:{t:0,b:{t:2,i:[{t:3}],s:""}},touch_screen_optimization_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},show_home_button_in_touch_mode:{t:0,b:{t:2,i:[{t:3}],s:" Home "}},show_home_button_in_touch_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},chk_box:{show:{t:0,b:{t:2,i:[{t:3}],s:""}},hidden:{t:0,b:{t:2,i:[{t:3}],s:""}}},enable_grid_layout_switcher:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_horizontal_scrolling:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_horizontal_scrolling_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},select_language:{t:0,b:{t:2,i:[{t:3}],s:""}},select_language_opt:{english:{t:0,b:{t:2,i:[{t:3}],s:""}},mandarin_cn:{t:0,b:{t:2,i:[{t:3}],s:" - "}},mandarin_tw:{t:0,b:{t:2,i:[{t:3}],s:" - "}},jyut:{t:0,b:{t:2,i:[{t:3}],s:""}}},customize_font:{t:0,b:{t:2,i:[{t:3}],s:""}},customize_font_opt:{default:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili "}},recommend:{t:0,b:{t:2,i:[{t:3}],s:""}},custom:{t:0,b:{t:2,i:[{t:3}],s:""}}},customize_font_desc:{t:0,b:{t:2,i:[{t:3}],s:` <a class="link" href="https://github.com/GuiWonder/Shanggu" target="_blank">Shanggu Fonts ()</a>  <a class="link" href="https://github.com/ayaka14732/FanWunHak" target="_blank">Fan Wun Hak ()</a>
/
`}},override_danmaku_font:{t:0,b:{t:2,i:[{t:3}],s:""}},override_danmaku_font_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},remove_the_indent_from_chinese_punctuation:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_the_indent_from_chinese_punctuation_desc:{t:0,b:{t:2,i:[{t:3}],s:`Bilibili 
`}},enable_frosted_glass:{t:0,b:{t:2,i:[{t:3}],s:""}},frosted_glass_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:""}},disable_shadow:{t:0,b:{t:2,i:[{t:3}],s:""}},link_opening_behavior_opt:{current_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},current_tab_if_not_homepage:{t:0,b:{t:2,i:[{t:3}],s:""}},new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},background:{t:0,b:{t:2,i:[{t:3}],s:""}}},top_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},search_bar_link_opening_behavior:{t:0,b:{t:2,i:[{t:3}],s:""}},close_drawer_without_pressing_esc_again:{t:0,b:{t:2,i:[{t:3}],s:" <kbd>Esc</kbd>"}},block_ads:{t:0,b:{t:2,i:[{t:3}],s:""}},block_top_search_page_ads:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},group_video_card_grid:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_breakpoints:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_breakpoints_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_min_width:{t:0,b:{t:2,i:[{t:3}],s:" "}},grid_columns:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_columns_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},grid_add_breakpoint:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_auto_size:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_auto_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},home_adaptive_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_title_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_title_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_author_font_size:{t:0,b:{t:2,i:[{t:3}],s:"UP "}},video_card_author_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:" UP "}},video_card_meta_font_size:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_meta_font_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_curve_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_height:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_height_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_shadow_reset:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_card_layout_option:{modern:{t:0,b:{t:2,i:[{t:3}],s:""}},old:{t:0,b:{t:2,i:[{t:3}],s:""}}},font_size_option:{xs:{t:0,b:{t:2,i:[{t:3}],s:""}},sm:{t:0,b:{t:2,i:[{t:3}],s:""}},base:{t:0,b:{t:2,i:[{t:3}],s:""}},lg:{t:0,b:{t:2,i:[{t:3}],s:""}}},block_top_search_page_ads_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},enable_video_preview:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_video_ctrl_bar_on_video_card:{t:0,b:{t:2,i:[{t:3}],s:""}},hover_video_card_delayed:{t:0,b:{t:2,i:[{t:3}],s:""}},show_video_card_recommend_tag:{t:0,b:{t:2,i:[{t:3}],s:""}},show_video_card_recommend_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_hide_top_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},always_use_transparent_top_bar:{t:0,b:{t:2,i:[{t:3}],s:"()"}},show_top_bar_theme_color_gradient:{t:0,b:{t:2,i:[{t:3}],s:""}},show_bewly_or_bili_top_bar_switcher:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly/Bilibili "}},show_bewly_or_bili_page_switcher:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly/Bilibili "}},top_bar_icon_badges:{t:0,b:{t:2,i:[{t:3}],s:""}},top_bar_icon_badges_opt:{number:{t:0,b:{t:2,i:[{t:3}],s:""}},dot:{t:0,b:{t:2,i:[{t:3}],s:""}},none:{t:0,b:{t:2,i:[{t:3}],s:""}}},group_topbar_pinned_channels:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_desc:{t:0,b:{t:2,i:[{t:3}],s:" Logo "}},topbar_pinned_channels_title:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_hint:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_all_selected:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_empty:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_pinned_channels_order_tip:{t:0,b:{t:2,i:[{t:3}],s:""}},open_notifications_page_as_drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},always_use_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock"}},always_use_dock_desc:{t:0,b:{t:2,i:[{t:3}],s:"Dock  Dock "}},auto_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock"}},half_hide_dock:{t:0,b:{t:2,i:[{t:3}],s:" Dock"}},dock_position:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},dock_position_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_content_adjustment:{t:0,b:{t:2,i:[{t:3}],s:"Dock "}},dock_content_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},dock_item_open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},dock_item_use_original_bili_web_page:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},disable_dock_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:" Dock "}},disable_light_dark_mode_switcher:{t:0,b:{t:2,i:[{t:3}],s:" / "}},back_to_top_and_refresh_buttons_are_separated:{t:0,b:{t:2,i:[{t:3}],s:""}},sidebar_position:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_hide_sidebar:{t:0,b:{t:2,i:[{t:3}],s:""}},theme:{t:0,b:{t:2,i:[{t:3}],s:""}},theme_opt:{light:{t:0,b:{t:2,i:[{t:3}],s:""}},dark:{t:0,b:{t:2,i:[{t:3}],s:""}},auto:{t:0,b:{t:2,i:[{t:3}],s:""}}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:""}},gradient_theme_color_background:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:": "}},wallpaper_mode_opt:{build_in:{t:0,b:{t:2,i:[{t:3}],s:""}},by_url:{t:0,b:{t:2,i:[{t:3}],s:""}}},choose_ur_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},image_url:{t:0,b:{t:2,i:[{t:3}],s:""}},image_url_hint:{t:0,b:{t:2,i:[{t:3}],s:`: https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/rocky-mountain-cloudscape.jpg
https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/green-white-mountains.jpg
`}},enable_wallpaper_masking:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_cache_time:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_cache_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"URL()0,"}},no_cache:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_mask_opacity:{t:0,b:{t:2,i:[{t:3}],s:""}},wallpaper_blur_intensity:{t:0,b:{t:2,i:[{t:3}],s:""}},customize_css:{t:0,b:{t:2,i:[{t:3}],s:" CSS"}},customize_css_desc:{t:0,b:{t:2,i:[{t:3}],s:` CSS CSS
 CSS  BewlyBewly`}},logo_color:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},logo_color_opt:{white:{t:0,b:{t:2,i:[{t:3}],s:""}},theme_color:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_results_pagination_mode_opt:{scroll:{t:0,b:{t:2,i:[{t:3}],s:""}},pagination:{t:0,b:{t:2,i:[{t:3}],s:""}}},enable_logo_glowing_effect:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},logo_visibility:{t:0,b:{t:2,i:[{t:3}],s:"Logo "}},bg_darkens_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:""}},bg_blurs_when_the_search_bar_is_focused:{t:0,b:{t:2,i:[{t:3}],s:""}},choose_search_bar_focused_character:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_top_bar:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_top_bar_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_search_page:{t:0,b:{t:2,i:[{t:3}],s:""}},show_hot_search_in_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},show_search_recommendation:{t:0,b:{t:2,i:[{t:3}],s:""}},show_search_recommendation_desc:{t:0,b:{t:2,i:[{t:3}],s:","}},individually_set_search_page_wallpaper:{t:0,b:{t:2,i:[{t:3}],s:""}},recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:` BewlyBewly  access key
`}},auto_switch_recommendation_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_switch_recommendation_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:`
`}},authorize_app:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly  access key"}},authorize_app_desc:{t:0,b:{t:2,i:[{t:3}],s:` bilibili  key  access key
`}},authorize_app_more_info_access_key:{t:0,b:{t:2,i:[{t:3}],s:" access key"}},scan_qrcode_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili  scan  QR code  access key"}},disable_filters_for_followed_users:{t:0,b:{t:2,i:[{t:3}],s:"Follow "}},disable_filters_for_followed_users_desc:{t:0,b:{t:2,i:[{t:3}],s:` Follow 
`}},filter_out_vertical_videos:{t:0,b:{t:2,i:[{t:3}],s:" app "}},filter_by_view_count:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_view_count_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_view_count_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_duration_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_publish_time:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_publish_time_desc:{t:0,b:{t:2,i:[{t:3}],s:" Web  7 "}},filter_by_publish_time_unit:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_item_already_exist:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_title:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_title_desc:{t:0,b:{t:2,i:[{t:3}],s:` <code>/abc&#124;\\d+/</code>  <code>/</code> 
<br/>
 <kbd>Enter</kbd> 
 <kbd>Esc</kbd> 

`}},filter_by_user:{t:0,b:{t:2,i:[{t:3}],s:""}},filter_by_user_desc:{t:0,b:{t:2,i:[{t:3}],s:` po  MID  <code>/abc&#124;\\d+/</code>  <code>/</code> 
<br/>
 <kbd>Enter</kbd> 
 <kbd>Esc</kbd> 

`}},filter_by_user_table:{username_or_mid:{t:0,b:{t:2,i:[{t:3}],s:" / MID"}}},following_tab_show_livestreaming_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_charging_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_charging_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_dynamic_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},following_filter_dynamic_videos_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_following_new_layout:{t:0,b:{t:2,i:[{t:3}],s:""}},use_following_new_layout_desc:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},following_inactive_days:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},following_inactive_days_desc:{t:0,b:{t:2,i:[{t:3}],s:"UPALLUP"}},preserve_for_you_state:{t:0,b:{t:2,i:[{t:3}],s:""}},preserve_for_you_state_desc:{t:0,b:{t:2,i:[{t:3}],s:"dock"}},use_search_page_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},settings_shared_with_the_search_page:{t:0,b:{t:2,i:[{t:3}],s:""}},settings_shared_with_the_search_page_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},search_page_mode_wallpaper_fixed:{t:0,b:{t:2,i:[{t:3}],s:""}},home_tabs_adjustment:{t:0,b:{t:2,i:[{t:3}],s:""}},home_tabs_adjustment_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},always_show_tabs_on_home_page:{t:0,b:{t:2,i:[{t:3}],s:""}},topbar_visibility:{t:0,b:{t:2,i:[{t:3}],s:"BewlyBewly "}},topbar_visibility_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved  BewlyBewly "}},use_original_bilibili_homepage:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},use_original_bilibili_homepage_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_original_bilibili_topbar:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili "}},adapt_to_other_page_styles:{t:0,b:{t:2,i:[{t:3}],s:""}},adapt_to_other_page_styles_desc:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly "}},follow_bilibili_evolved_color:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved "}},follow_bilibili_evolved_color_desc:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili Evolved "}},links:{t:0,b:{t:2,i:[{t:3}],s:""}},import_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},export_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},export_settings_desc:{t:0,b:{t:2,i:[{t:3}],s:" access key"}},reset_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_settings_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},contributors:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_page_top_bar_config_opt:{alwaysShow:{t:0,b:{t:2,i:[{t:3}],s:""}},alwaysHide:{t:0,b:{t:2,i:[{t:3}],s:""}},showOnMouse:{t:0,b:{t:2,i:[{t:3}],s:""}},showOnScroll:{t:0,b:{t:2,i:[{t:3}],s:""}}},clean_url_argument:{t:0,b:{t:2,i:[{t:3}],s:" URL "}},clean_url_argument_desc:{t:0,b:{t:2,i:[{t:3}],s:" URL "}},keep_collection_video_default_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},keep_collection_video_default_mode_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_on_end:{t:0,b:{t:2,i:[{t:3}],s:"/"}},auto_exit_fullscreen_on_end_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_exclude_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_exit_fullscreen_exclude_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},use_bilibili_default_auto_play:{t:0,b:{t:2,i:[{t:3}],s:"B"}},use_bilibili_default_auto_play_desc:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_play_mode_default:{t:0,b:{t:2,i:[{t:3}],s:"B"}},auto_play_mode_auto_play:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_mode_auto_play_with_recommend:{t:0,b:{t:2,i:[{t:3}],s:"()"}},auto_play_mode_pause_at_end:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_mode_loop:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_multipart:{t:0,b:{t:2,i:[{t:3}],s:"P"}},auto_play_multipart_desc:{t:0,b:{t:2,i:[{t:3}],s:"P"}},auto_play_collection:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_collection_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_recommend:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_recommend_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_playlist:{t:0,b:{t:2,i:[{t:3}],s:""}},auto_play_playlist_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_settings_sync:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_settings_sync_desc:{t:0,b:{t:2,i:[{t:3}],s:" ()"}},enable_undo_refresh_button:{t:0,b:{t:2,i:[{t:3}],s:" Web "}},enable_undo_refresh_button_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},shortcuts:{caption:{t:0,b:{t:2,i:[{t:3}],s:""}},caption_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},clock_time:{t:0,b:{t:2,i:[{t:3}],s:""}},clock_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},danmu_status:{t:0,b:{t:2,i:[{t:3}],s:""}},danmu_status_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},decrease_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_all_shortcuts_toggle:{t:0,b:{t:2,i:[{t:3}],s:""}},enable_all_shortcuts_toggle_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},group:{fullscreen_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},general:{t:0,b:{t:2,i:[{t:3}],s:""}},global_actions:{t:0,b:{t:2,i:[{t:3}],s:""}},official_bilibili:{t:0,b:{t:2,i:[{t:3}],s:"bilibili "}},homepage:{t:0,b:{static:"",t:2,i:[]}}},increase_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},increase_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},item:{cancel_edit:{t:0,b:{t:2,i:[{t:3}],s:""}},edit_key:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_default:{t:0,b:{t:2,i:[{t:3}],s:""}}},long_step_backward:{t:0,b:{t:2,i:[{t:3}],s:""}},long_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:" 30 "}},long_step_forward:{t:0,b:{t:2,i:[{t:3}],s:""}},long_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:" 30 "}},next_frame:{t:0,b:{t:2,i:[{t:3}],s:""}},next_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video_ext:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},official:{backward:{t:0,b:{t:2,i:[{t:3}],s:" 5 "}},danmu_toggle:{t:0,b:{t:2,i:[{t:3}],s:""}},exit_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},forward:{t:0,b:{t:2,i:[{t:3}],s:" 5 "}},fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},input_danmu:{t:0,b:{t:2,i:[{t:3}],s:""}},mute:{t:0,b:{t:2,i:[{t:3}],s:""}},next_video:{t:0,b:{t:2,i:[{t:3}],s:""}},play_pause:{t:0,b:{t:2,i:[{t:3}],s:"/"}},prev_video:{t:0,b:{t:2,i:[{t:3}],s:""}},speed_1:{t:0,b:{t:2,i:[{t:3}],s:" 1 "}},speed_2:{t:0,b:{t:2,i:[{t:3}],s:" 2 "}},volume_down:{t:0,b:{t:2,i:[{t:3}],s:""}},volume_up:{t:0,b:{t:2,i:[{t:3}],s:""}}},pip:{t:0,b:{t:2,i:[{t:3}],s:""}},pip_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},play_pause_ext:{t:0,b:{t:2,i:[{t:3}],s:"/"}},play_pause_ext_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},press_keys:{t:0,b:{t:2,i:[{t:3}],s:""}},previous_frame:{t:0,b:{t:2,i:[{t:3}],s:""}},previous_frame_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},replay:{t:0,b:{t:2,i:[{t:3}],s:""}},replay_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},toggle_follow:{t:0,b:{t:2,i:[{t:3}],s:"/"}},toggle_follow_desc:{t:0,b:{t:2,i:[{t:3}],s:"UP"}},reset_all_button:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_all_ext_shortcuts:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_playback_rate:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_playback_rate_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_video_size:{t:0,b:{t:2,i:[{t:3}],s:""}},reset_video_size_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_backward:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_backward_desc:{t:0,b:{t:2,i:[{t:3}],s:" 5 "}},short_step_forward:{t:0,b:{t:2,i:[{t:3}],s:""}},short_step_forward_desc:{t:0,b:{t:2,i:[{t:3}],s:" 5 "}},title:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_off_light:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_off_light_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_time:{t:0,b:{t:2,i:[{t:3}],s:""}},video_time_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},video_title:{t:0,b:{t:2,i:[{t:3}],s:""}},video_title_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen_desc:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_default_player_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_danmaku_default_state_opt:{system:{t:0,b:{t:2,i:[{t:3}],s:""}},on:{t:0,b:{t:2,i:[{t:3}],s:""}},off:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_player_mode:{default:{t:0,b:{t:2,i:[{t:3}],s:""}},web_fullscreen:{t:0,b:{t:2,i:[{t:3}],s:""}},widescreen:{t:0,b:{t:2,i:[{t:3}],s:""}}},show_ip_location:{t:0,b:{t:2,i:[{t:3}],s:" IP "}},show_ip_location_desc:{t:0,b:{t:2,i:[{t:3}],s:"/ IP "}},show_sex:{t:0,b:{t:2,i:[{t:3}],s:""}},show_sex_desc:{t:0,b:{t:2,i:[{t:3}],s:"/"}},show_comment_host_tag:{t:0,b:{t:2,i:[{t:3}],s:""}},show_comment_host_tag_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},video_player_scroll:{t:0,b:{t:2,i:[{t:3}],s:""}},video_player_scroll_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},enlarge_favorite_dialog:{t:0,b:{t:2,i:[{t:3}],s:""}},enlarge_favorite_dialog_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},external_watch_later_button:{t:0,b:{t:2,i:[{t:3}],s:""}},external_watch_later_button_desc:{t:0,b:{t:2,i:[{t:3}],s:""}},group_fonts:{t:0,b:{static:"",t:2,i:[]}},group_visual_effects:{t:0,b:{static:"",t:2,i:[]}}},auth:{auth_access_key_first:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly  access key"}}},topbar:{switch_to_bewly_top_bar:{t:0,b:{t:2,i:[{t:3}],s:" BewlyBewly "}},switch_to_bili_top_bar:{t:0,b:{t:2,i:[{t:3}],s:" Bilibili/Bilibili-Evolved "}},sign_in:{t:0,b:{t:2,i:[{t:3}],s:""}},notifications:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},favorites:{t:0,b:{t:2,i:[{t:3}],s:""}},history:{t:0,b:{t:2,i:[{t:3}],s:""}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},creative_center:{t:0,b:{t:2,i:[{t:3}],s:""}},upload:{t:0,b:{t:2,i:[{t:3}],s:"Po "}},logo_dropdown:{anime:{t:0,b:{t:2,i:[{t:3}],s:""}},movies:{t:0,b:{t:2,i:[{t:3}],s:""}},chinese_anime:{t:0,b:{t:2,i:[{t:3}],s:""}},tv_shows:{t:0,b:{t:2,i:[{t:3}],s:""}},variety_shows:{t:0,b:{t:2,i:[{t:3}],s:""}},documentary_films:{t:0,b:{t:2,i:[{t:3}],s:""}},animations:{t:0,b:{t:2,i:[{t:3}],s:""}},gaming:{t:0,b:{t:2,i:[{t:3}],s:""}},kichiku:{t:0,b:{t:2,i:[{t:3}],s:""}},music:{t:0,b:{t:2,i:[{t:3}],s:""}},dance:{t:0,b:{t:2,i:[{t:3}],s:""}},cinephile:{t:0,b:{t:2,i:[{t:3}],s:""}},showbiz:{t:0,b:{t:2,i:[{t:3}],s:""}},knowledge:{t:0,b:{t:2,i:[{t:3}],s:""}},technology:{t:0,b:{t:2,i:[{t:3}],s:""}},news:{t:0,b:{t:2,i:[{t:3}],s:""}},foods:{t:0,b:{t:2,i:[{t:3}],s:""}},cars:{t:0,b:{t:2,i:[{t:3}],s:""}},fashion:{t:0,b:{t:2,i:[{t:3}],s:""}},sports:{t:0,b:{t:2,i:[{t:3}],s:""}},animals:{t:0,b:{t:2,i:[{t:3}],s:""}},vlog:{t:0,b:{t:2,i:[{t:3}],s:"VLOG"}},charitable_events:{t:0,b:{t:2,i:[{t:3}],s:""}},articles:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},activities:{t:0,b:{t:2,i:[{t:3}],s:""}},paid_courses:{t:0,b:{t:2,i:[{t:3}],s:""}},community:{t:0,b:{t:2,i:[{t:3}],s:""}},music_plus:{t:0,b:{t:2,i:[{t:3}],s:""}},game_center:{t:0,b:{t:2,i:[{t:3}],s:""}},comic_con_and_goods:{t:0,b:{t:2,i:[{t:3}],s:""}},manga:{t:0,b:{t:2,i:[{t:3}],s:""}},game_competitions:{t:0,b:{t:2,i:[{t:3}],s:""}},ai:{t:0,b:{t:2,i:[{t:3}],s:"AI"}},emotion:{t:0,b:{t:2,i:[{t:3}],s:""}},gym:{t:0,b:{t:2,i:[{t:3}],s:""}},handmake:{t:0,b:{t:2,i:[{t:3}],s:""}},health:{t:0,b:{t:2,i:[{t:3}],s:""}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},life_experience:{t:0,b:{t:2,i:[{t:3}],s:""}},life_joy:{t:0,b:{t:2,i:[{t:3}],s:""}},outdoors:{t:0,b:{t:2,i:[{t:3}],s:""}},painting:{t:0,b:{t:2,i:[{t:3}],s:""}},parenting:{t:0,b:{t:2,i:[{t:3}],s:""}},rural:{t:0,b:{t:2,i:[{t:3}],s:""}},shortplay:{t:0,b:{t:2,i:[{t:3}],s:""}},travel:{t:0,b:{t:2,i:[{t:3}],s:""}}},user_dropdown:{money:{t:0,b:{t:2,i:[{t:3}],s:""}},b_coins:{t:0,b:{t:2,i:[{t:3}],s:"B"}},exp_desc:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"current_exp"},{t:3,v:" LV "},{t:4,k:"level"},{t:3,v:"  "},{t:4,k:"need_exp"}]}},following:{t:0,b:{t:2,i:[{t:3}],s:""}},followers:{t:0,b:{t:2,i:[{t:3}],s:""}},posts:{t:0,b:{t:2,i:[{t:3}],s:""}},bilibili_premium:{t:0,b:{t:2,i:[{t:3}],s:"Bilibili "}},account_settings:{t:0,b:{t:2,i:[{t:3}],s:""}},uploads_manager:{t:0,b:{t:2,i:[{t:3}],s:""}},b_coins_wallet:{t:0,b:{t:2,i:[{t:3}],s:"B"}},orders:{t:0,b:{t:2,i:[{t:3}],s:""}},workshop:{t:0,b:{t:2,i:[{t:3}],s:""}},my_stream_info:{t:0,b:{t:2,i:[{t:3}],s:""}},my_courses:{t:0,b:{t:2,i:[{t:3}],s:""}},log_out:{t:0,b:{t:2,i:[{t:3}],s:""}},bilibili_premium_rewards:{t:0,b:{t:2,i:[{t:3}],s:""}},last_login_time:{t:0,b:{t:2,i:[{t:3}],s:""}},last_login_location:{t:0,b:{t:2,i:[{t:3}],s:""}}},noti_dropdown:{replys:{t:0,b:{t:2,i:[{t:3}],s:""}},mentions:{t:0,b:{t:2,i:[{t:3}],s:""}},likes:{t:0,b:{t:2,i:[{t:3}],s:""}},messages:{t:0,b:{t:2,i:[{t:3}],s:""}},chats:{t:0,b:{t:2,i:[{t:3}],s:""}}},moments_dropdown:{tabs:{videos:{t:0,b:{t:2,i:[{t:3}],s:""}},all:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},articles:{t:0,b:{t:2,i:[{t:3}],s:""}}},uploaded:{t:0,b:{t:2,i:[{t:3}],s:"po "}},now_streaming:{t:0,b:{t:2,i:[{t:3}],s:" live"}},live_status:{t:0,b:{t:2,i:[{t:3}],s:"Live "}}},upload_dropdown:{article:{t:0,b:{t:2,i:[{t:3}],s:""}},music:{t:0,b:{t:2,i:[{t:3}],s:""}},sticker:{t:0,b:{t:2,i:[{t:3}],s:""}},video:{t:0,b:{t:2,i:[{t:3}],s:"Po "}},manager:{t:0,b:{t:2,i:[{t:3}],s:""}}}},dock:{search:{t:0,b:{t:2,i:[{t:3}],s:""}},home:{t:0,b:{t:2,i:[{t:3}],s:""}},anime:{t:0,b:{t:2,i:[{t:3}],s:""}},history:{t:0,b:{t:2,i:[{t:3}],s:""}},watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},favorites:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},dark_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},light_mode:{t:0,b:{t:2,i:[{t:3}],s:""}},settings:{t:0,b:{t:2,i:[{t:3}],s:""}}},video_card:{operation:{not_interested:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_new_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_background:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_new_window:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_current_tab:{t:0,b:{t:2,i:[{t:3}],s:""}},open_in_drawer:{t:0,b:{t:2,i:[{t:3}],s:""}},copy_video_link:{t:0,b:{t:2,i:[{t:3}],s:""}},copy_bv_number:{t:0,b:{t:2,i:[{t:3}],s:" BV "}},copy_av_number:{t:0,b:{t:2,i:[{t:3}],s:" AV "}},view_the_original_cover:{t:0,b:{t:2,i:[{t:3}],s:""}},follow_user:{t:0,b:{t:2,i:[{t:3}],s:""}},unfollow_user:{t:0,b:{t:2,i:[{t:3}],s:""}},block_user:{t:0,b:{t:2,i:[{t:3}],s:""}}},follow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},unfollow_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},block_user_confirm:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},message:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"name"},{t:3,v:" "}]}},warning:{t:0,b:{t:2,i:[{t:3}],s:""}}},group_contribution:{t:0,b:{t:2,i:[{t:4,k:"firstAuthor"},{t:3,v:"  "},{t:4,k:"num"},{t:3,v:" "}]}},video_removed:{t:0,b:{t:2,i:[{t:3}],s:""}}},home:{tell_us_why:{t:0,b:{t:2,i:[{t:3}],s:"..."}},not_interested_desc:{t:0,b:{t:2,i:[{t:3}],s:` <kbd></kbd>  <kbd></kbd>  <kbd>Enter</kbd> 
`}},for_you:{t:0,b:{t:2,i:[{t:3}],s:""}},following:{t:0,b:{t:2,i:[{t:3}],s:""}},trending:{t:0,b:{t:2,i:[{t:3}],s:" Hit"}},ranking:{t:0,b:{t:2,i:[{t:3}],s:""}},subscribed_series:{t:0,b:{t:2,i:[{t:3}],s:""}},weekly:{t:0,b:{t:2,i:[{t:3}],s:""}},precious:{t:0,b:{t:2,i:[{t:3}],s:""}},live:{t:0,b:{t:2,i:[{t:3}],s:""}},moments:{t:0,b:{t:2,i:[{t:3}],s:""}},uploaders_with_updates:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:"UP"}]}}},ranking:{all:{t:0,b:{t:2,i:[{t:3}],s:""}},original_content:{t:0,b:{t:2,i:[{t:3}],s:""}},debut_work:{t:0,b:{t:2,i:[{t:3}],s:""}}},anime:{total_episodes:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"ep"},{t:3,v:" "}]}},update_to_n_episodes:{t:0,b:{t:2,i:[{t:3,v:" "},{t:4,k:"ep"},{t:3,v:" "}]}},your_watch_list:{t:0,b:{t:2,i:[{t:3}],s:""}},recommended_for_you:{t:0,b:{t:2,i:[{t:3}],s:""}},havent_seen:{t:0,b:{t:2,i:[{t:3}],s:""}},popular_anime:{t:0,b:{t:2,i:[{t:3}],s:" Hit"}},follow:{t:0,b:{t:2,i:[{t:4,k:"num"},{t:3,v:""}]}},anime_timetable:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},days_of_week:{mon:{t:0,b:{t:2,i:[{t:3}],s:""}},tue:{t:0,b:{t:2,i:[{t:3}],s:""}},wed:{t:0,b:{t:2,i:[{t:3}],s:""}},thu:{t:0,b:{t:2,i:[{t:3}],s:""}},fri:{t:0,b:{t:2,i:[{t:3}],s:""}},sat:{t:0,b:{t:2,i:[{t:3}],s:""}},sun:{t:0,b:{t:2,i:[{t:3}],s:""}}}}},history:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_on_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},pause_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},pause_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},search_watch_history:{t:0,b:{t:2,i:[{t:3}],s:""}},turn_on_watch_history_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}}},favorites:{unfavorite:{t:0,b:{t:2,i:[{t:3}],s:""}},unfavorite_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}}},watch_later:{title:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_all_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},remove_watched_videos:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_watched_videos_confirm:{t:0,b:{t:2,i:[{t:3}],s:`
`}},play_video:{t:0,b:{t:2,i:[{t:3}],s:""}},play_in_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}},remove_from_watch_later:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_bar:{history_title:{t:0,b:{t:2,i:[{t:3}],s:""}},hot_search_title:{t:0,b:{t:2,i:[{t:3}],s:""}},clear_history:{t:0,b:{t:2,i:[{t:3}],s:""}}},search_page:{hot_search_ranking:{t:0,b:{t:2,i:[{t:3}],s:""}},loading:{t:0,b:{t:2,i:[{t:3}],s:"..."}},no_hot_search_data:{t:0,b:{t:2,i:[{t:3}],s:""}}}}});/*!
  * shared v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function mL(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const jf=typeof window<"u",Yo=(t,e=!1)=>e?Symbol.for(t):Symbol(t),gL=(t,e,i)=>vL({l:t,k:e,s:i}),vL=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Vi=t=>typeof t=="number"&&isFinite(t),_L=t=>Nm(t)==="[object Date]",Hf=t=>Nm(t)==="[object RegExp]",zf=t=>Gt(t)&&Object.keys(t).length===0,sn=Object.assign,bL=Object.create,ni=(t=null)=>bL(t);let R3;const Bm=()=>R3||(R3=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:ni());function P3(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function D3(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function yL(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(n,s,r)=>`${s}="${D3(r)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(n,s,r)=>`${s}='${D3(r)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(n=>{t=t.replace(n,"$1javascript&#58;")}),t}const wL=Object.prototype.hasOwnProperty;function ir(t,e){return wL.call(t,e)}const Bi=Array.isArray,Ei=t=>typeof t=="function",rt=t=>typeof t=="string",Si=t=>typeof t=="boolean",Xt=t=>t!==null&&typeof t=="object",EL=t=>Xt(t)&&Ei(t.then)&&Ei(t.catch),O3=Object.prototype.toString,Nm=t=>O3.call(t),Gt=t=>Nm(t)==="[object Object]",SL=t=>t==null?"":Bi(t)||Gt(t)&&t.toString===O3?JSON.stringify(t,null,2):String(t);function Um(t,e=""){return t.reduce((i,n,s)=>s===0?i+n:i+e+n,"")}const Gf=t=>!Xt(t)||Bi(t);function Wf(t,e){if(Gf(t)||Gf(e))throw new Error("Invalid value");const i=[{src:t,des:e}];for(;i.length;){const{src:n,des:s}=i.pop();Object.keys(n).forEach(r=>{r!=="__proto__"&&(Xt(n[r])&&!Xt(s[r])&&(s[r]=Array.isArray(n[r])?[]:ni()),Gf(s[r])||Gf(n[r])?s[r]=n[r]:i.push({src:n[r],des:s[r]}))})}}/*!
  * message-compiler v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function xL(t,e,i){return{line:t,column:e,offset:i}}function Vm(t,e,i){return{start:t,end:e}}const Jt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},TL=17;function Kf(t,e,i={}){const{domain:n,messages:s,args:r}=i,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=n,a}function AL(t){throw t}const ao=" ",kL="\r",jn=`
`,CL="\u2028",LL="\u2029";function IL(t){const e=t;let i=0,n=1,s=1,r=0;const o=A=>e[A]===kL&&e[A+1]===jn,a=A=>e[A]===jn,l=A=>e[A]===LL,u=A=>e[A]===CL,c=A=>o(A)||a(A)||l(A)||u(A),d=()=>i,f=()=>n,h=()=>s,p=()=>r,m=A=>o(A)||l(A)||u(A)?jn:e[A],g=()=>m(i),v=()=>m(i+r);function b(){return r=0,c(i)&&(n++,s=0),o(i)&&i++,i++,s++,e[i]}function _(){return o(i+r)&&r++,r++,e[i+r]}function y(){i=0,n=1,s=1,r=0}function E(A=0){r=A}function S(){const A=i+r;for(;A!==i;)b();r=0}return{index:d,line:f,column:h,peekOffset:p,charAt:m,currentChar:g,currentPeek:v,next:b,peek:_,reset:y,resetPeek:E,skipToPeek:S}}const Xo=void 0,RL=".",M3="'",PL="tokenizer";function DL(t,e={}){const i=e.location!==!1,n=IL(t),s=()=>n.index(),r=()=>xL(n.line(),n.column(),n.index()),o=r(),a=s(),l={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=e;function d(j,K,oe,...he){const ce=u();if(K.column+=oe,K.offset+=oe,c){const me=i?Vm(ce.startLoc,K):null,Q=Kf(j,me,{domain:PL,args:he});c(Q)}}function f(j,K,oe){j.endLoc=r(),j.currentType=K;const he={type:K};return i&&(he.loc=Vm(j.startLoc,j.endLoc)),oe!=null&&(he.value=oe),he}const h=j=>f(j,13);function p(j,K){return j.currentChar()===K?(j.next(),K):(d(Jt.EXPECTED_TOKEN,r(),0,K),"")}function m(j){let K="";for(;j.currentPeek()===ao||j.currentPeek()===jn;)K+=j.currentPeek(),j.peek();return K}function g(j){const K=m(j);return j.skipToPeek(),K}function v(j){if(j===Xo)return!1;const K=j.charCodeAt(0);return K>=97&&K<=122||K>=65&&K<=90||K===95}function b(j){if(j===Xo)return!1;const K=j.charCodeAt(0);return K>=48&&K<=57}function _(j,K){const{currentType:oe}=K;if(oe!==2)return!1;m(j);const he=v(j.currentPeek());return j.resetPeek(),he}function y(j,K){const{currentType:oe}=K;if(oe!==2)return!1;m(j);const he=j.currentPeek()==="-"?j.peek():j.currentPeek(),ce=b(he);return j.resetPeek(),ce}function E(j,K){const{currentType:oe}=K;if(oe!==2)return!1;m(j);const he=j.currentPeek()===M3;return j.resetPeek(),he}function S(j,K){const{currentType:oe}=K;if(oe!==7)return!1;m(j);const he=j.currentPeek()===".";return j.resetPeek(),he}function A(j,K){const{currentType:oe}=K;if(oe!==8)return!1;m(j);const he=v(j.currentPeek());return j.resetPeek(),he}function C(j,K){const{currentType:oe}=K;if(!(oe===7||oe===11))return!1;m(j);const he=j.currentPeek()===":";return j.resetPeek(),he}function T(j,K){const{currentType:oe}=K;if(oe!==9)return!1;const he=()=>{const me=j.currentPeek();return me==="{"?v(j.peek()):me==="@"||me==="|"||me===":"||me==="."||me===ao||!me?!1:me===jn?(j.peek(),he()):D(j,!1)},ce=he();return j.resetPeek(),ce}function I(j){m(j);const K=j.currentPeek()==="|";return j.resetPeek(),K}function D(j,K=!0){const oe=(ce=!1,me="")=>{const Q=j.currentPeek();return Q==="{"||Q==="@"||!Q?ce:Q==="|"?!(me===ao||me===jn):Q===ao?(j.peek(),oe(!0,ao)):Q===jn?(j.peek(),oe(!0,jn)):!0},he=oe();return K&&j.resetPeek(),he}function R(j,K){const oe=j.currentChar();return oe===Xo?Xo:K(oe)?(j.next(),oe):null}function O(j){const K=j.charCodeAt(0);return K>=97&&K<=122||K>=65&&K<=90||K>=48&&K<=57||K===95||K===36}function M(j){return R(j,O)}function U(j){const K=j.charCodeAt(0);return K>=97&&K<=122||K>=65&&K<=90||K>=48&&K<=57||K===95||K===36||K===45}function $(j){return R(j,U)}function B(j){const K=j.charCodeAt(0);return K>=48&&K<=57}function W(j){return R(j,B)}function te(j){const K=j.charCodeAt(0);return K>=48&&K<=57||K>=65&&K<=70||K>=97&&K<=102}function re(j){return R(j,te)}function q(j){let K="",oe="";for(;K=W(j);)oe+=K;return oe}function le(j){let K="";for(;;){const oe=j.currentChar();if(oe==="{"||oe==="}"||oe==="@"||oe==="|"||!oe)break;if(oe===ao||oe===jn)if(D(j))K+=oe,j.next();else{if(I(j))break;K+=oe,j.next()}else K+=oe,j.next()}return K}function be(j){g(j);let K="",oe="";for(;K=$(j);)oe+=K;return j.currentChar()===Xo&&d(Jt.UNTERMINATED_CLOSING_BRACE,r(),0),oe}function se(j){g(j);let K="";return j.currentChar()==="-"?(j.next(),K+=`-${q(j)}`):K+=q(j),j.currentChar()===Xo&&d(Jt.UNTERMINATED_CLOSING_BRACE,r(),0),K}function ne(j){return j!==M3&&j!==jn}function pe(j){g(j),p(j,"'");let K="",oe="";for(;K=R(j,ne);)K==="\\"?oe+=ye(j):oe+=K;const he=j.currentChar();return he===jn||he===Xo?(d(Jt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),he===jn&&(j.next(),p(j,"'")),oe):(p(j,"'"),oe)}function ye(j){const K=j.currentChar();switch(K){case"\\":case"'":return j.next(),`\\${K}`;case"u":return xe(j,K,4);case"U":return xe(j,K,6);default:return d(Jt.UNKNOWN_ESCAPE_SEQUENCE,r(),0,K),""}}function xe(j,K,oe){p(j,K);let he="";for(let ce=0;ce<oe;ce++){const me=re(j);if(!me){d(Jt.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${K}${he}${j.currentChar()}`);break}he+=me}return`\\${K}${he}`}function Be(j){return j!=="{"&&j!=="}"&&j!==ao&&j!==jn}function Ke(j){g(j);let K="",oe="";for(;K=R(j,Be);)oe+=K;return oe}function Xe(j){let K="",oe="";for(;K=M(j);)oe+=K;return oe}function Re(j){const K=oe=>{const he=j.currentChar();return he==="{"||he==="@"||he==="|"||he==="("||he===")"||!he||he===ao?oe:(oe+=he,j.next(),K(oe))};return K("")}function Z(j){g(j);const K=p(j,"|");return g(j),K}function ae(j,K){let oe=null;switch(j.currentChar()){case"{":return K.braceNest>=1&&d(Jt.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),j.next(),oe=f(K,2,"{"),g(j),K.braceNest++,oe;case"}":return K.braceNest>0&&K.currentType===2&&d(Jt.EMPTY_PLACEHOLDER,r(),0),j.next(),oe=f(K,3,"}"),K.braceNest--,K.braceNest>0&&g(j),K.inLinked&&K.braceNest===0&&(K.inLinked=!1),oe;case"@":return K.braceNest>0&&d(Jt.UNTERMINATED_CLOSING_BRACE,r(),0),oe=ie(j,K)||h(K),K.braceNest=0,oe;default:{let ce=!0,me=!0,Q=!0;if(I(j))return K.braceNest>0&&d(Jt.UNTERMINATED_CLOSING_BRACE,r(),0),oe=f(K,1,Z(j)),K.braceNest=0,K.inLinked=!1,oe;if(K.braceNest>0&&(K.currentType===4||K.currentType===5||K.currentType===6))return d(Jt.UNTERMINATED_CLOSING_BRACE,r(),0),K.braceNest=0,ue(j,K);if(ce=_(j,K))return oe=f(K,4,be(j)),g(j),oe;if(me=y(j,K))return oe=f(K,5,se(j)),g(j),oe;if(Q=E(j,K))return oe=f(K,6,pe(j)),g(j),oe;if(!ce&&!me&&!Q)return oe=f(K,12,Ke(j)),d(Jt.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,oe.value),g(j),oe;break}}return oe}function ie(j,K){const{currentType:oe}=K;let he=null;const ce=j.currentChar();switch((oe===7||oe===8||oe===11||oe===9)&&(ce===jn||ce===ao)&&d(Jt.INVALID_LINKED_FORMAT,r(),0),ce){case"@":return j.next(),he=f(K,7,"@"),K.inLinked=!0,he;case".":return g(j),j.next(),f(K,8,".");case":":return g(j),j.next(),f(K,9,":");default:return I(j)?(he=f(K,1,Z(j)),K.braceNest=0,K.inLinked=!1,he):S(j,K)||C(j,K)?(g(j),ie(j,K)):A(j,K)?(g(j),f(K,11,Xe(j))):T(j,K)?(g(j),ce==="{"?ae(j,K)||he:f(K,10,Re(j))):(oe===7&&d(Jt.INVALID_LINKED_FORMAT,r(),0),K.braceNest=0,K.inLinked=!1,ue(j,K))}}function ue(j,K){let oe={type:13};if(K.braceNest>0)return ae(j,K)||h(K);if(K.inLinked)return ie(j,K)||h(K);switch(j.currentChar()){case"{":return ae(j,K)||h(K);case"}":return d(Jt.UNBALANCED_CLOSING_BRACE,r(),0),j.next(),f(K,3,"}");case"@":return ie(j,K)||h(K);default:{if(I(j))return oe=f(K,1,Z(j)),K.braceNest=0,K.inLinked=!1,oe;if(D(j))return f(K,0,le(j));break}}return oe}function ve(){const{currentType:j,offset:K,startLoc:oe,endLoc:he}=l;return l.lastType=j,l.lastOffset=K,l.lastStartLoc=oe,l.lastEndLoc=he,l.offset=s(),l.startLoc=r(),n.currentChar()===Xo?f(l,13):ue(n,l)}return{nextToken:ve,currentOffset:s,currentPosition:r,context:u}}const OL="parser",ML=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function $L(t,e,i){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(e||i,16);return n<=55295||n>=57344?String.fromCodePoint(n):""}}}function FL(t={}){const e=t.location!==!1,{onError:i}=t;function n(v,b,_,y,...E){const S=v.currentPosition();if(S.offset+=y,S.column+=y,i){const A=e?Vm(_,S):null,C=Kf(b,A,{domain:OL,args:E});i(C)}}function s(v,b,_){const y={type:v};return e&&(y.start=b,y.end=b,y.loc={start:_,end:_}),y}function r(v,b,_,y){e&&(v.end=b,v.loc&&(v.loc.end=_))}function o(v,b){const _=v.context(),y=s(3,_.offset,_.startLoc);return y.value=b,r(y,v.currentOffset(),v.currentPosition()),y}function a(v,b){const _=v.context(),{lastOffset:y,lastStartLoc:E}=_,S=s(5,y,E);return S.index=parseInt(b,10),v.nextToken(),r(S,v.currentOffset(),v.currentPosition()),S}function l(v,b){const _=v.context(),{lastOffset:y,lastStartLoc:E}=_,S=s(4,y,E);return S.key=b,v.nextToken(),r(S,v.currentOffset(),v.currentPosition()),S}function u(v,b){const _=v.context(),{lastOffset:y,lastStartLoc:E}=_,S=s(9,y,E);return S.value=b.replace(ML,$L),v.nextToken(),r(S,v.currentOffset(),v.currentPosition()),S}function c(v){const b=v.nextToken(),_=v.context(),{lastOffset:y,lastStartLoc:E}=_,S=s(8,y,E);return b.type!==11?(n(v,Jt.UNEXPECTED_EMPTY_LINKED_MODIFIER,_.lastStartLoc,0),S.value="",r(S,y,E),{nextConsumeToken:b,node:S}):(b.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,Cr(b)),S.value=b.value||"",r(S,v.currentOffset(),v.currentPosition()),{node:S})}function d(v,b){const _=v.context(),y=s(7,_.offset,_.startLoc);return y.value=b,r(y,v.currentOffset(),v.currentPosition()),y}function f(v){const b=v.context(),_=s(6,b.offset,b.startLoc);let y=v.nextToken();if(y.type===8){const E=c(v);_.modifier=E.node,y=E.nextConsumeToken||v.nextToken()}switch(y.type!==9&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(y)),y=v.nextToken(),y.type===2&&(y=v.nextToken()),y.type){case 10:y.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(y)),_.key=d(v,y.value||"");break;case 4:y.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(y)),_.key=l(v,y.value||"");break;case 5:y.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(y)),_.key=a(v,y.value||"");break;case 6:y.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(y)),_.key=u(v,y.value||"");break;default:{n(v,Jt.UNEXPECTED_EMPTY_LINKED_KEY,b.lastStartLoc,0);const E=v.context(),S=s(7,E.offset,E.startLoc);return S.value="",r(S,E.offset,E.startLoc),_.key=S,r(_,E.offset,E.startLoc),{nextConsumeToken:y,node:_}}}return r(_,v.currentOffset(),v.currentPosition()),{node:_}}function h(v){const b=v.context(),_=b.currentType===1?v.currentOffset():b.offset,y=b.currentType===1?b.endLoc:b.startLoc,E=s(2,_,y);E.items=[];let S=null;do{const T=S||v.nextToken();switch(S=null,T.type){case 0:T.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(T)),E.items.push(o(v,T.value||""));break;case 5:T.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(T)),E.items.push(a(v,T.value||""));break;case 4:T.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(T)),E.items.push(l(v,T.value||""));break;case 6:T.value==null&&n(v,Jt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Cr(T)),E.items.push(u(v,T.value||""));break;case 7:{const I=f(v);E.items.push(I.node),S=I.nextConsumeToken||null;break}}}while(b.currentType!==13&&b.currentType!==1);const A=b.currentType===1?b.lastOffset:v.currentOffset(),C=b.currentType===1?b.lastEndLoc:v.currentPosition();return r(E,A,C),E}function p(v,b,_,y){const E=v.context();let S=y.items.length===0;const A=s(1,b,_);A.cases=[],A.cases.push(y);do{const C=h(v);S||(S=C.items.length===0),A.cases.push(C)}while(E.currentType!==13);return S&&n(v,Jt.MUST_HAVE_MESSAGES_IN_PLURAL,_,0),r(A,v.currentOffset(),v.currentPosition()),A}function m(v){const b=v.context(),{offset:_,startLoc:y}=b,E=h(v);return b.currentType===13?E:p(v,_,y,E)}function g(v){const b=DL(v,sn({},t)),_=b.context(),y=s(0,_.offset,_.startLoc);return e&&y.loc&&(y.loc.source=v),y.body=m(b),t.onCacheKey&&(y.cacheKey=t.onCacheKey(v)),_.currentType!==13&&n(b,Jt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,v[_.offset]||""),r(y,b.currentOffset(),b.currentPosition()),y}return{parse:g}}function Cr(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function BL(t,e={}){const i={ast:t,helpers:new Set};return{context:()=>i,helper:r=>(i.helpers.add(r),r)}}function $3(t,e){for(let i=0;i<t.length;i++)jm(t[i],e)}function jm(t,e){switch(t.type){case 1:$3(t.cases,e),e.helper("plural");break;case 2:$3(t.items,e);break;case 6:{jm(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function NL(t,e={}){const i=BL(t);i.helper("normalize"),t.body&&jm(t.body,i);const n=i.context();t.helpers=Array.from(n.helpers)}function UL(t){const e=t.body;return e.type===2?F3(e):e.cases.forEach(i=>F3(i)),t}function F3(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let i=0;i<t.items.length;i++){const n=t.items[i];if(!(n.type===3||n.type===9)||n.value==null)break;e.push(n.value)}if(e.length===t.items.length){t.static=Um(e);for(let i=0;i<t.items.length;i++){const n=t.items[i];(n.type===3||n.type===9)&&delete n.value}}}}function Ol(t){switch(t.t=t.type,t.type){case 0:{const e=t;Ol(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,i=e.cases;for(let n=0;n<i.length;n++)Ol(i[n]);e.c=i,delete e.cases;break}case 2:{const e=t,i=e.items;for(let n=0;n<i.length;n++)Ol(i[n]);e.i=i,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Ol(e.key),e.k=e.key,delete e.key,e.modifier&&(Ol(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function VL(t,e){const{filename:i,breakLineCode:n,needIndent:s}=e,r=e.location!==!1,o={filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:s,indentLevel:0};r&&t.loc&&(o.source=t.loc.source);const a=()=>o;function l(m,g){o.code+=m}function u(m,g=!0){const v=g?n:"";l(s?v+"  ".repeat(m):v)}function c(m=!0){const g=++o.indentLevel;m&&u(g)}function d(m=!0){const g=--o.indentLevel;m&&u(g)}function f(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:d,newline:f,helper:m=>`_${m}`,needIndent:()=>o.needIndent}}function jL(t,e){const{helper:i}=t;t.push(`${i("linked")}(`),Ml(t,e.key),e.modifier?(t.push(", "),Ml(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function HL(t,e){const{helper:i,needIndent:n}=t;t.push(`${i("normalize")}([`),t.indent(n());const s=e.items.length;for(let r=0;r<s&&(Ml(t,e.items[r]),r!==s-1);r++)t.push(", ");t.deindent(n()),t.push("])")}function zL(t,e){const{helper:i,needIndent:n}=t;if(e.cases.length>1){t.push(`${i("plural")}([`),t.indent(n());const s=e.cases.length;for(let r=0;r<s&&(Ml(t,e.cases[r]),r!==s-1);r++)t.push(", ");t.deindent(n()),t.push("])")}}function GL(t,e){e.body?Ml(t,e.body):t.push("null")}function Ml(t,e){const{helper:i}=t;switch(e.type){case 0:GL(t,e);break;case 1:zL(t,e);break;case 2:HL(t,e);break;case 6:jL(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${i("interpolate")}(${i("list")}(${e.index}))`,e);break;case 4:t.push(`${i("interpolate")}(${i("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const WL=(t,e={})=>{const i=rt(e.mode)?e.mode:"normal",n=rt(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:i==="arrow"?";":`
`,r=e.needIndent?e.needIndent:i!=="arrow",o=t.helpers||[],a=VL(t,{filename:n,breakLineCode:s,needIndent:r});a.push(i==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(r),o.length>0&&(a.push(`const { ${Um(o.map(c=>`${c}: _${c}`),", ")} } = ctx`),a.newline()),a.push("return "),Ml(a,t),a.deindent(r),a.push("}"),delete t.helpers;const{code:l,map:u}=a.context();return{ast:t,code:l,map:u?u.toJSON():void 0}};function KL(t,e={}){const i=sn({},e),n=!!i.jit,s=!!i.minify,r=i.optimize==null?!0:i.optimize,a=FL(i).parse(t);return n?(r&&UL(a),s&&Ol(a),{ast:a,code:""}):(NL(a,i),WL(a,i))}/*!
  * core-base v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function YL(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Bm().__INTLIFY_PROD_DEVTOOLS__=!1)}function Lr(t){return Xt(t)&&Hm(t)===0&&(ir(t,"b")||ir(t,"body"))}const B3=["b","body"];function XL(t){return qo(t,B3)}const N3=["c","cases"];function qL(t){return qo(t,N3,[])}const U3=["s","static"];function ZL(t){return qo(t,U3)}const V3=["i","items"];function QL(t){return qo(t,V3,[])}const j3=["t","type"];function Hm(t){return qo(t,j3)}const H3=["v","value"];function Yf(t,e){const i=qo(t,H3);if(i!=null)return i;throw pc(e)}const z3=["m","modifier"];function JL(t){return qo(t,z3)}const G3=["k","key"];function eI(t){const e=qo(t,G3);if(e)return e;throw pc(6)}function qo(t,e,i){for(let n=0;n<e.length;n++){const s=e[n];if(ir(t,s)&&t[s]!=null)return t[s]}return i}const W3=[...B3,...N3,...U3,...V3,...G3,...z3,...H3,...j3];function pc(t){return new Error(`unhandled node type: ${t}`)}function zm(t){return i=>tI(i,t)}function tI(t,e){const i=XL(e);if(i==null)throw pc(0);if(Hm(i)===1){const r=qL(i);return t.plural(r.reduce((o,a)=>[...o,K3(t,a)],[]))}else return K3(t,i)}function K3(t,e){const i=ZL(e);if(i!=null)return t.type==="text"?i:t.normalize([i]);{const n=QL(e).reduce((s,r)=>[...s,Gm(t,r)],[]);return t.normalize(n)}}function Gm(t,e){const i=Hm(e);switch(i){case 3:return Yf(e,i);case 9:return Yf(e,i);case 4:{const n=e;if(ir(n,"k")&&n.k)return t.interpolate(t.named(n.k));if(ir(n,"key")&&n.key)return t.interpolate(t.named(n.key));throw pc(i)}case 5:{const n=e;if(ir(n,"i")&&Vi(n.i))return t.interpolate(t.list(n.i));if(ir(n,"index")&&Vi(n.index))return t.interpolate(t.list(n.index));throw pc(i)}case 6:{const n=e,s=JL(n),r=eI(n);return t.linked(Gm(t,r),s?Gm(t,s):void 0,t.type)}case 7:return Yf(e,i);case 8:return Yf(e,i);default:throw new Error(`unhandled node on format message part: ${i}`)}}const iI=t=>t;let Xf=ni();function nI(t,e={}){let i=!1;const n=e.onError||AL;return e.onError=s=>{i=!0,n(s)},{...KL(t,e),detectError:i}}function sI(t,e){if(rt(t)){Si(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||iI)(t),s=Xf[n];if(s)return s;const{ast:r,detectError:o}=nI(t,{...e,location:!1,jit:!0}),a=zm(r);return o?a:Xf[n]=a}else{const i=t.cacheKey;if(i){const n=Xf[i];return n||(Xf[i]=zm(t))}else return zm(t)}}let mc=null;function rI(t){mc=t}function oI(t,e,i){mc&&mc.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:i})}const aI=lI("function:translate");function lI(t){return e=>mc&&mc.emit(t,e)}const lo={INVALID_ARGUMENT:TL,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},uI=24;function uo(t){return Kf(t,null,void 0)}function Wm(t,e){return e.locale!=null?Y3(e.locale):Y3(t.locale)}let Km;function Y3(t){if(rt(t))return t;if(Ei(t)){if(t.resolvedOnce&&Km!=null)return Km;if(t.constructor.name==="Function"){const e=t();if(EL(e))throw uo(lo.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Km=e}else throw uo(lo.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw uo(lo.NOT_SUPPORT_LOCALE_TYPE)}function cI(t,e,i){return[...new Set([i,...Bi(e)?e:Xt(e)?Object.keys(e):rt(e)?[e]:[i]])]}function X3(t,e,i){const n=rt(i)?i:Zf,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let r=s.__localeChainCache.get(n);if(!r){r=[];let o=[i];for(;Bi(o);)o=q3(r,o,e);const a=Bi(e)||!Gt(e)?e:e.default?e.default:null;o=rt(a)?[a]:a,Bi(o)&&q3(r,o,!1),s.__localeChainCache.set(n,r)}return r}function q3(t,e,i){let n=!0;for(let s=0;s<e.length&&Si(n);s++){const r=e[s];rt(r)&&(n=dI(t,e[s],i))}return n}function dI(t,e,i){let n;const s=e.split("-");do{const r=s.join("-");n=fI(t,r,i),s.splice(-1,1)}while(s.length&&n===!0);return n}function fI(t,e,i){let n=!1;if(!t.includes(e)&&(n=!0,e)){n=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Bi(i)||Gt(i))&&i[s]&&(n=i[s])}return n}const Zo=[];Zo[0]={w:[0],i:[3,0],"[":[4],o:[7]},Zo[1]={w:[1],".":[2],"[":[4],o:[7]},Zo[2]={w:[2],i:[3,0],0:[3,0]},Zo[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]},Zo[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]},Zo[5]={"'":[4,0],o:8,l:[5,0]},Zo[6]={'"':[4,0],o:8,l:[6,0]};const hI=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function pI(t){return hI.test(t)}function mI(t){const e=t.charCodeAt(0),i=t.charCodeAt(t.length-1);return e===i&&(e===34||e===39)?t.slice(1,-1):t}function gI(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function vI(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:pI(e)?mI(e):"*"+e}function _I(t){const e=[];let i=-1,n=0,s=0,r,o,a,l,u,c,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,n=4,f[0]();else{if(s=0,o===void 0||(o=vI(o),o===!1))return!1;f[1]()}};function h(){const p=t[i+1];if(n===5&&p==="'"||n===6&&p==='"')return i++,a="\\"+p,f[0](),!0}for(;n!==null;)if(i++,r=t[i],!(r==="\\"&&h())){if(l=gI(r),d=Zo[n],u=d[l]||d.l||8,u===8||(n=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(a=r,c()===!1))))return;if(n===7)return e}}const Z3=new Map;function bI(t,e){return Xt(t)?t[e]:null}function yI(t,e){if(!Xt(t))return null;let i=Z3.get(e);if(i||(i=_I(e),i&&Z3.set(e,i)),!i)return null;const n=i.length;let s=t,r=0;for(;r<n;){const o=i[r];if(W3.includes(o)&&Lr(s))return null;const a=s[o];if(a===void 0||Ei(s))return null;s=a,r++}return s}const wI="11.1.11",qf=-1,Zf="en-US",Q3="",J3=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function EI(){return{upper:(t,e)=>e==="text"&&rt(t)?t.toUpperCase():e==="vnode"&&Xt(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&rt(t)?t.toLowerCase():e==="vnode"&&Xt(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&rt(t)?J3(t):e==="vnode"&&Xt(t)&&"__v_isVNode"in t?J3(t.children):t}}let e4;function SI(t){e4=t}let t4;function xI(t){t4=t}let i4;function TI(t){i4=t}let n4=null;const AI=t=>{n4=t},kI=()=>n4;let s4=null;const r4=t=>{s4=t},CI=()=>s4;let o4=0;function LI(t={}){const e=Ei(t.onWarn)?t.onWarn:mL,i=rt(t.version)?t.version:wI,n=rt(t.locale)||Ei(t.locale)?t.locale:Zf,s=Ei(n)?Zf:n,r=Bi(t.fallbackLocale)||Gt(t.fallbackLocale)||rt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Gt(t.messages)?t.messages:Ym(s),a=Gt(t.datetimeFormats)?t.datetimeFormats:Ym(s),l=Gt(t.numberFormats)?t.numberFormats:Ym(s),u=sn(ni(),t.modifiers,EI()),c=t.pluralRules||ni(),d=Ei(t.missing)?t.missing:null,f=Si(t.missingWarn)||Hf(t.missingWarn)?t.missingWarn:!0,h=Si(t.fallbackWarn)||Hf(t.fallbackWarn)?t.fallbackWarn:!0,p=!!t.fallbackFormat,m=!!t.unresolving,g=Ei(t.postTranslation)?t.postTranslation:null,v=Gt(t.processor)?t.processor:null,b=Si(t.warnHtmlMessage)?t.warnHtmlMessage:!0,_=!!t.escapeParameter,y=Ei(t.messageCompiler)?t.messageCompiler:e4,E=Ei(t.messageResolver)?t.messageResolver:t4||bI,S=Ei(t.localeFallbacker)?t.localeFallbacker:i4||cI,A=Xt(t.fallbackContext)?t.fallbackContext:void 0,C=t,T=Xt(C.__datetimeFormatters)?C.__datetimeFormatters:new Map,I=Xt(C.__numberFormatters)?C.__numberFormatters:new Map,D=Xt(C.__meta)?C.__meta:{};o4++;const R={version:i,cid:o4,locale:n,fallbackLocale:r,messages:o,modifiers:u,pluralRules:c,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:p,unresolving:m,postTranslation:g,processor:v,warnHtmlMessage:b,escapeParameter:_,messageCompiler:y,messageResolver:E,localeFallbacker:S,fallbackContext:A,onWarn:e,__meta:D};return R.datetimeFormats=a,R.numberFormats=l,R.__datetimeFormatters=T,R.__numberFormatters=I,__INTLIFY_PROD_DEVTOOLS__&&oI(R,i,D),R}const Ym=t=>({[t]:ni()});function Xm(t,e,i,n,s){const{missing:r,onWarn:o}=t;if(r!==null){const a=r(t,i,e,s);return rt(a)?a:e}else return e}function gc(t,e,i){const n=t;n.__localeChainCache=new Map,t.localeFallbacker(t,i,e)}function II(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function RI(t,e){const i=e.indexOf(t);if(i===-1)return!1;for(let n=i+1;n<e.length;n++)if(II(t,e[n]))return!0;return!1}function a4(t,...e){const{datetimeFormats:i,unresolving:n,fallbackLocale:s,onWarn:r,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,c,d]=qm(...e),f=Si(c.missingWarn)?c.missingWarn:t.missingWarn;Si(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const h=!!c.part,p=Wm(t,c),m=o(t,s,p);if(!rt(l)||l==="")return new Intl.DateTimeFormat(p,d).format(u);let g={},v,b=null;const _="datetime format";for(let S=0;S<m.length&&(v=m[S],g=i[v]||{},b=g[l],!Gt(b));S++)Xm(t,l,v,f,_);if(!Gt(b)||!rt(v))return n?qf:l;let y=`${v}__${l}`;zf(d)||(y=`${y}__${JSON.stringify(d)}`);let E=a.get(y);return E||(E=new Intl.DateTimeFormat(v,sn({},b,d)),a.set(y,E)),h?E.formatToParts(u):E.format(u)}const l4=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function qm(...t){const[e,i,n,s]=t,r=ni();let o=ni(),a;if(rt(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw uo(lo.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw uo(lo.INVALID_ISO_DATE_ARGUMENT)}}else if(_L(e)){if(isNaN(e.getTime()))throw uo(lo.INVALID_DATE_ARGUMENT);a=e}else if(Vi(e))a=e;else throw uo(lo.INVALID_ARGUMENT);return rt(i)?r.key=i:Gt(i)&&Object.keys(i).forEach(l=>{l4.includes(l)?o[l]=i[l]:r[l]=i[l]}),rt(n)?r.locale=n:Gt(n)&&(o=n),Gt(s)&&(o=s),[r.key||"",a,r,o]}function u4(t,e,i){const n=t;for(const s in i){const r=`${e}__${s}`;n.__datetimeFormatters.has(r)&&n.__datetimeFormatters.delete(r)}}function c4(t,...e){const{numberFormats:i,unresolving:n,fallbackLocale:s,onWarn:r,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,c,d]=Zm(...e),f=Si(c.missingWarn)?c.missingWarn:t.missingWarn;Si(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const h=!!c.part,p=Wm(t,c),m=o(t,s,p);if(!rt(l)||l==="")return new Intl.NumberFormat(p,d).format(u);let g={},v,b=null;const _="number format";for(let S=0;S<m.length&&(v=m[S],g=i[v]||{},b=g[l],!Gt(b));S++)Xm(t,l,v,f,_);if(!Gt(b)||!rt(v))return n?qf:l;let y=`${v}__${l}`;zf(d)||(y=`${y}__${JSON.stringify(d)}`);let E=a.get(y);return E||(E=new Intl.NumberFormat(v,sn({},b,d)),a.set(y,E)),h?E.formatToParts(u):E.format(u)}const d4=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Zm(...t){const[e,i,n,s]=t,r=ni();let o=ni();if(!Vi(e))throw uo(lo.INVALID_ARGUMENT);const a=e;return rt(i)?r.key=i:Gt(i)&&Object.keys(i).forEach(l=>{d4.includes(l)?o[l]=i[l]:r[l]=i[l]}),rt(n)?r.locale=n:Gt(n)&&(o=n),Gt(s)&&(o=s),[r.key||"",a,r,o]}function f4(t,e,i){const n=t;for(const s in i){const r=`${e}__${s}`;n.__numberFormatters.has(r)&&n.__numberFormatters.delete(r)}}const PI=t=>t,DI=t=>"",OI="text",MI=t=>t.length===0?"":Um(t),$I=SL;function h4(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function FI(t){const e=Vi(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Vi(t.named.count)||Vi(t.named.n))?Vi(t.named.count)?t.named.count:Vi(t.named.n)?t.named.n:e:e}function BI(t,e){e.count||(e.count=t),e.n||(e.n=t)}function NI(t={}){const e=t.locale,i=FI(t),n=Xt(t.pluralRules)&&rt(e)&&Ei(t.pluralRules[e])?t.pluralRules[e]:h4,s=Xt(t.pluralRules)&&rt(e)&&Ei(t.pluralRules[e])?h4:void 0,r=v=>v[n(i,v.length,s)],o=t.list||[],a=v=>o[v],l=t.named||ni();Vi(t.pluralIndex)&&BI(i,l);const u=v=>l[v];function c(v,b){const _=Ei(t.messages)?t.messages(v,!!b):Xt(t.messages)?t.messages[v]:!1;return _||(t.parent?t.parent.message(v):DI)}const d=v=>t.modifiers?t.modifiers[v]:PI,f=Gt(t.processor)&&Ei(t.processor.normalize)?t.processor.normalize:MI,h=Gt(t.processor)&&Ei(t.processor.interpolate)?t.processor.interpolate:$I,p=Gt(t.processor)&&rt(t.processor.type)?t.processor.type:OI,g={list:a,named:u,plural:r,linked:(v,...b)=>{const[_,y]=b;let E="text",S="";b.length===1?Xt(_)?(S=_.modifier||S,E=_.type||E):rt(_)&&(S=_||S):b.length===2&&(rt(_)&&(S=_||S),rt(y)&&(E=y||E));const A=c(v,!0)(g),C=E==="vnode"&&Bi(A)&&S?A[0]:A;return S?d(S)(C,E):C},message:c,type:p,interpolate:h,normalize:f,values:sn(ni(),o,l)};return g}const p4=()=>"",Ms=t=>Ei(t);function m4(t,...e){const{fallbackFormat:i,postTranslation:n,unresolving:s,messageCompiler:r,fallbackLocale:o,messages:a}=t,[l,u]=Qm(...e),c=Si(u.missingWarn)?u.missingWarn:t.missingWarn,d=Si(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,f=Si(u.escapeParameter)?u.escapeParameter:t.escapeParameter,h=!!u.resolvedMessage,p=rt(u.default)||Si(u.default)?Si(u.default)?r?l:()=>l:u.default:i?r?l:()=>l:null,m=i||p!=null&&(rt(p)||Ei(p)),g=Wm(t,u);f&&UI(u);let[v,b,_]=h?[l,g,a[g]||ni()]:g4(t,l,g,o,d,c),y=v,E=l;if(!h&&!(rt(y)||Lr(y)||Ms(y))&&m&&(y=p,E=y),!h&&(!(rt(y)||Lr(y)||Ms(y))||!rt(b)))return s?qf:l;let S=!1;const A=()=>{S=!0},C=Ms(y)?y:v4(t,l,b,y,E,A);if(S)return y;const T=HI(t,b,_,u),I=NI(T),D=VI(t,C,I);let R=n?n(D,l):D;if(f&&rt(R)&&(R=yL(R)),__INTLIFY_PROD_DEVTOOLS__){const O={timestamp:Date.now(),key:rt(l)?l:Ms(y)?y.key:"",locale:b||(Ms(y)?y.locale:""),format:rt(y)?y:Ms(y)?y.source:"",message:R};O.meta=sn({},t.__meta,kI()||{}),aI(O)}return R}function UI(t){Bi(t.list)?t.list=t.list.map(e=>rt(e)?P3(e):e):Xt(t.named)&&Object.keys(t.named).forEach(e=>{rt(t.named[e])&&(t.named[e]=P3(t.named[e]))})}function g4(t,e,i,n,s,r){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,c=u(t,n,i);let d=ni(),f,h=null;const p="translate";for(let m=0;m<c.length&&(f=c[m],d=o[f]||ni(),(h=l(d,e))===null&&(h=d[e]),!(rt(h)||Lr(h)||Ms(h)));m++)if(!RI(f,c)){const g=Xm(t,e,f,r,p);g!==e&&(h=g)}return[h,f,d]}function v4(t,e,i,n,s,r){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Ms(n)){const u=n;return u.locale=u.locale||i,u.key=u.key||e,u}if(o==null){const u=(()=>n);return u.locale=i,u.key=e,u}const l=o(n,jI(t,i,s,n,a,r));return l.locale=i,l.key=e,l.source=n,l}function VI(t,e,i){return e(i)}function Qm(...t){const[e,i,n]=t,s=ni();if(!rt(e)&&!Vi(e)&&!Ms(e)&&!Lr(e))throw uo(lo.INVALID_ARGUMENT);const r=Vi(e)?String(e):(Ms(e),e);return Vi(i)?s.plural=i:rt(i)?s.default=i:Gt(i)&&!zf(i)?s.named=i:Bi(i)&&(s.list=i),Vi(n)?s.plural=n:rt(n)?s.default=n:Gt(n)&&sn(s,n),[r,s]}function jI(t,e,i,n,s,r){return{locale:e,key:i,warnHtmlMessage:s,onError:o=>{throw r&&r(o),o},onCacheKey:o=>gL(e,i,o)}}function HI(t,e,i,n){const{modifiers:s,pluralRules:r,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=t,f={locale:e,modifiers:s,pluralRules:r,messages:(h,p)=>{let m=o(i,h);if(m==null&&(c||p)){const[,,g]=g4(c||t,h,e,a,l,u);m=o(g,h)}if(rt(m)||Lr(m)){let g=!1;const b=v4(t,h,e,m,h,()=>{g=!0});return g?p4:b}else return Ms(m)?m:p4}};return t.processor&&(f.processor=t.processor),n.list&&(f.list=n.list),n.named&&(f.named=n.named),Vi(n.plural)&&(f.pluralIndex=n.plural),f}YL();/*!
  * vue-i18n v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const zI="11.1.11";function GI(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Bm().__INTLIFY_PROD_DEVTOOLS__=!1)}const $s={UNEXPECTED_RETURN_TYPE:uI,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function nr(t,...e){return Kf(t,null,void 0)}const Jm=Yo("__translateVNode"),e1=Yo("__datetimeParts"),t1=Yo("__numberParts"),WI=Yo("__setPluralRules"),KI=Yo("__injectWithOption"),i1=Yo("__dispose");function vc(t){if(!Xt(t)||Lr(t))return t;for(const e in t)if(ir(t,e))if(!e.includes("."))Xt(t[e])&&vc(t[e]);else{const i=e.split("."),n=i.length-1;let s=t,r=!1;for(let o=0;o<n;o++){if(i[o]==="__proto__")throw new Error(`unsafe key: ${i[o]}`);if(i[o]in s||(s[i[o]]=ni()),!Xt(s[i[o]])){r=!0;break}s=s[i[o]]}if(r||(Lr(s)?W3.includes(i[n])||delete t[e]:(s[i[n]]=t[e],delete t[e])),!Lr(s)){const o=s[i[n]];Xt(o)&&vc(o)}}return t}function _4(t,e){const{messages:i,__i18n:n,messageResolver:s,flatJson:r}=e,o=Gt(i)?i:Bi(n)?ni():{[t]:ni()};if(Bi(n)&&n.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||ni(),Wf(u,o[l])):Wf(u,o)}else rt(a)&&Wf(JSON.parse(a),o)}),s==null&&r)for(const a in o)ir(o,a)&&vc(o[a]);return o}function b4(t){return t.type}function YI(t,e,i){let n=Xt(e.messages)?e.messages:ni();"__i18nGlobal"in i&&(n=_4(t.locale.value,{messages:n,__i18n:i.__i18nGlobal}));const s=Object.keys(n);s.length&&s.forEach(r=>{t.mergeLocaleMessage(r,n[r])});{if(Xt(e.datetimeFormats)){const r=Object.keys(e.datetimeFormats);r.length&&r.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Xt(e.numberFormats)){const r=Object.keys(e.numberFormats);r.length&&r.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function y4(t){return F(eo,null,t,0)}const w4="__INTLIFY_META__",E4=()=>[],XI=()=>!1;let S4=0;function x4(t){return((e,i,n,s)=>t(i,n,Fi()||void 0,s))}const qI=()=>{const t=Fi();let e=null;return t&&(e=b4(t)[w4])?{[w4]:e}:null};function T4(t={}){const{__root:e,__injectWithOption:i}=t,n=e===void 0,s=t.flatJson,r=jf?z:Zt;let o=Si(t.inheritLocale)?t.inheritLocale:!0;const a=r(e&&o?e.locale.value:rt(t.locale)?t.locale:Zf),l=r(e&&o?e.fallbackLocale.value:rt(t.fallbackLocale)||Bi(t.fallbackLocale)||Gt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),u=r(_4(a.value,t)),c=r(Gt(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=r(Gt(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:Si(t.missingWarn)||Hf(t.missingWarn)?t.missingWarn:!0,h=e?e.fallbackWarn:Si(t.fallbackWarn)||Hf(t.fallbackWarn)?t.fallbackWarn:!0,p=e?e.fallbackRoot:Si(t.fallbackRoot)?t.fallbackRoot:!0,m=!!t.fallbackFormat,g=Ei(t.missing)?t.missing:null,v=Ei(t.missing)?x4(t.missing):null,b=Ei(t.postTranslation)?t.postTranslation:null,_=e?e.warnHtmlMessage:Si(t.warnHtmlMessage)?t.warnHtmlMessage:!0,y=!!t.escapeParameter;const E=e?e.modifiers:Gt(t.modifiers)?t.modifiers:{};let S=t.pluralRules||e&&e.pluralRules,A;A=(()=>{n&&r4(null);const Q={version:zI,locale:a.value,fallbackLocale:l.value,messages:u.value,modifiers:E,pluralRules:S,missing:v===null?void 0:v,missingWarn:f,fallbackWarn:h,fallbackFormat:m,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:_,escapeParameter:y,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};Q.datetimeFormats=c.value,Q.numberFormats=d.value,Q.__datetimeFormatters=Gt(A)?A.__datetimeFormatters:void 0,Q.__numberFormatters=Gt(A)?A.__numberFormatters:void 0;const Y=LI(Q);return n&&r4(Y),Y})(),gc(A,a.value,l.value);function T(){return[a.value,l.value,u.value,c.value,d.value]}const I=ge({get:()=>a.value,set:Q=>{A.locale=Q,a.value=Q}}),D=ge({get:()=>l.value,set:Q=>{A.fallbackLocale=Q,l.value=Q,gc(A,a.value,Q)}}),R=ge(()=>u.value),O=ge(()=>c.value),M=ge(()=>d.value);function U(){return Ei(b)?b:null}function $(Q){b=Q,A.postTranslation=Q}function B(){return g}function W(Q){Q!==null&&(v=x4(Q)),g=Q,A.missing=v}const te=(Q,Y,ee,we,ke,de)=>{T();let N;try{__INTLIFY_PROD_DEVTOOLS__,n||(A.fallbackContext=e?CI():void 0),N=Q(A)}finally{__INTLIFY_PROD_DEVTOOLS__,n||(A.fallbackContext=void 0)}if(ee!=="translate exists"&&Vi(N)&&N===qf||ee==="translate exists"&&!N){const[J,fe]=Y();return e&&p?we(e):ke(J)}else{if(de(N))return N;throw nr($s.UNEXPECTED_RETURN_TYPE)}};function re(...Q){return te(Y=>Reflect.apply(m4,null,[Y,...Q]),()=>Qm(...Q),"translate",Y=>Reflect.apply(Y.t,Y,[...Q]),Y=>Y,Y=>rt(Y))}function q(...Q){const[Y,ee,we]=Q;if(we&&!Xt(we))throw nr($s.INVALID_ARGUMENT);return re(Y,ee,sn({resolvedMessage:!0},we||{}))}function le(...Q){return te(Y=>Reflect.apply(a4,null,[Y,...Q]),()=>qm(...Q),"datetime format",Y=>Reflect.apply(Y.d,Y,[...Q]),()=>Q3,Y=>rt(Y)||Bi(Y))}function be(...Q){return te(Y=>Reflect.apply(c4,null,[Y,...Q]),()=>Zm(...Q),"number format",Y=>Reflect.apply(Y.n,Y,[...Q]),()=>Q3,Y=>rt(Y)||Bi(Y))}function se(Q){return Q.map(Y=>rt(Y)||Vi(Y)||Si(Y)?y4(String(Y)):Y)}const pe={normalize:se,interpolate:Q=>Q,type:"vnode"};function ye(...Q){return te(Y=>{let ee;const we=Y;try{we.processor=pe,ee=Reflect.apply(m4,null,[we,...Q])}finally{we.processor=null}return ee},()=>Qm(...Q),"translate",Y=>Y[Jm](...Q),Y=>[y4(Y)],Y=>Bi(Y))}function xe(...Q){return te(Y=>Reflect.apply(c4,null,[Y,...Q]),()=>Zm(...Q),"number format",Y=>Y[t1](...Q),E4,Y=>rt(Y)||Bi(Y))}function Be(...Q){return te(Y=>Reflect.apply(a4,null,[Y,...Q]),()=>qm(...Q),"datetime format",Y=>Y[e1](...Q),E4,Y=>rt(Y)||Bi(Y))}function Ke(Q){S=Q,A.pluralRules=S}function Xe(Q,Y){return te(()=>{if(!Q)return!1;const ee=rt(Y)?Y:a.value,we=ae(ee),ke=A.messageResolver(we,Q);return Lr(ke)||Ms(ke)||rt(ke)},()=>[Q],"translate exists",ee=>Reflect.apply(ee.te,ee,[Q,Y]),XI,ee=>Si(ee))}function Re(Q){let Y=null;const ee=X3(A,l.value,a.value);for(let we=0;we<ee.length;we++){const ke=u.value[ee[we]]||{},de=A.messageResolver(ke,Q);if(de!=null){Y=de;break}}return Y}function Z(Q){const Y=Re(Q);return Y??(e?e.tm(Q)||{}:{})}function ae(Q){return u.value[Q]||{}}function ie(Q,Y){if(s){const ee={[Q]:Y};for(const we in ee)ir(ee,we)&&vc(ee[we]);Y=ee[Q]}u.value[Q]=Y,A.messages=u.value}function ue(Q,Y){u.value[Q]=u.value[Q]||{};const ee={[Q]:Y};if(s)for(const we in ee)ir(ee,we)&&vc(ee[we]);Y=ee[Q],Wf(Y,u.value[Q]),A.messages=u.value}function ve(Q){return c.value[Q]||{}}function j(Q,Y){c.value[Q]=Y,A.datetimeFormats=c.value,u4(A,Q,Y)}function K(Q,Y){c.value[Q]=sn(c.value[Q]||{},Y),A.datetimeFormats=c.value,u4(A,Q,Y)}function oe(Q){return d.value[Q]||{}}function he(Q,Y){d.value[Q]=Y,A.numberFormats=d.value,f4(A,Q,Y)}function ce(Q,Y){d.value[Q]=sn(d.value[Q]||{},Y),A.numberFormats=d.value,f4(A,Q,Y)}S4++,e&&jf&&(Pe(e.locale,Q=>{o&&(a.value=Q,A.locale=Q,gc(A,a.value,l.value))}),Pe(e.fallbackLocale,Q=>{o&&(l.value=Q,A.fallbackLocale=Q,gc(A,a.value,l.value))}));const me={id:S4,locale:I,fallbackLocale:D,get inheritLocale(){return o},set inheritLocale(Q){o=Q,Q&&e&&(a.value=e.locale.value,l.value=e.fallbackLocale.value,gc(A,a.value,l.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:R,get modifiers(){return E},get pluralRules(){return S||{}},get isGlobal(){return n},get missingWarn(){return f},set missingWarn(Q){f=Q,A.missingWarn=f},get fallbackWarn(){return h},set fallbackWarn(Q){h=Q,A.fallbackWarn=h},get fallbackRoot(){return p},set fallbackRoot(Q){p=Q},get fallbackFormat(){return m},set fallbackFormat(Q){m=Q,A.fallbackFormat=m},get warnHtmlMessage(){return _},set warnHtmlMessage(Q){_=Q,A.warnHtmlMessage=Q},get escapeParameter(){return y},set escapeParameter(Q){y=Q,A.escapeParameter=Q},t:re,getLocaleMessage:ae,setLocaleMessage:ie,mergeLocaleMessage:ue,getPostTranslationHandler:U,setPostTranslationHandler:$,getMissingHandler:B,setMissingHandler:W,[WI]:Ke};return me.datetimeFormats=O,me.numberFormats=M,me.rt=q,me.te=Xe,me.tm=Z,me.d=le,me.n=be,me.getDateTimeFormat=ve,me.setDateTimeFormat=j,me.mergeDateTimeFormat=K,me.getNumberFormat=oe,me.setNumberFormat=he,me.mergeNumberFormat=ce,me[KI]=i,me[Jm]=ye,me[e1]=Be,me[t1]=xe,me}const n1={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function ZI({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((n,s)=>[...n,...s.type===Te?s.children:[s]],[]):e.reduce((i,n)=>{const s=t[n];return s&&(i[n]=s()),i},ni())}function A4(){return Te}const k4=Me({name:"i18n-t",props:sn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Vi(t)||!isNaN(t)}},n1),setup(t,e){const{slots:i,attrs:n}=e,s=t.i18n||St({useScope:t.scope,__useComponent:!0});return()=>{const r=Object.keys(i).filter(d=>d[0]!=="_"),o=ni();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=rt(t.plural)?+t.plural:t.plural);const a=ZI(e,r),l=s[Jm](t.keypath,a,o),u=sn(ni(),n),c=rt(t.tag)||Xt(t.tag)?t.tag:A4();return nn(c,u,l)}}});function QI(t){return Bi(t)&&!rt(t[0])}function C4(t,e,i,n){const{slots:s,attrs:r}=e;return()=>{const o={part:!0};let a=ni();t.locale&&(o.locale=t.locale),rt(t.format)?o.key=t.format:Xt(t.format)&&(rt(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>i.includes(h)?sn(ni(),f,{[h]:t.format[h]}):f,ni()));const l=n(t.value,o,a);let u=[o.key];Bi(l)?u=l.map((f,h)=>{const p=s[f.type],m=p?p({[f.type]:f.value,index:h,parts:l}):[f.value];return QI(m)&&(m[0].key=`${f.type}-${h}`),m}):rt(l)&&(u=[l]);const c=sn(ni(),r),d=rt(t.tag)||Xt(t.tag)?t.tag:A4();return nn(d,c,u)}}const L4=Me({name:"i18n-n",props:sn({value:{type:Number,required:!0},format:{type:[String,Object]}},n1),setup(t,e){const i=t.i18n||St({useScope:t.scope,__useComponent:!0});return C4(t,e,d4,(...n)=>i[t1](...n))}});function JI(t,e){const i=t;if(t.mode==="composition")return i.__getInstance(e)||t.global;{const n=i.__getInstance(e);return n!=null?n.__composer:t.global.__composer}}function eR(t){const e=o=>{const{instance:a,value:l}=o;if(!a||!a.$)throw nr($s.UNEXPECTED_ERROR);const u=JI(t,a.$),c=I4(l);return[Reflect.apply(u.t,u,[...R4(c)]),u]};return{created:(o,a)=>{const[l,u]=e(a);jf&&t.global===u&&(o.__i18nWatcher=Pe(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{jf&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=I4(a);o.textContent=Reflect.apply(l.t,l,[...R4(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function I4(t){if(rt(t))return{path:t};if(Gt(t)){if(!("path"in t))throw nr($s.REQUIRED_VALUE,"path");return t}else throw nr($s.INVALID_VALUE)}function R4(t){const{path:e,locale:i,args:n,choice:s,plural:r}=t,o={},a=n||{};return rt(i)&&(o.locale=i),Vi(s)&&(o.plural=s),Vi(r)&&(o.plural=r),[e,a,o]}function tR(t,e,...i){const n=Gt(i[0])?i[0]:{};(Si(n.globalInstall)?n.globalInstall:!0)&&([k4.name,"I18nT"].forEach(r=>t.component(r,k4)),[L4.name,"I18nN"].forEach(r=>t.component(r,L4)),[D4.name,"I18nD"].forEach(r=>t.component(r,D4))),t.directive("t",eR(e))}const iR=Yo("global-vue-i18n");function nR(t={}){const e=Si(t.globalInjection)?t.globalInjection:!0,i=new Map,[n,s]=sR(t),r=Yo("");function o(c){return i.get(c)||null}function a(c,d){i.set(c,d)}function l(c){i.delete(c)}const u={get mode(){return"composition"},async install(c,...d){if(c.__VUE_I18N_SYMBOL__=r,c.provide(c.__VUE_I18N_SYMBOL__,u),Gt(d[0])){const p=d[0];u.__composerExtend=p.__composerExtend,u.__vueI18nExtend=p.__vueI18nExtend}let f=null;e&&(f=fR(c,u.global)),tR(c,u,...d);const h=c.unmount;c.unmount=()=>{f&&f(),u.dispose(),h()}},get global(){return s},dispose(){n.stop()},__instances:i,__getInstance:o,__setInstance:a,__deleteInstance:l};return u}function St(t={}){const e=Fi();if(e==null)throw nr($s.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw nr($s.NOT_INSTALLED);const i=rR(e),n=aR(i),s=b4(e),r=oR(t,s);if(r==="global")return YI(n,t,s),n;if(r==="parent"){let l=lR(i,e,t.__useComponent);return l==null&&(l=n),l}const o=i;let a=o.__getInstance(e);if(a==null){const l=sn({},t);"__i18n"in s&&(l.__i18n=s.__i18n),n&&(l.__root=n),a=T4(l),o.__composerExtend&&(a[i1]=o.__composerExtend(a)),cR(o,e,a),o.__setInstance(e,a)}return a}function sR(t,e){const i=Rd(),n=i.run(()=>T4(t));if(n==null)throw nr($s.UNEXPECTED_ERROR);return[i,n]}function rR(t){const e=hs(t.isCE?iR:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw nr(t.isCE?$s.NOT_INSTALLED_WITH_PROVIDE:$s.UNEXPECTED_ERROR);return e}function oR(t,e){return zf(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function aR(t){return t.mode==="composition"?t.global:t.global.__composer}function lR(t,e,i=!1){let n=null;const s=e.root;let r=uR(e,i);for(;r!=null;){const o=t;if(t.mode==="composition"&&(n=o.__getInstance(r)),n!=null||s===r)break;r=r.parent}return n}function uR(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function cR(t,e,i){st(()=>{},e),ki(()=>{const n=i;t.__deleteInstance(e);const s=n[i1];s&&(s(),delete n[i1])},e)}const dR=["locale","fallbackLocale","availableLocales"],P4=["t","rt","d","n","tm","te"];function fR(t,e){const i=Object.create(null);return dR.forEach(s=>{const r=Object.getOwnPropertyDescriptor(e,s);if(!r)throw nr($s.UNEXPECTED_ERROR);const o=kt(r.value)?{get(){return r.value.value},set(a){r.value.value=a}}:{get(){return r.get&&r.get()}};Object.defineProperty(i,s,o)}),t.config.globalProperties.$i18n=i,P4.forEach(s=>{const r=Object.getOwnPropertyDescriptor(e,s);if(!r||!r.value)throw nr($s.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,r)}),()=>{delete t.config.globalProperties.$i18n,P4.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const D4=Me({name:"i18n-d",props:sn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},n1),setup(t,e){const i=t.i18n||St({useScope:t.scope,__useComponent:!0});return C4(t,e,l4,(...n)=>i[e1](...n))}});if(GI(),SI(sI),xI(yI),TI(X3),__INTLIFY_PROD_DEVTOOLS__){const t=Bm();t.__INTLIFY__=!0,rI(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const O4=nR({locale:"en",fallbackLocale:"en",globalInjection:!0,messages:pL}),{t:Qf}=O4.global;function Fs(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(typeof t!="string")return;const e=t.trim();if(!e||e==="-"||e==="--")return;let i=e.replace(/,/g,"").toLowerCase(),n=1;if(/[]/.test(i)&&(n*=1e8,i=i.replace(/[]/g,"")),/[]/.test(i)&&(n*=1e4,i=i.replace(/[]/g,"")),i=i.replace(/[^0-9.]/g,""),!i)return;const s=Number(i);if(!Number.isNaN(s))return s*n}function Bs(t){let i;k.value.language===Nn.Mandarin_CN?i=[{value:1,symbol:" "},{value:1e4,symbol:" "},{value:1e7,symbol:" "},{value:1e8,symbol:" "}]:k.value.language===Nn.Cantonese||k.value.language===Nn.Mandarin_TW?i=[{value:1,symbol:" "},{value:1e4,symbol:" "},{value:1e7,symbol:" "},{value:1e8,symbol:" "}]:i=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"}];const n=/\.0+$|(\.\d*[1-9])0+$/;if(typeof t=="string"){const r=Fs(t);t=typeof r=="number"?r:Number(t)}const s=i.slice().reverse().find(r=>t>=r.value);return s?(t/s.value).toFixed(1).replace(n,"$1")+s.symbol:"0"}function _c(t){const e=new Date,i=new Date(t),n=e.getTime()-i.getTime(),s=Math.floor(n/1e3),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=new Date(i.getFullYear(),i.getMonth(),i.getDate()),a=Math.floor((r.getTime()-o.getTime())/(1e3*60*60*24));if(a===0){if(s<60)return Qf("common.just_now");const l=Math.floor(s/60);if(l<60)return`${l} ${Qf("common.minute",l)}`;const u=Math.floor(s/3600);return`${u} ${Qf("common.hour",u)}`}else{if(a===1)return Qf("common.yesterday");{const l=i.getFullYear(),u=i.getMonth()+1,c=i.getDate();return l===e.getFullYear()?`${u}-${c}`:`${l}-${u}-${c}`}}}function Tn(t){const e=Math.floor(t/3600);t%=3600;const i=Math.floor(t/60),n=t%60;return e<=0?`${i<10?`0${i}`:i}:${n<10?`0${n}`:n}`:`${e<10?`0${e}`:e}:${i<10?`0${i}`:i}:${n<10?`0${n}`:n}`}const M4=Me({__name:"BangumiCardSkeleton",props:{horizontal:{type:Boolean}},setup(t){return(e,i)=>(L(),P("div",{style:Ue({display:e.horizontal?"flex":"block"}),"gap-4":"","mb-6":""},[x("div",{rounded:"$bew-radius",aspect:"12/16","overflow-hidden":"","mb-4":"",bg:"$bew-skeleton","shrink-0":"",style:Ue({width:e.horizontal?"170px":"100%"})},null,4),i[0]||(i[0]=x("div",{"w-full":""},[x("p",{"w-full":"","h-5":"","mt-2":"","mb-3":"","my-4":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{text:"$bew-skeleton","mb-10":"",flex:"","items-center":"","rounded-4px":""},[x("div",{text:"transparent",bg:"$bew-skeleton",p:"x-3 y-1","mr-2":"","h-24px":"","rounded-4":""}," 0.0 "),x("div",{w:"60%","h-22px":"",bg:"$bew-skeleton","rounded-4px":""})])],-1))],4))}}),hR=Object.freeze(Object.defineProperty({__proto__:null,default:M4},Symbol.toStringTag,{value:"Module"})),pR={"mb-6":""},mR={aspect:"12/16","overflow-hidden":"",rounded:"$bew-radius"},gR={"overflow-hidden":"",rounded:"$bew-radius",aspect:"12/16",pos:"relative"},vR={key:0,pos:"absolute bottom-0","w-full":"","h-full":"","p-2":"",flex:"~ col justify-end","opacity-0":"","group-hover:opacity-100":"",transform:"~ translate-y-4 group-hover:translate-y-0",transition:"all duration-300","z-1":"",style:{background:`linear-gradient(
                  transparent,
                  rgba(0, 0, 0, 0.8)
                )`}},_R={"mb-4":"",text:"white group-hover:shadow-[0_0_4px_rgba(0,0,0,1)]"},bR={key:0,flex:"~ wrap","gap-2":""},yR=["src","alt"],wR=["href","title"],ER={key:0,text:"sm $bew-text-2","mb-2":""},SR={key:0,"mr-4":""},xR={key:1},TR={text:"sm $bew-text-2",flex:"","flex-wrap":"","gap-2":"","items-center":""},AR={key:0,text:"$bew-theme-color",bg:"$bew-theme-color-20",p:"x-2","h-22px":"","lh-22px":"","rounded-24px":""},kR={"lh-22px":""},CR=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"BangumiCard",props:{skeleton:{type:Boolean},bangumi:{},horizontal:{type:Boolean}},setup(t){const e=z(null);let i=null;st(()=>{const r=n();!r||typeof ResizeObserver>"u"||(i=new ResizeObserver(o=>{for(const a of o){const l=a.contentRect.width;r.style.setProperty("--bew-card-width",`${Math.round(l)}px`)}}),i.observe(r))}),Ki(()=>{i?.disconnect(),i=null});function n(){const r=e.value;if(!r)return null;if(r instanceof HTMLElement)return r;const o=r.$el;return o instanceof HTMLElement?o:null}const{isDark:s}=Js();return(r,o)=>{const a=Ge("ALink");return L(),P("div",pR,[!r.skeleton&&r.bangumi?(L(),_e(a,{key:0,ref_key:"cardRootRef",ref:e,class:"group",style:Ue({display:r.horizontal?"flex":"block"}),href:r.bangumi.url,type:"videoCard","gap-4":"","hover:bg":"$bew-fill-2","hover:ring":"8 $bew-fill-2","content-visibility-auto":"","intrinsic-size-400px":"",transition:"all ease-in-out 300",rounded:"$bew-radius","h-fit":""},{default:H(()=>[x("div",{style:Ue({width:r.horizontal?"170px":"100%"}),tabindex:"-1",block:"",rounded:"$bew-radius","w-full":"",bg:"$bew-skeleton",relative:"","shrink-0":""},[x("div",mR,[r.bangumi.badge&&r.bangumi.badge.text?(L(),P("div",{key:0,style:Ue({backgroundColor:w(s)?r.bangumi.badge.bgColorDark:r.bangumi.badge.bgColor}),pos:"absolute top-0 right-0",p:"x-2 y-1","m-1":"",rounded:"$bew-radius","opacity-100":"","group-hover:opacity-0":"","duration-300":"",text:"sm white","z-1":""},G(r.bangumi.badge.text),5)):X("",!0),r.bangumi.rank?(L(),P("div",{key:1,"w-full":"",pos:"absolute bottom-0","z-1":"",text:"white 7xl shadow","p-2":"","fw-bold":"","h-150px":"",flex:"","items-end":"",bg:"gradient-to-b gradient-from-transparent gradient-to-[rgba(0,0,0,.6)]","rounded-b":"$bew-radius",style:Ue({"--un-text-shadow":r.bangumi.rank<=3?"4px 4px 0 var(--bew-theme-color), 6px 6px 0 var(--bew-theme-color-60)":""})},G(r.bangumi.rank),5)):X("",!0),x("div",gR,[r.bangumi.evaluate||Array.isArray(r.bangumi.tags)&&r.bangumi.tags?.length>0?(L(),P("div",vR,[x("div",_R,G(r.bangumi.evaluate),1),Array.isArray(r.bangumi.tags)&&r.bangumi.tags?.length>0?(L(),P("div",bR,[(L(!0),P(Te,null,Ne(r.bangumi.tags,l=>(L(),P("span",{key:l,bg:"white opacity-30",text:"white sm","leading-none":"",p:"x-2 y-1",rounded:"$bew-radius-half","shrink-0":""},G(l),1))),128))])):X("",!0)])):X("",!0),x("img",{src:`${w(Li)(r.bangumi.cover)}@466w_622h.webp`,alt:r.bangumi.title,rounded:"$bew-radius",aspect:"12/16","max-w-full":"","w-full":""},null,8,yR),r.bangumi.coverHover?(L(),P("div",{key:1,"w-full":"",rounded:"$bew-radius",aspect:"12/16",transform:"~ scale-110 group-hover:scale-100",transition:"all duration-340",bg:"cover center",pos:"absolute top-0 left-0","opacity-0":"","group-hover:opacity-100":"",style:Ue([{backgroundImage:`url(${w(Li)(r.bangumi.coverHover||r.bangumi.cover)}@672w_378h_1c.webp)`},{"transition-timing-function":"cubic-bezier(0.22, 0.61, 0.36, 1)"}])},null,4)):X("",!0)])])],4),x("div",{"flex-1":"",style:Ue({marginTop:r.horizontal?"0":"1rem"})},[x("p",{"un-text":"lg","mb-2":"",class:Ie({"bew-title-auto":w(k).homeAdaptiveTitleAutoSize}),style:Ue(!w(k).homeAdaptiveTitleAutoSize&&w(k).homeAdaptiveTitleFontSize?{fontSize:`${w(k).homeAdaptiveTitleFontSize}px`,lineHeight:"1.25"}:{})},[x("a",{href:r.bangumi.url,target:"_blank",class:"keep-two-lines",title:r.bangumi.title},G(r.bangumi.title),9,wR)],6),r.bangumi.view||r.bangumi.follow?(L(),P("p",ER,[r.bangumi.view?(L(),P("span",SR,G(r.$t("common.view",{count:w(Bs)(r.bangumi.view)},r.bangumi.view)),1)):X("",!0),r.bangumi.follow?(L(),P("span",xR,G(r.$t("common.anime_follow_count",{count:w(Bs)(r.bangumi.follow)},r.bangumi.follow)),1)):X("",!0)])):X("",!0),x("div",TR,[r.bangumi.capsuleText&&r.bangumi.capsuleText.trim()?(L(),P("div",AR,G(r.bangumi.capsuleText),1)):X("",!0),x("span",kR,G(r.bangumi.desc),1)])],4)]),_:1},8,["style","href"])):r.skeleton?(L(),_e(M4,{key:1,horizontal:r.horizontal,"important-mb-0":""},null,8,["horizontal"])):X("",!0)])}}}),[["__scopeId","data-v-ccf54482"]])},Symbol.toStringTag,{value:"Module"})),LR=["href","title"],IR=["title"],RR={key:2,class:"episode-ellipsis"},PR=44,$4=8,F4=6,B4=12,s1=qe(Me({__name:"BangumiEpisodeList",props:{episodes:{},totalEpisodes:{},fallbackUrl:{}},setup(t){const e=t,i=z(null),n=z(0);rc(i,d=>{const f=d[0];n.value=f.contentRect.width});const s=ge(()=>Array.isArray(e.episodes)?e.episodes:[]),r=ge(()=>{const d=new Map;return s.value.forEach((f,h)=>{const p=u(f,h);p&&!d.has(p)&&d.set(p,f)}),d}),o=ge(()=>{const d=Number(e.totalEpisodes);if(Number.isFinite(d)&&d>0)return d;const f=[...r.value.keys()];return f.length>0?Math.max(...f):s.value.length}),a=ge(()=>{const d=n.value;if(!d||!Number.isFinite(d))return B4;const f=Math.floor((d+$4)/(PR+$4));return Math.min(Math.max(f,F4),B4)}),l=ge(()=>{const d=o.value;if(!Number.isFinite(d)||d<=0)return[];const f=Math.max(a.value,F4),h=[];if(d<=f){for(let m=1;m<=d;m+=1)h.push(c(m));return h}const p=Math.min(d-1,f-2);for(let m=1;m<=p;m+=1)h.push(c(m));return h.push({type:"ellipsis",key:"ellipsis"}),h.push(c(d)),h});function u(d,f){if(typeof d.number=="number"&&Number.isFinite(d.number)&&d.number>0)return Math.round(d.number);const h=d.title.match(/(\d+)/);if(h){const p=Number.parseInt(h[1],10);if(Number.isFinite(p)&&p>0)return p}return f+1}function c(d){const f=r.value.get(d),h=f?.url||e.fallbackUrl;return{type:"episode",key:`episode-${d}`,number:d,title:f?.title||`${d}`,longTitle:f?.longTitle,url:h,disabled:!h}}return(d,f)=>l.value.length?(L(),P("div",{key:0,ref_key:"containerRef",ref:i,class:"bangumi-episode-buttons"},[(L(!0),P(Te,null,Ne(l.value,h=>(L(),P(Te,{key:h.key},[h.type==="episode"&&!h.disabled?(L(),P("a",{key:0,href:h.url,target:"_blank",rel:"noopener",class:"episode-button",title:h.longTitle||h.title,onClick:f[0]||(f[0]=ft(()=>{},["stop"]))},G(h.number),9,LR)):h.type==="episode"?(L(),P("span",{key:1,class:"episode-button disabled",title:h.longTitle||h.title},G(h.number),9,IR)):(L(),P("span",RR,"  "))],64))),128))],512)):X("",!0)}}),[["__scopeId","data-v-c595479d"]]),DR=Object.freeze(Object.defineProperty({__proto__:null,default:s1},Symbol.toStringTag,{value:"Module"})),Ir=qe(Me({__name:"Button",props:{type:{},size:{},color:{},textColor:{},strong:{type:Boolean},round:{type:Boolean},block:{type:Boolean},center:{type:Boolean}},emits:["click"],setup(t,{emit:e}){const i=e;function n(s){i("click",s)}return(s,r)=>(L(),P("button",{class:Ie(["b-button",[`b-button--type-${s.type??"default"}`,`b-button--size-${s.size??"medium"}`,`${s.strong?"b-button--strong":""}`,`${s.color||s.textColor?"b-button--custom-color":""}`]]),style:Ue({backgroundColor:s.color,color:s.textColor,"--b-button-radius":s.round?"50px":"",width:s.block?"100%":"var(--b-button-width)",justifyContent:s.center?"center":""}),onClick:n},[mi(s.$slots,"left",{},void 0,!0),mi(s.$slots,"default",{},void 0,!0),mi(s.$slots,"right",{},void 0,!0)],6))}}),[["__scopeId","data-v-f11c55fb"]]),OR=Object.freeze(Object.defineProperty({__proto__:null,default:Ir},Symbol.toStringTag,{value:"Module"})),MR=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"CodeEditor",props:Sn({modelValue:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Fn(t,"modelValue");return(i,n)=>Bt((L(),P("textarea",{"onUpdate:modelValue":n[0]||(n[0]=s=>e.value=s),"w-full":"","h-500px":"",border:"1 solid $bew-border-color",rounded:"4px","p-2":"","outline-none":"",bg:"$bew-fill-1"},null,512)),[[qs,e.value]])}}),[["__scopeId","data-v-2e0f4cca"]])},Symbol.toStringTag,{value:"Module"})),$R={key:0,class:"dialog",pos:"fixed top-0 left-0","w-full":"","h-full":"","z-10002":"","pointer-events-auto":""},FR={key:0,pos:"absolute top-0 left-0","w-full":"","h-full":"",bg:"white dark:black opacity-60 dark:opacity-60",flex:"~ justify-center items-center","z-2":""},BR={style:{"text-shadow":"0 0 15px var(--bew-elevated-solid), 0 0 20px var(--bew-elevated-solid)"},pos:"sticky top-0 left-0","w-full":"","h-70px":"","px-12":"",flex:"","items-center":"","justify-between":"",rounded:"t-$bew-radius","z-1":""},NR={"text-xl":"","fw-bold":""},UR={text:"sm $bew-text-2"},VR={text:"xs $bew-text-2 lh-0",p:"x-1","rounded-4px":"",bg:"$bew-fill-1",border:"1 $bew-border-color","mix-blend-color-dodge":""},jR={text:"xs $bew-text-2 lh-0",p:"x-1","rounded-4px":"",bg:"$bew-fill-1",border:"1 $bew-border-color","mix-blend-color-dodge":""},HR=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Dialog",props:{title:{},desc:{},center:{type:Boolean},frostedGlass:{type:Boolean,default:!0},appendToBewlyBody:{type:Boolean},width:{},maxWidth:{},contentHeight:{},contentMaxHeight:{},showFooter:{type:Boolean,default:!0},centerFooter:{type:Boolean},loading:{type:Boolean},preventCloseWhenLoading:{type:Boolean,default:!0}},emits:["close","confirm"],setup(t,{emit:e}){const i=t,n=e,s=z(!1),{mainAppRef:r}=$t(),o=z(!1);Ps("Enter",h=>{h.preventDefault(),i.loading||f()}),Ps("Escape",h=>{if(console.log("[Dialog] ESC key pressed!"),console.log("[Dialog] showDialog.value:",o.value),!o.value){console.log("[Dialog] Dialog not shown, ignoring ESC");return}if(console.log("[Dialog] Processing ESC key"),h.preventDefault(),i.loading&&i.preventCloseWhenLoading){console.log("[Dialog] Prevented close due to loading");return}console.log("[Dialog] Closing dialog"),d()});const a=ge(()=>typeof i.width=="number"?`${i.width}px`:i.width||"400px"),l=ge(()=>typeof i.maxWidth=="number"?`${i.maxWidth}px`:i.maxWidth||"unset"),u=ge(()=>typeof i.contentHeight=="number"?`${i.contentHeight}px`:i.contentHeight||"auto"),c=ge(()=>typeof i.contentMaxHeight=="number"?`${i.contentMaxHeight}px`:i.contentMaxHeight||"auto");Ps("Alt",h=>{h.preventDefault(),s.value=!0},{eventName:"keydown"}),Ps("Alt",h=>{h.preventDefault(),s.value=!1},{eventName:"keyup"}),st(()=>{o.value=!0}),Ki(()=>{d()});function d(){i.loading&&i.preventCloseWhenLoading||(o.value=!1,ot(()=>{n("close")}))}function f(){n("confirm"),i.loading||ot(()=>{d()})}return(h,p)=>(L(),_e(La,{to:w(r),disabled:!h.appendToBewlyBody},[F(nt,{name:"modal"},{default:H(()=>[w(o)?(L(),P("div",$R,[x("div",{bg:"black opacity-40 dark:opacity-40",pos:"absolute top-0 left-0","w-full":"","h-full":"","z-0":"",onClick:d}),x("div",{style:Ue([{"box-shadow":"var(--bew-shadow-4), var(--bew-shadow-edge-glow-2)"},{width:w(a),maxWidth:w(l),backdropFilter:h.frostedGlass?"var(--bew-filter-glass-2)":"none",backgroundColor:h.frostedGlass?"var(--bew-elevated)":"var(--bew-elevated-solid)"}]),pos:"absolute top-1/2 left-1/2",rounded:"$bew-radius",border:"1 $bew-border-color",transform:"translate--1/2","z-2":"",antialiased:""},[F(nt,{name:"fade"},{default:H(()=>[h.loading?(L(),P("div",FR,[...p[0]||(p[0]=[x("div",{"i-svg-spinners-ring-resize":"",text:"4xl"},null,-1)])])):X("",!0)]),_:1}),x("header",BR,[x("div",{style:Ue({textAlign:h.center?"center":"left"}),"w-full":""},[mi(h.$slots,"title",{},()=>[x("p",NR,G(h.title),1)]),x("p",UR,[mi(h.$slots,"desc",{},()=>[He(G(h.desc),1)])])],4),x("div",{style:{"backdrop-filter":"var(--bew-filter-glass-1)","box-shadow":"var(--bew-shadow-edge-glow-1), var(--bew-shadow-1)"},text:"!16px hover:$bew-theme-color",w:"32px",h:"32px",flex:"~ items-center justify-center shrink-0",bg:"$bew-fill-1 hover:$bew-theme-color-30","ml-8":"","rounded-8":"",cursor:"pointer",border:"1 $bew-border-color","box-border":"","duration-300":"",onClick:d},[...p[1]||(p[1]=[x("div",{"i-ic-baseline-clear":""},null,-1)])])]),x("main",{style:Ue({height:w(u),maxHeight:w(c),paddingBottom:h.showFooter?"0.5rem":"2rem"}),p:"x-12 y-2",relative:"",overflow:"x-hidden y-overlay"},[mi(h.$slots,"default")],4),h.showFooter?(L(),P("footer",{key:0,style:Ue({justifyContent:h.centerFooter||h.center?"center":"flex-end"}),flex:"~ gap-2",p:"x-12 t-2 b-6"},[F(Ir,{type:"tertiary",onClick:d},{default:H(()=>[x("div",null,[He(G(h.$t("common.operation.cancel"))+" ",1),Bt(x("span",VR," ESC ",512),[[ii,w(s)]])])]),_:1}),F(Ir,{type:"primary",onClick:f},{default:H(()=>[x("div",null,[He(G(h.$t("common.operation.confirm"))+" ",1),Bt(x("span",jR," ENTER ",512),[[ii,w(s)]])])]),_:1})],4)):X("",!0)],4)])):X("",!0)]),_:3})],8,["to","disabled"]))}})},Symbol.toStringTag,{value:"Module"})),N4=/^[a-z0-9]+(-[a-z0-9]+)*$/,Jf=(t,e,i,n="")=>{const s=t.split(":");if(t.slice(0,1)==="@"){if(s.length<2||s.length>3)return null;n=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const a=s.pop(),l=s.pop(),u={provider:s.length>0?s[0]:n,prefix:l,name:a};return e&&!eh(u)?null:u}const r=s[0],o=r.split("-");if(o.length>1){const a={provider:n,prefix:o.shift(),name:o.join("-")};return e&&!eh(a)?null:a}if(i&&n===""){const a={provider:n,prefix:"",name:r};return e&&!eh(a,i)?null:a}return null},eh=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1,U4=Object.freeze({left:0,top:0,width:16,height:16}),th=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ih=Object.freeze({...U4,...th}),r1=Object.freeze({...ih,body:"",hidden:!1});function zR(t,e){const i={};!t.hFlip!=!e.hFlip&&(i.hFlip=!0),!t.vFlip!=!e.vFlip&&(i.vFlip=!0);const n=((t.rotate||0)+(e.rotate||0))%4;return n&&(i.rotate=n),i}function V4(t,e){const i=zR(t,e);for(const n in r1)n in th?n in t&&!(n in i)&&(i[n]=th[n]):n in e?i[n]=e[n]:n in t&&(i[n]=t[n]);return i}function GR(t,e){const i=t.icons,n=t.aliases||Object.create(null),s=Object.create(null);function r(o){if(i[o])return s[o]=[];if(!(o in s)){s[o]=null;const a=n[o]&&n[o].parent,l=a&&r(a);l&&(s[o]=[a].concat(l))}return s[o]}return Object.keys(i).concat(Object.keys(n)).forEach(r),s}function WR(t,e,i){const n=t.icons,s=t.aliases||Object.create(null);let r={};function o(a){r=V4(n[a]||s[a],r)}return o(e),i.forEach(o),V4(t,r)}function j4(t,e){const i=[];if(typeof t!="object"||typeof t.icons!="object")return i;t.not_found instanceof Array&&t.not_found.forEach(s=>{e(s,null),i.push(s)});const n=GR(t);for(const s in n){const r=n[s];r&&(e(s,WR(t,s,r)),i.push(s))}return i}const KR={provider:"",aliases:{},not_found:{},...U4};function o1(t,e){for(const i in e)if(i in t&&typeof t[i]!=typeof e[i])return!1;return!0}function H4(t){if(typeof t!="object"||t===null)return null;const e=t;if(typeof e.prefix!="string"||!t.icons||typeof t.icons!="object"||!o1(t,KR))return null;const i=e.icons;for(const s in i){const r=i[s];if(!s||typeof r.body!="string"||!o1(r,r1))return null}const n=e.aliases||Object.create(null);for(const s in n){const r=n[s],o=r.parent;if(!s||typeof o!="string"||!i[o]&&!n[o]||!o1(r,r1))return null}return e}const z4=Object.create(null);function YR(t,e){return{provider:t,prefix:e,icons:Object.create(null),missing:new Set}}function $l(t,e){const i=z4[t]||(z4[t]=Object.create(null));return i[e]||(i[e]=YR(t,e))}function G4(t,e){return H4(e)?j4(e,(i,n)=>{n?t.icons[i]=n:t.missing.add(i)}):[]}function XR(t,e,i){try{if(typeof i.body=="string")return t.icons[e]={...i},!0}catch{}return!1}let bc=!1;function W4(t){return typeof t=="boolean"&&(bc=t),bc}function qR(t){const e=typeof t=="string"?Jf(t,!0,bc):t;if(e){const i=$l(e.provider,e.prefix),n=e.name;return i.icons[n]||(i.missing.has(n)?null:void 0)}}function ZR(t,e){const i=Jf(t,!0,bc);if(!i)return!1;const n=$l(i.provider,i.prefix);return e?XR(n,i.name,e):(n.missing.add(i.name),!0)}function QR(t,e){if(typeof t!="object")return!1;if(typeof e!="string"&&(e=t.provider||""),bc&&!e&&!t.prefix){let s=!1;return H4(t)&&(t.prefix="",j4(t,(r,o)=>{ZR(r,o)&&(s=!0)})),s}const i=t.prefix;if(!eh({prefix:i,name:"a"}))return!1;const n=$l(e,i);return!!G4(n,t)}const K4=Object.freeze({width:null,height:null}),Y4=Object.freeze({...K4,...th}),JR=/(-?[0-9.]*[0-9]+[0-9.]*)/g,eP=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function X4(t,e,i){if(e===1)return t;if(i=i||100,typeof t=="number")return Math.ceil(t*e*i)/i;if(typeof t!="string")return t;const n=t.split(JR);if(n===null||!n.length)return t;const s=[];let r=n.shift(),o=eP.test(r);for(;;){if(o){const a=parseFloat(r);isNaN(a)?s.push(r):s.push(Math.ceil(a*e*i)/i)}else s.push(r);if(r=n.shift(),r===void 0)return s.join("");o=!o}}function tP(t,e="defs"){let i="";const n=t.indexOf("<"+e);for(;n>=0;){const s=t.indexOf(">",n),r=t.indexOf("</"+e);if(s===-1||r===-1)break;const o=t.indexOf(">",r);if(o===-1)break;i+=t.slice(s+1,r).trim(),t=t.slice(0,n).trim()+t.slice(o+1)}return{defs:i,content:t}}function iP(t,e){return t?"<defs>"+t+"</defs>"+e:e}function nP(t,e,i){const n=tP(t);return iP(n.defs,e+n.content+i)}const sP=t=>t==="unset"||t==="undefined"||t==="none";function rP(t,e){const i={...ih,...t},n={...Y4,...e},s={left:i.left,top:i.top,width:i.width,height:i.height};let r=i.body;[i,n].forEach(m=>{const g=[],v=m.hFlip,b=m.vFlip;let _=m.rotate;v?b?_+=2:(g.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),g.push("scale(-1 1)"),s.top=s.left=0):b&&(g.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),g.push("scale(1 -1)"),s.top=s.left=0);let y;switch(_<0&&(_-=Math.floor(_/4)*4),_=_%4,_){case 1:y=s.height/2+s.top,g.unshift("rotate(90 "+y.toString()+" "+y.toString()+")");break;case 2:g.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:y=s.width/2+s.left,g.unshift("rotate(-90 "+y.toString()+" "+y.toString()+")");break}_%2===1&&(s.left!==s.top&&(y=s.left,s.left=s.top,s.top=y),s.width!==s.height&&(y=s.width,s.width=s.height,s.height=y)),g.length&&(r=nP(r,'<g transform="'+g.join(" ")+'">',"</g>"))});const o=n.width,a=n.height,l=s.width,u=s.height;let c,d;o===null?(d=a===null?"1em":a==="auto"?u:a,c=X4(d,l/u)):(c=o==="auto"?l:o,d=a===null?X4(c,u/l):a==="auto"?u:a);const f={},h=(m,g)=>{sP(g)||(f[m]=g.toString())};h("width",c),h("height",d);const p=[s.left,s.top,l,u];return f.viewBox=p.join(" "),{attributes:f,viewBox:p,body:r}}const oP=/\sid="(\S+)"/g,aP="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let lP=0;function uP(t,e=aP){const i=[];let n;for(;n=oP.exec(t);)i.push(n[1]);if(!i.length)return t;const s="suffix"+(Math.random()*16777216|Date.now()).toString(16);return i.forEach(r=>{const o=typeof e=="function"?e(r):e+(lP++).toString(),a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+s+"$3")}),t=t.replace(new RegExp(s,"g"),""),t}const a1=Object.create(null);function cP(t,e){a1[t]=e}function l1(t){return a1[t]||a1[""]}function u1(t){let e;if(typeof t.resources=="string")e=[t.resources];else if(e=t.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:t.path||"/",maxURL:t.maxURL||500,rotate:t.rotate||750,timeout:t.timeout||5e3,random:t.random===!0,index:t.index||0,dataAfterTimeout:t.dataAfterTimeout!==!1}}const c1=Object.create(null),yc=["https://api.simplesvg.com","https://api.unisvg.com"],nh=[];for(;yc.length>0;)yc.length===1||Math.random()>.5?nh.push(yc.shift()):nh.push(yc.pop());c1[""]=u1({resources:["https://api.iconify.design"].concat(nh)});function dP(t,e){const i=u1(e);return i===null?!1:(c1[t]=i,!0)}function d1(t){return c1[t]}let q4=(()=>{let t;try{if(t=fetch,typeof t=="function")return t}catch{}})();function fP(t,e){const i=d1(t);if(!i)return 0;let n;if(!i.maxURL)n=0;else{let s=0;i.resources.forEach(o=>{s=Math.max(s,o.length)});const r=e+".json?icons=";n=i.maxURL-s-i.path.length-r.length}return n}function hP(t){return t===404}const pP=(t,e,i)=>{const n=[],s=fP(t,e),r="icons";let o={type:r,provider:t,prefix:e,icons:[]},a=0;return i.forEach((l,u)=>{a+=l.length+1,a>=s&&u>0&&(n.push(o),o={type:r,provider:t,prefix:e,icons:[]},a=l.length),o.icons.push(l)}),n.push(o),n};function mP(t){if(typeof t=="string"){const e=d1(t);if(e)return e.path}return"/"}const gP={prepare:pP,send:(t,e,i)=>{if(!q4){i("abort",424);return}let n=mP(e.provider);switch(e.type){case"icons":{const r=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});n+=r+".json?"+l.toString();break}case"custom":{const r=e.uri;n+=r.slice(0,1)==="/"?r.slice(1):r;break}default:i("abort",400);return}let s=503;q4(t+n).then(r=>{const o=r.status;if(o!==200){setTimeout(()=>{i(hP(o)?"abort":"next",o)});return}return s=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?i("abort",r):i("next",s)});return}setTimeout(()=>{i("success",r)})}).catch(()=>{i("next",s)})}};function vP(t){const e={loaded:[],missing:[],pending:[]},i=Object.create(null);t.sort((s,r)=>s.provider!==r.provider?s.provider.localeCompare(r.provider):s.prefix!==r.prefix?s.prefix.localeCompare(r.prefix):s.name.localeCompare(r.name));let n={provider:"",prefix:"",name:""};return t.forEach(s=>{if(n.name===s.name&&n.prefix===s.prefix&&n.provider===s.provider)return;n=s;const r=s.provider,o=s.prefix,a=s.name,l=i[r]||(i[r]=Object.create(null)),u=l[o]||(l[o]=$l(r,o));let c;a in u.icons?c=e.loaded:o===""||u.missing.has(a)?c=e.missing:c=e.pending;const d={provider:r,prefix:o,name:a};c.push(d)}),e}function Z4(t,e){t.forEach(i=>{const n=i.loaderCallbacks;n&&(i.loaderCallbacks=n.filter(s=>s.id!==e))})}function _P(t){t.pendingCallbacksFlag||(t.pendingCallbacksFlag=!0,setTimeout(()=>{t.pendingCallbacksFlag=!1;const e=t.loaderCallbacks?t.loaderCallbacks.slice(0):[];if(!e.length)return;let i=!1;const n=t.provider,s=t.prefix;e.forEach(r=>{const o=r.icons,a=o.pending.length;o.pending=o.pending.filter(l=>{if(l.prefix!==s)return!0;const u=l.name;if(t.icons[u])o.loaded.push({provider:n,prefix:s,name:u});else if(t.missing.has(u))o.missing.push({provider:n,prefix:s,name:u});else return i=!0,!0;return!1}),o.pending.length!==a&&(i||Z4([t],r.id),r.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),r.abort))})}))}let bP=0;function yP(t,e,i){const n=bP++,s=Z4.bind(null,i,n);if(!e.pending.length)return s;const r={id:n,icons:e,callback:t,abort:s};return i.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(r)}),s}function wP(t,e=!0,i=!1){const n=[];return t.forEach(s=>{const r=typeof s=="string"?Jf(s,e,i):s;r&&n.push(r)}),n}var EP={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function SP(t,e,i,n){const s=t.resources.length,r=t.random?Math.floor(Math.random()*s):t.index;let o;if(t.random){let S=t.resources.slice(0);for(o=[];S.length>1;){const A=Math.floor(Math.random()*S.length);o.push(S[A]),S=S.slice(0,A).concat(S.slice(A+1))}o=o.concat(S)}else o=t.resources.slice(r).concat(t.resources.slice(0,r));const a=Date.now();let l="pending",u=0,c,d=null,f=[],h=[];typeof n=="function"&&h.push(n);function p(){d&&(clearTimeout(d),d=null)}function m(){l==="pending"&&(l="aborted"),p(),f.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),f=[]}function g(S,A){A&&(h=[]),typeof S=="function"&&h.push(S)}function v(){return{startTime:a,payload:e,status:l,queriesSent:u,queriesPending:f.length,subscribe:g,abort:m}}function b(){l="failed",h.forEach(S=>{S(void 0,c)})}function _(){f.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),f=[]}function y(S,A,C){const T=A!=="success";switch(f=f.filter(I=>I!==S),l){case"pending":break;case"failed":if(T||!t.dataAfterTimeout)return;break;default:return}if(A==="abort"){c=C,b();return}if(T){c=C,f.length||(o.length?E():b());return}if(p(),_(),!t.random){const I=t.resources.indexOf(S.resource);I!==-1&&I!==t.index&&(t.index=I)}l="completed",h.forEach(I=>{I(C)})}function E(){if(l!=="pending")return;p();const S=o.shift();if(S===void 0){if(f.length){d=setTimeout(()=>{p(),l==="pending"&&(_(),b())},t.timeout);return}b();return}const A={status:"pending",resource:S,callback:(C,T)=>{y(A,C,T)}};f.push(A),u++,d=setTimeout(E,t.rotate),i(S,e,A.callback)}return setTimeout(E),v}function Q4(t){const e={...EP,...t};let i=[];function n(){i=i.filter(a=>a().status==="pending")}function s(a,l,u){const c=SP(e,a,l,(d,f)=>{n(),u&&u(d,f)});return i.push(c),c}function r(a){return i.find(l=>a(l))||null}return{query:s,find:r,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:n}}function J4(){}const f1=Object.create(null);function xP(t){if(!f1[t]){const e=d1(t);if(!e)return;const i=Q4(e),n={config:e,redundancy:i};f1[t]=n}return f1[t]}function TP(t,e,i){let n,s;if(typeof t=="string"){const r=l1(t);if(!r)return i(void 0,424),J4;s=r.send;const o=xP(t);o&&(n=o.redundancy)}else{const r=u1(t);if(r){n=Q4(r);const o=t.resources?t.resources[0]:"",a=l1(o);a&&(s=a.send)}}return!n||!s?(i(void 0,424),J4):n.query(e,s,i)().abort}function e5(){}function AP(t){t.iconsLoaderFlag||(t.iconsLoaderFlag=!0,setTimeout(()=>{t.iconsLoaderFlag=!1,_P(t)}))}function kP(t){const e=[],i=[];return t.forEach(n=>{(n.match(N4)?e:i).push(n)}),{valid:e,invalid:i}}function wc(t,e,i){function n(){const s=t.pendingIcons;e.forEach(r=>{s&&s.delete(r),t.icons[r]||t.missing.add(r)})}if(i&&typeof i=="object")try{if(!G4(t,i).length){n();return}}catch(s){console.error(s)}n(),AP(t)}function t5(t,e){t instanceof Promise?t.then(i=>{e(i)}).catch(()=>{e(null)}):e(t)}function CP(t,e){t.iconsToLoad?t.iconsToLoad=t.iconsToLoad.concat(e).sort():t.iconsToLoad=e,t.iconsQueueFlag||(t.iconsQueueFlag=!0,setTimeout(()=>{t.iconsQueueFlag=!1;const{provider:i,prefix:n}=t,s=t.iconsToLoad;if(delete t.iconsToLoad,!s||!s.length)return;const r=t.loadIcon;if(t.loadIcons&&(s.length>1||!r)){t5(t.loadIcons(s,n,i),c=>{wc(t,s,c)});return}if(r){s.forEach(c=>{const d=r(c,n,i);t5(d,f=>{const h=f?{prefix:n,icons:{[c]:f}}:null;wc(t,[c],h)})});return}const{valid:o,invalid:a}=kP(s);if(a.length&&wc(t,a,null),!o.length)return;const l=n.match(N4)?l1(i):null;if(!l){wc(t,o,null);return}l.prepare(i,n,o).forEach(c=>{TP(i,c,d=>{wc(t,c.icons,d)})})}))}const LP=(t,e)=>{const i=wP(t,!0,W4()),n=vP(i);if(!n.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(n.loaded,n.missing,n.pending,e5)}),()=>{l=!1}}const s=Object.create(null),r=[];let o,a;return n.pending.forEach(l=>{const{provider:u,prefix:c}=l;if(c===a&&u===o)return;o=u,a=c,r.push($l(u,c));const d=s[u]||(s[u]=Object.create(null));d[c]||(d[c]=[])}),n.pending.forEach(l=>{const{provider:u,prefix:c,name:d}=l,f=$l(u,c),h=f.pendingIcons||(f.pendingIcons=new Set);h.has(d)||(h.add(d),s[u][c].push(d))}),r.forEach(l=>{const u=s[l.provider][l.prefix];u.length&&CP(l,u)}),e?yP(e,n,r):e5};function IP(t,e){const i={...t};for(const n in e){const s=e[n],r=typeof s;n in K4?(s===null||s&&(r==="string"||r==="number"))&&(i[n]=s):r===typeof i[n]&&(i[n]=n==="rotate"?s%4:s)}return i}const RP=/[\s,]+/;function PP(t,e){e.split(RP).forEach(i=>{switch(i.trim()){case"horizontal":t.hFlip=!0;break;case"vertical":t.vFlip=!0;break}})}function DP(t,e=0){const i=t.replace(/^-?[0-9.]*/,"");function n(s){for(;s<0;)s+=4;return s%4}if(i===""){const s=parseInt(t);return isNaN(s)?0:n(s)}else if(i!==t){let s=0;switch(i){case"%":s=25;break;case"deg":s=90}if(s){let r=parseFloat(t.slice(0,t.length-i.length));return isNaN(r)?0:(r=r/s,r%1===0?n(r):0)}}return e}function OP(t,e){let i=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)i+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+i+">"+t+"</svg>"}function MP(t){return t.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function $P(t){return"data:image/svg+xml,"+MP(t)}function FP(t){return'url("'+$P(t)+'")'}const i5={...Y4,inline:!1},BP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},NP={display:"inline-block"},h1={backgroundColor:"currentColor"},n5={backgroundColor:"transparent"},s5={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},r5={webkitMask:h1,mask:h1,background:n5};for(const t in r5){const e=r5[t];for(const i in s5)e[t+i]=s5[i]}const sh={};["horizontal","vertical"].forEach(t=>{const e=t.slice(0,1)+"Flip";sh[t+"-flip"]=e,sh[t.slice(0,1)+"-flip"]=e,sh[t+"Flip"]=e});function o5(t){return t+(t.match(/^[-0-9.]+$/)?"px":"")}const a5=(t,e)=>{const i=IP(i5,e),n={...BP},s=e.mode||"svg",r={},o=e.style,a=typeof o=="object"&&!(o instanceof Array)?o:{};for(let m in e){const g=e[m];if(g!==void 0)switch(m){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":i[m]=g===!0||g==="true"||g===1;break;case"flip":typeof g=="string"&&PP(i,g);break;case"color":r.color=g;break;case"rotate":typeof g=="string"?i[m]=DP(g):typeof g=="number"&&(i[m]=g);break;case"ariaHidden":case"aria-hidden":g!==!0&&g!=="true"&&delete n["aria-hidden"];break;default:{const v=sh[m];v?(g===!0||g==="true"||g===1)&&(i[v]=!0):i5[m]===void 0&&(n[m]=g)}}}const l=rP(t,i),u=l.attributes;if(i.inline&&(r.verticalAlign="-0.125em"),s==="svg"){n.style={...r,...a},Object.assign(n,u);let m=0,g=e.id;return typeof g=="string"&&(g=g.replace(/-/g,"_")),n.innerHTML=uP(l.body,g?()=>g+"ID"+m++:"iconifyVue"),nn("svg",n)}const{body:c,width:d,height:f}=t,h=s==="mask"||(s==="bg"?!1:c.indexOf("currentColor")!==-1),p=OP(c,{...u,width:d+"",height:f+""});return n.style={...r,"--svg":FP(p),width:o5(u.width),height:o5(u.height),...NP,...h?h1:n5,...a},nn("span",n)};if(W4(!0),cP("",gP),typeof document<"u"&&typeof window<"u"){const t=window;if(t.IconifyPreload!==void 0){const e=t.IconifyPreload,i="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!QR(n))&&console.error(i)}catch{console.error(i)}})}if(t.IconifyProviders!==void 0){const e=t.IconifyProviders;if(typeof e=="object"&&e!==null)for(let i in e){const n="IconifyProviders["+i+"] is invalid.";try{const s=e[i];if(typeof s!="object"||!s||s.resources===void 0)continue;dP(i,s)||console.error(n)}catch{console.error(n)}}}}const UP={...ih,body:""},ji=Me((t,{emit:e})=>{const i=z(null);function n(){i.value&&(i.value.abort?.(),i.value=null)}const s=z(!!t.ssr),r=z(""),o=Zt(null);function a(){const u=t.icon;if(typeof u=="object"&&u!==null&&typeof u.body=="string")return r.value="",{data:u};let c;if(typeof u!="string"||(c=Jf(u,!1,!0))===null)return null;let d=qR(c);if(!d){const p=i.value;return(!p||p.name!==u)&&(d===null?i.value={name:u}:i.value={name:u,abort:LP([c],l)}),null}n(),r.value!==u&&(r.value=u,ot(()=>{e("load",u)}));const f=t.customise;if(f){d=Object.assign({},d);const p=f(d.body,c.name,c.prefix,c.provider);typeof p=="string"&&(d.body=p)}const h=["iconify"];return c.prefix!==""&&h.push("iconify--"+c.prefix),c.provider!==""&&h.push("iconify--"+c.provider),{data:d,classes:h}}function l(){const u=a();u?u.data!==o.value?.data&&(o.value=u):o.value=null}return s.value?l():st(()=>{s.value=!0,l()}),Pe(()=>t.icon,l),ki(n),()=>{const u=o.value;if(!u)return a5(UP,t);let c=t;return u.classes&&(c={...t,class:u.classes.join(" ")}),a5({...ih,...u.data},c)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]});function p1({enterDelay:t=300,leaveDelay:e=300,beforeEnter:i,enter:n,beforeLeave:s,leave:r}){const o=z();let a,l;function u(){i&&i(),a&&(clearTimeout(a),a=void 0),l&&(clearTimeout(l),l=void 0),a=setTimeout(()=>{n()},t)}function c(){s&&s(),a&&(clearTimeout(a),a=void 0),l&&(clearTimeout(l),l=void 0),l=setTimeout(()=>{r()},e)}return Pe(o,(d,f,h)=>{d&&(k.value.touchScreenOptimization||(d.addEventListener("mouseenter",u),d.addEventListener("mouseleave",c))),h(()=>{d&&(d.removeEventListener("mouseenter",u),d.removeEventListener("mouseleave",c))})},{flush:"post"}),Pe(()=>k.value.touchScreenOptimization,d=>{d?(o.value?.removeEventListener("mouseenter",u),o.value?.removeEventListener("mouseleave",c)):(o.value?.addEventListener("mouseenter",u),o.value?.addEventListener("mouseleave",c))},{immediate:!0}),o}var Ni=(t=>(t.ForYou="ForYou",t.Following="Following",t.SubscribedSeries="SubscribedSeries",t.Trending="Trending",t.Ranking="Ranking",t.Precious="Precious",t.Weekly="Weekly",t.Live="Live",t))(Ni||{});const Fl=Ff("main",()=>{const t=ge(()=>[{i18nKey:"dock.home",icon:"i-mingcute:home-5-line",iconActivated:"i-mingcute:home-5-fill",page:_t.Home,openInNewTab:!1,useOriginalBiliPage:!1,url:"https://www.bilibili.com",hasBewlyPage:!0},{i18nKey:"dock.search",icon:"i-mingcute:search-2-line",iconActivated:"i-mingcute:search-2-fill",page:_t.Search,openInNewTab:!1,useOriginalBiliPage:!1,url:"https://search.bilibili.com/all",hasBewlyPage:!0},{i18nKey:"dock.anime",icon:"i-mingcute:tv-2-line",iconActivated:"i-mingcute:tv-2-fill",page:_t.Anime,openInNewTab:!1,useOriginalBiliPage:!1,url:"https://www.bilibili.com/anime",hasBewlyPage:!0},{i18nKey:"dock.favorites",icon:"i-mingcute:star-line",iconActivated:"i-mingcute:star-fill",page:_t.Favorites,openInNewTab:!1,useOriginalBiliPage:!1,url:`https://space.bilibili.com/${Ds()}/favlist`,hasBewlyPage:!0},{i18nKey:"dock.history",icon:"i-mingcute:time-line",iconActivated:"i-mingcute:time-fill",page:_t.History,openInNewTab:!1,useOriginalBiliPage:!1,url:"https://www.bilibili.com/history",hasBewlyPage:!0},{i18nKey:"dock.watch_later",icon:"i-mingcute:carplay-line",iconActivated:"i-mingcute:carplay-fill",page:_t.WatchLater,openInNewTab:!1,useOriginalBiliPage:!1,url:"https://www.bilibili.com/watchlater/list",hasBewlyPage:!0},{i18nKey:"dock.moments",icon:"i-tabler:windmill",iconActivated:"i-tabler:windmill-filled",page:_t.Moments,openInNewTab:!1,useOriginalBiliPage:!0,url:"https://t.bilibili.com",hasBewlyPage:!1}]),e=b_([{i18nKey:"home.for_you",page:Ni.ForYou},{i18nKey:"home.following",page:Ni.Following},{i18nKey:"home.subscribed_series",page:Ni.SubscribedSeries},{i18nKey:"home.trending",page:Ni.Trending},{i18nKey:"home.weekly",page:Ni.Weekly},{i18nKey:"home.precious",page:Ni.Precious},{i18nKey:"home.ranking",page:Ni.Ranking},{i18nKey:"home.live",page:Ni.Live}]);function i(s){return t.value.find(o=>o.page===s)?.url||""}function n(s){return t.value.find(r=>r.page===s)}return{dockItems:t,homeTabs:e,getBiliWebPageURLByPage:i,getDockItemByPage:n}}),sr=qe(Me({__name:"Tooltip",props:{content:{},placement:{},type:{}},setup(t){const e=z({left:0,top:0}),i=z(null);return(n,s)=>(L(),P("span",{class:"b-tooltip-wrapper",style:Ue({top:`${w(e).top}px`,left:`${w(e).left}px`})},[x("div",{ref_key:"tooltipRef",ref:i,class:Ie(["b-tooltip",[`b-tooltip--placement-${n.placement??"top"}`,`b-tooltip--type-${n.type??"default"}`]])},G(n.content),3),mi(n.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-28a73d74"]]),VP=Object.freeze(Object.defineProperty({__proto__:null,default:sr},Symbol.toStringTag,{value:"Module"})),jP={class:"dock-wrap",pos:"fixed top-0","z-100":"",flex:"~ col justify-center items-center","w-full":"","h-full":"","z-10":"","pointer-events-none":""},HP={class:"dock-content-inner"},zP=["onClick","onMouseup"],GP=["shadow"],WP=["shadow"],KP={absolute:""},YP={absolute:""},XP=["onClick"],m1=20,qP=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Dock",props:{activatedPage:{}},emits:["dockItemClick","dockItemMiddleClick","settingsVisibilityChange","refresh","backToTop","undoRefresh","forwardRefresh"],setup(t,{emit:e}){const i=t,n=e,s=Fl(),{isDark:r,toggleDark:o}=Js(),{reachTop:a,homeActivatedPage:l,undoForwardState:u}=$t(),c=ge(()=>u.value===Vn.ShowUndo),d=ge(()=>u.value===Vn.ShowForward),f=z(!1),h=z(!1),p=p1({enterDelay:100,leaveDelay:600,enter:()=>{h.value=!0,T(!1)},leave:()=>{h.value=!1,T(!0)}});let m,g;function v(se){if(!k.value.autoHideDock)return;const{clientX:ne,clientY:pe}=se,{innerWidth:ye,innerHeight:xe}=window;let Be=!1;(k.value.dockPosition==="left"&&ne<=m1||k.value.dockPosition==="right"&&ne>=ye-m1||k.value.dockPosition==="bottom"&&pe>=xe-m1)&&(Be=!0),Be?(g&&(clearTimeout(g),g=void 0),m||(m=setTimeout(()=>{T(!1)},100))):(m&&(clearTimeout(m),m=void 0),!g&&!h.value&&(g=setTimeout(()=>{T(!0)},600)))}const b=Mt({themeMode:!1,settings:!1}),_=z([]),y=z(),E=ge(()=>k.value.dockPosition==="left"?"right":k.value.dockPosition==="right"?"left":k.value.dockPosition==="bottom"?"top":"right"),S=ge(()=>{const se=k.value.dockItemsConfig.find(ne=>ne.page===i.activatedPage);return se&&se.useOriginalBiliPage?!1:Et()}),A=ge(()=>i.activatedPage===_t.Home&&l.value===Ni.ForYou);Pe(()=>k.value.autoHideDock,se=>{f.value=se},{immediate:!0}),Pe(()=>JSON.stringify(k.value.dockItemsConfig),()=>{_.value=C()},{immediate:!0});function C(){if(Array.isArray(k.value.dockItemsConfig)&&k.value.dockItemsConfig.length<s.dockItems.length){const ne=s.dockItems.filter(pe=>!k.value.dockItemsConfig.some(ye=>ye.page===pe.page));k.value.dockItemsConfig=[...k.value.dockItemsConfig,...ne.map(pe=>({page:pe.page,visible:!0,openInNewTab:!1,useOriginalBiliPage:!1}))]}else(!Array.isArray(k.value.dockItemsConfig)||k.value.dockItemsConfig.length!==s.dockItems.length)&&(k.value.dockItemsConfig=s.dockItems.map(ne=>({page:ne.page,visible:!0,openInNewTab:!1,useOriginalBiliPage:!1})));const se=[];return k.value.dockItemsConfig.forEach(ne=>{const pe=s.dockItems.find(ye=>ye.page===ne.page);pe?.hasBewlyPage||(ne.useOriginalBiliPage=!0),ne.visible&&se.push({i18nKey:pe?.i18nKey||"",icon:pe?.icon||"",iconActivated:pe?.iconActivated||"",page:pe?.page||_t.Home,openInNewTab:ne.openInNewTab,useOriginalBiliPage:ne.useOriginalBiliPage||!pe?.hasBewlyPage,url:pe?.url||"",hasBewlyPage:pe?.hasBewlyPage||!1})}),se}function T(se){k.value.autoHideDock?f.value=se:f.value=!1}function I(se,ne){if(se.ctrlKey||se.metaKey){D(ne);return}y.value=ne,n("dockItemClick",ne)}function D(se){y.value=se,Os(`https://www.bilibili.com/?page=${se.page}`)}function R(se="auto"){se==="backToTop"?n("backToTop"):se==="refresh"?n("refresh"):i.activatedPage===_t.Search||i.activatedPage===_t.SearchResults?n("backToTop"):a.value?n("refresh"):n("backToTop")}function O(){n("undoRefresh"),u.value=Vn.ShowForward}function M(){n("forwardRefresh"),u.value=Vn.ShowUndo}function U(){c.value?O():d.value&&M()}function $(se){return(i.activatedPage===_t.SearchResults&&se.page===_t.Search||i.activatedPage===se.page)&&Et()}const{width:B,height:W}=Ik(),{width:te,height:re}=Sk(p),q=ge(()=>{if(!re.value||!te.value)return 1;const ne=(()=>{const j=getComputedStyle(document.documentElement).getPropertyValue("--bew-top-bar-height").replace("px","");return Number.parseInt(j)||64})();let pe,ye;k.value.dockPosition==="bottom"?(pe=Math.max(100,Math.min(150,W.value*.1)),ye=Math.max(100,Math.min(150,B.value*.1))):(pe=Math.max(50,Math.min(100,W.value*.08))+ne,ye=Math.max(50,Math.min(100,B.value*.08)));const xe=W.value-pe,Be=B.value-ye,Ke=45,Xe=8;let Re=0,Z=0;if(k.value.dockPosition==="bottom"){const j=k.value.backToTopAndRefreshButtonsAreSeparated?2:1,K=k.value.enableUndoRefreshButton?1:0;Z=(j+K)*Ke+j*Xe}else{const j=k.value.backToTopAndRefreshButtonsAreSeparated?2:1,K=k.value.enableUndoRefreshButton?1:0;Re=(j+K)*Ke+j*Xe}const ae=re.value+Re,ie=te.value+Z,ue=ae>xe?xe/ae:1,ve=ie>Be?Be/ie:1;return Math.min(ue,ve)}),le=ge(()=>{const se=k.value.dockPosition,ne=q.value;p.value?.style.setProperty("--scale",`${ne}`);const pe={left:"left center",right:"right center",bottom:"center bottom"}[se]||"center center";return{transform:`scale(${ne})`,transformOrigin:pe}});function be(se){const ne=k.value.shortcuts?.homeRefresh;if(!ne?.enabled)return;const pe=ne.key||"R";if(se.key&&se.key.toUpperCase()===pe.toUpperCase()&&!se.ctrlKey&&!se.metaKey&&!se.altKey){const ye=document.activeElement,xe=se.composedPath?se.composedPath():se.path||[];let Be=!1;for(const Ke of xe)if(Ke instanceof HTMLInputElement||Ke instanceof HTMLTextAreaElement||Ke instanceof HTMLElement&&Ke.contentEditable==="true"){Be=!0;break}if(Be||document.querySelectorAll('input, textarea, [contenteditable="true"]').forEach(Xe=>{const Re=Xe;(Re===ye||Re===document.activeElement||Re.matches(":focus"))&&(Be=!0)}),!Be&&ye&&(ye.tagName==="INPUT"||ye.tagName==="TEXTAREA"||ye instanceof HTMLElement&&ye.contentEditable==="true")&&(Be=!0),Be)return;S.value&&(se.preventDefault(),R("refresh"))}}return st(()=>{document.addEventListener("keydown",be),window.addEventListener("mousemove",v)}),ki(()=>{document.removeEventListener("keydown",be),window.removeEventListener("mousemove",v),m&&clearTimeout(m),g&&clearTimeout(g)}),(se,ne)=>(L(),P("aside",jP,[w(k).autoHideDock&&f.value?(L(),P("div",{key:0,class:Ie(["dock-edge",`dock-edge-${w(k).dockPosition}`]),onMouseenter:ne[0]||(ne[0]=pe=>T(!1)),onMouseleave:ne[1]||(ne[1]=pe=>T(!0))},null,34)):X("",!0),x("div",{ref_key:"dockContentRef",ref:p,class:Ie(["dock-content",{left:w(k).dockPosition==="left",right:w(k).dockPosition==="right",bottom:w(k).dockPosition==="bottom",hide:f.value,"half-hide":w(k).halfHideDock,hover:h.value}]),style:Ue(le.value),onMouseenter:ne[7]||(ne[7]=pe=>T(!1)),onMouseleave:ne[8]||(ne[8]=pe=>T(!0))},[x("div",HP,[(L(!0),P(Te,null,Ne(_.value,pe=>(L(),_e(sr,{key:pe.page,content:se.$t(pe.i18nKey),placement:E.value},{default:H(()=>[x("button",{class:Ie(["dock-item group",{active:$(pe),inactive:w(b).themeMode&&w(r),"disable-glowing-effect":w(k).disableDockGlowingEffect}]),onClick:ye=>I(ye,pe),onMouseup:ft(ye=>D(pe),["middle"])},[Bt(x("div",{class:Ie(pe.icon),"text-xl":""},null,2),[[ii,!$(pe)]]),Bt(x("div",{class:Ie(pe.iconActivated),"text-xl":""},null,2),[[ii,$(pe)]])],42,zP)]),_:2},1032,["content","placement"]))),128)),ne[10]||(ne[10]=x("div",{class:"divider"},null,-1)),w(k).disableLightDarkModeSwitcherOnDock?X("",!0):(L(),_e(sr,{key:0,content:w(r)?se.$t("dock.dark_mode"):se.$t("dock.light_mode"),placement:E.value,class:"group","pointer-events-none":""},{default:H(()=>[w(r)?(L(),P("div",{key:0,pos:"absolute top-0 left-0 group-hover:top-2px group-hover:left--4px","w-full":"","h-full":"","bg-white":"",rounded:"1/2","z--2":"","pointer-events-none":"",shadow:w(k).disableDockGlowingEffect?"none":"group-hover:[-8px_4px_160px_20px_hsla(226deg,85%,77%,1),-8px_4px_100px_12px_hsla(226deg,85%,77%,0.8),-8px_4px_60px_10px_hsla(226deg,85%,77%,0.6),-8px_4px_20px_4px_hsla(226deg,85%,77%,0.4),-4px_2px_8px_0_hsla(226deg,85%,77%,0.8)]","opacity-0":"","group-hover:opacity-100":"","duration-600":""},null,8,GP)):X("",!0),x("button",{class:"dock-item",bg:"!dark-hover:$bew-bg",transform:"!dark-hover:scale-100",shadow:w(k).disableDockGlowingEffect?"none":"!dark-hover:[inset_4px_-2px_8px_hsla(226deg,85%,77%,1)]","pointer-events-auto":"",onClick:ne[2]||(ne[2]=(...pe)=>w(o)&&w(o)(...pe)),onMouseenter:ne[3]||(ne[3]=pe=>w(b).themeMode=!0),onMouseleave:ne[4]||(ne[4]=pe=>w(b).themeMode=!1)},[F(nt,{name:"fade"},{default:H(()=>[Bt(x("div",KP,[w(r)?(L(),_e(w(ji),{key:0,icon:"line-md:sunny-outline-to-moon-loop-transition"})):(L(),_e(w(ji),{key:1,icon:"line-md:moon-alt-to-sunny-outline-loop-transition"}))],512),[[ii,w(b).themeMode]])]),_:1}),F(nt,{name:"fade"},{default:H(()=>[Bt(x("div",YP,[w(r)?(L(),_e(w(ji),{key:0,icon:"line-md:sunny-outline-to-moon-transition"})):(L(),_e(w(ji),{key:1,icon:"line-md:moon-to-sunny-outline-transition"}))],512),[[ii,!w(b).themeMode]])]),_:1})],40,WP)]),_:1},8,["content","placement"])),F(sr,{content:se.$t("dock.settings"),placement:E.value},{default:H(()=>[x("button",{class:Ie(["dock-item group",{inactive:w(b).themeMode&&w(r)}]),onClick:ne[5]||(ne[5]=pe=>n("settingsVisibilityChange"))},[...ne[9]||(ne[9]=[x("div",{"i-mingcute:settings-3-line":"","text-xl":"","group-hover:rotate-180":"",transition:"all 2000 ease-out"},null,-1)])],2)]),_:1},8,["content","placement"])]),S.value?(L(),P("div",{key:0,style:Ue({bottom:w(k).dockPosition==="bottom"?"unset":0,right:w(k).dockPosition==="bottom"?0:"unset",transform:w(k).dockPosition==="bottom"?"translate(100%, 0)":"translateY(100%)",flexDirection:w(k).dockPosition==="bottom"?"row":"column"}),pos:"absolute",flex:"~ gap-2"},[w(k).backToTopAndRefreshButtonsAreSeparated?(L(),P(Te,{key:0},Ne(2,pe=>F(nt,{key:pe,name:"fade"},{default:H(()=>[pe===1&&se.activatedPage!==w(_t).Search&&se.activatedPage!==w(_t).SearchResults||pe===2&&!w(a)?(L(),P("button",{key:0,class:Ie(["back-to-top-or-refresh-btn",{inactive:w(b).themeMode&&w(r)}]),onClick:ye=>R(pe===1?"refresh":"backToTop")},[pe===1?(L(),_e(w(ji),{key:0,icon:"line-md:rotate-270","shrink-0":"","rotate-90":"",absolute:"","text-2xl":""})):(L(),_e(w(ji),{key:1,icon:"line-md:arrow-small-up","shrink-0":"",absolute:"","text-2xl":""}))],10,XP)):X("",!0)]),_:2},1024)),64)):(L(),P("button",{key:1,class:Ie(["back-to-top-or-refresh-btn",{inactive:w(b).themeMode&&w(r)}]),onClick:ne[6]||(ne[6]=pe=>R("auto"))},[F(nt,{name:"fade"},{default:H(()=>[w(a)&&se.activatedPage!==w(_t).Search&&se.activatedPage!==w(_t).SearchResults?(L(),_e(w(ji),{key:0,icon:"line-md:rotate-270","shrink-0":"","rotate-90":"",absolute:"","text-2xl":""})):(L(),_e(w(ji),{key:1,icon:"line-md:arrow-small-up","shrink-0":"",absolute:"","text-2xl":""}))]),_:1})],2)),F(nt,{name:"fade"},{default:H(()=>[A.value&&(c.value||d.value)&&w(k).enableUndoRefreshButton?(L(),P("button",{key:0,class:Ie(["back-to-top-or-refresh-btn",{inactive:w(b).themeMode&&w(r)}]),onClick:U},[c.value?(L(),_e(w(ji),{key:0,icon:"mdi:undo-variant","shrink-0":"",absolute:"","text-2xl":""})):d.value?(L(),_e(w(ji),{key:1,icon:"mdi:redo-variant","shrink-0":"",absolute:"","text-2xl":""})):X("",!0)],2)):X("",!0)]),_:1})],4)):X("",!0)],38)]))}}),[["__scopeId","data-v-c092ee21"]])},Symbol.toStringTag,{value:"Module"})),ZP={flex:"~ col gap-4",justify:"center",items:"center"},QP=["src"],JP={key:0,text:"$bew-text-3"},Hn=Me({__name:"Empty",props:{description:{}},setup(t){const e=t,i=Zs.runtime.getURL("/assets/empty.png");return(n,s)=>(L(),P("div",ZP,[x("img",{src:w(i),w:"200px",h:"auto"},null,8,QP),e.description?(L(),P("span",JP,G(e.description),1)):X("",!0),mi(n.$slots,"default")]))}}),eD=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),tD={relative:""},l5=qe(Me({__name:"HorizontalScrollView",setup(t){const e=z(),i=z(!0);Pe([()=>k.value.enableHorizontalScrolling,e],([s,r])=>{r&&(s?r.addEventListener("wheel",n):r.removeEventListener("wheel",n))}),st(()=>{});function n(s){s.preventDefault(),e.value.scrollLeft+=s.deltaY}return(s,r)=>(L(),P("div",tD,[x("div",{ref_key:"scrollListWrap",ref:e,w:"[calc(100%+80px)]",h:"[calc(100%+40px)]",m:"x--40px y--20px",p:"x-40px y-20px","overflow-x-scroll":"","overflow-y-hidden":"",relative:"",class:Ie({"scroll-mask":w(i)})},[mi(s.$slots,"default",{},void 0,!0)],2)]))}}),[["__scopeId","data-v-13f53252"]]),iD=Object.freeze(Object.defineProperty({__proto__:null,default:l5},Symbol.toStringTag,{value:"Module"}));let Ec=0,u5="",c5="",g1=!1,Bl=null,d5="";function f5(){if(typeof document>"u")return null;const{documentElement:t,body:e}=document;return!t||!e?null:{documentElement:t,body:e}}function nD(t){const e=window.innerWidth,i=t.clientWidth;return Math.max(0,e-i)}function h5(t,e){return e==="hidden"?!1:t.scrollHeight>t.clientHeight}function sD(t,e){const i=window.getComputedStyle(t),n=window.getComputedStyle(e),s=h5(t,i.overflowY);return h5(e,n.overflowY)&&!s?e:t}function p5(){const t=f5();if(!t||(Ec+=1,Ec>1))return;const{documentElement:e,body:i}=t;u5=e.style.overflow,c5=i.style.overflow;const n=nD(e);if(n>0){const s=`${n}px`;Bl=sD(e,i),d5=Bl.style.paddingRight,Bl.style.paddingRight=s,g1=!0}e.style.overflow="hidden",i.style.overflow="hidden"}function Nl(){const t=f5();if(!t||Ec===0||(Ec-=1,Ec>0))return;const{documentElement:e,body:i}=t;e.style.overflow=u5,i.style.overflow=c5,g1&&Bl&&(Bl.style.paddingRight=d5,Bl=null,g1=!1)}const rD={pos:"absolute top-0 left-0","of-hidden":"","w-full":"","h-full":"","z-999999":""},oD={key:0,pos:"relative top-0",flex:"~ items-center justify-end gap-2","max-w":"$bew-page-max-width","w-full":"",h:"$bew-top-bar-height","m-auto":"","px-4":"","pointer-events-none":""},aD=["src","pos"],lD=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"IframeDrawer",props:{url:{},title:{}},emits:["close"],setup(t,{emit:e}){const i=t,n=e,{isDark:s}=Js(),{activeDrawer:r,setActiveDrawer:o}=$t(),a=z(!1),l=z(!0),u=z(null),c=z(i.url),d=z(!1),f=z(null),h=z(!1),p=z(),m=z(!1),g=z(!1),v=ge(()=>{if(m.value)return"pos-fixed top-0 left-0 w-full h-full z-999999";{const O=l.value?"top-$bew-top-bar-height":"top-0",M=l.value?"h-[calc(100%-var(--bew-top-bar-height))]":"h-full";return`pos-absolute ${O} left-0 of-hidden bg-$bew-bg rounded-t-$bew-radius w-full ${M}`}}),b=ge(()=>m.value?{}:{top:"0"});Ht(window,"popstate",E),Pe(()=>s.value,O=>{if(u.value?.contentWindow)try{u.value.contentWindow.postMessage({type:zo,isDark:O},"*")}catch(M){console.warn("Failed to send dark mode change message to iframe:",M)}}),Pe(()=>k.value.darkModeBaseColor,O=>{if(u.value?.contentWindow&&s.value)try{u.value.contentWindow.postMessage({type:zo,isDark:s.value,darkModeBaseColor:O},"*")}catch(M){console.warn("Failed to send dark mode base color change message to iframe:",M)}}),Pe(()=>d.value,O=>{O&&u.value?.contentWindow&&setTimeout(()=>{try{u.value?.contentWindow?.postMessage({type:zo,isDark:s.value,darkModeBaseColor:k.value.darkModeBaseColor},"*")}catch(M){console.warn("Failed to send initial dark mode state to iframe:",M)}},500)});function _(){if(!(u.value&&u.value.contentWindow)){console.error("Iframe or contentWindow is not available");return}const O=()=>{if(l.value&&u.value?.contentWindow?.document)try{u.value.contentWindow.document.documentElement.classList.add("remove-top-bar-without-placeholder"),h.value=!0}catch(M){console.warn("Failed to inject style class:",M)}};Ht(u.value,"load",()=>{O(),Ht(u.value?.contentWindow,"pushstate",y),Ht(u.value?.contentWindow,"popstate",y),Ht(u.value?.contentWindow,"DOMContentLoaded",()=>{O()}),u.value?.focus()})}st(()=>{console.log("[IframeDrawer] onMounted called"),p.value=window.location.href,history.pushState(null,"",i.url),a.value=!0,l.value=!0,o(gs.IframeDrawer),console.log("[IframeDrawer] show.value:",a.value,"activeDrawer:",r.value),g.value||(p5(),g.value=!0),ot(()=>{u.value&&_()})}),Ki(()=>{g.value&&(Nl(),g.value=!1),A()}),ki(()=>{history.replaceState(null,"",p.value)});function y(O){if(!u.value?.contentWindow){console.error("iframe contentWindow not available");return}let M=u.value.contentWindow.location.href;O.type==="pushstate"&&Array.isArray(O.detail)&&O.detail.length===3&&O.detail[2]&&(M=String(O.detail[2])),M=M.replace(/\/$/,""),M&&M!=="about:blank"&&history.replaceState(null,"",M)}async function E(){if(Et()){await S();return}await ot(),u.value?.contentWindow&&u.value.contentWindow.location.replace(location.href.replace(/\/$/,""))}async function S(){console.log("[IframeDrawer] handleClose called"),f.value&&clearTimeout(f.value),g.value&&(Nl(),g.value=!1),await A(),a.value=!1,l.value=!1,o(gs.None),console.log("[IframeDrawer] show.value:",a.value,"activeDrawer:",r.value),f.value=setTimeout(()=>{n("close")},300)}async function A(){c.value="about:blank",u.value&&(u.value.src="about:blank"),await ot(),u.value?.contentWindow?.close(),u.value?.parentNode?.removeChild(u.value),await ot(),u.value=null}function C(){u.value&&(window.open(u.value.contentWindow?.location.href.replace(/\/$/,""),"_blank"),S())}const T=z(!1),I=z(null),D=z(!1);function R(O){if(!(O.key!=="Escape"&&O.code!=="Escape")){if(console.log("[IframeDrawer] ESC key pressed!"),console.log("[IframeDrawer] show.value:",a.value),console.log("[IframeDrawer] activeDrawer.value:",r.value),console.log("[IframeDrawer] DrawerType.IframeDrawer:",gs.IframeDrawer),console.log("[IframeDrawer] Match:",r.value===gs.IframeDrawer),r.value!==gs.IframeDrawer){console.log("[IframeDrawer] Not active drawer, ignoring ESC");return}if(console.log("[IframeDrawer] Processing ESC key"),O.preventDefault(),O.stopPropagation(),k.value.closeDrawerWithoutPressingEscAgain){console.log("[IframeDrawer] closeDrawerWithoutPressingEscAgain = true, closing immediately"),clearTimeout(I.value),S();return}console.log("[IframeDrawer] disableEscPress:",D.value),console.log("[IframeDrawer] isEscPressed:",T.value),!D.value&&(T.value?(console.log("[IframeDrawer] ESC pressed twice, closing"),S()):(console.log("[IframeDrawer] First ESC press, waiting for second press"),T.value=!0,I.value&&clearTimeout(I.value),I.value=setTimeout(()=>{T.value=!1},1300)))}}return st(()=>{window.addEventListener("keydown",R,!0),document.addEventListener("keydown",R,!0)}),Ki(()=>{window.removeEventListener("keydown",R,!0),document.removeEventListener("keydown",R,!0)}),Jr(()=>{if(ai())return null;Ht(window,"message",({data:O})=>{switch(O.type){case Tm:l.value=!1,D.value=!0,m.value=!0;break;case Am:l.value=!0,D.value=!1,m.value=!1;break;case"BEWLY_DRAWER_CLOSE_REQUEST":O.source==="iframe"&&r.value===gs.IframeDrawer&&(console.log("[IframeDrawer] Received close request from iframe"),k.value.closeDrawerWithoutPressingEscAgain?S():T.value?(console.log("[IframeDrawer] Second ESC from iframe, closing"),S()):(console.log("[IframeDrawer] First ESC from iframe, waiting for second press"),T.value=!0,I.value&&clearTimeout(I.value),I.value=setTimeout(()=>{T.value=!1},1300)));break}O===Tm?(l.value=!1,D.value=!0,m.value=!0):O===Am&&(l.value=!0,D.value=!1,m.value=!1)})}),(O,M)=>{const U=Ge("Button");return L(),P("div",rD,[F(nt,{name:"fade"},{default:H(()=>[w(a)&&!w(m)?(L(),P("div",{key:0,pos:"absolute bottom-0 left-0","w-full":"","h-full":"",bg:"black opacity-60",onClick:S})):X("",!0)]),_:1}),F(nt,{name:"fade"},{default:H(()=>[w(l)?(L(),P("div",oD,[F(U,{style:{"--b-button-color":"var(--bew-elevated-solid)","--b-button-color-hover":"var(--bew-elevated-solid-hover)"},"pointer-events-auto":"",onClick:C},{left:H(()=>[...M[1]||(M[1]=[x("i",{"i-mingcute:external-link-line":""},null,-1)])]),default:H(()=>[He(" "+G(O.$t("iframe_drawer.open_in_new_tab")),1)]),_:1}),w(T)?(L(),_e(U,{key:1,type:"error",onClick:S},{left:H(()=>[...M[4]||(M[4]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),default:H(()=>[He(" "+G(O.$t("iframe_drawer.press_esc_again_to_close"))+" ",1),M[5]||(M[5]=x("kbd",null,"Esc",-1))]),_:1})):(L(),_e(U,{key:0,style:{"--b-button-color":"var(--bew-elevated-solid)","--b-button-color-hover":"var(--bew-elevated-solid-hover)"},"pointer-events-auto":"",onClick:S},{left:H(()=>[...M[2]||(M[2]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),default:H(()=>[He(" "+G(O.$t("iframe_drawer.close"))+" ",1),M[3]||(M[3]=x("kbd",null,"Esc",-1))]),_:1}))])):X("",!0)]),_:1}),F(nt,{name:w(m)?"fade":"drawer"},{default:H(()=>[w(a)?(L(),P("div",{key:0,class:Ie(w(v))},[F(nt,{name:"fade"},{default:H(()=>[Bt(x("iframe",{ref_key:"iframeRef",ref:u,src:i.url,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms allow-modals",style:Ue(w(b)),frameborder:"0","pointer-events-auto":"",pos:w(m)?void 0:"relative left-0",allow:"fullscreen","w-full":"","h-full":"",onLoad:M[0]||(M[0]=$=>d.value=!0)},null,44,aD),[[ii,w(d)]])]),_:1})],2)):X("",!0)]),_:1},8,["name"])])}}}),[["__scopeId","data-v-7e6271fd"]])},Symbol.toStringTag,{value:"Module"})),uD={pos:"relative top-0 left-0","of-hidden":"","w-full":"","h-full":""},cD=["src"],dD=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"IframePage",props:{url:{}},setup(t,{expose:e}){const i=t,{reachTop:n}=$t(),{isDark:s}=Js(),r=z(!1),o=z(null),a=z(i.url),l=z(!1),u=z([]),c=z(!1);function d(){for(const y of u.value)y();u.value=[]}function f(){if(c.value)return;const y=o.value?.contentWindow;if(y)try{const E=y.document,A=(E?.scrollingElement??E?.documentElement??E?.body)?.scrollTop??y.scrollY??0;n.value=A<=0}catch{c.value||(c.value=!0),n.value=!1,d()}}function h(){const y=o.value?.contentWindow;if(!y)return;if(c.value=!1,d(),!p(y)){c.value=!0,n.value=!1;return}f();const E=()=>f();y.addEventListener("scroll",E,{passive:!0}),u.value.push(()=>y.removeEventListener("scroll",E));const S=y.document,A=S?.scrollingElement??S?.documentElement??S?.body;A&&(A.addEventListener("scroll",E,{passive:!0}),u.value.push(()=>A.removeEventListener("scroll",E)))}function p(y){try{return y.document?.documentElement,!0}catch{return!1}}Pe(()=>s.value,y=>{if(o.value?.contentWindow)try{o.value.contentWindow.postMessage({type:zo,isDark:y},"*")}catch(E){console.warn("Failed to send dark mode change message to iframe:",E)}}),Pe(()=>k.value.useOriginalBilibiliTopBar,y=>{if(o.value?.contentWindow)try{o.value.contentWindow.postMessage({type:uc,useOriginalBilibiliTopBar:y},"*")}catch(E){console.warn("Failed to send top bar change message to iframe:",E)}},{immediate:!0}),Pe(()=>k.value.darkModeBaseColor,y=>{if(o.value?.contentWindow&&s.value)try{o.value.contentWindow.postMessage({type:zo,isDark:s.value,darkModeBaseColor:y},"*")}catch(E){console.warn("Failed to send dark mode base color change message to iframe:",E)}});const m=z();function g(){clearTimeout(m.value),l.value=!1,h(),o.value?.contentWindow&&setTimeout(()=>{try{o.value?.contentWindow?.postMessage({type:zo,isDark:s.value,darkModeBaseColor:k.value.darkModeBaseColor},"*"),o.value?.contentWindow?.postMessage({type:uc,useOriginalBilibiliTopBar:k.value.useOriginalBilibiliTopBar},"*")}catch(y){console.warn("Failed to send initial dark mode state to iframe:",y)}},100)}Pe(()=>i.url,()=>{d(),m.value=setTimeout(()=>{l.value=!0},1500)}),st(()=>{m.value=setTimeout(()=>{l.value=!0},1500),ot(()=>{o.value?.focus()})}),Ki(()=>{v()});async function v(){d(),n.value=!0,a.value="about:blank",o.value&&(o.value.src="about:blank"),await ot(),o.value?.contentWindow?.close(),o.value?.parentNode?.removeChild(o.value),await ot(),o.value=null}function b(){o.value&&o.value.contentWindow?.scrollTo({top:0,behavior:"smooth"})}function _(){o.value&&o.value.contentWindow?.location.reload()}return e({handleBackToTop:b,handleRefresh:_}),(y,E)=>{const S=Ge("Loading");return L(),P("div",uD,[F(nt,{name:"fade"},{default:H(()=>[w(l)?(L(),_e(S,{key:0,"w-full":"","h-full":"",pos:"absolute top-0 left-0"})):X("",!0)]),_:1}),x("iframe",{ref_key:"iframeRef",ref:o,src:i.url,sandbox:"allow-same-origin allow-scripts allow-popups allow-forms allow-top-navigation",style:Ue({bottom:w(r)?"var(--bew-top-bar-height)":"0"}),frameborder:"0","pointer-events-auto":"",pos:"absolute left-0","w-inherit":"","h-inherit":"",onLoad:g},null,44,cD)])}}})},Symbol.toStringTag,{value:"Module"})),fD={key:0,class:"prefix"},hD=["type","min","max","placeholder"],pD={key:1,class:"suffix"},rr=qe(Me({__name:"Input",props:Sn({size:{default:"medium"},type:{},min:{},max:{},placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:Sn(["enter","blur"],["update:modelValue"]),setup(t,{expose:e}){const i=t,n=Fn(t,"modelValue"),s=z(null),r=ge(()=>i.size==="small"?"30px":i.size==="medium"?"35px":i.size==="large"?"40px":"35px"),o=ge(()=>i.size==="small"?"0 calc(var(--bew-base-font-size) * 0.5)":"0 var(--bew-base-font-size)");function a(){s.value?.focus()}return e({focus:a}),(l,u)=>(L(),P("div",{style:Ue({height:w(r),padding:w(o)}),"focus-within:ring":"2px $bew-theme-color",p:"x-4",rounded:"$bew-radius","transition-all":"","duration-300":"",bg:"$bew-fill-1",flex:"~ gap-2"},[l.$slots.prefix?(L(),P("div",fD,[x("div",null,[mi(l.$slots,"prefix",{},void 0,!0)])])):X("",!0),Bt(x("input",{ref_key:"inputRef",ref:s,"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),style:Ue({lineHeight:w(r)}),type:l.type,min:l.min,max:l.max,placeholder:l.placeholder,"w-inherit":"","h-inherit":"","outline-none":"","flex-1":"","bg-transparent":"",onKeydown:u[1]||(u[1]=kl(c=>l.$emit("enter"),["enter"])),onBlur:u[2]||(u[2]=c=>l.$emit("blur"))},null,44,hD),[[vm,n.value]]),l.$slots.suffix?(L(),P("div",pD,[x("div",null,[mi(l.$slots,"suffix",{},void 0,!0)])])):X("",!0)],4))}}),[["__scopeId","data-v-7a215203"]]),mD=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"}));function gD(t){return{all:t=t||new Map,on:function(e,i){var n=t.get(e);n?n.push(i):t.set(e,[i])},off:function(e,i){var n=t.get(e);n&&(i?n.splice(n.indexOf(i)>>>0,1):t.set(e,[]))},emit:function(e,i){var n=t.get(e);n&&n.slice().map(function(s){s(i)}),(n=t.get("*"))&&n.slice().map(function(s){s(e,i)})}}}const rn=gD(),rh=z(!1);let co=null,oh=0,ah=!1,lh=!1;function m5(){rh.value=!0,co&&clearTimeout(co),co=setTimeout(()=>{rh.value=!1},150)}function g5(t){rh.value=t,!t&&co&&(clearTimeout(co),co=null)}function vD(){oh++,ah||(window.addEventListener("scroll",m5,{passive:!0}),ah=!0),lh||(rn.on(Mf,g5),lh=!0)}function _D(){oh--,oh<=0&&(ah&&(window.removeEventListener("scroll",m5),ah=!1),lh&&(rn.off(Mf,g5),lh=!1),oh=0,co&&(clearTimeout(co),co=null))}function bD(){return st(()=>{vD()}),Ki(()=>{_D()}),{isScrolling:Ta(rh)}}const yD={key:0,"w-full":"","h-full":"",bg:"$bew-skeleton",rounded:"$bew-radius",class:"animate-pulse",style:{"aspect-ratio":"16 / 9"}},wD=["srcset"],ED=["srcset"],SD=["src","alt"],v5=qe(Me({__name:"LazyPicture",props:{src:{},alt:{default:""},loading:{default:"lazy"},rootMargin:{default:"150px"},showSkeleton:{type:Boolean,default:!0}},emits:["loaded"],setup(t,{emit:e}){const i=t,n=e,s=z(),r=z(!1),o=z(!1),a=z(""),l=z(!1);let u=null;function c(){r.value=!0,a.value=i.src}i.loading==="eager"&&(r.value=!0,a.value=i.src);const{isScrolling:d}=bD();Pe(d,h=>{!h&&l.value&&!r.value&&(l.value=!1,c())}),st(()=>{if(i.loading==="eager")return;const h=()=>{u?.disconnect(),u=new IntersectionObserver(p=>{p.forEach(m=>{m.isIntersecting&&!r.value&&(d.value?l.value=!0:c(),u?.disconnect())})},{rootMargin:i.rootMargin,threshold:.01}),s.value&&u.observe(s.value)};h(),Pe(()=>s.value,p=>{p&&!r.value&&h()}),ot(()=>{if(s.value&&!r.value){const p=s.value.getBoundingClientRect();p.bottom>0&&p.top<window.innerHeight&&c()}}),Pe(d,p=>{!p&&l.value&&!r.value&&(l.value=!1,c())}),Ki(()=>{u?.disconnect()})});function f(){o.value=!0,n("loaded")}return Pe(()=>i.src,h=>{r.value&&(a.value=h,o.value=!1)}),(h,p)=>(L(),P("picture",{ref_key:"imgRef",ref:s,"w-full":"","max-w-full":"","align-middle":"",rounded:"$bew-radius",style:{"aspect-ratio":"16 / 9",display:"block",overflow:"hidden",contain:"layout style"}},[!w(r)&&h.showSkeleton?(L(),P("div",yD)):X("",!0),w(r)?(L(),P(Te,{key:1},[x("source",{srcset:`${w(a)}.avif`,type:"image/avif"},null,8,wD),x("source",{srcset:`${w(a)}.webp`,type:"image/webp"},null,8,ED),x("img",{src:w(a),alt:h.alt,loading:"lazy",decoding:"async",block:"","w-full":"","h-full":"","rounded-inherit":"",style:Ue([{"aspect-ratio":"16 / 9","object-fit":"cover","object-position":"center"},{opacity:w(o)?1:0}]),class:"image-transition",onLoad:f},null,44,SD)],64)):X("",!0)],512))}}),[["__scopeId","data-v-064fab69"]]),xD=Object.freeze(Object.defineProperty({__proto__:null,default:v5},Symbol.toStringTag,{value:"Module"})),TD=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"List",props:{highlightFirst:{type:Boolean,default:!1},pinTop:{type:Boolean}},setup(t){return(e,i)=>(L(),P("div",{class:Ie(["b-list",{"highlight-first":e.highlightFirst,"pin-top":e.pinTop}])},[mi(e.$slots,"default",{},void 0,!0)],2))}}),[["__scopeId","data-v-cf415c6a"]])},Symbol.toStringTag,{value:"Module"})),AD={},kD={class:"b-list-item",p:"x-4 y-2",flex:"~ gap-2",bg:"odd:$bew-fill-1 hover:!$bew-fill-2",rounded:"$bew-radius","duration-300":""};function CD(t,e){return L(),P("div",kD,[mi(t.$slots,"default",{},void 0,!0)])}const LD=Object.freeze(Object.defineProperty({__proto__:null,default:qe(AD,[["render",CD],["__scopeId","data-v-1bf9f39b"]])},Symbol.toStringTag,{value:"Module"})),ID={w:"full","min-h":"46px",p:"y-8",flex:"~",justify:"center",items:"center"},RD=["src"],Rr=Me({__name:"Loading",setup(t){const e=Zs.runtime.getURL("/assets/loading.gif");return(i,n)=>(L(),P("div",ID,[x("img",{src:w(e),alt:"loading",w:"46px",h:"46px",m:"r-2"},null,8,RD),He(" "+G(i.$t("common.loading")),1)]))}}),PD=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),DD=["width"],OD=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Logo",props:{color:{default:"var(--bew-theme-color)"},size:{default:60},glow:{type:Boolean}},setup(t){const e=t;return(i,n)=>(L(),P("div",{style:Ue({filter:i.glow?"drop-shadow(0 0 2px var(--bew-theme-color-20)) drop-shadow(0 0 8px var(--bew-theme-color-60)) drop-shadow(0 0 34px var(--bew-theme-color-80))":"drop-shadow(0 0 6px rgba(0,0,0,.15))"})},[(L(),P("svg",{t:"1645466458357",class:"icon",viewBox:"0 0 2299 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2663",width:e.size,style:Ue({fill:i.color})},[...n[0]||(n[0]=[x("path",{d:"M1775.840814 322.588002c6.0164 1.002733 53.144869-9.525967 55.150336-6.016401 3.0082 4.5123 24.065601 155.92504 18.550567 156.927774s-44.621635 10.027334-44.621635 10.027334c-3.0082-20.556034-28.577901-147.903173-29.079268-160.938707m75.205003-14.539634l20.556034 162.944174c10.5287-0.501367 53.144869-3.509567 57.155803-4.010934-6.0164-61.668103-16.545101-158.933241-16.545101-158.93324-20.054668-4.010934-41.112069-4.010934-61.166736 0m-40.610702 226.116376s92.752838-23.564234 126.344406-12.0328c17.046467 61.668103 48.131202 407.611118 51.139402 421.649386-21.057401 2.506833-90.246004 8.523234-95.761037 10.027333-4.5123-26.071068-81.72277-403.098818-81.722771-419.643919m343.436183-207.565809c5.515034 1.5041 54.648969-5.013667 55.150335-1.5041 1.002733 12.032801 6.0164 157.42914 0.501367 157.930507s-44.621635 4.010934-44.621635 4.010934c-1.002733-20.054668-12.032801-146.90044-11.030067-160.437341m75.70637-4.010933l4.010933 160.938707c10.5287 0 52.643502 2.506833 57.155803 2.005467-1.002733-61.668103 0-158.933241 0-158.933241-20.054668-3.509567-40.610702-5.013667-61.166736-4.010933m-64.676303 216.089043s94.758304-12.534167 126.845772 2.506833c7.019134 72.196803 6.0164 408.613852 7.019134 422.652119-21.558768 0-90.246004 1.002733-95.761038 2.005467-1.002733-26.071068-39.607968-410.619319-38.103868-427.164419m-220.099977-413.627519c54.648969 278.759879 96.262404 755.058234 97.766504 785.641602 0 0 43.117535 1.002733 91.750105 4.010934C2105.740095 614.383415 2070.644427 134.575493 2071.145794 119.033126c-12.032801-13.536901-126.344406 6.0164-126.344406 6.0164m-120.328005 659.297196c-10.5287-78.213204-290.291313-166.955108-447.720454-138.377206 0 0-19.553301-172.470141-27.073801-339.425248-6.517767-143.390873-1.002733-282.770813 0.501366-305.833681-10.5287-7.5205-123.837572 46.627102-185.004308 69.188603 0 0 73.199537 309.844614 126.344406 952.59671 0 0 84.730971 9.0246 230.12731-19.051934s317.365114-115.815705 302.825481-219.097244m-341.932083 140.88404l-24.566967-176.982441c6.0164-3.0082 156.927774 53.144869 172.971507 63.172203-2.506833 11.030067-148.40454 113.810238-148.40454 113.810238M610.664628 322.588002c6.0164 1.002733 53.144869-9.525967 55.150335-6.016401 3.0082 4.5123 24.065601 155.92504 18.550568 156.927774s-44.621635 10.027334-44.621635 10.027334c-3.0082-20.556034-28.577901-147.903173-29.079268-160.938707m75.205003-14.539634l20.556034 162.944174c10.5287-0.501367 53.144869-3.509567 57.155803-4.010934-6.517767-61.668103-16.545101-158.933241-16.545101-158.93324-20.054668-4.010934-41.112069-4.010934-61.166736 0m-40.610702 226.116376s92.752838-23.564234 126.344406-12.0328c17.046467 61.668103 48.131202 407.611118 51.139402 421.649386-21.057401 2.506833-90.246004 8.523234-95.761037 10.027333-4.5123-26.071068-81.72277-403.098818-81.722771-419.643919m343.436182-207.565809c5.515034 1.5041 54.648969-5.013667 55.150336-1.5041 1.002733 12.032801 6.0164 157.42914 0.501367 157.930507s-44.621635 4.010934-44.621635 4.010934c-1.002733-20.054668-11.531434-146.90044-11.030068-160.437341m75.706371-4.010933l4.010933 160.938707c10.5287 0 52.643502 2.506833 57.155803 2.005467-1.002733-61.668103 0-158.933241 0-158.933241-20.054668-3.509567-40.610702-4.5123-61.166736-4.010933m-64.676303 216.089043s94.758304-12.534167 126.845772 2.506833c7.019134 72.196803 6.0164 408.613852 7.019134 422.652119-21.558768 0-90.246004 1.002733-95.761038 2.005467-0.501367-26.071068-39.607968-410.619319-38.103868-427.164419m-220.099977-413.627519c54.648969 278.759879 96.262404 755.058234 97.766504 785.641602 0 0 43.117535 1.002733 91.750105 4.010934-28.577901-300.318647-63.67357-780.126569-63.172203-796.170303-12.032801-13.035534-126.344406 6.517767-126.344406 6.517767m-120.328005 659.297196c-10.5287-78.213204-290.291313-166.955108-447.720454-138.377206 0 0-19.553301-172.470141-27.073801-339.425248-6.517767-143.390873-1.002733-282.770813 0.501366-305.833681C174.475608-6.308547 61.166736 47.337689 0 69.89919c0 0 73.199537 309.844614 126.344406 952.59671 0 0 84.730971 9.0246 230.12731-19.051934s317.365114-115.815705 302.825481-219.097244m-341.932083 140.88404l-24.566967-176.982441c6.0164-3.0082 156.927774 53.144869 172.971507 63.172203-2.506833 11.030067-148.40454 113.810238-148.40454 113.810238","p-id":"2664"},null,-1)])],12,DD))],4))}})},Symbol.toStringTag,{value:"Module"})),MD=["ring"],$D={truncate:""},FD=["border-color","transform"],BD=["href","title","onClick"],ND={class:"episode-title"},UD={key:0,class:"episode-badge"},uh=qe(Me({__name:"MediaEpisodeSelect",props:{episodes:{},fallbackUrl:{}},setup(t){const e=t,{mainAppRef:i}=$t(),n=z(!1),s=z({top:0,left:0,width:0}),r=z(null),o=ge(()=>Array.isArray(e.episodes)?e.episodes:[]),a=ge(()=>o.value.length>0),l=ge(()=>o.value.length>0?o.value[0].title:"");st(()=>{window.addEventListener("resize",u)}),ki(()=>{window.removeEventListener("resize",u)});function u(){if(!r.value)return;const m=r.value.getBoundingClientRect();s.value={top:m.bottom+window.scrollY,left:m.left+window.scrollX,width:m.width}}function c(){n.value=!n.value}function d(){n.value=!1}function f(m){m&&window.open(m,"_blank","noopener"),d()}function h(){window.addEventListener("click",d)}function p(){window.removeEventListener("click",d)}return Jr(()=>{n.value&&u()},{flush:"pre"}),(m,g)=>a.value?(L(),P("div",{key:0,ref_key:"containerRef",ref:r,class:"media-episode-select",pos:"relative",onMouseleave:h,onMouseenter:p},[x("button",{class:"select-button",p:"x-4 y-2",bg:"$bew-fill-1",rounded:"$bew-radius",text:"$bew-text-1",cursor:"pointer",flex:"~",justify:"between",items:"center",w:"full",ring:n.value?"2px $bew-theme-color":"","duration-300":"",onClick:ft(c,["stop"])},[x("span",$D,G(l.value),1),x("div",{border:"~ solid t-0 l-0 r-2 b-2","border-color":n.value?"$bew-theme-color":"$bew-fill-4",p:"3px",m:"l-2",display:"inline-block",transform:`~ ${n.value?"rotate-225 translate-y-1/4":"rotate-45 -translate-y-1/4"} `,transition:"all duration-300"},null,8,FD)],8,MD),(L(),_e(La,{to:w(i)},[F(nt,{name:"dropdown"},{default:H(()=>[n.value?(L(),P("div",{key:0,style:Ue({top:`${s.value.top}px`,left:`${s.value.left}px`,width:`${s.value.width}px`,backdropFilter:"var(--bew-filter-glass-1)"}),pos:"absolute",bg:"$bew-elevated",shadow:"$bew-shadow-2",p:"2",m:"t-2",rounded:"$bew-radius",z:"10004",flex:"~ col gap-1",w:"full","max-h-400px":"","overflow-y-overlay":"","will-change-transform":"",onClick:g[0]||(g[0]=ft(()=>{},["stop"]))},[(L(!0),P(Te,null,Ne(o.value,(v,b)=>(L(),P("a",{key:v.id||b,href:v.url||m.fallbackUrl,target:"_blank",rel:"noopener",class:"dropdown-item",p:"x-2 y-2",rounded:"$bew-radius",w:"full",bg:"hover:$bew-fill-2",transition:"all duration-300",cursor:"pointer",title:v.longTitle||v.title,onClick:ft(_=>f(v.url||m.fallbackUrl),["stop"])},[x("span",ND,G(v.title),1),v.badge?(L(),P("span",UD,G(v.badge),1)):X("",!0)],8,BD))),128))],4)):X("",!0)]),_:1}),n.value?(L(),P("div",{key:0,pos:"fixed top-0 left-0","w-full":"","h-full":"",z:"10003",onWheel:d},null,32)):X("",!0)],8,["to"]))],544)):X("",!0)}}),[["__scopeId","data-v-d956167d"]]),VD=Object.freeze(Object.defineProperty({__proto__:null,default:uh},Symbol.toStringTag,{value:"Module"})),jD={class:"poster"},HD=["src","alt"],zD={key:1,class:"poster-fallback"},GD={key:2,class:"score-chip"},WD={key:3,class:"type-chip"},KD={class:"info"},YD={class:"title"},XD={key:0,class:"meta"},qD={key:1,class:"description"},ZD={key:2,class:"tags"},QD=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"MovieCard",props:{media:{}},setup(t){const e=t,i=ge(()=>{const s=e.media.cover;if(!s)return"";const r=Li(s);return r.includes("@")?r:`${r}@320w_452h_1c.webp`}),n=ge(()=>[e.media.year,e.media.area].filter(Boolean).join("  "));return(s,r)=>{const o=Ge("ALink");return L(),_e(o,{href:s.media.url,type:"videoCard",class:"movie-card"},{default:H(()=>[x("div",jD,[i.value?(L(),P("img",{key:0,src:i.value,alt:s.media.title},null,8,HD)):(L(),P("div",zD)),s.media.score?(L(),P("div",GD,G(typeof s.media.score=="number"?s.media.score.toFixed(1):s.media.score),1)):X("",!0),s.media.typeName?(L(),P("div",WD,G(s.media.typeName),1)):X("",!0)]),x("div",KD,[x("div",YD,G(s.media.title),1),n.value?(L(),P("div",XD,G(n.value),1)):X("",!0),s.media.desc?(L(),P("p",qD,G(s.media.desc),1)):X("",!0),s.media.tags?.length?(L(),P("div",ZD,[(L(!0),P(Te,null,Ne(s.media.tags.slice(0,3),a=>(L(),P("span",{key:a},G(a),1))),128))])):X("",!0)])]),_:1},8,["href"])}}}),[["__scopeId","data-v-53757197"]])},Symbol.toStringTag,{value:"Module"})),JD=["srcset"],eO=["srcset"],tO=["src","loading","alt"],_5=Me({__name:"Picture",props:{src:{},loading:{},alt:{},aspectRatio:{default:"16 / 9"}},setup(t){return(e,i)=>(L(),P("picture",{"w-full":"","max-w-full":"","align-middle":"","object-cover":"",rounded:"$bew-radius",bg:"$bew-skeleton",style:Ue({aspectRatio:e.aspectRatio,display:"block"})},[x("source",{srcset:`${e.src}.avif`,type:"image/avif"},null,8,JD),x("source",{srcset:`${e.src}.webp`,type:"image/webp"},null,8,eO),x("img",{src:e.src,loading:e.loading||"lazy",alt:e.alt,decoding:"async",block:"","w-full":"","h-full":"","object-cover":"","rounded-inherit":"",style:Ue({aspectRatio:e.aspectRatio})},null,12,tO)],4))}}),iO=Object.freeze(Object.defineProperty({__proto__:null,default:_5},Symbol.toStringTag,{value:"Module"})),nO={pos:"absolute top-0 left-0","w-full":"","h-full":""},sO={pos:"relative top-0","z-1":"",flex:"~ items-center justify-end gap-2","w-full":"",h:"$bew-top-bar-height","pointer-events-none":""},rO=["src"],oO=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"PipWindow",props:{url:{}},emits:["close"],setup(t,{emit:e}){const i=t,n=e,s=z(null),r=z(null),o=z(null),a=z(i.url),{isDark:l}=Js();st(()=>{u()});async function u(){if("documentPictureInPicture"in window){const p=window.innerWidth*.8,m=window.innerHeight*.8;r.value=await window.documentPictureInPicture.requestWindow({disallowReturnToOpener:!0,width:p,height:m}),r.value.document.body.style.padding="0",r.value.document.body.style.margin="0",l.value&&(r.value.document.documentElement.style.background="var(--bew-bg)",r.value.document.documentElement.classList.add("dark")),r.value.document.body.append(s.value),r.value.addEventListener("pagehide",()=>{d()})}else{const p=window.innerWidth*.8,m=window.innerHeight*.8,g=screen.width/2-p/2,v=screen.height/2-m/2;window.open(a.value,"",`width=${p}px,height=${m}px,left=${g}px,top=${v}px,toolbar=no,location=no,directories=no,menubar=no,scrollbars=yes,resizable=yes,status=no`),d()}}function c(){window.open(a.value,"_blank"),d()}async function d(){await f(),await ot(),r.value&&r.value.close(),await ot(),n("close")}async function f(){a.value="about:blank",o.value?.contentWindow?.document.write(""),await ot(),o.value?.contentWindow?.close(),o.value?.parentNode?.removeChild(o.value),await ot(),o.value=null}const h=z(!1);return(p,m)=>{const g=Ge("Button");return L(),P("div",{ref_key:"pipWindowRef",ref:s},[x("div",nO,[x("div",sO,[F(g,{style:{"--b-button-color":"var(--bew-elevated-solid)","--b-button-color-hover":"var(--bew-elevated-solid-hover)"},"pointer-events-auto":"",onClick:c},{left:H(()=>[...m[0]||(m[0]=[x("i",{"i-mingcute:external-link-line":""},null,-1)])]),default:H(()=>[He(" "+G(p.$t("iframe_drawer.open_in_new_tab")),1)]),_:1}),w(h)?(L(),_e(g,{key:1,type:"error",onClick:d},{left:H(()=>[...m[2]||(m[2]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),default:H(()=>[He(" "+G(p.$t("iframe_drawer.press_esc_again_to_close")),1)]),_:1})):(L(),_e(g,{key:0,style:{"--b-button-color":"var(--bew-elevated-solid)","--b-button-color-hover":"var(--bew-elevated-solid-hover)"},"pointer-events-auto":"","mr-8":"",onClick:d},{left:H(()=>[...m[1]||(m[1]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),default:H(()=>[He(" "+G(p.$t("iframe_drawer.close")),1)]),_:1}))]),x("iframe",{ref_key:"iframeRef",ref:o,src:p.url,frameborder:"0","w-full":"","h-full":"","p-0":"",pos:"absolute top-0 left-0",bg:"$bew-bg"},null,8,rO)])],512)}}})},Symbol.toStringTag,{value:"Module"})),v1=Me({__name:"Progress",props:{percentage:{},color:{default:"var(--bew-theme-color)"},height:{}},setup(t){const e=t;return(i,n)=>(L(),P("div",{h:"6px",rounded:"$bew-radius",style:Ue({width:`${i.percentage}%`,backgroundColor:e.color,height:typeof e.height=="number"?`${e.height}px`:e.height})},null,4))}}),aO=Object.freeze(Object.defineProperty({__proto__:null,default:v1},Symbol.toStringTag,{value:"Module"})),lO={cursor:"pointer",pointer:"auto",flex:"","items-center":"","gap-3":""},Je=qe(Me({__name:"Radio",props:Sn({modelValue:{type:Boolean},label:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Fn(t,"modelValue");return(i,n)=>(L(),P("label",lO,[x("span",null,G(i.label),1),Bt(x("input",{"onUpdate:modelValue":n[0]||(n[0]=s=>e.value=s),type:"checkbox",hidden:""},null,512),[[wf,e.value]]),n[1]||(n[1]=x("span",{"inline-block":"",w:"$b-button-width",h:"$b-button-height",bg:"$bew-fill-1",rounded:"[calc(var(--b-button-height)/2)]",relative:"",border:"size-$b-border-width color-$bew-border-color","after:content-empty":"","after:inline-block":"","after:bg-white":"","after:rounded":"[calc(var(--b-button-height)/2)]","after:w":"[calc(var(--b-button-height)-var(--b-border-width))]","after:h":"[calc(var(--b-button-height)-var(--b-border-width))]","after:border":"size-$b-border-width color-$bew-border-color","after:pos":"absolute top-[calc(0px-var(--b-border-width)/2)]"},null,-1))]))}}),[["__scopeId","data-v-7fec4d5e"]]),uO=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:b5,setPrototypeOf:y5,isFrozen:cO,getPrototypeOf:dO,getOwnPropertyDescriptor:fO}=Object;let{freeze:zn,seal:Ns,create:w5}=Object,{apply:_1,construct:b1}=typeof Reflect<"u"&&Reflect;zn||(zn=function(e){return e}),Ns||(Ns=function(e){return e}),_1||(_1=function(e,i,n){return e.apply(i,n)}),b1||(b1=function(e,i){return new e(...i)});const ch=Wn(Array.prototype.forEach),hO=Wn(Array.prototype.lastIndexOf),E5=Wn(Array.prototype.pop),Sc=Wn(Array.prototype.push),pO=Wn(Array.prototype.splice),dh=Wn(String.prototype.toLowerCase),y1=Wn(String.prototype.toString),S5=Wn(String.prototype.match),xc=Wn(String.prototype.replace),mO=Wn(String.prototype.indexOf),gO=Wn(String.prototype.trim),or=Wn(Object.prototype.hasOwnProperty),Gn=Wn(RegExp.prototype.test),Tc=vO(TypeError);function Wn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return _1(t,e,n)}}function vO(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return b1(t,i)}}function Ft(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dh;y5&&y5(t,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const r=i(s);r!==s&&(cO(e)||(e[n]=r),s=r)}t[s]=!0}return t}function _O(t){for(let e=0;e<t.length;e++)or(t,e)||(t[e]=null);return t}function fo(t){const e=w5(null);for(const[i,n]of b5(t))or(t,i)&&(Array.isArray(n)?e[i]=_O(n):n&&typeof n=="object"&&n.constructor===Object?e[i]=fo(n):e[i]=n);return e}function Ac(t,e){for(;t!==null;){const n=fO(t,e);if(n){if(n.get)return Wn(n.get);if(typeof n.value=="function")return Wn(n.value)}t=dO(t)}function i(){return null}return i}const x5=zn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),w1=zn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),E1=zn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bO=zn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),S1=zn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yO=zn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),T5=zn(["#text"]),A5=zn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),x1=zn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),k5=zn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fh=zn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wO=Ns(/\{\{[\w\W]*|[\w\W]*\}\}/gm),EO=Ns(/<%[\w\W]*|[\w\W]*%>/gm),SO=Ns(/\$\{[\w\W]*/gm),xO=Ns(/^data-[\-\w.\u00B7-\uFFFF]+$/),TO=Ns(/^aria-[\-\w]+$/),C5=Ns(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),AO=Ns(/^(?:\w+script|data):/i),kO=Ns(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),L5=Ns(/^html$/i),CO=Ns(/^[a-z][.\w]*(-[.\w]+)+$/i);var I5=Object.freeze({__proto__:null,ARIA_ATTR:TO,ATTR_WHITESPACE:kO,CUSTOM_ELEMENT:CO,DATA_ATTR:xO,DOCTYPE_NAME:L5,ERB_EXPR:EO,IS_ALLOWED_URI:C5,IS_SCRIPT_OR_DATA:AO,MUSTACHE_EXPR:wO,TMPLIT_EXPR:SO});const kc={element:1,text:3,progressingInstruction:7,comment:8,document:9},LO=function(){return typeof window>"u"?null:window},IO=function(e,i){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";i&&i.hasAttribute(s)&&(n=i.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},R5=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function P5(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:LO();const e=ct=>P5(ct);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==kc.document||!t.Element)return e.isSupported=!1,e;let{document:i}=t;const n=i,s=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,p=l.prototype,m=Ac(p,"cloneNode"),g=Ac(p,"remove"),v=Ac(p,"nextSibling"),b=Ac(p,"childNodes"),_=Ac(p,"parentNode");if(typeof o=="function"){const ct=i.createElement("template");ct.content&&ct.content.ownerDocument&&(i=ct.content.ownerDocument)}let y,E="";const{implementation:S,createNodeIterator:A,createDocumentFragment:C,getElementsByTagName:T}=i,{importNode:I}=n;let D=R5();e.isSupported=typeof b5=="function"&&typeof _=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:R,ERB_EXPR:O,TMPLIT_EXPR:M,DATA_ATTR:U,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:B,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:te}=I5;let{IS_ALLOWED_URI:re}=I5,q=null;const le=Ft({},[...x5,...w1,...E1,...S1,...T5]);let be=null;const se=Ft({},[...A5,...x1,...k5,...fh]);let ne=Object.seal(w5(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,ye=null,xe=!0,Be=!0,Ke=!1,Xe=!0,Re=!1,Z=!0,ae=!1,ie=!1,ue=!1,ve=!1,j=!1,K=!1,oe=!0,he=!1;const ce="user-content-";let me=!0,Q=!1,Y={},ee=null;const we=Ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ke=null;const de=Ft({},["audio","video","img","source","image","track"]);let N=null;const J=Ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",Ee="http://www.w3.org/2000/svg",Ae="http://www.w3.org/1999/xhtml";let De=Ae,Ve=!1,tt=null;const Fe=Ft({},[fe,Ee,Ae],y1);let je=Ft({},["mi","mo","mn","ms","mtext"]),et=Ft({},["annotation-xml"]);const mt=Ft({},["title","style","font","a","script"]);let At=null;const ln=["application/xhtml+xml","text/html"],xd="text/html";let Wi=null,gr=null;const Qae=i.createElement("form"),XE=function(Se){return Se instanceof RegExp||Se instanceof Function},Ov=function(){let Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gr&&gr===Se)){if((!Se||typeof Se!="object")&&(Se={}),Se=fo(Se),At=ln.indexOf(Se.PARSER_MEDIA_TYPE)===-1?xd:Se.PARSER_MEDIA_TYPE,Wi=At==="application/xhtml+xml"?y1:dh,q=or(Se,"ALLOWED_TAGS")?Ft({},Se.ALLOWED_TAGS,Wi):le,be=or(Se,"ALLOWED_ATTR")?Ft({},Se.ALLOWED_ATTR,Wi):se,tt=or(Se,"ALLOWED_NAMESPACES")?Ft({},Se.ALLOWED_NAMESPACES,y1):Fe,N=or(Se,"ADD_URI_SAFE_ATTR")?Ft(fo(J),Se.ADD_URI_SAFE_ATTR,Wi):J,ke=or(Se,"ADD_DATA_URI_TAGS")?Ft(fo(de),Se.ADD_DATA_URI_TAGS,Wi):de,ee=or(Se,"FORBID_CONTENTS")?Ft({},Se.FORBID_CONTENTS,Wi):we,pe=or(Se,"FORBID_TAGS")?Ft({},Se.FORBID_TAGS,Wi):fo({}),ye=or(Se,"FORBID_ATTR")?Ft({},Se.FORBID_ATTR,Wi):fo({}),Y=or(Se,"USE_PROFILES")?Se.USE_PROFILES:!1,xe=Se.ALLOW_ARIA_ATTR!==!1,Be=Se.ALLOW_DATA_ATTR!==!1,Ke=Se.ALLOW_UNKNOWN_PROTOCOLS||!1,Xe=Se.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Re=Se.SAFE_FOR_TEMPLATES||!1,Z=Se.SAFE_FOR_XML!==!1,ae=Se.WHOLE_DOCUMENT||!1,ve=Se.RETURN_DOM||!1,j=Se.RETURN_DOM_FRAGMENT||!1,K=Se.RETURN_TRUSTED_TYPE||!1,ue=Se.FORCE_BODY||!1,oe=Se.SANITIZE_DOM!==!1,he=Se.SANITIZE_NAMED_PROPS||!1,me=Se.KEEP_CONTENT!==!1,Q=Se.IN_PLACE||!1,re=Se.ALLOWED_URI_REGEXP||C5,De=Se.NAMESPACE||Ae,je=Se.MATHML_TEXT_INTEGRATION_POINTS||je,et=Se.HTML_INTEGRATION_POINTS||et,ne=Se.CUSTOM_ELEMENT_HANDLING||{},Se.CUSTOM_ELEMENT_HANDLING&&XE(Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ne.tagNameCheck=Se.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&XE(Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ne.attributeNameCheck=Se.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Se.CUSTOM_ELEMENT_HANDLING&&typeof Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ne.allowCustomizedBuiltInElements=Se.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Re&&(Be=!1),j&&(ve=!0),Y&&(q=Ft({},T5),be=[],Y.html===!0&&(Ft(q,x5),Ft(be,A5)),Y.svg===!0&&(Ft(q,w1),Ft(be,x1),Ft(be,fh)),Y.svgFilters===!0&&(Ft(q,E1),Ft(be,x1),Ft(be,fh)),Y.mathMl===!0&&(Ft(q,S1),Ft(be,k5),Ft(be,fh))),Se.ADD_TAGS&&(q===le&&(q=fo(q)),Ft(q,Se.ADD_TAGS,Wi)),Se.ADD_ATTR&&(be===se&&(be=fo(be)),Ft(be,Se.ADD_ATTR,Wi)),Se.ADD_URI_SAFE_ATTR&&Ft(N,Se.ADD_URI_SAFE_ATTR,Wi),Se.FORBID_CONTENTS&&(ee===we&&(ee=fo(ee)),Ft(ee,Se.FORBID_CONTENTS,Wi)),me&&(q["#text"]=!0),ae&&Ft(q,["html","head","body"]),q.table&&(Ft(q,["tbody"]),delete pe.tbody),Se.TRUSTED_TYPES_POLICY){if(typeof Se.TRUSTED_TYPES_POLICY.createHTML!="function")throw Tc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Se.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Tc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=Se.TRUSTED_TYPES_POLICY,E=y.createHTML("")}else y===void 0&&(y=IO(h,s)),y!==null&&typeof E=="string"&&(E=y.createHTML(""));zn&&zn(Se),gr=Se}},qE=Ft({},[...w1,...E1,...bO]),ZE=Ft({},[...S1,...yO]),Jae=function(Se){let We=_(Se);(!We||!We.tagName)&&(We={namespaceURI:De,tagName:"template"});const ut=dh(Se.tagName),wi=dh(We.tagName);return tt[Se.namespaceURI]?Se.namespaceURI===Ee?We.namespaceURI===Ae?ut==="svg":We.namespaceURI===fe?ut==="svg"&&(wi==="annotation-xml"||je[wi]):!!qE[ut]:Se.namespaceURI===fe?We.namespaceURI===Ae?ut==="math":We.namespaceURI===Ee?ut==="math"&&et[wi]:!!ZE[ut]:Se.namespaceURI===Ae?We.namespaceURI===Ee&&!et[wi]||We.namespaceURI===fe&&!je[wi]?!1:!ZE[ut]&&(mt[ut]||!qE[ut]):!!(At==="application/xhtml+xml"&&tt[Se.namespaceURI]):!1},Hr=function(Se){Sc(e.removed,{element:Se});try{_(Se).removeChild(Se)}catch{g(Se)}},Au=function(Se,We){try{Sc(e.removed,{attribute:We.getAttributeNode(Se),from:We})}catch{Sc(e.removed,{attribute:null,from:We})}if(We.removeAttribute(Se),Se==="is")if(ve||j)try{Hr(We)}catch{}else try{We.setAttribute(Se,"")}catch{}},QE=function(Se){let We=null,ut=null;if(ue)Se="<remove></remove>"+Se;else{const Ji=S5(Se,/^[\r\n\t ]+/);ut=Ji&&Ji[0]}At==="application/xhtml+xml"&&De===Ae&&(Se='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Se+"</body></html>");const wi=y?y.createHTML(Se):Se;if(De===Ae)try{We=new f().parseFromString(wi,At)}catch{}if(!We||!We.documentElement){We=S.createDocument(De,"template",null);try{We.documentElement.innerHTML=Ve?E:wi}catch{}}const Pn=We.body||We.documentElement;return Se&&ut&&Pn.insertBefore(i.createTextNode(ut),Pn.childNodes[0]||null),De===Ae?T.call(We,ae?"html":"body")[0]:ae?We.documentElement:Pn},JE=function(Se){return A.call(Se.ownerDocument||Se,Se,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Mv=function(Se){return Se instanceof d&&(typeof Se.nodeName!="string"||typeof Se.textContent!="string"||typeof Se.removeChild!="function"||!(Se.attributes instanceof c)||typeof Se.removeAttribute!="function"||typeof Se.setAttribute!="function"||typeof Se.namespaceURI!="string"||typeof Se.insertBefore!="function"||typeof Se.hasChildNodes!="function")},eS=function(Se){return typeof a=="function"&&Se instanceof a};function Io(ct,Se,We){ch(ct,ut=>{ut.call(e,Se,We,gr)})}const tS=function(Se){let We=null;if(Io(D.beforeSanitizeElements,Se,null),Mv(Se))return Hr(Se),!0;const ut=Wi(Se.nodeName);if(Io(D.uponSanitizeElement,Se,{tagName:ut,allowedTags:q}),Z&&Se.hasChildNodes()&&!eS(Se.firstElementChild)&&Gn(/<[/\w!]/g,Se.innerHTML)&&Gn(/<[/\w!]/g,Se.textContent)||Se.nodeType===kc.progressingInstruction||Z&&Se.nodeType===kc.comment&&Gn(/<[/\w]/g,Se.data))return Hr(Se),!0;if(!q[ut]||pe[ut]){if(!pe[ut]&&nS(ut)&&(ne.tagNameCheck instanceof RegExp&&Gn(ne.tagNameCheck,ut)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(ut)))return!1;if(me&&!ee[ut]){const wi=_(Se)||Se.parentNode,Pn=b(Se)||Se.childNodes;if(Pn&&wi){const Ji=Pn.length;for(let cs=Ji-1;cs>=0;--cs){const Ro=m(Pn[cs],!0);Ro.__removalCount=(Se.__removalCount||0)+1,wi.insertBefore(Ro,v(Se))}}}return Hr(Se),!0}return Se instanceof l&&!Jae(Se)||(ut==="noscript"||ut==="noembed"||ut==="noframes")&&Gn(/<\/no(script|embed|frames)/i,Se.innerHTML)?(Hr(Se),!0):(Re&&Se.nodeType===kc.text&&(We=Se.textContent,ch([R,O,M],wi=>{We=xc(We,wi," ")}),Se.textContent!==We&&(Sc(e.removed,{element:Se.cloneNode()}),Se.textContent=We)),Io(D.afterSanitizeElements,Se,null),!1)},iS=function(Se,We,ut){if(oe&&(We==="id"||We==="name")&&(ut in i||ut in Qae))return!1;if(!(Be&&!ye[We]&&Gn(U,We))){if(!(xe&&Gn($,We))){if(!be[We]||ye[We]){if(!(nS(Se)&&(ne.tagNameCheck instanceof RegExp&&Gn(ne.tagNameCheck,Se)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(Se))&&(ne.attributeNameCheck instanceof RegExp&&Gn(ne.attributeNameCheck,We)||ne.attributeNameCheck instanceof Function&&ne.attributeNameCheck(We))||We==="is"&&ne.allowCustomizedBuiltInElements&&(ne.tagNameCheck instanceof RegExp&&Gn(ne.tagNameCheck,ut)||ne.tagNameCheck instanceof Function&&ne.tagNameCheck(ut))))return!1}else if(!N[We]){if(!Gn(re,xc(ut,W,""))){if(!((We==="src"||We==="xlink:href"||We==="href")&&Se!=="script"&&mO(ut,"data:")===0&&ke[Se])){if(!(Ke&&!Gn(B,xc(ut,W,"")))){if(ut)return!1}}}}}}return!0},nS=function(Se){return Se!=="annotation-xml"&&S5(Se,te)},sS=function(Se){Io(D.beforeSanitizeAttributes,Se,null);const{attributes:We}=Se;if(!We||Mv(Se))return;const ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be,forceKeepAttr:void 0};let wi=We.length;for(;wi--;){const Pn=We[wi],{name:Ji,namespaceURI:cs,value:Ro}=Pn,Td=Wi(Ji),$v=Ro;let Dn=Ji==="value"?$v:gO($v);if(ut.attrName=Td,ut.attrValue=Dn,ut.keepAttr=!0,ut.forceKeepAttr=void 0,Io(D.uponSanitizeAttribute,Se,ut),Dn=ut.attrValue,he&&(Td==="id"||Td==="name")&&(Au(Ji,Se),Dn=ce+Dn),Z&&Gn(/((--!?|])>)|<\/(style|title)/i,Dn)){Au(Ji,Se);continue}if(ut.forceKeepAttr)continue;if(!ut.keepAttr){Au(Ji,Se);continue}if(!Xe&&Gn(/\/>/i,Dn)){Au(Ji,Se);continue}Re&&ch([R,O,M],oS=>{Dn=xc(Dn,oS," ")});const rS=Wi(Se.nodeName);if(!iS(rS,Td,Dn)){Au(Ji,Se);continue}if(y&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!cs)switch(h.getAttributeType(rS,Td)){case"TrustedHTML":{Dn=y.createHTML(Dn);break}case"TrustedScriptURL":{Dn=y.createScriptURL(Dn);break}}if(Dn!==$v)try{cs?Se.setAttributeNS(cs,Ji,Dn):Se.setAttribute(Ji,Dn),Mv(Se)?Hr(Se):E5(e.removed)}catch{Au(Ji,Se)}}Io(D.afterSanitizeAttributes,Se,null)},ele=function ct(Se){let We=null;const ut=JE(Se);for(Io(D.beforeSanitizeShadowDOM,Se,null);We=ut.nextNode();)Io(D.uponSanitizeShadowNode,We,null),tS(We),sS(We),We.content instanceof r&&ct(We.content);Io(D.afterSanitizeShadowDOM,Se,null)};return e.sanitize=function(ct){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},We=null,ut=null,wi=null,Pn=null;if(Ve=!ct,Ve&&(ct="<!-->"),typeof ct!="string"&&!eS(ct))if(typeof ct.toString=="function"){if(ct=ct.toString(),typeof ct!="string")throw Tc("dirty is not a string, aborting")}else throw Tc("toString is not a function");if(!e.isSupported)return ct;if(ie||Ov(Se),e.removed=[],typeof ct=="string"&&(Q=!1),Q){if(ct.nodeName){const Ro=Wi(ct.nodeName);if(!q[Ro]||pe[Ro])throw Tc("root node is forbidden and cannot be sanitized in-place")}}else if(ct instanceof a)We=QE("<!---->"),ut=We.ownerDocument.importNode(ct,!0),ut.nodeType===kc.element&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?We=ut:We.appendChild(ut);else{if(!ve&&!Re&&!ae&&ct.indexOf("<")===-1)return y&&K?y.createHTML(ct):ct;if(We=QE(ct),!We)return ve?null:K?E:""}We&&ue&&Hr(We.firstChild);const Ji=JE(Q?ct:We);for(;wi=Ji.nextNode();)tS(wi),sS(wi),wi.content instanceof r&&ele(wi.content);if(Q)return ct;if(ve){if(j)for(Pn=C.call(We.ownerDocument);We.firstChild;)Pn.appendChild(We.firstChild);else Pn=We;return(be.shadowroot||be.shadowrootmode)&&(Pn=I.call(n,Pn,!0)),Pn}let cs=ae?We.outerHTML:We.innerHTML;return ae&&q["!doctype"]&&We.ownerDocument&&We.ownerDocument.doctype&&We.ownerDocument.doctype.name&&Gn(L5,We.ownerDocument.doctype.name)&&(cs="<!DOCTYPE "+We.ownerDocument.doctype.name+`>
`+cs),Re&&ch([R,O,M],Ro=>{cs=xc(cs,Ro," ")}),y&&K?y.createHTML(cs):cs},e.setConfig=function(){let ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ov(ct),ie=!0},e.clearConfig=function(){gr=null,ie=!1},e.isValidAttribute=function(ct,Se,We){gr||Ov({});const ut=Wi(ct),wi=Wi(Se);return iS(ut,wi,We)},e.addHook=function(ct,Se){typeof Se=="function"&&Sc(D[ct],Se)},e.removeHook=function(ct,Se){if(Se!==void 0){const We=hO(D[ct],Se);return We===-1?void 0:pO(D[ct],We,1)[0]}return E5(D[ct])},e.removeHooks=function(ct){D[ct]=[]},e.removeAllHooks=function(){D=R5()},e}var Ul=P5();const D5=/https?:\/\/search.bilibili.com\/.*$/,RO=/https?:\/\/(?:www.)?bilibili.com\/video.*/,PO=/https?:\/\/(?:www.)?bilibili.com\/(?:video|list)\/.*/,DO=/https?:\/\/(?:www.)?bilibili.com\/bangumi\/play\/.*/,O5=/https?:\/\/(?:www.)?bilibili.com\/(?:c|v|anime|guochuang|tv|movie|variety|mooc).*/,OO=/https?:\/\/space.bilibili\.com\..*/,M5=/https?:\/\/account\.bilibili\.com\/big.*$/,MO=/https?:\/\/t.bilibili.com.*/,$O=/https?:\/\/(?:www.)?bilibili.com\/read\/home.*/,FO=/https?:\/\/(?:www\.)?bilibili\.com\/read\/(?:preview|pcpreview).*/,BO=/https?:\/\/member.bilibili.com\/platform.*/,NO=/https?:\/\/message.bilibili.com.*$/,UO=1e3*60*5;class $5{constructor(){return this.cache=new Map,new Proxy({},{get:(e,i)=>{if(this.cache.has(i))return this.cache.get(i);{const n=new Proxy({},{get(s,r){return o=>A3(r,{contentScriptQuery:r,...o})}});return this.cache.set(i,n),n}}})}}const ze=new $5,VO=Object.freeze(Object.defineProperty({__proto__:null,APIClient:$5,default:ze},Symbol.toStringTag,{value:"Module"})),An=Ff("topBar",()=>{const t=Ha(),e=z(!0),i=Mt({}),n=Mt({}),s=Mt({}),r=["reply","at","chat","sys_msg"],o=ge(()=>{let N=0;return r.forEach(J=>{const fe=n[J];typeof fe=="number"&&(N+=fe)}),typeof s.follow_unread=="number"&&(N+=s.follow_unread),typeof s.unfollow_unread=="number"&&(N+=s.unfollow_unread),N}),a=z(0),l=z(0),u=Mt([]),c=z(!1),d=Mt([]),f=Mt([]),h=z(!1),p=z(!1),m=z(1),g=z(""),v=z(""),b=new Map,_=Mt({}),y=z(!1),E=z(!1),S=z(!1),A=Mt({notifications:!1}),C=z("https://message.bilibili.com/"),T=Mt({channels:!1,userPanel:!1,notifications:!1,moments:!1,favorites:!1,history:!1,watchLater:!1,upload:!1,more:!1}),I=z(!0),D=z(""),R=z(!1),O=ge(()=>D5.test(location.href)),M=ge(()=>!!(Et()||PO.test(location.href)||DO.test(location.href)||MO.test(location.href)||O5.test(location.href)||$O.test(location.href)||M5.test(location.href))),U=ge(()=>BO.test(location.href)||FO.test(location.href)?!1:!!k.value.showTopBar);async function $(N=0){const fe=(N+1)*1e3;try{const Ee=await ze.user.getUserInfo();if(Ee.code===0){const Ae=e.value,De=i.mid;e.value=!0,Object.assign(i,Ee.data),(!Ae||De!==i.mid)&&(E.value=!1,y.value=!1,S.value=!1)}else if(Ee.code===-101)e.value=!1,E.value=!1,y.value=!1,S.value=!1;else{if(N<2){setTimeout(()=>{$(N+1)},fe);return}e.value=!1,E.value=!1,y.value=!1,S.value=!1}}catch{if(N<2){setTimeout(()=>{$(N+1)},fe);return}e.value=!1,E.value=!1,y.value=!1,S.value=!1}}async function B(){if(e.value)try{let N=await ze.notification.getUnreadMsg();N.code===0&&Object.assign(n,N.data),N=await ze.notification.getUnreadDm(),N.code===0&&Object.assign(s,N.data)}catch(N){console.error(N)}}async function W(){if(!(!e.value||i.vip?.status!==1||!k.value.showBCoinReceiveReminder)&&!E.value)try{const N=await ze.user.getPrivilegeInfo();if(N.code===0){if(Object.assign(_,N.data),_.vip_type<2)return;const J=_.list?.find(fe=>fe.type===1);J?J.state===1?(E.value=!0,y.value=!1):(y.value=J.state===0&&J.next_receive_days>0,y.value&&k.value.autoReceiveBCoinCoupon&&await te()):y.value=!1}}catch(N){console.error("Failed to check B-coin receive status:",N),y.value=!1}}async function te(){if(!(!e.value||!y.value))try{const N=await ze.user.exchangeCoupon({type:"1",csrf:oi()});N.code===0?(E.value=!0,y.value=!1,t.success("B")):t.error(`B: ${N.message}`)}catch{t.error("B")}}async function re(){if(!(!e.value||i.vip?.status!==1||!k.value.autoReceiveVipExp)&&!S.value)try{const N=await ze.user.receiveVipExp({csrf:oi()});N.code===0?(S.value=!0,t.success("",{timeout:1500})):N.code===69198&&(S.value=!0)}catch{}}async function q(N="video"){if(!(!e.value||h.value))try{h.value=!0;const J=await ze.moment.getMomentsUpdate({type:N,update_baseline:"0"});J.code===0&&J.data&&(a.value=J.data.update_num)}catch(J){console.error(J)}finally{h.value=!1}}async function le(){if(e.value)try{const N=await ze.watchlater.getWatchLaterListByPage({pn:1,ps:10});N.code===0&&(l.value=N.data.count,Object.assign(u,N.data.list))}catch(N){console.error(N)}}async function be(){if(e.value){c.value=!0;try{const N=await ze.watchlater.getWatchLaterListByPage({pn:1,ps:10});N.code===0&&(l.value=N.data.count,Object.assign(u,N.data.list))}catch(N){console.error(N)}finally{c.value=!1}}}async function se(){if(!e.value||c.value)return;const N=Math.floor(u.length/10)+1,J=Math.ceil(l.value/10);if(!(N>J)){c.value=!0;try{const fe=await ze.watchlater.getWatchLaterListByPage({pn:N,ps:10});fe.code===0&&u.push(...fe.data.list)}catch(fe){console.error(fe)}finally{c.value=!1}}}async function ne(N,J){try{(await ze.watchlater.removeFromWatchLater({aid:J,csrf:oi()})).code===0&&(u.splice(N,1),l.value=u.length)}catch(fe){console.error(fe)}}function pe(N){d.splice(0),g.value="",v.value="",m.value=1,p.value=!1,h.value=!1,b.clear(),ye(N)}function ye(N){N!=="live"?xe(N):ie()}function xe(N){h.value||p.value||(h.value=!0,ze.moment.getTopBarMoments({type:N,update_baseline:g.value||void 0,offset:v.value||void 0}).then(J=>{if(J.code===0){const{has_more:fe,items:Ee,offset:Ae,update_baseline:De}=J.data;if(!fe){p.value=!0;return}if(g.value=De,v.value=Ae,Ee?.length){let Ve=Ee;N==="video"&&(k.value.filterArticlesInMoments?Ve=Ee.filter(Fe=>Fe.type===8):Ve=Ee.filter(Fe=>Fe.type===8||Fe.type===64));let tt=Ve;if(N==="video"){const Fe=Ve.filter(mt=>mt.type===8),je=Ve.filter(mt=>mt.type===64);tt=[...ae(Fe),...je]}if(!v.value&&N==="video"){const Fe=a.value,je=Math.min(Fe,tt.length);a.value=je}tt.forEach(Fe=>{const je={type:N,title:Fe.title,author:Fe.authors?Fe.authors.map(et=>et.name).join(" / "):Fe.author.name,authorFace:Fe.author.face,authorJumpUrl:Fe.author.jump_url,pubTime:Fe.pub_time,cover:Fe.cover,link:Fe.jump_url,rid:Fe.rid,isCollaborative:!!Fe.authors,authors:Fe.authors};if(d.push(je),N==="video"&&Fe.type===8){const et=Be(Fe);if(!et)return;const mt=b.get(et);if(!mt)return;mt.moment=je,Z(je,mt.item)}})}}}).catch(J=>console.error(J)).finally(()=>h.value=!1))}function Be(N){const fe=(typeof N.jump_url=="string"?N.jump_url:"").match(/\/(BV\w+)/);if(fe?.[1])return fe[1];const Ee=N?.bvid||N?.modules?.module_dynamic?.major?.archive?.bvid;return typeof Ee=="string"&&Ee?Ee:null}function Ke(N){return{name:N?.name,face:N?.face,jump_url:N?.jump_url}}function Xe(N){return Array.isArray(N.authors)&&N.authors.length>0?N.authors.map(Ke):N.author?[Ke(N.author)]:[]}function Re(N,J){const fe=Xe(J);if(fe.length===0)return;const Ee=Array.isArray(N.authors)?N.authors:Xe(N);fe.forEach(Ae=>{const De=Ae.jump_url||Ae.name;Ee.some(tt=>(tt.jump_url||tt.name)===De)||Ee.push(Ae)}),Ee.length>1&&(N.authors=Ee)}function Z(N,J){!Array.isArray(J.authors)||J.authors.length<=1||(N.isCollaborative=!0,N.authors=J.authors,N.author=J.authors.map(fe=>fe.name).join(" / "))}function ae(N){const J=[];return N.forEach(fe=>{const Ee=Be(fe);if(!Ee){J.push(fe);return}const Ae=b.get(Ee);if(!Ae){const De={...fe};b.set(Ee,{item:De}),J.push(De);return}Re(Ae.item,fe),Ae.moment&&Z(Ae.moment,Ae.item)}),J}function ie(){if(h.value||p.value)return;h.value=!0;const N=10;ze.moment.getTopBarLiveMoments({page:m.value,pagesize:N}).then(J=>{if(J.code===0){const{list:fe}=J.data;fe.length<N&&(p.value=!0),fe.length===N&&m.value++,d.push(...fe.map(Ee=>({type:"live",title:Ee.title,author:Ee.uname,authorFace:Ee.face,cover:Ee.pic,link:Ee.link})))}}).finally(()=>h.value=!1)}function ue(N){return N<a.value}function ve(N){f.includes(N)?ze.watchlater.removeFromWatchLater({aid:N,csrf:oi()}).then(fe=>{fe.code===0&&(f.length=0,Object.assign(f,f.filter(Ee=>Ee!==N)))}):ze.watchlater.saveToWatchLater({aid:N,csrf:oi()}).then(fe=>{fe.code===0&&f.push(N)})}function j(N){k.value.openNotificationsPageAsDrawer&&(A.notifications=!0,C.value=N.url)}function K(N){Object.keys(T).forEach(J=>{J!==N&&(T[J]=!1)})}let oe=null;async function he(){await $(),e.value&&(W(),re(),B(),q(),be())}function ce(){oe&&(clearInterval(oe),oe=null),oe=setInterval(()=>{e.value&&(B(),T.moments||q(),T.watchLater||le(),W(),re())},UO)}function me(){oe&&(clearInterval(oe),oe=null)}function Q(){me(),Object.keys(n).forEach(N=>{n[N]=0}),Object.keys(s).forEach(N=>{s[N]=0}),a.value=0,l.value=0,K(),A.notifications=!1,y.value=!1,E.value=!1,S.value=!1}const Y=Mt({});function ee(N,J){Y[N]=J}function we(N){return Y[N]||!1}function ke(N){I.value=N}function de(N){R.value=N}return{isLogin:e,userInfo:i,unReadMessage:n,unReadDm:s,unReadMessageCount:o,newMomentsCount:a,watchLaterCount:l,watchLaterList:u,isLoadingWatchLater:c,drawerVisible:A,notificationsDrawerUrl:C,popupVisible:T,isSearchPage:O,isTopBarFixed:M,showTopBar:U,getUserInfo:$,getUnreadMessageCount:B,getTopBarNewMomentsCount:q,handleNotificationsItemClick:j,closeAllPopups:K,initData:he,cleanup:Q,isMouseOverPopup:Y,setMouseOverPopup:ee,getMouseOverPopup:we,startUpdateTimer:ce,stopUpdateTimer:me,checkBCoinReceiveStatus:W,autoReceiveBCoin:te,autoReceiveVipExp:re,moments:d,addedWatchLaterList:f,isLoadingMoments:h,noMoreMomentsContent:p,livePage:m,momentUpdateBaseline:g,momentOffset:v,getTopBarMoments:xe,initMomentsData:pe,getMomentsData:ye,isNewMoment:ue,toggleWatchLater:ve,getWatchLaterCount:le,getAllWatchLaterList:be,loadMoreWatchLaterList:se,deleteWatchLaterItem:ne,privilegeInfo:_,hasBCoinToReceive:y,bCoinAlreadyReceived:E,topBarVisible:I,searchKeyword:D,setTopBarVisible:ke,isSwitcherButtonVisible:R,setSwitcherButtonVisible:de}}),jO=Object.freeze(Object.defineProperty({__proto__:null,useTopBarStore:An},Symbol.toStringTag,{value:"Module"}));function HO(t){if(t.shadowRoot)return t.shadowRoot}function F5(t){const e=t?.activeElement;if(!e)return;const i=HO(e);return i&&i.activeElement?F5(i):e}const zO=20;function GO(t){return t.sort((e,i)=>i.timestamp-e.timestamp),t}const Tu=class Tu{constructor(){this.iframe=new Bk(()=>Array.from(document.getElementsByTagName("iframe")).find(e=>e.src.includes("https://s1.hdslb.com/bfs/seed/jinkela/short/cols/iframe.html")))}async operate(e,i){const n=this.iframe.value;switch(e){case"COLS_GET":return new Promise(s=>{n.contentWindow.postMessage({type:"COLS_GET",key:Tu.BILIBILI_HISTORY_KEY},n.src),window.addEventListener("message",r=>{r.origin==="https://s1.hdslb.com"&&r.data&&r.data?.type==="COLS_RES"&&r.data?.key===Tu.BILIBILI_HISTORY_KEY&&s(r.data)},{once:!0})});case"COLS_CLR":return n.contentWindow.postMessage({type:"COLS_CLR",key:"search_history"},n.src);case"COLS_SET":return n.contentWindow.postMessage({type:"COLS_SET",key:Tu.BILIBILI_HISTORY_KEY,value:i},n.src)}}getSearchHistory(){return this.operate("COLS_GET")}clearSearchHistory(){return this.operate("COLS_CLR")}addSearchHistory(e){return this.operate("COLS_SET",e)}removeSearchHistory(e){return this.operate("COLS_SET",e)}};Tu.BILIBILI_HISTORY_KEY="search_history:search_history";let T1=Tu;const hh=new T1;async function A1(){const t=await hh.getSearchHistory();if(!t)return[];try{const e=JSON.parse(t.value);return GO(e)}catch{return[]}}async function WO(t){let e=await A1(),i=!1;return e.forEach(n=>{n.value===t.value&&(n.timestamp=t.timestamp,i=!0)}),i||e.unshift(t),e=e.filter((n,s)=>s<zO?n:!1),hh.addSearchHistory(JSON.stringify(e)),e}async function KO(t){let e=await A1();return e=e.filter(i=>i.value!==t),hh.removeSearchHistory(JSON.stringify(e)),e}async function YO(){return hh.clearSearchHistory()}const XO=["src"],qO=["value","placeholder","onKeydown","onKeyupPassive"],ZO={key:0,id:"search-dropdown"},QO={key:0,class:"hot-search-section"},JO={class:"title p-2 pb-0"},eM={class:"hot-search-container p-2 grid grid-cols-2 gap-x-4 gap-y-1"},tM={class:"keyword",text:"base $bew-text-1",truncate:"","flex-1":""},iM=["src"],nM={key:1,class:"divider","mx-2":"","my-1":"","h-px":"",bg:"$bew-border-color"},sM={key:2,class:"history-section"},rM={class:"title p-2 pb-0 flex justify-between"},oM={class:"history-item-container p2 flex flex-wrap gap-x-3 gap-y-3"},aM=["onClick"],lM={key:0,id:"search-suggestion"},uM=["onClick"],cM=["innerHTML"],dM=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"SearchBar",props:{darkenOnFocus:{type:Boolean},blurredOnFocus:{type:Boolean},focusedCharacter:{},showHotSearch:{type:Boolean},modelValue:{},searchBehavior:{}},emits:["update:modelValue","search"],setup(t,{emit:e}){const i=t,n=e,s=z(),r=z(),o=z(!1),a=z(i.modelValue??""),l=Mt([]),u=z(-1),c=Zt([]),d=z([]),f=z([]),h=z([]),p=z(!1),m=z(null),g=z(!1),v=ge(()=>i.searchBehavior??"navigate"),b=ge(()=>v.value==="stay"),_=ge(()=>k.value.showSearchRecommendation&&m.value?m.value.show_name||m.value.name:""),y=hs("BEWLY_APP",void 0),E=An(),S=ge(()=>{if(!k.value.usePluginSearchResultsPage)return!1;if(y?.activatedPage)return y.activatedPage.value===_t.SearchResults;const se=new URLSearchParams(window.location.search);return se.get("page")==="SearchResults"&&!!se.get("keyword")});Pe(()=>i.modelValue,se=>{const ne=se??"";ne!==a.value&&(a.value=ne)}),Pe(a,se=>{se!==(i.modelValue??"")&&n("update:modelValue",se)}),Pe(o,async se=>{if(se){try{c.value=await A1()}catch(ne){console.error("Failed to load search history:",ne),c.value=[]}if(i.showHotSearch??k.value.showHotSearchInTopBar)try{await A()}catch(ne){console.error("Failed to load hot search list:",ne)}}}),Py(s,()=>{o.value=!1});async function A(){if(!p.value)try{p.value=!0;const se=await ze.search.getHotSearchList({limit:10});se&&se.code===0&&(h.value=se.data.trending.list.slice(0,10))}catch(se){console.error("Failed to load hot search data:",se)}finally{p.value=!1}}async function C(){if(!g.value)try{g.value=!0;const se=await ze.search.getDefaultSearchRecommendation();se&&se.code===0&&(m.value=se.data)}catch(se){console.error("Failed to load search recommendation:",se)}finally{g.value=!1}}let T=null;function I(){k.value.showSearchRecommendation&&(C(),T&&clearInterval(T),T=setInterval(()=>{k.value.showSearchRecommendation&&C()},600*1e3))}function D(){T&&(clearInterval(T),T=null)}Pe(()=>k.value.showSearchRecommendation,se=>{se?I():(D(),m.value=null)}),st(()=>{k.value.showSearchRecommendation&&I()}),Ki(()=>{D()}),Ps("/",se=>{const ne=se.target,pe=["INPUT","TEXTAREA"];if(ne&&(pe.includes(ne.tagName)||ne.isContentEditable))return;const ye=F5(document);ye&&ne!==ye&&(pe.includes(ye.tagName)||ye.isContentEditable)||(se.preventDefault(),r.value?.focus())}),Ps("Escape",se=>{console.log("[SearchBar] ESC key pressed!"),console.log("[SearchBar] isFocus.value:",o.value),se.preventDefault(),r.value?.blur(),o.value=!1,console.log("[SearchBar] Blurred search input")},{target:r});const R=wm(()=>{u.value=-1,a.value.trim().length>0?ze.search.getSearchSuggestion({term:a.value}).then(se=>{!se||se&&se.code!==0||Object.assign(l,se.result.tag)}):l.length=0},200);function O(se){const ne=se.target.value;a.value=ne,R()}function M(se){const ne=encodeURIComponent(se);return E.isLogin?k.value.usePluginSearchResultsPage?`https://www.bilibili.com/?page=SearchResults&keyword=${ne}`:`https://search.bilibili.com/all?keyword=${ne}`:`https://search.bilibili.com/all?keyword=${ne}`}function U(se){try{return new URL(se).searchParams.get("keyword")||""}catch{return""}}async function $(se){let ne=(se||a.value).trim();if(!ne&&k.value.showSearchRecommendation&&m.value&&(ne=U(m.value.url)),!ne)return;const pe={value:ne,timestamp:Number(new Date)};try{c.value=await WO(pe)}catch(xe){console.error("Failed to add search history:",xe)}if(b.value){n("search",ne),o.value=!1;return}if(S.value){n("search",ne),o.value=!1;return}const ye=M(ne);if(k.value.searchBarLinkOpenMode==="background")Wo(ye);else{let xe="_blank";k.value.searchBarLinkOpenMode==="currentTabIfNotHomepage"?xe=Et()?"_blank":"_self":k.value.searchBarLinkOpenMode==="currentTab"?xe="_self":k.value.searchBarLinkOpenMode==="newTab"&&(xe="_blank"),window.open(ye,xe)}}function B(se,ne){ne.preventDefault(),ne.stopPropagation(),$(se)}async function W(se){c.value=await KO(se)}function te(se){if(!se.isComposing){if(u.value<=0){u.value=0;return}u.value--,o.value&&l.length!==0?a.value=l[u.value].value:o.value&&c.value.length!==0&&(a.value=c.value[u.value].value),f.value.forEach((ne,pe)=>{pe===u.value?ne.classList.add("active"):ne.classList.remove("active")}),d.value.forEach((ne,pe)=>{pe===u.value?ne.classList.add("active"):ne.classList.remove("active")})}}function re(se){if(se.isComposing)return;let ne=!1;if(o.value&&l.length!==0?ne=!0:o.value&&!a.value&&c.value.length!==0&&(ne=!1),ne&&u.value>=l.length-1){u.value=l.length-1;return}if(!ne&&u.value>=c.value.length-1){u.value=c.value.length-1;return}u.value++,a.value=ne?l[u.value].value:c.value[u.value].value,f.value.forEach((pe,ye)=>{ye===u.value?pe.classList.add("active"):pe.classList.remove("active")}),d.value.forEach((pe,ye)=>{ye===u.value?pe.classList.add("active"):pe.classList.remove("active")})}function q(se){!se.shiftKey&&se.key==="Enter"&&!se.isComposing&&(se.preventDefault(),$(a.value))}async function le(){await YO(),c.value=[]}function be(se){const ne=se.relatedTarget;ne&&s.value?.contains(ne)||(o.value=!1)}return(se,ne)=>{const pe=Ge("ALink");return L(),P("div",{id:"search-wrap",ref_key:"searchWrapRef",ref:s,w:"full","max-w":"550px","h-46px":"",pos:"relative",onFocusout:be},[!se.darkenOnFocus&&o.value?(L(),P("div",{key:0,pos:"fixed top-0 left-0",w:"full",h:"full",content:"~",onClick:ne[0]||(ne[0]=ye=>o.value=!1)})):X("",!0),F(nt,{name:"mask"},{default:H(()=>[se.darkenOnFocus&&o.value?(L(),P("div",{key:0,pos:"fixed top-0 left-0","w-full":"","h-full":"",bg:"black opacity-60",onClick:ne[1]||(ne[1]=ye=>o.value=!1)})):X("",!0)]),_:1}),se.blurredOnFocus?(L(),P("div",{key:1,pos:"fixed top-0 left-0","w-full":"","h-full":"","duration-500":"","pointer-events-none":"","ease-out":"",style:Ue({backdropFilter:o.value?"blur(15px)":"blur(0)"})},null,4)):X("",!0),x("div",{class:Ie(["search-bar group",o.value?"focus":""]),flex:"~ items-center",pos:"relative","h-inherit":""},[F(nt,{name:"focus-character"},{default:H(()=>[Bt(x("img",{src:se.focusedCharacter,width:"100","object-contain":"",pos:"absolute right-0 bottom-40px"},null,8,XO),[[ii,se.focusedCharacter&&o.value]])]),_:1}),x("input",{ref_key:"keywordRef",ref:r,value:a.value,placeholder:_.value,class:"group",rounded:"60px",p:"l-6 r-18 y-3","h-inherit":"",text:"$b-search-bar-normal-text-color group-focus-within:$b-search-bar-focus-text-color group-hover:$b-search-bar-hover-text-color","un-border":"1 solid $bew-border-color",transition:"all duration-300",type:"text",onFocus:ne[2]||(ne[2]=ye=>o.value=!0),onInput:O,onKeydown:[kl(ft(q,["stop"]),["enter"]),ft(()=>{},["stop"])],onKeyupPassive:[kl(ft(te,["stop"]),["up"]),kl(ft(re,["stop"]),["down"])]},null,40,qO),o.value&&a.value?(L(),P("button",{key:0,pos:"absolute right-12",bg:"$bew-fill-1 hover:$bew-fill-2",text:"xs","rounded-10":"","p-1":"",flex:"~ items-center justify-between",onClick:ne[3]||(ne[3]=ye=>a.value="")},[...ne[6]||(ne[6]=[x("div",{"i-ic-baseline-clear":"","shrink-0":""},null,-1)])])):X("",!0),x("button",{"p-2":"","rounded-full":"",text:"lg leading-0 $b-search-bar-normal-icon-color group-hover:$b-search-bar-hover-icon-color group-focus-within:$b-search-bar-focus-icon-color",transition:"all duration-300","border-none":"","outline-none":"",pos:"absolute right-6px",bg:"hover:$bew-fill-2",filter:"group-focus-within:~",style:{"--un-drop-shadow":"drop-shadow(0 0 6px var(--bew-theme-color))"},onClick:ne[4]||(ne[4]=ye=>$(a.value))},[...ne[7]||(ne[7]=[x("div",{"i-tabler:search":"",block:"","align-middle":""},null,-1)])])],2),F(nt,{name:"result-list"},{default:H(()=>[o.value&&a.value.length===0&&(c.value.length!==0||(se.showHotSearch??w(k).showHotSearchInTopBar)&&h.value.length>0)?(L(),P("div",ZO,[(se.showHotSearch??w(k).showHotSearchInTopBar)&&h.value.length>0?(L(),P("div",QO,[x("div",JO,[x("span",null,G(se.$t("search_bar.hot_search_title")||""),1)]),x("div",eM,[(L(!0),P(Te,null,Ne(h.value.slice(0,10),(ye,xe)=>(L(),_e(pe,{key:ye.keyword,href:M(ye.keyword),type:"searchBar","custom-click-event":!0,class:"hot-search-item cursor-pointer duration-300",flex:"","items-center":"","gap-2":"",p:"x-2 y-1",hover:"text-$bew-theme-color",onClick:Be=>B(ye.keyword,Be)},{default:H(()=>[x("span",{class:Ie(["index",{"top-1":xe===0,"top-2":xe===1,"top-3":xe===2,normal:xe>2}])},G(xe+1),3),x("span",tM,G(ye.show_name),1),ye.icon&&!ye.icon.includes(".gif")?(L(),P("img",{key:0,src:ye.icon,class:"hot-search-icon","w-4":"","h-4":"","object-contain":"",alt:""},null,8,iM)):X("",!0)]),_:2},1032,["href","onClick"]))),128))])])):X("",!0),(se.showHotSearch??w(k).showHotSearchInTopBar)&&h.value.length>0&&c.value.length>0?(L(),P("div",nM)):X("",!0),c.value.length!==0?(L(),P("div",sM,[x("div",rM,[x("span",null,G(se.$t("search_bar.history_title")),1),x("button",{class:"rounded-2 duration-300 pointer-events-auto cursor-pointer",hover:"text-$bew-theme-color",text:"base $bew-text-2",onClick:le},G(se.$t("search_bar.clear_history")),1)]),x("div",oM,[(L(!0),P(Te,null,Ne(c.value,ye=>(L(),_e(pe,{key:ye.timestamp,ref_for:!0,ref_key:"historyItemRef",ref:d,href:M(ye.value),type:"searchBar","custom-click-event":!0,class:"history-item group",flex:"","justify-between":"","items-center":"",onClick:xe=>B(ye.value,xe)},{default:H(()=>[x("span",null,G(ye.value),1),x("button",{"rounded-full":"","duration-300":"","pointer-events-auto":"","cursor-pointer":"","p-1":"",text:"xs $bew-text-2 hover:white","leading-0":"",bg:"$bew-fill-2 hover:$bew-theme-color",pos:"absolute top-0 right-0","scale-80":"","opacity-0":"","group-hover:opacity-100":"",onMousedown:ne[5]||(ne[5]=ft(()=>{},["prevent"])),onClick:ft(xe=>W(ye.value),["stop","prevent"])},[...ne[8]||(ne[8]=[x("div",{"i-ic-baseline-clear":""},null,-1)])],40,aM)]),_:2},1032,["href","onClick"]))),128))])])):X("",!0)])):X("",!0)]),_:1}),F(nt,{name:"result-list"},{default:H(()=>[o.value&&l.length!==0&&a.value.length>0?(L(),P("div",lM,[(L(!0),P(Te,null,Ne(l,(ye,xe)=>(L(),P("div",{key:xe,ref_for:!0,ref_key:"suggestionItemRef",ref:f,class:"suggestion-item",onClick:Be=>$(ye.value)},[x("span",{innerHTML:w(Ul).sanitize(ye.name)},null,8,cM)],8,uM))),128))])):X("",!0)]),_:1})],544)}}}),[["__scopeId","data-v-f62c5bed"]])},Symbol.toStringTag,{value:"Module"})),fM=["ring"],hM=["textContent"],pM=["border-color","transform"],mM=["onClick"],gM=["textContent"],hi=Me({__name:"Select",props:{options:{},modelValue:{}},emits:["update:modelValue","change"],setup(t,{emit:e}){const i=t,n=e,{mainAppRef:s}=$t(),r=z(""),o=z(!1),a=z({top:0,left:0,width:0}),l=z(null);Ia(()=>{i.options&&(r.value=`${i.options.find(p=>p.value===i.modelValue)?.label}`)}),st(()=>{i.options&&(r.value=`${i.options.find(p=>p.value===i.modelValue)?.label}`),window.addEventListener("resize",u)}),ki(()=>{window.removeEventListener("resize",u)});function u(){if(!l.value)return;const p=l.value.getBoundingClientRect();a.value={top:p.bottom+window.scrollY,left:p.left+window.scrollX,width:p.width}}function c(p){window.removeEventListener("click",()=>{}),r.value=p.label,n("update:modelValue",p.value),n("change",p.value),o.value=!1}function d(){o.value=!1}function f(){window.addEventListener("click",d)}function h(){window.removeEventListener("click",d)}return Jr(()=>{o.value&&u()},{flush:"pre"}),(p,m)=>(L(),P("div",{ref_key:"containerRef",ref:l,pos:"relative",onMouseleave:f,onMouseenter:h},[x("div",{p:"x-4 y-2",bg:"$bew-fill-1",rounded:"$bew-radius",text:"center $bew-text-1",cursor:"pointer",flex:"~",justify:"between",items:"center",w:"full",ring:w(o)?"2px $bew-theme-color":"","duration-300":"",onClick:m[0]||(m[0]=g=>o.value=!w(o))},[x("div",{truncate:"",overflow:"hidden",m:"r-2",textContent:G(w(r)==="undefined"?"":w(r))},null,8,hM),x("div",{border:"~ solid t-0 l-0 r-2 b-2","border-color":w(o)?"$bew-theme-color":"$bew-fill-4",p:"3px",m:"l-2",display:"inline-block",transform:`~ ${w(o)?"rotate-225 translate-y-1/4":"rotate-45 -translate-y-1/4"} `,transition:"all duration-300"},null,8,pM)],8,fM),(L(),_e(La,{to:w(s)},[F(nt,{name:"dropdown"},{default:H(()=>[w(o)?(L(),P("div",{key:0,style:Ue({top:`${w(a).top}px`,left:`${w(a).left}px`,width:`${w(a).width}px`,backdropFilter:"var(--bew-filter-glass-1)"}),pos:"absolute",bg:"$bew-elevated",shadow:"$bew-shadow-2",p:"2",m:"t-2",rounded:"$bew-radius",z:"10004",flex:"~ col gap-1",w:"full","max-h-300px":"","overflow-y-overlay":"","will-change-transform":""},[(L(!0),P(Te,null,Ne(p.options,g=>(L(),P("div",{key:g.value,p:"x-2 y-2",rounded:"$bew-radius",w:"full",bg:"hover:$bew-fill-2",transition:"all duration-300",cursor:"pointer",onClick:v=>c(g)},[x("span",{textContent:G(g.label)},null,8,gM)],8,mM))),128))],4)):X("",!0)]),_:1}),w(o)?(L(),P("div",{key:0,pos:"fixed top-0 left-0","w-full":"","h-full":"",z:"10003",onWheel:d},null,32)):X("",!0)],8,["to"]))],544))}}),vM=Object.freeze(Object.defineProperty({__proto__:null,default:hi},Symbol.toStringTag,{value:"Module"}));function B5(t,e){const i=z(),n=z({});Pe(()=>t.value,a=>{if(e.notrigger&&a)try{i.value=Ci(t)}catch(l){console.warn("Failed to unref element in transformer:",l)}});function s(){if(!i.value&&!Ci(t))return;let a="0px",l="0px";if(typeof e.x=="number"?a=`${e.x}px`:a=e.x,typeof e.y=="number"?l=`${e.y}px`:l=e.y,i.value&&e.centerTarget){const u=Ci(i.value),c=Ci(t);if(u&&c){const d=u.getBoundingClientRect(),f=c.getBoundingClientRect();if(e.centerTarget.x){const h=f.left+f.width/2,p=h-d.width/2,m=h+d.width/2,g=window.innerWidth,v=16;let b=0;m>g-v?b=-(m-(g-v)):p<v&&(b=v-p),b!==0?a=`calc(${e.x} - ${d.width/2}px + ${b}px)`:a=`calc(${e.x} - ${d.width/2}px)`}e.centerTarget.y&&(l=`calc(${e.y} - ${d.height/2}px)`)}}n.value={transform:"none !important",top:l,left:a}}function r(a){const l=(a||"").split(";").map(u=>{const[c,d]=u.split(":").map(f=>f.trim());return!c||!d?{}:{[c]:d}}).reduce((u,c)=>({...u,...c}),{});for(const u in n.value)l[u]=n.value[u];return Object.keys(l).map(u=>`${u}:${l[u]}`).join(";")}const o=xk(i);return dk(o,()=>{try{Ci(i)&&requestAnimationFrame(()=>{setTimeout(()=>{const l=Ci(i);if(l){s();const u=l.getAttribute("style");l.setAttribute("style",r(u))}},0)})}catch(a){console.warn("Failed to update style on visibility change:",a)}},{flush:"pre"}),i}var is=(t=>(t.PluginComponentsAndPages="PluginComponentsAndPages",t.BilibiliFeaturesEnhancement="BilibiliFeaturesEnhancement",t.Appearance="Appearance",t.Shortcuts="Shortcuts",t.Compatibility="Compatibility",t.About="About",t))(is||{}),ho=(t=>(t.General="General",t.VideoCard="VideoCard",t.TopBar="TopBar",t.DockAndSidebar="DockAndSidebar",t.Home="Home",t.Search="Search",t.VolumeBalance="VolumeBalance",t))(ho||{}),Vl=(t=>(t.Comments="Comments",t.VideoPlayback="VideoPlayback",t.AutoPlay="AutoPlay",t.VipFeatures="VipFeatures",t))(Vl||{});const _M={class:"fixed w-full h-full top-0 left-0"},bM={style:{"box-shadow":"var(--bew-shadow-4)"},relative:"",flex:"~ gap-2 col",rounded:"30px group-hover:25px","p-2":"",bg:"$bew-content-alt group-hover:$bew-elevated dark:$bew-elevated dark-group-hover:$bew-elevated",scale:"group-hover:105","duration-300":"","overflow-hidden":"",antialiased:""},yM=["onClick"],wM={flex:"~ items-center gap-2","shrink-0":""},EM={key:0,text:"xs",bg:"orange-500/20","px-2":"","py-0.5":"","rounded-full":"","text-orange-500":"","fw-500":""},SM={class:"settings-content",style:{"--un-shadow":"var(--bew-shadow-4), var(--bew-shadow-edge-glow-2)","backdrop-filter":"var(--bew-filter-glass-2)"},relative:"",overflow:"x-hidden","w-full":"","h-full":"",bg:"$bew-elevated-alt",shadow:"",rounded:"$bew-radius",border:"1 $bew-border-color"},xM={flex:"","justify-between":"","items-center":"","w-full":"","h-80px":"",pos:"fixed top-0 left-0",p:"x-11","z-1":"",rounded:"t-$bew-radius",style:{"text-shadow":"0 0 10px var(--bew-elevated-solid), 0 0 15px var(--bew-elevated-solid)"}},TM={text:"3xl","fw-bold":""},AM={"w-full":"","min-h":"[calc(100%-80px)]",p:"x-12 b-10"},kM=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Settings",emits:["close"],setup(t,{emit:e}){const i=e,{t:n}=St(),s={[is.PluginComponentsAndPages]:jt(()=>Promise.resolve().then(()=>rY)),[is.BilibiliFeaturesEnhancement]:jt(()=>Promise.resolve().then(()=>hY)),[is.Appearance]:jt(()=>Promise.resolve().then(()=>WY)),[is.Shortcuts]:jt(()=>Promise.resolve().then(()=>nX)),[is.Compatibility]:jt(()=>Promise.resolve().then(()=>rX)),[is.About]:jt(()=>Promise.resolve().then(()=>EX))},r=z(is.PluginComponentsAndPages),o=z(n("settings.title")),a=z();Ht(window,"resize",()=>{B5(a,{x:"50%",y:"50%",notrigger:!0,centerTarget:{x:!0,y:!0}})});const l=z();Pe(()=>r.value,()=>{l.value?.scrollTo({top:0})});const u=ge(()=>[{value:is.PluginComponentsAndPages,icon:"i-mingcute:plugin-2-line",iconActivated:"i-mingcute:plugin-2-fill",title:n("settings.menu_plugin_components_and_pages")},{value:is.BilibiliFeaturesEnhancement,icon:"i-mingcute:tv-2-line",iconActivated:"i-mingcute:tv-2-fill",title:n("settings.menu_bilibili_features_enhancement")},{value:is.Appearance,title:n("settings.menu_appearance"),icon:"i-mingcute:paint-brush-line",iconActivated:"i-mingcute:paint-brush-fill"},{value:is.Shortcuts,icon:"i-mingcute:keyboard-line",iconActivated:"i-mingcute:keyboard-fill",title:n("settings.shortcuts.title")},{value:is.Compatibility,icon:"i-mingcute:polygon-line",iconActivated:"i-mingcute:polygon-fill",title:n("settings.menu_compatibility")},{value:is.About,icon:"i-mingcute:information-line",iconActivated:"i-mingcute:information-fill",title:n("settings.menu_about")}]);Pe(()=>k.value.language,()=>{f()}),st(()=>{f()});function c(){i("close")}function d(h){r.value=h,f()}function f(){u.value.forEach(h=>{h.value===r.value&&(o.value=h.title)})}return(h,p)=>(L(),P("div",_M,[x("div",{class:"fixed w-full h-full top-0 left-0",onClick:c}),x("div",{id:"settings-window",ref_key:"settingsWindow",ref:a,pos:"fixed top-1/2 left-1/2",w:"90%",h:"90%","max-w-1000px":"","max-h-900px":"",transform:"~ translate-x--1/2 translate-y--1/2 gpu",flex:"~ justify-between items-center"},[x("aside",{class:Ie({group:!w(k).touchScreenOptimization}),"shrink-0":"",p:"x-4",pos:"absolute xl:left--84px left--44px","z-2":""},[x("ul",bM,[p[0]||(p[0]=x("div",{style:{"box-shadow":"var(--bew-shadow-edge-glow-2)","backdrop-filter":"var(--bew-filter-glass-2)"},pos:"absolute top-0 left-0","z--1":"","w-full":"","h-full":"","pointer-events-none":"",border:"1 $bew-border-color","rounded-inherit":"","duration-inherit":""},null,-1)),(L(!0),P(Te,null,Ne(w(u),m=>(L(),P("li",{key:m.value},[x("a",{"cursor-pointer":"",w:"40px group-hover:190px","h-40px":"","rounded-30px":"",flex:"","items-center":"","overflow-x-hidden":"","duration-300":"",bg:"hover:$bew-fill-2",class:Ie({"menu-item-activated":m.value===w(r)}),onClick:g=>d(m.value)},[Bt(x("div",{text:"xl center","w-40px":"","h-20px":"",flex:"~ shrink-0","justify-center":"",class:Ie(m.icon)},null,2),[[ii,m.value!==w(r)]]),Bt(x("div",{text:"xl center","w-40px":"","h-20px":"",flex:"~ shrink-0","justify-center":"",class:Ie(m.iconActivated)},null,2),[[ii,m.value===w(r)]]),x("div",wM,[x("span",null,G(m.title),1),m.badge?(L(),P("span",EM,G(m.badge),1)):X("",!0)])],10,yM)]))),128))])],2),x("div",SM,[x("header",xM,[x("div",{pos:"absolute top-0 left-0","w-inherit":"","h-inherit":"","pointer-events-none":"",style:Ue({maskImage:w(k).enableFrostedGlass?"linear-gradient(to bottom, black 0, transparent 100%)":"none",WebkitMaskImage:w(k).enableFrostedGlass?"linear-gradient(to bottom, black 0, transparent 100%)":"none",backdropFilter:"blur(6px)"}),"z--1":"","rounded-inherit":""},null,4),x("div",TM,G(w(o)),1),x("div",{style:{"backdrop-filter":"var(--bew-filter-glass-1)","box-shadow":"var(--bew-shadow-edge-glow-1), var(--bew-shadow-2)"},text:"!16px hover:$bew-theme-color",w:"32px",h:"32px",flex:"~ items-center justify-center shrink-0",bg:"$bew-elevated dark:$bew-fill-1 hover:$bew-theme-color-30","rounded-8":"",cursor:"pointer",border:"1 $bew-border-color","box-border":"","duration-300":"",onClick:c},[...p[1]||(p[1]=[x("div",{"i-ic-baseline-clear":""},null,-1)])])]),x("div",{ref_key:"scrollViewportRef",ref:l,style:Ue([{maskImage:w(k).enableFrostedGlass?"linear-gradient(to bottom, transparent 0%, black 80px 30%)":"none",WebkitMaskImage:w(k).enableFrostedGlass?"linear-gradient(to bottom, transparent 0%, black 80px 30%)":"none"},{"padding-top":"80px"}]),"h-inherit":"","of-y-auto":"","of-x-hidden":""},[x("main",AM,[F(nt,{name:"page-fade"},{default:H(()=>[(L(),_e(wr(s[w(r)])))]),_:1})])],4)])],512)]))}}),[["__scopeId","data-v-023692df"]])},Symbol.toStringTag,{value:"Module"})),CM={absolute:"",flex:""},LM={absolute:"",flex:""},IM=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"SideBar",emits:["settingsVisibilityChange"],setup(t,{emit:e}){const i=e,{isDark:n,toggleDark:s}=Js(),r=z(!1),o=z(!1),a=p1({enterDelay:100,leaveDelay:600,enter:()=>{o.value=!0,u(!1)},leave:()=>{o.value=!1,u(!0)}}),l=Mt({themeMode:!1,settings:!1});Pe(()=>k.value.autoHideSidebar,c=>{c?r.value=!0:r.value=!1},{immediate:!0});function u(c){k.value.autoHideSidebar?r.value=c:r.value=!1}return(c,d)=>{const f=Ge("Button");return L(),P("div",{class:Ie({"left-side":w(k).sidebarPosition==="left","right-side":w(k).sidebarPosition==="right",hide:w(r)}),pos:"fixed top-0","h-full":"",flex:"","items-center":"","px-6px":"","z-10":"","pointer-events-none":""},[w(k).autoHideSidebar&&w(r)?(L(),P("div",{key:0,class:Ie(["sidebar-edge",`sidebar-edge-${w(k).sidebarPosition}`]),"pointer-events-auto":"",onMouseenter:d[0]||(d[0]=h=>u(!1)),onMouseleave:d[1]||(d[1]=h=>u(!0))},null,34)):X("",!0),x("div",{ref_key:"sideBarContentRef",ref:a,class:Ie(["sidebar-content",{hover:w(o)}]),flex:"~ gap-2 col justify-center items-center","pointer-events-auto":"","duration-300":""},[F(sr,{content:w(n)?c.$t("dock.dark_mode"):c.$t("dock.light_mode"),placement:"left"},{default:H(()=>[F(f,{class:"ctrl-btn",style:{"backdrop-filter":"var(--bew-filter-glass-1)"},center:"",size:"small",round:"",onClick:w(s),onMouseenter:d[2]||(d[2]=h=>w(l).themeMode=!0),onMouseleave:d[3]||(d[3]=h=>w(l).themeMode=!1)},{default:H(()=>[F(nt,{name:"fade"},{default:H(()=>[Bt(x("div",CM,[w(n)?(L(),_e(w(ji),{key:0,icon:"line-md:sunny-outline-to-moon-loop-transition"})):(L(),_e(w(ji),{key:1,icon:"line-md:moon-alt-to-sunny-outline-loop-transition"}))],512),[[ii,w(l).themeMode]])]),_:1}),F(nt,{name:"fade"},{default:H(()=>[Bt(x("div",LM,[w(n)?(L(),_e(w(ji),{key:0,icon:"line-md:sunny-outline-to-moon-transition"})):(L(),_e(w(ji),{key:1,icon:"line-md:moon-to-sunny-outline-transition"}))],512),[[ii,!w(l).themeMode]])]),_:1})]),_:1},8,["onClick"])]),_:1},8,["content"]),F(sr,{content:c.$t("dock.settings"),placement:"left"},{default:H(()=>[F(f,{class:"ctrl-btn group",style:{"backdrop-filter":"var(--bew-filter-glass-1)"},center:"",size:"small",round:"",onClick:d[4]||(d[4]=h=>i("settingsVisibilityChange"))},{default:H(()=>[...d[5]||(d[5]=[x("div",{"mt--2px":""},[x("i",{"i-mingcute:settings-3-line":"","w-20px":"","h-20px":"","group-hover:rotate-180":"",transition:"all 2000 ease-out"})],-1)])]),_:1})]),_:1},8,["content"])],2)],2)}}}),[["__scopeId","data-v-5eeafce5"]])},Symbol.toStringTag,{value:"Module"})),RM={"cursor-pointer":"",flex:"","items-center":"","gap-3":"",w:"$b-slider-width"},PM=["min","max"],DM=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Slider",props:{min:{default:0},max:{default:100},modelValue:{},label:{}},emits:["update:modelValue"],setup(t,{emit:e}){const i=t,n=e,s=z(i.modelValue),r=z();return st(()=>{s.value=i.modelValue;const o=(s.value-i.min)/(i.max-i.min)*100;r.value.style.background=`linear-gradient(to right, var(--bew-theme-color) ${o}%, var(--bew-fill-1) ${o}%) no-repeat`,r.value&&r.value.addEventListener("input",a=>{const l=Number(a.target.value);n("update:modelValue",Number(l));const u=(l-i.min)/(i.max-i.min)*100;r.value.style.background=`linear-gradient(to right, var(--bew-theme-color) ${u}%, var(--bew-fill-1) ${u}%) no-repeat`})}),(o,a)=>(L(),P("label",RM,[Bt(x("input",{ref_key:"rangeRef",ref:r,"onUpdate:modelValue":a[0]||(a[0]=l=>kt(s)?s.value=l:null),type:"range",min:o.min,max:o.max,class:"slider","appearance-none":"","outline-none":"",bg:"$bew-fill-1",rounded:"$b-slider-height",border:"size-$b-border-width color-$bew-border-color",w:"$b-slider-width",h:"$b-slider-height"},null,8,PM),[[qs,w(s)]]),x("span",null,G(o.label),1)]))}}),[["__scopeId","data-v-ec2900da"]])},Symbol.toStringTag,{value:"Module"})),OM={key:0,flex:"~ items-center",justify:"center",class:"loading-content"},MM=["src"],jl=qe(Me({__name:"SmoothLoading",props:{show:{type:[Boolean,null]},keepSpace:{type:Boolean},minHeight:{}},setup(t){const e=t,i=Zs.runtime.getURL("/assets/loading.gif"),n=ge(()=>({"loading-visible":!!e.show,"loading-hidden":!e.show&&!e.keepSpace,"loading-keep-space":!e.show&&e.keepSpace,"pointer-events-none":!e.show}));return(s,r)=>(L(),P("div",{w:"full",class:Ie(["loading-container",w(n)]),style:Ue({minHeight:s.minHeight||"46px"}),flex:"~",justify:"center",items:"center"},[F(nt,{name:"fade-scale"},{default:H(()=>[s.show?(L(),P("div",OM,[x("img",{src:w(i),alt:"loading",w:"46px",h:"46px",m:"r-2"},null,8,MM),x("span",null,G(s.$t("common.loading")),1)])):X("",!0)]),_:1})],6))}}),[["__scopeId","data-v-8857458d"]]),$M=Object.freeze(Object.defineProperty({__proto__:null,default:jl},Symbol.toStringTag,{value:"Module"})),FM=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"BewlyOrBiliTopBarSwitcher",setup(t){function e(){k.value.useOriginalBilibiliTopBar=!k.value.useOriginalBilibiliTopBar}const i=An(),n=z(!1);Pe(n,r=>{i.setSwitcherButtonVisible(r)});const s=ge(()=>k.value.useOriginalBilibiliTopBar?"calc(var(--bew-top-bar-height) - 15px)":i.topBarVisible?"calc(var(--bew-top-bar-height) - 20px)":"0px");return(r,o)=>Bt((L(),P("div",{class:"group",pos:"fixed top-0 right-0","z-10":"","w-full":"",flex:"~ items-center justify-center",style:Ue({marginTop:w(s)}),p:"t-30px",onMouseenter:o[0]||(o[0]=a=>n.value=!0),onMouseleave:o[1]||(o[1]=a=>n.value=!1)},[x("button",{style:Ue([{"backdrop-filter":"var(--bew-filter-glass-1)"},{transform:n.value?"translateY(0)":"translateY(-100%)"}]),pos:"absolute",class:Ie([n.value?"opacity-100":"opacity-0","pointer-events-auto"]),flex:"~ items-center gap-2",text:"$bew-text-2 sm",bg:"$bew-elevated",p:"x-2 y-1","mt-2":"",rounded:"full",shadow:"$bew-shadow-1","duration-300":"",onClick:e},[o[2]||(o[2]=x("i",{"i-mingcute:transfer-3-line":"","text-xs":""},null,-1)),x("span",null,[w(k).showTopBar?(L(),P(Te,{key:0},[He(G(r.$t("topbar.switch_to_bili_top_bar")),1)],64)):(L(),P(Te,{key:1},[He(G(r.$t("topbar.switch_to_bewly_top_bar")),1)],64))])],6)],36)),[[ii,w(i).topBarVisible||w(k).useOriginalBilibiliTopBar]])}})},Symbol.toStringTag,{value:"Module"})),BM={text:"xl","fw-bold":""},NM={flex:"~ items-center gap-2"},UM={key:0,"pointer-events-auto":"",bg:"$bew-theme-color",text:"white sm","px-3":"","py-2":"","rounded-8px":"",flex:"~ items-center gap-2"},VM={key:0,class:"notifications-drawer__loading-layer",pos:"absolute top-0 right-0","z-20":"","w-full":"","h-full":"",bg:"$bew-bg"},jM=["src"],HM=qe(Me({__name:"NotificationsDrawer",props:{url:{}},emits:["close"],setup(t,{emit:e}){const i=t,n=e,{mainAppRef:s,activeDrawer:r,setActiveDrawer:o}=$t(),{isDark:a}=Js(),l=z(!1),u=z(null),c=z(null),d=z(i.url||"https://message.bilibili.com/"),f=z(!1),h=z(!1),p=z(!1),m=z(null),g=z(null),v=z(!1),b=ge(()=>f.value?d.value:void 0);function _(){g.value&&(clearTimeout(g.value),g.value=null)}function y(){if(u.value?.contentWindow)try{u.value.contentWindow.postMessage({type:zo,isDark:a.value,darkModeBaseColor:k.value.darkModeBaseColor},"*")}catch(B){console.warn("Failed to send dark mode change message to iframe:",B)}}function E(){h.value=!0}Pe(()=>a.value,()=>{y()}),Pe(()=>k.value.darkModeBaseColor,()=>{y()}),Pe(()=>h.value,B=>{B&&(y(),setTimeout(y,120),setTimeout(y,320),_(),g.value=setTimeout(()=>{f.value&&h.value&&(p.value=!0),g.value=null},a.value?360:120))}),st(()=>{A()}),fs(()=>{A()});const S=z("");function A(){console.log("[NotificationsDrawer] handleOpen called"),l.value=!0,h.value=!1,p.value=!1,_(),o(gs.NotificationsDrawer),console.log("[NotificationsDrawer] show.value:",l.value,"activeDrawer:",r.value),v.value||(p5(),v.value=!0),S.value!==i.url&&(d.value=i.url,S.value=i.url),setTimeout(()=>{f.value=!0,ot(()=>{console.log("[NotificationsDrawer] Focusing drawer container"),c.value?.focus()})},350)}Ki(()=>{v.value&&(Nl(),v.value=!1),T()});async function C(){console.log("[NotificationsDrawer] handleClose called"),m.value&&clearTimeout(m.value),_(),v.value&&(Nl(),v.value=!1),l.value=!1,f.value=!1,h.value=!1,p.value=!1,o(gs.None),console.log("[NotificationsDrawer] show.value:",l.value,"activeDrawer:",r.value),m.value=setTimeout(()=>{n("close")},300)}async function T(){d.value="about:blank",u.value&&(u.value.src="about:blank"),await ot(),u.value?.contentWindow?.close(),u.value?.parentNode?.removeChild(u.value),await ot(),u.value=null}function I(){if(u.value){try{window.open(u.value.contentWindow?.location.href.replace(/\/$/,""),"_blank")}catch{window.open("https://message.bilibili.com/","_blank")}C()}}const D=z(!1),R=z(null),O=z(!1),M=z(!1);function U(B){if(console.log("[NotificationsDrawer] keydown event:",B.key,B.code,"activeDrawer:",r.value),!(B.key!=="Escape"&&B.code!=="Escape")){if(console.log("[NotificationsDrawer] ESC key pressed!"),console.log("[NotificationsDrawer] show.value:",l.value),console.log("[NotificationsDrawer] activeDrawer.value:",r.value),console.log("[NotificationsDrawer] DrawerType.NotificationsDrawer:",gs.NotificationsDrawer),console.log("[NotificationsDrawer] Match:",r.value===gs.NotificationsDrawer),r.value!==gs.NotificationsDrawer){console.log("[NotificationsDrawer] Not active drawer, ignoring ESC");return}if(console.log("[NotificationsDrawer] Processing ESC key"),B.preventDefault(),B.stopPropagation(),k.value.closeDrawerWithoutPressingEscAgain){console.log("[NotificationsDrawer] closeDrawerWithoutPressingEscAgain = true, closing immediately"),clearTimeout(R.value),C();return}console.log("[NotificationsDrawer] disableEscPress:",O.value),console.log("[NotificationsDrawer] isEscPressed:",D.value),!O.value&&(D.value?(console.log("[NotificationsDrawer] ESC pressed twice, closing"),C()):(console.log("[NotificationsDrawer] First ESC press, waiting for second press"),D.value=!0,R.value&&clearTimeout(R.value),R.value=setTimeout(()=>{D.value=!1},1300)))}}st(()=>{console.log("[NotificationsDrawer] onMounted - registering keydown listener"),window.addEventListener("keydown",U,!0),document.addEventListener("keydown",U,!0),window.addEventListener("message",B=>{B.data?.type==="BEWLY_DRAWER_CLOSE_REQUEST"&&B.data?.source==="iframe"&&(console.log("[NotificationsDrawer] Received close request from iframe"),k.value.closeDrawerWithoutPressingEscAgain?(console.log("[NotificationsDrawer] Closing drawer immediately (from iframe)"),C()):D.value?(console.log("[NotificationsDrawer] Second ESC from iframe, closing"),C()):(console.log("[NotificationsDrawer] First ESC from iframe, waiting for second press"),D.value=!0,R.value&&clearTimeout(R.value),R.value=setTimeout(()=>{D.value=!1},1300)))}),document.addEventListener("focusin",B=>{l.value&&u.value&&B.target===u.value&&(console.log("[NotificationsDrawer] iframe got focus, showing ESC hint"),M.value=!0,setTimeout(()=>{M.value=!1},3e3))},!0),document.addEventListener("click",B=>{l.value&&u.value?.contains(B.target)&&(console.log("[NotificationsDrawer] iframe clicked, showing ESC hint"),M.value=!0,setTimeout(()=>{M.value=!1},3e3))},!0),document.addEventListener("mousedown",B=>{if(!l.value||!c.value||!u.value)return;const W=c.value.contains(B.target),te=u.value.contains(B.target);W&&!te&&(console.log("[NotificationsDrawer] Click outside iframe, refocusing drawer"),B.preventDefault(),M.value=!1,ot(()=>{c.value?.focus(),console.log("[NotificationsDrawer] Drawer refocused, activeElement:",document.activeElement)}))},!0),A()}),fs(()=>{console.log("[NotificationsDrawer] onActivated - re-registering keydown listener"),window.removeEventListener("keydown",U,!0),document.removeEventListener("keydown",U,!0),window.addEventListener("keydown",U,!0),document.addEventListener("keydown",U,!0),A()}),Ki(()=>{console.log("[NotificationsDrawer] onBeforeUnmount - removing keydown listener"),window.removeEventListener("keydown",U,!0),document.removeEventListener("keydown",U,!0),_(),v.value&&(Nl(),v.value=!1),T()}),Gu(()=>{console.log("[NotificationsDrawer] onDeactivated - removing keydown listener"),window.removeEventListener("keydown",U,!0),document.removeEventListener("keydown",U,!0),_(),v.value&&(Nl(),v.value=!1)});function $(B){console.log("[NotificationsDrawer] Focusing drawer"),B?.preventDefault(),M.value=!1,ot(()=>{c.value?.focus(),console.log("[NotificationsDrawer] Drawer focused, activeElement:",document.activeElement)})}return(B,W)=>{const te=Ge("Button"),re=Ge("Loading");return L(),_e(La,{to:w(s)},[x("div",{style:Ue({pointerEvents:w(l)?"auto":"none"}),pos:"fixed top-0 left-0","of-hidden":"","w-full":"","h-full":"","z-999999":""},[F(nt,{name:"fade"},{default:H(()=>[w(l)?(L(),P("div",{key:0,pos:"absolute bottom-0 left-0","w-full":"","h-full":"",bg:"black opacity-60",onClick:C,onMousedown:$},null,32)):X("",!0)]),_:1}),F(nt,{name:"drawer"},{default:H(()=>[Bt(x("div",{ref_key:"drawerRef",ref:c,tabindex:"0",pos:"absolute top-0 right-0","of-hidden":"",bg:"$bew-bg",w:"xl:70vw lg:80vw md:100vw 100vw","max-w-1400px":"","h-full":"","outline-none":"",onKeydown:U,onMousedown:ft($,["self"])},[x("div",{pos:"fixed top-0 right-0","z-10":"",flex:"~ items-center justify-between gap-2","w-inherit":"","max-w-inherit":"",h:"$bew-top-bar-height","m-auto":"","px-4":"","pointer-events-none":"",bg:"$bew-bg",onMousedown:$},[x("h3",BM,G(B.$t("topbar.notifications")),1),x("div",NM,[F(nt,{name:"fade"},{default:H(()=>[w(M)?(L(),P("div",UM,[W[0]||(W[0]=x("i",{"i-mingcute:information-line":""},null,-1)),x("span",null,G(B.$t("iframe_drawer.esc_hint"," ESC ")),1)])):X("",!0)]),_:1}),F(te,{style:{"--b-button-color":"var(--bew-elevated-solid)","--b-button-color-hover":"var(--bew-elevated-solid-hover)"},"pointer-events-auto":"",shadow:"!$bew-shadow-1",onClick:I},{left:H(()=>[...W[1]||(W[1]=[x("i",{"i-mingcute:external-link-line":""},null,-1)])]),default:H(()=>[He(" "+G(B.$t("iframe_drawer.open_in_new_tab")),1)]),_:1}),w(D)?(L(),_e(te,{key:1,type:"error",shadow:"!$bew-shadow-1",onClick:C},{left:H(()=>[...W[4]||(W[4]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),default:H(()=>[He(" "+G(B.$t("iframe_drawer.press_esc_again_to_close"))+" ",1),W[5]||(W[5]=x("kbd",{"ml-1":"","px-1.5":"","py-0.5":"",rounded:"","text-xs":"",bg:"red-700",text:"white"},"Esc",-1))]),_:1})):(L(),_e(te,{key:0,style:{"--b-button-color":"var(--bew-elevated-solid)","--b-button-color-hover":"var(--bew-elevated-solid-hover)"},"pointer-events-auto":"",shadow:"!$bew-shadow-1",onClick:C},{left:H(()=>[...W[2]||(W[2]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),default:H(()=>[He(" "+G(B.$t("iframe_drawer.close"))+" ",1),W[3]||(W[3]=x("kbd",{"ml-1":"","px-1.5":"","py-0.5":"",rounded:"","text-xs":"",bg:"$bew-fill-2",text:"$bew-text-2"},"Esc",-1))]),_:1}))])],32),F(nt,{name:"fade"},{default:H(()=>[w(f)&&!w(p)?(L(),P("div",VM,[F(re)])):X("",!0)]),_:1}),F(nt,{name:"fade"},{default:H(()=>[Bt(x("iframe",{ref_key:"iframeRef",ref:u,src:w(b),frameborder:"0","pointer-events-auto":"",pos:"relative right-0",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms","w-inherit":"","max-w-inherit":"",style:Ue({height:"calc(100%)",opacity:w(p)?1:0,visibility:w(p)?"visible":"hidden",pointerEvents:w(p)?"auto":"none",transition:"opacity 0.2s ease",backgroundColor:"var(--bew-bg)"}),onLoad:E},null,44,jM),[[ii,w(f)]])]),_:1})],544),[[ii,w(l)]])]),_:1})],4)],8,["to"])}}}),[["__scopeId","data-v-3f902e3f"]]);function Cc(){const t=An(),{closeAllPopups:e}=t,i=Mt({}),n=Mt({}),s=Mt({}),r=z(null),{activatedPage:o,reachTop:a}=$t(),l=z(window.location.search);function u(){l.value=window.location.search}Ht(window,"pushstate",u),Ht(window,"popstate",u);const c=ge(()=>{if(!k.value)return!1;if(k.value.alwaysUseTransparentTopBar||Et()&&k.value.useOriginalBilibiliHomepage||O5.test(location.href)&&!RO.test(location.href)||OO.test(location.href)||M5.test(location.href))return!0;if(!Et()||!o?.value)return!1;if(o.value===_t.Search)return k.value.individuallySetSearchPageWallpaper?!!k.value.searchPageWallpaper:!!k.value.wallpaper;if(o.value===_t.SearchResults)return!!k.value.wallpaper;if(k.value.wallpaper)return!0;if(k.value.useSearchPageModeOnHomePage){if(k.value.individuallySetSearchPageWallpaper&&k.value.searchPageWallpaper)return!0;if(k.value.wallpaper)return!0}return!1}),d=ge(()=>{const g=D5.test(location.href);if(Et()){if(k.value.useOriginalBilibiliHomepage||!o?.value)return!0;if(o.value===_t.Search||o.value===_t.SearchResults&&!k.value.usePluginSearchResultsPage||k.value.useSearchPageModeOnHomePage&&o.value===_t.Home&&a?.value)return!1}else if(g)return!0;return!0});function f(g){const v=p1({enterDelay:320,leaveDelay:320,beforeEnter:()=>e(g),enter:()=>{t.popupVisible[g]=!0},leave:()=>{setTimeout(()=>{s[g]||(t.popupVisible[g]=!1)},200)}});return i[g]=v,v}function h(g,v){const b=B5(i[g],{x:"0px",y:"50px",centerTarget:{x:!0}});return v?(n[g]=v,Pe(v,_=>{_&&(b.value=_)},{immediate:!0}),v):(n[g]=b,b)}function p(g,v){k.value.touchScreenOptimization&&(g.preventDefault(),g.stopPropagation(),e(v),t.popupVisible[v]=!t.popupVisible[v],r.value=v)}function m(g){k.value.openNotificationsPageAsDrawer&&(t.drawerVisible.notifications=!0,t.notificationsDrawerUrl=g.url)}return{currentClickedTopBarItem:r,setupTopBarItemHoverEvent:f,setupTopBarItemTransformer:h,handleClickTopBarItem:p,handleNotificationsItemClick:m,forceWhiteIcon:c,showSearchBar:d}}const N5=Ff("settings",()=>{function t(i){return k.value.dockItemsConfig.find(n=>n.page===i)}function e(i){return k.value.dockItemsConfig.find(n=>n.page===i)?.useOriginalBiliPage||!1}return{getDockItemConfigByPage:t,getDockItemIsUseOriginalBiliPage:e}}),zM=["onClick"],GM={class:"hidden lg:block"},WM={class:"block lg:hidden"},KM=qe(Me({__name:"BewlyOrBiliPageSwitcher",setup(t){const{activatedPage:e}=$t(),{getDockItemByPage:i}=Fl(),{getDockItemConfigByPage:n}=N5(),s=Ta([{name:"BewlyCat",shortName:"Bewly",useOriginalBiliPage:!1},{name:"BiliBili",shortName:"Bili",useOriginalBiliPage:!0}]),r=ge(()=>k.value.useOriginalBilibiliHomepage?!1:!!(!ai()&&i(e.value)&&Et()));function o(a){const l=k.value.dockItemsConfig.find(c=>c.page===e.value);l&&(l.useOriginalBiliPage=a);const u=document.querySelector('iframe[src*="bilibili.com"]');u&&u.contentWindow&&(a?u.contentWindow.postMessage(Gy,"*"):u.contentWindow.postMessage(zy,"*"),u.contentWindow.postMessage({type:uc,useOriginalBilibiliTopBar:k.value.useOriginalBilibiliTopBar},"*"))}return(a,l)=>w(r)?(L(),P("div",{key:0,class:Ie(["bewly-bili-switcher",{"disable-frosted-glass":!w(k).enableFrostedGlass}]),style:{"backdrop-filter":"var(--bew-filter-glass-1)"},flex:"~ gap-1",bg:"$bew-elevated","p-1":"","rounded-full":"","h-34px":""},[(L(!0),P(Te,null,Ne(w(s),u=>(L(),P("button",{key:u.name,class:Ie(["bewly-bili-switcher-button",{active:u.useOriginalBiliPage===(w(n)(w(e))?.useOriginalBiliPage||!1)}]),"rounded-inherit":"",text:"$bew-text-2 hover:$bew-text-1 xs",p:"x-2 lg:x-4",bg:"hover:$bew-fill-2","fw-bold":"","duration-300":"",onClick:c=>o(u.useOriginalBiliPage)},[x("span",GM,G(u.name),1),x("span",WM,G(u.shortName),1)],10,zM))),128))],2)):X("",!0)}}),[["__scopeId","data-v-d9e1e366"]]),U5=[{key:"anime",nameKey:"topbar.logo_dropdown.anime",icon:"#channel-anime",href:"https://www.bilibili.com/anime"},{key:"movies",nameKey:"topbar.logo_dropdown.movies",icon:"#channel-movie",href:"https://www.bilibili.com/movie"},{key:"chinese_anime",nameKey:"topbar.logo_dropdown.chinese_anime",icon:"#channel-guochuang",href:"https://www.bilibili.com/guochuang"},{key:"tv_shows",nameKey:"topbar.logo_dropdown.tv_shows",icon:"#channel-teleplay",href:"https://www.bilibili.com/tv"},{key:"variety_shows",nameKey:"topbar.logo_dropdown.variety_shows",icon:"#channel-zongyi",href:"https://www.bilibili.com/variety"},{key:"documentary_films",nameKey:"topbar.logo_dropdown.documentary_films",icon:"#channel-documentary",href:"https://www.bilibili.com/documentary"},{key:"animations",nameKey:"topbar.logo_dropdown.animations",icon:"#channel-douga",href:"https://www.bilibili.com/c/douga"},{key:"gaming",nameKey:"topbar.logo_dropdown.gaming",icon:"#channel-game",href:"https://www.bilibili.com/c/game"},{key:"kichiku",nameKey:"topbar.logo_dropdown.kichiku",icon:"#channel-kichiku",href:"https://www.bilibili.com/c/kichiku"},{key:"music",nameKey:"topbar.logo_dropdown.music",icon:"#channel-music",href:"https://www.bilibili.com/c/music"},{key:"dance",nameKey:"topbar.logo_dropdown.dance",icon:"#channel-dance",href:"https://www.bilibili.com/c/dance"},{key:"cinephile",nameKey:"topbar.logo_dropdown.cinephile",icon:"#channel-cinephile",href:"https://www.bilibili.com/c/cinephile"},{key:"showbiz",nameKey:"topbar.logo_dropdown.showbiz",icon:"#channel-ent",href:"https://www.bilibili.com/c/ent"},{key:"knowledge",nameKey:"topbar.logo_dropdown.knowledge",icon:"#channel-knowledge",href:"https://www.bilibili.com/c/knowledge"},{key:"technology",nameKey:"topbar.logo_dropdown.technology",icon:"#channel-tech",href:"https://www.bilibili.com/c/tech"},{key:"news",nameKey:"topbar.logo_dropdown.news",icon:"#channel-information",href:"https://www.bilibili.com/c/information"},{key:"foods",nameKey:"topbar.logo_dropdown.foods",icon:"#channel-food",href:"https://www.bilibili.com/c/food"},{key:"shortplay",nameKey:"topbar.logo_dropdown.shortplay",icon:"#channel-shortplay",href:"https://www.bilibili.com/c/shortplay"},{key:"cars",nameKey:"topbar.logo_dropdown.cars",icon:"#channel-car",href:"https://www.bilibili.com/c/car"},{key:"fashion",nameKey:"topbar.logo_dropdown.fashion",icon:"#channel-fashion",href:"https://www.bilibili.com/c/fashion"},{key:"sports",nameKey:"topbar.logo_dropdown.sports",icon:"#channel-sports",href:"https://www.bilibili.com/c/sports"},{key:"animals",nameKey:"topbar.logo_dropdown.animals",icon:"#channel-animal",href:"https://www.bilibili.com/c/animal"},{key:"vlog",nameKey:"topbar.logo_dropdown.vlog",icon:"#channel-vlog",href:"https://www.bilibili.com/c/vlog"},{key:"painting",nameKey:"topbar.logo_dropdown.painting",icon:"#channel-painting",href:"https://www.bilibili.com/c/painting"},{key:"ai",nameKey:"topbar.logo_dropdown.ai",icon:"#channel-ai",href:"https://www.bilibili.com/c/ai"},{key:"home",nameKey:"topbar.logo_dropdown.home",icon:"#channel-home",href:"https://www.bilibili.com/c/home"},{key:"outdoors",nameKey:"topbar.logo_dropdown.outdoors",icon:"#channel-outdoors",href:"https://www.bilibili.com/c/outdoors"},{key:"gym",nameKey:"topbar.logo_dropdown.gym",icon:"#channel-gym",href:"https://www.bilibili.com/c/gym"},{key:"handmake",nameKey:"topbar.logo_dropdown.handmake",icon:"#channel-handmake",href:"https://www.bilibili.com/c/handmake"},{key:"travel",nameKey:"topbar.logo_dropdown.travel",icon:"#channel-travel",href:"https://www.bilibili.com/c/travel"},{key:"rural",nameKey:"topbar.logo_dropdown.rural",icon:"#channel-rural",href:"https://www.bilibili.com/c/rural"},{key:"parenting",nameKey:"topbar.logo_dropdown.parenting",icon:"#channel-parenting",href:"https://www.bilibili.com/c/parenting"},{key:"health",nameKey:"topbar.logo_dropdown.health",icon:"#channel-health",href:"https://www.bilibili.com/c/health"},{key:"emotion",nameKey:"topbar.logo_dropdown.emotion",icon:"#channel-emotion",href:"https://www.bilibili.com/c/emotion"},{key:"life_joy",nameKey:"topbar.logo_dropdown.life_joy",icon:"#channel-life-joy",href:"https://www.bilibili.com/c/life_joy"},{key:"life_experience",nameKey:"topbar.logo_dropdown.life_experience",icon:"#channel-life-experience",href:"https://www.bilibili.com/c/life_experience"},{key:"charitable_events",nameKey:"topbar.logo_dropdown.charitable_events",icon:"#channel-love",href:"https://love.bilibili.com"}],V5=[{key:"articles",nameKey:"topbar.logo_dropdown.articles",icon:"#channel-read",href:"https://www.bilibili.com/read/home"},{key:"live",nameKey:"topbar.logo_dropdown.live",icon:"#channel-live",href:"https://live.bilibili.com"},{key:"activities",nameKey:"topbar.logo_dropdown.activities",icon:"#channel-activity",href:"https://www.bilibili.com/blackboard/activity-list.html"},{key:"paid_courses",nameKey:"topbar.logo_dropdown.paid_courses",icon:"#channel-zhishi",href:"https://www.bilibili.com/cheese"},{key:"community",nameKey:"topbar.logo_dropdown.community",icon:"#channel-blackroom",href:"https://www.bilibili.com/blackboard/activity-5zJxM3spoS.html"},{key:"music_plus",nameKey:"topbar.logo_dropdown.music_plus",icon:"#channel-musicplus",href:"https://music.bilibili.com/pc/music-center"},{key:"game_center",nameKey:"topbar.logo_dropdown.game_center",icon:"i-mingcute:game-2-fill",href:"https://game.bilibili.com/platform",color:"#69B1DD"},{key:"comic_con_and_goods",nameKey:"topbar.logo_dropdown.comic_con_and_goods",icon:"i-mingcute:store-fill",href:"https://show.bilibili.com/platform/home.html",color:"#E4C081"},{key:"manga",nameKey:"topbar.logo_dropdown.manga",icon:"i-mingcute:cat-fill",href:"https://manga.bilibili.com",color:"#FFC1CC"},{key:"game_competitions",nameKey:"topbar.logo_dropdown.game_competitions",icon:"i-mingcute:sword-fill",href:"https://www.bilibili.com/match/home",color:"#C8D3DF"}],j5=[...U5,...V5],YM={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},h:"[calc(100vh-100px)]","max-h":"445px",w:"fit","of-y-auto":"","of-x-hidden":"",shadow:"[var(--bew-shadow-3),var(--bew-shadow-edge-glow-1)]",bg:"$bew-elevated-alt",rounded:"$bew-radius",border:"1 $bew-border-color",class:"channels-pop bew-popover","data-key":"channels"},XM={flex:"~ gap-1",p:"4","w-inherit":""},qM={"aria-hidden":"true",class:"svg-icon"},ZM=["xlink:href"],QM={key:0,class:"icon"},JM={"aria-hidden":"true"},e$=["xlink:href"],t$={key:1,class:"icon"},i$=qe(Me({__name:"ChannelsPop",setup(t){const{t:e}=St(),i=ge(()=>U5.map(s=>({...s,name:e(s.nameKey)}))),n=ge(()=>V5.map(s=>({...s,name:e(s.nameKey)})));return(s,r)=>{const o=Ge("ALink");return L(),P("div",YM,[x("div",XM,[(L(),P(Te,null,Ne([0,10,20,30],(a,l)=>x("ul",{key:l,class:"link-list"},[(L(!0),P(Te,null,Ne(w(i).slice(a,a+10),u=>(L(),P("li",{key:u.name,class:"link-item"},[F(o,{href:u.href,type:"topBar"},{default:H(()=>[(L(),P("svg",qM,[x("use",{"xlink:href":u.icon},null,8,ZM)])),x("span",null,G(u.name),1)]),_:2},1032,["href"])]))),128))])),64)),(L(),P(Te,null,Ne([0],(a,l)=>x("ul",{key:l,class:"link-list"},[(L(!0),P(Te,null,Ne(w(n).slice(a,a+10),u=>(L(),P("li",{key:u.name,class:"link-item group"},[F(o,{href:u.href,type:"topBar"},{default:H(()=>[u.icon.startsWith("#")?(L(),P("div",QM,[(L(),P("svg",JM,[x("use",{"xlink:href":u.icon},null,8,e$)]))])):(L(),P("div",t$,[x("i",{class:Ie(u.icon),style:Ue({color:u.color})},null,6)])),x("span",null,G(u.name),1)]),_:2},1032,["href"])]))),128))])),64))])])}}}),[["__scopeId","data-v-aa208d65"]]),n$={key:0,class:"pinned-channels__icon"},s$={"aria-hidden":"true"},r$=["xlink:href"],o$={key:1,class:"pinned-channels__icon"},a$=["title"],l$=qe(Me({__name:"TopBarPinnedChannels",props:{forceWhiteIcon:{type:Boolean}},setup(t){const e=t,{t:i,locale:n}=St(),s=z(null),r=z(null),o=z([]);let a=0;const l=ge(()=>{const _=new Map;return j5.forEach(y=>{_.set(y.key,{...y,name:i(y.nameKey)})}),_}),u=ge(()=>k.value.topBarPinnedChannels??[]),c=ge(()=>{const _=new Set;return u.value.filter(y=>{if(_.has(y))return!1;const E=l.value.has(y);return E&&_.add(y),E})}),d=ge(()=>o.value.map(_=>l.value.get(_)).filter(_=>!!_)),f=ge(()=>c.value.slice(o.value.length).map(_=>l.value.get(_)).filter(_=>!!_)),h=ge(()=>f.value.length),p=ge(()=>f.value.map(_=>_.name).join(", "));Pe(c,async _=>{o.value=[..._],await g(!0)},{immediate:!0}),Pe(()=>n.value,async()=>{await g(!0)}),Pe(()=>e.forceWhiteIcon,()=>{g(!0)}),rc(s,_=>{const y=_[0]?.contentRect.width??0,E=y>a;a=y,g(E)});const m=wm(()=>{g(!0)},120);st(()=>{window.addEventListener("resize",m)}),ki(()=>{window.removeEventListener("resize",m)});async function g(_=!1){if(!r.value)return;if(_){const E=c.value;b(o.value,E)||(o.value=[...E],await ot())}if(await ot(),!!r.value){for(;o.value.length>0&&await v();)if(o.value=o.value.slice(0,-1),await ot(),!r.value)return}}function v(){return new Promise(_=>{requestAnimationFrame(()=>{const y=r.value,E=s.value;if(y&&y.scrollWidth-y.clientWidth>1){_(!0);return}const S=E?.closest("main");if(S&&S.scrollWidth-S.clientWidth>1){_(!0);return}const A=S?.querySelector("[data-top-bar-search]");if(A&&A.scrollWidth-A.clientWidth>1){_(!0);return}_(!1)})})}function b(_,y){return _.length!==y.length?!1:_.every((E,S)=>E===y[S])}return(_,y)=>c.value.length?(L(),P("div",{key:0,ref_key:"containerRef",ref:s,class:Ie(["pinned-channels",{"white-theme":e.forceWhiteIcon}])},[x("div",{ref_key:"listRef",ref:r,class:"pinned-channels__list"},[(L(!0),P(Te,null,Ne(d.value,E=>(L(),_e(kr,{key:E.key,href:E.href,type:"topBar",class:Ie(["pinned-channels__item",{"white-icon":e.forceWhiteIcon}]),title:E.name},{default:H(()=>[E.icon.startsWith("#")?(L(),P("div",n$,[(L(),P("svg",s$,[x("use",{"xlink:href":E.icon},null,8,r$)]))])):(L(),P("div",o$,[x("i",{class:Ie(E.icon),style:Ue(e.forceWhiteIcon?void 0:{color:E.color})},null,6)]))]),_:2},1032,["href","class","title"]))),128))],512),h.value>0?(L(),P("div",{key:0,class:Ie(["pinned-channels__more",{"white-icon":e.forceWhiteIcon}]),title:p.value}," +"+G(h.value),11,a$)):X("",!0)],2)):X("",!0)}}),[["__scopeId","data-v-1f542d67"]]),u$={flex:"inline xl:1 items-center gap-2",pos:"relative","z-1":"",class:"top-bar-logo"},c$={flex:"~ items-center gap-2 shrink-0","z-1":""},d$={key:0,href:"//www.bilibili.com",target:"_top",class:"group home-button",grid:"~ place-items-center",rounded:"46px","duration-300":"","w-46px":"","h-46px":"",bg:"hover:$bew-theme-color","shrink-0":""},f$=qe(Me({__name:"TopBarLogo",props:{forceWhiteIcon:{type:Boolean}},setup(t){const{handleClickTopBarItem:e,setupTopBarItemHoverEvent:i}=Cc(),n=An(),{popupVisible:s}=Va(n),r=z(null),o=i("channels");return(a,l)=>(L(),P("div",u$,[x("div",c$,[x("div",{ref_key:"channels",ref:o,relative:"","w-fit":""},[x("a",{ref_key:"logo",ref:r,href:"//www.bilibili.com",target:"_top",class:Ie(["group logo",{activated:w(s).channels}]),grid:"~ place-items-center",rounded:"46px","duration-300":"","w-46px":"","h-46px":"",bg:"hover:$bew-theme-color",onClick:l[0]||(l[0]=u=>w(e)(u,"channels"))},[(L(),P("svg",{t:"1720198072316",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1477",width:"36",height:"36",style:Ue({fill:a.forceWhiteIcon?"white":"var(--bew-theme-color)",filter:a.forceWhiteIcon?"drop-shadow(0 0 4px rgba(0, 0, 0, 0.6))":"drop-shadow(0 0 4px var(--bew-theme-color-60))"}),"group-hover:fill":"!white","group-hover:filter":"!none","duration-300":"","mt--1px":""},[...l[1]||(l[1]=[x("path",{d:"M450.803484 456.506027l-120.670435 23.103715 10.333298 45.288107 119.454151-23.102578-9.117014-45.289244z m65.04448 120.060586c-29.483236 63.220622-55.926329 15.502222-55.926328 15.502223l-19.754098 12.768142s38.90176 53.192249 75.986489 12.764729c43.770311 40.42752 77.203911-13.068516 77.203911-13.068516l-17.934791-11.55072c0.001138-0.304924-31.305956 44.983182-59.575183-16.415858z m59.57632-74.773617L695.182222 524.895573l10.029511-45.288106-120.364373-23.103716-9.423076 45.289245z m237.784178-88.926436c-1.905778-84.362809-75.487004-100.540871-75.487004-100.540871s-57.408853-0.316302-131.944676-0.95232l54.237867-52.332089s8.562916-10.784996-6.026809-22.834062c-14.592-12.051342-15.543182-6.660551-20.615396-3.487289-4.441884 3.169849-69.462471 66.920676-80.878933 78.340551-29.494613 0-60.2624-0.319716-90.075591-0.319716h10.466418s-77.705671-76.754489-82.781298-80.241777c-5.075627-3.488427-5.709369-8.56064-20.616533 3.487289-14.589724 12.05248-6.026809 22.8352-6.026809 22.8352l55.504213 53.919288c-60.261262 0-112.280462 0.319716-136.383147 1.268623-78.025387 22.521173-71.99744 100.859449-71.99744 100.859449s0.950044 168.100978 0 253.103217c8.562916 85.00224 73.899804 98.636231 73.899805 98.636231s26.007324 0.63488 45.357511 0.63488c1.900089 5.391929 3.486151 32.034133 33.302756 32.034134 29.495751 0 33.30048-32.034133 33.30048-32.034134s217.263218-0.950044 235.340231-0.950044c0.953458 9.196658 5.394204 33.619058 35.207395 33.303893 29.494613-0.636018 31.714418-35.20512 31.714418-35.20512s10.151253-0.95232 40.280747 0c70.413653-13.005938 74.534684-95.468658 74.534684-95.468657s-1.265209-169.689316-0.312889-254.056676zM752.628622 681.8304c0 13.319964-10.467556 24.102684-23.471218 24.102684H300.980907c-13.003662 0-23.47008-10.78272-23.47008-24.102684V397.961671c0-13.32224 10.467556-24.106098 23.47008-24.106098h428.176497c13.003662 0 23.471218 10.783858 23.471218 24.106098v283.868729z","p-id":"1478"},null,-1)])],4))],2),F(nt,{name:"slide-in"},{default:H(()=>[w(s).channels?(L(),_e(i$,{key:0,class:"bew-popover",pos:"!absolute !left-0 !top-50px",transform:"!translate-x-0",z:"!999"})):X("",!0)]),_:1})],512),w(k).touchScreenOptimization&&w(k).showHomeButtonInTouchMode?(L(),P("a",d$,[x("div",{class:"i-mingcute:home-3-fill home-icon",w:"24px",h:"24px",style:Ue({color:a.forceWhiteIcon?"white":"var(--bew-theme-color)",filter:a.forceWhiteIcon?"drop-shadow(0 0 4px rgba(0, 0, 0, 0.6))":"drop-shadow(0 0 4px var(--bew-theme-color-60))"})},null,4)])):X("",!0)]),w(k).showBewlyOrBiliPageSwitcher?(L(),_e(KM,{key:0,"z-1":""})):X("",!0),F(l$,{"force-white-icon":a.forceWhiteIcon},null,8,["force-white-icon"])]))}}),[["__scopeId","data-v-2c70fef2"]]);function H5(t){return k.value.topBarComponentsConfig?.find(e=>e.key===t)}function Qt(t){return H5(t)?.visible??!0}function k1(t){return H5(t)?.badgeType||"number"}function C1(t){const e=k1(t);return Qt(t)&&e!=="none"}function L1(t){const e=k1(t);return Qt(t)&&e==="number"}function I1(t){const e=k1(t);return Qt(t)&&e==="dot"}function ph(t,e,i={}){const{bottomThreshold:n=300,topThreshold:s=100,throttleDelay:r=150}=i,o=z(!1),a=z(!1),l=z(!0),u=z(0);let c=!1,d=0,f=null;function h(){const v=t.value;if(!v)return null;const b=v.scrollTop,_=v.scrollHeight,y=v.clientHeight;return{scrollTop:b,scrollHeight:_,clientHeight:y,percentage:b/(_-y)*100}}function p(){const v=h();if(!v)return;const{scrollTop:b,scrollHeight:_,clientHeight:y,percentage:E}=v;u.value=E,l.value=b<=s,a.value=_-b-y<=n,e.onScroll?.(v),a.value&&e.onReachBottom&&e.onReachBottom(),l.value&&e.onReachTop&&e.onReachTop()}function m(){const v=Date.now();v-d<r||(d=v,o.value=!0,f&&clearTimeout(f),c||(requestAnimationFrame(()=>{p(),c=!1}),c=!0),f=setTimeout(()=>{o.value=!1,p()},150))}st(()=>{const v=t.value;v&&(v.addEventListener("scroll",m,{passive:!0}),p())}),Ki(()=>{const v=t.value;v&&v.removeEventListener("scroll",m),f&&clearTimeout(f)});function g(){p()}return{isScrolling:o,isAtBottom:a,isAtTop:l,scrollPercentage:u,checkScroll:g}}const h$={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},h:"[calc(100vh-100px)]","max-h-500px":"","important-overflow-y-overlay":"",bg:"$bew-elevated",w:"450px",rounded:"$bew-radius",pos:"relative",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",class:"favorites-pop"},p$={flex:"~","items-center":"","justify-between":"",p:"x-6",pos:"sticky top-0 left-0",w:"full","h-50px":"",z:"2"},m$={flex:"~ gap-4"},g$={text:"sm"},v$={text:"sm"},_$={flex:"~",h:"[calc(100%-50px)]",rounded:"$bew-radius"},b$={pos:"sticky top-50px left-0",w:"140px","h-full":"",overflow:"y-auto",flex:"shrink-0",bg:"$bew-fill-1"},y$={grid:"~ cols-1"},w$=["onClick"],E$={flex:"~ gap-4","item-start":""},S$={bg:"$bew-skeleton",w:"120px",flex:"shrink-0",rounded:"$bew-radius-half",overflow:"hidden"},x$={pos:"relative"},T$=["src","alt"],A$={pos:"absolute bottom-0 right-0",bg:"black opacity-60",m:"1",p:"x-2 y-1",text:"white xs","rounded-full":""},k$={class:"keep-two-lines"},C$={text:"$bew-text-2 sm",m:"t-2",flex:"~","items-center":""},L$=qe(Me({__name:"FavoritesPop",setup(t,{expose:e}){const i=Mt([]),n=Mt([]),s=z(0),r=z(),o=z(1),a=z(!1),l=z(!1),u=z(),c=ge(()=>`//space.bilibili.com/${Ds()}/favlist?fid=${s.value}&ftype=create`),d=ge(()=>`https://www.bilibili.com/list/ml${s.value}`);Pe(s,(_,y)=>{_!==y&&(n.length=0,u.value&&Ba(u.value),o.value=1,m())}),st(()=>{h()});function f(){a.value||l.value||n.length===0||s.value&&(o.value++,m())}ph(u,{onReachBottom:f},{bottomThreshold:400,throttleDelay:100});async function h(){await p(),s.value=i[0].id,r.value=i[0].title}async function p(){await ze.favorite.getFavoriteCategories({up_mid:Ds()}).then(_=>{_.code===0&&(Object.assign(i,_.data.list),l.value=!1),a.value=!1})}async function m(){if(!a.value){a.value=!0;try{const _=await ze.favorite.getFavoriteResources({media_id:s.value,pn:o.value,keyword:""}),{code:y,data:E}=_;y===0&&(E&&"has_more"in E&&!E.has_more?l.value=!0:l.value=!1,E&&"medias"in E&&Array.isArray(E.medias)&&E.medias.length>0?n.push(...E.medias):(!E||!E.medias||E.medias.length===0)&&(l.value=!0))}catch(_){console.error("Failed to load favorite resources:",_)}finally{a.value=!1}}}function g(){n.length=0,o.value=1,m()}function v(_){s.value=_.id,r.value=_.title}function b(_){return _.link.includes("bilibili://music")}return e({refreshFavoriteResources:g}),(_,y)=>{const E=Ge("ALink");return L(),P("div",h$,[x("header",p$,[x("h3",{cursor:"pointer","font-600":"",onClick:y[0]||(y[0]=S=>w(Ba)(w(u)))},G(w(r)),1),x("div",m$,[F(E,{href:w(d),type:"topBar",flex:"~",items:"center"},{default:H(()=>[x("span",g$,G(_.$t("common.play_all")),1)]),_:1},8,["href"]),F(E,{href:w(c),type:"topBar",flex:"~",items:"center"},{default:H(()=>[x("span",v$,G(_.$t("common.view_all")),1)]),_:1},8,["href"])])]),x("main",_$,[x("aside",b$,[x("ul",y$,[(L(!0),P(Te,null,Ne(w(i),S=>(L(),P("li",{key:S.id,class:Ie(w(s)===S.id?"activated-category":""),p:"y-2 x-6",cursor:"pointer",transition:"~ duration-300",onClick:A=>v(S)},G(S.title),11,w$))),128))])]),x("div",{ref_key:"favoriteVideosWrap",ref:u,flex:"~ col gap-2 1",overflow:"y-auto",p:"x-4",pos:"relative","h-full":""},[w(a)&&w(n).length===0?(L(),_e(Rr,{key:0,pos:"absolute left-0",bg:"$bew-content",z:"1",w:"full",h:"full",flex:"~",items:"center",rounded:"$bew-radius"})):X("",!0),!w(a)&&w(n).length===0?(L(),_e(Hn,{key:1,w:"full",h:"full",rounded:"$bew-radius-half"})):X("",!0),F(so,{name:"list"},{default:H(()=>[(L(!0),P(Te,null,Ne(w(n),S=>(L(),_e(E,{key:S.id,href:b(S)?`https://www.bilibili.com/audio/au${S.id}`:`//www.bilibili.com/video/${S.bvid}`,type:"topBar","hover:bg":"$bew-fill-2",rounded:"$bew-radius",m:"last:b-4",p:"2",class:"group",transition:"~ duration-300"},{default:H(()=>[x("section",E$,[x("div",S$,[x("div",x$,[x("img",{w:"120px",class:"aspect-video",src:`${w(Li)(S.cover)}@256w_144h_1c`,alt:S.title,bg:"contain"},null,8,T$),x("div",A$,G(w(Tn)(S.duration)),1)])]),x("div",null,[x("h3",k$,G(S.title),1),x("div",C$,G(S.upper.name),1)])])]),_:2},1032,["href"]))),128))]),_:1}),F(nt,{name:"fade"},{default:H(()=>[w(a)&&w(n).length!==0?(L(),_e(Rr,{key:0,m:"b-4"})):X("",!0)]),_:1})],512)])])}}}),[["__scopeId","data-v-4a6b5b58"]]);var Xi=(t=>(t.ARCHIVE="archive",t.PGC="pgc",t.LIVE="live",t.ARTICLE="article",t.ARTICLE_LIST="article-list",t))(Xi||{});const I$={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},h:"[calc(100vh-100px)]","max-h-500px":"","important-overflow-y-overlay":"",bg:"$bew-elevated",w:"380px",rounded:"$bew-radius",pos:"relative",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",class:"history-pop bew-popover","data-key":"history",flex:"~ col"},R$={flex:"~ items-center justify-between",p:"x-6",pos:"sticky top-0 left-0",w:"full","h-50px":"",z:"2"},P$={flex:"~"},D$=["onClick"],O$={text:"sm"},M$={flex:"~ gap-4 item-start"},$$={bg:"$bew-skeleton",pos:"relative",w:"150px",flex:"shrink-0",border:"rounded-$bew-radius-half",overflow:"hidden"},F$=["onClick"],B$={pos:"relative"},N$=["src","alt"],U$={pos:"absolute bottom-0 right-0",bg:"black opacity-60",m:"1",p:"x-2 y-1",text:"white xs",border:"rounded-full"},V$={key:1,pos:"relative"},j$=["src","alt"],H$={key:0,pos:"absolute top-0 left-0",bg:"$bew-theme-color",text:"xs white",p:"x-2 y-1",m:"1","rounded-full":"",font:"semibold"},z$={key:1,pos:"absolute top-0 left-0",bg:"black opacity-60",text:"xs white",p:"x-2 y-1",m:"1",rounded:"full"},G$={key:2},W$=["src","alt"],K$={class:"keep-two-lines",overflow:"hidden",text:"ellipsis","break-anywhere":""},Y$={text:"$bew-text-2 sm",m:"t-4",flex:"~",align:"items-center"},X$={key:0,text:"$bew-theme-color",flex:"","items-center":"","gap-1":"",m:"l-2"},q$={text:"$bew-text-2 sm"},Z$=qe(Me({__name:"HistoryPop",setup(t,{expose:e}){const{t:i}=St(),n=Mt([]),s=ge(()=>[{id:0,name:i("topbar.moments_dropdown.tabs.videos"),isSelected:!0},{id:1,name:i("topbar.moments_dropdown.tabs.live"),isSelected:!1},{id:2,name:i("topbar.moments_dropdown.tabs.articles"),isSelected:!1}]),r=z(0),o=z(!1),a=z(!1),l=z(1),u=z();Pe(r,(g,v)=>{g!==v&&(n.length=0,u.value&&Ba(u.value),g===0?h(Xi.ARCHIVE):g===1?(l.value=1,h(Xi.LIVE)):g===2&&h(Xi.ARTICLE))},{immediate:!0});function c(){if(o.value||a.value||n.length===0)return;const g=n[n.length-1]?.view_at;g&&(r.value===0?h(Xi.ARCHIVE,g):r.value===1?h(Xi.LIVE,g):r.value===2&&h(Xi.ARTICLE,g))}ph(u,{onReachBottom:c},{bottomThreshold:400,throttleDelay:100});function d(g){o.value||(a.value=!1,r.value=g,s.value.forEach(v=>{v.isSelected=v.id===g}))}function f(g){return g.uri?g.uri:g.history.business===Xi.ARCHIVE?g?.videos&&g.videos>0?`//www.bilibili.com/video/${g.history.bvid}?p=${g.history.page}`:`//www.bilibili.com/video/${g.history.bvid}`:g.history.business===Xi.LIVE?`//live.bilibili.com/${g.history.oid}`:g.history.business===Xi.ARTICLE||g.history.business===Xi.ARTICLE_LIST?g.history.cid===0?`//www.bilibili.com/read/cv${g.history.oid}`:`//www.bilibili.com/read/cv${g.history.cid}`:""}async function h(g,v=0){if(!o.value&&!a.value){o.value=!0;try{const b=await ze.history.getHistoryList({type:g,view_at:v});if(b.code===0){if(!b.data.list||b.data.list.length===0){a.value=!0;return}Array.isArray(b.data.list)&&b.data.list.length>0&&n.push(...b.data.list)}}catch(b){console.error("Failed to load history list:",b)}finally{o.value=!1}}}function p(g,v){ze.history.deleteHistoryItem({kid:`${v.history.business}_${v.history.oid}`,csrf:oi()}).then(b=>{b.code===0&&n.splice(g,1)})}function m(){n.length=0,a.value=!1,u.value&&Ba(u.value),r.value===0?h(Xi.ARCHIVE):r.value===1?(l.value=1,h(Xi.LIVE)):r.value===2&&h(Xi.ARTICLE)}return e({initData:m}),(g,v)=>{const b=Ge("ALink");return L(),P("div",I$,[x("header",R$,[x("div",P$,[(L(!0),P(Te,null,Ne(w(s),_=>(L(),P("div",{key:_.id,m:"r-4",transition:"all duration-300",class:Ie(["tab",_.isSelected?"tab-selected":""]),cursor:"pointer",onClick:y=>d(_.id)},G(_.name),11,D$))),128))]),F(b,{href:"https://www.bilibili.com/history",type:"topBar",flex:"~ items-center"},{default:H(()=>[x("span",O$,G(g.$t("common.view_all")),1)]),_:1})]),x("main",{ref_key:"historysWrap",ref:u,"overflow-y-auto":"",rounded:"$bew-radius",flex:"~ col gap-2",p:"x-4","flex-1":"","min-h-0":"",pos:"relative"},[w(o)&&w(n).length===0?(L(),_e(Rr,{key:0,h:"full",flex:"~ items-center"})):X("",!0),!w(o)&&w(n).length===0?(L(),_e(Hn,{key:1,pos:"absolute top-0 left-0",bg:"$bew-content",z:"0",w:"full",h:"full",flex:"~ items-center",rounded:"$bew-radius"})):X("",!0),F(so,{name:"list"},{default:H(()=>[(L(!0),P(Te,null,Ne(w(n),(_,y)=>(L(),_e(b,{key:_.kid,href:f(_),type:"topBar",class:"group",m:"last:b-4",p:"2",rounded:"$bew-radius","hover:bg":"$bew-fill-2","duration-300":""},{default:H(()=>[x("section",M$,[x("div",$$,[x("div",{class:"group-hover:opacity-100 opacity-0",pos:"absolute top-0 right-0","z-1":"","w-24px":"","h-24px":"",bg:"black opacity-60 hover:$bew-error-color",grid:"~ place-items-center",m:"1",text:"white xs","duration-300":"",border:"rounded-full",onClick:ft(E=>p(y,_),["stop","prevent"])},[...v[0]||(v[0]=[x("i",{"i-mingcute:close-line":""},null,-1)])],8,F$),w(r)===0?(L(),P(Te,{key:0},[x("div",B$,[x("img",{w:"150px","h-full":"",class:"aspect-video",src:`${w(Li)(_.cover)}@256w_144h_1c`,alt:_.title,"object-cover":""},null,8,N$),x("div",U$,G(`${_.progress===-1?w(Tn)(_.duration):w(Tn)(_.progress)} /
                    ${w(Tn)(_.duration)}`),1)]),F(v1,{percentage:_.progress/_.duration*100},null,8,["percentage"])],64)):w(r)===1?(L(),P("div",V$,[x("img",{w:"150px",class:"aspect-video",src:`${w(Li)(_.cover)}@256w_144h_1c`,alt:_.title,bg:"contain"},null,8,j$),_.live_status===1?(L(),P("div",H$,[...v[1]||(v[1]=[He(" LIVE ",-1),x("i",{"i-svg-spinners:pulse-3":"","align-middle":"","mt--0.2em":""},null,-1)])])):(L(),P("div",z$," OFFLINE "))])):w(r)===2?(L(),P("div",G$,[x("img",{w:"150px",class:"aspect-video",src:`${Array.isArray(_.covers)?_.covers[0]:""}@256w_144h_1c`,"object-cover":"",alt:_.title,bg:"contain"},null,8,W$)])):X("",!0)]),x("div",null,[x("h3",K$,G(_.title),1),x("div",Y$,[F(b,{href:`https://space.bilibili.com/${_.author_mid}`,type:"topBar","stop-propagation":!0},{default:H(()=>[He(G(_.author_name),1)]),_:2},1032,["href"]),_.live_status===1?(L(),P("span",X$,[...v[2]||(v[2]=[He(" LIVE ",-1),x("i",{"i-svg-spinners:pulse-3":"","align-middle":"","mt--0.2em":""},null,-1)])])):X("",!0)]),x("p",q$,G(w(Af)(_.view_at*1e3,"YYYY-MM-DD HH:mm:ss").value),1)])])]),_:2},1032,["href"]))),128))]),_:1}),F(nt,{name:"fade"},{default:H(()=>[w(o)&&w(n).length!==0?(L(),_e(Rr,{key:0,m:"b-4"})):X("",!0)]),_:1})],512)])}}}),[["__scopeId","data-v-66e2b886"]]),Q$={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},h:"[calc(100vh-100px)]","max-h-500px":"","important-overflow-y-overlay":"",bg:"$bew-elevated",w:"380px",rounded:"$bew-radius",pos:"relative",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",class:"moments-pop bew-popover","data-key":"moments",flex:"~ col"},J$={flex:"~ items-center justify-between",p:"x-6",pos:"sticky top-0 left-0",w:"full","h-50px":"",z:"2"},eF={flex:"~"},tF=["onClick"],iF={text:"sm"},nF={key:0,rounded:"full",w:"8px",h:"8px",m:"-2",bg:"$bew-theme-color",pos:"absolute -top-12px -left-12px",style:{"box-shadow":"0 0 4px var(--bew-theme-color)"}},sF=["src"],rF={flex:"~",justify:"between",w:"full"},oF={key:0,flex:"~ wrap",items:"center",gap:"1"},aF={key:0,text:"$bew-text-2"},lF={"overflow-hidden":"","text-ellipsis":"","break-anywhere":""},uF={text:"$bew-text-2 sm",m:"y-2"},cF={key:0},dF={key:1,text:"$bew-theme-color",font:"bold",flex:"~",items:"center"},fF={class:"group",flex:"~ items-center justify-center",w:"82px",h:"46px",m:"l-4","shrink-0":"",rounded:"$bew-radius-half",bg:"$bew-skeleton"},hF=["src"],pF=["onClick"],mF=qe(Me({__name:"MomentsPop",setup(t,{expose:e}){const i=An(),{t:n}=St(),s=ge(()=>[{type:"video",name:k.value.filterArticlesInMoments?n("topbar.moments_dropdown.tabs.videos"):n("topbar.moments_dropdown.tabs.all")},{type:"live",name:n("topbar.moments_dropdown.tabs.live")}]),r=z(s.value[0]),o=z();Pe(()=>r.value.type,(f,h)=>{f!==h&&(o.value&&Ba(o.value),u())});function a(){i.isLoadingMoments||i.moments.length===0||c()}ph(o,{onReachBottom:a},{bottomThreshold:400,throttleDelay:100});function l(f){i.isLoadingMoments||f.type===r.value.type||(r.value=f)}function u(){i.initMomentsData(r.value.type)}function c(){i.getMomentsData(r.value.type)}function d(f){i.addedWatchLaterList.includes(f)?ze.watchlater.removeFromWatchLater({aid:f,csrf:oi()}).then(p=>{p.code===0&&(i.addedWatchLaterList.length=0,Object.assign(i.addedWatchLaterList,i.addedWatchLaterList.filter(m=>m!==f)))}):ze.watchlater.saveToWatchLater({aid:f,csrf:oi()}).then(p=>{p.code===0&&i.addedWatchLaterList.push(f)})}return e({initData:u}),(f,h)=>{const p=Ge("ALink");return L(),P("div",Q$,[x("header",J$,[x("div",eF,[(L(!0),P(Te,null,Ne(w(s),m=>(L(),P("div",{key:m.type,m:"r-4",transition:"all duration-300",class:Ie(["tab",m.type===w(r).type?"tab-selected":""]),cursor:"pointer",onClick:g=>l(m)},G(m.name),11,tF))),128))]),F(p,{href:"https://t.bilibili.com/",type:"topBar",flex:"~ items-center"},{default:H(()=>[x("span",iF,G(f.$t("common.view_all")),1)]),_:1})]),x("main",{ref_key:"momentsWrap",ref:o,rounded:"$bew-radius","overflow-y-auto":"",p:"x-4","flex-1":"","min-h-0":""},[w(i).isLoadingMoments&&w(i).moments.length===0?(L(),_e(Rr,{key:0,h:"full",flex:"~",items:"center"})):!w(i).isLoadingMoments&&w(i).moments.length===0?(L(),_e(Hn,{key:1,pos:"absolute top-0 left-0",bg:"$bew-content",z:"0",w:"full",h:"full",flex:"~ items-center",rounded:"$bew-radius-half"})):X("",!0),F(so,{name:"list"},{default:H(()=>[(L(!0),P(Te,null,Ne(w(i).moments,(m,g)=>(L(),_e(p,{key:g,href:m.link,type:"topBar",flex:"~ justify-between",m:"b-2",p:"2",rounded:"$bew-radius","hover:bg":"$bew-fill-2","duration-300":"",pos:"relative"},{default:H(()=>[w(i).isNewMoment(g)&&w(r).type==="video"?(L(),P("div",nF)):X("",!0),F(p,{href:m.authorJumpUrl,type:"topBar","stop-propagation":!0,rounded:"1/2",w:"40px",h:"40px",m:"r-4",bg:"$bew-skeleton","shrink-0":""},{default:H(()=>[x("img",{src:`${m.authorFace}@50w_50h_1c`,rounded:"1/2",w:"40px",h:"40px"},null,8,sF)]),_:2},1032,["href"]),x("div",rF,[x("div",null,[m.isCollaborative&&m.authors?(L(),P("div",oF,[(L(!0),P(Te,null,Ne(m.authors,(v,b)=>(L(),P(Te,{key:v.jump_url},[F(p,{href:v.jump_url,type:"topBar","stop-propagation":!0,"font-bold":""},{default:H(()=>[He(G(v.name),1)]),_:2},1032,["href"]),b<m.authors.length-1?(L(),P("span",aF,"/")):X("",!0)],64))),128))])):(L(),_e(p,{key:1,href:m.authorJumpUrl,type:"topBar","stop-propagation":!0,"font-bold":""},{default:H(()=>[He(G(m.author),1)]),_:2},1032,["href"])),x("div",lF,G(m.title),1),x("div",uF,[w(r).type!=="live"?(L(),P("div",cF,G(m.pubTime),1)):(L(),P("div",dF,[h[0]||(h[0]=x("div",{"i-fluent:live-24-filled":"",m:"r-2"},null,-1)),He(" "+G(f.$t("topbar.moments_dropdown.live_status")),1)]))])]),x("div",fF,[x("img",{src:`${m.cover}@128w_72h_1c`,w:"82px",h:"46px",rounded:"$bew-radius-half"},null,8,hF),x("div",{"opacity-0":"","group-hover:opacity-100":"",pos:"absolute","duration-300":"",bg:"black opacity-60",rounded:"$bew-radius-half","p-1":"","z-1":"","color-white":"",onClick:ft(v=>d(m.rid||0),["prevent"])},[w(i).addedWatchLaterList.includes(m.rid||0)?(L(),_e(sr,{key:1,content:f.$t("common.added"),placement:"bottom",type:"dark"},{default:H(()=>[F(w(ji),{icon:"line-md:confirm"})]),_:1},8,["content"])):(L(),_e(sr,{key:0,content:f.$t("common.save_to_watch_later"),placement:"bottom",type:"dark"},{default:H(()=>[...h[1]||(h[1]=[x("div",{"i-mingcute:carplay-line":""},null,-1)])]),_:1},8,["content"]))],8,pF)])])]),_:2},1032,["href"]))),128))]),_:1}),F(nt,{name:"fade"},{default:H(()=>[w(i).isLoadingMoments&&w(i).moments.length!==0?(L(),_e(Rr,{key:0,m:"b-4"})):X("",!0)]),_:1})],512)])}}}),[["__scopeId","data-v-0cbb9bb8"]]),gF={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},h:"[calc(100vh-100px)]","max-h-264px":"","important-overflow-y-auto":"",w:"180px",bg:"$bew-elevated",p:"4",rounded:"$bew-radius",flex:"~ col",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",class:"more-pop bew-popover","data-key":"more"},vF={class:"flex-1"},_F=Me({__name:"MorePop",setup(t){const{t:e}=St(),i=ge(()=>[{name:e("topbar.notifications"),url:"//message.bilibili.com",icon:"i-mingcute:notification-line"},{name:e("topbar.moments"),url:"//t.bilibili.com/",icon:"i-tabler:windmill"},{name:e("topbar.favorites"),url:`//space.bilibili.com/${Ds()??""}/favlist`,icon:"i-mingcute:star-line"},{name:e("topbar.history"),url:"//www.bilibili.com/history",icon:"i-mingcute:time-line"},{name:e("topbar.watch_later"),url:"//www.bilibili.com/watchlater/#/list",icon:"i-mingcute:carplay-line"},{name:e("topbar.creative_center"),url:"//member.bilibili.com/platform/home",icon:"i-mingcute:bulb-line"}]);return(n,s)=>{const r=Ge("ALink");return L(),P("div",gF,[(L(!0),P(Te,null,Ne(w(i),o=>(L(),_e(r,{key:o.name,href:o.url,type:"topBar",pos:"relative",p:"x-4 y-2",bg:"hover:$bew-fill-2",rounded:"$bew-radius",transition:"all duration-300",m:"b-1 last:b-0",flex:"~",items:"center"},{default:H(()=>[x("i",{class:Ie([o.icon,"mr-4"])},null,2),x("span",vF,G(o.name),1)]),_:2},1032,["href"]))),128))])}}}),bF={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},bg:"$bew-elevated",p:"4",rounded:"$bew-radius",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",flex:"~ col",class:"notifications-pop bew-popover","data-key":"notifications"},yF={flex:"~ items-center gap-2"},wF={flex:"1 shrink-0","text-nowrap":""},EF=Me({__name:"NotificationsPop",props:{unReadMessage:{},unReadDm:{}},emits:["itemClick"],setup(t,{emit:e}){const i=t,n=e,{t:s}=St(),r=ge(()=>[{name:s("topbar.noti_dropdown.replys"),url:"https://message.bilibili.com/#/reply",unreadCount:0,icon:"i-solar:reply-2-bold-duotone"},{name:s("topbar.noti_dropdown.mentions"),url:"https://message.bilibili.com/#/at",unreadCount:0,icon:"i-solar:mention-circle-bold-duotone"},{name:s("topbar.noti_dropdown.likes"),url:"https://message.bilibili.com/#/love",unreadCount:0,icon:"i-solar:like-bold-duotone"},{name:s("topbar.noti_dropdown.messages"),url:"https://message.bilibili.com/#/system",unreadCount:0,icon:"i-solar:chat-line-bold-duotone"},{name:s("topbar.noti_dropdown.chats"),url:"https://message.bilibili.com/#/whisper",unreadCount:0,icon:"i-solar:chat-round-bold-duotone"}]);Pe(()=>i.unReadMessage,a=>{if(a){r.value[0].unreadCount=a.reply||0,r.value[1].unreadCount=a.at||0;const l=a.like??a.recv_like??0;r.value[2].unreadCount=l,r.value[3].unreadCount=a.sys_msg||0}},{immediate:!0,deep:!0}),Pe(()=>i.unReadDm,a=>{a&&(r.value[4].unreadCount=(a.follow_unread||0)+(a.unfollow_unread||0))},{immediate:!0,deep:!0});function o(a,l){k.value.openNotificationsPageAsDrawer&&n("itemClick",l)}return(a,l)=>{const u=Ge("ALink");return L(),P("div",bF,[(L(!0),P(Te,null,Ne(w(r),c=>(L(),_e(u,{key:c.name,href:c.url,type:"topBar",pos:"relative",flex:"~ items-center justify-between gap-2",p:"x-4 y-2",bg:"hover:$bew-fill-2",rounded:"$bew-radius",transition:"all duration-300",m:"b-1 last:b-0","custom-click-event":w(k).openNotificationsPageAsDrawer,onClick:d=>o(d,c)},{default:H(()=>[x("div",yF,[x("i",{class:Ie(c.icon),text:"$bew-text-2"},null,2),x("span",wF,G(c.name),1)]),x("div",{style:Ue({visibility:c.unreadCount>0?"visible":"hidden"}),bg:"$bew-theme-color",rounded:"$bew-radius",text:"white xs leading-none center",grid:"~ place-items-center","px-1":"","min-w":"16px",h:"16px"},G(c.unreadCount>99?"99+":c.unreadCount),5)]),_:2},1032,["href","custom-click-event","onClick"]))),128))])}}}),SF={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},bg:"$bew-elevated",rounded:"$bew-radius",p:"4","min-w":"120px",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",flex:"~ col",class:"upload-pop bew-popover","data-key":"upload"},xF=["href"],TF={"text-nowrap":""},AF={__name:"UploadPop",setup(t){const{t:e}=St(),i=ge(()=>[{name:e("topbar.upload_dropdown.article"),url:"https://member.bilibili.com/platform/upload/text/apply",icon:"i-solar:document-add-bold-duotone"},{name:e("topbar.upload_dropdown.music"),url:"https://member.bilibili.com/platform/upload/audio/frame",icon:"i-solar:music-notes-bold-duotone"},{name:e("topbar.upload_dropdown.sticker"),url:"https://member.bilibili.com/platform/upload/sticker",icon:"i-solar:sticker-smile-square-bold-duotone"},{name:e("topbar.upload_dropdown.video"),url:"https://member.bilibili.com/platform/upload/video/frame",icon:"i-solar:video-frame-bold-duotone"},{name:e("topbar.upload_dropdown.manager"),url:"https://member.bilibili.com/platform/upload-manager/article",icon:"i-solar:video-library-bold-duotone"}]);return(n,s)=>(L(),P("div",SF,[(L(!0),P(Te,null,Ne(w(i),(r,o)=>(L(),P("a",{key:o,class:"upload-item",href:r.url,target:"_blank",flex:"~ items-center gap-2",p:"x-4 y-2",bg:"hover:$bew-fill-2",rounded:"$bew-radius",transition:"all duration-300",m:"b-1 last:b-0"},[x("i",{class:Ie(r.icon),text:"$bew-text-2"},null,2),x("div",TF,G(r.name),1)],8,xF))),128))]))}};var R1={exports:{}},P1={exports:{}},z5;function kF(){return z5||(z5=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(i,n){return i<<n|i>>>32-n},rotr:function(i,n){return i<<32-n|i>>>n},endian:function(i){if(i.constructor==Number)return e.rotl(i,8)&16711935|e.rotl(i,24)&4278255360;for(var n=0;n<i.length;n++)i[n]=e.endian(i[n]);return i},randomBytes:function(i){for(var n=[];i>0;i--)n.push(Math.floor(Math.random()*256));return n},bytesToWords:function(i){for(var n=[],s=0,r=0;s<i.length;s++,r+=8)n[r>>>5]|=i[s]<<24-r%32;return n},wordsToBytes:function(i){for(var n=[],s=0;s<i.length*32;s+=8)n.push(i[s>>>5]>>>24-s%32&255);return n},bytesToHex:function(i){for(var n=[],s=0;s<i.length;s++)n.push((i[s]>>>4).toString(16)),n.push((i[s]&15).toString(16));return n.join("")},hexToBytes:function(i){for(var n=[],s=0;s<i.length;s+=2)n.push(parseInt(i.substr(s,2),16));return n},bytesToBase64:function(i){for(var n=[],s=0;s<i.length;s+=3)for(var r=i[s]<<16|i[s+1]<<8|i[s+2],o=0;o<4;o++)s*8+o*6<=i.length*8?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(i){i=i.replace(/[^A-Z0-9+\/]/ig,"");for(var n=[],s=0,r=0;s<i.length;r=++s%4)r!=0&&n.push((t.indexOf(i.charAt(s-1))&Math.pow(2,-2*r+8)-1)<<r*2|t.indexOf(i.charAt(s))>>>6-r*2);return n}};P1.exports=e})()),P1.exports}var D1,G5;function W5(){if(G5)return D1;G5=1;var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var i=[],n=0;n<e.length;n++)i.push(e.charCodeAt(n)&255);return i},bytesToString:function(e){for(var i=[],n=0;n<e.length;n++)i.push(String.fromCharCode(e[n]));return i.join("")}}};return D1=t,D1}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var O1,K5;function CF(){if(K5)return O1;K5=1,O1=function(i){return i!=null&&(t(i)||e(i)||!!i._isBuffer)};function t(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function e(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&t(i.slice(0,0))}return O1}var Y5;function LF(){return Y5||(Y5=1,(function(){var t=kF(),e=W5().utf8,i=CF(),n=W5().bin,s=function(r,o){r.constructor==String?o&&o.encoding==="binary"?r=n.stringToBytes(r):r=e.stringToBytes(r):i(r)?r=Array.prototype.slice.call(r,0):!Array.isArray(r)&&r.constructor!==Uint8Array&&(r=r.toString());for(var a=t.bytesToWords(r),l=r.length*8,u=1732584193,c=-271733879,d=-1732584194,f=271733878,h=0;h<a.length;h++)a[h]=(a[h]<<8|a[h]>>>24)&16711935|(a[h]<<24|a[h]>>>8)&4278255360;a[l>>>5]|=128<<l%32,a[(l+64>>>9<<4)+14]=l;for(var p=s._ff,m=s._gg,g=s._hh,v=s._ii,h=0;h<a.length;h+=16){var b=u,_=c,y=d,E=f;u=p(u,c,d,f,a[h+0],7,-680876936),f=p(f,u,c,d,a[h+1],12,-389564586),d=p(d,f,u,c,a[h+2],17,606105819),c=p(c,d,f,u,a[h+3],22,-1044525330),u=p(u,c,d,f,a[h+4],7,-176418897),f=p(f,u,c,d,a[h+5],12,1200080426),d=p(d,f,u,c,a[h+6],17,-1473231341),c=p(c,d,f,u,a[h+7],22,-45705983),u=p(u,c,d,f,a[h+8],7,1770035416),f=p(f,u,c,d,a[h+9],12,-1958414417),d=p(d,f,u,c,a[h+10],17,-42063),c=p(c,d,f,u,a[h+11],22,-1990404162),u=p(u,c,d,f,a[h+12],7,1804603682),f=p(f,u,c,d,a[h+13],12,-40341101),d=p(d,f,u,c,a[h+14],17,-1502002290),c=p(c,d,f,u,a[h+15],22,1236535329),u=m(u,c,d,f,a[h+1],5,-165796510),f=m(f,u,c,d,a[h+6],9,-1069501632),d=m(d,f,u,c,a[h+11],14,643717713),c=m(c,d,f,u,a[h+0],20,-373897302),u=m(u,c,d,f,a[h+5],5,-701558691),f=m(f,u,c,d,a[h+10],9,38016083),d=m(d,f,u,c,a[h+15],14,-660478335),c=m(c,d,f,u,a[h+4],20,-405537848),u=m(u,c,d,f,a[h+9],5,568446438),f=m(f,u,c,d,a[h+14],9,-1019803690),d=m(d,f,u,c,a[h+3],14,-187363961),c=m(c,d,f,u,a[h+8],20,1163531501),u=m(u,c,d,f,a[h+13],5,-1444681467),f=m(f,u,c,d,a[h+2],9,-51403784),d=m(d,f,u,c,a[h+7],14,1735328473),c=m(c,d,f,u,a[h+12],20,-1926607734),u=g(u,c,d,f,a[h+5],4,-378558),f=g(f,u,c,d,a[h+8],11,-2022574463),d=g(d,f,u,c,a[h+11],16,1839030562),c=g(c,d,f,u,a[h+14],23,-35309556),u=g(u,c,d,f,a[h+1],4,-1530992060),f=g(f,u,c,d,a[h+4],11,1272893353),d=g(d,f,u,c,a[h+7],16,-155497632),c=g(c,d,f,u,a[h+10],23,-1094730640),u=g(u,c,d,f,a[h+13],4,681279174),f=g(f,u,c,d,a[h+0],11,-358537222),d=g(d,f,u,c,a[h+3],16,-722521979),c=g(c,d,f,u,a[h+6],23,76029189),u=g(u,c,d,f,a[h+9],4,-640364487),f=g(f,u,c,d,a[h+12],11,-421815835),d=g(d,f,u,c,a[h+15],16,530742520),c=g(c,d,f,u,a[h+2],23,-995338651),u=v(u,c,d,f,a[h+0],6,-198630844),f=v(f,u,c,d,a[h+7],10,1126891415),d=v(d,f,u,c,a[h+14],15,-1416354905),c=v(c,d,f,u,a[h+5],21,-57434055),u=v(u,c,d,f,a[h+12],6,1700485571),f=v(f,u,c,d,a[h+3],10,-1894986606),d=v(d,f,u,c,a[h+10],15,-1051523),c=v(c,d,f,u,a[h+1],21,-2054922799),u=v(u,c,d,f,a[h+8],6,1873313359),f=v(f,u,c,d,a[h+15],10,-30611744),d=v(d,f,u,c,a[h+6],15,-1560198380),c=v(c,d,f,u,a[h+13],21,1309151649),u=v(u,c,d,f,a[h+4],6,-145523070),f=v(f,u,c,d,a[h+11],10,-1120210379),d=v(d,f,u,c,a[h+2],15,718787259),c=v(c,d,f,u,a[h+9],21,-343485551),u=u+b>>>0,c=c+_>>>0,d=d+y>>>0,f=f+E>>>0}return t.endian([u,c,d,f])};s._ff=function(r,o,a,l,u,c,d){var f=r+(o&a|~o&l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._gg=function(r,o,a,l,u,c,d){var f=r+(o&l|a&~l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._hh=function(r,o,a,l,u,c,d){var f=r+(o^a^l)+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._ii=function(r,o,a,l,u,c,d){var f=r+(a^(o|~l))+(u>>>0)+d;return(f<<c|f>>>32-c)+o},s._blocksize=16,s._digestsize=16,R1.exports=function(r,o){if(r==null)throw new Error("Illegal argument "+r);var a=t.wordsToBytes(s(r,o));return o&&o.asBytes?a:o&&o.asString?n.bytesToString(a):t.bytesToHex(a)}})()),R1.exports}var IF=LF();const RF=Sf(IF);function X5(t,e,i){t.appkey=e;const n=new URLSearchParams(t);return n.sort(),RF(n.toString()+i)}function q5(){Pk()}const po={appkey:"4409e2ce8ffd12b8",appsec:"59b43e04ad6965f34319062b478f83dd"};function Z5(t){const e=X5(t,po.appkey,po.appsec);return new URLSearchParams({...t,sign:e})}function Q5(t){return X5(t,po.appkey,po.appsec)}function PF(t){const e=t.token_info||{},i=t.refresh_token_info||{},n=t.access_token||e.access_token||"",s=t.refresh_token||e.refresh_token||"",r=e.expires_in??t.expires_in??null,o=i.expires_in??null,a=t.mid??e.mid??null;ts.value={accessToken:n,refreshToken:s,accessTokenExpiresAt:r?Date.now()+r*1e3:null,refreshTokenExpiresAt:o?Date.now()+o*1e3:null,mid:a??null,lastUpdatedAt:Date.now()}}function DF(t=300*1e3){const{accessToken:e,refreshToken:i,refreshTokenExpiresAt:n}=ts.value;return!(!e||!i||n&&n<Date.now()+t)}function OF(t){const e="https://passport.bilibili.com/x/passport-tv-login/qrcode/poll";return new Promise((i,n)=>{fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:Z5({appkey:po.appkey,auth_code:t,local_id:"0",ts:"0"})}).then(s=>s.json()).then(s=>i(s)).catch(s=>n(s))})}function MF(){const t="https://passport.bilibili.com/x/passport-tv-login/qrcode/auth_code";return new Promise((e,i)=>{fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:Z5({appkey:po.appkey,local_id:"0",ts:"0"})}).then(n=>n.json()).then(n=>e(n)).catch(n=>i(n))})}const Lc=`
<svg class="icon lv0" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M146.285714 170.349714h1609.142857V877.714286H146.285714z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1763.766857 73.142857c24.868571 0 44.544 18.285714 43.593143 49.444572v747.52a48.859429 48.859429 0 0 1-49.737143 49.298285H122.88a48.859429 48.859429 0 0 1-49.737143-49.371428V208.969143c0-24.649143 18.651429-49.371429 49.737143-49.371429H1148.342857v-37.010285c0-24.722286 18.651429-49.444571 49.737143-49.444572h565.613714zM265.801143 264.630857h-49.737143c-18.578286 0-37.302857 18.578286-37.302857 37.010286v488.082286c0 18.578286 18.724571 37.010286 37.302857 37.010285h298.422857c18.651429 0 37.302857-18.432 37.302857-37.010285v-49.371429c0-18.651429-18.651429-37.156571-37.302857-37.156571h-211.382857v-401.554286c0-18.432-18.651429-37.010286-37.302857-37.010286z m447.634286 0h-49.737143c-18.651429 0-37.302857 18.578286-37.302857 37.010286v302.811428c-0.365714 12.653714 0 30.427429 6.217142 36.937143l174.08 172.982857c6.875429 6.875429 19.529143 9.947429 29.403429 11.264l10.020571 0.950858h8.045715l10.020571-0.950858c9.874286-1.316571 22.601143-4.388571 29.476572-11.264l174.08-172.982857c6.144-6.070857 18.578286-18.432 18.578285-30.866285V307.931429c0-18.505143-18.651429-37.083429-37.302857-37.083429h-49.590857c-18.724571 0-37.376 18.578286-37.376 37.083429V585.874286l-105.691429 104.96-105.618285-104.96V301.641143c0-18.432-18.651429-37.010286-37.302857-37.010286zM1658.148571 178.102857h-354.304a49.005714 49.005714 0 0 0-49.737142 49.444572v543.670857c0 24.649143 18.651429 49.371429 49.737142 49.371428h354.304c24.868571 0 49.737143-18.505143 49.737143-49.371428V227.474286a48.932571 48.932571 0 0 0-49.737143-49.444572zM1552.457143 295.497143c16.603429 0 33.206857 14.628571 36.717714 30.866286l0.658286 6.144v333.677714c0 16.457143-14.774857 32.914286-31.158857 36.352l-6.217143 0.658286h-142.921143c-16.603429 0-33.133714-14.628571-36.571429-30.866286l-0.731428-6.144V332.580571c0-16.457143 14.701714-32.914286 31.085714-36.352l6.217143-0.658285h142.921143z"
          fill="#C0C0C0"></path>
</svg>
`,M1=`
<svg class="icon lv1" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M146.285714 169.984h1609.142857v707.364571H146.285714z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1779.565714 73.142857c24.795429 0 49.590857 24.722286 43.446857 49.444572v747.446857a48.859429 48.859429 0 0 1-49.664 49.371428H144.603429a48.786286 48.786286 0 0 1-49.517715-49.371428V209.042286c0-24.722286 18.505143-49.444571 49.517715-49.444572h1021.805714v-37.010285c0-24.722286 18.651429-49.444571 49.590857-49.444572h563.638857z m-272.530285 117.467429h-123.830858c-18.505143 0-37.083429 18.505143-37.083428 37.010285v49.444572c0 18.505143 18.578286 37.083429 37.083428 37.083428h37.229715v389.12h-49.590857c-18.651429 0-37.156571 18.505143-37.156572 37.083429v49.371429c0 18.578286 18.505143 37.083429 37.156572 37.083428h223.378285c18.578286 0 38.326857-18.505143 38.326857-37.083428v-49.152c0-18.578286-19.748571-37.522286-38.326857-37.522286h-49.956571v-475.428572c0-18.505143-18.651429-37.010286-37.229714-37.010285zM732.964571 264.630857h-49.517714c-18.578286 0-37.156571 18.578286-37.156571 37.083429v308.443428c0.146286 12.214857 0.950857 27.940571 6.217143 31.305143l173.348571 172.909714c12.434286 12.434286 43.446857 12.434286 43.446857 12.434286h1.024c5.632-0.219429 31.305143-1.462857 42.276572-12.434286l173.421714-172.909714c1.389714-1.462857 3.072-2.852571 4.900571-4.388571 6.217143-5.339429 13.604571-11.702857 13.604572-20.260572V307.858286c0-18.505143-18.505143-37.010286-37.083429-37.010286h-49.517714c-18.651429 0-37.302857 18.505143-37.302857 37.010286v277.942857L875.52 690.907429 770.194286 585.874286V301.714286c0-18.505143-18.505143-37.083429-37.156572-37.083429z m-445.878857 0h-49.590857c-18.505143 0-37.083429 18.578286-37.083428 37.083429v488.009143c0 18.505143 18.578286 37.010286 37.083428 37.010285h297.325714c18.505143 0 37.156571-18.505143 37.156572-37.010285v-49.444572c0-18.578286-18.578286-37.083429-37.156572-37.083428H324.242286v-401.554286c0-18.432-18.578286-37.010286-37.156572-37.010286z"
          fill="#C0C0C0"></path>
</svg>
`,$1=`
<svg class="icon lv2" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M146.285714 171.739429h1609.142857v707.364571H146.285714z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1779.565714 73.142857c24.795429 0 49.590857 24.722286 43.446857 49.444572v747.52a48.786286 48.786286 0 0 1-49.590857 49.298285H144.603429a48.713143 48.713143 0 0 1-49.590858-49.371428V208.969143c0-24.649143 18.578286-49.371429 49.590858-49.371429h1021.805714v-37.010285c0-24.722286 18.578286-49.444571 49.517714-49.444572h563.565714zM733.037714 264.630857h-49.590857c-18.578286 0-37.156571 18.578286-37.156571 37.010286v302.811428c0 13.897143 0 33.060571 6.217143 36.937143l173.348571 172.982857c12.434286 12.434286 43.373714 12.434286 43.373714 12.434286s31.012571 0 43.373715-12.434286l185.782857-172.982857c6.217143-6.070857 6.217143-18.432 6.217143-30.866285V307.931429c0-18.505143-18.578286-37.083429-37.156572-37.083429h-49.517714c-18.651429 0-37.156571 18.578286-37.156572 37.083429V585.874286l-105.325714 104.96-105.325714-104.96V301.641143c0-18.432-18.505143-37.010286-37.083429-37.010286z m-445.952 0h-49.517714c-18.578286 0-37.156571 18.578286-37.156571 37.010286v488.082286c0 18.578286 18.578286 37.010286 37.156571 37.010285h297.252571c18.578286 0 37.156571-18.432 37.156572-37.010285v-49.371429c0-18.651429-18.578286-37.156571-37.156572-37.156571H324.242286v-401.554286c0-18.432-18.578286-37.010286-37.156572-37.010286z m1399.661715-92.672h-384c-18.578286 0-37.083429 18.505143-37.083429 37.010286v49.444571c0 18.505143 18.505143 37.083429 37.083429 37.083429h297.252571v142.043428h-297.252571c-18.578286 0-37.083429 18.505143-37.083429 37.083429v315.099429c0 18.505143 18.505143 37.010286 37.083429 37.010285h384c18.578286 0 37.156571-18.505143 37.156571-37.010285v-49.444572c0-18.578286-18.578286-37.156571-37.156571-37.156571h-297.179429V561.152h297.179429c18.578286 0 37.156571-18.578286 37.156571-37.083429V208.969143c0-18.505143-18.578286-37.010286-37.156571-37.010286z"
          fill="#8BD29B"></path>
</svg>
`,F1=`
<svg class="icon lv3" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M146.285714 174.811429h1609.142857v707.364571H146.285714z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1757.622857 73.142857c24.795429 0 49.517714 24.722286 43.373714 49.444572v747.446857a48.859429 48.859429 0 0 1-49.590857 49.371428H122.660571A48.786286 48.786286 0 0 1 73.142857 870.034286V209.042286c0-24.722286 18.578286-49.444571 49.517714-49.444572h1021.805715v-37.010285c0-24.722286 18.651429-49.444571 49.590857-49.444572h563.565714zM710.948571 264.630857h-49.517714c-18.578286 0-37.156571 18.578286-37.156571 37.083429v302.665143c0 13.165714 0 32.987429 6.217143 37.083428l173.348571 172.909714c11.044571 10.971429 36.717714 12.214857 42.349714 12.434286h1.024s31.012571 0 43.373715-12.434286l185.782857-172.909714c6.217143-6.217143 6.217143-18.505143 6.217143-30.866286V307.858286c0-18.505143-18.578286-37.010286-37.156572-37.010286h-49.517714c-18.651429 0-37.229714 18.505143-37.229714 37.010286v277.942857l-105.325715 105.033143L748.251429 585.874286V301.714286c0-18.505143-18.651429-37.083429-37.156572-37.083429z m-445.878857 0h-49.590857c-18.578286 0-37.156571 18.578286-37.156571 37.083429v488.009143c0 18.505143 18.578286 37.010286 37.156571 37.010285h297.325714c18.578286 0 37.156571-18.505143 37.156572-37.010285v-49.444572c0-18.578286-18.578286-37.083429-37.156572-37.083428h-210.651428v-401.554286c0-18.432-18.505143-37.010286-37.083429-37.010286zM1664.731429 171.958857h-384c-18.578286 0-37.083429 18.505143-37.083429 37.010286v49.444571c0 18.505143 18.505143 37.083429 37.083429 37.083429h297.252571v142.043428h-297.252571c-18.578286 0-37.083429 18.505143-37.083429 37.083429v49.444571c0 18.505143 18.505143 37.010286 37.083429 37.010286h297.252571v142.116572h-297.252571c-18.578286 0-37.083429 18.432-37.083429 37.010285v49.444572c0 18.505143 18.505143 37.083429 37.083429 37.083428h384c18.578286 0 37.156571-18.578286 37.156571-37.083428V208.969143c0-18.505143-18.578286-37.010286-37.156571-37.010286z"
          fill="#7BCDEF"></path>
</svg>
`,B1=`
<svg class="icon lv4" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M154.916571 159.890286h1609.142858v707.364571h-1609.142858z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1757.622857 73.142857c24.795429 0 49.517714 24.722286 43.373714 49.444572v747.446857a48.859429 48.859429 0 0 1-49.590857 49.371428H122.660571A48.786286 48.786286 0 0 1 73.142857 870.034286V209.042286c0-24.722286 18.578286-49.444571 49.517714-49.444572h1021.805715v-37.010285c0-24.722286 18.651429-49.444571 49.590857-49.444572h563.565714zM710.948571 264.630857h-49.517714c-18.578286 0-37.156571 18.578286-37.156571 37.083429v309.248c0.146286 13.238857 0.877714 26.770286 6.217143 30.500571l173.348571 172.909714c12.434286 12.434286 43.373714 12.434286 43.373714 12.434286h1.097143c5.558857-0.219429 31.232-1.462857 42.276572-12.434286l185.782857-172.909714c6.217143-6.217143 6.217143-18.505143 6.217143-30.866286V307.858286c0-18.505143-18.578286-37.010286-37.156572-37.010286h-49.517714c-18.651429 0-37.229714 18.505143-37.229714 37.010286v277.942857l-105.325715 105.033143L748.251429 585.874286V301.714286c0-18.505143-18.651429-37.083429-37.156572-37.083429z m-445.878857 0h-49.590857c-18.578286 0-37.156571 18.578286-37.156571 37.083429v488.009143c0 18.505143 18.578286 37.010286 37.156571 37.010285h297.325714c18.578286 0 37.156571-18.505143 37.156572-37.010285v-49.444572c0-18.578286-18.578286-37.083429-37.156572-37.083428h-210.651428v-401.554286c0-18.432-18.505143-37.010286-37.083429-37.010286z m1065.179429-92.672h-49.517714c-18.578286 0-37.083429 18.505143-37.083429 37.010286v315.026286c0 18.578286 18.505143 37.083429 37.083429 37.083428h297.252571v228.571429c0 18.505143 18.578286 37.083429 37.229714 37.083428h49.517715c18.578286 0 37.156571-18.578286 37.156571-37.083428V208.969143c0-18.505143-18.578286-37.010286-37.156571-37.010286h-49.517715c-18.651429 0-37.229714 18.505143-37.229714 37.010286v228.571428h-210.505143V208.969143c0-18.505143-18.651429-37.010286-37.229714-37.010286z"
          fill="#FEBB8B"></path>
</svg>
`,N1=`
<svg class="icon lv5" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M154.916571 169.691429h1609.142858v707.364571h-1609.142858z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1779.565714 73.142857c24.795429 0 49.590857 24.722286 43.446857 49.444572v747.446857a48.859429 48.859429 0 0 1-49.590857 49.371428H144.603429a48.786286 48.786286 0 0 1-49.590858-49.371428V209.042286c0-24.722286 18.578286-49.444571 49.590858-49.444572h1021.805714v-37.010285c0-24.722286 18.578286-49.444571 49.517714-49.444572h563.565714zM733.037714 264.630857h-49.590857c-18.578286 0-37.156571 18.578286-37.156571 37.083429v302.665143c0 12.507429 0 31.232 6.217143 37.083428l173.348571 172.909714c11.044571 10.971429 36.790857 12.214857 42.349714 12.434286h1.024s31.012571 0 43.373715-12.434286l185.782857-172.909714c6.217143-6.217143 6.217143-18.505143 6.217143-30.866286V307.858286c0-18.505143-18.578286-37.010286-37.156572-37.010286h-49.517714c-18.651429 0-37.156571 18.505143-37.156572 37.010286v277.942857l-105.325714 105.033143-105.325714-104.96V301.714286c0-18.505143-18.505143-37.083429-37.083429-37.083429z m-445.952 0h-49.517714c-18.578286 0-37.156571 18.578286-37.156571 37.083429v488.009143c0 18.505143 18.578286 37.010286 37.156571 37.010285h297.252571c18.578286 0 37.156571-18.505143 37.156572-37.010285v-49.444572c0-18.578286-18.578286-37.083429-37.156572-37.083428H324.242286v-401.554286c0-18.432-18.578286-37.010286-37.156572-37.010286z m1399.661715-92.672h-384c-18.578286 0-37.083429 18.505143-37.083429 37.010286v315.026286c0 18.578286 18.505143 37.083429 37.083429 37.083428h297.252571v142.116572h-297.252571c-18.578286 0-37.083429 18.432-37.083429 37.010285v49.444572c0 18.505143 18.505143 37.083429 37.083429 37.083428h384c18.578286 0 37.156571-18.578286 37.156571-37.083428V474.624c0-18.505143-18.578286-37.083429-37.156571-37.083429h-297.179429V301.641143h297.179429c18.578286 0 37.156571-18.505143 37.156571-37.083429v-55.588571c0-18.505143-18.578286-37.010286-37.156571-37.010286z"
          fill="#EE672A"></path>
</svg>
`,U1=`
<svg class="icon lv6" viewBox="0 0 1901 1024" width="200" height="200">
    <path d="M154.916571 184.758857h1609.142858v707.364572h-1609.142858z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M1779.565714 93.037714c22.674286 0 45.421714 20.772571 44.324572 43.300572l-0.877715 6.144v747.446857c0 22.454857-15.36 44.909714-41.472 48.859428l-8.118857 0.585143H144.603429a48.859429 48.859429 0 0 1-49.005715-41.325714l-0.585143-8.118857V228.937143c0-22.454857 15.36-44.909714 41.398858-48.786286l8.192-0.585143h1021.805714v-37.083428c0-22.454857 15.36-44.909714 41.398857-48.786286l8.118857-0.658286h563.565714z m-92.891428 105.033143h-383.926857c-16.457143 0-32.914286 14.628571-36.425143 30.939429l-0.658286 6.144v574.464c0 16.457143 14.628571 32.914286 30.939429 36.425143l6.144 0.658285h384c16.530286 0 32.987429-14.628571 36.498285-30.939428l0.658286-6.144V494.592c0-16.530286-14.628571-32.914286-31.012571-36.425143l-6.144-0.658286h-297.179429V321.609143h297.179429c16.530286 0 32.987429-14.628571 36.498285-30.939429l0.658286-6.144v-49.371428c0-18.578286-18.578286-37.083429-37.156571-37.083429zM733.110857 284.598857h-49.590857c-18.578286 0-37.156571 18.505143-37.156571 37.010286v302.738286c0 16.749714 0 31.817143 6.217142 37.010285l173.348572 172.909715c7.899429 7.899429 23.259429 10.752 33.426286 11.849142l9.947428 0.585143 8.557714-0.438857c10.093714-0.950857 26.550857-3.657143 34.816-11.995428l185.782858-172.909715c4.973714-4.900571 5.997714-13.824 6.144-23.478857V327.68c0-18.505143-18.505143-37.010286-37.083429-37.010286h-49.517714c-18.651429 0-37.156571 18.505143-37.156572 37.083429v277.942857l-105.325714 104.96-105.325714-104.96V321.609143c0-18.505143-18.505143-37.010286-37.083429-37.010286z m-445.952 0h-49.517714c-16.530286 0-33.060571 14.628571-36.571429 30.866286l-0.585143 6.144v488.009143c0 16.530286 14.628571 32.914286 30.939429 36.425143l6.217143 0.658285h297.252571c16.530286 0 32.987429-14.628571 36.498286-30.939428l0.658286-6.144v-49.371429c0-16.603429-14.628571-32.987429-31.012572-36.425143l-6.144-0.658285H324.242286v-401.554286c0-18.505143-18.578286-37.010286-37.156572-37.010286z m1312.914286 296.448v142.116572h-210.505143V581.046857h210.505143z"
          fill="#FF0000"></path>
</svg>
`,J5=`
<svg class="icon lv6d" viewBox="0 0 2633 1024" width="200" height="200">
    <path d="M169.545143 163.181714h2248.923428v707.364572H169.545143z" fill="#FFFFFF"></path>
    <path class="level-bg"
          d="M2510.994286 73.142857c22.747429 0 45.494857 20.772571 44.397714 43.300572l-0.950857 6.144v747.446857c0 22.381714-15.36 44.909714-41.472 48.786285l-8.118857 0.585143H144.676571a48.859429 48.859429 0 0 1-49.005714-41.252571l-0.512-8.118857V209.042286c0-22.454857 15.36-44.982857 41.398857-48.859429l8.118857-0.585143h1021.805715v-37.010285c0-22.454857 15.36-44.982857 41.472-48.859429l8.045714-0.585143h1295.067429zM2170.88 174.518857l-272.310857 370.614857a27.867429 27.867429 0 0 0 22.528 44.397715h176.713143l-30.427429 210.944c-4.169143 28.745143 32.914286 43.958857 50.176 20.48l272.237714-370.541715a27.940571 27.940571 0 0 0-22.528-44.470857h-176.713142l30.427428-210.870857c4.169143-28.818286-32.914286-43.958857-50.102857-20.553143z m-484.059429 3.584h-384c-18.505143 0-37.010286 18.578286-37.010285 37.083429v574.464c0 18.578286 18.505143 37.083429 37.083428 37.083428h384c18.505143 0 37.083429-18.505143 37.083429-37.083428V474.624c0-18.505143-18.578286-37.010286-37.156572-37.010286h-297.179428V301.714286h297.179428c18.578286 0 37.156571-18.578286 37.156572-37.083429v-49.444571c0-18.505143-18.578286-37.083429-37.156572-37.083429zM733.037714 264.630857h-49.517714c-18.578286 0-37.156571 18.505143-37.156571 37.083429v302.665143c0 16.822857 0 31.817143 6.217142 37.083428l173.348572 172.909714c12.434286 12.361143 43.373714 12.361143 43.373714 12.361143s30.939429 0 43.373714-12.361143l185.782858-172.909714c6.144-6.217143 6.144-18.578286 6.144-30.866286V307.858286c0-18.505143-18.578286-37.010286-37.156572-37.010286h-49.444571c-18.651429 0-37.229714 18.505143-37.229715 37.010286V585.874286l-105.325714 104.96L770.194286 585.874286V301.714286c0-18.578286-18.578286-37.083429-37.156572-37.083429z m-445.878857 0h-49.590857c-16.530286 0-32.987429 14.628571-36.498286 30.939429l-0.658285 6.144v488.009143c0 16.457143 14.628571 32.914286 31.012571 36.352l6.144 0.658285h297.252571c16.530286 0 33.060571-14.628571 36.571429-30.866285l0.585143-6.144v-49.444572c0-16.530286-14.628571-32.914286-30.939429-36.425143l-6.217143-0.658285H324.315429V301.714286c0-18.578286-18.578286-37.083429-37.156572-37.083429z m1312.914286 296.521143v142.043429h-210.505143V561.152h210.432z"
          fill="#FF0000"></path>
</svg>
`,$F={style:{"backdrop-filter":"var(--bew-filter-glass-1)","overflow-y":"auto"},"w-300px":"","max-h":"[calc(100vh-120px)]","min-h-0":"","p-4":"",rounded:"$bew-radius","z--1":"",bg:"$bew-elevated-alt",border:"1 $bew-border-color",shadow:"[var(--bew-shadow-3),var(--bew-shadow-edge-glow-1)]",class:"userPanel-pop bew-popover","data-key":"userPanel"},FF={text:"xl","font-medium":"",flex:"~ items-center gap-2"},BF={key:1},NF={text:"xs $bew-text-2",m:"t-1 b-2"},UF={flex:"~ items-center justify-center gap-2","w-full":""},VF=["innerHTML"],jF={relative:"",w:"full",h:"2px",bg:"$bew-fill-3"},HF=["innerHTML"],zF={"w-full":"",text:"xs $bew-text-3"},GF=["innerHTML"],WF={flex:"~ col 1",text:"xs $bew-text-3"},KF={key:0},YF={key:1},XF={grid:"~ cols-3 gap-2","mb-2":""},qF={class:"num"},ZF={class:"num"},QF={class:"num"},JF={flex:"~ justify-between col gap-1","mb-2":"","p-2":"",bg:"$bew-fill-alt",rounded:"$bew-radius",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-1)]"},eB={key:0,class:"unread-dot",pos:"absolute top-1 right-1"},tB={flex:"~ items-center gap-2"},iB={flex:"~ justify-between col gap-1","p-2":"",bg:"$bew-fill-alt",rounded:"$bew-radius",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-1)]"},nB={key:0,class:"unread-dot",pos:"absolute top-1 right-1",style:{"z-index":"999 !important"}},sB={flex:"~ items-center gap-2"},rB=qe(Me({__name:"UserPanelPop",props:{userInfo:{}},setup(t){const e=t,{t:i}=St(),n=An(),{hasBCoinToReceive:s}=Va(n),r=ge(()=>Ds()),o=ge(()=>[{name:i("topbar.user_dropdown.uploads_manager"),url:"https://member.bilibili.com/platform/upload-manager/article",icon:"i-solar:video-library-bold-duotone"},{name:i("topbar.user_dropdown.account_settings"),url:"https://account.bilibili.com/account/home",icon:"i-solar:user-circle-bold-duotone"},{name:i("topbar.user_dropdown.bilibili_premium"),url:"https://account.bilibili.com/big",icon:"i-solar:accessibility-bold-duotone"},{name:i("topbar.user_dropdown.bilibili_premium_rewards"),url:"https://account.bilibili.com/account/big/myPackage",icon:"i-solar:accessibility-bold-duotone",code:"vip_rewards"},{name:i("topbar.user_dropdown.b_coins_wallet"),url:"https://pay.bilibili.com/",icon:"i-solar:wallet-money-bold-duotone"},{name:i("topbar.user_dropdown.orders"),url:"https://show.bilibili.com/orderlist",icon:"i-solar:clipboard-list-bold-duotone"},{name:i("topbar.user_dropdown.workshop"),url:"https://gf.bilibili.com?msource=main_station",icon:"i-solar:garage-bold-duotone"},{name:i("topbar.user_dropdown.my_stream_info"),url:"https://link.bilibili.com/p/center/index",icon:"i-solar:videocamera-record-bold-duotone"},{name:i("topbar.user_dropdown.my_courses"),url:"https://www.bilibili.com/cheese/mine/list",icon:"i-solar:notebook-bookmark-bold-duotone"}]),a=ge(()=>{const{next_exp:p,current_exp:m}=e.userInfo.level_info;return`${(m/p*100).toFixed(2)}%`}),l=Mt({}),u=Mt({});st(()=>{ze.user.getUserStat().then(p=>{p.code===0&&Object.assign(l,p.data)}),ze.user.getLoginLog().then(p=>{p.code===0&&p.data?.list?.length>0&&Object.assign(u,p.data.list[0])})});async function c(){q5(),n.isLogin=!1,n.cleanup(),ze.auth.logout({biliCSRF:oi()}).then(()=>{location.reload()})}const d=[Lc,M1,$1,F1,B1,N1,U1,J5];function f(p,m=!1){return p===6&&m?J5:d[p]||""}function h(){k.value.topBarLinkOpenMode==="newTab"?window.open(`https://space.bilibili.com/${r.value}`,"_blank"):k.value.topBarLinkOpenMode==="currentTabIfNotHomepage"?Et()?window.open(`https://space.bilibili.com/${r.value}`,"_blank"):window.open(`https://space.bilibili.com/${r.value}`,"_self"):window.open(`https://space.bilibili.com/${r.value}`,"_self")}return(p,m)=>{const g=Ge("Button"),v=Ge("ALink");return L(),P("div",$F,[x("div",FF,[w(k).touchScreenOptimization?(L(),_e(g,{key:0,type:"secondary",strong:"",onClick:h},{default:H(()=>[He(G(p.userInfo.uname?p.userInfo.uname:"-"),1)]),_:1})):(L(),P("span",BF,G(p.userInfo.uname?p.userInfo.uname:"-"),1))]),x("div",NF,[F(v,{class:"group mr-4",href:"https://account.bilibili.com/account/coin",type:"topBar"},{default:H(()=>[He(G(p.$t("topbar.user_dropdown.money")+(p.userInfo.money??"-")),1)]),_:1}),F(v,{class:"group",href:"https://pay.bilibili.com/pay-v2-web/bcoin_index",type:"topBar"},{default:H(()=>[He(G(p.$t("topbar.user_dropdown.b_coins")+(p.userInfo.wallet?.bcoin_balance??"-")),1)]),_:1})]),p.userInfo?.level_info?.current_level<6?(L(),_e(v,{key:0,href:"//account.bilibili.com/account/record?type=exp",type:"topBar",block:"","mt-2":"","mb-2":"","w-full":"",flex:"~ col justify-center items-start"},{default:H(()=>[x("div",UF,[x("div",{flex:"~ items-center",class:"level",innerHTML:w(Ul).sanitize(f(p.userInfo.level_info.current_level))},null,8,VF),x("div",jF,[x("div",{pos:"absolute top-0 left-0","h-2px":"",h:"2px",rounded:"2px",bg:"$bew-warning-color",style:Ue({width:w(a)})},null,4)]),x("div",{class:"level level-next",flex:"~ items-center",innerHTML:w(Ul).sanitize(f(p.userInfo.level_info.current_level+1))},null,8,HF)]),x("div",zF,G(p.$t("topbar.user_dropdown.exp_desc",{current_exp:p.userInfo.level_info.current_exp,level:p.userInfo.level_info.current_level+1,need_exp:p.userInfo.level_info.next_exp-p.userInfo.level_info.current_exp||0})),1)]),_:1})):(L(),_e(v,{key:1,href:"//account.bilibili.com/account/record?type=exp",type:"topBar",block:"","mt-2":"","mb-2":"","w-full":"","p-2":"",bg:"$bew-fill-alt",rounded:"$bew-radius",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-1)]","duration-300":"","hover:bg":"$bew-fill-2",flex:"~ items-center gap-2"},{default:H(()=>[x("div",{style:Ue({width:p.userInfo?.is_senior_member?"36px":"28px"}),class:"level","h-20px":"",innerHTML:w(Ul).sanitize(f(p.userInfo?.level_info?.current_level,p.userInfo?.is_senior_member))},null,12,GF),x("div",WF,[w(u).time_at?(L(),P("div",KF,G(p.$t("topbar.user_dropdown.last_login_time"))+": "+G(w(u).time_at),1)):X("",!0),w(u).geo?(L(),P("div",YF,G(p.$t("topbar.user_dropdown.last_login_location"))+": "+G(w(u).geo),1)):X("",!0)])]),_:1})),x("div",XF,[F(v,{class:"channel-info-item",href:`https://space.bilibili.com/${w(r)}/fans/follow`,title:`${w(l).following}`,type:"topBar"},{default:H(()=>[x("div",qF,G(w(l).following?w(Bs)(w(l).following):"0"),1),x("div",null,G(p.$t("topbar.user_dropdown.following")),1)]),_:1},8,["href","title"]),F(v,{class:"channel-info-item",href:`https://space.bilibili.com/${w(r)}/fans/fans`,title:`${w(l).follower}`,type:"topBar"},{default:H(()=>[x("div",ZF,G(w(l).follower?w(Bs)(w(l).follower):"0"),1),x("div",null,G(p.$t("topbar.user_dropdown.followers")),1)]),_:1},8,["href","title"]),F(v,{class:"channel-info-item",href:`https://space.bilibili.com/${w(r)}/dynamic`,title:`${w(l).dynamic_count}`,type:"topBar"},{default:H(()=>[x("div",QF,G(w(l).dynamic_count?w(Bs)(w(l).dynamic_count):"0"),1),x("div",null,G(p.$t("topbar.user_dropdown.posts")),1)]),_:1},8,["href","title"])]),x("div",JF,[(L(!0),P(Te,null,Ne(w(o).filter((b,_)=>_<=1),b=>(L(),_e(v,{key:b.url,href:b.url,type:"topBar",p:"x-4 y-2",flex:"~ items-center justify-between",rounded:"$bew-radius","duration-300":"","hover:bg":"$bew-fill-2",relative:""},{default:H(()=>[w(s)&&b?.code==="vip_rewards"&&w(k).showBCoinReceiveReminder?(L(),P("div",eB)):X("",!0),x("div",tB,[x("div",{class:Ie(b.icon),text:"$bew-text-2"},null,2),He(" "+G(b.name),1)]),m[1]||(m[1]=x("div",{"i-mingcute:arrow-right-line":""},null,-1))]),_:2},1032,["href"]))),128))]),x("div",iB,[(L(!0),P(Te,null,Ne(w(o).filter((b,_)=>_>1),b=>(L(),_e(v,{key:b.url,href:b.url,type:"topBar",p:"x-4 y-2",flex:"~ items-center justify-between",rounded:"$bew-radius","duration-300":"","hover:bg":"$bew-fill-2",relative:""},{default:H(()=>[w(s)&&b?.code==="vip_rewards"?(L(),P("div",nB)):X("",!0),x("div",sB,[x("div",{class:Ie(b.icon),text:"$bew-text-2"},null,2),He(" "+G(b.name),1)]),m[2]||(m[2]=x("div",{"i-mingcute:arrow-right-line":""},null,-1))]),_:2},1032,["href"]))),128)),x("div",{text:"$bew-error-color",p:"x-4 y-2",flex:"~ items-center",rounded:"$bew-radius","duration-300":"","cursor-pointer":"","hover:bg":"$bew-fill-2",onClick:m[0]||(m[0]=b=>c())},[m[3]||(m[3]=x("div",{"i-solar:logout-2-bold-duotone":"",text:"$bew-error-60","mr-2":""},null,-1)),He(" "+G(p.$t("topbar.user_dropdown.log_out")),1)])])])}}}),[["__scopeId","data-v-9aea0546"]]),oB={style:{"backdrop-filter":"var(--bew-filter-glass-1)"},h:"[calc(100vh-100px)]","max-h-500px":"","important-overflow-y-overlay":"",bg:"$bew-elevated",w:"380px",rounded:"$bew-radius",pos:"relative",of:"hidden",shadow:"[var(--bew-shadow-edge-glow-1),var(--bew-shadow-3)]",border:"1 $bew-border-color",class:"watchLater-pop bew-popover","data-key":"watchLater",flex:"~ col"},aB={flex:"~ items-center justify-between",p:"x-6",pos:"sticky top-0 left-0",w:"full","h-50px":"",z:"2"},lB={flex:"~"},uB={flex:"~ gap-4"},cB={text:"sm"},dB={text:"sm"},fB={flex:"~ gap-4 item-start"},hB={bg:"$bew-skeleton",pos:"relative",w:"150px",flex:"shrink-0",border:"rounded-$bew-radius-half",overflow:"hidden"},pB=["onClick"],mB=["onClick"],gB={pos:"relative"},vB={pos:"absolute bottom-0 right-0",bg:"black opacity-60",m:"1",p:"x-2 y-1",text:"white xs",border:"rounded-full"},_B={class:"keep-two-lines",overflow:"hidden",text:"ellipsis","break-anywhere":""},bB={text:"$bew-text-2 sm",m:"t-4",flex:"~",align:"items-center"},yB={key:2,text:"$bew-text-3 xs center",p:"y-4"},wB=qe(Me({__name:"WatchLaterPop",setup(t){const e=An(),{watchLaterList:i,isLoadingWatchLater:n,watchLaterCount:s}=Va(e),r=ge(()=>"https://www.bilibili.com/watchlater/list"),o=ge(()=>"https://www.bilibili.com/list/watchlater"),a=z(),l=ge(()=>i.value.length<s.value);function u(){n.value||!l.value||e.loadMoreWatchLaterList()}ph(a,{onReachBottom:u},{bottomThreshold:400,throttleDelay:100}),st(async()=>{e.getAllWatchLaterList()});function c(m){return`https://www.bilibili.com/list/watchlater?bvid=${m}`}function d(m){return`https://www.bilibili.com/video/${m}/`}function f(m){if(k.value.topBarLinkOpenMode==="background"){Wo(m);return}if(k.value.topBarLinkOpenMode==="currentTabIfNotHomepage"){ai()||Et()?window.open(m,"_blank"):window.open(m,"_top");return}if(k.value.topBarLinkOpenMode==="newTab"){window.open(m,"_blank");return}window.open(m,"_top")}function h(m,g){e.deleteWatchLaterItem(m,g)}function p(m,g,v){f(d(v)),h(m,g)}return(m,g)=>{const v=Ge("ALink");return L(),P("div",oB,[x("header",aB,[x("div",lB,[x("div",null,G(m.$t("topbar.watch_later")),1)]),x("div",uB,[F(v,{href:w(o),type:"topBar",flex:"~",items:"center"},{default:H(()=>[x("span",cB,G(m.$t("common.play_all")),1)]),_:1},8,["href"]),F(v,{href:w(r),type:"topBar",flex:"~",items:"center"},{default:H(()=>[x("span",dB,G(m.$t("common.view_all")),1)]),_:1},8,["href"])])]),x("main",{ref_key:"scrollContainer",ref:a,"overflow-y-auto":"",rounded:"$bew-radius",flex:"~ col gap-2",p:"x-4","flex-1":"","min-h-0":""},[w(n)&&w(i).length===0?(L(),_e(Rr,{key:0,h:"full",flex:"~ items-center"})):X("",!0),!w(n)&&w(i).length===0?(L(),_e(Hn,{key:1,pos:"absolute top-0 left-0",bg:"$bew-content",z:"0",w:"full",h:"full",flex:"~ items-center",rounded:"$bew-radius"})):X("",!0),F(so,{name:"list"},{default:H(()=>[(L(!0),P(Te,null,Ne(w(i),(b,_)=>(L(),_e(v,{key:b.aid,href:c(b.bvid),class:"group",type:"topBar",m:"last:b-4",p:"2",rounded:"$bew-radius","hover:bg":"$bew-fill-2","duration-300":""},{default:H(()=>[x("section",fB,[x("div",hB,[F(sr,{content:m.$t("watch_later.play_video"),placement:"top"},{default:H(()=>[x("button",{class:"group-hover:opacity-100 opacity-0",type:"button",pos:"absolute top-0 left-0","z-1":"","w-24px":"","h-24px":"",bg:"black opacity-60 hover:$bew-theme-color",grid:"~ place-items-center",m:"1",text:"white xs","duration-300":"",border:"rounded-full",onClick:ft(y=>p(_,b.aid,b.bvid),["stop","prevent"])},[...g[0]||(g[0]=[x("i",{"i-tabler:player-play":""},null,-1)])],8,pB)]),_:2},1032,["content"]),x("div",{class:"group-hover:opacity-100 opacity-0",pos:"absolute top-0 right-0","z-1":"","w-24px":"","h-24px":"",bg:"black opacity-60 hover:$bew-error-color",grid:"~ place-items-center",m:"1",text:"white xs","duration-300":"",border:"rounded-full",onClick:ft(y=>h(_,b.aid),["stop","prevent"])},[...g[1]||(g[1]=[x("i",{"i-mingcute:close-line":""},null,-1)])],8,mB),x("div",gB,[F(_5,{w:"150px","h-full":"",class:"aspect-video",src:`${w(Li)(b.pic)}@256w_144h_1c`,alt:b.title,loading:"lazy"},null,8,["src","alt"]),x("div",vB,G(`${b.progress===-1?w(Tn)(b.duration):w(Tn)(b.progress)} /
                    ${w(Tn)(b.duration)}`),1)]),F(v1,{percentage:b.progress/b.duration*100},null,8,["percentage"])]),x("div",null,[x("h3",_B,G(b.title),1),x("div",bB,G(b.owner.name),1)])])]),_:2},1032,["href"]))),128))]),_:1}),F(nt,{name:"fade"},{default:H(()=>[w(n)&&w(i).length!==0?(L(),_e(Rr,{key:0,m:"b-4"})):X("",!0)]),_:1}),!w(n)&&!w(l)&&w(i).length>0?(L(),P("div",yB,G(m.$t("common.no_more_content")),1)):X("",!0)],512)])}}}),[["__scopeId","data-v-b01193cf"]]),EB={class:"right-side",flex:"inline xl:1 justify-end items-center"},SB={class:"others",flex:"~ items-center gap-1","h-46px":"","px-5px":"",text:"$bew-text-1"},xB={key:0,class:"right-side-item","important-w-auto":""},TB={href:"https://passport.bilibili.com/login",class:"login"},AB={class:"hidden lg:flex","gap-1":""},kB={key:0,class:"unread-num-dot"},CB={key:1,class:"unread-dot"},LB={key:0,class:"unread-num-dot"},IB={key:1,class:"unread-dot"},RB={key:4,class:"right-side-item"},PB=["title"],DB={class:"hidden lg:flex","gap-1":"","items-center":""},OB=["title"],MB={key:0,class:"unread-num-dot"},$B={key:1,class:"unread-dot"},FB=qe(Me({__name:"TopBarRight",emits:["notificationsClick"],setup(t,{emit:e}){const i=e,n=An(),{isLogin:s,userInfo:r,unReadMessage:o,unReadDm:a,newMomentsCount:l,watchLaterCount:u,drawerVisible:c,popupVisible:d,unReadMessageCount:f,hasBCoinToReceive:h}=Va(n),{getUnreadMessageCount:p,getTopBarNewMomentsCount:m,checkBCoinReceiveStatus:g}=n,v=z(null),b=z(null),{handleClickTopBarItem:_,setupTopBarItemHoverEvent:y,setupTopBarItemTransformer:E,forceWhiteIcon:S}=Cc(),A=Ds()||"",C=Qt("moments")?y("moments"):z(),T=Qt("favorites")?y("favorites"):z(),I=Qt("history")?y("history"):z(),D=Qt("watchLater")?y("watchLater"):z(),R=Qt("upload")?y("upload"):z(),O=Qt("notifications")?y("notifications"):z(),M=y("more"),U=y("userPanel"),$=z(),B=z(),W=z(),te=z(),re=z(),q=z(),le=z(),be=z();st(()=>{ot(()=>{E("userPanel",$),Qt("notifications")&&E("notifications",B),Qt("moments")&&E("moments",W),Qt("favorites")&&E("favorites",te),Qt("history")&&E("history",re),Qt("watchLater")&&E("watchLater",q),Qt("upload")&&E("upload",le),E("more",be)})}),Qt("notifications")&&(Pe(()=>d.value?.notifications??!1,(ye,xe)=>{ye===void 0||xe===void 0||xe!==void 0&&NO.test(location.href)||ye!==xe&&(ye||p())},{immediate:!0}),Pe(()=>c.value?.notifications??!1,(ye,xe)=>{ye!==xe&&(ye||p())}));const se=Lk();Pe(()=>se.value,(ye,xe)=>{ye&&s.value&&(p(),m("video"),g())}),Pe(()=>d.value?.moments??!1,async(ye,xe)=>{ye===void 0||xe===void 0||ye!==xe&&s.value&&(ye?ot(()=>{W.value&&W.value.initData?.()}):await m("video"))}),Pe(()=>d.value?.favorites??!1,(ye,xe)=>{ye===void 0||xe===void 0||ye!==xe&&ye&&ot(()=>{te.value&&te.value.refreshFavoriteResources?.()})},{immediate:!0});function ne(ye){i("notificationsClick",ye)}const pe=ge(()=>{const ye=Qt("moments")||Qt("favorites")||Qt("history")||Qt("watchLater")||Qt("creatorCenter"),xe=Qt("upload")||Qt("notifications");return ye&&xe});return(ye,xe)=>(L(),P("div",EB,[x("div",SB,[w(s)?X("",!0):(L(),P("div",xB,[x("a",TB,[xe[9]||(xe[9]=x("div",{"i-solar:user-circle-bold-duotone":"",class:"text-xl mr-2"},null,-1)),He(G(ye.$t("topbar.sign_in")),1)])])),w(s)?(L(),P(Te,{key:1},[x("div",AB,[w(Qt)("moments")?(L(),P("div",{key:0,ref_key:"moments",ref:C,class:Ie(["right-side-item",{active:w(d)?.moments}]),onClick:xe[0]||(xe[0]=Be=>w(_)(Be,"moments"))},[w(l)>0&&w(C1)("moments")?(L(),P(Te,{key:0},[w(L1)("moments")?(L(),P("div",kB,G(w(l)>99?"99+":w(l)),1)):w(I1)("moments")?(L(),P("div",CB)):X("",!0)],64)):X("",!0),F(kr,{class:Ie({"white-icon":w(S)}),href:"https://t.bilibili.com",title:ye.$t("topbar.moments"),type:"topBar"},{default:H(()=>[...xe[10]||(xe[10]=[x("div",{"i-tabler:windmill":""},null,-1)])]),_:1},8,["class","title"]),F(nt,{name:"slide-in"},{default:H(()=>[Bt(F(mF,{ref_key:"momentsPopRef",ref:W,class:"bew-popover",onClick:ft(()=>{},["stop"])},null,512),[[ii,w(d)?.moments]])]),_:1})],2)):X("",!0),w(Qt)("favorites")?(L(),P("div",{key:1,ref_key:"favorites",ref:T,class:Ie(["right-side-item",{active:w(d)?.favorites}]),onClick:xe[1]||(xe[1]=Be=>w(_)(Be,"favorites"))},[F(kr,{class:Ie({"white-icon":w(S)}),href:`https://space.bilibili.com/${w(A)}/favlist`,title:ye.$t("topbar.favorites"),type:"topBar"},{default:H(()=>[...xe[11]||(xe[11]=[x("div",{"i-mingcute:star-line":""},null,-1)])]),_:1},8,["class","href","title"]),F(nt,{name:"slide-in"},{default:H(()=>[(L(),_e(Hu,null,[w(d)?.favorites?(L(),_e(L$,{key:0,ref_key:"favoritesPopRef",ref:te,class:"bew-popover",onClick:ft(()=>{},["stop"])},null,512)):X("",!0)],1024))]),_:1})],2)):X("",!0),w(Qt)("history")?(L(),P("div",{key:2,ref_key:"history",ref:I,class:Ie(["right-side-item",{active:w(d)?.history}]),onClick:xe[2]||(xe[2]=Be=>w(_)(Be,"history"))},[F(kr,{class:Ie({"white-icon":w(S)}),href:"https://www.bilibili.com/history",title:ye.$t("topbar.history"),type:"topBar"},{default:H(()=>[...xe[12]||(xe[12]=[x("div",{"i-mingcute:time-line":""},null,-1)])]),_:1},8,["class","title"]),F(nt,{name:"slide-in"},{default:H(()=>[w(d)?.history?(L(),_e(Z$,{key:0,ref_key:"historyPopRef",ref:re,class:"bew-popover",onClick:ft(()=>{},["stop"])},null,512)):X("",!0)]),_:1})],2)):X("",!0),w(Qt)("watchLater")?(L(),P("div",{key:3,ref_key:"watchLater",ref:D,class:Ie(["right-side-item",{active:w(d)?.watchLater}]),onClick:xe[3]||(xe[3]=Be=>w(_)(Be,"watchLater"))},[w(u)>0&&w(C1)("watchLater")?(L(),P(Te,{key:0},[w(L1)("watchLater")?(L(),P("div",LB,G(w(u)>99?"99+":w(u)),1)):w(I1)("watchLater")?(L(),P("div",IB)):X("",!0)],64)):X("",!0),F(kr,{class:Ie({"white-icon":w(S)}),href:"https://www.bilibili.com/watchlater/list",title:ye.$t("topbar.watch_later"),type:"topBar"},{default:H(()=>[...xe[13]||(xe[13]=[x("div",{"i-mingcute:carplay-line":""},null,-1)])]),_:1},8,["class","title"]),F(nt,{name:"slide-in"},{default:H(()=>[w(d)?.watchLater?(L(),_e(wB,{key:0,ref_key:"watchLaterPopRef",ref:q,class:"bew-popover",onClick:ft(()=>{},["stop"])},null,512)):X("",!0)]),_:1})],2)):X("",!0),w(Qt)("creatorCenter")?(L(),P("div",RB,[x("a",{class:Ie({"white-icon":w(S)}),href:"https://member.bilibili.com/platform/home",target:"_blank",title:ye.$t("topbar.creative_center")},[...xe[14]||(xe[14]=[x("div",{"i-mingcute:bulb-line":""},null,-1)])],10,PB)])):X("",!0)]),x("div",{ref_key:"more",ref:M,class:Ie(["right-side-item lg:!hidden flex",{active:w(d)?.more}]),onClick:xe[4]||(xe[4]=Be=>w(_)(Be,"more"))},[x("a",{class:Ie({"white-icon":w(S)}),title:"More"},[...xe[15]||(xe[15]=[x("div",{"i-mingcute:menu-line":""},null,-1)])],2),F(nt,{name:"slide-in"},{default:H(()=>[Bt(F(_F,{ref_key:"morePopRef",ref:be,class:"bew-popover",onClick:ft(()=>{},["stop"])},null,512),[[ii,w(d)?.more]])]),_:1})],2),x("div",DB,[w(pe)?(L(),P("div",{key:0,class:Ie({"white-icon":w(S)}),"w-2px":"","h-16px":"",bg:"$bew-border-color","mx-1":"","rounded-4px":""},null,2)):X("",!0),w(Qt)("upload")?(L(),P("div",{key:1,ref_key:"upload",ref:R,class:Ie(["right-side-item",{active:w(d)?.upload}]),onClick:xe[5]||(xe[5]=Be=>w(_)(Be,"upload"))},[x("a",{class:Ie(["upload",{"white-icon":w(S)}]),style:{"backdrop-filter":"var(--bew-filter-glass-1)"},href:"https://member.bilibili.com/platform/upload/video/frame",target:"_blank",title:ye.$t("topbar.upload")},[...xe[16]||(xe[16]=[x("div",{"i-mingcute:upload-line":"","flex-shrink-0":""},null,-1)])],10,OB),F(nt,{name:"slide-in"},{default:H(()=>[w(d)?.upload?(L(),_e(AF,{key:0,ref_key:"uploadPopRef",ref:le,class:"bew-popover",onClick:ft(()=>{},["stop"])},null,512)):X("",!0)]),_:1})],2)):X("",!0),w(Qt)("notifications")?(L(),P("div",{key:2,ref_key:"notifications",ref:O,class:Ie(["right-side-item",{active:w(d)?.notifications}]),onClick:xe[7]||(xe[7]=Be=>w(_)(Be,"notifications"))},[w(f)>0&&w(C1)("notifications")?(L(),P(Te,{key:0},[w(L1)("notifications")?(L(),P("div",MB,G(w(f)>99?"99+":w(f)),1)):w(I1)("notifications")?(L(),P("div",$B)):X("",!0)],64)):X("",!0),F(kr,{href:w(k).openNotificationsPageAsDrawer?void 0:"https://message.bilibili.com",class:Ie({"white-icon":w(S)}),title:ye.$t("topbar.notifications"),type:"topBar","custom-click-event":w(k).openNotificationsPageAsDrawer,onClick:xe[6]||(xe[6]=Be=>w(c)&&(w(c).notifications=!0))},{default:H(()=>[...xe[17]||(xe[17]=[x("div",{"i-tabler:bell":""},null,-1)])]),_:1},8,["href","class","title","custom-click-event"]),F(nt,{name:"slide-in"},{default:H(()=>[w(d)?.notifications?(L(),_e(EF,{key:0,ref_key:"notificationsPopRef",ref:B,class:"bew-popover","un-read-message":w(o),"un-read-dm":w(a),onClick:ft(()=>{},["stop"]),onItemClick:ne},null,8,["un-read-message","un-read-dm"])):X("",!0)]),_:1})],2)):X("",!0)])],64)):X("",!0),w(s)?(L(),P("div",{key:2,ref_key:"avatar",ref:U,class:Ie([{hover:w(d)?.userPanel},"avatar right-side-item"]),onClick:xe[8]||(xe[8]=Be=>w(_)(Be,"userPanel"))},[w(h)&&w(k).showBCoinReceiveReminder?(L(),P("div",{key:0,class:Ie(["unread-dot avatar-dot",{hover:w(d)?.userPanel}]),style:{"z-index":"10",right:"6px",top:"6px"}},null,2)):X("",!0),F(kr,{ref_key:"avatarImg",ref:v,href:`https://space.bilibili.com/${w(A)}`,type:"topBar",class:Ie(["avatar-img",{hover:w(d)?.userPanel}]),style:Ue({backgroundImage:`url(${w(r).face?w(Li)(w(r).face):""})`})},null,8,["href","class","style"]),x("div",{ref_key:"avatarShadow",ref:b,class:Ie(["avatar-shadow",{hover:w(d)?.userPanel}]),style:Ue({backgroundImage:`url(${w(r).face?w(Li)(w(r).face):""})`})},null,6),w(r).vip?.status===1?(L(),P("svg",{key:1,class:Ie(["vip-img",{hover:w(d)?.userPanel}]),style:Ue({opacity:w(d)?.userPanel?1:0}),bg:"[url(https://i0.hdslb.com/bfs/seed/jinkela/short/user-avatar/big-vip.svg)] contain no-repeat",w:"28%",h:"28%","z-1":"",pos:"absolute bottom-18px right-11px","duration-300":""},null,6)):X("",!0),F(nt,{name:"slide-in"},{default:H(()=>[w(d)?.userPanel?(L(),_e(rB,{key:0,ref_key:"avatarPopRef",ref:$,"user-info":w(r),"after:h":"!0",class:"bew-popover",pos:"!left-auto !right-0",transform:"!translate-x-0",onClick:ft(()=>{},["stop"])},null,8,["user-info"])):X("",!0)]),_:1})],2)):X("",!0)])]))}}),[["__scopeId","data-v-2291797b"]]),BB={flex:"inline 1 md:justify-center items-center",w:"full","data-top-bar-search":""},NB=qe(Me({__name:"TopBarSearch",setup(t){const{showSearchBar:e,forceWhiteIcon:i}=Cc(),n=An(),{searchKeyword:s}=Va(n),r=ge(()=>({"--b-search-bar-normal-color":k.value.enableFrostedGlass?"color-mix(in oklab, var(--bew-elevated-solid), transparent 60%)":"var(--bew-elevated)","--b-search-bar-hover-color":"var(--bew-elevated-hover)","--b-search-bar-focus-color":"var(--bew-elevated)","--b-search-bar-normal-icon-color":i.value&&k.value.enableFrostedGlass?"white":"var(--bew-text-1)","--b-search-bar-normal-text-color":i.value&&k.value.enableFrostedGlass?"white":"var(--bew-text-1)"})),o=z(window.location.href);function a(){o.value=window.location.href}Ht(window,"pushstate",a),Ht(window,"popstate",a);const l=ge(()=>"navigate");function u(d){const f=d.trim();if(f)if(Et()){const h=new URLSearchParams(window.location.search);h.set("page","SearchResults"),h.set("keyword",f),h.delete("category"),h.delete("pn"),h.delete("user_order"),h.delete("user_type"),h.delete("search_type"),h.delete("live_room_order"),h.delete("live_user_order");const p=`${window.location.pathname}?${h.toString()}`;window.history.pushState({},"",p),window.dispatchEvent(new Event("pushstate"))}else{const h=new URLSearchParams;h.set("page","SearchResults"),h.set("keyword",f),window.location.href=`https://www.bilibili.com/?${h.toString()}`}}function c(d){if(s.value=d,!k.value.usePluginSearchResultsPage)return;const f=new URLSearchParams(window.location.search);f.get("page")==="SearchResults"&&f.get("keyword")&&u(d)}return(d,f)=>{const h=Ge("SearchBar");return L(),P("div",BB,[F(nt,{name:"slide-out"},{default:H(()=>[w(e)?(L(),_e(h,{key:0,modelValue:w(s),"onUpdate:modelValue":f[0]||(f[0]=p=>kt(s)?s.value=p:null),class:"search-bar",style:Ue(r.value),"show-hot-search":w(k).showHotSearchInTopBar,"search-behavior":l.value,onSearch:c},null,8,["modelValue","style","show-hot-search","search-behavior"])):X("",!0)]),_:1})])}}}),[["__scopeId","data-v-8be35acf"]]),UB={"max-w":"$bew-page-max-width",grid:"~ cols-[auto_1fr_auto] items-center gap-4",p:"x-12","m-auto":"",h:"$bew-top-bar-height"},VB={key:0,pos:"absolute top-0 left-0","w-full":"",h:"$bew-top-bar-height","pointer-events-none":"",style:{background:"linear-gradient(to bottom, var(--bew-theme-color-10), transparent)"}},jB=qe(Me({__name:"TopBarHeader",props:{reachTop:{type:Boolean},isDark:{type:Boolean}},setup(t){const{forceWhiteIcon:e,handleNotificationsItemClick:i}=Cc(),n=z(null),s=z(null),r=z(null),o=z(null),a=z(0),l=z(0),u=z(0),c=z(0);let d=null;function f(){d&&d.disconnect(),d=new ResizeObserver(g=>{for(const v of g){const b=v.contentRect.width;v.target===n.value?a.value=b:v.target===s.value?l.value=b:v.target===r.value?(u.value=b,m()):v.target===o.value&&(c.value=b)}}),n.value&&d.observe(n.value),s.value&&d.observe(s.value),r.value&&d.observe(r.value)}Pe(o,(g,v)=>{d&&(v&&d.unobserve(v),g&&d.observe(g))}),Ki(()=>{d?.disconnect(),d=null}),Cf(r,()=>{m()},{childList:!0,subtree:!0}),st(()=>{a.value=n.value?.offsetWidth??0,l.value=s.value?.offsetWidth??0,u.value=r.value?.offsetWidth??0,m(),f()});const h=ge(()=>!u.value||!c.value?0:Math.max(0,(u.value-c.value)/2)),p=ge(()=>{const g=(l.value-a.value)/2,v=h.value;return v?Math.min(Math.max(g,-v),v):0});function m(){const g=r.value?.querySelector("#search-wrap");o.value=g??null,c.value=g?.offsetWidth??0}return(g,v)=>(L(),P("main",UB,[F(nt,{name:"fade"},{default:H(()=>[!g.reachTop&&w(k).enableFrostedGlass?(L(),P("div",{key:0,style:Ue([{"mask-image":"linear-gradient(to bottom, rgba(0, 0, 0, 1), rgba(0, 0, 0, 1) 24px, rgba(0, 0, 0, 0.9) 44px, transparent)","-webkit-mask-image":"linear-gradient(to bottom, rgba(0, 0, 0, 1), rgba(0, 0, 0, 1) 24px, rgba(0, 0, 0, 0.9) 44px, transparent)"},{backgroundColor:w(k).enableFrostedGlass?"transparent":"var(--bew-bg)",opacity:w(k).enableFrostedGlass?1:.9,backdropFilter:w(k).enableFrostedGlass?"blur(12px)":"none"}]),pos:"absolute top-0 left-0","w-full":"",h:"$bew-top-bar-height","pointer-events-none":""},null,4)):X("",!0)]),_:1}),x("div",{pos:"absolute top-0 left-0","w-full":"","pointer-events-none":"","opacity-100":"","duration-300":"",style:Ue({background:`linear-gradient(to bottom, ${w(e)?"rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.4) calc(var(--bew-top-bar-height) / 2)":"color-mix(in oklab, var(--bew-bg), transparent 20%), color-mix(in oklab, var(--bew-bg), transparent 40%) calc(var(--bew-top-bar-height) / 2)"}, transparent)`,opacity:g.reachTop?.8:1,height:"var(--bew-top-bar-height)"})},null,4),F(nt,{name:"fade"},{default:H(()=>[w(k).showTopBarThemeColorGradient&&!w(e)&&g.reachTop&&g.isDark?(L(),P("div",VB)):X("",!0)]),_:1}),x("div",{ref_key:"leftSection",ref:n,class:"top-bar-header__side top-bar-header__side--left"},[F(f$,{"force-white-icon":w(e)},null,8,["force-white-icon"])],512),x("div",{ref_key:"searchSection",ref:r,class:"top-bar-header__search",style:Ue({transform:`translateX(${p.value}px)`})},[F(NB)],4),x("div",{ref_key:"rightSection",ref:s,class:"top-bar-header__side top-bar-header__side--right"},[F(FB,{onNotificationsClick:w(i)},null,8,["onNotificationsClick"])],512)]))}}),[["__scopeId","data-v-48977bb1"]]),HB={class:"top-bar-container"},e9=10,zB=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"TopBar",setup(t,{expose:e}){const{reachTop:i}=$t(),n=An(),{forceWhiteIcon:s}=Cc(),r=[".fixed-author-header",".fixed-top-header"],{isDark:o}=Js(),a=z(!1),l=z(!0),u=z(!1),c=z(null),d=z(null),{isOutside:f}=My(c),{isOutside:h}=My(d),p=z(window.location.href);function m(){p.value!==window.location.href&&(p.value=window.location.href,I(),R())}let g=null,v=null;const b=ge(()=>Object.values(n.popupVisible).some($=>$));function _(){const $=l.value&&(!u.value||b.value||n.isSwitcherButtonVisible);a.value=!$,n.setTopBarVisible($),rn.emit(Na,$)}function y(){fn()&&k.value.videoPageTopBarConfig===Un.ShowOnMouse&&(g&&(clearTimeout(g),g=null),!f.value||!h.value||b.value||n.isSwitcherButtonVisible?T(!0):g=window.setTimeout(()=>{const $=b.value,B=n.isSwitcherButtonVisible;!$&&!B&&T(!1)},500))}Pe([f,h,()=>n.isSwitcherButtonVisible],y),Pe(b,()=>{y(),_()}),Pe(u,()=>{_()}),Pe(()=>n.isSwitcherButtonVisible,()=>{_()});const E=z(0),S=z(0);let A=null;function C($){if(typeof $=="number")E.value=$;else if(!Et()||k.value.useOriginalBilibiliHomepage)E.value=document.documentElement.scrollTop;else{console.warn("[TopBar Performance] Missing scrollTop parameter from OVERLAY_SCROLL_BAR_SCROLL event");return}const B=E.value-S.value;if(fn()){const W=k.value.videoPageTopBarConfig;if(W===Un.AlwaysShow){S.value=E.value;return}if(W===Un.AlwaysHide){S.value=E.value;return}if(W===Un.ShowOnMouse){S.value=E.value;return}W===Un.ShowOnScroll&&(E.value===0?(T(!0),S.value=E.value):Math.abs(B)>e9&&(B>0?T(!1):T(!0),S.value=E.value))}else{if(E.value===0){T(!0),S.value=E.value;return}if(Math.abs(B)<=e9)return;Ny()?f.value&&E.value!==0&&(B>0?T(!1):T(!0)):k.value.autoHideTopBar&&f.value&&E.value!==0&&(B>0?T(!1):T(!0)),S.value=E.value}}function T($){l.value=$,_()}function I(){if(fn()){const $=k.value.videoPageTopBarConfig;$===Un.AlwaysHide||$===Un.ShowOnMouse?T(!1):T(!0)}else T(!0);D(),!(fn()&&k.value.videoPageTopBarConfig!==Un.ShowOnScroll)&&(Et()&&!k.value.useOriginalBilibiliHomepage?(A=$=>{C($)},rn.on(Ua,A)):window.addEventListener("scroll",C))}function D(){window.removeEventListener("scroll",C),A&&(rn.off(Ua,A),A=null)}function R(){const $=r.some(B=>{const W=document.querySelector(B);if(!W)return!1;const te=window.getComputedStyle(W);return te.display!=="none"&&te.visibility!=="hidden"&&Number.parseFloat(te.opacity)!==0&&W.offsetWidth>0&&W.offsetHeight>0});u.value=$}let O;function M($){if(!k.value.touchScreenOptimization||!b.value)return;const B=$.target;B.closest(".logo, .right-side-item, .home-button")||B.closest(".bew-popover")||n.closeAllPopups()}st(()=>{ot(()=>{n.initData(),n.isLogin&&n.startUpdateTimer(),I(),R(),O=Cf(()=>document.body,()=>{R()},{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]})??void 0,v=window.setInterval(m,1e3),document.addEventListener("click",M)})}),ki(()=>{g&&(clearTimeout(g),g=null),v&&(clearInterval(v),v=null),O?.stop(),D(),n.cleanup(),document.removeEventListener("click",M)}),Ps("/",()=>{T(!0)}),e({toggleTopBarVisible:T,handleScroll:C});const U=Un;return($,B)=>(L(),P("div",HB,[w(fn)()&&w(k).videoPageTopBarConfig===w(U).ShowOnMouse?(L(),P("div",{key:0,ref_key:"topAreaTarget",ref:d,class:"top-area-listener"},null,512)):X("",!0),F(nt,{name:"top-bar"},{default:H(()=>[w(n).showTopBar?(L(),P("header",{key:0,ref_key:"headerTarget",ref:c,class:Ie(["top-bar",{hide:a.value,"force-white-icon":w(s)}]),w:"full",transition:"all 300 ease-in-out"},[F(jB,{"force-white-icon":w(s),"reach-top":w(i),"is-dark":w(o)},null,8,["force-white-icon","reach-top","is-dark"]),w(k).openNotificationsPageAsDrawer?(L(),_e(Hu,{key:0},[w(n).drawerVisible.notifications?(L(),_e(HM,{key:0,url:w(n).notificationsDrawerUrl,onClose:B[0]||(B[0]=W=>w(n).drawerVisible.notifications=!1)},null,8,["url"])):X("",!0)],1024)):X("",!0)],2)):X("",!0)]),_:1})]))}}),[["__scopeId","data-v-7be04c81"]])},Symbol.toStringTag,{value:"Module"})),GB={flex:"","items-center":"","gap-5":"","w-full":""},WB={class:"avatar-wrapper-compact",relative:"","flex-shrink-0":""},KB=["src","alt"],YB={key:0,class:"bili-avatar-icon bili-avatar-right-icon bili-avatar-icon-business bili-avatar-size-86"},XB={key:1,class:"bili-avatar-icon bili-avatar-right-icon bili-avatar-icon-personal bili-avatar-size-86"},qB={flex:"~ col gap-1.5","flex-1":"","min-w-0":""},ZB={flex:"","items-center":"","gap-2":""},QB={class:"username",text:"base $bew-text-1","font-medium":"",truncate:""},JB=["innerHTML"],eN={key:1,class:"gender-icon gender-male"},tN={key:2,class:"gender-icon gender-female"},iN={class:"sign-compact-single",text:"sm $bew-text-2",truncate:""},nN={key:0,flex:"","items-center":"","gap-3":"",text:"xs $bew-text-3"},sN={key:0,flex:"","items-center":"","gap-1":"",class:"live-status-badge"},rN={key:1,flex:"","items-center":"","gap-1":""},oN={key:2,flex:"","items-center":"","gap-1":""},aN={key:1,flex:"","items-center":""},lN=["disabled"],uN={class:"avatar-wrapper","flex-shrink-0":""},cN=["src","alt"],dN={class:"user-info","flex-1":"","min-w-0":""},fN={flex:"","items-center":"","gap-2":"","mb-1":""},hN={class:"username",text:"base $bew-text-1","font-medium":"",truncate:""},pN={key:0,class:"verify-badge",flex:"","items-center":"","gap-1":"",text:"xs $bew-theme-color",bg:"$bew-theme-color-20","px-2":"","py-0.5":"","rounded-full":""},mN={key:0,class:"sign",text:"sm $bew-text-2","line-clamp-1":""},gN={class:"stats",flex:"","items-center":"","gap-3":"",text:"xs $bew-text-3","mt-1":""},vN={key:0},_N={key:1},bN={key:1,class:"sample-list"},yN=["href"],wN={class:"sample-cover"},EN=["src","alt"],SN={key:1,class:"sample-duration"},xN={key:2,class:"sample-play"},TN=["title"],V1=qe(Me({__name:"UserCard",props:{mid:{},name:{},face:{},sign:{},fans:{},videos:{},level:{},gender:{},isVerified:{type:Boolean},verifyInfo:{},horizontal:{type:Boolean,default:!1},samples:{default:()=>[]},isFollowed:{default:0},showFollowButton:{type:Boolean,default:!0},compact:{type:Boolean,default:!1},liveStatus:{},roomid:{}},emits:["followStateChanged"],setup(t,{emit:e}){const i=t,n=e,s=ge(()=>(i.samples||[]).slice(0,7)),r=z(i.isFollowed===1),o=z(!1);Pe(()=>i.isFollowed,h=>{r.value=h===1});const a=ge(()=>o.value?"...":r.value?"":"+ "),l=[Lc,M1,$1,F1,B1,N1,U1];function u(h){return l[h]||Lc}function c(h){return h?h>=1e4?`${(h/1e4).toFixed(1)}`:h.toString():"0"}function d(){window.open(`https://space.bilibili.com/${i.mid}`,"_blank")}async function f(h){if(h.stopPropagation(),!o.value)try{o.value=!0;const p=oi(),m=r.value?2:1,g=await ze.user.relationModify({fid:String(i.mid),act:m,re_src:11,csrf:p});g.code===0?(r.value=!r.value,n("followStateChanged",i.mid,r.value)):console.error(":",g.message)}catch(p){console.error(":",p)}finally{o.value=!1}}return(h,p)=>h.compact?(L(),_e(kr,{key:0,href:`https://space.bilibili.com/${h.mid}`,type:"videoCard",class:"user-card transition-all duration-300 cursor-pointer compact",relative:"",flex:"","align-items-center":"","gap-3":"","p-3":"",bg:"$bew-elevated",rounded:"$bew-radius",cursor:"pointer"},{default:H(()=>[x("div",GB,[x("div",WB,[x("img",{src:h.face,alt:h.name,class:"avatar","w-24":"","h-24":"","rounded-full":"","object-cover":""},null,8,KB),h.isVerified&&h.verifyInfo&&h.verifyInfo.includes("")?(L(),P("span",YB)):h.isVerified&&h.verifyInfo?(L(),P("span",XB)):X("",!0)]),x("div",qB,[x("div",ZB,[x("div",QB,G(h.name),1),h.level!==void 0?(L(),P("div",{key:0,class:"user-level-icon",innerHTML:w(Ul).sanitize(u(h.level))},null,8,JB)):X("",!0),h.gender===1?(L(),P("div",eN,[...p[2]||(p[2]=[x("div",{"i-tabler:gender-male":""},null,-1)])])):h.gender===2?(L(),P("div",tN,[...p[3]||(p[3]=[x("div",{"i-tabler:gender-female":""},null,-1)])])):X("",!0)]),x("div",iN,G(h.sign||"~"),1),h.fans||h.videos||h.liveStatus===1?(L(),P("div",nN,[h.liveStatus===1?(L(),P("div",sN,[...p[4]||(p[4]=[x("div",{"i-tabler:live-photo":"","w-3.5":"","h-3.5":""},null,-1),x("span",null,"",-1)])])):X("",!0),h.videos?(L(),P("div",rN,[p[5]||(p[5]=x("div",{"i-tabler:video":"","w-3.5":"","h-3.5":""},null,-1)),x("span",null,G(c(h.videos))+"",1)])):X("",!0),h.fans?(L(),P("div",oN,[p[6]||(p[6]=x("div",{"i-tabler:users":"","w-3.5":"","h-3.5":""},null,-1)),x("span",null,G(c(h.fans))+"",1)])):X("",!0)])):X("",!0),h.showFollowButton?(L(),P("div",aN,[x("button",{class:Ie(["follow-button-compact",{followed:r.value}]),disabled:o.value,onClick:f},G(a.value),11,lN)])):X("",!0)])])]),_:1},8,["href"])):(L(),P("div",{key:1,class:Ie(["user-card transition-all duration-300 cursor-pointer",{horizontal:h.horizontal}]),relative:"",flex:"","align-items-center":"","gap-3":"","p-3":"",bg:"$bew-elevated hover:$bew-elevated-hover",rounded:"$bew-radius",cursor:"pointer",onClick:p[1]||(p[1]=m=>d())},[x("div",uN,[x("img",{src:h.face,alt:h.name,class:Ie(["avatar",h.horizontal?"w-12 h-12":"w-16 h-16"]),"rounded-full":"","object-cover":""},null,10,cN)]),x("div",dN,[x("div",fN,[x("div",hN,G(h.name),1),h.isVerified&&h.verifyInfo?(L(),P("div",pN,[p[7]||(p[7]=x("div",{"i-tabler:rosette-discount-check":""},null,-1)),x("span",null,G(h.verifyInfo),1)])):X("",!0)]),h.sign?(L(),P("div",mN,G(h.sign),1)):X("",!0),x("div",gN,[h.fans!==void 0?(L(),P("span",vN,G(c(h.fans))+" ",1)):X("",!0),h.videos!==void 0?(L(),P("span",_N,G(h.videos)+" ",1)):X("",!0)]),s.value.length?(L(),P("div",bN,[(L(!0),P(Te,null,Ne(s.value,m=>(L(),P("a",{key:m.id,class:"sample-card",href:m.url,target:"_blank",rel:"noopener",onClick:p[0]||(p[0]=ft(()=>{},["stop"]))},[x("div",wN,[m.cover?(L(),P("img",{key:0,src:m.cover,alt:m.title},null,8,EN)):X("",!0),m.duration?(L(),P("div",SN,G(m.duration),1)):X("",!0),m.play!==void 0?(L(),P("div",xN,[p[8]||(p[8]=x("div",{"i-tabler:player-play":""},null,-1)),x("span",null,G(c(m.play)),1)])):X("",!0)]),x("div",{class:"sample-title",title:m.title},G(m.title),9,TN)],8,yN))),128))])):X("",!0)])],2))}}),[["__scopeId","data-v-05a53066"]]),AN=Object.freeze(Object.defineProperty({__proto__:null,default:V1},Symbol.toStringTag,{value:"Module"})),Hl={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg"},kN=1.35;function CN(){const t=ge(()=>Hl[k.value.videoCardTitleFontSize]??Hl.base),e=ge(()=>({"--bew-title-line-height":kN.toString()})),i=ge(()=>Hl[k.value.videoCardAuthorFontSize]??Hl.sm),n=ge(()=>Hl[k.value.videoCardMetaFontSize]??Hl.xs);return{titleFontSizeClass:t,titleStyle:e,authorFontSizeClass:i,metaFontSizeClass:n}}const Ze=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},LN=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=IN},IN=Number.MAX_SAFE_INTEGER||9007199254740991;let at=(function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t})({}),Le=(function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t})({}),V=(function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t})({});var Rt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},it={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class zl{constructor(e,i=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=i,this.totalWeight_=n}sample(e,i){const n=Math.pow(this.alpha_,e);this.estimate_=i*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class RN{constructor(e,i,n,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new zl(e),this.fast_=new zl(i),this.defaultTTFB_=s,this.ttfb_=new zl(e)}update(e,i){const{slow_:n,fast_:s,ttfb_:r}=this;n.halfLife!==e&&(this.slow_=new zl(e,n.getEstimate(),n.getTotalWeight())),s.halfLife!==i&&(this.fast_=new zl(i,s.getEstimate(),s.getTotalWeight())),r.halfLife!==e&&(this.ttfb_=new zl(e,r.getEstimate(),r.getTotalWeight()))}sample(e,i){e=Math.max(e,this.minDelayMs_);const n=8*i,s=e/1e3,r=n/s;this.fast_.sample(s,r),this.slow_.sample(s,r)}sampleTTFB(e){const i=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(i,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function PN(t,e,i){return(e=ON(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function si(){return si=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},si.apply(null,arguments)}function t9(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function ei(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?t9(Object(i),!0).forEach(function(n){PN(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):t9(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function DN(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ON(t){var e=DN(t,"string");return typeof e=="symbol"?e:e+""}class Us{constructor(e,i){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=Qo,this.debug=i.debug.bind(null,n),this.log=i.log.bind(null,n),this.warn=i.warn.bind(null,n),this.info=i.info.bind(null,n),this.error=i.error.bind(null,n)}}const Qo=function(){},MN={trace:Qo,debug:Qo,log:Qo,warn:Qo,info:Qo,error:Qo};function j1(){return si({},MN)}function $N(t,e){const i=self.console[t];return i?i.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):Qo}function i9(t,e,i){return e[t]?e[t].bind(e):$N(t,i)}const H1=j1();function FN(t,e,i){const n=j1();if(typeof console=="object"&&t===!0||typeof t=="object"){const s=["debug","log","info","warn","error"];s.forEach(r=>{n[r]=i9(r,t,i)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.14`)}catch{return j1()}s.forEach(r=>{H1[r]=i9(r,t)})}else si(H1,n);return n}const ti=H1;function Jo(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function BN(t){return typeof self<"u"&&t===self.ManagedMediaSource}function n9(t,e){const i=Object.keys(t),n=Object.keys(e),s=i.length,r=n.length;return!s||!r||s===r&&!i.some(o=>n.indexOf(o)===-1)}function vs(t,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const i=t.length;let n,s,r,o="",a=0;for(;a<i;){if(n=t[a++],n===0&&e)return o;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:s=t[a++],o+=String.fromCharCode((n&31)<<6|s&63);break;case 14:s=t[a++],r=t[a++],o+=String.fromCharCode((n&15)<<12|(s&63)<<6|(r&63)<<0);break}}return o}function Kn(t){let e="";for(let i=0;i<t.length;i++){let n=t[i].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function s9(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function NN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z1={exports:{}},r9;function UN(){return r9||(r9=1,(function(t,e){(function(i){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(u);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):u;var h=a.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=s.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var m={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(m.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)m.path=h.path,f.params||(m.params=h.params,f.query||(m.query=h.query));else{var g=h.path,v=g.substring(0,g.lastIndexOf("/")+1)+f.path;m.path=a.normalizePath(v)}return m.path===null&&(m.path=c.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(m)},parseURL:function(l){var u=n.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(r,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(z1)),z1.exports}var G1=UN();class W1{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var li={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class o9{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,jN(this,"stats")}setByteRange(e,i){const n=e.split("@",2);let s;n.length===1?s=i?.byteRangeEndOffset||0:s=parseInt(n[1]),this._byteRange=[s,parseInt(n[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[li.AUDIO]:null,[li.VIDEO]:null,[li.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new W1),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=G1.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[li.AUDIO]=null,e[li.VIDEO]=null,e[li.AUDIOVIDEO]=null}}function Hi(t){return t.sn!=="initSegment"}class K1 extends o9{constructor(e,i){super(i),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],i=this.byteRange[1];if(Ze(e)&&Ze(i))return i-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:i}=this;if(!i||i.NONE)return null;if(i.identity)this._decryptdata||(this._decryptdata=i.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(i);if(n.length===1){const s=this._decryptdata=i[n[0]]||null;s&&(this._decryptdata=s.getDecryptData(this.sn,i))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Ze(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var i;const n=Object.keys(this.levelkeys),s=n.length;if(s>1||s===1&&(i=this.levelkeys[n[0]])!=null&&i.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Ze(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Hi(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const i=this.levelkeys;if(i){var n;const s=i[e];s&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=s.getDecryptData(this.sn,i))}}abortRequests(){var e,i;(e=this.loader)==null||e.abort(),(i=this.keyLoader)==null||i.abort()}setElementaryStreamInfo(e,i,n,s,r,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:i,endPTS:n,startDTS:s,endDTS:r,partial:o};return}l.startPTS=Math.min(l.startPTS,i),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,r)}}class VN extends o9{constructor(e,i,n,s,r){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=i,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,r),r&&(this.fragOffset=r.fragOffset+r.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function a9(t,e){const i=Object.getPrototypeOf(t);if(i){const n=Object.getOwnPropertyDescriptor(i,e);return n||a9(i,e)}}function jN(t,e){const i=a9(t,e);i&&(i.enumerable=!0,Object.defineProperty(t,e,i))}const l9=Math.pow(2,32)-1,HN=[].push,u9={video:1,audio:2,id3:3,text:4};function qi(t){return String.fromCharCode.apply(null,t)}function c9(t,e){const i=t[e]<<8|t[e+1];return i<0?65536+i:i}function vt(t,e){const i=f9(t,e);return i<0?4294967296+i:i}function d9(t,e){let i=vt(t,e);return i*=Math.pow(2,32),i+=vt(t,e+4),i}function f9(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function zN(t){const e=t.byteLength;for(let i=0;i<e;){const n=vt(t,i);if(n>8&&t[i+4]===109&&t[i+5]===111&&t[i+6]===111&&t[i+7]===102)return!0;i=n>1?i+n:e}return!1}function Lt(t,e){const i=[];if(!e.length)return i;const n=t.byteLength;for(let s=0;s<n;){const r=vt(t,s),o=qi(t.subarray(s+4,s+8)),a=r>1?s+r:n;if(o===e[0])if(e.length===1)i.push(t.subarray(s+8,a));else{const l=Lt(t.subarray(s+8,a),e.slice(1));l.length&&HN.apply(i,l)}s=a}return i}function GN(t){const e=[],i=t[0];let n=8;const s=vt(t,n);n+=4;let r=0,o=0;i===0?(r=vt(t,n),o=vt(t,n+4),n+=8):(r=d9(t,n),o=d9(t,n+8),n+=16),n+=2;let a=t.length+o;const l=c9(t,n);n+=2;for(let u=0;u<l;u++){let c=n;const d=vt(t,c);c+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return ti.warn("SIDX has hierarchical references (not supported)"),null;const p=vt(t,c);c+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/s,start:a,end:a+f-1}}),a+=f,c+=4,n=c}return{earliestPresentationTime:r,timescale:s,version:i,referencesCount:l,references:e}}function h9(t){const e=[],i=Lt(t,["moov","trak"]);for(let s=0;s<i.length;s++){const r=i[s],o=Lt(r,["tkhd"])[0];if(o){let a=o[0];const l=vt(o,a===0?12:20),u=Lt(r,["mdia","mdhd"])[0];if(u){a=u[0];const c=vt(u,a===0?12:20),d=Lt(r,["mdia","hdlr"])[0];if(d){const f=qi(d.subarray(8,12)),h={soun:li.AUDIO,vide:li.VIDEO}[f],p=Lt(r,["mdia","minf","stbl","stsd"])[0],m=WN(p);h?(e[l]={timescale:c,type:h,stsd:m},e[h]=ei({timescale:c,id:l},m)):e[l]={timescale:c,type:f,stsd:m}}}}}return Lt(t,["moov","mvex","trex"]).forEach(s=>{const r=vt(s,4),o=e[r];o&&(o.default={duration:vt(s,12),flags:vt(s,20)})}),e}function WN(t){const e=t.subarray(8),i=e.subarray(86),n=qi(e.subarray(4,8));let s=n,r;const o=n==="enca"||n==="encv";if(o){const u=Lt(e,[n])[0].subarray(n==="enca"?28:78);Lt(u,["sinf"]).forEach(d=>{const f=Lt(d,["schm"])[0];if(f){const h=qi(f.subarray(4,8));if(h==="cbcs"||h==="cenc"){const p=Lt(d,["frma"])[0];p&&(s=qi(p))}}})}const a=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const l=Lt(i,["avcC"])[0];l&&l.length>3&&(s+="."+gh(l[1])+gh(l[2])+gh(l[3]),r=mh(a==="avc1"?"dva1":"dvav",i));break}case"mp4a":{const l=Lt(e,[n])[0],u=Lt(l.subarray(28),["esds"])[0];if(u&&u.length>7){let c=4;if(u[c++]!==3)break;c=Y1(u,c),c+=2;const d=u[c++];if(d&128&&(c+=2),d&64&&(c+=u[c++]),u[c++]!==4)break;c=Y1(u,c);const f=u[c++];if(f===64)s+="."+gh(f);else break;if(c+=12,u[c++]!==5)break;c=Y1(u,c);const h=u[c++];let p=(h&248)>>3;p===31&&(p+=1+((h&7)<<3)+((u[c]&224)>>5)),s+="."+p}break}case"hvc1":case"hev1":{const l=Lt(i,["hvcC"])[0];if(l&&l.length>12){const u=l[1],c=["","A","B","C"][u>>6],d=u&31,f=vt(l,2),h=(u&32)>>5?"H":"L",p=l[12],m=l.subarray(6,12);s+="."+c+d,s+="."+KN(f).toString(16).toUpperCase(),s+="."+h+p;let g="";for(let v=m.length;v--;){const b=m[v];(b||g)&&(g="."+b.toString(16).toUpperCase()+g)}s+=g}r=mh(a=="hev1"?"dvhe":"dvh1",i);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=mh(s,i)||s;break}case"vp09":{const l=Lt(i,["vpcC"])[0];if(l&&l.length>6){const u=l[4],c=l[5],d=l[6]>>4&15;s+="."+Pr(u)+"."+Pr(c)+"."+Pr(d)}break}case"av01":{const l=Lt(i,["av1C"])[0];if(l&&l.length>2){const u=l[1]>>>5,c=l[1]&31,d=l[2]>>>7?"H":"M",f=(l[2]&64)>>6,h=(l[2]&32)>>5,p=u===2&&f?h?12:10:f?10:8,m=(l[2]&16)>>4,g=(l[2]&8)>>3,v=(l[2]&4)>>2,b=l[2]&3;s+="."+u+"."+Pr(c)+d+"."+Pr(p)+"."+m+"."+g+v+b+"."+Pr(1)+"."+Pr(1)+"."+Pr(1)+"."+0,r=mh("dav1",i)}break}}return{codec:s,encrypted:o,supplemental:r}}function mh(t,e){const i=Lt(e,["dvvC"]),n=i.length?i[0]:Lt(e,["dvcC"])[0];if(n){const s=n[2]>>1&127,r=n[2]<<5&32|n[3]>>3&31;return t+"."+Pr(s)+"."+Pr(r)}}function KN(t){let e=0;for(let i=0;i<32;i++)e|=(t>>i&1)<<31-i;return e>>>0}function Y1(t,e){const i=e+5;for(;t[e++]&128&&e<i;);return e}function gh(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Pr(t){return(t<10?"0":"")+t}function YN(t,e){if(!t||!e)return;const i=e.keyId;i&&e.isCommonEncryption&&p9(t,(n,s)=>{const r=n.subarray(8,24);r.some(o=>o!==0)||(ti.log(`[eme] Patching keyId in 'enc${s?"a":"v"}>sinf>>tenc' box: ${Kn(r)} -> ${Kn(i)}`),n.set(i,8))})}function XN(t){const e=[];return p9(t,i=>e.push(i.subarray(8,24))),e}function p9(t,e){Lt(t,["moov","trak"]).forEach(n=>{const s=Lt(n,["mdia","minf","stbl","stsd"])[0];if(!s)return;const r=s.subarray(8);let o=Lt(r,["enca"]);const a=o.length>0;a||(o=Lt(r,["encv"])),o.forEach(l=>{const u=a?l.subarray(28):l.subarray(78);Lt(u,["sinf"]).forEach(d=>{const f=m9(d);f&&e(f,a)})})})}function m9(t){const e=Lt(t,["schm"])[0];if(e){const i=qi(e.subarray(4,8));if(i==="cbcs"||i==="cenc"){const n=Lt(t,["schi","tenc"])[0];if(n)return n}}}function qN(t,e,i){const n={},s=Lt(t,["moof","traf"]);for(let r=0;r<s.length;r++){const o=s[r],a=Lt(o,["tfhd"])[0],l=vt(a,4),u=e[l];if(!u)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type});const c=n[l],d=Lt(o,["tfdt"])[0];if(d){const _=d[0];let y=vt(d,4);_===1&&(y===l9?i.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(y*=l9+1,y+=vt(d,8))),Ze(y)&&(!Ze(c.start)||y<c.start)&&(c.start=y)}const f=u.default,h=vt(a,0)|f?.flags;let p=f?.duration||0;h&8&&(h&2?p=vt(a,12):p=vt(a,8));const m=Lt(o,["trun"]);let g=c.start||0,v=0,b=p;for(let _=0;_<m.length;_++){const y=m[_],E=vt(y,4),S=c.sampleCount;c.sampleCount+=E;const A=y[3]&1,C=y[3]&4,T=y[2]&1,I=y[2]&2,D=y[2]&4,R=y[2]&8;let O=8,M=E;for(A&&(O+=4),C&&E&&(!(y[O+1]&1)&&c.keyFrameIndex===void 0&&(c.keyFrameIndex=S),O+=4,T?(b=vt(y,O),O+=4):b=p,I&&(O+=4),R&&(O+=4),g+=b,v+=b,M--);M--;)T?(b=vt(y,O),O+=4):b=p,I&&(O+=4),D&&(y[O+1]&1||c.keyFrameIndex===void 0&&(c.keyFrameIndex=c.sampleCount-(M+1),c.keyFrameStart=g),O+=4),R&&(O+=4),g+=b,v+=b;!v&&p&&(v+=p*E)}c.duration+=v}if(!Object.keys(n).some(r=>n[r].duration)){let r=1/0,o=0;const a=Lt(t,["sidx"]);for(let l=0;l<a.length;l++){const u=GN(a[l]);if(u!=null&&u.references){r=Math.min(r,u.earliestPresentationTime/u.timescale);const c=u.references.reduce((d,f)=>d+f.info.duration||0,0);o=Math.max(o,c+u.earliestPresentationTime/u.timescale)}}o&&Ze(o)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=o*n[l].timescale-n[l].start)})}return n}function ZN(t){const e={valid:null,remainder:null},i=Lt(t,["moof"]);if(i.length<2)return e.remainder=t,e;const n=i[i.length-1];return e.valid=t.slice(0,n.byteOffset-8),e.remainder=t.slice(n.byteOffset-8),e}function Vs(t,e){const i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}function g9(t,e){const i=[],n=e.samples,s=e.timescale,r=e.id;let o=!1;return Lt(n,["moof"]).map(l=>{const u=l.byteOffset-8;Lt(l,["traf"]).map(d=>{const f=Lt(d,["tfdt"]).map(h=>{const p=h[0];let m=vt(h,4);return p===1&&(m*=Math.pow(2,32),m+=vt(h,8)),m/s})[0];return f!==void 0&&(t=f),Lt(d,["tfhd"]).map(h=>{const p=vt(h,4),m=vt(h,0)&16777215,g=(m&1)!==0,v=(m&2)!==0,b=(m&8)!==0;let _=0;const y=(m&16)!==0;let E=0;const S=(m&32)!==0;let A=8;p===r&&(g&&(A+=8),v&&(A+=4),b&&(_=vt(h,A),A+=4),y&&(E=vt(h,A),A+=4),S&&(A+=4),e.type==="video"&&(o=vh(e.codec)),Lt(d,["trun"]).map(C=>{const T=C[0],I=vt(C,0)&16777215,D=(I&1)!==0;let R=0;const O=(I&4)!==0,M=(I&256)!==0;let U=0;const $=(I&512)!==0;let B=0;const W=(I&1024)!==0,te=(I&2048)!==0;let re=0;const q=vt(C,4);let le=8;D&&(R=vt(C,le),le+=4),O&&(le+=4);let be=R+u;for(let se=0;se<q;se++){if(M?(U=vt(C,le),le+=4):U=_,$?(B=vt(C,le),le+=4):B=E,W&&(le+=4),te&&(T===0?re=vt(C,le):re=f9(C,le),le+=4),e.type===li.VIDEO){let ne=0;for(;ne<B;){const pe=vt(n,be);if(be+=4,QN(o,n[be])){const ye=n.subarray(be,be+pe);X1(ye,o?2:1,t+re/s,i)}be+=pe,ne+=pe+4}}t+=U/s}}))})})}),i}function vh(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function QN(t,e){if(t){const i=e>>1&63;return i===39||i===40}else return(e&31)===6}function X1(t,e,i,n){const s=v9(t);let r=0;r+=e;let o=0,a=0,l=0;for(;r<s.length;){o=0;do{if(r>=s.length)break;l=s[r++],o+=l}while(l===255);a=0;do{if(r>=s.length)break;l=s[r++],a+=l}while(l===255);const u=s.length-r;let c=r;if(a<u)r+=a;else if(a>u){ti.error(`Malformed SEI payload. ${a} is too small, only ${u} bytes left to parse.`);break}if(o===4){if(s[c++]===181){const f=c9(s,c);if(c+=2,f===49){const h=vt(s,c);if(c+=4,h===1195456820){const p=s[c++];if(p===3){const m=s[c++],g=31&m,v=64&m,b=v?2+g*3:0,_=new Uint8Array(b);if(v){_[0]=m;for(let y=1;y<b;y++)_[y]=s[c++]}n.push({type:p,payloadType:o,pts:i,bytes:_})}}}}}else if(o===5&&a>16){const d=[];for(let p=0;p<16;p++){const m=s[c++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=a-16,h=new Uint8Array(f);for(let p=0;p<f;p++)h[p]=s[c++];n.push({payloadType:o,pts:i,uuid:d.join(""),userData:vs(h),userDataBytes:h})}}}function v9(t){const e=t.byteLength,i=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(i.push(n+2),n+=2):n++;if(i.length===0)return t;const s=e-i.length,r=new Uint8Array(s);let o=0;for(n=0;n<s;o++,n++)o===i[0]&&(o++,i.shift()),r[n]=t[o];return r}function JN(t){const e=t[0];let i="",n="",s=0,r=0,o=0,a=0,l=0,u=0;if(e===0){for(;qi(t.subarray(u,u+1))!=="\0";)i+=qi(t.subarray(u,u+1)),u+=1;for(i+=qi(t.subarray(u,u+1)),u+=1;qi(t.subarray(u,u+1))!=="\0";)n+=qi(t.subarray(u,u+1)),u+=1;n+=qi(t.subarray(u,u+1)),u+=1,s=vt(t,12),r=vt(t,16),a=vt(t,20),l=vt(t,24),u=28}else if(e===1){u+=4,s=vt(t,u),u+=4;const d=vt(t,u);u+=4;const f=vt(t,u);for(u+=4,o=2**32*d+f,LN(o)||(o=Number.MAX_SAFE_INTEGER,ti.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=vt(t,u),u+=4,l=vt(t,u),u+=4;qi(t.subarray(u,u+1))!=="\0";)i+=qi(t.subarray(u,u+1)),u+=1;for(i+=qi(t.subarray(u,u+1)),u+=1;qi(t.subarray(u,u+1))!=="\0";)n+=qi(t.subarray(u,u+1)),u+=1;n+=qi(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:i,value:n,timeScale:s,presentationTime:o,presentationTimeDelta:r,eventDuration:a,id:l,payload:c}}function eU(t,...e){const i=e.length;let n=8,s=i;for(;s--;)n+=e[s].byteLength;const r=new Uint8Array(n);for(r[0]=n>>24&255,r[1]=n>>16&255,r[2]=n>>8&255,r[3]=n&255,r.set(t,4),s=0,n=8;s<i;s++)r.set(e[s],n),n+=e[s].byteLength;return r}function tU(t,e,i){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,s;n=0,s=new Uint8Array;let r;n>0?(r=new Uint8Array(4),e.length>0&&new DataView(r.buffer).setUint32(0,e.length,!1)):r=new Uint8Array;const o=new Uint8Array(4);return i.byteLength>0&&new DataView(o.buffer).setUint32(0,i.byteLength,!1),eU([112,115,115,104],new Uint8Array([n,0,0,0]),t,r,s,o,i)}function iU(t){const e=[];if(t instanceof ArrayBuffer){const i=t.byteLength;let n=0;for(;n+32<i;){const s=new DataView(t,n),r=nU(s);e.push(r),n+=r.size}}return e}function nU(t){const e=t.getUint32(0),i=t.byteOffset,n=t.byteLength;if(n<e)return{offset:i,size:n};if(t.getUint32(4)!==1886614376)return{offset:i,size:e};const r=t.getUint32(8)>>>24;if(r!==0&&r!==1)return{offset:i,size:e};const o=t.buffer,a=Kn(new Uint8Array(o,i+12,16));let l=null,u=null,c=0;if(r===0)c=28;else{const f=t.getUint32(28);if(!f||n<32+f*16)return{offset:i,size:e};l=[];for(let h=0;h<f;h++)l.push(new Uint8Array(o,i+32+h*16,16));c=32+f*16}if(!c)return{offset:i,size:e};const d=t.getUint32(c);return e-32<d?{offset:i,size:e}:(u=new Uint8Array(o,i+c+4,d),{version:r,systemId:a,kids:l,data:u,offset:i,size:e})}const _9=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Gl={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function q1(t,e){const i=Gl[e];return!!i&&!!i[t.slice(0,4)]}function Ic(t,e,i=!0){return!t.split(",").some(n=>!Z1(n,e,i))}function Z1(t,e,i=!0){var n;const s=Jo(i);return(n=s?.isTypeSupported(Rc(t,e)))!=null?n:!1}function Rc(t,e){return`${e}/mp4;codecs=${t}`}function b9(t){if(t){const e=t.substring(0,4);return Gl.video[e]}return 2}function _h(t){const e=_9();return t.split(",").reduce((i,n)=>{const r=e&&vh(n)?9:Gl.video[n];return r?(r*2+i)/(i?3:2):(Gl.audio[n]+i)/(i?2:1)},0)}const Q1={};function sU(t,e=!0){if(Q1[t])return Q1[t];const i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let s=0;s<i.length;s++){var n;if(Z1(i[s],"audio",e))return Q1[t]=i[s],i[s];if(i[s]==="mp3"&&(n=Jo(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return t}const rU=/flac|opus|mp4a\.40\.34/i;function bh(t,e=!0){return t.replace(rU,i=>sU(i.toLowerCase(),e))}function oU(t,e){const i=[];if(t){const n=t.split(",");for(let s=0;s<n.length;s++)q1(n[s],"video")||i.push(n[s])}return e&&i.push(e),i.join(",")}function yh(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(y9(t,"audio")||y9(t,"video")))return t;if(e){const i=e.split(",");if(i.length>1){if(t){for(let n=i.length;n--;)if(i[n].substring(0,4)===t.substring(0,4))return i[n]}return i[0]}}return e||t}function y9(t,e){return q1(t,e)&&Z1(t,e)}function aU(t){const e=t.split(",");for(let i=0;i<e.length;i++){const n=e[i].split(".");n.length>2&&n[0]==="avc1"&&(e[i]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function lU(t){if(t.startsWith("av01.")){const e=t.split("."),i=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=i[n-4];return e.join(".")}return t}function w9(t){const e=Jo(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function J1(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const uU={supported:!0,powerEfficient:!0,smooth:!0},cU={supported:!1,smooth:!1,powerEfficient:!1},E9={supported:!0,configurations:[],decodingInfoResults:[uU]};function S9(t,e){return{supported:!1,configurations:e,decodingInfoResults:[cU],error:t}}function dU(t,e,i,n,s,r){const o=t.videoCodec,a=t.audioCodec?t.audioGroups:null,l=r?.audioCodec,u=r?.channels,c=u?parseInt(u):l?1/0:2;let d=null;if(a!=null&&a.length)try{a.length===1&&a[0]?d=e.groups[a[0]].channels:d=a.reduce((f,h)=>{if(h){const p=e.groups[h];if(!p)throw new Error(`Audio track group ${h} not found`);Object.keys(p.channels).forEach(m=>{f[m]=(f[m]||0)+p.channels[m]})}return f},{2:0})}catch{return!0}return o!==void 0&&(o.split(",").some(f=>vh(f))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(n,30)||t.videoRange!=="SDR"&&t.videoRange!==i||t.bitrate>Math.max(s,8e6))||!!d&&Ze(c)&&Object.keys(d).some(f=>parseInt(f)>c)}function x9(t,e,i,n={}){const s=t.videoCodec;if(!s&&!t.audioCodec||!i)return Promise.resolve(E9);const r=[],o=fU(t),a=o.length,l=hU(t,e,a>0),u=l.length;for(let c=a||1*u||1;c--;){const d={type:"media-source"};if(a&&(d.video=o[c%a]),u){d.audio=l[c%u];const f=d.audio.bitrate;d.video&&f&&(d.video.bitrate-=f)}r.push(d)}if(s){const c=navigator.userAgent;if(s.split(",").some(d=>vh(d))&&_9())return Promise.resolve(S9(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${c})`),r))}return Promise.all(r.map(c=>{const d=mU(c);return n[d]||(n[d]=i.decodingInfo(c))})).then(c=>({supported:!c.some(d=>!d.supported),configurations:r,decodingInfoResults:c})).catch(c=>({supported:!1,configurations:r,decodingInfoResults:[],error:c}))}function fU(t){var e;const i=(e=t.videoCodec)==null?void 0:e.split(","),n=T9(t),s=t.width||640,r=t.height||480,o=t.frameRate||30,a=t.videoRange.toLowerCase();return i?i.map(l=>{const u={contentType:Rc(lU(l),"video"),width:s,height:r,bitrate:n,framerate:o};return a!=="sdr"&&(u.transferFunction=a),u}):[]}function hU(t,e,i){var n;const s=(n=t.audioCodec)==null?void 0:n.split(","),r=T9(t);return s&&t.audioGroups?t.audioGroups.reduce((o,a)=>{var l;const u=a?(l=e.groups[a])==null?void 0:l.tracks:null;return u?u.reduce((c,d)=>{if(d.groupId===a){const f=parseFloat(d.channels||"");s.forEach(h=>{const p={contentType:Rc(h,"audio"),bitrate:i?pU(h,r):r};f&&(p.channels=""+f),c.push(p)})}return c},o):o},[]):[]}function pU(t,e){if(e<=1)return 1;let i=128e3;return t==="ec-3"?i=768e3:t==="ac-3"&&(i=64e4),Math.min(e/2,i)}function T9(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function mU(t){let e="";const{audio:i,video:n}=t;if(n){const s=J1(n.contentType);e+=`${s}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(i){const s=J1(i.contentType);e+=`${n?"_":""}${s}_c${i.channels}`}return e}const eg=["NONE","TYPE-0","TYPE-1",null];function gU(t){return eg.indexOf(t)>-1}const wh=["SDR","PQ","HLG"];function vU(t){return!!t&&wh.indexOf(t)>-1}var Eh={No:"",Yes:"YES",v2:"v2"};function A9(t){const{canSkipUntil:e,canSkipDateRanges:i,age:n}=t,s=n<e/2;return e&&s?i?Eh.v2:Eh.Yes:Eh.No}class k9{constructor(e,i,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=i,this.skip=n}addDirectives(e){const i=new self.URL(e);return this.msn!==void 0&&i.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&i.searchParams.set("_HLS_part",this.part.toString()),this.skip&&i.searchParams.set("_HLS_skip",this.skip),i.href}}class Pc{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var i;this.supplemental=e.supplemental;const n=(i=e.supplemental)==null?void 0:i.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return C9(this._audioGroups,e)}hasSubtitleGroup(e){return C9(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,i){if(i){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(i)===-1&&n.push(i)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(i)===-1&&n.push(i)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function C9(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function _U(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function bU(t,e){let i=!1,n=[];if(t&&(i=t!=="SDR",n=[t]),e){n=e.allowedVideoRanges||wh.slice(0);const s=n.join("")!=="SDR"&&!e.videoCodec;i=e.preferHDR!==void 0?e.preferHDR:s&&_U(),i||(n=["SDR"])}return{preferHDR:i,allowedVideoRanges:n}}const yU=t=>{const e=new WeakSet;return(i,n)=>{if(t&&(n=t(i,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},ui=(t,e)=>JSON.stringify(t,yU(e));function wU(t,e,i,n,s){const r=Object.keys(t),o=n?.channels,a=n?.audioCodec,l=s?.videoCodec,u=o&&parseInt(o)===2;let c=!1,d=!1,f=1/0,h=1/0,p=1/0,m=1/0,g=0,v=[];const{preferHDR:b,allowedVideoRanges:_}=bU(e,s);for(let C=r.length;C--;){const T=t[r[C]];c||(c=T.channels[2]>0),f=Math.min(f,T.minHeight),h=Math.min(h,T.minFramerate),p=Math.min(p,T.minBitrate),_.filter(D=>T.videoRanges[D]>0).length>0&&(d=!0)}f=Ze(f)?f:0,h=Ze(h)?h:0;const y=Math.max(1080,f),E=Math.max(30,h);p=Ze(p)?p:i,i=Math.max(p,i),d||(e=void 0);const S=r.length>1;return{codecSet:r.reduce((C,T)=>{const I=t[T];if(T===C)return C;if(v=d?_.filter(D=>I.videoRanges[D]>0):[],S){if(I.minBitrate>i)return Dr(T,`min bitrate of ${I.minBitrate} > current estimate of ${i}`),C;if(!I.hasDefaultAudio)return Dr(T,"no renditions with default or auto-select sound found"),C;if(a&&T.indexOf(a.substring(0,4))%5!==0)return Dr(T,`audio codec preference "${a}" not found`),C;if(o&&!u){if(!I.channels[o])return Dr(T,`no renditions with ${o} channel sound found (channels options: ${Object.keys(I.channels)})`),C}else if((!a||u)&&c&&I.channels[2]===0)return Dr(T,"no renditions with stereo sound found"),C;if(I.minHeight>y)return Dr(T,`min resolution of ${I.minHeight} > maximum of ${y}`),C;if(I.minFramerate>E)return Dr(T,`min framerate of ${I.minFramerate} > maximum of ${E}`),C;if(!v.some(D=>I.videoRanges[D]>0))return Dr(T,`no variants with VIDEO-RANGE of ${ui(v)} found`),C;if(l&&T.indexOf(l.substring(0,4))%5!==0)return Dr(T,`video codec preference "${l}" not found`),C;if(I.maxScore<g)return Dr(T,`max score of ${I.maxScore} < selected max of ${g}`),C}return C&&(_h(T)>=_h(C)||I.fragmentError>t[C].fragmentError)?C:(m=I.minIndex,g=I.maxScore,T)},void 0),videoRanges:v,preferHDR:b,minFramerate:h,minBitrate:p,minIndex:m}}function Dr(t,e){ti.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function L9(t){return t.reduce((e,i)=>{let n=e.groups[i.groupId];n||(n=e.groups[i.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(i);const s=i.channels||"2";return n.channels[s]=(n.channels[s]||0)+1,n.hasDefault=n.hasDefault||i.default,n.hasAutoSelect=n.hasAutoSelect||i.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function EU(t,e,i,n){return t.slice(i,n+1).reduce((s,r,o)=>{if(!r.codecSet)return s;const a=r.audioGroups;let l=s[r.codecSet];l||(s[r.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,r.bitrate);const u=Math.min(r.height,r.width);return l.minHeight=Math.min(l.minHeight,u),l.minFramerate=Math.min(l.minFramerate,r.frameRate),l.minIndex=Math.min(l.minIndex,o),l.maxScore=Math.max(l.maxScore,r.score),l.fragmentError+=r.fragmentError,l.videoRanges[r.videoRange]=(l.videoRanges[r.videoRange]||0)+1,a&&a.forEach(c=>{if(!c)return;const d=e.groups[c];d&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(f=>{l.channels[f]=(l.channels[f]||0)+d.channels[f]}))}),s},{})}function I9(t){if(!t)return t;const{lang:e,assocLang:i,characteristics:n,channels:s,audioCodec:r}=t;return{lang:e,assocLang:i,characteristics:n,channels:s,audioCodec:r}}function Or(t,e,i){if("attrs"in t){const n=e.indexOf(t);if(n!==-1)return n}for(let n=0;n<e.length;n++){const s=e[n];if(za(t,s,i))return n}return-1}function za(t,e,i){const{groupId:n,name:s,lang:r,assocLang:o,default:a}=t,l=t.forced;return(n===void 0||e.groupId===n)&&(s===void 0||e.name===s)&&(r===void 0||SU(r,e.lang))&&(r===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||xU(t.characteristics||"",e.characteristics))&&(i===void 0||i(t,e))}function SU(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function xU(t,e=""){const i=t.split(","),n=e.split(",");return i.length===n.length&&!i.some(s=>n.indexOf(s)===-1)}function Ga(t,e){const{audioCodec:i,channels:n}=t;return(i===void 0||(e.audioCodec||"").substring(0,4)===i.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function TU(t,e,i,n,s){const r=e[n],a=e.reduce((f,h,p)=>{const m=h.uri;return(f[m]||(f[m]=[])).push(p),f},{})[r.uri];a.length>1&&(n=Math.max.apply(Math,a));const l=r.videoRange,u=r.frameRate,c=r.codecSet.substring(0,4),d=R9(e,n,f=>{if(f.videoRange!==l||f.frameRate!==u||f.codecSet.substring(0,4)!==c)return!1;const h=f.audioGroups,p=i.filter(m=>!h||h.indexOf(m.groupId)!==-1);return Or(t,p,s)>-1});return d>-1?d:R9(e,n,f=>{const h=f.audioGroups,p=i.filter(m=>!h||h.indexOf(m.groupId)!==-1);return Or(t,p,s)>-1})}function R9(t,e,i){for(let n=e;n>-1;n--)if(i(t[n]))return n;for(let n=e+1;n<t.length;n++)if(i(t[n]))return n;return-1}function Sh(t,e){var i;return!!t&&t!==((i=e.loadLevelObj)==null?void 0:i.uri)}class AU extends Us{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=i=>{var n;const{fragCurrent:s,partCurrent:r,hls:o}=this,{autoLevelEnabled:a,media:l}=o;if(!s||!l)return;const u=performance.now(),c=r?r.stats:s.stats,d=r?r.duration:s.duration,f=u-c.loading.start,h=o.minAutoLevel,p=s.level,m=this._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||p<=h){this.clearTimer(),this._nextAutoLevel=-1;return}if(!a)return;const g=m>-1&&m!==p,v=!!i||g;if(!v&&(l.paused||!l.playbackRate||!l.readyState))return;const b=o.mainForwardBufferInfo;if(!v&&b===null)return;const _=this.bwEstimator.getEstimateTTFB(),y=Math.abs(l.playbackRate);if(f<=Math.max(_,1e3*(d/(y*2))))return;const E=b?b.len/y:0,S=c.loading.first?c.loading.first-c.loading.start:-1,A=c.loaded&&S>-1,C=this.getBwEstimate(),T=o.levels,I=T[p],D=Math.max(c.loaded,Math.round(d*(s.bitrate||I.averageBitrate)/8));let R=A?f-S:f;R<1&&A&&(R=Math.min(f,c.loaded*8/C));const O=A?c.loaded*1e3/R:0,M=_/1e3,U=O?(D-c.loaded)/O:D*8/C+M;if(U<=E)return;const $=O?O*8:C,B=((n=i?.details||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,W=this.hls.config.abrBandWidthUpFactor;let te=Number.POSITIVE_INFINITY,re;for(re=p-1;re>h;re--){const se=T[re].maxBitrate,ne=!T[re].details||B;if(te=this.getTimeToLoadFrag(M,$,d*se,ne),te<Math.min(E,d+M))break}if(te>=U||te>d*10)return;A?this.bwEstimator.sample(f-Math.min(_,S),c.loaded):this.bwEstimator.sampleTTFB(f);const q=T[re].maxBitrate;this.getBwEstimate()*W>q&&this.resetEstimator(q);const le=this.findBestLevel(q,h,re,0,E,1,1);le>-1&&(re=le),this.warn(`Fragment ${s.sn}${r?" part "+r.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${E.toFixed(3)} s
      Estimated load time for current fragment: ${U.toFixed(3)} s
      Estimated load time for down switch fragment: ${te.toFixed(3)} s
      TTFB estimate: ${S|0} ms
      Current BW estimate: ${Ze(C)?C|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${re} @ ${q|0} bps`),o.nextLoadLevel=o.nextAutoLevel=re,this.clearTimer();const be=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===re&&re>0){const se=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${re>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${se.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,re>h){let ne=this.findBestLevel(this.hls.levels[h].bitrate,h,re,0,se,1,1);ne===-1&&(ne=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ne,this.resetEstimator(this.hls.levels[ne].bitrate)}}};g||U>te*2?be():this.timer=self.setInterval(be,te*1e3),o.trigger(V.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:r,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new RN(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.FRAG_LOADING,this.onFragLoading,this),e.on(V.FRAG_LOADED,this.onFragLoaded,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this),e.on(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.FRAG_LOADING,this.onFragLoading,this),e.off(V.FRAG_LOADED,this.onFragLoaded,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this),e.off(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(V.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,i){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,i){const n=i.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var s;this.fragCurrent=n,this.partCurrent=(s=i.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,i){this.clearTimer()}onError(e,i){if(!i.fatal)switch(i.details){case Le.BUFFER_ADD_CODEC_ERROR:case Le.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Le.FRAG_LOAD_TIMEOUT:{const n=i.frag,{fragCurrent:s,partCurrent:r}=this;if(n&&s&&n.sn===s.sn&&n.level===s.level){const o=performance.now(),a=r?r.stats:n.stats,l=o-a.loading.start,u=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&u>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,u),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,i,n,s){const r=e+n/i,o=s?e+this.lastLevelLoadSec:0;return r+o}onLevelLoaded(e,i){const n=this.hls.config,{loading:s}=i.stats,r=s.end-s.first;Ze(r)&&(this.lastLevelLoadSec=r/1e3),i.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(i.levelInfo)}onFragLoaded(e,{frag:i,part:n}){const s=n?n.stats:i.stats;if(i.type===it.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(i)){if(this.clearTimer(),i.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const r=n?n.duration:i.duration,o=this.hls.levels[i.level],a=(o.loaded?o.loaded.bytes:0)+s.loaded,l=(o.loaded?o.loaded.duration:0)+r;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(i.bitrateTest){const r={stats:s,frag:i,part:n,id:i.type};this.onFragBuffered(V.FRAG_BUFFERED,r),i.bitrateTest=!1}else this.lastLoadedFragLevel=i.level}}onFragBuffered(e,i){const{frag:n,part:s}=i,r=s!=null&&s.stats.loaded?s.stats:n.stats;if(r.aborted||this.ignoreFragment(n))return;const o=r.parsing.end-r.loading.start-Math.min(r.loading.first-r.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,r.loaded),r.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==it.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:i}=this.hls,n=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,r=this.findBestLevel(n,i,e,0,s,1,1);if(r>-1)return r;const o=this.hls.firstLevel,a=Math.min(Math.max(o,i),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const r=n&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,r)&&o[e].loadError<=o[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:i,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:s,config:r,minAutoLevel:o}=n,a=i?i.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=r.abrBandWidthFactor,d=r.abrBandWidthUpFactor;if(u){const g=this.findBestLevel(l,o,s,u,0,c,d);if(g>=0)return this.rebufferNotice=-1,g}let f=a?Math.min(a,r.maxStarvationDelay):r.maxStarvationDelay;if(!u){const g=this.bitrateTestDelay;g&&(f=(a?Math.min(a,r.maxLoadingDelay):r.maxLoadingDelay)-g,this.info(`bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),c=d=1)}const h=this.findBestLevel(l,o,s,u,f,c,d);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const p=n.levels[o],m=n.loadLevelObj;return m&&p?.bitrate<m.bitrate?o:n.loadLevel}getStarvationDelay(){const e=this.hls,i=e.media;if(!i)return 1/0;const n=i&&i.playbackRate!==0?Math.abs(i.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,i,n,s,r,o,a){var l;const u=s+r,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:h}=this,{levels:p,allAudioTracks:m,loadLevel:g,config:v}=this.hls;if(p.length===1)return 0;const b=p[d],_=!!((l=this.hls.latestLevelDetails)!=null&&l.live),y=g===-1||c===-1;let E,S="SDR",A=b?.frameRate||0;const{audioPreference:C,videoPreference:T}=v,I=this.audioTracksByGroup||(this.audioTracksByGroup=L9(m));let D=-1;if(y){if(this.firstSelection!==-1)return this.firstSelection;const $=this.codecTiers||(this.codecTiers=EU(p,I,i,n)),B=wU($,S,e,C,T),{codecSet:W,videoRanges:te,minFramerate:re,minBitrate:q,minIndex:le,preferHDR:be}=B;D=le,E=W,S=be?te[te.length-1]:te[0],A=re,e=Math.max(e,q),this.log(`picked start tier ${ui(B)}`)}else E=b?.codecSet,S=b?.videoRange;const R=h?h.duration:f?f.duration:0,O=this.bwEstimator.getEstimateTTFB()/1e3,M=[];for(let $=n;$>=i;$--){var U;const B=p[$],W=$>d;if(!B)continue;if(v.useMediaCapabilities&&!B.supportedResult&&!B.supportedPromise){const ne=navigator.mediaCapabilities;typeof ne?.decodingInfo=="function"&&dU(B,I,S,A,e,C)?(B.supportedPromise=x9(B,I,ne,this.supportedCache),B.supportedPromise.then(pe=>{if(!this.hls)return;B.supportedResult=pe;const ye=this.hls.levels,xe=ye.indexOf(B);pe.error?this.warn(`MediaCapabilities decodingInfo error: "${pe.error}" for level ${xe} ${ui(pe)}`):pe.supported?pe.decodingInfoResults.some(Be=>Be.smooth===!1||Be.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${xe} not smooth or powerEfficient: ${ui(pe)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${xe} ${ui(pe)}`),xe>-1&&ye.length>1&&(this.log(`Removing unsupported level ${xe}`),this.hls.removeLevel(xe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(pe=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${pe}`)})):B.supportedResult=E9}if((E&&B.codecSet!==E||S&&B.videoRange!==S||W&&A>B.frameRate||!W&&A>0&&A<B.frameRate||(U=B.supportedResult)!=null&&(U=U.decodingInfoResults)!=null&&U.some(ne=>ne.smooth===!1))&&(!y||$!==D)){M.push($);continue}const te=B.details,re=(h?te?.partTarget:te?.averagetargetduration)||R;let q;W?q=a*e:q=o*e;const le=R&&s>=R*2&&r===0?B.averageBitrate:B.maxBitrate,be=this.getTimeToLoadFrag(O,q,le*re,te===void 0);if(q>=le&&($===c||B.loadError===0&&B.fragmentError===0)&&(be<=O||!Ze(be)||_&&!this.bitrateTestDelay||be<u)){const ne=this.forcedAutoLevel;return $!==g&&(ne===-1||ne!==g)&&(M.length&&this.trace(`Skipped level(s) ${M.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${p[M[0]].codecs}" ${p[M[0]].videoRange}; not compatible with "${E}" ${S}`),this.info(`switch candidate:${d}->${$} adjustedbw(${Math.round(q)})-bitrate=${Math.round(q-le)} ttfb:${O.toFixed(1)} avgDuration:${re.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${be.toFixed(1)} firstSelection:${y} codecSet:${B.codecSet} videoRange:${B.videoRange} hls.loadLevel:${g}`)),y&&(this.firstSelection=$),$}}return-1}set nextAutoLevel(e){const i=this.deriveNextAutoLevel(e);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}deriveNextAutoLevel(e){const{maxAutoLevel:i,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),i)}}const P9={search:function(t,e){let i=0,n=t.length-1,s=null,r=null;for(;i<=n;){s=(i+n)/2|0,r=t[s];const o=e(r);if(o>0)i=s+1;else if(o<0)n=s-1;else return r}return null}};function kU(t,e,i){if(e===null||!Array.isArray(t)||!t.length||!Ze(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;for(let r=0;r<t.length;++r){const o=t[r];if(LU(e,i,o))return o}return null}function Wa(t,e,i=0,n=0,s=.005){let r=null;if(t){r=e[1+t.sn-e[0].sn]||null;const a=t.endDTS-i;a>0&&a<15e-7&&(i+=15e-7),r&&t.level!==r.level&&r.end<=t.end&&(r=e[2+t.sn-e[0].sn]||null)}else i===0&&e[0].start===0&&(r=e[0]);if(r&&((!t||t.level===r.level)&&D9(i,n,r)===0||CU(r,t,Math.min(s,n))))return r;const o=P9.search(e,D9.bind(null,i,n));return o&&(o!==t||!r)?o:r}function CU(t,e,i){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((s,r)=>(r[0]==="INF"&&(s+=parseFloat(r[1])),s),i);return t.start<=n}return!1}function D9(t=0,e=0,i){if(i.start<=t&&i.start+i.duration>t)return 0;const n=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=t?1:i.start-n>t&&i.start?-1:0}function LU(t,e,i){const n=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0))*1e3;return(i.endProgramDateTime||0)-n>t}function O9(t,e,i){if(t&&t.startCC<=e&&t.endCC>=e){let n=t.fragments;const{fragmentHint:s}=t;s&&(n=n.concat(s));let r;return P9.search(n,o=>o.cc<e?1:o.cc>e?-1:(r=o,o.end<=i?1:o.start>i?-1:0)),r||null}return null}function xh(t){switch(t.details){case Le.FRAG_LOAD_TIMEOUT:case Le.KEY_LOAD_TIMEOUT:case Le.LEVEL_LOAD_TIMEOUT:case Le.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function M9(t){return t.details.startsWith("key")}function $9(t){return M9(t)&&!!t.frag&&!t.frag.decryptdata}function F9(t,e){const i=xh(e);return t.default[`${i?"timeout":"error"}Retry`]}function tg(t,e){const i=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(i*t.retryDelayMs,t.maxRetryDelayMs)}function B9(t){return ei(ei({},t),{errorRetry:null,timeoutRetry:null})}function Th(t,e,i,n){if(!t)return!1;const s=n?.code,r=e<t.maxNumRetry&&(IU(s)||!!i);return t.shouldRetry?t.shouldRetry(t,e,i,n,r):r}function IU(t){return ig(t)||!!t&&(t<400||t>499)}function ig(t){return t===0&&navigator.onLine===!1}var hn={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},_s={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class RU extends Us{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(V.ERROR,this.onError,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(V.ERROR,this.onError,this),e.off(V.ERROR,this.onErrorOut,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===it.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const i=this.hls,n=i.currentLevel;return(e=i.loadLevelObj)!=null&&e.details||n===-1?i.loadLevel:n}variantHasKey(e,i){if(e){var n;if((n=e.details)!=null&&n.hasKey(i))return!0;const s=e.audioGroups;if(s)return this.hls.allAudioTracks.filter(o=>s.indexOf(o.groupId)>=0).some(o=>{var a;return(a=o.details)==null?void 0:a.hasKey(i)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,i){var n;if(i.fatal)return;const s=this.hls,r=i.context;switch(i.details){case Le.FRAG_LOAD_ERROR:case Le.FRAG_LOAD_TIMEOUT:case Le.KEY_LOAD_ERROR:case Le.KEY_LOAD_TIMEOUT:i.errorAction=this.getFragRetryOrSwitchAction(i);return;case Le.FRAG_PARSING_ERROR:if((n=i.frag)!=null&&n.gap){i.errorAction=Wl();return}case Le.FRAG_GAP:case Le.FRAG_DECRYPT_ERROR:{i.errorAction=this.getFragRetryOrSwitchAction(i),i.errorAction.action=hn.SendAlternateToPenaltyBox;return}case Le.LEVEL_EMPTY_ERROR:case Le.LEVEL_PARSING_ERROR:{var o;const l=i.parent===it.MAIN?i.level:s.loadLevel;i.details===Le.LEVEL_EMPTY_ERROR&&((o=i.context)!=null&&(o=o.levelDetails)!=null&&o.live)?i.errorAction=this.getPlaylistRetryOrSwitchAction(i,l):(i.levelRetry=!1,i.errorAction=this.getLevelSwitchAction(i,l))}return;case Le.LEVEL_LOAD_ERROR:case Le.LEVEL_LOAD_TIMEOUT:typeof r?.level=="number"&&(i.errorAction=this.getPlaylistRetryOrSwitchAction(i,r.level));return;case Le.AUDIO_TRACK_LOAD_ERROR:case Le.AUDIO_TRACK_LOAD_TIMEOUT:case Le.SUBTITLE_LOAD_ERROR:case Le.SUBTITLE_TRACK_LOAD_TIMEOUT:if(r){const l=s.loadLevelObj;if(l&&(r.type===Rt.AUDIO_TRACK&&l.hasAudioGroup(r.groupId)||r.type===Rt.SUBTITLE_TRACK&&l.hasSubtitleGroup(r.groupId))){i.errorAction=this.getPlaylistRetryOrSwitchAction(i,s.loadLevel),i.errorAction.action=hn.SendAlternateToPenaltyBox,i.errorAction.flags=_s.MoveAllAlternatesMatchingHost;return}}return;case Le.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:i.errorAction={action:hn.SendAlternateToPenaltyBox,flags:_s.MoveAllAlternatesMatchingHDCP};return;case Le.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Le.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Le.KEY_SYSTEM_NO_SESSION:i.errorAction={action:hn.SendAlternateToPenaltyBox,flags:_s.MoveAllAlternatesMatchingKey};return;case Le.BUFFER_ADD_CODEC_ERROR:case Le.REMUX_ALLOC_ERROR:case Le.BUFFER_APPEND_ERROR:if(!i.errorAction){var a;i.errorAction=this.getLevelSwitchAction(i,(a=i.level)!=null?a:s.loadLevel)}return;case Le.INTERNAL_EXCEPTION:case Le.BUFFER_APPENDING_ERROR:case Le.BUFFER_FULL_ERROR:case Le.LEVEL_SWITCH_ERROR:case Le.BUFFER_STALLED_ERROR:case Le.BUFFER_SEEK_OVER_HOLE:case Le.BUFFER_NUDGE_ON_STALL:i.errorAction=Wl();return}i.type===at.KEY_SYSTEM_ERROR&&(i.levelRetry=!1,i.errorAction=Wl())}getPlaylistRetryOrSwitchAction(e,i){const n=this.hls,s=F9(n.config.playlistLoadPolicy,e),r=this.playlistError++;if(Th(s,r,xh(e),e.response))return{action:hn.RetryRequest,flags:_s.None,retryConfig:s,retryCount:r};const a=this.getLevelSwitchAction(e,i);return s&&(a.retryConfig=s,a.retryCount=r),a}getFragRetryOrSwitchAction(e){const i=this.hls,n=this.getVariantLevelIndex(e.frag),s=i.levels[n],{fragLoadPolicy:r,keyLoadPolicy:o}=i.config,a=F9(M9(e)?o:r,e),l=i.levels.reduce((c,d)=>c+d.fragmentError,0);if(s&&(e.details!==Le.FRAG_GAP&&s.fragmentError++,!$9(e)&&Th(a,l,xh(e),e.response)))return{action:hn.RetryRequest,flags:_s.None,retryConfig:a,retryCount:l};const u=this.getLevelSwitchAction(e,n);return a&&(u.retryConfig=a,u.retryCount=l),u}getLevelSwitchAction(e,i){const n=this.hls;i==null&&(i=n.loadLevel);const s=this.hls.levels[i];if(s){var r,o;const u=e.details;s.loadError++,u===Le.BUFFER_APPEND_ERROR&&s.fragmentError++;let c=-1;const{levels:d,loadLevel:f,minAutoLevel:h,maxAutoLevel:p}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const m=(r=e.frag)==null?void 0:r.type,v=(m===it.AUDIO&&u===Le.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===Le.BUFFER_ADD_CODEC_ERROR||u===Le.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:S})=>s.audioCodec!==S),_=e.sourceBufferName==="video"&&(u===Le.BUFFER_ADD_CODEC_ERROR||u===Le.BUFFER_APPEND_ERROR)&&d.some(({codecSet:S,audioCodec:A})=>s.codecSet!==S&&s.audioCodec===A),{type:y,groupId:E}=(o=e.context)!=null?o:{};for(let S=d.length;S--;){const A=(S+f)%d.length;if(A!==f&&A>=h&&A<=p&&d[A].loadError===0){var a,l;const C=d[A];if(u===Le.FRAG_GAP&&m===it.MAIN&&e.frag){const T=d[A].details;if(T){const I=Wa(e.frag,T.fragments,e.frag.start);if(I!=null&&I.gap)continue}}else{if(y===Rt.AUDIO_TRACK&&C.hasAudioGroup(E)||y===Rt.SUBTITLE_TRACK&&C.hasSubtitleGroup(E))continue;if(m===it.AUDIO&&(a=s.audioGroups)!=null&&a.some(T=>C.hasAudioGroup(T))||m===it.SUBTITLE&&(l=s.subtitleGroups)!=null&&l.some(T=>C.hasSubtitleGroup(T))||v&&s.audioCodec===C.audioCodec||_&&s.codecSet===C.codecSet||!v&&s.codecSet!==C.codecSet)continue}c=A;break}}if(c>-1&&n.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:hn.SendAlternateToPenaltyBox,flags:_s.None,nextAutoLevel:c}}return{action:hn.SendAlternateToPenaltyBox,flags:_s.MoveAllAlternatesMatchingHost}}onErrorOut(e,i){var n;switch((n=i.errorAction)==null?void 0:n.action){case hn.DoNothing:break;case hn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(i),!i.errorAction.resolved&&i.details!==Le.FRAG_GAP?i.fatal=!0:/MediaSource readyState: ended/.test(i.error.message)&&(this.warn(`MediaSource ended after "${i.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(i.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const i=this.hls,n=e.errorAction;if(!n)return;const{flags:s}=n,r=n.nextAutoLevel;switch(s){case _s.None:this.switchLevel(e,r);break;case _s.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),u=i.levels[l],c=u?.attrs["HDCP-LEVEL"];if(n.hdcpLevel=c,c==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(c){i.maxHdcpLevel=eg[eg.indexOf(c)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${i.maxHdcpLevel}" or lower`);break}}case _s.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const u=this.hls.levels,c=u.length;for(let f=c;f--;)if(this.variantHasKey(u[f],l)){var o,a;this.log(`Banned key found in level ${f} (${u[f].bitrate}bps) or audio group "${(o=u[f].audioGroups)==null?void 0:o.join(",")}" (${(a=e.frag)==null?void 0:a.type} fragment) ${Kn(l.keyId||[])}`),u[f].fragmentError++,u[f].loadError++,this.log(`Removing level ${f} with key error (${e.error})`),this.hls.removeLevel(f)}const d=e.frag;if(this.hls.levels.length<c)n.resolved=!0;else if(d&&d.type!==it.MAIN){const f=d.decryptdata;f&&!l.matches(f)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,r)}switchLevel(e,i){if(i!==void 0&&e.errorAction&&(this.warn(`switching to level ${i} after ${e.details}`),this.hls.nextAutoLevel=i,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Le.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=J1(e.mimeType),s=this.hls.levels;for(let r=s.length;r--;)s[r][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${r} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(r))}}}function Wl(t){const e={action:hn.DoNothing,flags:_s.None};return t&&(e.resolved=!0),e}var Zi={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class PU{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.BUFFER_APPENDED,this.onBufferAppended,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this),e.on(V.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.BUFFER_APPENDED,this.onBufferAppended,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this),e.off(V.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,i){const n=this.activePartLists[i];if(n)for(let s=n.length;s--;){const r=n[s];if(!r)break;if(r.start<=e&&e<=r.end&&r.loaded)return r}return this.getBufferedFrag(e,i)}getBufferedFrag(e,i){return this.getFragAtPos(e,i,!0)}getFragAtPos(e,i,n){const{fragments:s}=this,r=Object.keys(s);for(let o=r.length;o--;){const a=s[r[o]];if(a?.body.type===i&&(!n||a.buffered)){const l=a.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,i,n,s,r){this.timeRanges&&(this.timeRanges[e]=i);const o=s?.fragment.sn||-1;Object.keys(this.fragments).forEach(a=>{const l=this.fragments[a];if(!l||o>=l.body.sn)return;if(!l.buffered&&(!l.loaded||r)){l.body.type===n&&this.removeFragment(l.body);return}const u=l.range[e];if(u){if(u.time.length===0){this.removeFragment(l.body);return}u.time.some(c=>{const d=!this.isTimeBuffered(c.startPTS,c.endPTS,i);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(e){const i=this.timeRanges;if(!i||e.frag.sn==="initSegment")return;const n=e.frag,s=Kl(n),r=this.fragments[s];if(!r||r.buffered&&n.gap)return;const o=!n.relurl;Object.keys(i).forEach(a=>{const l=n.elementaryStreams[a];if(!l)return;const u=i[a],c=o||l.partial===!0;r.range[a]=this.getBufferedTimes(n,e.part,c,u)}),r.loaded=null,Object.keys(r.range).length?(r.buffered=!0,(r.body.endList=n.endList||r.body.endList)&&(this.endListFragments[r.body.type]=r),Ah(r)||this.removeParts(n.sn-1,n.type)):this.removeFragment(r.body)}removeParts(e,i){const n=this.activePartLists[i];n&&(this.activePartLists[i]=N9(n,s=>s.fragment.sn>=e))}fragBuffered(e,i){const n=Kl(e);let s=this.fragments[n];!s&&i&&(s=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,i,n,s){const r={time:[],partial:n},o=e.start,a=e.end,l=e.minEndPTS||a,u=e.maxStartPTS||o;for(let c=0;c<s.length;c++){const d=s.start(c)-this.bufferPadding,f=s.end(c)+this.bufferPadding;if(u>=d&&l<=f){r.time.push({startPTS:Math.max(o,s.start(c)),endPTS:Math.min(a,s.end(c))});break}else if(o<f&&a>d){const h=Math.max(o,s.start(c)),p=Math.min(a,s.end(c));p>h&&(r.partial=!0,r.time.push({startPTS:h,endPTS:p}))}else if(a<=d)break}return r}getPartialFragment(e){let i=null,n,s,r,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(u=>{const c=l[u];c&&Ah(c)&&(s=c.body.start-a,r=c.body.end+a,e>=s&&e<=r&&(n=Math.min(e-s,r-e),o<=n&&(i=c.body,o=n)))}),i}isEndListAppended(e){const i=this.endListFragments[e];return i!==void 0&&(i.buffered||Ah(i))}getState(e){const i=Kl(e),n=this.fragments[i];return n?n.buffered?Ah(n)?Zi.PARTIAL:Zi.OK:Zi.APPENDING:Zi.NOT_LOADED}isTimeBuffered(e,i,n){let s,r;for(let o=0;o<n.length;o++){if(s=n.start(o)-this.bufferPadding,r=n.end(o)+this.bufferPadding,e>=s&&i<=r)return!0;if(i<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,i){if(i.frag.sn==="initSegment"||i.frag.bitrateTest)return;const n=i.frag,s=i.part?null:i,r=Kl(n);this.fragments[r]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,i){const{frag:n,part:s,timeRanges:r,type:o}=i;if(n.sn==="initSegment")return;const a=n.type;if(s){let u=this.activePartLists[a];u||(this.activePartLists[a]=u=[]),u.push(s)}this.timeRanges=r;const l=r[o];this.detectEvictedFragments(o,l,a,s)}onFragBuffered(e,i){this.detectPartialFragments(i)}hasFragment(e){const i=Kl(e);return!!this.fragments[i]}hasFragments(e){const{fragments:i}=this,n=Object.keys(i);if(!e)return n.length>0;for(let s=n.length;s--;){const r=i[n[s]];if(r?.body.type===e)return!0}return!1}hasParts(e){var i;return!!((i=this.activePartLists[e])!=null&&i.length)}removeFragmentsInRange(e,i,n,s,r){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==n||s&&!l.gap||l.start<i&&l.end>e&&(a.buffered||r)&&this.removeFragment(l)})}removeFragment(e){const i=Kl(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const s=e.sn;this.activePartLists[e.type]=N9(n,r=>r.fragment.sn!==s)}delete this.fragments[i],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;i&&i.forEach(n=>n.clearElementaryStreamInfo())}}function Ah(t){var e,i,n;return t.buffered&&!!(t.body.gap||(e=t.range.video)!=null&&e.partial||(i=t.range.audio)!=null&&i.partial||(n=t.range.audiovideo)!=null&&n.partial)}function Kl(t){return`${t.type}_${t.level}_${t.sn}`}function N9(t,e){return t.filter(i=>{const n=e(i);return n||i.clearElementaryStreamInfo(),n})}var ea={cbc:0,ctr:1};class DU{constructor(e,i,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=i,this.aesMode=n}decrypt(e,i){switch(this.aesMode){case ea.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},i,e);case ea.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},i,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function OU(t){const e=t.byteLength,i=e&&new DataView(t.buffer).getUint8(e-1);return i?t.slice(0,e-i):t}class MU{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const i=new DataView(e),n=new Uint32Array(4);for(let s=0;s<4;s++)n[s]=i.getUint32(s*4);return n}initTable(){const e=this.sBox,i=this.invSBox,n=this.subMix,s=n[0],r=n[1],o=n[2],a=n[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],f=l[3],h=new Uint32Array(256);let p=0,m=0,g=0;for(g=0;g<256;g++)g<128?h[g]=g<<1:h[g]=g<<1^283;for(g=0;g<256;g++){let v=m^m<<1^m<<2^m<<3^m<<4;v=v>>>8^v&255^99,e[p]=v,i[v]=p;const b=h[p],_=h[b],y=h[_];let E=h[v]*257^v*16843008;s[p]=E<<24|E>>>8,r[p]=E<<16|E>>>16,o[p]=E<<8|E>>>24,a[p]=E,E=y*16843009^_*65537^b*257^p*16843008,u[v]=E<<24|E>>>8,c[v]=E<<16|E>>>16,d[v]=E<<8|E>>>24,f[v]=E,p?(p=b^h[h[h[y^b]]],m^=h[h[m]]):p=m=1}}expandKey(e){const i=this.uint8ArrayToUint32Array_(e);let n=!0,s=0;for(;s<i.length&&n;)n=i[s]===this.key[s],s++;if(n)return;this.key=i;const r=this.keySize=i.length;if(r!==4&&r!==6&&r!==8)throw new Error("Invalid aes key size="+r);const o=this.ksRows=(r+6+1)*4;let a,l;const u=this.keySchedule=new Uint32Array(o),c=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],m=h[1],g=h[2],v=h[3];let b,_;for(a=0;a<o;a++){if(a<r){b=u[a]=i[a];continue}_=b,a%r===0?(_=_<<8|_>>>24,_=d[_>>>24]<<24|d[_>>>16&255]<<16|d[_>>>8&255]<<8|d[_&255],_^=f[a/r|0]<<24):r>6&&a%r===4&&(_=d[_>>>24]<<24|d[_>>>16&255]<<16|d[_>>>8&255]<<8|d[_&255]),u[a]=b=(u[a-r]^_)>>>0}for(l=0;l<o;l++)a=o-l,l&3?_=u[a]:_=u[a-4],l<4||a<=4?c[l]=_:c[l]=p[d[_>>>24]]^m[d[_>>>16&255]]^g[d[_>>>8&255]]^v[d[_&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,i,n){const s=this.keySize+6,r=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],u=a[1],c=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(n);let h=f[0],p=f[1],m=f[2],g=f[3];const v=new Int32Array(e),b=new Int32Array(v.length);let _,y,E,S,A,C,T,I,D,R,O,M,U,$;const B=this.networkToHostOrderSwap;for(;i<v.length;){for(D=B(v[i]),R=B(v[i+1]),O=B(v[i+2]),M=B(v[i+3]),A=D^r[0],C=M^r[1],T=O^r[2],I=R^r[3],U=4,$=1;$<s;$++)_=l[A>>>24]^u[C>>16&255]^c[T>>8&255]^d[I&255]^r[U],y=l[C>>>24]^u[T>>16&255]^c[I>>8&255]^d[A&255]^r[U+1],E=l[T>>>24]^u[I>>16&255]^c[A>>8&255]^d[C&255]^r[U+2],S=l[I>>>24]^u[A>>16&255]^c[C>>8&255]^d[T&255]^r[U+3],A=_,C=y,T=E,I=S,U=U+4;_=o[A>>>24]<<24^o[C>>16&255]<<16^o[T>>8&255]<<8^o[I&255]^r[U],y=o[C>>>24]<<24^o[T>>16&255]<<16^o[I>>8&255]<<8^o[A&255]^r[U+1],E=o[T>>>24]<<24^o[I>>16&255]<<16^o[A>>8&255]<<8^o[C&255]^r[U+2],S=o[I>>>24]<<24^o[A>>16&255]<<16^o[C>>8&255]<<8^o[T&255]^r[U+3],b[i]=B(_^h),b[i+1]=B(S^p),b[i+2]=B(E^m),b[i+3]=B(y^g),h=D,p=R,m=O,g=M,i=i+4}return b.buffer}}class $U{constructor(e,i,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=i,this.aesMode=n}expandKey(){const e=FU(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function FU(t){switch(t){case ea.cbc:return"AES-CBC";case ea.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const BU=16;class ng{constructor(e,{removePKCS7Padding:i=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:i}=this;if(!e||i)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?OU(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,i,n,s){return this.useSoftware?new Promise((r,o)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,i,n,s);const l=this.flush();l?r(l.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),i,n,s)}softwareDecrypt(e,i,n,s){const{currentIV:r,currentResult:o,remainderData:a}=this;if(s!==ea.cbc||i.byteLength!==16)return ti.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=Vs(a,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;r&&(n=r);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new MU),u.expandKey(i);const c=o;return this.currentResult=u.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,c||null}webCryptoDecrypt(e,i,n,s){if(this.key!==i||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,i,n,s));this.key=i,this.fastAesKey=new $U(this.subtle,i,s)}return this.fastAesKey.expandKey().then(r=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new DU(this.subtle,new Uint8Array(n),s).decrypt(e.buffer,r)):Promise.reject(new Error("web crypto not initialized"))).catch(r=>(ti.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${r.name}: ${r.message}`),this.onWebCryptoError(e,i,n,s)))}onWebCryptoError(e,i,n,s){const r=this.enableSoftwareAES;if(r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,i,n,s);const o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(r?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let i=e;const n=e.length-e.length%BU;return n!==e.length&&(i=e.slice(0,n),this.remainderData=e.slice(n)),i}logOnce(e){this.logEnabled&&(ti.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const U9=Math.pow(2,17);class NU{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,i){const n=e.url;if(!n)return Promise.reject(new mo({type:at.NETWORK_ERROR,details:Le.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,r=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){l(j9(e));return}else e.gap=!1;const u=this.loader=r?new r(s):new o(s),c=V9(e);e.loader=u;const d=B9(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:U9};e.stats=u.stats;const h={onSuccess:(p,m,g,v)=>{this.resetLoader(e,u);let b=p.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(b.slice(0,16)),b=b.slice(16)),a({frag:e,part:null,payload:b,networkDetails:v})},onError:(p,m,g,v)=>{this.resetLoader(e,u),l(new mo({type:at.NETWORK_ERROR,details:Le.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ei({url:n,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:v}))},onAbort:(p,m,g)=>{this.resetLoader(e,u),l(new mo({type:at.NETWORK_ERROR,details:Le.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,m,g)=>{this.resetLoader(e,u),l(new mo({type:at.NETWORK_ERROR,details:Le.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:p}))}};i&&(h.onProgress=(p,m,g,v)=>i({frag:e,part:null,payload:g,networkDetails:v})),u.load(c,f,h)})}loadPart(e,i,n){this.abort();const s=this.config,r=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||i.gap){l(j9(e,i));return}const u=this.loader=r?new r(s):new o(s),c=V9(e,i);e.loader=u;const d=B9(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:U9};i.stats=u.stats,u.load(c,f,{onSuccess:(h,p,m,g)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,i);const v={frag:e,part:i,payload:h.data,networkDetails:g};n(v),a(v)},onError:(h,p,m,g)=>{this.resetLoader(e,u),l(new mo({type:at.NETWORK_ERROR,details:Le.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:i,response:ei({url:c.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:m,stats:g}))},onAbort:(h,p,m)=>{e.stats.aborted=i.stats.aborted,this.resetLoader(e,u),l(new mo({type:at.NETWORK_ERROR,details:Le.INTERNAL_ABORTED,fatal:!1,frag:e,part:i,error:new Error("Aborted"),networkDetails:m,stats:h}))},onTimeout:(h,p,m)=>{this.resetLoader(e,u),l(new mo({type:at.NETWORK_ERROR,details:Le.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:i,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:m,stats:h}))}})})}updateStatsFromPart(e,i){const n=e.stats,s=i.stats,r=s.total;if(n.loaded+=s.loaded,r){const l=Math.round(e.duration/i.duration),u=Math.min(Math.round(n.loaded/r),l),d=(l-u)*Math.round(n.loaded/u);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const o=n.loading,a=s.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,i){e.loader=null,this.loader===i&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),i.destroy()}}function V9(t,e=null){const i=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},s=i.byteRangeStartOffset,r=i.byteRangeEndOffset;if(Ze(s)&&Ze(r)){var o;let a=s,l=r;if(t.sn==="initSegment"&&UU((o=t.decryptdata)==null?void 0:o.method)){const u=r-s;u%16&&(l=r+(16-u%16)),s!==0&&(n.resetIV=!0,a=s-16)}n.rangeStart=a,n.rangeEnd=l}return n}function j9(t,e){const i=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:at.MEDIA_ERROR,details:Le.FRAG_GAP,fatal:!1,frag:t,error:i,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new mo(n)}function UU(t){return t==="AES-128"||t==="AES-256"}class mo extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class H9 extends Us{constructor(e,i){super(e,i),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class sg{constructor(e,i,n,s=0,r=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=kh(),this.buffering={audio:kh(),video:kh(),audiovideo:kh()},this.level=e,this.sn=i,this.id=n,this.size=s,this.part=r,this.partial=o}}function kh(){return{start:0,executeStart:0,executeEnd:0,end:0}}const z9={length:0,start:()=>0,end:()=>0};class bt{static isBuffered(e,i){if(e){const n=bt.getBuffered(e);for(let s=n.length;s--;)if(i>=n.start(s)&&i<=n.end(s))return!0}return!1}static bufferedRanges(e){if(e){const i=bt.getBuffered(e);return bt.timeRangesToArray(i)}return[]}static timeRangesToArray(e){const i=[];for(let n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i}static bufferInfo(e,i,n){if(e){const s=bt.bufferedRanges(e);if(s.length)return bt.bufferedInfo(s,i,n)}return{len:0,start:i,end:i,bufferedIndex:-1}}static bufferedInfo(e,i,n){i=Math.max(0,i),e.length>1&&e.sort((c,d)=>c.start-d.start||d.end-c.end);let s=-1,r=[];if(n)for(let c=0;c<e.length;c++){i>=e[c].start&&i<=e[c].end&&(s=c);const d=r.length;if(d){const f=r[d-1].end;e[c].start-f<n?e[c].end>f&&(r[d-1].end=e[c].end):r.push(e[c])}else r.push(e[c])}else r=e;let o=0,a,l=i,u=i;for(let c=0;c<r.length;c++){const d=r[c].start,f=r[c].end;if(s===-1&&i>=d&&i<=f&&(s=c),i+n>=d&&i<f)l=d,u=f,o=u-i;else if(i+n<d){a=d;break}}return{len:o,start:l||0,end:u||0,nextStart:a,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||z9}catch(i){return ti.log("failed to get media.buffered",i),z9}}}const G9=/\{\$([a-zA-Z0-9-_]+)\}/g;function W9(t){return G9.test(t)}function rg(t,e){if(t.variableList!==null||t.hasVariableRefs){const i=t.variableList;return e.replace(G9,n=>{const s=n.substring(2,n.length-1),r=i?.[s];return r===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),n):r})}return e}function K9(t,e,i){let n=t.variableList;n||(t.variableList=n={});let s,r;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(i).searchParams;if(o.has(s))r=o.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${i}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=e.NAME,r=e.VALUE;s in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):n[s]=r||""}function VU(t,e,i){const n=e.IMPORT;if(i&&n in i){let s=t.variableList;s||(t.variableList=s={}),s[n]=i[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const jU=/^(\d+)x(\d+)$/,Y9=/(.+?)=(".*?"|.*?)(?:,|$)/g;class xi{constructor(e,i){typeof e=="string"&&(e=xi.parseAttrList(e,i)),si(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const i=parseInt(this[e],10);return i>Number.MAX_SAFE_INTEGER?1/0:i}hexadecimalInteger(e){if(this[e]){let i=(this[e]||"0x").slice(2);i=(i.length&1?"0":"")+i;const n=new Uint8Array(i.length/2);for(let s=0;s<i.length/2;s++)n[s]=parseInt(i.slice(s*2,s*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const i=parseInt(this[e],16);return i>Number.MAX_SAFE_INTEGER?1/0:i}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,i){const n=this[e];return n?parseFloat(n):i}enumeratedString(e){return this[e]}enumeratedStringList(e,i){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((s,r)=>(s[r.toLowerCase()]=!0,s),i)}bool(e){return this[e]==="YES"}decimalResolution(e){const i=jU.exec(this[e]);if(i!==null)return{width:parseInt(i[1],10),height:parseInt(i[2],10)}}static parseAttrList(e,i){let n;const s={};for(Y9.lastIndex=0;(n=Y9.exec(e))!==null;){const o=n[1].trim();let a=n[2];const l=a.indexOf('"')===0&&a.lastIndexOf('"')===a.length-1;let u=!1;if(l)a=a.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(i&&(l||u))a=rg(i,a);else if(!u&&!l)switch(o){case"CLOSED-CAPTIONS":if(a==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ti.warn(`${e}: attribute ${o} is missing quotes`)}s[o]=a}return s}}const HU="com.apple.hls.interstitial";function zU(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function GU(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class X9{constructor(e,i,n=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=i?.tagAnchor||null,this.tagOrder=(s=i?.tagOrder)!=null?s:n,i){const r=i.attr;for(const o in r)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==r[o]){ti.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=o;break}e=si(new xi({}),r,e)}if(this.attr=e,i?(this._startDate=i._startDate,this._cue=i._cue,this._endDate=i._endDate,this._dateAtEnd=i._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=i?.endDate||new Date(this.attr["END-DATE"]);Ze(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(ti.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const i=this.duration;return i!==null?this._dateAtEnd=new Date(this._startDate.getTime()+i*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ze(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===HU}get isValid(){return!!this.id&&!this._badValueForSameId&&Ze(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const WU=10;class KU{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const i=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!i||!this.live,this.advanced=this.endSN>e.endSN||i>0||i===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(i=>{let n=i.decryptdata;return n||(i.setKeyFormat(e.keyFormat),n=i.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?Ze(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||WU}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const i=this.lastPartIndex;if(i!==-1){for(let n=e.length;n--;)if(e[n].index>i)return e[n].index;return i}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Ch(t,e){return t.length===e.length?!t.some((i,n)=>i!==e[n]):!1}function q9(t,e){return!t&&!e?!0:!t||!e?!1:Ch(t,e)}function Yl(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function og(t){switch(t){case"AES-128":case"AES-256":return ea.cbc;case"AES-256-CTR":return ea.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function ag(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function lg(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function YU(t){const e=lg(t).subarray(0,16),i=new Uint8Array(16);return i.set(e,16-e.length),i}function Z9(t){const e=function(n,s,r){const o=n[s];n[s]=n[r],n[r]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function Q9(t){const e=t.split(":");let i=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),s=n[n.length-1].split(",");if(s.length===2){const r=s[0]==="base64",o=s[1];r?(n.splice(-1,1),i=ag(o)):i=YU(o)}}return i}const Lh=typeof self<"u"?self:void 0;var Ti={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},pn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Ih(t){switch(t){case pn.FAIRPLAY:return Ti.FAIRPLAY;case pn.PLAYREADY:return Ti.PLAYREADY;case pn.WIDEVINE:return Ti.WIDEVINE;case pn.CLEARKEY:return Ti.CLEARKEY}}function ug(t){switch(t){case Ti.FAIRPLAY:return pn.FAIRPLAY;case Ti.PLAYREADY:return pn.PLAYREADY;case Ti.WIDEVINE:return pn.WIDEVINE;case Ti.CLEARKEY:return pn.CLEARKEY}}function Dc(t){const{drmSystems:e,widevineLicenseUrl:i}=t,n=e?[Ti.FAIRPLAY,Ti.WIDEVINE,Ti.PLAYREADY,Ti.CLEARKEY].filter(s=>!!e[s]):[];return!n[Ti.WIDEVINE]&&i&&n.push(Ti.WIDEVINE),n}const J9=(function(t){return Lh!=null&&(t=Lh.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function XU(t,e,i,n){let s;switch(t){case Ti.FAIRPLAY:s=["cenc","sinf"];break;case Ti.WIDEVINE:case Ti.PLAYREADY:s=["cenc"];break;case Ti.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return qU(s,e,i,n)}function qU(t,e,i,n){return[{initDataTypes:t,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(r=>({contentType:`audio/mp4; codecs=${r}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:i.map(r=>({contentType:`video/mp4; codecs=${r}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function ZU(t){var e;return!!t&&(t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(i=>i==="persistent-license")))}function e8(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),i=String.fromCharCode.apply(null,Array.from(e)),n=i.substring(i.indexOf("<"),i.length),o=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=ag(a).subarray(0,16);return Z9(l),l}}return null}let Rh={};class Ka{static clearKeyUriToKeyIdMap(){Rh={}}static setKeyIdForUri(e,i){Rh[e]=i}constructor(e,i,n,s=[1],r=null,o){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=i,this.keyFormat=n,this.keyFormatVersions=s,this.iv=r,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Yl(e),o!=null&&o.startsWith("0x")&&(this.keyId=new Uint8Array(s9(o)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Ch(e.keyFormatVersions,this.keyFormatVersions)&&q9(e.iv,this.iv)&&q9(e.keyId,this.keyId)}isSupported(){if(this.method){if(Yl(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case pn.FAIRPLAY:case pn.WIDEVINE:case pn.PLAYREADY:case pn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,i){if(!this.encrypted||!this.uri)return null;if(Yl(this.method)){let r=this.iv;return r||(typeof e!="number"&&(ti.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),r=JU(e)),new Ka(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.keyId){const r=Rh[this.uri];if(r&&!Ch(this.keyId,r)&&Ka.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=Q9(this.uri);if(n)switch(this.keyFormat){case pn.WIDEVINE:if(this.pssh=n,!this.keyId){const r=iU(n.buffer);if(r.length){var s;const o=r[0];this.keyId=(s=o.kids)!=null&&s.length?o.kids[0]:null}}this.keyId||(this.keyId=t8(i));break;case pn.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=tU(r,null,n),this.keyId=e8(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const o=new Uint8Array(16);o.set(r,16-r.length),r=o}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r;r=QU(i),r||(r=t8(i),r||(r=Rh[this.uri])),r&&(this.keyId=r,Ka.setKeyIdForUri(this.uri,r))}return this}}function QU(t){const e=t?.[pn.WIDEVINE];return e?e.keyId:null}function t8(t){const e=t?.[pn.PLAYREADY];if(e){const i=Q9(e.uri);if(i)return e8(i)}return null}function JU(t){const e=new Uint8Array(16);for(let i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e}const i8=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,n8=/#EXT-X-MEDIA:(.*)/g,eV=/^#EXT(?:INF|-X-TARGETDURATION):/m,cg=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),tV=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Mr{static findGroup(e,i){for(let n=0;n<e.length;n++){const s=e[n];if(s.id===i)return s}}static resolve(e,i){return G1.buildAbsoluteURL(i,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return eV.test(e)}static parseMasterPlaylist(e,i){const n=W9(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},r=[];if(i8.lastIndex=0,!e.startsWith("#EXTM3U"))return s.playlistParsingError=new Error("no EXTM3U delimiter"),s;let o;for(;(o=i8.exec(e))!=null;)if(o[1]){var a;const u=new xi(o[1],s),c=rg(s,o[2]),d={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:Mr.resolve(c,i)},f=u.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),a8(u.CODECS,d);const h=u["SUPPLEMENTAL-CODECS"];h&&(d.supplemental={},a8(h,d.supplemental)),(a=d.unknownCodecs)!=null&&a.length||r.push(d),s.levels.push(d)}else if(o[3]){const u=o[3],c=o[4];switch(u){case"SESSION-DATA":{const d=new xi(c,s),f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=r8(c,i,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):ti.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new xi(c,s);K9(s,d,i)}break}case"CONTENT-STEERING":{const d=new xi(c,s);s.contentSteering={uri:Mr.resolve(d["SERVER-URI"],i),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=o8(c);break}}}const l=r.length>0&&r.length<s.levels.length;return s.levels=l?r:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,i,n){let s;const r={},o=n.levels,a={AUDIO:o.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:o.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(n8.lastIndex=0;(s=n8.exec(e))!==null;){const u=new xi(s[1],n),c=u.TYPE;if(c){const d=a[c],f=r[c]||[];r[c]=f;const h=u.LANGUAGE,p=u["ASSOC-LANGUAGE"],m=u.CHANNELS,g=u.CHARACTERISTICS,v=u["INSTREAM-ID"],b={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||h||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:h,url:u.URI?Mr.resolve(u.URI,i):""};if(p&&(b.assocLang=p),m&&(b.channels=m),g&&(b.characteristics=g),v&&(b.instreamId=v),d!=null&&d.length){const _=Mr.findGroup(d,b.groupId)||d[0];l8(b,_,"audioCodec"),l8(b,_,"textCodec")}f.push(b)}}return r}static parseLevelPlaylist(e,i,n,s,r,o){var a;const l={url:i},u=new KU(i),c=u.fragments,d=[];let f=null,h=0,p=0,m=0,g=0,v=0,b=null,_=new K1(s,l),y,E,S,A=-1,C=!1,T=null,I;if(cg.lastIndex=0,u.m3u8=e,u.hasVariableRefs=W9(e),((a=cg.exec(e))==null?void 0:a[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(y=cg.exec(e))!==null;){C&&(C=!1,_=new K1(s,l),_.playlistOffset=m,_.setStart(m),_.sn=h,_.cc=g,v&&(_.bitrate=v),_.level=n,f&&(_.initSegment=f,f.rawProgramDateTime&&(_.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),T&&(_.setByteRange(T),T=null)));const M=y[1];if(M){_.duration=parseFloat(M);const U=(" "+y[2]).slice(1);_.title=U||null,_.tagList.push(U?["INF",M,U]:["INF",M])}else if(y[3]){if(Ze(_.duration)){_.playlistOffset=m,_.setStart(m),S&&c8(_,S,u),_.sn=h,_.level=n,_.cc=g,c.push(_);const U=(" "+y[3]).slice(1);_.relurl=rg(u,U),dg(_,b,d),b=_,m+=_.duration,h++,p=0,C=!0}}else{if(y=y[0].match(tV),!y){ti.warn("No matches on slow regex match for level playlist!");continue}for(E=1;E<y.length&&y[E]===void 0;E++);const U=(" "+y[E]).slice(1),$=(" "+y[E+1]).slice(1),B=y[E+2]?(" "+y[E+2]).slice(1):null;switch(U){case"BYTERANGE":b?_.setByteRange($,b):_.setByteRange($);break;case"PROGRAM-DATE-TIME":_.rawProgramDateTime=$,_.tagList.push(["PROGRAM-DATE-TIME",$]),A===-1&&(A=c.length);break;case"PLAYLIST-TYPE":u.type&&go(u,U,y),u.type=$.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?go(u,U,y):c.length>0&&d8(u,U,y),h=u.startSN=parseInt($);break;case"SKIP":{u.skippedSegments&&go(u,U,y);const W=new xi($,u),te=W.decimalInteger("SKIPPED-SEGMENTS");if(Ze(te)){u.skippedSegments+=te;for(let q=te;q--;)c.push(null);h+=te}const re=W.enumeratedString("RECENTLY-REMOVED-DATERANGES");re&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(re.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&go(u,U,y),u.targetduration=Math.max(parseInt($),1);break;case"VERSION":u.version!==null&&go(u,U,y),u.version=parseInt($);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||go(u,U,y),u.live=!1;break;case"#":($||B)&&_.tagList.push(B?[$,B]:[$]);break;case"DISCONTINUITY":g++,_.tagList.push(["DIS"]);break;case"GAP":_.gap=!0,_.tagList.push([U]);break;case"BITRATE":_.tagList.push([U,$]),v=parseInt($)*1e3,Ze(v)?_.bitrate=v:v=0;break;case"DATERANGE":{const W=new xi($,u),te=new X9(W,u.dateRanges[W.ID],u.dateRangeTagCount);u.dateRangeTagCount++,te.isValid||u.skippedSegments?u.dateRanges[te.id]=te:ti.warn(`Ignoring invalid DATERANGE tag: "${$}"`),_.tagList.push(["EXT-X-DATERANGE",$]);break}case"DEFINE":{{const W=new xi($,u);"IMPORT"in W?VU(u,W,o):K9(u,W,i)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?go(u,U,y):c.length>0&&d8(u,U,y),u.startCC=g=parseInt($);break;case"KEY":{const W=r8($,i,u);if(W.isSupported()){if(W.method==="NONE"){S=void 0;break}S||(S={});const te=S[W.keyFormat];te!=null&&te.matches(W)||(te&&(S=si({},S)),S[W.keyFormat]=W)}else ti.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${$}"`);break}case"START":u.startTimeOffset=o8($);break;case"MAP":{const W=new xi($,u);if(_.duration){const te=new K1(s,l);u8(te,W,n,S),f=te,_.initSegment=f,f.rawProgramDateTime&&!_.rawProgramDateTime&&(_.rawProgramDateTime=f.rawProgramDateTime)}else{const te=_.byteRangeEndOffset;if(te){const re=_.byteRangeStartOffset;T=`${te-re}@${re}`}else T=null;u8(_,W,n,S),f=_,C=!0}f.cc=g;break}case"SERVER-CONTROL":{I&&go(u,U,y),I=new xi($),u.canBlockReload=I.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=I.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&I.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=I.optionalFloat("PART-HOLD-BACK",0),u.holdBack=I.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&go(u,U,y);const W=new xi($);u.partTarget=W.decimalFloatingPoint("PART-TARGET");break}case"PART":{let W=u.partList;W||(W=u.partList=[]);const te=p>0?W[W.length-1]:void 0,re=p++,q=new xi($,u),le=new VN(q,_,l,re,te);W.push(le),_.duration+=le.duration;break}case"PRELOAD-HINT":{const W=new xi($,u);u.preloadHint=W;break}case"RENDITION-REPORT":{const W=new xi($,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(W);break}default:ti.warn(`line parsed but not handled: ${y}`);break}}}b&&!b.relurl?(c.pop(),m-=b.duration,u.partList&&(u.fragmentHint=b)):u.partList&&(dg(_,b,d),_.cc=g,u.fragmentHint=_,S&&c8(_,S,u)),u.targetduration||(u.playlistParsingError=new Error("Missing Target Duration"));const D=c.length,R=c[0],O=c[D-1];if(m+=u.skippedSegments*u.targetduration,m>0&&D&&O){u.averagetargetduration=m/D;const M=O.sn;u.endSN=M!=="initSegment"?M:0,u.live||(O.endList=!0),A>0&&(nV(c,A),R&&d.unshift(R))}return u.fragmentHint&&(m+=u.fragmentHint.duration),u.totalduration=m,d.length&&u.dateRangeTagCount&&R&&s8(d,u),u.endCC=g,u}}function s8(t,e){let i=t.length;if(!i)if(e.hasProgramDateTime){const a=e.fragments[e.fragments.length-1];t.push(a),i++}else return;const n=t[i-1],s=e.live?1/0:e.totalduration,r=Object.keys(e.dateRanges);for(let a=r.length;a--;){const l=e.dateRanges[r[a]],u=l.startDate.getTime();l.tagAnchor=n.ref;for(let c=i;c--;){var o;if(((o=t[c])==null?void 0:o.sn)<e.startSN)break;const d=iV(e,u,t,c,s);if(d!==-1){l.tagAnchor=e.fragments[d].ref;break}}}}function iV(t,e,i,n,s){const r=i[n];if(r){const a=r.programDateTime;if(e>=a||n===0){var o;const l=(((o=i[n+1])==null?void 0:o.start)||s)-r.start;if(e<=a+l*1e3){const u=i[n].sn-t.startSN;if(u<0)return-1;const c=t.fragments;if(c.length>i.length){const f=(i[n+1]||c[c.length-1]).sn-t.startSN;for(let h=f;h>u;h--){const p=c[h].programDateTime;if(e>=p&&e<p+c[h].duration*1e3)return h}}return u}}}return-1}function r8(t,e,i){var n,s;const r=new xi(t,i),o=(n=r.METHOD)!=null?n:"",a=r.URI,l=r.hexadecimalInteger("IV"),u=r.KEYFORMATVERSIONS,c=(s=r.KEYFORMAT)!=null?s:"identity";a&&r.IV&&!l&&ti.error(`Invalid IV: ${r.IV}`);const d=a?Mr.resolve(a,e):"",f=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Ka(o,d,c,f,l,r.KEYID)}function o8(t){const i=new xi(t).decimalFloatingPoint("TIME-OFFSET");return Ze(i)?i:null}function a8(t,e){let i=(t||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const s=i.filter(r=>q1(r,n));s.length&&(e[`${n}Codec`]=s.map(r=>r.split("/")[0]).join(","),i=i.filter(r=>s.indexOf(r)===-1))}),e.unknownCodecs=i}function l8(t,e,i){const n=e[i];n&&(t[i]=n)}function nV(t,e){let i=t[e];for(let n=e;n--;){const s=t[n];if(!s)return;s.programDateTime=i.programDateTime-s.duration*1e3,i=s}}function dg(t,e,i){t.rawProgramDateTime?i.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function u8(t,e,i,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=i,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function c8(t,e,i){t.levelkeys=e;const{encryptedFragments:n}=i;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&n.push(t)}function go(t,e,i){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${i[0]})`)}function d8(t,e,i){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${i[0]})`)}function fg(t,e){const i=e.startPTS;if(Ze(i)){let n=0,s;e.sn>t.sn?(n=i-t.start,s=t):(n=t.start-i,s=e),s.duration!==n&&s.setDuration(n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function f8(t,e,i,n,s,r,o){n-i<=0&&(o.warn("Fragment should have a positive duration",e),n=i+e.duration,r=s+e.duration);let l=i,u=n;const c=e.startPTS,d=e.endPTS;if(Ze(c)){const v=Math.abs(c-i);t&&v>t.totalduration?o.warn(`media timestamps and playlist times differ by ${v}s for level ${e.level} ${t.url}`):Ze(e.deltaPTS)?e.deltaPTS=Math.max(v,e.deltaPTS):e.deltaPTS=v,l=Math.max(i,c),i=Math.min(i,c),s=e.startDTS!==void 0?Math.min(s,e.startDTS):s,u=Math.min(n,d),n=Math.max(n,d),r=e.endDTS!==void 0?Math.max(r,e.endDTS):r}const f=i-e.start;e.start!==0&&e.setStart(i),e.setDuration(n-e.start),e.startPTS=i,e.maxStartPTS=l,e.startDTS=s,e.endPTS=n,e.minEndPTS=u,e.endDTS=r;const h=e.sn;if(!t||h<t.startSN||h>t.endSN)return 0;let p;const m=h-t.startSN,g=t.fragments;for(g[m]=e,p=m;p>0;p--)fg(g[p],g[p-1]);for(p=m;p<g.length-1;p++)fg(g[p],g[p+1]);return t.fragmentHint&&fg(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function sV(t,e,i){if(t===e)return;let n=null;const s=t.fragments;for(let c=s.length-1;c>=0;c--){const d=s[c].initSegment;if(d){n=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let r;aV(t,e,(c,d,f,h)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==c.cc){const p=c.cc-d.cc;for(let m=f;m<h.length;m++)h[m].cc+=p;e.endCC=h[h.length-1].cc}Ze(c.startPTS)&&Ze(c.endPTS)&&(d.setStart(d.startPTS=c.startPTS),d.startDTS=c.startDTS,d.maxStartPTS=c.maxStartPTS,d.endPTS=c.endPTS,d.endDTS=c.endDTS,d.minEndPTS=c.minEndPTS,d.setDuration(c.endPTS-c.startPTS),d.duration&&(r=d),e.PTSKnown=e.alignedSliding=!0),c.hasStreams&&(d.elementaryStreams=c.elementaryStreams),d.loader=c.loader,c.hasStats&&(d.stats=c.stats),c.initSegment&&(d.initSegment=c.initSegment,n=c.initSegment)});const o=e.fragments,a=e.fragmentHint?o.concat(e.fragmentHint):o;if(n&&a.forEach(c=>{var d;c&&(!c.initSegment||c.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(c.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(c=>!c),e.deltaUpdateFailed){i.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)o.shift();e.startSN=o[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=rV(t.dateRanges,e,i));const c=t.fragments.filter(d=>d.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<a.length;d++)a[d].programDateTime===null&&dg(a[d],a[d-1],c);s8(c,e)}e.endCC=o[o.length-1].cc}if(!e.startCC){var l;const c=g8(t,e.startSN-1);e.startCC=(l=c?.cc)!=null?l:o[0].cc}oV(t.partList,e.partList,(c,d)=>{d.elementaryStreams=c.elementaryStreams,d.stats=c.stats}),r?f8(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS,i):p8(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const u=e.advancedDateTime;if(e.advanced&&u){const c=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=c),e.driftEndTime=u,e.driftEnd=c}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function rV(t,e,i){const{dateRanges:n,recentlyRemovedDateranges:s}=e,r=si({},t);s&&s.forEach(l=>{delete r[l]});const a=Object.keys(r).length;return a?(Object.keys(n).forEach(l=>{const u=r[l],c=new X9(n[l].attr,u);c.isValid?(r[l]=c,u||(c.tagOrder+=a)):i.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${ui(n[l].attr)}"`)}),r):n}function oV(t,e,i){if(t&&e){let n=0;for(let s=0,r=t.length;s<=r;s++){const o=t[s],a=e[s+n];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?i(o,a):n--}}}function aV(t,e,i){const n=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,r=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=s;u<=r;u++){const c=l[o+u];let d=a[u];if(n&&!d&&c&&(d=e.fragments[u]=c),c&&d){i(c,d,u,a);const f=c.relurl,h=d.relurl;if(f&&lV(f,h)){e.playlistParsingError=h8(`media sequence mismatch ${d.sn}:`,t,e,c,d);return}else if(c.cc!==d.cc){e.playlistParsingError=h8(`discontinuity sequence mismatch (${c.cc}!=${d.cc})`,t,e,c,d);return}}}}function h8(t,e,i,n,s){return new Error(`${t} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${i.startSN}
${i.m3u8}`)}function p8(t,e,i=!0){const n=e.startSN+e.skippedSegments-t.startSN,s=t.fragments,r=n>=0;let o=0;if(r&&n<s.length)o=s[n].start;else if(r&&e.startSN===t.endSN+1)o=t.fragmentEnd;else if(r&&i)o=t.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)o=t.fragmentStart;else return;hg(e,o)}function hg(t,e){if(e){const i=t.fragments;for(let n=t.skippedSegments;n<i.length;n++)i[n].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function m8(t,e=1/0){let i=1e3*t.targetduration;if(t.updated){const n=t.fragments;if(n.length&&i*4>e){const r=n[n.length-1].duration*1e3;r<i&&(i=r)}}else i/=2;return Math.round(i)}function g8(t,e,i){if(!t)return null;let n=t.fragments[e-t.startSN];return n||(n=t.fragmentHint,n&&n.sn===e)?n:e<t.startSN&&i&&i.sn===e?i:null}function v8(t,e,i){return t?_8(t.partList,e,i):null}function _8(t,e,i){if(t)for(let n=t.length;n--;){const s=t[n];if(s.index===i&&s.fragment.sn===e)return s}return null}function b8(t){t.forEach((e,i)=>{var n;(n=e.details)==null||n.fragments.forEach(s=>{s.level=i,s.initSegment&&(s.initSegment.level=i)})})}function lV(t,e){return t!==e&&e?y8(t)!==y8(e):!1}function y8(t){return t.replace(/\?[^?]*$/,"")}function Oc(t,e){for(let n=0,s=t.length;n<s;n++){var i;if(((i=t[n])==null?void 0:i.cc)===e)return t[n]}return null}function uV(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function w8(t,e){const i=t.start+e;t.startPTS=i,t.setStart(i),t.endPTS=i+t.duration}function E8(t,e){const i=e.fragments;for(let n=0,s=i.length;n<s;n++)w8(i[n],t);e.fragmentHint&&w8(e.fragmentHint,t),e.alignedSliding=!0}function cV(t,e){t&&(S8(e,t),e.alignedSliding||Ph(e,t),!e.alignedSliding&&!e.skippedSegments&&p8(t,e,!1))}function S8(t,e){if(!uV(e,t))return;const i=Math.min(e.endCC,t.endCC),n=Oc(e.fragments,i),s=Oc(t.fragments,i);if(!n||!s)return;ti.log(`Aligning playlist at start of dicontinuity sequence ${i}`);const r=n.start-s.start;E8(r,t)}function Ph(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const i=t.fragments,n=e.fragments;if(!i.length||!n.length)return;let s,r;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(s=Oc(n,o),r=Oc(i,o)),(!s||!r)&&(s=n[Math.floor(n.length/2)],r=Oc(i,s.cc)||i[Math.floor(i.length/2)]);const a=s.programDateTime,l=r.programDateTime;if(!a||!l)return;const u=(l-a)/1e3-(r.start-s.start);E8(u,t)}function Yn(t,e,i){ns(t,e,i),t.addEventListener(e,i)}function ns(t,e,i){t.removeEventListener(e,i)}const dV={toString:function(t){let e="";const i=t.length;for(let n=0;n<i;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},$e={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class pg extends H9{constructor(e,i,n,s,r){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=$e.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:o,fragCurrent:a,media:l,mediaBuffer:u,state:c}=this,d=l?l.currentTime:0,f=bt.bufferInfo(u||l,d,o.maxBufferHole),h=!f.len;if(this.log(`Media seeking to ${Ze(d)?d.toFixed(3):d}, state: ${c}, ${h?"out of":"in"} buffer`),this.state===$e.ENDED)this.resetLoadingState();else if(a){const p=o.maxFragLookUpTolerance,m=a.start-p,g=a.start+a.duration+p;if(h||g<f.start||m>f.end){const v=d>g;(d<m||v)&&(v&&a.loader&&(this.log(`Cancelling fragment load for seek (sn: ${a.sn})`),a.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const p=this.lastCurrentTime;if(d>p&&(this.lastCurrentTime=d),!this.loadingParts){const m=Math.max(f.end,d),g=this.shouldLoadParts(this.getLevelDetails(),m);g&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${m.toFixed(2)}`),this.loadingParts=g)}}this.hls.hasEnoughToStart||(this.log(`Setting ${h?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,h&&(this.startPosition=d)),h&&this.state===$e.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=r,this.hls=e,this.fragmentLoader=new NU(e.config),this.keyLoader=n,this.fragmentTracker=i,this.config=e.config,this.decrypter=new ng(e.config)}registerListeners(){const{hls:e}=this;e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===$e.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=$e.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:i}=this;return i===-1&&e?e:i}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,i){if(i.live||!this.media)return!1;const n=e.end||0,s=this.config.timelineOffset||0;if(n<=s)return!1;const r=e.buffered;this.config.maxBufferHole&&r&&r.length>1&&(e=bt.bufferedInfo(r,e.start,0));const o=e.nextStart;if(o&&o>s&&o<i.edge||this.media.currentTime<e.start)return!1;const l=i.partList;if(l!=null&&l.length){const c=l[l.length-1];return bt.isBuffered(this.media,c.start+c.duration/2)}const u=i.fragments[i.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var i;return((i=this.getLevelDetails())==null?void 0:i.appliedTimelineOffset)||e}return 0}onMediaAttached(e,i){const n=this.media=this.mediaBuffer=i.media;Yn(n,"seeking",this.onMediaSeeking),Yn(n,"ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===$e.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,i){const n=!!i.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),ns(s,"seeking",this.onMediaSeeking),ns(s,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,i){}onManifestLoaded(e,i){this.startTimeOffset=i.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=$e.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,i,n){this.startFragRequested=!0,this._loadFragForPlayback(e,i,n)}_loadFragForPlayback(e,i,n){const s=r=>{const o=r.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${r.part?" part: "+r.part.index:""} of ${this.fragInfo(o,!1,r.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(r)};this._doFragLoad(e,i,n,s).then(r=>{if(!r)return;const o=this.state,a=r.frag;if(this.fragContextChanged(a)){(o===$e.FRAG_LOADING||!this.fragCurrent&&o===$e.PARSING)&&(this.fragmentTracker.removeFragment(a),this.state=$e.IDLE);return}"payload"in r&&(this.log(`Loaded ${a.type} sn: ${a.sn} of ${this.playlistLabel()} ${a.level}`),this.hls.trigger(V.FRAG_LOADED,r)),this._handleFragmentLoadComplete(r)}).catch(r=>{this.state===$e.STOPPED||this.state===$e.ERROR||(this.warn(`Frag error: ${r?.message||r}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var i;const{fragmentTracker:n}=this;if(n.getState(e)===Zi.APPENDING){const r=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,r),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&n.removeFragment(e)}else((i=this.mediaBuffer)==null?void 0:i.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Zi.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const i=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:i,part:null,stats:i.stats,id:i.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const i=e.details;return i?.live&&i.type!=="EVENT"&&(this.levelLastLoaded!==e||i.expired)}flushMainBuffer(e,i,n=null){if(!(e-i))return;const s={startOffset:e,endOffset:i,type:n};this.hls.trigger(V.BUFFER_FLUSHING,s)}_loadInitSegment(e,i){this._doFragLoad(e,i).then(n=>{const s=n?.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:s}=this,{frag:r,payload:o}=n,a=r.decryptdata;if(o&&o.byteLength>0&&a!=null&&a.key&&a.iv&&Yl(a.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),a.key.buffer,a.iv.buffer,og(a.method)).catch(u=>{throw s.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:r}),u}).then(u=>{const c=self.performance.now();return s.trigger(V.FRAG_DECRYPTED,{frag:r,payload:u,stats:{tstart:l,tdecrypt:c}}),n.payload=u,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===$e.STOPPED||this.state===$e.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:i}=this;if(!i)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==$e.STOPPED&&(this.state=$e.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,i){var n,s;const r=e.tracks;if(r&&!i.encrypted&&((n=r.audio)!=null&&n.encrypted||(s=r.video)!=null&&s.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const o=this.media,a=new Error(`Encrypted track with no key in ${this.fragInfo(i)} (media ${o?"attached mediaKeys: "+o.mediaKeys:"detached"})`);return this.warn(a.message),!o||o.mediaKeys?!1:(this.hls.trigger(V.ERROR,{type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_NO_KEYS,fatal:!1,error:a,frag:i}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:i}=this;return!e||!i||e.sn!==i.sn||e.level!==i.level}fragBufferedComplete(e,i){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${i?" part: "+i.index:""} of ${this.fragInfo(e,!1,i)} > buffer:${n?dV.toString(bt.getBuffered(n)):"(detached)"})`),Hi(e)){var s;if(e.type!==it.SUBTITLE){const o=e.elementaryStreams;if(!Object.keys(o).some(a=>!!o[a])){this.state=$e.IDLE;return}}const r=(s=this.levels)==null?void 0:s[e.level];r!=null&&r.fragmentError&&(this.log(`Resetting level fragment error count of ${r.fragmentError} on frag buffered`),r.fragmentError=0)}this.state=$e.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:i}=this;if(!i)return;const{frag:n,part:s,partsLoaded:r}=e,o=!r||r.length===0||r.some(l=>!l),a=new sg(n.level,n.sn,n.stats.chunkCount+1,0,s?s.index:-1,!o);i.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,i,n=null,s){var r;this.fragCurrent=e;const o=i.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((r=e.decryptdata)!=null&&r.key)){if(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=$e.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(f=>{if(!this.fragContextChanged(f.frag))return this.hls.trigger(V.KEY_LOADED,f),this.state===$e.KEY_LOADING&&(this.state=$e.IDLE),f}),this.hls.trigger(V.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(a=this.keyLoader.loadClear(e,o.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(Hi(e)&&(!l||e.sn!==l.sn)){const f=this.shouldLoadParts(i.details,e.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} loading sn ${l?.sn}->${e.sn}`),this.loadingParts=f)}if(n=Math.max(e.start,n||0),this.loadingParts&&Hi(e)){const f=o.partList;if(f&&s){n>o.fragmentEnd&&o.fragmentHint&&(e=o.fragmentHint);const h=this.getNextPart(f,e,n);if(h>-1){const p=f[h];e=this.fragCurrent=p.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${p.index} (${h}/${f.length-1}) of ${this.fragInfo(e,!1,p)}) cc: ${e.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=$e.FRAG_LOADING;let m;return a?m=a.then(g=>!g||this.fragContextChanged(g.frag)?null:this.doFragPartsLoad(e,p,i,s)).catch(g=>this.handleFragLoadError(g)):m=this.doFragPartsLoad(e,p,i,s).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(V.FRAG_LOADING,{frag:e,part:p,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(f,n))return Promise.resolve(null)}}if(Hi(e)&&this.loadingParts){var u;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(u=o.partList)==null?void 0:u.filter(f=>f.loaded).map(f=>`[${f.start}-${f.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+o.startSN+"-"+o.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),Ze(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=$e.FRAG_LOADING;const c=this.config.progressive;let d;return c&&a?d=a.then(f=>!f||this.fragContextChanged(f.frag)?null:this.fragmentLoader.load(e,s)).catch(f=>this.handleFragLoadError(f)):d=Promise.all([this.fragmentLoader.load(e,c?s:void 0),a]).then(([f])=>(!c&&s&&s(f),f)).catch(f=>this.handleFragLoadError(f)),this.hls.trigger(V.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,i,n,s){return new Promise((r,o)=>{var a;const l=[],u=(a=n.details)==null?void 0:a.partList,c=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{l[d.index]=f;const h=f.part;this.hls.trigger(V.FRAG_LOADED,f);const p=v8(n.details,e.sn,d.index+1)||_8(u,e.sn,d.index+1);if(p)c(p);else return r({frag:e,part:h,partsLoaded:l})}).catch(o)};c(i)})}handleFragLoadError(e){if("data"in e){const i=e.data;i.frag&&i.details===Le.INTERNAL_ABORTED?this.handleFragLoadAborted(i.frag,i.part):i.frag&&i.type===at.KEY_SYSTEM_ERROR?(i.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(i.frag)):this.hls.trigger(V.ERROR,i)}else this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const i=this.getCurrentContext(e);if(!i||this.state!==$e.PARSING){!this.fragCurrent&&this.state!==$e.STOPPED&&this.state!==$e.ERROR&&(this.state=$e.IDLE);return}const{frag:n,part:s,level:r}=i,o=self.performance.now();n.stats.parsing.end=o,s&&(s.stats.parsing.end=o);const a=this.getLevelDetails(),u=a&&n.sn>a.endSN||this.shouldLoadParts(a,n.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(n,s,r,e.partial)}shouldLoadParts(e,i){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const r=e.partList[0];if(r.fragment.type===it.SUBTITLE)return!1;const o=r.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(i>=o){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>r.start-r.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:i,fragCurrent:n}=this,{level:s,sn:r,part:o}=e;if(!(i!=null&&i[s]))return this.warn(`Levels object was unset while buffering fragment ${r} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const a=i[s],l=a.details,u=o>-1?v8(l,r,o):null,c=u?u.fragment:g8(l,r,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:u,level:a}):null}bufferFragmentData(e,i,n,s,r){if(this.state!==$e.PARSING)return;const{data1:o,data2:a}=e;let l=o;if(a&&(l=Vs(o,a)),!l.length)return;const u=this.initPTS[i.cc],c=u?-u.baseTime/u.timescale:void 0,d={type:e.type,frag:i,part:n,chunkMeta:s,offset:c,parent:i.type,data:l};if(this.hls.trigger(V.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(r)return;this.flushBufferGap(i)}}flushBufferGap(e){const i=this.media;if(!i)return;if(!bt.isBuffered(i,i.currentTime)){this.flushMainBuffer(0,e.start);return}const n=i.currentTime,s=bt.bufferInfo(i,n,0),r=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,r*.25),a=Math.max(Math.min(e.start-o,s.end-o),n+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,i){var n;const s=this.getLoadPosition();if(!Ze(s))return null;const o=this.lastCurrentTime>s||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,i,o)}getFwdBufferInfoAtPos(e,i,n,s){const r=bt.bufferInfo(e,i,s);if(r.len===0&&r.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(i,n);if(o&&(r.nextStart<=o.end||o.gap)){const a=Math.max(Math.min(r.nextStart,o.end)-i,s);return bt.bufferInfo(e,i,a)}}return r}getMaxBufferLength(e){const{config:i}=this;let n;return e?n=Math.max(8*i.maxBufferSize/e,i.maxBufferLength):n=i.maxBufferLength,Math.min(n,i.maxMaxBufferLength)}reduceMaxBufferLength(e,i){const n=this.config,s=Math.max(Math.min(e-i,n.maxBufferLength),i),r=Math.max(e-i*3,n.maxMaxBufferLength/2,s);return r>=s?(n.maxMaxBufferLength=r,this.warn(`Reduce max buffer length to ${r}s`),!0):!1}getAppendedFrag(e,i=it.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,i):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,i){const n=i.fragments,s=n.length;if(!s)return null;const{config:r}=this,o=n[0].start,a=r.lowLatencyMode&&!!i.partList;let l=null;if(i.live){const d=r.initialLiveManifestSize;if(s<d)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${d})`),null;if(!i.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o){var u;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(i);const f=this.hls.startPosition,h=this.hls.liveSyncPosition,p=l?(f!==-1&&f>=o?f:h)||l.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${h} frag.start: ${(u=l)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=o&&(l=n[0]);if(!l){const d=this.loadingParts?i.partEnd:i.fragmentEnd;l=this.getFragmentAtPosition(e,d,i)}let c=this.filterReplacedPrimary(l,i);if(!c&&l){const d=l.sn-i.startSN;c=this.filterReplacedPrimary(n[d+1]||null,i)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,i){const n=this.fragmentTracker.getState(e);return(n===Zi.OK||n===Zi.PARTIAL&&!!e.gap)&&this.nextLoadPosition>i}getNextFragmentLoopLoading(e,i,n,s,r){let o=null;if(e.gap&&(o=this.getNextFragment(this.nextLoadPosition,i),o&&!o.gap&&n.nextStart)){const a=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,s,0);if(a!==null&&n.len+a.len>=r){const l=o.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(x8(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,i){if(!e)return e;if(x8(this.config)&&e.type!==it.SUBTITLE){const n=this.hls.interstitialsManager,s=n?.bufferingItem;if(s){const o=s.event;if(o){if(o.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&i?.live===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const r=n?.playerQueue;if(r)for(let o=r.length;o--;){const a=r[o].interstitial;if(a.appendInPlace&&e.start>=a.startTime&&e.end<=a.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,i,n){let s=-1,r=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const u=e[a];if(o=o&&!u.independent,s>-1&&n<u.start)break;const c=u.loaded;c?s=-1:(r||(u.independent||o)&&u.fragment===i)&&(u.fragment!==i&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${u.start}`),s=a),r=c}return s}loadedEndOfParts(e,i){let n;for(let s=e.length;s--;){if(n=e[s],!n.loaded)return!1;if(i>n.start)return!0}return!1}getInitialLiveFragment(e){const i=e.fragments,n=this.fragPrevious;let s=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),s=kU(i,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){const o=i[r-e.startSN];n.cc===o.cc&&(s=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=O9(e,n.cc,n.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const r=this.hls.liveSyncPosition;r!==null&&(s=this.getFragmentAtPosition(r,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,i,n){const{config:s}=this;let{fragPrevious:r}=this,{fragments:o,endSN:a}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:u}=s,c=n.partList,d=!!(this.loadingParts&&c!=null&&c.length&&l);d&&!this.bitrateTest&&c[c.length-1].fragment.sn===l.sn&&(o=o.concat(l),a=l.sn);let f;if(e<i){var h;const m=e<this.lastCurrentTime||e>i-u||(h=this.media)!=null&&h.paused||!this.startFragRequested?0:u;f=Wa(r,o,e,m)}else f=o[o.length-1];if(f){const p=f.sn-n.startSN,m=this.fragmentTracker.getState(f);if((m===Zi.OK||m===Zi.PARTIAL&&f.gap)&&(r=f),r&&f.sn===r.sn&&(!d||c[0].fragment.sn>f.sn||!n.live)&&f.level===r.level){const v=o[p+1];f.sn<a&&this.fragmentTracker.getState(v)!==Zi.OK?f=v:f=null}}return f}alignPlaylists(e,i,n){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const r=e.fragmentStart,o=!i,a=e.alignedSliding&&Ze(r);if(o||!a&&!r){cV(n,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${i?i.startSN:"na"}->${e.startSN} fragments: ${s}`),l}return r}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,i){let n=this.startPosition;n<i&&(n=-1);const s=this.timelineOffset;if(n===-1){const r=this.startTimeOffset!==null,o=r?this.startTimeOffset:e.startTimeOffset;o!==null&&Ze(o)?(n=i+o,o<0&&(n+=e.edge),n=Math.min(Math.max(i,n),i+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${o} found in ${r?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||i,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+s}this.nextLoadPosition=n+s}getLoadPosition(){var e;const{media:i}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&i?n=i.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,i){this.transmuxer&&e.type===this.playlistType&&Hi(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${i?" part "+i.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==$e.FRAG_LOADING_WAITING_RETRY)&&(this.state=$e.IDLE)}onFragmentOrKeyLoadError(e,i){var n;if(i.chunkMeta&&!i.frag){const v=this.getCurrentContext(i.chunkMeta);v&&(i.frag=v.frag)}const s=i.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var r;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const o=i.details===Le.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(s,!0);const a=i.errorAction;if(!a){this.state=$e.ERROR;return}const{action:l,flags:u,retryCount:c=0,retryConfig:d}=a,f=!!d,h=f&&l===hn.RetryRequest,p=f&&!a.resolved&&u===_s.MoveAllAlternatesMatchingHost,m=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!h&&p&&Hi(s)&&!s.endList&&m&&!$9(i))this.resetFragmentErrors(e),this.treatAsGap(s),a.resolved=!0;else if((h||p)&&c<d.maxNumRetry){var g;const v=ig((g=i.response)==null?void 0:g.code),b=tg(d,c);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+b,this.state=$e.FRAG_LOADING_WAITING_RETRY,a.resolved=!0,v){this.log("Waiting for connection (offline)"),this.retryDate=1/0,i.reason="offline";return}this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${i.details}, retrying loading ${c+1}/${d.maxNumRetry} in ${b}ms`)}else if(d)if(this.resetFragmentErrors(e),c<d.maxNumRetry)!o&&l!==hn.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${i.details} reached or exceeded max retry (${c})`);return}else l===hn.SendAlternateToPenaltyBox?this.state=$e.WAITING_LEVEL:this.state=$e.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),i=this.retryDate,n=i===1/0;(!i||e>=i||n&&!ig(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=$e.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===$e.PARSING||this.state===$e.PARSED){const i=e.frag,n=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,n),r=s&&s.len>.5;r&&this.reduceMaxBufferLength(s.len,i?.duration||10);const o=!r;return o&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),i&&(this.fragmentTracker.removeFragment(i),this.nextLoadPosition=i.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===it.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==$e.STOPPED&&(this.state=$e.IDLE)}afterBufferFlushed(e,i,n){if(!e)return;const s=bt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(i,s,n),this.state===$e.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==$e.STOPPED&&(this.state=$e.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,i=e?e.details:null;i!=null&&i.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(i,i.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,i,n,s){const r=n.details;if(!r){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${d})`),l||!1;const f=s?0:f8(r,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS,this);return this.hls.trigger(V.LEVEL_PTS_UPDATED,{details:r,level:n,drift:f,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)){var a;if(n.fragmentError===0&&this.treatAsGap(e,n),((a=this.transmuxer)==null?void 0:a.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=$e.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${i?" part: "+i.index:""} of ${this.fragInfo(e,!1,i)})`),this.hls.trigger(V.FRAG_PARSED,{frag:e,part:i})}playlistLabel(){return this.playlistType===it.MAIN?"level":"track"}fragInfo(e,i=!0,n){var s,r;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((s=i&&!n?e.startPTS:(n||e).start)!=null?s:NaN).toFixed(3)}-${((r=i&&!n?e.endPTS:(n||e).end)!=null?r:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,i){i&&i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const i=this._state;i!==e&&(this._state=e,this.log(`${i}->${e}`))}get state(){return this._state}}function x8(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class T8{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:i}=this;let n;if(e.length)e.length===1?n=e[0]:n=fV(e,i);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function fV(t,e){const i=new Uint8Array(e);let n=0;for(let s=0;s<t.length;s++){const r=t[s];i.set(r,n),n+=r.length}return i}var mg={exports:{}},A8;function hV(){return A8||(A8=1,(function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function r(l,u,c,d,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new s(c,d||l,f),p=i?i+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(i?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=i?i+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(u){var c=i?i+u:u,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(u,c,d,f,h,p){var m=i?i+u:u;if(!this._events[m])return!1;var g=this._events[m],v=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,d),!0;case 4:return g.fn.call(g.context,c,d,f),!0;case 5:return g.fn.call(g.context,c,d,f,h),!0;case 6:return g.fn.call(g.context,c,d,f,h,p),!0}for(_=1,b=new Array(v-1);_<v;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var y=g.length,E;for(_=0;_<y;_++)switch(g[_].once&&this.removeListener(u,g[_].fn,void 0,!0),v){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,c);break;case 3:g[_].fn.call(g[_].context,c,d);break;case 4:g[_].fn.call(g[_].context,c,d,f);break;default:if(!b)for(E=1,b=new Array(v-1);E<v;E++)b[E-1]=arguments[E];g[_].fn.apply(g[_].context,b)}}return!0},a.prototype.on=function(u,c,d){return r(this,u,c,d,!1)},a.prototype.once=function(u,c,d){return r(this,u,c,d,!0)},a.prototype.removeListener=function(u,c,d,f){var h=i?i+u:u;if(!this._events[h])return this;if(!c)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var m=0,g=[],v=p.length;m<v;m++)(p[m].fn!==c||f&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=i?i+u:u,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a})(mg)),mg.exports}var pV=hV(),gg=NN(pV);const Mc="1.6.14",Xl={};function mV(){return typeof __HLS_WORKER_BUNDLE__=="function"}function gV(){const t=Xl[Mc];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),i=self.URL.createObjectURL(e),s={worker:new self.Worker(i),objectURL:i,clientCount:1};return Xl[Mc]=s,s}function vV(t){const e=Xl[t];if(e)return e.clientCount++,e;const i=new self.URL(t,self.location.href).href,s={worker:new self.Worker(i),scriptURL:i,clientCount:1};return Xl[t]=s,s}function _V(t){const e=Xl[t||Mc];if(e&&e.clientCount--===1){const{worker:n,objectURL:s}=e;delete Xl[t||Mc],s&&self.URL.revokeObjectURL(s),n.terminate()}}function k8(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function vg(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Dh(t,e){let i=0;return i=(t[e]&127)<<21,i|=(t[e+1]&127)<<14,i|=(t[e+2]&127)<<7,i|=t[e+3]&127,i}function $c(t,e){const i=e;let n=0;for(;vg(t,e);){n+=10;const s=Dh(t,e+6);n+=s,k8(t,e+10)&&(n+=10),e+=n}if(n>0)return t.subarray(i,i+n)}function bV(t,e,i,n){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=e[i+2],o=r>>2&15;if(o>12){const h=new Error(`invalid ADTS sampling index:${o}`);t.emit(V.ERROR,V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}const a=(r>>6&3)+1,l=e[i+3]>>6&3|(r&1)<<2,u="mp4a.40."+a,c=s[o];let d=o;(a===5||a===29)&&(d-=3);const f=[a<<3|(d&14)>>1,(d&1)<<7|l<<3];return ti.log(`manifest codec:${n}, parsed codec:${u}, channels:${l}, rate:${c} (ADTS object type:${a} sampling index:${o})`),{config:f,samplerate:c,channelCount:l,codec:u,parsedCodec:u,manifestCodec:n}}function C8(t,e){return t[e]===255&&(t[e+1]&246)===240}function L8(t,e){return t[e+1]&1?7:9}function _g(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function yV(t,e){return e+5<t.length}function Oh(t,e){return e+1<t.length&&C8(t,e)}function wV(t,e){return yV(t,e)&&C8(t,e)&&_g(t,e)<=t.length-e}function EV(t,e){if(Oh(t,e)){const i=L8(t,e);if(e+i>=t.length)return!1;const n=_g(t,e);if(n<=i)return!1;const s=e+n;return s===t.length||Oh(t,s)}return!1}function I8(t,e,i,n,s){if(!t.samplerate){const r=bV(e,i,n,s);if(!r)return;si(t,r)}}function R8(t){return 1024*9e4/t}function SV(t,e){const i=L8(t,e);if(e+i<=t.length){const n=_g(t,e)-i;if(n>0)return{headerLength:i,frameLength:n}}}function P8(t,e,i,n,s){const r=R8(t.samplerate),o=n+s*r,a=SV(e,i);let l;if(a){const{frameLength:d,headerLength:f}=a,h=f+d,p=Math.max(0,i+h-e.length);p?(l=new Uint8Array(h-f),l.set(e.subarray(i+f,e.length),0)):l=e.subarray(i+f,i+h);const m={unit:l,pts:o};return p||t.samples.push(m),{sample:m,length:h,missing:p}}const u=e.length-i;return l=new Uint8Array(u),l.set(e.subarray(i,e.length),0),{sample:{unit:l,pts:o},length:u,missing:-1}}function xV(t,e){return vg(t,e)&&Dh(t,e+6)+10<=t.length-e}function TV(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function bg(t,e=0,i=1/0){return AV(t,e,i,Uint8Array)}function AV(t,e,i,n){const s=kV(t);let r=1;"BYTES_PER_ELEMENT"in n&&(r=n.BYTES_PER_ELEMENT);const o=CV(t)?t.byteOffset:0,a=(o+t.byteLength)/r,l=(o+e)/r,u=Math.floor(Math.max(0,Math.min(l,a))),c=Math.floor(Math.min(u+Math.max(i,0),a));return new n(s,u,c-u)}function kV(t){return t instanceof ArrayBuffer?t:t.buffer}function CV(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function LV(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},i=3;if(t.size<2)return;if(t.data[0]!==i){console.log("Ignore frame with unrecognized character encoding");return}const n=t.data.subarray(1).indexOf(0);if(n===-1)return;const s=vs(bg(t.data,1,n)),r=t.data[2+n],o=t.data.subarray(3+n).indexOf(0);if(o===-1)return;const a=vs(bg(t.data,3+n,o));let l;return s==="-->"?l=vs(bg(t.data,4+n+o)):l=TV(t.data.subarray(4+n+o)),e.mimeType=s,e.pictureType=r,e.description=a,e.data=l,e}function IV(t){if(t.size<2)return;const e=vs(t.data,!0),i=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:i.buffer}}function RV(t){if(t.size<2)return;if(t.type==="TXXX"){let i=1;const n=vs(t.data.subarray(i),!0);i+=n.length+1;const s=vs(t.data.subarray(i));return{key:t.type,info:n,data:s}}const e=vs(t.data.subarray(1));return{key:t.type,info:"",data:e}}function PV(t){if(t.type==="WXXX"){if(t.size<2)return;let i=1;const n=vs(t.data.subarray(i),!0);i+=n.length+1;const s=vs(t.data.subarray(i));return{key:t.type,info:n,data:s}}const e=vs(t.data);return{key:t.type,info:"",data:e}}function DV(t){return t.type==="PRIV"?IV(t):t.type[0]==="W"?PV(t):t.type==="APIC"?LV(t):RV(t)}function OV(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),i=Dh(t,4),n=10;return{type:e,size:i,data:t.subarray(n,n+i)}}const Mh=10,MV=10;function D8(t){let e=0;const i=[];for(;vg(t,e);){const n=Dh(t,e+6);t[e+5]>>6&1&&(e+=Mh),e+=Mh;const s=e+n;for(;e+MV<s;){const r=OV(t.subarray(e)),o=DV(r);o&&i.push(o),e+=r.size+Mh}k8(t,e)&&(e+=Mh)}return i}function O8(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function $V(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),i=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,i&&(n+=4772185884e-2),Math.round(n)}}function yg(t){const e=D8(t);for(let i=0;i<e.length;i++){const n=e[i];if(O8(n))return $V(n)}}let bs=(function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t})({});function $r(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class wg{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,i,n,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,i){return!1}appendFrame(e,i,n){}demux(e,i){this.cachedData&&(e=Vs(this.cachedData,e),this.cachedData=null);let n=$c(e,0),s=n?n.length:0,r;const o=this._audioTrack,a=this._id3Track,l=n?yg(n):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&Ze(l))&&(this.basePTS=FV(l,i,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:bs.audioId3,duration:Number.POSITIVE_INFINITY});s<u;){if(this.canParse(e,s)){const c=this.appendFrame(o,e,s);c?(this.frameIndex++,this.lastPTS=c.sample.pts,s+=c.length,r=s):s=u}else xV(e,s)?(n=$c(e,s),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:bs.audioId3,duration:Number.POSITIVE_INFINITY}),s+=n.length,r=s):s++;if(s===u&&r!==u){const c=e.slice(r);this.cachedData?this.cachedData=Vs(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,videoTrack:$r(),id3Track:a,textTrack:$r()}}demuxSampleAes(e,i,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const i=this.cachedData;return i&&(this.cachedData=null,this.demux(i,0)),{audioTrack:this._audioTrack,videoTrack:$r(),id3Track:this._id3Track,textTrack:$r()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const FV=(t,e,i)=>{if(Ze(t))return t*90;const n=i?i.baseTime*9e4/i.timescale:0;return e*9e4+n};let $h=null;const BV=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],NV=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],UV=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],VV=[0,1,1,4];function M8(t,e,i,n,s){if(i+24>e.length)return;const r=$8(e,i);if(r&&i+r.frameLength<=e.length){const o=r.samplesPerFrame*9e4/r.sampleRate,a=n+s*o,l={unit:e.subarray(i,i+r.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=r.channelCount,t.samplerate=r.sampleRate,t.samples.push(l),{sample:l,length:r.frameLength,missing:0}}}function $8(t,e){const i=t[e+1]>>3&3,n=t[e+1]>>1&3,s=t[e+2]>>4&15,r=t[e+2]>>2&3;if(i!==1&&s!==0&&s!==15&&r!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=i===3?3-n:n===3?3:4,u=BV[l*14+s-1]*1e3,d=NV[(i===3?0:i===2?1:2)*3+r],f=a===3?1:2,h=UV[i][n],p=VV[n],m=h*8*p,g=Math.floor(h*u/d+o)*p;if($h===null){const _=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);$h=_?parseInt(_[1]):0}return!!$h&&$h<=87&&n===2&&u>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:g,samplesPerFrame:m}}}function Eg(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function F8(t,e){return e+1<t.length&&Eg(t,e)}function jV(t,e){return Eg(t,e)&&4<=t.length-e}function B8(t,e){if(e+1<t.length&&Eg(t,e)){const n=$8(t,e);let s=4;n!=null&&n.frameLength&&(s=n.frameLength);const r=e+s;return r===t.length||F8(t,r)}return!1}class HV extends wg{constructor(e,i){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=i}resetInitSegment(e,i,n,s){super.resetInitSegment(e,i,n,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:i,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,i){if(!e)return!1;const n=$c(e,0);let s=n?.length||0;if(B8(e,s))return!1;for(let r=e.length;s<r;s++)if(EV(e,s))return i.log("ADTS sync word found !"),!0;return!1}canParse(e,i){return wV(e,i)}appendFrame(e,i,n){I8(e,this.observer,i,n,e.manifestCodec);const s=P8(e,i,n,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const N8=(t,e)=>{let i=0,n=5;e+=n;const s=new Uint32Array(1),r=new Uint32Array(1),o=new Uint8Array(1);for(;n>0;){o[0]=t[e];const a=Math.min(n,8),l=8-a;r[0]=4278190080>>>24+l<<l,s[0]=(o[0]&r[0])>>l,i=i?i<<a|s[0]:s[0],e+=1,n-=a}return i};class zV extends wg{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,i,n,s){super.resetInitSegment(e,i,n,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:i,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,i){return i+64<e.length}appendFrame(e,i,n){const s=U8(e,i,n,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const i=$c(e,0);if(!i)return!1;const n=i.length;return e[n]===11&&e[n+1]===119&&yg(i)!==void 0&&N8(e,n)<16}}function U8(t,e,i,n,s){if(i+8>e.length||e[i]!==11||e[i+1]!==119)return-1;const r=e[i+4]>>6;if(r>=3)return-1;const a=[48e3,44100,32e3][r],l=e[i+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+r]*2;if(i+c>e.length)return-1;const d=e[i+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const h=(e[i+6]<<8|e[i+7])>>12-f&1,m=[2,1,2,3,3,4,4,5][d]+h,g=e[i+5]>>3,v=e[i+5]&7,b=new Uint8Array([r<<6|g<<1|v>>2,(v&3)<<6|d<<3|h<<2|l>>4,l<<4&224]),_=1536/a*9e4,y=n+s*_,E=e.subarray(i,i+c);return t.config=b,t.channelCount=m,t.samplerate=a,t.samples.push({unit:E,pts:y}),c}class GV extends wg{resetInitSegment(e,i,n,s){super.resetInitSegment(e,i,n,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:i,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const i=$c(e,0);let n=i?.length||0;if(i&&e[n]===11&&e[n+1]===119&&yg(i)!==void 0&&N8(e,n)<=16)return!1;for(let s=e.length;n<s;n++)if(B8(e,n))return ti.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,i){return jV(e,i)}appendFrame(e,i,n){if(this.basePTS!==null)return M8(e,i,n,this.basePTS,this.frameIndex)}}const WV=/\/emsg[-/]ID3/i;class KV{constructor(e,i){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=i}resetTimeStamp(){}resetInitSegment(e,i,n,s){const r=this.videoTrack=$r("video",1),o=this.audioTrack=$r("audio",1),a=this.txtTrack=$r("text",1);if(this.id3Track=$r("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=h9(e);if(l.video){const{id:u,timescale:c,codec:d,supplemental:f}=l.video;r.id=u,r.timescale=a.timescale=c,r.codec=d,r.supplemental=f}if(l.audio){const{id:u,timescale:c,codec:d}=l.audio;o.id=u,o.timescale=c,o.codec=d}a.id=u9.text,r.sampleDuration=0,r.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return zN(e)}demux(e,i){this.timeOffset=i;let n=e;const s=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Vs(this.remainderData,e));const a=ZN(n);this.remainderData=a.remainder,s.samples=a.valid||new Uint8Array}else s.samples=n;const o=this.extractID3Track(s,i);return r.samples=g9(i,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,i=this.videoTrack,n=this.txtTrack;i.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(i,this.timeOffset);return n.samples=g9(e,i),{videoTrack:i,audioTrack:$r(),id3Track:s,textTrack:$r()}}extractID3Track(e,i){const n=this.id3Track;if(e.samples.length){const s=Lt(e.samples,["emsg"]);s&&s.forEach(r=>{const o=JN(r);if(WV.test(o.schemeIdUri)){const a=V8(o,i);let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=o.payload;n.samples.push({data:u,len:u.byteLength,dts:a,pts:a,type:bs.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const a=V8(o,i);n.samples.push({data:o.payload,len:o.payload.byteLength,dts:a,pts:a,type:bs.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,i,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function V8(t,e){return Ze(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class YV{constructor(e,i,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new ng(i,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,ea.cbc)}decryptAacSample(e,i,n){const s=e[i].unit;if(s.length<=16)return;const r=s.subarray(16,s.length-s.length%16),o=r.buffer.slice(r.byteOffset,r.byteOffset+r.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,i+1,n)}).catch(n)}decryptAacSamples(e,i,n){for(;;i++){if(i>=e.length){n();return}if(!(e[i].unit.length<32)&&(this.decryptAacSample(e,i,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const i=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(i);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)n.set(e.subarray(r,r+16),s);return n}getAvcDecryptedUnit(e,i){const n=new Uint8Array(i);let s=0;for(let r=32;r<e.length-16;r+=160,s+=16)e.set(n.subarray(s,s+16),r);return e}decryptAvcSample(e,i,n,s,r){const o=v9(r.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{r.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,i,n+1,s)}).catch(s)}decryptAvcSamples(e,i,n,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;i++,n=0){if(i>=e.length){s();return}const r=e[i].units;for(;!(n>=r.length);n++){const o=r[n];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,i,n,s,o),!this.decrypter.isSync()))return}}}}class j8{constructor(){this.VideoSample=null}createVideoSample(e,i,n){return{key:e,frame:!1,pts:i,dts:n,units:[],length:0}}getLastNalUnit(e){var i;let n=this.VideoSample,s;if((!n||n.units.length===0)&&(n=e[e.length-1]),(i=n)!=null&&i.units){const r=n.units;s=r[r.length-1]}return s}pushAccessUnit(e,i){if(e.units.length&&e.frame){if(e.pts===void 0){const n=i.samples,s=n.length;if(s){const r=n[s-1];e.pts=r.pts,e.dts=r.dts}else{i.dropped++;return}}i.samples.push(e)}}parseNALu(e,i,n){const s=i.byteLength;let r=e.naluState||0;const o=r,a=[];let l=0,u,c,d,f=-1,h=0;for(r===-1&&(f=0,h=this.getNALuType(i,0),r=0,l=1);l<s;){if(u=i[l++],!r){r=u?0:1;continue}if(r===1){r=u?0:2;continue}if(!u)r=3;else if(u===1){if(c=l-r-1,f>=0){const p={data:i.subarray(f,c),type:h};a.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(o&&l<=4-o&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-o)),c>0&&(p.data=Vs(p.data,i.subarray(0,c)),p.state=0))}l<s?(d=this.getNALuType(i,l),f=l,h=d,r=0):r=-1}else r=0}if(f>=0&&r>=0){const p={data:i.subarray(f,s),type:h,state:r};a.push(p)}if(a.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=Vs(p.data,i))}return e.naluState=r,a}}class Fc{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,i=this.bytesAvailable,n=e.byteLength-i,s=new Uint8Array(4),r=Math.min(4,i);if(r===0)throw new Error("no bytes available");s.set(e.subarray(n,n+r)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=r*8,this.bytesAvailable-=r}skipBits(e){let i;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,i=e>>3,e-=i<<3,this.bytesAvailable-=i,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let i=Math.min(this.bitsAvailable,e);const n=this.word>>>32-i;if(e>32&&ti.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=i,this.bitsAvailable>0)this.word<<=i;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return i=e-i,i>0&&this.bitsAvailable?n<<i|this.readBits(i):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class XV extends j8{parsePES(e,i,n,s){const r=this.parseNALu(e,n.data,s);let o=this.VideoSample,a,l=!1;n.data=null,o&&r.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),r.forEach(u=>{var c,d;switch(u.type){case 1:{let m=!1;a=!0;const g=u.data;if(l&&g.length>4){const v=this.readSliceType(g);(v===2||v===4||v===7||v===9)&&(m=!0)}if(m){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.frame=!0,o.key=m;break}case 5:a=!0,(c=o)!=null&&c.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 6:{a=!0,X1(u.data,1,n.pts,i.samples);break}case 7:{var h,p;a=!0,l=!0;const m=u.data,g=this.readSPS(m);if(!e.sps||e.width!==g.width||e.height!==g.height||((h=e.pixelRatio)==null?void 0:h[0])!==g.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[m];const v=m.subarray(1,4);let b="avc1.";for(let _=0;_<3;_++){let y=v[_].toString(16);y.length<2&&(y="0"+y),b+=y}e.codec=b}break}case 8:a=!0,e.pps=[u.data];break;case 9:a=!0,e.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:a=!0;break;default:a=!1;break}o&&a&&o.units.push(u)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,i){return e[i]&31}readSliceType(e){const i=new Fc(e);return i.readUByte(),i.readUEG(),i.readUEG()}skipScalingList(e,i){let n=8,s=8,r;for(let o=0;o<e;o++)s!==0&&(r=i.readEG(),s=(n+r+256)%256),n=s===0?n:s}readSPS(e){const i=new Fc(e);let n=0,s=0,r=0,o=0,a,l,u;const c=i.readUByte.bind(i),d=i.readBits.bind(i),f=i.readUEG.bind(i),h=i.readBoolean.bind(i),p=i.skipBits.bind(i),m=i.skipEG.bind(i),g=i.skipUEG.bind(i),v=this.skipScalingList.bind(this);c();const b=c();if(d(5),p(3),c(),g(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){const C=f();if(C===3&&p(1),g(),g(),p(1),h())for(l=C!==3?8:12,u=0;u<l;u++)h()&&(u<6?v(16,i):v(64,i))}g();const _=f();if(_===0)f();else if(_===1)for(p(1),m(),m(),a=f(),u=0;u<a;u++)m();g(),p(1);const y=f(),E=f(),S=d(1);S===0&&p(1),p(1),h()&&(n=f(),s=f(),r=f(),o=f());let A=[1,1];if(h()&&h())switch(c()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:{A=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((y+1)*16-n*2-s*2),height:(2-S)*(E+1)*16-(S?2:4)*(r+o),pixelRatio:A}}}class qV extends j8{constructor(...e){super(...e),this.initVPS=null}parsePES(e,i,n,s){const r=this.parseNALu(e,n.data,s);let o=this.VideoSample,a,l=!1;n.data=null,o&&r.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),r.forEach(u=>{var c,d;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),o.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:if(a=!0,l){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:a=!0,(c=o)!=null&&c.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0,o.frame=!0;break;case 39:a=!0,X1(u.data,2,n.pts,i.samples);break;case 32:a=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=si(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(a=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const h=this.readSPS(u.data);e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.codec=h.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in h.params)e.params[p]=h.params[p]}this.pushParameterSet(e.sps,u.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),o.key=!0;break;case 34:if(a=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const h=this.readPPS(u.data);for(const p in h)e.params[p]=h[p]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:a=!0,e.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:a=!1;break}o&&a&&o.units.push(u)}),s&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,i,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(i)}getNALuType(e,i){return(e[i]&126)>>>1}ebsp2rbsp(e){const i=new Uint8Array(e.byteLength);let n=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(i[n]=e[s],n++);return new Uint8Array(i.buffer,0,n)}pushAccessUnit(e,i){super.pushAccessUnit(e,i),this.initVPS&&(this.initVPS=null)}readVPS(e){const i=new Fc(e);i.readUByte(),i.readUByte(),i.readBits(4),i.skipBits(2),i.readBits(6);const n=i.readBits(3),s=i.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:s}}readSPS(e){const i=new Fc(this.ebsp2rbsp(e));i.readUByte(),i.readUByte(),i.readBits(4);const n=i.readBits(3);i.readBoolean();const s=i.readBits(2),r=i.readBoolean(),o=i.readBits(5),a=i.readUByte(),l=i.readUByte(),u=i.readUByte(),c=i.readUByte(),d=i.readUByte(),f=i.readUByte(),h=i.readUByte(),p=i.readUByte(),m=i.readUByte(),g=i.readUByte(),v=i.readUByte(),b=[],_=[];for(let ue=0;ue<n;ue++)b.push(i.readBoolean()),_.push(i.readBoolean());if(n>0)for(let ue=n;ue<8;ue++)i.readBits(2);for(let ue=0;ue<n;ue++)b[ue]&&(i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte()),_[ue]&&i.readUByte();i.readUEG();const y=i.readUEG();y==3&&i.skipBits(1);const E=i.readUEG(),S=i.readUEG(),A=i.readBoolean();let C=0,T=0,I=0,D=0;A&&(C+=i.readUEG(),T+=i.readUEG(),I+=i.readUEG(),D+=i.readUEG());const R=i.readUEG(),O=i.readUEG(),M=i.readUEG(),U=i.readBoolean();for(let ue=U?0:n;ue<=n;ue++)i.skipUEG(),i.skipUEG(),i.skipUEG();if(i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG(),i.readBoolean()&&i.readBoolean())for(let ve=0;ve<4;ve++)for(let j=0;j<(ve===3?2:6);j++)if(!i.readBoolean())i.readUEG();else{const oe=Math.min(64,1<<4+(ve<<1));ve>1&&i.readEG();for(let he=0;he<oe;he++)i.readEG()}i.readBoolean(),i.readBoolean(),i.readBoolean()&&(i.readUByte(),i.skipUEG(),i.skipUEG(),i.readBoolean());const W=i.readUEG();let te=0;for(let ue=0;ue<W;ue++){let ve=!1;if(ue!==0&&(ve=i.readBoolean()),ve){ue===W&&i.readUEG(),i.readBoolean(),i.readUEG();let j=0;for(let K=0;K<=te;K++){const oe=i.readBoolean();let he=!1;oe||(he=i.readBoolean()),(oe||he)&&j++}te=j}else{const j=i.readUEG(),K=i.readUEG();te=j+K;for(let oe=0;oe<j;oe++)i.readUEG(),i.readBoolean();for(let oe=0;oe<K;oe++)i.readUEG(),i.readBoolean()}}if(i.readBoolean()){const ue=i.readUEG();for(let ve=0;ve<ue;ve++){for(let j=0;j<M+4;j++)i.readBits(1);i.readBits(1)}}let q=0,le=1,be=1,se=!0,ne=1,pe=0;i.readBoolean(),i.readBoolean();let ye=!1;if(i.readBoolean()){if(i.readBoolean()){const ce=i.readUByte(),me=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Q=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ce>0&&ce<16?(le=me[ce-1],be=Q[ce-1]):ce===255&&(le=i.readBits(16),be=i.readBits(16))}if(i.readBoolean()&&i.readBoolean(),i.readBoolean()&&(i.readBits(3),i.readBoolean(),i.readBoolean()&&(i.readUByte(),i.readUByte(),i.readUByte())),i.readBoolean()&&(i.readUEG(),i.readUEG()),i.readBoolean(),i.readBoolean(),i.readBoolean(),ye=i.readBoolean(),ye&&(i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG()),i.readBoolean()&&(ne=i.readBits(32),pe=i.readBits(32),i.readBoolean()&&i.readUEG(),i.readBoolean())){const Q=i.readBoolean(),Y=i.readBoolean();let ee=!1;(Q||Y)&&(ee=i.readBoolean(),ee&&(i.readUByte(),i.readBits(5),i.readBoolean(),i.readBits(5)),i.readBits(4),i.readBits(4),ee&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5));for(let we=0;we<=n;we++){se=i.readBoolean();const ke=se||i.readBoolean();let de=!1;ke?i.readEG():de=i.readBoolean();const N=de?1:i.readUEG()+1;if(Q)for(let J=0;J<N;J++)i.readUEG(),i.readUEG(),ee&&(i.readUEG(),i.readUEG()),i.skipBits(1);if(Y)for(let J=0;J<N;J++)i.readUEG(),i.readUEG(),ee&&(i.readUEG(),i.readUEG()),i.skipBits(1)}}i.readBoolean()&&(i.readBoolean(),i.readBoolean(),i.readBoolean(),q=i.readUEG())}let Be=E,Ke=S;if(A){let ue=1,ve=1;y===1?ue=ve=2:y==2&&(ue=2),Be=E-ue*T-ue*C,Ke=S-ve*D-ve*I}const Xe=s?["A","B","C"][s]:"",Re=a<<24|l<<16|u<<8|c;let Z=0;for(let ue=0;ue<32;ue++)Z=(Z|(Re>>ue&1)<<31-ue)>>>0;let ae=Z.toString(16);return o===1&&ae==="2"&&(ae="6"),{codecString:`hvc1.${Xe}${o}.${ae}.${r?"H":"L"}${v}.B0`,params:{general_tier_flag:r,general_profile_idc:o,general_profile_space:s,general_profile_compatibility_flags:[a,l,u,c],general_constraint_indicator_flags:[d,f,h,p,m,g],general_level_idc:v,bit_depth:R+8,bit_depth_luma_minus8:R,bit_depth_chroma_minus8:O,min_spatial_segmentation_idc:q,chroma_format_idc:y,frame_rate:{fixed:se,fps:pe/ne}},width:Be,height:Ke,pixelRatio:[le,be]}}readPPS(e){const i=new Fc(this.ebsp2rbsp(e));i.readUByte(),i.readUByte(),i.skipUEG(),i.skipUEG(),i.skipBits(2),i.skipBits(3),i.skipBits(2),i.skipUEG(),i.skipUEG(),i.skipEG(),i.skipBits(2),i.readBoolean()&&i.skipUEG(),i.skipEG(),i.skipEG(),i.skipBits(4);const s=i.readBoolean(),r=i.readBoolean();let o=1;return r&&s?o=0:r?o=3:s&&(o=2),{parallelismType:o}}matchSPS(e,i){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,i).substr(3)}}const on=188;class ta{constructor(e,i,n,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=i,this.typeSupported=n,this.logger=s,this.videoParser=null}static probe(e,i){const n=ta.syncOffset(e);return n>0&&i.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const i=e.length;let n=Math.min(on*5,i-on)+1,s=0;for(;s<n;){let r=!1,o=-1,a=0;for(let l=s;l<i;l+=on)if(e[l]===71&&(i-l===on||e[l+on]===71)){if(a++,o===-1&&(o=l,o!==0&&(n=Math.min(o+on*99,e.length-on)+1)),r||(r=Sg(e,l)===0),r&&a>1&&(o===0&&a>2||l+on>n))return o}else{if(a)return-1;break}s++}return-1}static createTrack(e,i){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:u9[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?i:void 0}}resetInitSegment(e,i,n,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=ta.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=ta.createTrack("audio",s),this._id3Track=ta.createTrack("id3"),this._txtTrack=ta.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=i,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:i,_id3Track:n}=this;e&&(e.pesData=null),i&&(i.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,i,n=!1,s=!1){n||(this.sampleAes=null);let r;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=o.pid,d=o.pesData,f=a.pid,h=l.pid,p=a.pesData,m=l.pesData,g=null,v=this.pmtParsed,b=this._pmtId,_=e.length;if(this.remainderData&&(e=Vs(this.remainderData,e),_=e.length,this.remainderData=null),_<on&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};const y=Math.max(0,ta.syncOffset(e));_-=(_-y)%on,_<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,_,e.buffer.byteLength-_));let E=0;for(let A=y;A<_;A+=on)if(e[A]===71){const C=!!(e[A+1]&64),T=Sg(e,A),I=(e[A+3]&48)>>4;let D;if(I>1){if(D=A+5+e[A+4],D===A+on)continue}else D=A+4;switch(T){case c:C&&(d&&(r=ql(d,this.logger))&&(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(o,u,r,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(D,A+on)),d.size+=A+on-D);break;case f:if(C){if(p&&(r=ql(p,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,r);break;case"mp3":this.parseMPEGPES(a,r);break;case"ac3":this.parseAC3PES(a,r);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(D,A+on)),p.size+=A+on-D);break;case h:C&&(m&&(r=ql(m,this.logger))&&this.parseID3PES(l,r),m={data:[],size:0}),m&&(m.data.push(e.subarray(D,A+on)),m.size+=A+on-D);break;case 0:C&&(D+=e[D]+1),b=this._pmtId=ZV(e,D);break;case b:{C&&(D+=e[D]+1);const R=QV(e,D,this.typeSupported,n,this.observer,this.logger);c=R.videoPid,c>0&&(o.pid=c,o.segmentCodec=R.segmentVideoCodec),f=R.audioPid,f>0&&(a.pid=f,a.segmentCodec=R.segmentAudioCodec),h=R.id3Pid,h>0&&(l.pid=h),g!==null&&!v&&(this.logger.warn(`MPEG-TS PMT found at ${A} after unknown PID '${g}'. Backtracking to sync byte @${y} to parse all TS packets.`),g=null,A=y-188),v=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=T;break}}else E++;E>0&&xg(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=d,a.pesData=p,l.pesData=m;const S={audioTrack:a,videoTrack:o,id3Track:l,textTrack:u};return s&&this.extractRemainingSamples(S),S}flush(){const{remainderData:e}=this;this.remainderData=null;let i;return e?i=this.demux(e,-1,!1,!0):i={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(i),this.sampleAes?this.decrypt(i,this.sampleAes):i}extractRemainingSamples(e){const{audioTrack:i,videoTrack:n,id3Track:s,textTrack:r}=e,o=n.pesData,a=i.pesData,l=s.pesData;let u;if(o&&(u=ql(o,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,r,u,!0),n.pesData=null)):n.pesData=o,a&&(u=ql(a,this.logger))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,u);break;case"mp3":this.parseMPEGPES(i,u);break;case"ac3":this.parseAC3PES(i,u);break}i.pesData=null}else a!=null&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=a;l&&(u=ql(l,this.logger))?(this.parseID3PES(s,u),s.pesData=null):s.pesData=l}demuxSampleAes(e,i,n){const s=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new YV(this.observer,this.config,i);return this.decrypt(s,r)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new XV:e==="hevc"&&(this.videoParser=new qV))}decrypt(e,i){return new Promise(n=>{const{audioTrack:s,videoTrack:r}=e;s.samples&&s.segmentCodec==="aac"?i.decryptAacSamples(s.samples,0,()=>{r.samples?i.decryptAvcSamples(r.samples,0,0,()=>{n(e)}):n(e)}):r.samples&&i.decryptAvcSamples(r.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,i){let n=0;const s=this.aacOverFlow;let r=i.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1)r=Vs(s.sample.unit,r);else{const h=f-d;s.sample.unit.set(r.subarray(0,d),h),e.samples.push(s.sample),n=s.missing}}let o,a;for(o=n,a=r.length;o<a-1&&!Oh(r,o);o++);if(o!==n){let d;const f=o<a-1;if(f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES",xg(this.observer,new Error(d),f,this.logger),!f)return}I8(e,this.observer,r,o,this.audioCodec);let l;if(i.pts!==void 0)l=i.pts;else if(s){const d=R8(e.samplerate);l=s.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;o<a;)if(c=P8(e,r,o,l,u),o+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;o<a-1&&!Oh(r,o);o++);}parseMPEGPES(e,i){const n=i.data,s=n.length;let r=0,o=0;const a=i.pts;if(a===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(F8(n,o)){const l=M8(e,n,o,a,r);if(l)o+=l.length,r++;else break}else o++}parseAC3PES(e,i){{const n=i.data,s=i.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const r=n.length;let o=0,a=0,l;for(;a<r&&(l=U8(e,n,a,s,o++))>0;)a+=l}}parseID3PES(e,i){if(i.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=si({},i,{type:this._videoTrack?bs.emsg:bs.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Sg(t,e){return((t[e+1]&31)<<8)+t[e+2]}function ZV(t,e){return(t[e+10]&31)<<8|t[e+11]}function QV(t,e,i,n,s,r){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(t[e+1]&15)<<8|t[e+2],l=e+3+a-4,u=(t[e+10]&15)<<8|t[e+11];for(e+=12+u;e<l;){const c=Sg(t,e),d=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!n){Tg("ADTS AAC",r);break}case 15:o.audioPid===-1&&(o.audioPid=c);break;case 21:o.id3Pid===-1&&(o.id3Pid=c);break;case 219:if(!n){Tg("H.264",r);break}case 27:o.videoPid===-1&&(o.videoPid=c);break;case 3:case 4:!i.mpeg&&!i.mp3?r.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=c,o.segmentAudioCodec="mp3");break;case 193:if(!n){Tg("AC-3",r);break}case 129:i.ac3?o.audioPid===-1&&(o.audioPid=c,o.segmentAudioCodec="ac3"):r.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&d>0){let f=e+5,h=d;for(;h>2;){switch(t[f]){case 106:i.ac3!==!0?r.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=c,o.segmentAudioCodec="ac3");break}const m=t[f+1]+2;f+=m,h-=m}}break;case 194:case 135:return xg(s,new Error("Unsupported EC-3 in M2TS found"),void 0,r),o;case 36:o.videoPid===-1&&(o.videoPid=c,o.segmentVideoCodec="hevc",r.log("HEVC in M2TS found"));break}e+=d+5}return o}function xg(t,e,i,n){n.warn(`parsing error: ${e.message}`),t.emit(V.ERROR,V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:e,reason:e.message})}function Tg(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function ql(t,e){let i=0,n,s,r,o,a;const l=t.data;if(!t||t.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Vs(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(s=(n[4]<<8)+n[5],s&&s>t.size-6)return null;const c=n[7];c&192&&(o=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,c&64?(a=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,o-a>60*9e4&&(e.warn(`${Math.round((o-a)/9e4)}s delta between PTS and DTS, align them`),o=a)):a=o),r=n[8];let d=r+9;if(t.size<=d)return null;t.size-=d;const f=new Uint8Array(t.size);for(let h=0,p=l.length;h<p;h++){n=l[h];let m=n.byteLength;if(d)if(d>m){d-=m;continue}else n=n.subarray(d),m-=d,d=0;f.set(n,i),i+=m}return s&&(s-=r+3),{data:f,pts:o,dts:a,len:s}}return null}class JV{static getSilentFrame(e,i){switch(e){case"mp4a.40.2":if(i===1)return new Uint8Array([0,200,0,128,35,128]);if(i===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(i===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(i===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(i===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(i===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(i===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ia=Math.pow(2,32)-1;class Ce{static init(){Ce.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in Ce.types)Ce.types.hasOwnProperty(e)&&(Ce.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Ce.HDLR_TYPES={video:i,audio:n};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),r=new Uint8Array([0,0,0,0,0,0,0,0]);Ce.STTS=Ce.STSC=Ce.STCO=r,Ce.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Ce.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Ce.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Ce.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);Ce.FTYP=Ce.box(Ce.types.ftyp,o,l,o,a),Ce.DINF=Ce.box(Ce.types.dinf,Ce.box(Ce.types.dref,s))}static box(e,...i){let n=8,s=i.length;const r=s;for(;s--;)n+=i[s].byteLength;const o=new Uint8Array(n);for(o[0]=n>>24&255,o[1]=n>>16&255,o[2]=n>>8&255,o[3]=n&255,o.set(e,4),s=0,n=8;s<r;s++)o.set(i[s],n),n+=i[s].byteLength;return o}static hdlr(e){return Ce.box(Ce.types.hdlr,Ce.HDLR_TYPES[e])}static mdat(e){return Ce.box(Ce.types.mdat,e)}static mdhd(e,i){i*=e;const n=Math.floor(i/(ia+1)),s=Math.floor(i%(ia+1));return Ce.box(Ce.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return Ce.box(Ce.types.mdia,Ce.mdhd(e.timescale||0,e.duration||0),Ce.hdlr(e.type),Ce.minf(e))}static mfhd(e){return Ce.box(Ce.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?Ce.box(Ce.types.minf,Ce.box(Ce.types.smhd,Ce.SMHD),Ce.DINF,Ce.stbl(e)):Ce.box(Ce.types.minf,Ce.box(Ce.types.vmhd,Ce.VMHD),Ce.DINF,Ce.stbl(e))}static moof(e,i,n){return Ce.box(Ce.types.moof,Ce.mfhd(e),Ce.traf(n,i))}static moov(e){let i=e.length;const n=[];for(;i--;)n[i]=Ce.trak(e[i]);return Ce.box.apply(null,[Ce.types.moov,Ce.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Ce.mvex(e)))}static mvex(e){let i=e.length;const n=[];for(;i--;)n[i]=Ce.trex(e[i]);return Ce.box.apply(null,[Ce.types.mvex,...n])}static mvhd(e,i){i*=e;const n=Math.floor(i/(ia+1)),s=Math.floor(i%(ia+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Ce.box(Ce.types.mvhd,r)}static sdtp(e){const i=e.samples||[],n=new Uint8Array(4+i.length);let s,r;for(s=0;s<i.length;s++)r=i[s].flags,n[s+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return Ce.box(Ce.types.sdtp,n)}static stbl(e){return Ce.box(Ce.types.stbl,Ce.stsd(e),Ce.box(Ce.types.stts,Ce.STTS),Ce.box(Ce.types.stsc,Ce.STSC),Ce.box(Ce.types.stsz,Ce.STSZ),Ce.box(Ce.types.stco,Ce.STCO))}static avc1(e){let i=[],n=[],s,r,o;for(s=0;s<e.sps.length;s++)r=e.sps[s],o=r.byteLength,i.push(o>>>8&255),i.push(o&255),i=i.concat(Array.prototype.slice.call(r));for(s=0;s<e.pps.length;s++)r=e.pps[s],o=r.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(r));const a=Ce.box(Ce.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(n))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return Ce.box(Ce.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,Ce.box(Ce.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ce.box(Ce.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const i=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...i,6,1,2])}static audioStsd(e){const i=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,i>>8&255,i&255,0,0])}static mp4a(e){return Ce.box(Ce.types.mp4a,Ce.audioStsd(e),Ce.box(Ce.types.esds,Ce.esds(e)))}static mp3(e){return Ce.box(Ce.types[".mp3"],Ce.audioStsd(e))}static ac3(e){return Ce.box(Ce.types["ac-3"],Ce.audioStsd(e),Ce.box(Ce.types.dac3,e.config))}static stsd(e){const{segmentCodec:i}=e;if(e.type==="audio"){if(i==="aac")return Ce.box(Ce.types.stsd,Ce.STSD,Ce.mp4a(e));if(i==="ac3"&&e.config)return Ce.box(Ce.types.stsd,Ce.STSD,Ce.ac3(e));if(i==="mp3"&&e.codec==="mp3")return Ce.box(Ce.types.stsd,Ce.STSD,Ce.mp3(e))}else if(e.pps&&e.sps){if(i==="avc")return Ce.box(Ce.types.stsd,Ce.STSD,Ce.avc1(e));if(i==="hevc"&&e.vps)return Ce.box(Ce.types.stsd,Ce.STSD,Ce.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${i}/${e.codec})`)}static tkhd(e){const i=e.id,n=(e.duration||0)*(e.timescale||0),s=e.width||0,r=e.height||0,o=Math.floor(n/(ia+1)),a=Math.floor(n%(ia+1));return Ce.box(Ce.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,i&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,r>>8&255,r&255,0,0]))}static traf(e,i){const n=Ce.sdtp(e),s=e.id,r=Math.floor(i/(ia+1)),o=Math.floor(i%(ia+1));return Ce.box(Ce.types.traf,Ce.box(Ce.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),Ce.box(Ce.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,r&255,o>>24,o>>16&255,o>>8&255,o&255])),Ce.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Ce.box(Ce.types.trak,Ce.tkhd(e),Ce.mdia(e))}static trex(e){const i=e.id;return Ce.box(Ce.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,i){const n=e.samples||[],s=n.length,r=12+16*s,o=new Uint8Array(r);let a,l,u,c,d,f;for(i+=8+r,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255],0),a=0;a<s;a++)l=n[a],u=l.duration,c=l.size,d=l.flags,f=l.cts,o.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return Ce.box(Ce.types.trun,o)}static initSegment(e){Ce.types||Ce.init();const i=Ce.moov(e);return Vs(Ce.FTYP,i)}static hvc1(e){const i=e.params,n=[e.vps,e.sps,e.pps],s=4,r=new Uint8Array([1,i.general_profile_space<<6|(i.general_tier_flag?32:0)|i.general_profile_idc,i.general_profile_compatibility_flags[0],i.general_profile_compatibility_flags[1],i.general_profile_compatibility_flags[2],i.general_profile_compatibility_flags[3],i.general_constraint_indicator_flags[0],i.general_constraint_indicator_flags[1],i.general_constraint_indicator_flags[2],i.general_constraint_indicator_flags[3],i.general_constraint_indicator_flags[4],i.general_constraint_indicator_flags[5],i.general_level_idc,240|i.min_spatial_segmentation_idc>>8,255&i.min_spatial_segmentation_idc,252|i.parallelismType,252|i.chroma_format_idc,248|i.bit_depth_luma_minus8,248|i.bit_depth_chroma_minus8,0,parseInt(i.frame_rate.fps),s-1|i.temporal_id_nested<<2|i.num_temporal_layers<<3|(i.frame_rate.fixed?64:0),n.length]);let o=r.length;for(let p=0;p<n.length;p+=1){o+=3;for(let m=0;m<n[p].length;m+=1)o+=2+n[p][m].length}const a=new Uint8Array(o);a.set(r,0),o=r.length;const l=n.length-1;for(let p=0;p<n.length;p+=1){a.set(new Uint8Array([32+p|(p===l?128:0),0,n[p].length]),o),o+=3;for(let m=0;m<n[p].length;m+=1)a.set(new Uint8Array([n[p][m].length>>8,n[p][m].length&255]),o),o+=2,a.set(n[p][m],o),o+=n[p][m].length}const u=Ce.box(Ce.types.hvcC,a),c=e.width,d=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return Ce.box(Ce.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,Ce.box(Ce.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Ce.box(Ce.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}}Ce.types=void 0,Ce.HDLR_TYPES=void 0,Ce.STTS=void 0,Ce.STSC=void 0,Ce.STCO=void 0,Ce.STSZ=void 0,Ce.VMHD=void 0,Ce.SMHD=void 0,Ce.STSD=void 0,Ce.FTYP=void 0,Ce.DINF=void 0;const H8=9e4;function Ag(t,e,i=1,n=!1){const s=t*e*i;return n?Math.round(s):s}function ej(t,e,i=1,n=!1){return Ag(t,e,1/i,n)}function Bc(t,e=!1){return Ag(t,1e3,1/H8,e)}function tj(t,e=1){return Ag(t,H8,1/e)}function z8(t){const{baseTime:e,timescale:i,trackId:n}=t;return`${e/i} (${e}/${i}) trackId: ${n}`}const ij=10*1e3,nj=1024,sj=1152,rj=1536;let Zl=null,kg=null;function G8(t,e,i,n){return{duration:e,size:i,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class Fh extends Us{constructor(e,i,n,s){if(super("mp4-remuxer",s),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=i,this.typeSupported=n,this.ISGenerated=!1,Zl===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Zl=o?parseInt(o[1]):0}if(kg===null){const r=navigator.userAgent.match(/Safari\/(\d+)/i);kg=r?parseInt(r[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const i=this._initPTS;(!i||!e||e.trackId!==i.trackId||e.baseTime!==i.baseTime||e.timescale!==i.timescale)&&this.log(`Reset initPTS: ${i&&z8(i)} > ${e&&z8(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let i=!1;const n=e[0].pts,s=e.reduce((r,o)=>{let a=o.pts,l=a-r;return l<-4294967296&&(i=!0,a=ys(a,n),l=a-r),l>0?r:a},n);return i&&this.debug("PTS rollover detected"),s}remux(e,i,n,s,r,o,a,l){let u,c,d,f,h,p,m=r,g=r;const v=e.pid>-1,b=i.pid>-1,_=i.samples.length,y=e.samples.length>0,E=a&&_>0||_>1;if((!v||y)&&(!b||E)||this.ISGenerated||a){if(this.ISGenerated){var A,C,T,I;const M=this.videoTrackConfig;(M&&(i.width!==M.width||i.height!==M.height||((A=i.pixelRatio)==null?void 0:A[0])!==((C=M.pixelRatio)==null?void 0:C[0])||((T=i.pixelRatio)==null?void 0:T[1])!==((I=M.pixelRatio)==null?void 0:I[1]))||!M&&E||this.nextAudioTs===null&&y)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,i,r,o));const D=this.isVideoContiguous;let R=-1,O;if(E&&(R=oj(i.samples),!D&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,R>0){this.warn(`Dropped ${R} out of ${_} video samples due to a missing keyframe`);const M=this.getVideoStartPts(i.samples);i.samples=i.samples.slice(R),i.dropped+=R,g+=(i.samples[0].pts-M)/i.inputTimeScale,O=g}else R===-1&&(this.warn(`No keyframe found out of ${_} video samples`),p=!1);if(this.ISGenerated){if(y&&E){const M=this.getVideoStartPts(i.samples),$=(ys(e.samples[0].pts,M)-M)/i.inputTimeScale;m+=Math.max(0,$),g+=Math.max(0,-$)}if(y){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,i,r,o)),c=this.remuxAudio(e,m,this.isAudioContiguous,o,b||E||l===it.AUDIO?g:void 0),E){const M=c?c.endPTS-c.startPTS:0;i.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,i,r,o)),u=this.remuxVideo(i,g,D,M)}}else E&&(u=this.remuxVideo(i,g,D,0));u&&(u.firstKeyFrame=R,u.independent=R!==-1,u.firstKeyFramePTS=O)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=W8(n,r,this._initPTS,this._initDTS)),s.samples.length&&(f=K8(s,r,this._initPTS))),{audio:c,video:u,initSegment:d,independent:p,text:f,id3:h}}computeInitPts(e,i,n,s){const r=Math.round(n*i);let o=ys(e,r);if(o<r+i)for(this.log(`Adjusting PTS for rollover in timeline near ${(r-o)/i} ${s}`);o<r+i;)o+=8589934592;return o-r}generateIS(e,i,n,s){const r=e.samples,o=i.samples,a=this.typeSupported,l={},u=this._initPTS;let c=!u||s,d="audio/mp4",f,h,p,m=-1;if(c&&(f=h=1/0),e.config&&r.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):Ce.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(m=e.id,p=e.inputTimeScale,!u||p!==u.timescale?f=h=this.computeInitPts(r[0].pts,p,n,"audio"):c=!1)}if(i.sps&&i.pps&&o.length){if(i.timescale=i.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:i.codec,initSegment:Ce.initSegment([i]),metadata:{width:i.width,height:i.height}},c)if(m=i.id,p=i.inputTimeScale,!u||p!==u.timescale){const g=this.getVideoStartPts(o),v=ys(o[0].dts,g),b=this.computeInitPts(v,p,n,"video"),_=this.computeInitPts(g,p,n,"video");h=Math.min(h,b),f=Math.min(f,_)}else c=!1;this.videoTrackConfig={width:i.width,height:i.height,pixelRatio:i.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(u&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${n} ${f/p} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${f/p} (${f}/${p}) trackId: ${m}`),this._initPTS={baseTime:f,timescale:p,trackId:m},this._initDTS={baseTime:h,timescale:p,trackId:m}):f=p=void 0,{tracks:l,initPTS:f,timescale:p,trackId:m}}remuxVideo(e,i,n,s){const r=e.inputTimeScale,o=e.samples,a=[],l=o.length,u=this._initPTS,c=u.baseTime*r/u.timescale;let d=this.nextVideoTs,f=8,h=this.videoSampleDuration,p,m,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,b=!1;if(!n||d===null){const q=c+i*r,le=o[0].pts-ys(o[0].dts,o[0].pts);Zl&&d!==null&&Math.abs(q-le-(d+c))<15e3?n=!0:d=q-le-c}const _=d+c;for(let q=0;q<l;q++){const le=o[q];le.pts=ys(le.pts,_),le.dts=ys(le.dts,_),le.dts<o[q>0?q-1:q].dts&&(b=!0)}b&&o.sort(function(q,le){const be=q.dts-le.dts,se=q.pts-le.pts;return be||se}),p=o[0].dts,m=o[o.length-1].dts;const y=m-p,E=y?Math.round(y/(l-1)):h||e.inputTimeScale/30;if(n){const q=p-_,le=q>E,be=q<-1;if((le||be)&&(le?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Bc(q,!0)} ms (${q}dts) hole between fragments detected at ${i.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Bc(-q,!0)} ms (${q}dts) overlapping between fragments detected at ${i.toFixed(3)}`),!be||_>=o[0].pts||Zl)){p=_;const se=o[0].pts-q;if(le)o[0].dts=p,o[0].pts=se;else{let ne=!0;for(let pe=0;pe<o.length&&!(o[pe].dts>se&&ne);pe++){const ye=o[pe].pts;if(o[pe].dts-=q,o[pe].pts-=q,pe<o.length-1){const xe=o[pe+1].pts,Be=o[pe].pts,Ke=xe<=Be,Xe=xe<=ye;ne=Ke==Xe}}}this.log(`Video: Initial PTS/DTS adjusted: ${Bc(se,!0)}/${Bc(p,!0)}, delta: ${Bc(q,!0)} ms`)}}p=Math.max(0,p);let S=0,A=0,C=p;for(let q=0;q<l;q++){const le=o[q],be=le.units,se=be.length;let ne=0;for(let pe=0;pe<se;pe++)ne+=be[pe].data.length;A+=ne,S+=se,le.length=ne,le.dts<C?(le.dts=C,C+=E/4|0||1):C=le.dts,g=Math.min(le.pts,g),v=Math.max(le.pts,v)}m=o[l-1].dts;const T=A+4*S+8;let I;try{I=new Uint8Array(T)}catch(q){this.observer.emit(V.ERROR,V.ERROR,{type:at.MUX_ERROR,details:Le.REMUX_ALLOC_ERROR,fatal:!1,error:q,bytes:T,reason:`fail allocating video mdat ${T}`});return}const D=new DataView(I.buffer);D.setUint32(0,T),I.set(Ce.types.mdat,4);let R=!1,O=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,$=Number.NEGATIVE_INFINITY;for(let q=0;q<l;q++){const le=o[q],be=le.units;let se=0;for(let ye=0,xe=be.length;ye<xe;ye++){const Be=be[ye],Ke=Be.data,Xe=Be.data.byteLength;D.setUint32(f,Xe),f+=4,I.set(Ke,f),f+=Xe,se+=4+Xe}let ne;if(q<l-1)h=o[q+1].dts-le.dts,ne=o[q+1].pts-le.pts;else{const ye=this.config,xe=q>0?le.dts-o[q-1].dts:E;if(ne=q>0?le.pts-o[q-1].pts:E,ye.stretchShortVideoTrack&&this.nextAudioTs!==null){const Be=Math.floor(ye.maxBufferHole*r),Ke=(s?g+s*r:this.nextAudioTs+c)-le.pts;Ke>Be?(h=Ke-xe,h<0?h=xe:R=!0,this.log(`It is approximately ${Ke/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=xe}else h=xe}const pe=Math.round(le.pts-le.dts);O=Math.min(O,h),U=Math.max(U,h),M=Math.min(M,ne),$=Math.max($,ne),a.push(G8(le.key,h,se,pe))}if(a.length){if(Zl){if(Zl<70){const q=a[0].flags;q.dependsOn=2,q.isNonSync=0}}else if(kg&&$-M<U-O&&E/U<.025&&a[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let q=p;for(let le=0,be=a.length;le<be;le++){const se=q+a[le].duration,ne=q+a[le].cts;if(le<be-1){const pe=se+a[le+1].cts;a[le].duration=pe-ne}else a[le].duration=le?a[le-1].duration:E;a[le].cts=0,q=se}}}h=R||!h?E:h;const B=m+h;this.nextVideoTs=d=B-c,this.videoSampleDuration=h,this.isVideoContiguous=!0;const re={data1:Ce.moof(e.sequenceNumber++,p,si(e,{samples:a})),data2:I,startPTS:(g-c)/r,endPTS:(v+h-c)/r,startDTS:(p-c)/r,endDTS:d/r,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,re}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return sj;case"ac3":return rj;default:return nj}}remuxAudio(e,i,n,s,r){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,u=this.getSamplesPerFrame(e),c=u*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=r!==void 0;let m=e.samples,g=f?0:8,v=this.nextAudioTs||-1;const b=d.baseTime*o/d.timescale,_=b+i*o;if(this.isAudioContiguous=n=n||m.length&&v>0&&(s&&Math.abs(_-(v+b))<9e3||Math.abs(ys(m[0].pts,_)-(v+b))<20*c),m.forEach(function($){$.pts=ys($.pts,_)}),!n||v<0){const $=m.length;if(m=m.filter(B=>B.pts>=0),$!==m.length&&this.warn(`Removed ${m.length-$} of ${$} samples (initPTS ${b} / ${o})`),!m.length)return;r===0?v=0:s&&!p?v=Math.max(0,_-b):v=m[0].pts-b}if(e.segmentCodec==="aac"){const $=this.config.maxAudioFramesDrift;for(let B=0,W=v+b;B<m.length;B++){const te=m[B],re=te.pts,q=re-W,le=Math.abs(1e3*q/o);if(q<=-$*c&&p)B===0&&(this.warn(`Audio frame @ ${(re/o).toFixed(3)}s overlaps marker by ${Math.round(1e3*q/o)} ms.`),this.nextAudioTs=v=re-b,W=re);else if(q>=$*c&&le<ij&&p){let be=Math.round(q/c);for(W=re-be*c;W<0&&be&&c;)be--,W+=c;B===0&&(this.nextAudioTs=v=W-b),this.warn(`Injecting ${be} audio frames @ ${((W-b)/o).toFixed(3)}s due to ${Math.round(1e3*q/o)} ms gap.`);for(let se=0;se<be;se++){let ne=JV.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ne||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ne=te.unit.subarray()),m.splice(B,0,{unit:ne,pts:W}),W+=c,B++}}te.pts=W,W+=c}}let y=null,E=null,S,A=0,C=m.length;for(;C--;)A+=m[C].unit.byteLength;for(let $=0,B=m.length;$<B;$++){const W=m[$],te=W.unit;let re=W.pts;if(E!==null){const le=h[$-1];le.duration=Math.round((re-E)/l)}else if(n&&e.segmentCodec==="aac"&&(re=v+b),y=re,A>0){A+=g;try{S=new Uint8Array(A)}catch(le){this.observer.emit(V.ERROR,V.ERROR,{type:at.MUX_ERROR,details:Le.REMUX_ALLOC_ERROR,fatal:!1,error:le,bytes:A,reason:`fail allocating audio mdat ${A}`});return}f||(new DataView(S.buffer).setUint32(0,A),S.set(Ce.types.mdat,4))}else return;S.set(te,g);const q=te.byteLength;g+=q,h.push(G8(!0,u,q,0)),E=re}const T=h.length;if(!T)return;const I=h[h.length-1];v=E-b,this.nextAudioTs=v+l*I.duration;const D=f?new Uint8Array(0):Ce.moof(e.sequenceNumber++,y/l,si({},e,{samples:h}));e.samples=[];const R=(y-b)/o,O=v/o,U={data1:D,data2:S,startPTS:R,endPTS:O,startDTS:R,endDTS:O,type:"audio",hasAudio:!0,hasVideo:!1,nb:T};return this.isAudioContiguous=!0,U}}function ys(t,e){let i;if(e===null)return t;for(e<t?i=-8589934592:i=8589934592;Math.abs(t-e)>4294967296;)t+=i;return t}function oj(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function W8(t,e,i,n){const s=t.samples.length;if(!s)return;const r=t.inputTimeScale;for(let a=0;a<s;a++){const l=t.samples[a];l.pts=ys(l.pts-i.baseTime*r/i.timescale,e*r)/r,l.dts=ys(l.dts-n.baseTime*r/n.timescale,e*r)/r}const o=t.samples;return t.samples=[],{samples:o}}function K8(t,e,i){const n=t.samples.length;if(!n)return;const s=t.inputTimeScale;for(let o=0;o<n;o++){const a=t.samples[o];a.pts=ys(a.pts-i.baseTime*s/i.timescale,e*s)/s}t.samples.sort((o,a)=>o.pts-a.pts);const r=t.samples;return t.samples=[],{samples:r}}class aj extends Us{constructor(e,i,n,s){super("passthrough-remuxer",s),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const i=this.initPTS;i&&e&&i.baseTime===e.baseTime&&i.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,i,n,s){this.audioCodec=i,this.videoCodec=n,this.generateInitSegment(e,s),this.emitInitSegment=!0}generateInitSegment(e,i){let{audioCodec:n,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:r,video:o}=this.initData=h9(e);if(i)YN(e,i);else{const l=r||o;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}r&&(n=Y8(r,li.AUDIO,this)),o&&(s=Y8(o,li.VIDEO,this));const a={};r&&o?a.audiovideo={container:"video/mp4",codec:n+","+s,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:r?a.audio={container:"audio/mp4",codec:n,encrypted:r.encrypted,initSegment:e,id:"audio"}:o?a.video={container:"video/mp4",codec:s,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,i,n,s,r,o){var a,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:s,id3:n,initSegment:void 0};Ze(c)||(c=this.lastEndTime=r||0);const f=i.samples;if(!f.length)return d;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const m=qN(f,p,this),g=p.audio?m[p.audio.id]:null,v=p.video?m[p.video.id]:null,b=Bh(v,1/0),_=Bh(g,1/0),y=Bh(v,0,!0),E=Bh(g,0,!0);let S=r,A=0;const C=g&&(!v||!u&&_<b||u&&u.trackId===p.audio.id),T=C?g:v;if(T){const W=T.timescale,te=T.start-r*W,re=C?p.audio.id:p.video.id;S=T.start/W,A=C?E-_:y-b,(o||!u)&&(lj(u,S,r,A)||W!==u.timescale)&&(u&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${r} ${te/W} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${S-r} (${te}/${W}) trackId: ${re}`),u=null,h.initPTS=te,h.timescale=W,h.trackId=re)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${r}`);u?(h.initPTS=u.baseTime,h.timescale=u.timescale,h.trackId=u.trackId):((!h.timescale||h.trackId===void 0||h.initPTS===void 0)&&(this.warn("Could not set initPTS"),h.initPTS=S,h.timescale=1,h.trackId=-1),this.initPTS=u={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const I=S-u.baseTime/u.timescale,D=I+A;A>0?this.lastEndTime=D:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const R=!!p.audio,O=!!p.video;let M="";R&&(M+="audio"),O&&(M+="video");const U=(p.audio?p.audio.encrypted:!1)||(p.video?p.video.encrypted:!1),$={data1:f,startPTS:I,startDTS:I,endPTS:D,endDTS:D,type:M,hasAudio:R,hasVideo:O,nb:1,dropped:0,encrypted:U};d.audio=R&&!O?$:void 0,d.video=O?$:void 0;const B=v?.sampleCount;if(B){const W=v.keyFrameIndex,te=W!==-1;$.nb=B,$.dropped=W===0||this.isVideoContiguous?0:te?W:B,$.independent=te,$.firstKeyFrame=W,te&&v.keyFrameStart&&($.firstKeyFramePTS=(v.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(d.independent=te),this.isVideoContiguous||(this.isVideoContiguous=te),$.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${W}/${B} dropped: ${$.dropped} start: ${$.firstKeyFramePTS||"NA"}`)}return d.initSegment=h,d.id3=W8(n,r,u,u),s.samples.length&&(d.text=K8(s,r,u)),d}}function Bh(t,e,i=!1){return t?.start!==void 0?(t.start+(i?t.duration:0))/t.timescale:e}function lj(t,e,i,n){if(t===null)return!0;const s=Math.max(n,1),r=e-t.baseTime/t.timescale;return Math.abs(r-i)>s}function Y8(t,e,i){const n=t.codec;return n&&n.length>4?n:e===li.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?bh(n,!1):(i.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(i.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let vo;try{vo=self.performance.now.bind(self.performance)}catch{vo=Date.now}const Nh=[{demux:KV,remux:aj},{demux:ta,remux:Fh},{demux:HV,remux:Fh},{demux:GV,remux:Fh}];Nh.splice(2,0,{demux:zV,remux:Fh});class X8{constructor(e,i,n,s,r,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=i,this.config=n,this.id=r,this.logger=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,i,n,s){const r=n.transmuxing;r.executeStart=vo();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:u,discontinuity:c,trackSwitch:d,accurateTimeOffset:f,timeOffset:h,initSegmentChange:p}=s||a,{audioCodec:m,videoCodec:g,defaultInitPts:v,duration:b,initSegmentData:_}=l,y=uj(o,i);if(y&&Yl(y.method)){const C=this.getDecrypter(),T=og(y.method);if(C.isSync()){let I=C.softwareDecrypt(o,y.key.buffer,y.iv.buffer,T);if(n.part>-1){const R=C.flush();I=R&&R.buffer}if(!I)return r.executeEnd=vo(),Cg(n);o=new Uint8Array(I)}else return this.asyncResult=!0,this.decryptionPromise=C.webCryptoDecrypt(o,y.key.buffer,y.iv.buffer,T).then(I=>{const D=this.push(I,null,n);return this.decryptionPromise=null,D}),this.decryptionPromise}const E=this.needsProbing(c,d);if(E){const C=this.configureTransmuxer(o);if(C)return this.logger.warn(`[transmuxer] ${C.message}`),this.observer.emit(V.ERROR,V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),r.executeEnd=vo(),Cg(n)}(c||d||p||E)&&this.resetInitSegment(_,m,g,b,i),(c||p||E)&&this.resetInitialTimestamp(v),u||this.resetContiguity();const S=this.transmux(o,y,h,f,n);this.asyncResult=Nc(S);const A=this.currentTransmuxState;return A.contiguous=!0,A.discontinuity=!1,A.trackSwitch=!1,r.executeEnd=vo(),S}flush(e){const i=e.transmuxing;i.executeStart=vo();const{decrypter:n,currentTransmuxState:s,decryptionPromise:r}=this;if(r)return this.asyncResult=!0,r.then(()=>this.flush(e));const o=[],{timeOffset:a}=s;if(n){const d=n.flush();d&&o.push(this.push(d.buffer,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u){i.executeEnd=vo();const d=[Cg(e)];return this.asyncResult?Promise.resolve(d):d}const c=l.flush(a);return Nc(c)?(this.asyncResult=!0,c.then(d=>(this.flushRemux(o,d,e),o))):(this.flushRemux(o,c,e),this.asyncResult?Promise.resolve(o):o)}flushRemux(e,i,n){const{audioTrack:s,videoTrack:r,id3Track:o,textTrack:a}=i,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===it.MAIN?"level":"track"} ${n.level}`);const c=this.remuxer.remux(s,r,o,a,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=vo()}resetInitialTimestamp(e){const{demuxer:i,remuxer:n}=this;!i||!n||(i.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:i}=this;!e||!i||(e.resetContiguity(),i.resetNextTimestamp())}resetInitSegment(e,i,n,s,r){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,i,n,s),a.resetInitSegment(e,i,n,r))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,i,n,s,r){let o;return i&&i.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,i,n,s,r):o=this.transmuxUnencrypted(e,n,s,r),o}transmuxUnencrypted(e,i,n,s){const{audioTrack:r,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,i,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(r,o,a,l,i,n,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,i,n,s,r){return this.demuxer.demuxSampleAes(e,i,n).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,n,s,!1,this.id),chunkMeta:r}))}configureTransmuxer(e){const{config:i,observer:n,typeSupported:s}=this;let r;for(let d=0,f=Nh.length;d<f;d++){var o;if((o=Nh[d].demux)!=null&&o.probe(e,this.logger)){r=Nh[d];break}}if(!r)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,l=this.remuxer,u=r.remux,c=r.demux;(!l||!(l instanceof u))&&(this.remuxer=new u(n,i,s,this.logger)),(!a||!(a instanceof c))&&(this.demuxer=new c(n,i,s,this.logger),this.probe=c.probe)}needsProbing(e,i){return!this.demuxer||!this.remuxer||e||i}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new ng(this.config)),e}}function uj(t,e){let i=null;return t.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(i=e),i}const Cg=t=>({remuxResult:{},chunkMeta:t});function Nc(t){return"then"in t&&t.then instanceof Function}class cj{constructor(e,i,n,s,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=i,this.initSegmentData=n,this.duration=s,this.defaultInitPts=r||null}}class dj{constructor(e,i,n,s,r,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=i,this.accurateTimeOffset=n,this.trackSwitch=s,this.timeOffset=r,this.initSegmentChange=o}}let q8=0;class Z8{constructor(e,i,n,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=q8++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const u=l.data,c=this.hls;if(!(!c||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var d;const f=(d=this.workerContext)==null?void 0:d.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{c.logger[u.data.logType]&&c.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,c.trigger(u.event,u.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const u=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const r=e.config;this.hls=e,this.id=i,this.useWorker=!!r.enableWorker,this.onTransmuxComplete=n,this.onFlush=s;const o=(l,u)=>{u=u||{},u.frag=this.frag||void 0,l===V.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(l,u)};this.observer=new gg,this.observer.on(V.FRAG_DECRYPTED,o),this.observer.on(V.ERROR,o);const a=w9(r.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(r.workerPath||mV()){try{r.workerPath?(l.log(`loading Web Worker ${r.workerPath} for "${i}"`),this.workerContext=vV(r.workerPath)):(l.log(`injecting Web Worker for "${i}"`),this.workerContext=gV());const{worker:c}=this.workerContext;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:i,config:ui(r)})}catch(c){l.warn(`Error setting up "${i}" Web Worker, fallback to inline`,c),this.terminateWorker(),this.error=null,this.transmuxer=new X8(this.observer,a,r,"",i,e.logger)}return}}this.transmuxer=new X8(this.observer,a,r,"",i,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=q8++;const i=this.hls.config,n=w9(i.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:ui(i)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),_V(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const i=this.transmuxer;i&&(i.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,i,n,s,r,o,a,l,u,c){var d,f;u.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:p}=this,m=o?o.start:r.start,g=r.decryptdata,v=this.frag,b=!(v&&r.cc===v.cc),_=!(v&&u.level===v.level),y=v?u.sn-v.sn:-1,E=this.part?u.part-this.part.index:-1,S=y===0&&u.id>1&&u.id===v?.stats.chunkCount,A=!_&&(y===1||y===0&&(E===1||S&&E<=0)),C=self.performance.now();(_||y||r.stats.parsing.start===0)&&(r.stats.parsing.start=C),o&&(E||!A)&&(o.stats.parsing.start=C);const T=!(v&&((d=r.initSegment)==null?void 0:d.url)===((f=v.initSegment)==null?void 0:f.url)),I=new dj(b,A,l,_,m,T);if(!A||b||T){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${r.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===it.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${b}
        trackSwitch: ${_}
        contiguous: ${A}
        accurateTimeOffset: ${l}
        timeOffset: ${m}
        initSegmentChange: ${T}`);const D=new cj(n,s,i,a,c);this.configureTransmuxer(D)}if(this.frag=r,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:g,chunkMeta:u,state:I},e instanceof ArrayBuffer?[e]:[]);else if(p){const D=p.push(e,g,u,I);Nc(D)?D.then(R=>{this.handleTransmuxComplete(R)}).catch(R=>{this.transmuxerError(R,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(D)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:i,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:i,cmd:"flush",chunkMeta:e});else if(n){const s=n.flush(e);Nc(s)?s.then(r=>{this.handleFlushResult(r,e)}).catch(r=>{this.transmuxerError(r,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,i,n){this.hls&&(this.error=e,this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_PARSING_ERROR,chunkMeta:i,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,i){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(i)}configureTransmuxer(e){const{instanceNo:i,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:i,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Q8=100;class fj extends pg{constructor(e,i,n){super(e,i,n,"audio-stream-controller",it.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(V.BUFFER_RESET,this.onBufferReset,this),e.on(V.BUFFER_CREATED,this.onBufferCreated,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(V.FRAG_LOADING,this.onFragLoading,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(V.BUFFER_RESET,this.onBufferReset,this),e.off(V.BUFFER_CREATED,this.onBufferCreated,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(V.FRAG_LOADING,this.onFragLoading,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:i,id:n,initPTS:s,timescale:r,trackId:o}){if(n===it.MAIN){const a=i.cc,l=this.fragCurrent;if(this.initPTS[a]={baseTime:s,timescale:r,trackId:o},this.log(`InitPTS for cc: ${a} found from main: ${s/r} (${s}/${r}) trackId: ${o}`),this.mainAnchor=i,this.state===$e.WAITING_INIT_PTS){const u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==a)&&this.syncWithAnchor(i,u?.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==a?(l.abortRequests(),this.syncWithAnchor(i,l)):this.state===$e.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,i){var n;const s=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(i&&s?.cc===i.cc)return;const r=(s||e).cc,o=this.getLevelDetails(),a=this.getLoadPosition(),l=O9(o,r,a);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===$e.IDLE&&this.doTickIdle())}startLoad(e,i){if(!this.levels){this.startPosition=e,this.state=$e.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Q8),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=$e.IDLE):this.state=$e.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=i?-1:e,this.tick()}doTick(){switch(this.state){case $e.IDLE:this.doTickIdle();break;case $e.WAITING_TRACK:{const{levels:e,trackId:i}=this,n=e?.[i],s=n?.details;if(s&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(s))break;this.state=$e.WAITING_INIT_PTS}break}case $e.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case $e.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:i,part:n,cache:s,complete:r}=e,o=this.mainAnchor;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.state=$e.FRAG_LOADING;const a=s.flush().buffer,l={frag:i,part:n,payload:a,networkDetails:null};this._handleFragmentLoadProgress(l),r&&super._handleFragmentLoadComplete(l)}else o&&o.cc!==e.frag.cc&&this.syncWithAnchor(o,e.frag)}else this.state=$e.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:i,levels:n,media:s,trackId:r}=this,o=i.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(n!=null&&n[r]))return;const a=n[r],l=a.details;if(!l||this.waitForLive(a)||this.waitForCdnTuneIn(l)){this.state=$e.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,li.AUDIO,it.AUDIO));const c=this.getFwdBufferInfo(u,it.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,l)){i.trigger(V.BUFFER_EOS,{type:"audio"}),this.state=$e.ENDED;return}const d=c.len,f=i.maxBufferLength,h=l.fragments,p=h[0].start,m=this.getLoadPosition(),g=this.flushing?m:c.end;if(this.switchingTrack&&s){const _=m;l.PTSKnown&&_<p&&(c.end>p||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=p+.05)}if(d>=f&&!this.switchingTrack&&g<h[h.length-1].start)return;let v=this.getNextFragment(g,l);if(v&&this.isLoopLoading(v,g)&&(v=this.getNextFragmentLoopLoading(v,l,c,it.MAIN,f)),!v){this.bufferFlushed=!0;return}let b=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&b&&Hi(v)&&!v.endList&&(!l.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(b)===Zi.OK&&(this.mainFragLoading=b=null),b&&Hi(b))){if(v.start>b.end){const y=this.fragmentTracker.getFragAtPos(g,it.MAIN);y&&y.end>b.end&&(b=y,this.mainFragLoading={frag:y,targetBufferTime:null})}if(v.start>b.end)return}this.loadFragment(v,a,g)}onMediaDetaching(e,i){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,i)}onAudioTracksUpdated(e,{audioTracks:i}){this.resetTransmuxer(),this.levels=i.map(n=>new Pc(n))}onAudioTrackSwitching(e,i){const n=!!i.url;this.trackId=i.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),n?(this.switchingTrack=i,this.flushAudioIfNeeded(i),this.state!==$e.STOPPED&&(this.setInterval(Q8),this.state=$e.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=i,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,i){this.mainDetails=i.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(V.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,i){var n;const{levels:s}=this,{details:r,id:o,groupId:a,track:l}=i;if(!s){this.warn(`Audio tracks reset while loading track ${o} "${l.name}" of "${a}"`);return}const u=this.mainDetails;if(!u||r.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=i,this.state!==$e.STOPPED&&(this.state=$e.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${l.name}" of "${a}" loaded [${r.startSN},${r.endSN}]${r.lastPartSn?`[part-${r.lastPartSn}-${r.lastPartIndex}]`:""},duration:${r.totalduration}`);const c=s[o];let d=0;if(r.live||(n=c.details)!=null&&n.live){if(this.checkLiveUpdate(r),r.deltaUpdateFailed)return;if(c.details){var f;d=this.alignPlaylists(r,c.details,(f=this.levelLastLoaded)==null?void 0:f.details)}r.alignedSliding||(S8(r,u),r.alignedSliding||Ph(r,u),d=r.fragmentStart)}c.details=r,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(u,d),this.hls.trigger(V.AUDIO_TRACK_UPDATED,{details:r,id:o,groupId:i.groupId}),this.state===$e.WAITING_TRACK&&!this.waitForCdnTuneIn(r)&&(this.state=$e.IDLE),this.tick()}_handleFragmentLoadProgress(e){var i;const n=e.frag,{part:s,payload:r}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const u=l[a];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=o.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new Z8(this.hls,it.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],p=(i=n.initSegment)==null?void 0:i.data;if(h!==void 0){const g=s?s.index:-1,v=g!==-1,b=new sg(n.level,n.sn,n.stats.chunkCount,r.byteLength,g,v);f.push(r,p,d,"",n,s,c.totalduration,!1,b,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:m}=this.waitingData=this.waitingData||{frag:n,part:s,cache:new T8,complete:!1};m.push(new Uint8Array(r)),this.state!==$e.STOPPED&&(this.state=$e.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,i){this.bufferFlushed=this.flushing=!1;const n=i.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,i){!this.audioOnly&&i.frag.type===it.MAIN&&Hi(i.frag)&&(this.mainFragLoading=i,this.state===$e.IDLE&&this.tick())}onFragBuffered(e,i){const{frag:n,part:s}=i;if(n.type!==it.AUDIO){!this.audioOnly&&n.type===it.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Hi(n)){this.fragPrevious=n;const r=this.switchingTrack;r&&(this.bufferedTrack=r,this.switchingTrack=null,this.hls.trigger(V.AUDIO_TRACK_SWITCHED,ei({},r)))}this.fragBufferedComplete(n,s),this.media&&this.tick()}onError(e,i){var n;if(i.fatal){this.state=$e.ERROR;return}switch(i.details){case Le.FRAG_GAP:case Le.FRAG_PARSING_ERROR:case Le.FRAG_DECRYPT_ERROR:case Le.FRAG_LOAD_ERROR:case Le.FRAG_LOAD_TIMEOUT:case Le.KEY_LOAD_ERROR:case Le.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(it.AUDIO,i);break;case Le.AUDIO_TRACK_LOAD_ERROR:case Le.AUDIO_TRACK_LOAD_TIMEOUT:case Le.LEVEL_PARSING_ERROR:!i.levelRetry&&this.state===$e.WAITING_TRACK&&((n=i.context)==null?void 0:n.type)===Rt.AUDIO_TRACK&&(this.state=$e.IDLE);break;case Le.BUFFER_ADD_CODEC_ERROR:case Le.BUFFER_APPEND_ERROR:if(i.parent!=="audio")return;this.reduceLengthAndFlushBuffer(i)||this.resetLoadingState();break;case Le.BUFFER_FULL_ERROR:if(i.parent!=="audio")return;this.reduceLengthAndFlushBuffer(i)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Le.INTERNAL_EXCEPTION:this.recoverWorkerError(i);break}}onBufferFlushing(e,{type:i}){i!==li.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:i}){if(i!==li.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===$e.ENDED&&(this.state=$e.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,i,it.AUDIO),this.tick())}}_handleTransmuxComplete(e){var i;const n="audio",{hls:s}=this,{remuxResult:r,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:u,level:c}=a,{details:d}=c,{audio:f,text:h,id3:p,initSegment:m}=r;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=$e.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const g=l.initSegment||l;if(this.unhandledEncryptionError(m,l))return;this._bufferInitSegment(c,m.tracks,g,o),s.trigger(V.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:n,tracks:m.tracks})}if(f){const{startPTS:g,endPTS:v,startDTS:b,endDTS:_}=f;u&&(u.elementaryStreams[li.AUDIO]={startPTS:g,endPTS:v,startDTS:b,endDTS:_}),l.setElementaryStreamInfo(li.AUDIO,g,v,b,_),this.bufferFragmentData(f,l,u,o)}if(p!=null&&(i=p.samples)!=null&&i.length){const g=si({id:n,frag:l,details:d},p);s.trigger(V.FRAG_PARSING_METADATA,g)}if(h){const g=si({id:n,frag:l,details:d},h);s.trigger(V.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,i,n,s){if(this.state!==$e.PARSING||(i.video&&delete i.video,i.audiovideo&&delete i.audiovideo,!i.audio))return;const r=i.audio;r.id=it.AUDIO;const o=e.audioCodec;this.log(`Init audio buffer, container:${r.container}, codecs[level/parsed]=[${o}/${r.codec}]`),o&&o.split(",").length===1&&(r.levelCodec=o),this.hls.trigger(V.BUFFER_CODECS,i);const a=r.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:s,parent:n.type,data:a};this.hls.trigger(V.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,i,n){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===Zi.NOT_LOADED||s===Zi.PARTIAL){var r;if(!Hi(e))this._loadInitSegment(e,i);else if((r=i.details)!=null&&r.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=$e.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragmentStart!==i.details.fragmentStart&&Ph(i.details,o)}else super.loadFragment(e,i,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:i,lang:n,assocLang:s,characteristics:r,audioCodec:o,channels:a}=this.bufferedTrack;za({name:i,lang:n,assocLang:s,characteristics:r,audioCodec:o,channels:a},e,Ga)||(Sh(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:i}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,i.trigger(V.AUDIO_TRACK_SWITCHED,ei({},e))}}class Lg extends Us{constructor(e,i){super(i,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,i,n){const s=i?.renditionReports;if(s){let r=-1;for(let o=0;o<s.length;o++){const a=s[o];let l;try{l=new self.URL(a.URI,i.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),l=a.URI||""}if(l===e){r=o;break}else l===e.substring(0,l.length)&&(r=o)}if(r!==-1){const o=s[r],a=parseInt(o["LAST-MSN"])||i.lastPartSn;let l=parseInt(o["LAST-PART"])||i.lastPartIndex;if(this.hls.config.lowLatencyMode){const c=Math.min(i.age-i.partTarget,i.targetduration);l>=0&&c>i.partTarget&&(l+=1)}const u=n&&A9(n);return new k9(a,l>=0?l:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,i){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,i){if(i)try{return i.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,i,n){const{details:s,stats:r}=i,o=self.performance.now(),a=r.loading.first?Math.max(0,o-r.loading.first):0;s.advancedDateTime=Date.now()-a;const l=this.hls.config.timelineOffset;if(l!==s.appliedTimelineOffset){const c=Math.max(l||0,0);s.appliedTimelineOffset=c,s.fragments.forEach(d=>{d.setStart(d.playlistOffset+c)})}if(s.live||n!=null&&n.live){const c="levelInfo"in i?i.levelInfo:i.track;if(s.reloaded(n),n&&s.fragments.length>0){sV(n,s,this);const b=s.playlistParsingError;if(b){this.warn(b);const _=this.hls;if(!_.config.ignorePlaylistParsingErrors){var u;const{networkDetails:y}=i;_.trigger(V.ERROR,{type:at.NETWORK_ERROR,details:Le.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:b,reason:b.message,level:i.level||void 0,parent:(u=s.fragments[0])==null?void 0:u.type,networkDetails:y,stats:r});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=r.loading.start);const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,h=(s.edge-f)*1e3,p=m8(s,h);if(s.requestScheduled+p<o?s.requestScheduled=o:s.requestScheduled+=p,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let m,g,v;if(s.canBlockReload&&s.endSN&&s.advanced){const b=this.hls.config.lowLatencyMode,_=s.lastPartSn,y=s.endSN,E=s.lastPartIndex,S=E!==-1,A=_===y;S?A?(g=y+1,v=b?0:E):(g=_,v=b?E+1:s.maxPartIndex):g=y+1;const C=s.age,T=C+s.ageHeader;let I=Math.min(T-s.partTarget,s.targetduration*1.5);if(I>0){if(T>s.targetduration*3)this.log(`Playlist last advanced ${C.toFixed(2)}s ago. Omitting segment and part directives.`),g=void 0,v=void 0;else if(n!=null&&n.tuneInGoal&&T-s.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${I} with playlist age: ${s.age}`),I=0;else{const D=Math.floor(I/s.targetduration);if(g+=D,v!==void 0){const R=Math.round(I%s.targetduration/s.partTarget);v+=R}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${C.toFixed(2)}s goal: ${I} skip sn ${D} to part ${v}`)}s.tuneInGoal=I}if(m=this.getDeliveryDirectives(s,i.deliveryDirectives,g,v),b||!A){s.requestScheduled=o,this.loadingPlaylist(c,m);return}}else(s.canBlockReload||s.canSkipUntil)&&(m=this.getDeliveryDirectives(s,i.deliveryDirectives,g,v));m&&g!==void 0&&s.canBlockReload&&(s.requestScheduled=r.loading.first+Math.max(p-a*2,p/2)),this.scheduleLoading(c,m,s)}else this.clearTimer()}scheduleLoading(e,i,n){const s=n||e.details;if(!s){this.loadingPlaylist(e,i);return}const r=self.performance.now(),o=s.requestScheduled;if(r>=o){this.loadingPlaylist(e,i);return}const a=o-r;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,i),a)}getDeliveryDirectives(e,i,n,s){let r=A9(e);return i!=null&&i.skip&&e.deltaUpdateFailed&&(n=i.msn,s=i.part,r=Eh.No),new k9(n,s,r)}checkRetry(e){const i=e.details,n=xh(e),s=e.errorAction,{action:r,retryCount:o=0,retryConfig:a}=s||{},l=!!s&&!!a&&(r===hn.RetryRequest||!s.resolved&&r===hn.SendAlternateToPenaltyBox);if(l){var u;if(o>=a.maxNumRetry)return!1;if(n&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${i}" without delivery-directives`),this.loadPlaylist();else{const c=tg(a,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${i}" in ${c}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}function J8(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Uc(t[i].attrs,e[i].attrs))return!1;return!0}function Uc(t,e,i){const n=t["STABLE-RENDITION-ID"];return n&&!i?n===e["STABLE-RENDITION-ID"]:!(i||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>t[s]!==e[s])}function Ig(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class hj extends Lg{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVEL_LOADING,this.onLevelLoading,this),e.off(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(V.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(V.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,i){this.tracks=i.audioTracks||[]}onAudioTrackLoaded(e,i){const{id:n,groupId:s,details:r}=i,o=this.tracksInGroup[n];if(!o||o.groupId!==s){this.warn(`Audio track with id:${n} and group:${s} not found in active group ${o?.groupId}`);return}const a=o.details;o.details=i.details,this.log(`Audio track ${n} "${o.name}" lang:${o.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,i,a)}onLevelLoading(e,i){this.switchLevel(i.level)}onLevelSwitching(e,i){this.switchLevel(i.level)}switchLevel(e){const i=this.hls.levels[e];if(!i)return;const n=i.audioGroups||null,s=this.groupIds;let r=this.currentTrack;if(!n||s?.length!==n?.length||n!=null&&n.some(a=>s?.indexOf(a)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!n||n.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,h)=>{f.id=h});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!r&&l){const f=Or(l,a,Ga);if(f>-1)r=a[f];else{const h=Or(l,this.tracks);r=this.tracks[h]}}let u=this.findTrackId(r);u===-1&&r&&(u=this.findTrackId(null));const c={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(V.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(u!==-1&&d===-1)this.setAudioTrack(u);else if(a.length&&d===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,i){i.fatal||!i.context||i.context.type===Rt.AUDIO_TRACK&&i.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(i.context.groupId)!==-1)&&this.checkRetry(i)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const i=this.hls;if(i.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const s=this.currentTrack;if(s&&za(e,s,Ga))return s;const r=Or(e,this.tracksInGroup,Ga);if(r>-1){const o=this.tracksInGroup[r];return this.setAudioTrack(r),o}else if(s){let o=i.loadLevel;o===-1&&(o=i.firstAutoLevel);const a=TU(e,i.levels,n,o,Ga);if(a===-1)return null;i.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=Or(e,n);if(o>-1)return n[o]}}}return null}setAudioTrack(e){const i=this.tracksInGroup;if(e<0||e>=i.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,s=i[e],r=s.details&&!s.details.live;if(e===this.trackId&&s===n&&r||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(V.AUDIO_TRACK_SWITCHING,ei({},s)),r))return;const o=this.switchParams(s.url,n?.details,s.details);this.loadPlaylist(o)}findTrackId(e){const i=this.tracksInGroup;for(let n=0;n<i.length;n++){const s=i[n];if(!(this.selectDefaultTrack&&!s.default)&&(!e||za(e,s,Ga)))return n}if(e){const{name:n,lang:s,assocLang:r,characteristics:o,audioCodec:a,channels:l}=e;for(let u=0;u<i.length;u++){const c=i[u];if(za({name:n,lang:s,assocLang:r,characteristics:o,audioCodec:a,channels:l},c,Ga))return u}for(let u=0;u<i.length;u++){const c=i[u];if(Uc(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<i.length;u++){const c=i[u];if(Uc(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const i=this.currentTrack;this.shouldLoadPlaylist(i)&&Sh(i.url,this.hls)&&this.scheduleLoading(i,e)}loadingPlaylist(e,i){super.loadingPlaylist(e,i);const n=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,i),o=e.details,a=o?.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${s}${i?.msn!==void 0?" at sn "+i.msn+" part "+i.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${r}`),this.hls.trigger(V.AUDIO_TRACK_LOADING,{url:r,id:n,groupId:s,deliveryDirectives:i||null,track:e})}}class pj{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,i,n){if(this.queues===null||this.tracks===null)return;const s=this.queues[i];s.push(e),s.length===1&&!n&&this.executeNext(i)}appendBlocker(e){return new Promise(i=>{const n={label:"async-blocker",execute:i,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(i=>{if(this.queues){const n={label:"async-blocker-prepend",execute:i,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var i;const n=(i=e[0])==null?void 0:i.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const i=this.queues[e];if(i.length){const s=i[0];try{s.execute()}catch(r){var n;if(s.onError(r),this.queues===null||this.tracks===null)return;const o=(n=this.tracks[e])==null?void 0:n.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var i;return((i=this.queues)==null?void 0:i[e][0])||null}toString(){const{queues:e,tracks:i}=this;return e===null||i===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var i,n;return(i=this.queues)!=null&&i[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var i;const n=(i=this.tracks)==null?void 0:i[e],s=n?.buffer;return s?`SourceBuffer${s.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var i;return((i=this.queues)==null?void 0:i[e].map(n=>n.label).join(", "))||""}}const e6=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,t6="HlsJsTrackRemovedError";class mj extends Error{constructor(e){super(e),this.name=t6}}class gj extends Us{constructor(e,i){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:s,mediaSource:r}=this;n&&this.log("Media source opened"),!(!s||!r)&&(r.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(V.MEDIA_ATTACHED,{media:s,mediaSource:r}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:s}=this;n!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${n})`)},this.hls=e,this.fragmentTracker=i,this.appendSource=BN(Jo(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.BUFFER_RESET,this.onBufferReset,this),e.on(V.BUFFER_APPENDING,this.onBufferAppending,this),e.on(V.BUFFER_CODECS,this.onBufferCodecs,this),e.on(V.BUFFER_EOS,this.onBufferEos,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.FRAG_PARSED,this.onFragParsed,this),e.on(V.FRAG_CHANGED,this.onFragChanged,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.BUFFER_RESET,this.onBufferReset,this),e.off(V.BUFFER_APPENDING,this.onBufferAppending,this),e.off(V.BUFFER_CODECS,this.onBufferCodecs,this),e.off(V.BUFFER_EOS,this.onBufferEos,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.FRAG_PARSED,this.onFragParsed,this),e.off(V.FRAG_CHANGED,this.onFragChanged,this),e.off(V.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:i}=this;if(!e)return null;const n={};if(this.operationQueue){const r=this.isUpdating();r||this.operationQueue.removeBlockers();const o=this.isQueued();(r||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${r?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===i?si(n,s.tracks):this.sourceBuffers.forEach(r=>{const[o]=r;o&&(n[o]=si({},this.tracks[o]),this.removeBuffer(o)),r[0]=r[1]=null}),{media:e,mediaSource:i,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,i){var n;let s=2;(i.audio&&!i.video||!i.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,i){const n=this.media=i.media;this.transferData=this.overrides=void 0;const s=Jo(this.appendSource);if(s){const r=!!i.mediaSource;(r||i.overrides)&&(this.transferData=i,this.overrides=i.overrides);const o=this.mediaSource=i.mediaSource||new s;if(this.assignMediaSource(o),r)this._objectUrl=n.src,this.attachTransferred();else{const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&o instanceof l,i6(n),vj(n,a),n.load()}catch{n.src=a}else n.src=a}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var i,n;this.log(`${((i=this.transferData)==null?void 0:i.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,i=this.transferData;if(!i||!e)return;const n=this.tracks,s=i.tracks,r=s?Object.keys(s):null,o=r?r.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(s&&r&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${ui(n,(l,u)=>l==="initSegment"?void 0:u)};
transfer tracks: ${ui(s,(l,u)=>l==="initSegment"?void 0:u)}}`),!n9(s,n)){i.mediaSource=null,i.tracks=void 0;const l=e.currentTime,u=this.details,c=Math.max(l,u?.fragments[0].start||0);if(c-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${c}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(n)}") start time: ${c} currentTime: ${l}`),this.onMediaDetaching(V.MEDIA_DETACHING,{}),this.onMediaAttaching(V.MEDIA_ATTACHING,i),e.currentTime=c;return}this.transferData=void 0,r.forEach(l=>{const u=l,c=s[u];if(c){const d=c.buffer;if(d){const f=this.fragmentTracker,h=c.id;if(f.hasFragments(h)||f.hasParts(h)){const g=bt.getBuffered(d);f.detectEvictedFragments(u,g,h,null,!0)}const p=Rg(u),m=[u,d];this.sourceBuffers[p]=m,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,c)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const i=(e=this.mediaSource)==null?void 0:e.readyState;return i==="open"||i==="ended"}onMediaDetaching(e,i){const n=!!i.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:r,_objectUrl:o}=this;if(r){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([a])=>{a&&this.removeBuffer(a)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const a=r.readyState==="open";try{const l=r.sourceBuffers;for(let u=l.length;u--;)a&&l[u].abort(),r.removeSourceBuffer(l[u]);a&&r.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}r.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("sourceended",this._onMediaSourceEnded),r.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(r.removeEventListener("startstreaming",this._onStartStreaming),r.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),n||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(s.removeAttribute("src"),this.appendSource&&i6(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(V.MEDIA_DETACHED,i)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var i;const n=(i=this.tracks[e])==null?void 0:i.buffer;if(this.removeBuffer(e),n)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(r){this.warn(`onBufferReset ${e}`,r)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Rg(e)]=[null,null];const i=this.tracks[e];i&&(i.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new pj(this.tracks)}onBufferCodecs(e,i){var n;const s=this.tracks,r=Object.keys(i);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in i&&(s.audio||s.video)||s.audiovideo&&("audio"in i||"video"in i),a=!o&&this.sourceBufferCount&&this.media&&r.some(l=>!s[l]);if(o||a){this.warn(`Unsupported transition between "${Object.keys(s)}" and "${r}" SourceBuffers`);return}r.forEach(l=>{var u,c;const d=i[l],{id:f,codec:h,levelCodec:p,container:m,metadata:g,supplemental:v}=d;let b=s[l];const _=(u=this.transferData)==null||(u=u.tracks)==null?void 0:u[l],y=_!=null&&_.buffer?_:b,E=y?.pendingCodec||y?.codec,S=y?.levelCodec;b||(b=s[l]={buffer:void 0,listeners:[],codec:h,supplemental:v,container:m,levelCodec:p,metadata:g,id:f});const A=yh(E,S),C=A?.replace(e6,"$1");let T=yh(h,p);const I=(c=T)==null?void 0:c.replace(e6,"$1");T&&A&&C!==I&&(l.slice(0,5)==="audio"&&(T=bh(T,this.appendSource)),this.log(`switching codec ${E} to ${T}`),T!==(b.pendingCodec||b.codec)&&(b.pendingCodec=T),b.container=m,this.appendChangeType(l,m,T))}),(this.tracksReady||this.sourceBufferCount)&&(i.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!i.video&&((n=i.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,i)=>{const n=this.tracks[i];return e[i]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,i,n){const s=`${i};codecs=${n}`,r={label:`change-type=${s}`,execute:()=>{const o=this.tracks[e];if(o){const a=o.buffer;a!=null&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),a.changeType(s),o.codec=n,o.container=i)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};this.append(r,e,this.isPending(this.tracks[e]))}blockAudio(e){var i;const n=e.start,s=n+e.duration*.05;if(((i=this.fragmentTracker.getAppendedFrag(n,it.MAIN))==null?void 0:i.gap)===!0)return;const o={label:"block-audio",execute:()=>{var a;const l=this.tracks.video;(this.lastVideoAppendEnd>s||l!=null&&l.buffer&&bt.isBuffered(l.buffer,s)||((a=this.fragmentTracker.getAppendedFrag(s,it.MAIN))==null?void 0:a.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn("Error executing block-audio operation",a)}};this.blockedAudioAppend={op:o,frag:e},this.append(o,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:i}=this;e&&i&&(this.blockedAudioAppend=null,i.unblockAudio(e.op))}onBufferAppending(e,i){const{tracks:n}=this,{data:s,type:r,parent:o,frag:a,part:l,chunkMeta:u,offset:c}=i,d=u.buffering[r],{sn:f,cc:h}=a,p=self.performance.now();d.start=p;const m=a.stats.buffering,g=l?l.stats.buffering:null;m.start===0&&(m.start=p),g&&g.start===0&&(g.start=p);const v=n.audio;let b=!1;r==="audio"&&v?.container==="audio/mpeg"&&(b=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const _=n.video,y=_?.buffer;if(y&&f!=="initSegment"){const A=l||a,C=this.blockedAudioAppend;if(r==="audio"&&o!=="main"&&!this.blockedAudioAppend&&!(_.ending||_.ended)){const I=A.start+A.duration*.05,D=y.buffered,R=this.currentOp("video");!D.length&&!R?this.blockAudio(A):!R&&!bt.isBuffered(y,I)&&this.lastVideoAppendEnd<I&&this.blockAudio(A)}else if(r==="video"){const T=A.end;if(C){const I=C.frag.start;(T>I||T<this.lastVideoAppendEnd||bt.isBuffered(y,I))&&this.unblockAudio()}this.lastVideoAppendEnd=T}}const E=(l||a).start,S={label:`append-${r}`,execute:()=>{var A;d.executeStart=self.performance.now();const C=(A=this.tracks[r])==null?void 0:A.buffer;C&&(b?this.updateTimestampOffset(C,E,.1,r,f,h):c!==void 0&&Ze(c)&&this.updateTimestampOffset(C,c,1e-6,r,f,h)),this.appendExecutor(s,r)},onStart:()=>{},onComplete:()=>{const A=self.performance.now();d.executeEnd=d.end=A,m.first===0&&(m.first=A),g&&g.first===0&&(g.first=A);const C={};this.sourceBuffers.forEach(([T,I])=>{T&&(C[T]=bt.getBuffered(I))}),this.appendErrors[r]=0,r==="audio"||r==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(V.BUFFER_APPENDED,{type:r,frag:a,part:l,chunkMeta:u,parent:a.type,timeRanges:C})},onError:A=>{var C;const T={type:at.MEDIA_ERROR,parent:a.type,details:Le.BUFFER_APPEND_ERROR,sourceBufferName:r,frag:a,part:l,chunkMeta:u,error:A,err:A,fatal:!1},I=(C=this.media)==null?void 0:C.error;if(A.code===DOMException.QUOTA_EXCEEDED_ERR||A.name=="QuotaExceededError"||"quota"in A)T.details=Le.BUFFER_FULL_ERROR;else if(A.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!I)T.errorAction=Wl(!0);else if(A.name===t6&&this.sourceBufferCount===0)T.errorAction=Wl(!0);else{const D=++this.appendErrors[r];this.warn(`Failed ${D}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${r}" sourceBuffer (${I||"no media error"})`),(D>=this.hls.config.appendErrorMaxRetry||I)&&(T.fatal=!0)}this.hls.trigger(V.ERROR,T)}};this.log(`queuing "${r}" append sn: ${f}${l?" p: "+l.index:""} of ${a.type===it.MAIN?"level":"track"} ${a.level} cc: ${h}`),this.append(S,r,this.isPending(this.tracks[r]))}getFlushOp(e,i,n){return this.log(`queuing "${e}" remove ${i}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,i,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(V.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${i}-${n} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,i){const{type:n,startOffset:s,endOffset:r}=i;n?this.append(this.getFlushOp(n,s,r),n):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,s,r),o)})}onFragParsed(e,i){const{frag:n,part:s}=i,r=[],o=s?s.elementaryStreams:n.elementaryStreams;o[li.AUDIOVIDEO]?r.push("audiovideo"):(o[li.AUDIO]&&r.push("audio"),o[li.VIDEO]&&r.push("video"));const a=()=>{const l=self.performance.now();n.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const u=s?s.stats:n.stats;this.hls.trigger(V.FRAG_BUFFERED,{frag:n,part:s,stats:u,id:n.type})};r.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(a,r).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,i){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const i=this.tracks[e];if(i)return!i.ended||i.ending}return!1})}onBufferEos(e,i){var n;this.sourceBuffers.forEach(([o])=>{if(o){const a=this.tracks[o];(!i.type||i.type===o)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${o} buffer reached EOS`)))}});const s=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([o])=>{var a;return o&&!((a=this.tracks[o])!=null&&a.ended)})?s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:o}=this;if(!o||o.readyState!=="open"){o&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${o.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),o.endOfStream(),this.hls.trigger(V.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(V.BUFFERED_TO_END,void 0)):i.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const i=this.tracks[e];i&&(i.ending=!1)}})}onLevelUpdated(e,{details:i}){i.fragments.length&&(this.details=i,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,i){if(i.details===Le.BUFFER_APPEND_ERROR&&i.frag){var n;const s=(n=i.errorAction)==null?void 0:n.nextAutoLevel;Ze(s)&&s!==i.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:i,media:n}=this;if(!n||i===null||!this.sourceBufferCount)return;const s=e.config,r=n.currentTime,o=i.levelTargetDuration,a=i.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Ze(a)&&a>=0){const u=Math.max(a,o),c=Math.floor(r/o)*o-u;this.flushBackBuffer(r,o,c)}const l=s.frontBufferFlushThreshold;if(Ze(l)&&l>0){const u=Math.max(s.maxBufferLength,l),c=Math.max(u,o),d=Math.floor(r/o)*o+c;this.flushFrontBuffer(r,o,d)}}flushBackBuffer(e,i,n){this.sourceBuffers.forEach(([s,r])=>{if(r){const a=bt.getBuffered(r);if(a.length>0&&n>a.start(0)){var o;this.hls.trigger(V.BACK_BUFFER_REACHED,{bufferEnd:n});const l=this.tracks[s];if((o=this.details)!=null&&o.live)this.hls.trigger(V.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(V.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:s})}}})}flushFrontBuffer(e,i,n){this.sourceBuffers.forEach(([s,r])=>{if(r){const o=bt.getBuffered(r),a=o.length;if(a<2)return;const l=o.start(a-1),u=o.end(a-1);if(n>l||e>=l&&e<=u)return;this.hls.trigger(V.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:i,mediaSource:n}=this;if(!i||!this.media||n?.readyState!=="open")return null;const s=i.edge;if(i.live&&this.hls.config.liveDurationInfinity){if(i.fragments.length&&n.setLiveSeekableRange){const u=Math.max(0,i.fragmentStart),c=Math.max(u,s);return{duration:1/0,start:u,end:c}}return{duration:1/0}}const r=(e=this.overrides)==null?void 0:e.duration;if(r)return Ze(r)?{duration:r}:null;const o=this.media.duration,a=Ze(n.duration)?n.duration:0;return s>a&&s>o||!Ze(o)?{duration:s}:null}updateMediaSource({duration:e,start:i,end:n}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(Ze(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),i!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${i}-${n}.`),s.setLiveSeekableRange(i,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:i,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${i} codec events expected: ${e}) ${ui(n)}`),this.tracksReady){var s;const r=(s=this.transferData)==null?void 0:s.tracks;r&&Object.keys(r).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([i,n])=>{if(i){const s=this.tracks[i];e[i]={buffer:n,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(V.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([i])=>{this.executeNext(i)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:i,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const r in e){const o=r,a=e[o];if(this.isPending(a)){const l=this.getTrackCodec(a,o),u=`${a.container};codecs=${l}`;a.codec=l,this.log(`creating sourceBuffer(${u})${this.currentOp(o)?" Queued":""} ${ui(a)}`);try{const c=n.addSourceBuffer(u),d=Rg(o),f=[o,c];i[d]=f,a.buffer=c}catch(c){var s;this.error(`error while trying to add sourceBuffer: ${c.message}`),this.shiftAndExecuteNext(o),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[o],this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:o,mimeType:u,parent:a.id});return}this.trackSourceBuffer(o,a)}}this.bufferCreated()}getTrackCodec(e,i){const n=e.supplemental;let s=e.codec;n&&(i==="video"||i==="audiovideo")&&Ic(n,"video")&&(s=oU(s,n));const r=yh(s,e.levelCodec);return r?i.slice(0,5)==="audio"?bh(r,this.appendSource):r:""}trackSourceBuffer(e,i){const n=i.buffer;if(!n)return;const s=this.getTrackCodec(i,e);this.tracks[e]={buffer:n,codec:s,container:i.container,levelCodec:i.levelCodec,supplemental:i.supplemental,metadata:i.metadata,id:i.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(r,o)=>{const a=o.removedRanges;a!=null&&a.length&&this.hls.trigger(V.BUFFER_FLUSHED,{type:r})})}get mediaSrc(){var e,i;const n=((e=this.media)==null||(i=e.querySelector)==null?void 0:i.call(e,"source"))||this.media;return n?.src}onSBUpdateStart(e){const i=this.currentOp(e);i&&i.onStart()}onSBUpdateEnd(e){var i;if(((i=this.mediaSource)==null?void 0:i.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,i){var n;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${s}`,i),this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const r=this.currentOp(e);r&&r.onError(s)}updateTimestampOffset(e,i,n,s,r,o){const a=i-e.timestampOffset;Math.abs(a)>=n&&(this.log(`Updating ${s} SourceBuffer timestampOffset to ${i} (sn: ${r} cc: ${o})`),e.timestampOffset=i)}removeExecutor(e,i,n){const{media:s,mediaSource:r}=this,o=this.tracks[e],a=o?.buffer;if(!s||!r||!a){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Ze(s.duration)?s.duration:1/0,u=Ze(r.duration)?r.duration:1/0,c=Math.max(0,i),d=Math.min(n,l,u);d>c&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${c},${d}] from the ${e} SourceBuffer`),a.remove(c,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,i){const n=this.tracks[i],s=n?.buffer;if(!s)throw new mj(`Attempting to append to the ${i} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(i=>{this.warn(`SourceBuffer blocked callback ${i}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(i){this.warn(`Callback run without blocking ${this.operationQueue} ${i}`)}}isUpdating(){return this.sourceBuffers.some(([e,i])=>e&&i.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,i=this.sourceBufferTypes){if(!i.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,s=i.map(o=>this.appendBlocker(o));return i.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(o=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(i=>{var n;const s=(n=this.tracks[i])==null?void 0:n.buffer;!s||s.updating||this.shiftAndExecuteNext(i)})}append(e,i,n){this.operationQueue&&this.operationQueue.append(e,i,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,i)=>e+(this.isPending(this.tracks[i])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[i])=>e+(i?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,i,n){const s=this.tracks[e];if(!s)return;const r=s.buffer;if(!r)return;const o=n.bind(this,e);s.listeners.push({event:i,listener:o}),r.addEventListener(i,o)}removeBufferListeners(e){const i=this.tracks[e];if(!i)return;const n=i.buffer;n&&(i.listeners.forEach(s=>{n.removeEventListener(s.event,s.listener)}),i.listeners.length=0)}}function i6(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(i=>{t.removeChild(i)})}function vj(t,e){const i=self.document.createElement("source");i.type="video/mp4",i.src=e,t.appendChild(i)}function Rg(t){return t==="audio"?1:0}class Pg{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(V.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.BUFFER_CODECS,this.onBufferCodecs,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(V.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.BUFFER_CODECS,this.onBufferCodecs,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,i){const n=this.hls.levels[i.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,i){this.media=i.media instanceof HTMLVideoElement?i.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,i){const n=this.hls;this.restrictedLevels=[],this.firstLevel=i.firstLevel,n.config.capLevelToPlayerSize&&i.video&&this.startCapping()}onLevelsUpdated(e,i){this.timer&&Ze(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,i){this.hls.config.capLevelToPlayerSize&&i.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const i=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&i.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),i.autoLevelCapping=n,i.autoLevelEnabled&&i.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}}getMaxLevel(e){const i=this.hls.levels;if(!i.length)return-1;const n=i.filter((s,r)=>this.isLevelAllowed(s)&&r<=e);return this.clientRect=null,Pg.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,i={width:0,height:0};if(e){const n=e.getBoundingClientRect();i.width=n.width,i.height=n.height,!i.width&&!i.height&&(i.width=n.right-n.left||e.width||0,i.height=n.bottom-n.top||e.height||0)}return this.clientRect=i,i}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,i,n){if(!(e!=null&&e.length))return-1;const s=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let r=e.length-1;const o=Math.max(i,n);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&s(l,e[a+1])){r=a;break}}return r}}const ss={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},_j={HLS:"h"};class Fr{constructor(e,i){Array.isArray(e)&&(e=e.map(n=>n instanceof Fr?n:new Fr(n))),this.value=e,this.params=i}}const bj="Dict";function yj(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function wj(t,e,i,n){return new Error(`failed to ${t} "${yj(e)}" as ${i}`,{cause:n})}function Br(t,e,i){return wj("serialize",t,e,i)}class n6{constructor(e){this.description=e}}const s6="Bare Item",Ej="Boolean";function Sj(t){if(typeof t!="boolean")throw Br(t,Ej);return t?"?1":"?0"}function xj(t){return btoa(String.fromCharCode(...t))}const Tj="Byte Sequence";function Aj(t){if(ArrayBuffer.isView(t)===!1)throw Br(t,Tj);return`:${xj(t)}:`}const kj="Integer";function Cj(t){return t<-999999999999999||999999999999999<t}function r6(t){if(Cj(t))throw Br(t,kj);return t.toString()}function Lj(t){return`@${r6(t.getTime()/1e3)}`}function o6(t,e){if(t<0)return-o6(-t,e);const i=Math.pow(10,e);if(Math.abs(t*i%1-.5)<Number.EPSILON){const s=Math.floor(t*i);return(s%2===0?s:s+1)/i}else return Math.round(t*i)/i}const Ij="Decimal";function Rj(t){const e=o6(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Br(t,Ij);const i=e.toString();return i.includes(".")?i:`${i}.0`}const Pj="String",Dj=/[\x00-\x1f\x7f]+/;function Oj(t){if(Dj.test(t))throw Br(t,Pj);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Mj(t){return t.description||t.toString().slice(7,-1)}const $j="Token";function a6(t){const e=Mj(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Br(e,$j);return e}function Dg(t){switch(typeof t){case"number":if(!Ze(t))throw Br(t,s6);return Number.isInteger(t)?r6(t):Rj(t);case"string":return Oj(t);case"symbol":return a6(t);case"boolean":return Sj(t);case"object":if(t instanceof Date)return Lj(t);if(t instanceof Uint8Array)return Aj(t);if(t instanceof n6)return a6(t);default:throw Br(t,s6)}}const Fj="Key";function Og(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw Br(t,Fj);return t}function Mg(t){return t==null?"":Object.entries(t).map(([e,i])=>i===!0?`;${Og(e)}`:`;${Og(e)}=${Dg(i)}`).join("")}function l6(t){return t instanceof Fr?`${Dg(t.value)}${Mg(t.params)}`:Dg(t)}function Bj(t){return`(${t.value.map(l6).join(" ")})${Mg(t.params)}`}function Nj(t,e={whitespace:!0}){if(typeof t!="object"||t==null)throw Br(t,bj);const i=t instanceof Map?t.entries():Object.entries(t),n=e?.whitespace?" ":"";return Array.from(i).map(([s,r])=>{r instanceof Fr||(r=new Fr(r));let o=Og(s);return r.value===!0?o+=Mg(r.params):(o+="=",Array.isArray(r.value)?o+=Bj(r):o+=l6(r)),o}).join(`,${n}`)}function u6(t,e){return Nj(t,e)}const Nr="CMCD-Object",Ii="CMCD-Request",Ya="CMCD-Session",na="CMCD-Status",Uj={br:Nr,ab:Nr,d:Nr,ot:Nr,tb:Nr,tpb:Nr,lb:Nr,tab:Nr,lab:Nr,url:Nr,pb:Ii,bl:Ii,tbl:Ii,dl:Ii,ltc:Ii,mtp:Ii,nor:Ii,nrr:Ii,rc:Ii,sn:Ii,sta:Ii,su:Ii,ttfb:Ii,ttfbb:Ii,ttlb:Ii,cmsdd:Ii,cmsds:Ii,smrt:Ii,df:Ii,cs:Ii,ts:Ii,cid:Ya,pr:Ya,sf:Ya,sid:Ya,st:Ya,v:Ya,msd:Ya,bs:na,bsd:na,cdn:na,rtp:na,bg:na,pt:na,ec:na,e:na},Vj={REQUEST:Ii};function jj(t){return Object.keys(t).reduce((e,i)=>{var n;return(n=t[i])===null||n===void 0||n.forEach(s=>e[s]=i),e},{})}function Hj(t,e){const i={};if(!t)return i;const n=Object.keys(t),s=e?jj(e):{};return n.reduce((r,o)=>{var a;const l=Uj[o]||s[o]||Vj.REQUEST,u=(a=r[l])!==null&&a!==void 0?a:r[l]={};return u[o]=t[o],r},i)}function zj(t){return["ot","sf","st","e","sta"].includes(t)}function Gj(t){return typeof t=="number"?Ze(t):t!=null&&t!==""&&t!==!1}const c6="event";function Wj(t,e){const i=new URL(t),n=new URL(e);if(i.origin!==n.origin)return t;const s=i.pathname.split("/").slice(1),r=n.pathname.split("/").slice(1,-1);for(;s[0]===r[0];)s.shift(),r.shift();for(;r.length;)r.shift(),s.unshift("..");return s.join("/")+i.search+i.hash}const Uh=t=>Math.round(t),$g=(t,e)=>Array.isArray(t)?t.map(i=>$g(i,e)):t instanceof Fr&&typeof t.value=="string"?new Fr($g(t.value,e),t.params):(e.baseUrl&&(t=Wj(t,e.baseUrl)),e.version===1?encodeURIComponent(t):t),Vh=t=>Uh(t/100)*100,Kj={br:Uh,d:Uh,bl:Vh,dl:Vh,mtp:Vh,nor:(t,e)=>{let i=t;return e.version>=2&&(t instanceof Fr&&typeof t.value=="string"?i=new Fr([t]):typeof t=="string"&&(i=[t])),$g(i,e)},rtp:Vh,tb:Uh},d6="request",f6="response",Fg=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],Yj=["e"],Xj=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function jh(t){return Xj.test(t)}function qj(t){return Fg.includes(t)||Yj.includes(t)||jh(t)}const h6=["d","dl","nor","ot","rtp","su"];function Zj(t){return Fg.includes(t)||h6.includes(t)||jh(t)}const Qj=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function Jj(t){return Fg.includes(t)||h6.includes(t)||Qj.includes(t)||jh(t)}const eH=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function tH(t){return eH.includes(t)||jh(t)}const iH={[f6]:Jj,[c6]:qj,[d6]:Zj};function p6(t,e={}){const i={};if(t==null||typeof t!="object")return i;const n=e.version||t.v||1,s=e.reportingMode||d6,r=n===1?tH:iH[s];let o=Object.keys(t).filter(r);const a=e.filter;typeof a=="function"&&(o=o.filter(a));const l=s===f6||s===c6;l&&!o.includes("ts")&&o.push("ts"),n>1&&!o.includes("v")&&o.push("v");const u=si({},Kj,e.formatters),c={version:n,reportingMode:s,baseUrl:e.baseUrl};return o.sort().forEach(d=>{let f=t[d];const h=u[d];if(typeof h=="function"&&(f=h(f,c)),d==="v"){if(n===1)return;f=n}d=="pr"&&f===1||(l&&d==="ts"&&!Ze(f)&&(f=Date.now()),Gj(f)&&(zj(d)&&typeof f=="string"&&(f=new n6(f)),i[d]=f))}),i}function nH(t,e={}){const i={};if(!t)return i;const n=p6(t,e),s=Hj(n,e?.customHeaderMap);return Object.entries(s).reduce((r,[o,a])=>{const l=u6(a,{whitespace:!1});return l&&(r[o]=l),r},i)}function sH(t,e,i){return si(t,nH(e,i))}const rH="CMCD";function oH(t,e={}){return t?u6(p6(t,e),{whitespace:!1}):""}function aH(t,e={}){if(!t)return"";const i=oH(t,e);return encodeURIComponent(i)}function lH(t,e={}){if(!t)return"";const i=aH(t,e);return`${rH}=${i}`}const m6=/CMCD=[^&#]+/;function uH(t,e,i){const n=lH(e,i);if(!n)return t;if(m6.test(t))return t.replace(m6,n);const s=t.includes("?")?"&":"?";return`${t}${s}${n}`}class cH{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:ss.MANIFEST,su:!this.initialized})}catch(r){this.hls.logger.warn("Could not generate manifest CMCD data.",r)}},this.applyFragmentData=s=>{try{const{frag:r,part:o}=s,a=this.hls.levels[r.level],l=this.getObjectType(r),u={d:(o||r).duration*1e3,ot:l};(l===ss.VIDEO||l===ss.AUDIO||l==ss.MUXED)&&(u.br=a.bitrate/1e3,u.tb=this.getTopBandwidth(l)/1e3,u.bl=this.getBufferLength(l));const c=o?this.getNextPart(o):this.getNextFrag(r);c!=null&&c.url&&c.url!==r.url&&(u.nor=c.url),this.apply(s,u)}catch(r){this.hls.logger.warn("Could not generate segment CMCD data.",r)}},this.hls=e;const i=this.config=e.config,{cmcd:n}=i;n!=null&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHED,this.onMediaDetached,this),e.on(V.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHED,this.onMediaDetached,this),e.off(V.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,i){this.media=i.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,i){var n,s;this.audioBuffer=(n=i.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(s=i.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:_j.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,i={}){si(i,this.createData());const n=i.ot===ss.INIT||i.ot===ss.VIDEO||i.ot===ss.MUXED;this.starved&&n&&(i.bs=!0,i.su=!0,this.starved=!1),i.su==null&&(i.su=this.buffering);const{includeKeys:s}=this;s&&(i=Object.keys(i).reduce((o,a)=>(s.includes(a)&&(o[a]=i[a]),o),{}));const r={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),sH(e.headers,i,r)):e.url=uH(e.url,i,r)}getNextFrag(e){var i;const n=(i=this.hls.levels[e.level])==null?void 0:i.details;if(n){const s=e.sn-n.startSN;return n.fragments[s+1]}}getNextPart(e){var i;const{index:n,fragment:s}=e,r=(i=this.hls.levels[s.level])==null||(i=i.details)==null?void 0:i.partList;if(r){const{sn:o}=s;for(let a=r.length-1;a>=0;a--){const l=r[a];if(l.index===n&&l.fragment.sn===o)return r[a+1]}}}getObjectType(e){const{type:i}=e;if(i==="subtitle")return ss.TIMED_TEXT;if(e.sn==="initSegment")return ss.INIT;if(i==="audio")return ss.AUDIO;if(i==="main")return this.hls.audioTracks.length?ss.VIDEO:ss.MUXED}getTopBandwidth(e){let i=0,n;const s=this.hls;if(e===ss.AUDIO)n=s.audioTracks;else{const r=s.maxAutoLevel,o=r>-1?r+1:s.levels.length;n=s.levels.slice(0,o)}return n.forEach(r=>{r.bitrate>i&&(i=r.bitrate)}),i>0?i:NaN}getBufferLength(e){const i=this.media,n=e===ss.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!i?NaN:bt.bufferInfo(n,i.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,i=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new n(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,o,a){i(r),this.loader.load(r,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,i=this.applyFragmentData,n=e||this.config.loader;return class{constructor(r){this.loader=void 0,this.loader=new n(r)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(r,o,a){i(r),this.loader.load(r,o,a)}}}}const dH=3e5;class fH extends Us{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,i)=>(e.indexOf(i.pathwayId)===-1&&e.push(i.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const i=this.levels;i&&(this.levels=i.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,i){const{contentSteering:n}=i;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,i){this.audioTracks=i.audioTracks,this.subtitleTracks=i.subtitleTracks}onError(e,i){const{errorAction:n}=i;if(n?.action===hn.SendAlternateToPenaltyBox&&n.flags===_s.MoveAllAlternatesMatchingHost){const s=this.levels;let r=this._pathwayPriority,o=this.pathwayId;if(i.context){const{groupId:a,pathwayId:l,type:u}=i.context;a&&s?o=this.getPathwayForGroupId(a,u,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!r&&s&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==o),i.details===Le.BUFFER_APPEND_ERROR&&!i.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${i.details} ("${i.error.message}") with content-steering for Pathway: ${o} levels: ${s&&s.length} priorities: ${ui(r)} penalized: ${ui(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let i=this.getLevelsForPathway(this.pathwayId);if(i.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),i=this.getLevelsForPathway(n),this.pathwayId=n}return i.length!==e.length&&this.log(`Found ${i.length}/${e.length} levels in Pathway "${this.pathwayId}"`),i}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(i=>e===i.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let i;const n=this.penalizedPathways,s=performance.now();Object.keys(n).forEach(r=>{s-n[r]>dH&&delete n[r]});for(let r=0;r<e.length;r++){const o=e[r];if(o in n)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(i=this.getLevelsForPathway(o),i.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,b8(i),this.hls.trigger(V.LEVELS_UPDATED,{levels:i});const u=this.hls.levels[a];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,i,n){const s=this.getLevelsForPathway(n).concat(this.levels||[]);for(let r=0;r<s.length;r++)if(i===Rt.AUDIO_TRACK&&s[r].hasAudioGroup(e)||i===Rt.SUBTITLE_TRACK&&s[r].hasSubtitleGroup(e))return s[r].pathwayId;return n}clonePathways(e){const i=this.levels;if(!i)return;const n={},s={};e.forEach(r=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=r;if(i.some(c=>c.pathwayId===o))return;const u=this.getLevelsForPathway(a).map(c=>{const d=new xi(c.attrs);d["PATHWAY-ID"]=o;const f=d.AUDIO&&`${d.AUDIO}_clone_${o}`,h=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;f&&(n[d.AUDIO]=f,d.AUDIO=f),h&&(s[d.SUBTITLES]=h,d.SUBTITLES=h);const p=v6(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new Pc({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:p,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let g=1;g<c.audioGroups.length;g++)m.addGroupId("audio",`${c.audioGroups[g]}_clone_${o}`);if(c.subtitleGroups)for(let g=1;g<c.subtitleGroups.length;g++)m.addGroupId("text",`${c.subtitleGroups[g]}_clone_${o}`);return m});i.push(...u),g6(this.audioTracks,n,l,o),g6(this.subtitleTracks,s,l,o)})}loadSteeringManifest(e){const i=this.hls.config,n=i.loader;this.loader&&this.loader.destroy(),this.loader=new n(i);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+c)}const r={responseType:"json",url:s.href},o=i.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},u={onSuccess:(c,d,f,h)=>{this.log(`Loaded steering manifest: "${s}"`);const p=c.data;if(p?.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":v}=p;if(m)try{this.uri=new self.URL(m,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||f.url),g&&this.clonePathways(g);const b={steeringManifest:p,url:s.toString()};this.hls.trigger(V.STEERING_MANIFEST_LOADED,b),v&&this.updatePathwayPriority(v)},onError:(c,d,f,h)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(c.code===429){const m=this.loader;if(typeof m?.getResponseHeader=="function"){const g=m.getResponseHeader("Retry-After");g&&(p=parseFloat(g)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(c,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(r,l,u)}scheduleRefresh(e,i=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const s=(n=this.hls)==null?void 0:n.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},i)}}function g6(t,e,i,n){t&&Object.keys(e).forEach(s=>{const r=t.filter(o=>o.groupId===s).map(o=>{const a=si({},o);return a.details=void 0,a.attrs=new xi(a.attrs),a.url=a.attrs.URI=v6(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),a.groupId=a.attrs["GROUP-ID"]=e[s],a.attrs["PATHWAY-ID"]=n,a});t.push(...r)})}function v6(t,e,i,n){const{HOST:s,PARAMS:r,[i]:o}=n;let a;e&&(a=o?.[e],a&&(t=a));const l=new self.URL(t);return s&&!a&&(l.host=s),r&&Object.keys(r).sort().forEach(u=>{u&&l.searchParams.set(u,r[u])}),l.href}class Ql extends Us{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Ql.CDMCleanupPromise?[Ql.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=i=>{const{initDataType:n,initData:s}=i,r=`"${i.type}" event: init data type: "${n}"`;if(this.debug(r),s!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=Dc(this.config));const a=o.map(ug).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=Ih(o);if(n!=="sinf"||a!==Ti.FAIRPLAY){this.log(`Ignoring "${i.type}" event with init data type: "${n}" for selected key-system ${a}`);return}let l;try{const h=qi(new Uint8Array(s)),p=ag(JSON.parse(h).sinf),m=m9(p);if(!m)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(m.subarray(8,24))}catch(h){this.warn(`${r} Failed to parse sinf: ${h}`);return}const u=Kn(l),{keyIdToKeySessionPromise:c,mediaKeySessions:d}=this;let f=c[u];for(let h=0;h<d.length;h++){const p=d[h],m=p.decryptdata;if(!m.keyId)continue;const g=Kn(m.keyId);if(Ch(l,m.keyId)||m.uri.replace(/-/g,"").indexOf(u)!==-1){if(f=c[g],!f)continue;if(m.pssh)break;delete c[g],m.pssh=new Uint8Array(s),m.keyId=l,f=c[u]=f.then(()=>this.generateRequestWithPreferredKeySession(p,n,s,"encrypted-event-key-match")),f.catch(v=>this.handleError(v));break}}f||this.handleError(new Error(`Key ID ${u} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(o=>this.handleError(o))}},this.onWaitingForKey=i=>{this.log(`"${i.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(V.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(V.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(V.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(V.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(V.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(V.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:i,widevineLicenseUrl:n}=this.config,s=i?.[e];if(s)return s.licenseUrl;if(e===Ti.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const i=this.getLicenseServerUrl(e);if(i===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return i}getServerCertificateUrl(e){const{drmSystems:i}=this.config,n=i?.[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const i=this.hls.levels,n=(o,a,l)=>!!o&&l.indexOf(o)===a,s=i.map(o=>o.audioCodec).filter(n),r=i.map(o=>o.videoCodec).filter(n);return s.length+r.length===0&&r.push("avc1.42e01e"),new Promise((o,a)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,s,r).then(d=>o({keySystem:c,mediaKeys:d})).catch(d=>{u.length?l(u):d instanceof ws?a(d):a(new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,i){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${n}`;return J9===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return n(e,i)}getMediaKeysPromise(e,i,n){var s;const r=XU(e,i,n,this.config.drmSystemOptions||{});let o=this.keySystemAccessPromises[e],a=(s=o)==null?void 0:s.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${ui(r)}`),a=this.requestMediaKeySystemAccess(e,r);const l=o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),a.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const c=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=l.mediaKeys=u.createMediaKeys().then(f=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,c.then(h=>h?this.setMediaKeysServerCertificate(f,e,h):f)));return d.catch(f=>{this.error(`Failed to create media-keys for "${e}"}: ${f}`)}),d})}return a.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:i,mediaKeys:n}){this.log(`Creating key-system session "${i}" keyId: ${Kn(e.keyId||[])} keyUri: ${e.uri}`);const s=n.createSession(),r={decryptdata:e,keySystem:i,mediaKeys:n,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(r),r}renewKeySession(e){const i=e.decryptdata;if(i.pssh){const n=this.createMediaKeySessionContext(e),s=Hh(i),r="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(n,r,i.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,i){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${Kn(e.decryptdata.keyId||[])}
      } (data length: ${i.byteLength})`),n.update(i)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>ug(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:i,mediaKeys:n})=>this.attemptSetMediaKeys(i,n))}selectKeySystem(e){return new Promise((i,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:s})=>{const r=ug(s);r?i(r):n(new Error(`Unable to find format for key-system "${s}"`))}).catch(n)})}selectKeySystemFormat(e){const i=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)),this.keyFormatPromise}getKeyFormatPromise(e){const i=Dc(this.config),n=e.map(Ih).filter(s=>!!s&&i.indexOf(s)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:i}=this;for(let n=0;n<i.length;n++){const s=hH(e,i[n]);if(s)return s}}loadKey(e){const i=e.keyInfo.decryptdata,n=Hh(i),s=this.bannedKeyIds[n];if(s||this.getKeyStatus(i)==="internal-error"){const a=_6(s||"internal-error",i);return this.handleError(a,e.frag),Promise.reject(a)}const r=`(keyId: ${n} format: "${i.keyFormat}" method: ${i.method} uri: ${i.uri})`;this.log(`Starting session for key ${r}`);const o=this.keyIdToKeySessionPromise[n];if(!o){const a=this.getKeySystemForKeyPromise(i).then(({keySystem:l,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(l,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:u,decryptdata:i}))))).then(l=>{const u="cenc",c=i.pssh?i.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,u,c,"playlist-key")});return a.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[n]=a,a}return o.catch(a=>{if(a instanceof ws){const l=ei({},a.data);this.getKeyStatus(i)==="internal-error"&&(l.decryptdata=i);const u=new ws(l,a.message);this.handleError(u,e.frag)}}),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,i){if(this.hls)if(e instanceof ws){i&&(e.data.frag=i);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${Kn(n.keyId||[])})`:""}`),this.hls.trigger(V.ERROR,e.data)}else this.error(e.message),this.hls.trigger(V.ERROR,{type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const i=Hh(e),n=this.keyIdToKeySessionPromise[i];if(!n){const s=Ih(e.keyFormat),r=s?[s]:Dc(this.config);return this.attemptKeySystemAccess(r)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Dc(this.config)),e.length===0)throw new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${ui({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,i){if(this.mediaResolved=void 0,this.mediaKeys===i)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(i):new Promise((r,o)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return o(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=i,this.media.setMediaKeys(i).then(r).catch(o)}}));return this.mediaKeys=i,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(r=>n.indexOf(r)===-1)})}generateRequestWithPreferredKeySession(e,i,n,s){var r;const o=(r=this.config.drmSystems)==null||(r=r[e.keySystem])==null?void 0:r.generateRequest;if(o)try{const p=o.call(this.hls,i,n,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");i=p.initDataType,n=p.initData?p.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(n===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const a=Hh(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${s}" keyId: ${a} URI: ${l} (init data type: ${i} length: ${n.byteLength})`);const u=new gg,c=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){u.emit("error",new Error("invalid state"));return}const{messageType:g,message:v}=p;this.log(`"${g}" message event for session "${m.sessionId}" message size: ${v.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,v).catch(b=>{u.eventNames().length?u.emit("error",b):this.handleError(b)}):g==="license-release"?e.keySystem===Ti.FAIRPLAY&&this.updateKeySession(e,lg("acknowledged")).then(()=>this.removeSession(e)).catch(b=>this.handleError(b)):this.warn(`unhandled media key message type "${g}"`)},d=(p,m)=>{m.keyStatus=p;let g;p.startsWith("usable")?u.emit("resolved"):p==="internal-error"||p==="output-restricted"||p==="output-downscaled"?g=_6(p,m.decryptdata):p==="expired"?g=new Error(`key expired (keyId: ${a})`):p==="released"?g=new Error("key released"):p==="status-pending"||this.warn(`unhandled key status change "${p}" (keyId: ${a})`),g&&(u.eventNames().length?u.emit("error",g):this.handleError(g))},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}const g=this.getKeyStatuses(e);if(!Object.keys(g).some(y=>g[y]!=="status-pending"))return;if(g[a]==="expired"){this.log(`Expired key ${ui(g)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let b=g[a];if(b)d(b,e);else{var _;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(_=e.keyStatusTimeouts)[a]||(_[a]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const E=this.getKeyStatus(e.decryptdata);if(E&&E!=="status-pending")return this.log(`No status for keyId ${a} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${E} from other session.`),d(E,e);this.log(`key status for ${a} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),b="internal-error",d(b,e)},1e3)),this.log(`No status for keyId ${a} (${ui(g)}).`)}};Yn(e.mediaKeysSession,"message",c),Yn(e.mediaKeysSession,"keystatuseschange",f);const h=new Promise((p,m)=>{u.on("error",m),u.on("resolved",p)});return e.mediaKeysSession.generateRequest(i,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${a} URI: ${l}`)}).catch(p=>{throw new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_NO_SESSION,error:p,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>h).catch(p=>(u.removeAllListeners(),this.removeSession(e).then(()=>{throw p}))).then(()=>(u.removeAllListeners(),e))}getKeyStatuses(e){const i={};return e.mediaKeysSession.keyStatuses.forEach((n,s)=>{if(typeof s=="string"&&typeof n=="object"){const a=s;s=n,n=a}const r="buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s);e.keySystem===Ti.PLAYREADY&&r.length===16&&Z9(r);const o=Kn(r);n==="internal-error"&&(this.bannedKeyIds[o]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${o} key-session "${e.mediaKeysSession.sessionId}"`),i[o]=n}),i}fetchServerCertificate(e){const i=this.config,n=i.loader,s=new n(i),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:r},u=i.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,m)=>{o(f.data)},onError:(f,h,p,m)=>{a(new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:ei({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${r}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,p)=>{a(new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(f,h,p)=>{a(new Error("aborted"))}};s.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,i,n){return new Promise((s,r)=>{e.setServerCertificate(n).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${n.byteLength}) on "${i}"`),s(e)}).catch(o=>{r(new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,i){return this.requestLicense(e,new Uint8Array(i)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(s=>{throw new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:s,fatal:!1},s.message)}))}unpackPlayReadyKeyMessage(e,i){const n=String.fromCharCode.apply(null,new Uint16Array(i.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),i;const s=new DOMParser().parseFromString(n,"application/xml"),r=s.querySelectorAll("HttpHeader");if(r.length>0){let c;for(let d=0,f=r.length;d<f;d++){var o,a;c=r[d];const h=(o=c.querySelector("name"))==null?void 0:o.textContent,p=(a=c.querySelector("value"))==null?void 0:a.textContent;h&&p&&e.setRequestHeader(h,p)}}const l=s.querySelector("Challenge"),u=l?.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return lg(atob(u))}setupLicenseXHR(e,i,n,s){const r=this.config.licenseXhrSetup;return r?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return r.call(this.hls,e,i,n,s)}).catch(o=>{if(!n.decryptdata)throw o;return e.open("POST",i,!0),r.call(this.hls,e,i,n,s)}).then(o=>(e.readyState||e.open("POST",i,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",i,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,i){const n=this.config.keyLoadPolicy.default;return new Promise((s,r)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return r(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,a,o,e)}catch(c){this.error(c)}s(l)}else{const l=n.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||a.status>=400&&a.status<500)r(new ws({type:at.KEY_SYSTEM_ERROR,details:Le.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,i).then(s,r)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,i).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==Ti.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)}).catch(r)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,i){if(!this.config.emeEnabled)return;const n=i.media;this.media=n,Yn(n,"encrypted",this.onMediaEncrypted),Yn(n,"waitingforkey",this.onWaitingForKey);const s=this.mediaResolved;s?s():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(ns(e,"encrypted",this.onMediaEncrypted),ns(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const i=this.mediaResolved;if(i&&i(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,s=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Ka.clearKeyUriToKeyIdMap();const r=s.length;Ql.CDMCleanupPromise=Promise.all(s.map(o=>this.removeSession(o)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(o=>{this.log(`Could not clear media keys: ${o}`),this.hls&&this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))||Promise.resolve())).catch(o=>{this.log(`Could not close sessions and clear media keys: ${o}`),this.hls&&this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:i}){if(!(!i||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=i.reduce((s,r)=>(s.indexOf(r.keyFormat)===-1&&s.push(r.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:i,licenseXhr:n,decryptdata:s}=e;if(i){this.log(`Remove licenses and keys and close session "${i.sessionId}" keyId: ${Kn(s?.keyId||[])}`),e._onmessage&&(i.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(i.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{keyStatusTimeouts:o}=e;o&&Object.keys(o).forEach(u=>self.clearTimeout(o[u]));const{drmSystemOptions:a}=this.config;return(ZU(a)?new Promise((u,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),i.remove().then(u).catch(c)}):Promise.resolve()).catch(u=>{this.log(`Could not remove session: ${u}`),this.hls&&this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>i.close()).catch(u=>{this.log(`Could not close session: ${u}`),this.hls&&this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}return Promise.resolve()}}Ql.CDMCleanupPromise=void 0;function Hh(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return Kn(t.keyId)}function hH(t,e){if(t.keyId&&e.mediaKeysSession.keyStatuses.has(t.keyId))return e.mediaKeysSession.keyStatuses.get(t.keyId);if(t.matches(e.decryptdata))return e.keyStatus}class ws extends Error{constructor(e,i){super(i),this.data=void 0,e.error||(e.error=new Error(i)),this.data=e,e.err=e.error}}function _6(t,e){const i=t==="output-restricted",n=i?Le.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Le.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new ws({type:at.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},i?"HDCP level output restricted":`key status changed to "${t}"`)}class pH{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(V.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(V.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,i){const n=this.hls.config;if(n.capLevelOnFPSDrop){const s=i.media instanceof self.HTMLVideoElement?i.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,i,n){const s=performance.now();if(i){if(this.lastTime){const r=s-this.lastTime,o=n-this.lastDroppedFrames,a=i-this.lastDecodedFrames,l=1e3*o/r,u=this.hls;if(u.trigger(V.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:n}),l>0&&o>u.config.fpsDroppedMonitoringThreshold*a){let c=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(V.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=n,this.lastDecodedFrames=i}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const i=e.getVideoPlaybackQuality();this.checkFPS(e,i.totalVideoFrames,i.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function b6(t,e){let i;try{i=new Event("addtrack")}catch{i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)}function y6(t,e){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){ti.debug(`[texttrack-utils]: ${n}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(s){ti.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}i==="disabled"&&(t.mode=i)}function Jl(t,e){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)e&&t.cues[n].removeEventListener("enter",e),t.removeCue(t.cues[n]);i==="disabled"&&(t.mode=i)}function Bg(t,e,i,n){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const r=gH(t.cues,e,i);for(let o=0;o<r.length;o++)(!n||n(r[o]))&&t.removeCue(r[o])}s==="disabled"&&(t.mode=s)}function mH(t,e){if(e<=t[0].startTime)return 0;const i=t.length-1;if(e>t[i].endTime)return-1;let n=0,s=i,r;for(;n<=s;)if(r=Math.floor((s+n)/2),e<t[r].startTime)s=r-1;else if(e>t[r].startTime&&n<i)n=r+1;else return r;return t[n].startTime-e<e-t[s].startTime?n:s}function gH(t,e,i){const n=[],s=mH(t,e);if(s>-1)for(let r=s,o=t.length;r<o;r++){const a=t[r];if(a.startTime>=e&&a.endTime<=i)n.push(a);else if(a.startTime>i)return n}return n}function zh(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[i])}return e}class vH extends Lg{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let i=null;const n=zh(this.media.textTracks);for(let r=0;r<n.length;r++)if(n[r].mode==="hidden")i=n[r];else if(n[r].mode==="showing"){i=n[r];break}const s=this.findTrackForTextTrack(i);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(V.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVEL_LOADING,this.onLevelLoading,this),e.off(V.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(V.ERROR,this.onError,this)}onMediaAttached(e,i){this.media=i.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,i){const n=this.media;if(!n)return;const s=!!i.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;zh(n.textTracks).forEach(o=>{Jl(o)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,i){this.tracks=i.subtitleTracks}onSubtitleTrackLoaded(e,i){const{id:n,groupId:s,details:r}=i,o=this.tracksInGroup[n];if(!o||o.groupId!==s){this.warn(`Subtitle track with id:${n} and group:${s} not found in active group ${o?.groupId}`);return}const a=o.details;o.details=i.details,this.log(`Subtitle track ${n} "${o.name}" lang:${o.lang} group:${s} loaded [${r.startSN}-${r.endSN}]`),n===this.trackId&&this.playlistLoaded(n,i,a)}onLevelLoading(e,i){this.switchLevel(i.level)}onLevelSwitching(e,i){this.switchLevel(i.level)}switchLevel(e){const i=this.hls.levels[e];if(!i)return;const n=i.subtitleGroups||null,s=this.groupIds;let r=this.currentTrack;if(!n||s?.length!==n?.length||n!=null&&n.some(o=>s?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(c=>!n||n.indexOf(c.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(c=>c.default)&&(this.selectDefaultTrack=!1),o.forEach((c,d)=>{c.id=d});else if(!r&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!r&&a){this.selectDefaultTrack=!1;const c=Or(a,o);if(c>-1)r=o[c];else{const d=Or(a,this.tracks);r=this.tracks[d]}}let l=this.findTrackId(r);l===-1&&r&&(l=this.findTrackId(null));const u={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(V.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const i=this.tracksInGroup,n=this.selectDefaultTrack;for(let s=0;s<i.length;s++){const r=i[s];if(!(n&&!r.default||!n&&!e)&&(!e||za(r,e)))return s}if(e){for(let s=0;s<i.length;s++){const r=i[s];if(Uc(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<i.length;s++){const r=i[s];if(Uc(e.attrs,r.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const i=this.tracksInGroup;for(let n=0;n<i.length;n++){const s=i[n];if(Ig(s,e))return n}}return-1}onError(e,i){i.fatal||!i.context||i.context.type===Rt.SUBTITLE_TRACK&&i.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(i.context.groupId)!==-1)&&this.checkRetry(i)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const i=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,i.length){const n=this.currentTrack;if(n&&za(e,n))return n;const s=Or(e,this.tracksInGroup);if(s>-1){const r=this.tracksInGroup[s];return this.setSubtitleTrack(s),r}else{if(n)return null;{const r=Or(e,i);if(r>-1)return i[r]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,i){super.loadingPlaylist(e,i);const n=e.id,s=e.groupId,r=this.getUrlWithDirectives(e.url,i),o=e.details,a=o?.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${s}${i?.msn!==void 0?" at sn "+i.msn+" part "+i.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${r}`),this.hls.trigger(V.SUBTITLE_TRACK_LOADING,{url:r,id:n,groupId:s,deliveryDirectives:i||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const i=zh(e.textTracks),n=this.currentTrack;let s;if(n&&(s=i.filter(r=>Ig(n,r))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(i).forEach(r=>{r.mode!=="disabled"&&r!==s&&(r.mode="disabled")}),s){const r=this.subtitleDisplay?"showing":"hidden";s.mode!==r&&(s.mode=r)}}setSubtitleTrack(e){const i=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=i.length||!Ze(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,s=i[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(V.SUBTITLE_TRACK_SWITCH,{id:e});return}const r=!!s.details&&!s.details.live;if(e===this.trackId&&s===n&&r)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:o,groupId:a="",name:l,type:u,url:c}=s;this.hls.trigger(V.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:u,url:c});const d=this.switchParams(s.url,n?.details,s.details);this.loadPlaylist(d)}}function _H(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),i=e.toString();return URL.revokeObjectURL(e),i.slice(i.lastIndexOf("/")+1)}catch{let i=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(s=="x"?r:r&3|8).toString(16)})}}}function Vc(t){let e=5381,i=t.length;for(;i;)e=e*33^t.charCodeAt(--i);return(e>>>0).toString()}const eu=.025;let Gh=(function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t})({});function bH(t,e,i){return`${t.identifier}-${i+1}-${Vc(e)}`}class yH{constructor(e,i){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=i,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var i;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((i=this.assetList[e])==null?void 0:i.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const i=this.dateRange.tagAnchor;if(i)return Ng(e,i)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const i=this.dateRange.startTime,n=Ng(i,e);return i-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,i=Ze(e)?e:this.duration;return this.cumulativeDuration+i}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const i=this.resumeAnchor;if(i)return Ng(e,i)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<eu))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let i;return this._duration!==null?i=this._duration:this.dateRange.duration?i=this.dateRange.duration:i=this.dateRange.plannedDuration||0,!isNaN(e)&&e<i&&(i=e),i}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Gh.Range:Gh.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return wH(this)}}function Ng(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<eu)?e.start:e.start+e.duration}function w6(t,e,i){const n=new self.URL(t,i);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function Ug(t,e){for(;(i=t.assetList[++e])!=null&&i.error;)var i;return e}function wH(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function tu(t){const e=t.timelineStart,i=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+i).toFixed(2)}]`}class EH{constructor(e,i,n,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(V.PLAYOUT_LIMIT_REACHED,{})};const r=this.hls=new e(i);this.interstitial=n,this.assetItem=s;const o=()=>{this.hasDetails=!0};r.once(V.LEVEL_LOADED,o),r.once(V.AUDIO_TRACK_LOADED,o),r.once(V.SUBTITLE_TRACK_LOADED,o),r.on(V.MEDIA_ATTACHING,(a,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&r.on(V.BUFFER_APPENDED,()=>{const c=this.bufferedEnd;this.reachedPlayout(c)&&(this._bufferedEosTime=c,r.trigger(V.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let i=this.assetItem.uri;try{i=w6(i,e.config.primarySessionId||"").href}catch{}e.loadSource(i)}}bufferedInPlaceToEnd(e){var i;if(!this.appendInPlace)return!1;if((i=this.hls)!=null&&i.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),s=this.timelineOffset,r=bt.bufferInfo(e,s,0);return this.getAssetTime(r.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const i=bt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(i.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const i=this.interstitial.playoutLimit;if(i){const n=i-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const i=this.timelineOffset;if(e!==i){const n=e-i;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const i=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-i),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var i;this.loadSource(),(i=this.hls)==null||i.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const i=n=>delete n.details;e.levels.forEach(i),e.allAudioTracks.forEach(i),e.allSubtitleTracks.forEach(i),this.hasDetails=!1}}on(e,i,n){var s;(s=this.hls)==null||s.on(e,i)}once(e,i,n){var s;(s=this.hls)==null||s.once(e,i)}off(e,i,n){var s;(s=this.hls)==null||s.off(e,i)}toString(){var e;return`HlsAssetPlayer: ${tu(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const E6=.033;class SH extends Us{constructor(e,i){super("interstitials-sched",i),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,i){return this.events?this.events.reduce((n,s)=>e<=s.startOffset&&i>s.startOffset?(delete s.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,i){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[n]||(i===void 0&&(i=e.start),n=this.findItemIndexAtTime(i));n>=0&&(r=s[n])!=null&&r.event;){var r;n--}return n}findItemIndexAtTime(e,i){const n=this.items;if(n)for(let s=0;s<n.length;s++){let r=n[s];if(i&&i!=="primary"&&(r=r[i]),e===r.start||e>r.start&&e<r.end)return s}return-1}findJumpRestrictedIndex(e,i){const n=this.items;if(n)for(let s=e;s<=i&&n[s];s++){const r=n[s].event;if(r!=null&&r.restrictions.jump&&!r.appendInPlace)return s}return-1}findEventIndex(e){const i=this.items;if(i)for(let s=i.length;s--;){var n;if(((n=i[s].event)==null?void 0:n.identifier)===e)return s}return-1}findAssetIndex(e,i){const n=e.assetList,s=n.length;if(s>1)for(let r=0;r<s;r++){const o=n[r];if(!o.error){const a=o.timelineStart;if(i===a||i>a&&(i<a+(o.duration||0)||r===s-1))return r}}return 0}get assetIdAtEnd(){var e;const i=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(i){const n=i.assetList,s=n[n.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,i){const n=e.main.details,{dateRanges:s}=n,r=this.events,o=this.parseDateRanges(s,{url:n.url},i),a=Object.keys(s),l=r?r.filter(u=>!a.includes(u.identifier)):[];o.length&&o.sort((u,c)=>{const d=u.cue.pre,f=u.cue.post,h=c.cue.pre,p=c.cue.post;if(d&&!h)return-1;if(h&&!d||f&&!p)return 1;if(p&&!f)return-1;if(!d&&!h&&!f&&!p){const m=u.startTime,g=c.startTime;if(m!==g)return m-g}return u.dateRange.tagOrder-c.dateRange.tagOrder}),this.events=o,l.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,l)}updateSchedule(e,i=[],n=!1){const s=this.events||[];if(s.length||i.length||this.length<2){const r=this.items,o=this.parseSchedule(s,e);(n||i.length||r?.length!==o.length||o.some((l,u)=>Math.abs(l.playout.start-r[u].playout.start)>.005||Math.abs(l.playout.end-r[u].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(i,r))}}parseDateRanges(e,i,n){const s=[],r=Object.keys(e);for(let o=0;o<r.length;o++){const a=r[o],l=e[a];if(l.isInterstitial){let u=this.eventMap[a];u?u.setDateRange(l):(u=new yH(l,i),this.eventMap[a]=u,n===!1&&(u.appendInPlace=n)),s.push(u)}}return s}parseSchedule(e,i){const n=[],s=i.main.details,r=s.live?1/0:s.edge;let o=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,i);let l=0,u=0;if(e.forEach((c,d)=>{const f=c.cue.pre,h=c.cue.post,p=e[d-1]||null,m=c.appendInPlace,g=h?r:c.startOffset,v=c.duration,b=c.timelineOccupancy===Gh.Range?v:0,_=c.resumptionOffset,y=p?.startTime===g,E=g+c.cumulativeDuration;let S=m?E+v:g+_;if(f||!h&&g<=0){const C=u;u+=b,c.timelineStart=E;const T=o;o+=v,n.push({event:c,start:E,end:S,playout:{start:T,end:o},integrated:{start:C,end:u}})}else if(g<=r){if(!y){const I=g-l;if(I>E6){const D=l,R=u;u+=I;const O=o;o+=I;const M={previousEvent:e[d-1]||null,nextEvent:c,start:D,end:D+I,playout:{start:O,end:o},integrated:{start:R,end:u}};n.push(M)}else I>0&&p&&(p.cumulativeDuration+=I,n[n.length-1].end=g)}h&&(S=E),c.timelineStart=E;const C=u;u+=b;const T=o;o+=v,n.push({event:c,start:E,end:S,playout:{start:T,end:o},integrated:{start:C,end:u}})}else return;const A=c.resumeTime;h||A>r?l=r:l=A}),l<r){var a;const c=l,d=u,f=r-l;u+=f;const h=o;o+=f,n.push({previousEvent:((a=n[n.length-1])==null?void 0:a.event)||null,nextEvent:null,start:l,end:c+f,playout:{start:h,end:o},integrated:{start:d,end:u}})}this.setDurations(r,o,u)}else n.push({previousEvent:null,nextEvent:null,start:0,end:r,playout:{start:0,end:r},integrated:{start:0,end:r}}),this.setDurations(r,r,r);return n}setDurations(e,i,n){this.durations={primary:e,playout:i,integrated:n}}resolveOffsets(e,i){const n=i.main.details,s=n.live?1/0:n.edge;let r=0,o=-1;e.forEach((a,l)=>{const u=a.cue.pre,c=a.cue.post,d=u?0:c?s:a.startTime;this.updateAssetDurations(a),o===d?a.cumulativeDuration=r:(r=0,o=d),!c&&a.snapOptions.in&&(a.resumeAnchor=Wa(null,n.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(a,i)||(a.appendInPlace=!1)),!a.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<E6&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`));const h=Ze(a.resumeOffset)?a.resumeOffset:a.duration;r+=h})}primaryCanResumeInPlaceAt(e,i){const n=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(n-s)>eu?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${s}`),!1):!Object.keys(i).some(o=>{const a=i[o].details,l=a.edge;if(n>=l)return this.log(`"${e.identifier}" resumption ${n} past ${o} playlist end ${l}`),!1;const u=Wa(null,a.fragments,n);if(!u)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${o} playlist (${a.fragStart}-${a.fragmentEnd})`),!0;const c=o==="audio"?.175:0;return Math.abs(u.start-n)<eu+c||Math.abs(u.end-n)<eu+c?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${o} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const i=e.timelineStart;let n=0,s=!1,r=!1;for(let o=0;o<e.assetList.length;o++){const a=e.assetList[o],l=i+n;a.startOffset=n,a.timelineStart=l,s||(s=a.duration===null),r||(r=!!a.error);const u=a.error?0:a.duration||0;n+=u}s&&!r?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function ar(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class xH{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,i){const n=e.assetListUrl;let s;try{s=w6(n,this.hls.sessionId,e.baseUrl)}catch(f){const h=this.assignAssetListError(e,Le.ASSET_LIST_LOAD_ERROR,f,n);this.hls.trigger(V.ERROR,h);return}i&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+i);const r=this.hls.config,o=r.loader,a=new o(r),l={responseType:"json",url:s.href},u=r.interstitialAssetListLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,m)=>{const g=f.data,v=g?.ASSETS;if(!Array.isArray(v)){const b=this.assignAssetListError(e,Le.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,h,m);this.hls.trigger(V.ERROR,b);return}e.assetListResponse=g,this.hls.trigger(V.ASSET_LIST_LOADED,{event:e,assetListResponse:g,networkDetails:m})},onError:(f,h,p,m)=>{const g=this.assignAssetListError(e,Le.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${h.url})`),h.url,m,p);this.hls.trigger(V.ERROR,g)},onTimeout:(f,h,p)=>{const m=this.assignAssetListError(e,Le.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${h.url})`),h.url,f,p);this.hls.trigger(V.ERROR,m)}};return a.load(l,c,d),this.hls.trigger(V.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,i,n,s,r,o){return e.error=n,{type:at.NETWORK_ERROR,details:i,fatal:!1,interstitial:e,url:s,error:n,networkDetails:o,stats:r}}}function S6(t){var e;t==null||(e=t.play())==null||e.catch(()=>{})}function Wh(t,e){return`[${t}] Advancing timeline position to ${e}`}class TH extends Us{constructor(e,i){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const s=n-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const o=s<=-.01;this.timelinePos=n,this.bufferedPos=n;const a=this.playingItem;if(!a){this.checkBuffer();return}if(o&&this.schedule.resetErrorsInRange(n,n-s)&&this.updateSchedule(!0),this.checkBuffer(),o&&n<a.start||n>=a.end){var l;const h=this.findItemIndex(a);let p=this.schedule.findItemIndexAtTime(n);if(p===-1&&(p=h+(o?-1:1),this.log(`seeked ${o?"back ":""}to position not covered by schedule ${n} (resolving from ${h} to ${p})`)),!this.isInterstitial(a)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!o&&p>h){const m=this.schedule.findJumpRestrictedIndex(h+1,p);if(m>h){this.setSchedulePosition(m);return}}this.setSchedulePosition(p);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(a)){const h=a.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,h))}return}const c=u.timelineStart,d=u.duration||0;if(o&&n<c||n>=c+d){var f;(f=a.event)!=null&&f.appendInPlace&&(this.clearInterstitial(a.event,a),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,u)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(n>=s.end){this.timelinePos=s.end;const a=this.findItemIndex(s);this.setSchedulePosition(a+1)}const r=this.playingAsset;if(!r)return;const o=r.timelineStart+(r.duration||0);n>=o&&this.setScheduleToAssetAtTime(n,r)},this.onScheduleUpdate=(n,s)=>{const r=this.schedule;if(!r)return;const o=this.playingItem,a=r.events||[],l=r.items||[],u=r.durations,c=n.map(m=>m.identifier),d=!!(a.length||c.length);(d||s)&&this.log(`INTERSTITIALS_UPDATED (${a.length}): ${a}
Schedule: ${l.map(m=>ar(m))} pos: ${this.timelinePos}`),c.length&&this.log(`Removed events ${c}`);let f=null,h=null;o&&(f=this.updateItem(o,this.timelinePos),this.itemsMatch(o,f)?this.playingItem=f:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const p=this.bufferingItem;if(p&&(h=this.updateItem(p,this.bufferedPos),this.itemsMatch(p,h)?this.bufferingItem=h:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))),n.forEach(m=>{m.assetList.forEach(g=>{this.clearAssetPlayer(g.identifier,null)})}),this.playerQueue.forEach(m=>{if(m.interstitial.appendInPlace){const g=m.assetItem.timelineStart,v=m.timelineOffset-g;if(v)try{m.timelineOffset=g}catch(b){Math.abs(v)>eu&&this.warn(`${b} ("${m.assetId}" ${m.timelineOffset}->${g})`)}}}),d||s){if(this.hls.trigger(V.INTERSTITIALS_UPDATED,{events:a.slice(0),schedule:l.slice(0),durations:u,removedIds:c}),this.isInterstitial(o)&&c.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}o&&this.trimInPlace(f,o),p&&h!==f&&this.trimInPlace(h,p),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=i,this.assetListLoader=new xH(e),this.schedule=new SH(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(V.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(V.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(V.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(V.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(V.BUFFER_APPENDED,this.onBufferAppended,this),e.on(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(V.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(V.MEDIA_ENDED,this.onMediaEnded,this),e.on(V.ERROR,this.onError,this),e.on(V.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(V.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(V.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(V.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(V.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(V.BUFFER_CODECS,this.onBufferCodecs,this),e.off(V.BUFFER_APPENDED,this.onBufferAppended,this),e.off(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(V.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(V.MEDIA_ENDED,this.onMediaEnded,this),e.off(V.ERROR,this.onError,this),e.off(V.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){ns(e,"play",this.onPlay),ns(e,"pause",this.onPause),ns(e,"seeking",this.onSeeking),ns(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,i){const n=this.media=i.media;Yn(n,"seeking",this.onSeeking),Yn(n,"timeupdate",this.onTimeupdate),Yn(n,"play",this.onPlay),Yn(n,"pause",this.onPause)}onMediaAttached(e,i){const n=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!s){this.clearScheduleState();const r=this.findItemIndex(n);this.setSchedulePosition(r)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,i){const n=!!i.transferMedia,s=this.media;if(this.media=null,!n&&(s&&this.removeMediaListeners(s),this.detachedData)){const r=this.getBufferingPlayer();r&&(this.log(`Removing schedule state for detachedData and ${r}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,r.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,i=()=>e.bufferingItem||e.waitingItem,n=d=>d&&e.getAssetPlayer(d.identifier),s=(d,f,h,p,m)=>{if(d){let g=d[f].start;const v=d.event;if(v){if(f==="playout"||v.timelineOccupancy!==Gh.Point){const b=n(h);b?.interstitial===v&&(g+=b.assetItem.startOffset+b[m])}}else{const b=p==="bufferedPos"?o():e[p];g+=b-d.start}return g}return 0},r=(d,f)=>{var h;if(d!==0&&f!=="primary"&&(h=e.schedule)!=null&&h.length){var p;const m=e.schedule.findItemIndexAtTime(d),g=(p=e.schedule.items)==null?void 0:p[m];if(g){const v=g[f].start-g.start;return d+v}}return d},o=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?a("primary"):Math.max(d,0)},a=d=>{var f,h;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:((h=e.schedule)==null?void 0:h.durations[d])||0},l=(d,f)=>{var h,p;const m=e.effectivePlayingItem;if(m!=null&&(h=m.event)!=null&&h.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${f}"`);const g=e.effectivePlayingItem,v=e.schedule.findItemIndexAtTime(d,f),b=(p=e.schedule.items)==null?void 0:p[v],_=e.getBufferingPlayer(),y=_?.interstitial,E=y?.appendInPlace,S=g&&e.itemsMatch(g,b);if(g&&(E||S)){const A=n(e.playingAsset),C=A?.media||e.primaryMedia;if(C){const T=f==="primary"?C.currentTime:s(g,f,e.playingAsset,"timelinePos","currentTime"),I=d-T,D=(E?T:C.currentTime)+I;if(D>=0&&(!A||E||D<=A.duration)){C.currentTime=D;return}}}if(b){let A=d;if(f!=="primary"){const T=b[f].start,I=d-T;A=b.start+I}const C=!e.isInterstitial(b);if((!e.isInterstitial(g)||g.event.appendInPlace)&&(C||b.event.appendInPlace)){const T=e.media||(E?_?.media:null);T&&(T.currentTime=A)}else if(g){const T=e.findItemIndex(g);if(v>T){const D=e.schedule.findJumpRestrictedIndex(T+1,v);if(D>T){e.setSchedulePosition(D);return}}let I=0;if(C)e.timelinePos=A,e.checkBuffer();else{const D=b.event.assetList,R=d-(b[f]||b).start;for(let O=D.length;O--;){const M=D[O];if(M.duration&&R>=M.startOffset&&R<M.startOffset+M.duration){I=O;break}}}e.setSchedulePosition(v,I)}}},u=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const f=i();return e.isInterstitial(f)?f:null},c={get bufferedEnd(){const d=i(),f=e.bufferingItem;if(f&&f===d){var h;return s(f,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-f.playout.start||((h=e.bufferingAsset)==null?void 0:h.startOffset)||0}return 0},get currentTime(){const d=u(),f=e.effectivePlayingItem;return f&&f===d?s(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(d){const f=u(),h=e.effectivePlayingItem;h&&h===f&&l(d+h.playout.start,"playout")},get duration(){const d=u();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const f=(d=u())==null?void 0:d.event.assetList;return f?f.map(h=>e.getAssetPlayer(h.identifier)):[]},get playingIndex(){var d;const f=(d=u())==null?void 0:d.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return u()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return i()},get bufferingIndex(){const d=i();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return o()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return a("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(i(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return a("integrated")},get seekableStart(){var d;return r(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,f=d?.event;if(f&&!f.restrictions.skip){const h=e.findItemIndex(d);if(f.appendInPlace){const p=d.playout.start+d.event.duration;l(p+.001,"playout")}else e.advanceAfterAssetEnded(f,h,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const i=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!i||!n?!1:this.findItemIndex(i)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,i;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(s=this.primaryMedia);const r=(i=s)==null?void 0:i.currentTime;if(!(r===void 0||!Ze(r)))return r}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,i){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,i)}transferMediaFromPlayer(e,i){const n=e.interstitial.appendInPlace,s=e.media;if(n&&s===this.primaryMedia){if(this.bufferingAsset=null,(!i||this.isInterstitial(i)&&!i.event.appendInPlace)&&i&&s){this.detachedData={media:s};return}const r=e.transferMedia();this.log(`transfer MediaSource from ${e} ${ui(r)}`),this.detachedData=r}else i&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,i){var n,s;if(e.media===i)return;let r=null;const o=this.hls,a=e!==o,l=a&&e.interstitial.appendInPlace,u=(n=this.detachedData)==null?void 0:n.mediaSource;let c;if(o.media)l&&(r=o.transferMedia(),this.detachedData=r),c="Primary";else if(u){const p=this.getBufferingPlayer();p?(r=p.transferMedia(),c=`${p}`):c="detached MediaSource"}else c="detached media";if(!r){if(u)r=this.detachedData,this.log(`using detachedData: MediaSource ${ui(r)}`);else if(!this.detachedData||o.media===i){const p=this.playerQueue;p.length>1&&p.forEach(m=>{if(a&&m.interstitial.appendInPlace!==l){const g=m.interstitial;this.clearInterstitial(m.interstitial,null),g.appendInPlace=!1,g.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${g}`)}}),this.hls.detachMedia(),this.detachedData={media:i}}}const d=r&&"mediaSource"in r&&((s=r.mediaSource)==null?void 0:s.readyState)!=="closed",f=d&&r?r:i;this.log(`${d?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${c} (media.currentTime: ${i.currentTime})`);const h=this.schedule;if(f===r&&h){const p=a&&e.assetId===h.assetIdAtEnd;f.overrides={duration:h.duration,endOfStream:!a||p,cueRemoval:!a}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,i=e?.events;if(!i||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,s=this.effectivePlayingItem;if(n===-1){const r=this.hls.startPosition;if(this.log(Wh("checkStart",r)),this.timelinePos=r,i.length&&i[0].cue.pre){const o=e.findEventIndex(i[0].identifier);this.setSchedulePosition(o)}else if(r>=0||!this.primaryLive){const o=this.timelinePos=r>0?r:0,a=e.findItemIndexAtTime(o);this.setSchedulePosition(a)}}else if(s&&!this.playingItem){const r=e.findItemIndex(s);this.setSchedulePosition(r)}}advanceAssetBuffering(e,i){const n=e.event,s=n.findAssetIndex(i),r=Ug(n,s);if(!n.isAssetPastPlayoutLimit(r))this.bufferedToEvent(e,r);else if(this.schedule){var o;const a=(o=this.schedule.items)==null?void 0:o[this.findItemIndex(e)+1];a&&this.bufferedToItem(a)}}advanceAfterAssetEnded(e,i,n){const s=Ug(e,n);if(e.isAssetPastPlayoutLimit(s)){if(this.schedule){const r=this.schedule.items;if(r){const o=i+1,a=r.length;if(o>=a){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(Wh("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(o)}}}else{if(e.appendInPlace){const r=e.assetList[s];r&&this.advanceInPlace(r.timelineStart)}this.setSchedulePosition(i,s)}}setScheduleToAssetAtTime(e,i){const n=this.schedule;if(!n)return;const s=i.parentIdentifier,r=n.getEvent(s);if(r){const o=n.findEventIndex(s),a=n.findAssetIndex(r,e);this.advanceAfterAssetEnded(r,o,a-1)}}setSchedulePosition(e,i){var n;const s=(n=this.schedule)==null?void 0:n.items;if(!s||this.playbackDisabled)return;const r=e>=0?s[e]:null;this.log(`setSchedulePosition ${e}, ${i} (${r&&ar(r)}) pos: ${this.timelinePos}`);const o=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(o)){const c=o.event,d=this.playingAsset,f=d?.identifier,h=f?this.getAssetPlayer(f):null;if(h&&f&&(!this.eventItemsMatch(o,r)||i!==void 0&&f!==c.assetList[i].identifier)){var l;const p=c.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${c.assetList.length} ${tu(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(V.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:p,event:c,schedule:s.slice(0),scheduleIndex:e,player:h}),o!==this.playingItem){this.itemsMatch(o,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(c,this.findItemIndex(this.playingItem),p);return}this.retreiveMediaSource(f,r),h.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(o,r)&&(this.endedItem=o,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${ar(o)}`),c.hasPlayed=!0,this.hls.trigger(V.INTERSTITIAL_ENDED,{event:c,schedule:s.slice(0),scheduleIndex:e}),c.cue.once)){var u;this.updateSchedule();const p=(u=this.schedule)==null?void 0:u.items;if(r&&p){const m=this.findItemIndex(r);this.advanceSchedule(m,p,i,o,a)}return}}this.advanceSchedule(e,s,i,o,a)}advanceSchedule(e,i,n,s,r){const o=this.schedule;if(!o)return;const a=i[e]||null,l=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(c=>{const d=c.interstitial,f=o.findEventIndex(d.identifier);(f<e||f>e+1)&&this.clearInterstitial(d,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const c=a.event;if(n===void 0){n=o.findAssetIndex(c,this.timelinePos);const p=Ug(c,n-1);if(c.isAssetPastPlayoutLimit(p)||c.appendInPlace&&this.timelinePos===a.end){this.advanceAfterAssetEnded(c,e,n);return}n=p}const d=this.waitingItem;this.assetsBuffered(a,l)||this.setBufferingItem(a);let f=this.preloadAssets(c,n);if(this.eventItemsMatch(a,d||s)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${ar(a)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger(V.INTERSTITIAL_STARTED,{event:c,schedule:i.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const h=c.assetList[n];if(!h){this.advanceAfterAssetEnded(c,e,n||0);return}if(f||(f=this.getAssetPlayer(h.identifier)),f===null||f.destroyed){const p=c.assetList.length;this.warn(`asset ${n+1}/${p} player destroyed ${c}`),f=this.createAssetPlayer(c,h,n),f.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(f,n,i,e,l),this.shouldPlay&&S6(f.media)}else a?(this.resumePrimary(a,e,s),this.shouldPlay&&S6(this.hls.media)):r&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(o.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,i,n){var s,r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${ar(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,i),this.log(Wh("resumePrimary",a)),this.timelinePos=a),this.attachPrimary(a,e)}if(!n)return;const o=(r=this.schedule)==null?void 0:r.items;o&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${ar(e)}`),this.hls.trigger(V.INTERSTITIALS_PRIMARY_RESUMED,{schedule:o.slice(0),scheduleIndex:i}),this.checkBuffer())}getPrimaryResumption(e,i){const n=e.start;if(this.primaryLive){const s=this.primaryDetails;if(i===0)return this.hls.startPosition;if(s&&(n<s.fragmentStart||n>s.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const i=this.getAssetPlayer(e.identifier);return i!=null&&i.hls?i.hls.bufferedToEnd:bt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,i,n){i?this.setBufferingItem(i):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const r=this.hls;r.media?this.checkBuffer():(this.transferMediaTo(r,s),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Wh("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,i){var n;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((n=s.mainForwardBufferInfo)==null?void 0:n.start)||s.media.currentTime)-e)>.5?s.startLoad(e,i):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(V.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(V.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,i){if(i.level===-1||!this.schedule)return;const n=this.hls.levels[i.level];if(!n.details)return;const s=ei(ei({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,i){const n=this.hls.audioTracks[i.id],s=this.mediaSelection;if(!s){this.altSelection=ei(ei({},this.altSelection),{},{audio:n});return}const r=ei(ei({},s),{},{audio:n});this.mediaSelection=r}onSubtitleTrackUpdated(e,i){const n=this.hls.subtitleTracks[i.id],s=this.mediaSelection;if(!s){this.altSelection=ei(ei({},this.altSelection),{},{subtitles:n});return}const r=ei(ei({},s),{},{subtitles:n});this.mediaSelection=r}onAudioTrackSwitching(e,i){const n=I9(i);this.playerQueue.forEach(({hls:s})=>s&&(s.setAudioOption(i)||s.setAudioOption(n)))}onSubtitleTrackSwitch(e,i){const n=I9(i);this.playerQueue.forEach(({hls:s})=>s&&(s.setSubtitleOption(i)||i.id!==-1&&s.setSubtitleOption(n)))}onBufferCodecs(e,i){const n=i.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,i){this.checkBuffer()}onBufferFlushed(e,i){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const i=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&i){for(let s=0;s<i.length;s++){const r=i[s];if(r.cue.post){var n;const o=this.schedule.findEventIndex(r.identifier),a=(n=this.schedule.items)==null?void 0:n[o];this.isInterstitial(a)&&this.eventItemsMatch(a,this.bufferingItem)&&this.bufferedToItem(a,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const i=this.playingItem;if(!this.playingLastItem&&i){const n=this.findItemIndex(i);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,i){var n;const s=(n=this.schedule)==null?void 0:n.items;if(e&&s){const r=this.findItemIndex(e,i);return s[r]||null}return null}trimInPlace(e,i){if(this.isInterstitial(e)&&e.event.appendInPlace&&i.end-e.end>.25){e.event.assetList.forEach((r,o)=>{e.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(r.identifier,null)});const n=e.end+.25,s=bt.bufferInfo(this.primaryMedia,n,0);(s.end>n||(s.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${ar(e)} (was ${ar(i)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,i){return!!i&&(e===i||e.event&&i.event&&this.eventItemsMatch(e,i)||!e.event&&!i.event&&this.findItemIndex(e)===this.findItemIndex(i))}eventItemsMatch(e,i){var n;return!!i&&(e===i||e.event.identifier===((n=i.event)==null?void 0:n.identifier))}findItemIndex(e,i){return e&&this.schedule?this.schedule.findItemIndex(e,i):-1}updateSchedule(e=!1){var i;const n=this.mediaSelection;n&&((i=this.schedule)==null||i.updateSchedule(n,[],e))}checkBuffer(e){var i;const n=(i=this.schedule)==null?void 0:i.items;if(!n)return;const s=bt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=s.len<1),this.updateBufferedPos(s.end,n,e)}updateBufferedPos(e,i,n){const s=this.schedule,r=this.bufferingItem;if(this.bufferedPos>e||!s)return;if(i.length===1&&this.itemsMatch(i[0],r)){this.bufferedPos=e;return}const o=this.playingItem,a=this.findItemIndex(o);let l=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var u;const c=this.findItemIndex(r),d=Math.min(c+1,i.length-1),f=i[d];if((l===-1&&r&&e>=r.end||(u=f.event)!=null&&u.appendInPlace&&e+.01>=f.start)&&(l=d),this.isInterstitial(r)){const h=r.event;if(d-a>1&&h.appendInPlace===!1||h.assetList.length===0&&h.assetListLoader)return}if(this.bufferedPos=e,l>c&&l>a)this.bufferedToItem(f);else{const h=this.primaryDetails;this.primaryLive&&h&&e>h.edge-h.targetduration&&f.start<h.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else n&&o&&!this.itemsMatch(o,r)&&(l===a?this.bufferedToItem(o):l===a+1&&this.bufferedToItem(i[l]))}assetsBuffered(e,i){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const r=this.getAssetPlayer(s.identifier);return!(r!=null&&r.bufferedInPlaceToEnd(i))})}setBufferingItem(e){const i=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,i)&&n){const{items:s,events:r}=n;if(!s||!r)return i;const o=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=a?a.remaining:i?i.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${ar(e)}`+(i?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(o){const u=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((c,d)=>{const f=this.getAssetPlayer(c.identifier);f&&(d===u&&f.loadSource(),f.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering());this.hls.trigger(V.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:r.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return i}bufferedToItem(e,i=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,i);else if(n!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const i=this.findItemIndex(e),n=this.getPrimaryResumption(e,i);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,i){const n=e.event,s=n.assetList.length===0&&!n.assetListLoader,r=n.cue.once;if(s||!r){const o=this.preloadAssets(n,i);if(o!=null&&o.interstitial.appendInPlace){const a=this.primaryMedia;a&&this.bufferAssetPlayer(o,a)}}}preloadAssets(e,i){const n=e.assetUrl,s=e.assetList.length,r=s===0&&!e.assetListLoader,o=e.cue.once;if(r){const l=e.timelineStart;if(e.appendInPlace){var a;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(a=f.nextEvent)==null?void 0:a.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let u,c=0;if(!this.playingItem&&this.primaryLive&&(c=this.hls.startPosition,c===-1&&(c=this.hls.liveSyncPosition||0)),c&&!(e.cue.pre||e.cue.post)){const f=c-l;f>0&&(u=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${i+1}/${n?1:s} ${e}${u?` live-start: ${c} start-offset: ${u}`:""}`),n)return this.createAsset(e,0,0,l,e.duration,n);const d=this.assetListLoader.loadAssetList(e,u);d&&(e.assetListLoader=d)}else if(!o&&s){for(let u=i;u<s;u++){const c=e.assetList[u],d=this.getAssetPlayerQueueIndex(c.identifier);(d===-1||this.playerQueue[d].destroyed)&&!c.error&&this.createAssetPlayer(e,c,u)}const l=e.assetList[i];if(l){const u=this.getAssetPlayer(l.identifier);return u&&u.loadSource(),u}}return null}flushFrontBuffer(e){const i=this.requiredTracks;if(!i)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(i).forEach(s=>{this.hls.trigger(V.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const i=this.playerQueue;for(let n=0;n<i.length;n++)if(e===i[n].assetId)return n;return-1}getAssetPlayer(e){const i=this.getAssetPlayerQueueIndex(e);return this.playerQueue[i]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:i}=this;if(i){for(let n=0;n<e.length;n++)if(e[n].media===i)return e[n]}return null}createAsset(e,i,n,s,r,o){const a={parentIdentifier:e.identifier,identifier:bH(e,o,i),duration:r,startOffset:n,timelineStart:s,uri:o};return this.createAssetPlayer(e,a,i)}createAssetPlayer(e,i,n){const s=this.hls,r=s.userConfig;let o=r.videoPreference;const a=s.loadLevelObj||s.levels[s.currentLevel];(o||a)&&(o=si({},o),a.videoCodec&&(o.videoCodec=a.videoCodec),a.videoRange&&(o.allowedVideoRanges=[a.videoRange]));const l=s.audioTracks[s.audioTrack],u=s.subtitleTracks[s.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const y=this.timelinePos-i.timelineStart;if(y>1){const E=i.duration;E&&y<E&&(c=y)}}const d=i.identifier,f=ei(ei({},r),{},{maxMaxBufferLength:Math.min(180,s.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:l||r.audioPreference,subtitlePreference:u||r.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,i.timelineStart&&(f.timelineOffset=i.timelineStart));const h=f.cmcd;h!=null&&h.sessionId&&h.contentId&&(f.cmcd=si({},h,{contentId:Vc(i.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const p=new EH(this.HlsPlayerClass,f,e,i);this.playerQueue.push(p),e.assetList[n]=i;let m=!0;const g=y=>{if(y.live){var E;const C=new Error(`Interstitials MUST be VOD assets ${e}`),T={fatal:!0,type:at.OTHER_ERROR,details:Le.INTERSTITIAL_ASSET_ITEM_ERROR,error:C},I=((E=this.schedule)==null?void 0:E.findEventIndex(e.identifier))||-1;this.handleAssetItemError(T,e,I,n,C.message);return}const S=y.edge-y.fragmentStart,A=i.duration;(m||A===null||S>A)&&(m=!1,this.log(`Interstitial asset "${d}" duration change ${A} > ${S}`),i.duration=S,this.updateSchedule())};p.on(V.LEVEL_UPDATED,(y,{details:E})=>g(E)),p.on(V.LEVEL_PTS_UPDATED,(y,{details:E})=>g(E)),p.on(V.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const v=(y,E)=>{const S=this.getAssetPlayer(d);if(S&&E.tracks){S.off(V.BUFFER_CODECS,v),S.tracks=E.tracks;const A=this.primaryMedia;this.bufferingAsset===S.assetItem&&A&&!S.media&&this.bufferAssetPlayer(S,A)}};p.on(V.BUFFER_CODECS,v);const b=()=>{var y;const E=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${E}`),!E||!this.schedule)return;const S=this.schedule.findEventIndex(e.identifier),A=(y=this.schedule.items)==null?void 0:y[S];this.isInterstitial(A)&&this.advanceAssetBuffering(A,i)};p.on(V.BUFFERED_TO_END,b);const _=y=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const S=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,S,y)};return p.once(V.MEDIA_ENDED,_(n)),p.once(V.PLAYOUT_LIMIT_REACHED,_(1/0)),p.on(V.ERROR,(y,E)=>{if(!this.schedule)return;const S=this.getAssetPlayer(d);if(E.details===Le.BUFFER_STALLED_ERROR){if(S!=null&&S.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(E,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${E.error} ${e}`)}),p.on(V.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const E=new Error(`Asset player destroyed unexpectedly ${d}`),S={fatal:!0,type:at.OTHER_ERROR,details:Le.INTERSTITIAL_ASSET_ITEM_ERROR,error:E};this.handleAssetItemError(S,e,this.schedule.findEventIndex(e.identifier),n,E.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${tu(i)}`),this.hls.trigger(V.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:i,assetListIndex:n,event:e,player:p}),p}clearInterstitial(e,i){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,i)}),e.reset()}resetAssetPlayer(e){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[i];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,i){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const s=this.playerQueue[n];this.log(`clear ${s} toSegment: ${i&&ar(i)}`),this.transferMediaFromPlayer(s,i),this.playerQueue.splice(n,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,i,n,s,r){const{interstitial:o,assetItem:a,assetId:l}=e,u=o.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,(!c||c.identifier!==l)&&(c&&(this.clearAssetPlayer(c.identifier,n[s]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${i+1}/${u} ${tu(a)}`),this.hls.trigger(V.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:i,event:o,schedule:n.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,r)}bufferAssetPlayer(e,i){var n,s;if(!this.schedule)return;const{interstitial:r,assetItem:o}=e,a=this.schedule.findEventIndex(r.identifier),l=(n=this.schedule.items)==null?void 0:n[a];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=o;const u=this.getBufferingPlayer();if(u===e)return;const c=r.appendInPlace;if(c&&u?.interstitial.appendInPlace===!1)return;const d=u?.tracks||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(c&&o!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!n9(d,e.tracks)){const f=new Error(`Asset ${tu(o)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),h={fatal:!0,type:at.OTHER_ERROR,details:Le.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},p=r.findAssetIndex(o);this.handleAssetItemError(h,r,a,p,f.message);return}}this.transferMediaTo(e,i)}handleInPlaceStall(e){const i=this.schedule,n=this.primaryMedia;if(!i||!n)return;const s=n.currentTime,r=i.findAssetIndex(e,s),o=e.assetList[r];if(o){const a=this.getAssetPlayer(o.identifier);if(a){const l=a.currentTime||s-o.timelineStart,u=a.duration-l;if(this.warn(`Stalled at ${l} of ${l+u} in ${a} ${e} (media.currentTime: ${s})`),l&&(u/n.playbackRate<.5||a.bufferedInPlaceToEnd(n))&&a.hls){const c=i.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,c,r)}}}}advanceInPlace(e){const i=this.primaryMedia;i&&i.currentTime<e&&(i.currentTime=e)}handleAssetItemError(e,i,n,s,r){if(e.details===Le.BUFFER_STALLED_ERROR)return;const o=i.assetList[s]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&tu(o)} ${e.error}`),!this.schedule)return;const a=o?.identifier||"",l=this.getAssetPlayerQueueIndex(a),u=this.playerQueue[l]||null,c=this.schedule.items,d=si({},e,{fatal:!1,errorAction:Wl(!0),asset:o,assetListIndex:s,event:i,schedule:c,scheduleIndex:n,player:u});if(this.hls.trigger(V.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const f=this.playingAsset,h=this.bufferingAsset,p=new Error(r);if(o&&(this.clearAssetPlayer(a,null),o.error=p),!i.assetList.some(m=>!m.error))i.error=p;else for(let m=s;m<i.assetList.length;m++)this.resetAssetPlayer(i.assetList[m].identifier);this.updateSchedule(!0),i.error?this.primaryFallback(i):f&&f.identifier===a?this.advanceAfterAssetEnded(i,n,s):h&&h.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const i=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${i} pos: ${this.timelinePos} playing: ${ar(n)} error: ${e.error}`);let s=this.timelinePos;s===-1&&(s=this.hls.startPosition);const r=this.updateItem(n,s);if(this.itemsMatch(n,r)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(i,null),this.flushFrontBuffer(i)),!this.schedule)return;const o=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(o)}else this.checkStart()}onAssetListLoaded(e,i){var n,s;const r=i.event,o=r.identifier,a=i.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(o)))return;const l=r.timelineStart,u=r.duration;let c=0;a.forEach((m,g)=>{const v=parseFloat(m.DURATION);this.createAsset(r,g,c,l+c,v,m.URI),c+=v}),r.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${u}) ${r}`);const d=this.waitingItem,f=d?.event.identifier===o;this.updateSchedule();const h=(s=this.bufferingItem)==null?void 0:s.event;if(f){var p;const m=this.schedule.findEventIndex(o),g=(p=this.schedule.items)==null?void 0:p[m];if(g){if(!this.playingItem&&this.timelinePos>g.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==m){r.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${r}`),this.updateSchedule(!0),this.primaryFallback(r);return}this.setBufferingItem(g)}this.setSchedulePosition(m)}else if(h?.identifier===o){const m=r.assetList[0];if(m){const g=this.getAssetPlayer(m.identifier);if(h.appendInPlace){const v=this.primaryMedia;g&&v&&this.bufferAssetPlayer(g,v)}else g&&g.loadSource()}}}onError(e,i){if(this.schedule)switch(i.details){case Le.ASSET_LIST_PARSING_ERROR:case Le.ASSET_LIST_LOAD_ERROR:case Le.ASSET_LIST_LOAD_TIMEOUT:{const n=i.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case Le.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const x6=500;class AH extends pg{constructor(e,i,n){super(e,i,n,"subtitle-stream-controller",it.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(V.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(V.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(V.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(V.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,i){this.stopLoad(),this.state=$e.IDLE,this.setInterval(x6),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=i?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,i){this.tracksBuffered=[],super.onMediaDetaching(e,i)}onLevelLoaded(e,i){this.mainDetails=i.details}onSubtitleFragProcessed(e,i){const{frag:n,success:s}=i;if(this.fragContextChanged(n)||(Hi(n)&&(this.fragPrevious=n),this.state=$e.IDLE),!s)return;const r=this.tracksBuffered[this.currentTrackId];if(!r)return;let o;const a=n.start;for(let u=0;u<r.length;u++)if(a>=r[u].start&&a<=r[u].end){o=r[u];break}const l=n.start+n.duration;o?o.end=l:(o={start:a,end:l},r.push(o)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,i){const{startOffset:n,endOffset:s}=i;if(n===0&&s!==Number.POSITIVE_INFINITY){const r=s-1;if(r<=0)return;i.endOffsetSubtitles=Math.max(0,r),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=r){o.shift();continue}else if(o[a].start<r)o[a].start=r;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(n,r,it.SUBTITLE)}}onError(e,i){const n=i.frag;n?.type===it.SUBTITLE&&(i.details===Le.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==$e.STOPPED&&(this.state=$e.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:i}){if(this.levels&&J8(this.levels,i)){this.levels=i.map(n=>new Pc(n));return}this.tracksBuffered=[],this.levels=i.map(n=>{const s=new Pc(n);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,it.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,i){var n;if(this.currentTrackId=i.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==$e.STOPPED&&this.setInterval(x6)}onSubtitleTrackLoaded(e,i){var n;const{currentTrackId:s,levels:r}=this,{details:o,id:a}=i;if(!r){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=r[a];if(a>=r.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(o.live||(n=l.details)!=null&&n.live){if(o.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const f=d.fragments[0];if(!l.details)o.hasProgramDateTime&&d.hasProgramDateTime?(Ph(o,d),u=o.fragmentStart):f&&(u=f.start,hg(o,u));else{var c;u=this.alignPlaylists(o,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&f&&(u=f.start,hg(o,u))}d&&!this.startFragRequested&&this.setStartPosition(d,u)}l.details=o,this.levelLastLoaded=l,a===s&&(this.hls.trigger(V.SUBTITLE_TRACK_UPDATED,{details:o,id:a,groupId:i.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===$e.IDLE&&(Wa(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:i,payload:n}=e,s=i.decryptdata,r=this.hls;if(!this.fragContextChanged(i)&&n&&n.byteLength>0&&s!=null&&s.key&&s.iv&&Yl(s.method)){const o=performance.now();this.decrypter.decrypt(new Uint8Array(n),s.key.buffer,s.iv.buffer,og(s.method)).catch(a=>{throw r.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:i}),a}).then(a=>{const l=performance.now();r.trigger(V.FRAG_DECRYPTED,{frag:i,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=$e.IDLE})}}doTick(){if(!this.media){this.state=$e.IDLE;return}if(this.state===$e.IDLE){const{currentTrackId:e,levels:i}=this,n=i?.[e];if(!n||!i.length||!n.details||this.waitForLive(n))return;const{config:s}=this,r=this.getLoadPosition(),o=bt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],r,s.maxBufferHole),{end:a,len:l}=o,u=n.details,c=this.hls.maxBufferLength+u.levelTargetDuration;if(l>c)return;const d=u.fragments,f=d.length,h=u.edge;let p=null;const m=this.fragPrevious;if(a<h){const b=s.maxFragLookUpTolerance,_=a>h-b?0:b;p=Wa(m,d,Math.max(d[0].start,a),_),!p&&m&&m.start<d[0].start&&(p=d[0])}else p=d[f-1];if(p=this.filterReplacedPrimary(p,n.details),!p)return;const g=p.sn-u.startSN,v=d[g-1];if(v&&v.cc===p.cc&&this.fragmentTracker.getState(v)===Zi.NOT_LOADED&&(p=v),this.fragmentTracker.getState(p)===Zi.NOT_LOADED){const b=this.mapToInitFragWhenRequired(p);b&&this.loadFragment(b,n,a)}}}loadFragment(e,i,n){Hi(e)?super.loadFragment(e,i,n):this._loadInitSegment(e,i)}get mediaBufferTimeRanges(){return new kH(this.tracksBuffered[this.currentTrackId]||[])}}class kH{constructor(e){this.buffered=void 0;const i=(n,s,r)=>{if(s=s>>>0,s>r-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${r})`);return e[s][n]};this.buffered={get length(){return e.length},end(n){return i("end",n,e.length)},start(n){return i("start",n,e.length)}}}}const CH={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},T6=t=>String.fromCharCode(CH[t]||t),lr=15,_o=100,LH={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},IH={17:2,18:4,21:6,22:8,23:10,19:13,20:15},RH={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},PH={25:2,26:4,29:6,30:8,31:10,27:13,28:15},DH=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class OH{constructor(){this.time=null,this.verboseLevel=0}log(e,i){if(this.verboseLevel>=e){const n=typeof i=="function"?i():i;ti.log(`${this.time} [${e}] ${n}`)}}}const Xa=function(e){const i=[];for(let n=0;n<e.length;n++)i.push(e[n].toString(16));return i};class A6{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const i=["foreground","underline","italics","background","flash"];for(let n=0;n<i.length;n++){const s=i[n];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class MH{constructor(){this.uchar=" ",this.penState=new A6}reset(){this.uchar=" ",this.penState.reset()}setChar(e,i){this.uchar=e,this.penState.copy(i)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class $H{constructor(e){this.chars=[],this.pos=0,this.currPenState=new A6,this.cueStartTime=null,this.logger=void 0;for(let i=0;i<_o;i++)this.chars.push(new MH);this.logger=e}equals(e){for(let i=0;i<_o;i++)if(!this.chars[i].equals(e.chars[i]))return!1;return!0}copy(e){for(let i=0;i<_o;i++)this.chars[i].copy(e.chars[i])}isEmpty(){let e=!0;for(let i=0;i<_o;i++)if(!this.chars[i].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>_o&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=_o)}moveCursor(e){const i=this.pos+e;if(e>1)for(let n=this.pos+1;n<i+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(i)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const i=T6(e);if(this.pos>=_o){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+i+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1)}clearFromPos(e){let i;for(i=e;i<_o;i++)this.chars[i].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let i=!0;for(let n=0;n<_o;n++){const s=this.chars[n].uchar;s!==" "&&(i=!1),e.push(s)}return i?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Vg{constructor(e){this.rows=[],this.currRow=lr-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let i=0;i<lr;i++)this.rows.push(new $H(e));this.logger=e}reset(){for(let e=0;e<lr;e++)this.rows[e].clear();this.currRow=lr-1}equals(e){let i=!0;for(let n=0;n<lr;n++)if(!this.rows[n].equals(e.rows[n])){i=!1;break}return i}copy(e){for(let i=0;i<lr;i++)this.rows[i].copy(e.rows[i])}isEmpty(){let e=!0;for(let i=0;i<lr;i++)if(!this.rows[i].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+ui(e));let i=e.row-1;if(this.nrRollUpRows&&i<this.nrRollUpRows-1&&(i=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==i){for(let a=0;a<lr;a++)this.rows[a].clear();const r=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[r].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[i-this.nrRollUpRows+u+1].copy(o.rows[r+u])}}this.currRow=i;const n=this.rows[this.currRow];if(e.indent!==null){const r=e.indent,o=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+ui(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,i=this.rows.splice(e,1)[0];i.clear(),this.rows.splice(this.currRow,0,i),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const i=[];let n="",s=-1;for(let r=0;r<lr;r++){const o=this.rows[r].getTextString();o&&(s=r+1,e?i.push("Row "+s+": '"+o+"'"):i.push(o.trim()))}return i.length>0&&(e?n="["+i.join(" | ")+"]":n=i.join(`
`)),n}getTextAndFormat(){return this.rows}}class k6{constructor(e,i,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new Vg(n),this.nonDisplayedMemory=new Vg(n),this.lastOutputScreen=new Vg(n),this.currRollUpRow=this.displayedMemory.rows[lr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[lr-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>i+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const i={flash:!1};if(i.underline=e%2===1,i.italics=e>=46,i.italics)i.foreground="white";else{const n=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];i.foreground=s[n]}this.logger.log(2,"MIDROW: "+ui(i)),this.writeScreen.setPen(i)}outputDataUpdate(e=!1){const i=this.logger.time;i!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=i:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,i,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:i),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class C6{constructor(e,i,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=BH(),this.logger=void 0;const s=this.logger=new OH;this.channels=[null,new k6(e,i,s),new k6(e+1,n,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,i){this.channels[e].setHandler(i)}addData(e,i){this.logger.time=e;for(let n=0;n<i.length;n+=2){const s=i[n]&127,r=i[n+1]&127;let o=!1,a=null;if(s===0&&r===0)continue;this.logger.log(3,()=>"["+Xa([i[n],i[n+1]])+"] -> ("+Xa([s,r])+")");const l=this.cmdHistory;if(s>=16&&s<=31){if(FH(s,r,l)){Kh(null,null,l),this.logger.log(3,()=>"Repeated command ("+Xa([s,r])+") is dropped");continue}Kh(s,r,this.cmdHistory),o=this.parseCmd(s,r),o||(o=this.parseMidrow(s,r)),o||(o=this.parsePAC(s,r)),o||(o=this.parseBackgroundAttributes(s,r))}else Kh(null,null,l);if(!o&&(a=this.parseChars(s,r),a)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Xa([s,r])+" orig: "+Xa([i[n],i[n+1]]))}}parseCmd(e,i){const n=(e===20||e===28||e===21||e===29)&&i>=32&&i<=47,s=(e===23||e===31)&&i>=33&&i<=35;if(!(n||s))return!1;const r=e===20||e===21||e===23?1:2,o=this.channels[r];return e===20||e===21||e===28||e===29?i===32?o.ccRCL():i===33?o.ccBS():i===34?o.ccAOF():i===35?o.ccAON():i===36?o.ccDER():i===37?o.ccRU(2):i===38?o.ccRU(3):i===39?o.ccRU(4):i===40?o.ccFON():i===41?o.ccRDC():i===42?o.ccTR():i===43?o.ccRTD():i===44?o.ccEDM():i===45?o.ccCR():i===46?o.ccENM():i===47&&o.ccEOC():o.ccTO(i-32),this.currentChannel=r,!0}parseMidrow(e,i){let n=0;if((e===17||e===25)&&i>=32&&i<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[n];return s?(s.ccMIDROW(i),this.logger.log(3,()=>"MIDROW ("+Xa([e,i])+")"),!0):!1}return!1}parsePAC(e,i){let n;const s=(e>=17&&e<=23||e>=25&&e<=31)&&i>=64&&i<=127,r=(e===16||e===24)&&i>=64&&i<=95;if(!(s||r))return!1;const o=e<=23?1:2;i>=64&&i<=95?n=o===1?LH[e]:RH[e]:n=o===1?IH[e]:PH[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(n,i)),this.currentChannel=o,!0):!1}interpretPAC(e,i){let n;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return i>95?n=i-96:n=i-64,s.underline=(n&1)===1,n<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((n-16)/2)*4,s}parseChars(e,i){let n,s=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&r<=19){let o;r===17?o=i+80:r===18?o=i+112:o=i+144,this.logger.log(2,()=>"Special char '"+T6(o)+"' in channel "+n),s=[o]}else e>=32&&e<=127&&(s=i===0?[e]:[e,i]);return s&&this.logger.log(3,()=>"Char codes =  "+Xa(s).join(",")),s}parseBackgroundAttributes(e,i){const n=(e===16||e===24)&&i>=32&&i<=47,s=(e===23||e===31)&&i>=45&&i<=47;if(!(n||s))return!1;let r;const o={};e===16||e===24?(r=Math.floor((i-32)/2),o.background=DH[r],i%2===1&&(o.background=o.background+"_semi")):i===45?o.background="transparent":(o.foreground="black",i===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const i=this.channels[e];i&&i.reset()}Kh(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let i=0;i<this.channels.length;i++){const n=this.channels[i];n&&n.cueSplitAtTime(e)}}}function Kh(t,e,i){i.a=t,i.b=e}function FH(t,e,i){return i.a===t&&i.b===e}function BH(){return{a:null,b:null}}var jg=(function(){if(Lh!=null&&Lh.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function i(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const u=l.toLowerCase();return~a.indexOf(u)?u:!1}function n(a){return i(t,a)}function s(a){return i(e,a)}function r(a,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const d in c)a[d]=c[d]}return a}function o(a,l,u){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let f="",h=!1,p=a,m=l,g=u,v=null,b="",_=!0,y="auto",E="start",S=50,A="middle",C=50,T="middle";Object.defineProperty(c,"id",r({},d,{get:function(){return f},set:function(I){f=""+I}})),Object.defineProperty(c,"pauseOnExit",r({},d,{get:function(){return h},set:function(I){h=!!I}})),Object.defineProperty(c,"startTime",r({},d,{get:function(){return p},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");p=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",r({},d,{get:function(){return m},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");m=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",r({},d,{get:function(){return g},set:function(I){g=""+I,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",r({},d,{get:function(){return v},set:function(I){v=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",r({},d,{get:function(){return b},set:function(I){const D=n(I);if(D===!1)throw new SyntaxError("An invalid or illegal string was specified.");b=D,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",r({},d,{get:function(){return _},set:function(I){_=!!I,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",r({},d,{get:function(){return y},set:function(I){if(typeof I!="number"&&I!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");y=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",r({},d,{get:function(){return E},set:function(I){const D=s(I);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");E=D,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",r({},d,{get:function(){return S},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");S=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",r({},d,{get:function(){return A},set:function(I){const D=s(I);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");A=D,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",r({},d,{get:function(){return C},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");C=I,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",r({},d,{get:function(){return T},set:function(I){const D=s(I);if(!D)throw new SyntaxError("An invalid or illegal string was specified.");T=D,this.hasBeenReset=!0}})),c.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o})();class NH{decode(e,i){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function L6(t){function e(n,s,r,o){return(n|0)*3600+(s|0)*60+(r|0)+parseFloat(o||0)}const i=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?e(i[2],i[3],0,i[4]):e(i[1],i[2],i[3],i[4]):null}class UH{constructor(){this.values=Object.create(null)}set(e,i){!this.get(e)&&i!==""&&(this.values[e]=i)}get(e,i,n){return n?this.has(e)?this.values[e]:i[n]:this.has(e)?this.values[e]:i}has(e){return e in this.values}alt(e,i,n){for(let s=0;s<n.length;++s)if(i===n[s]){this.set(e,i);break}}integer(e,i){/^-?\d+$/.test(i)&&this.set(e,parseInt(i,10))}percent(e,i){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(i)){const n=parseFloat(i);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function I6(t,e,i,n){const s=n?t.split(n):[t];for(const r in s){if(typeof s[r]!="string")continue;const o=s[r].split(i);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const Hg=new jg(0,0,""),Yh=Hg.align==="middle"?"middle":"center";function VH(t,e,i){const n=t;function s(){const a=L6(t);if(a===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function r(a,l){const u=new UH;I6(a,function(f,h){let p;switch(f){case"region":for(let m=i.length-1;m>=0;m--)if(i[m].id===h){u.set(f,i[m].region);break}break;case"vertical":u.alt(f,h,["rl","lr"]);break;case"line":p=h.split(","),u.integer(f,p[0]),u.percent(f,p[0])&&u.set("snapToLines",!1),u.alt(f,p[0],["auto"]),p.length===2&&u.alt("lineAlign",p[1],["start",Yh,"end"]);break;case"position":p=h.split(","),u.percent(f,p[0]),p.length===2&&u.alt("positionAlign",p[1],["start",Yh,"end","line-left","line-right","auto"]);break;case"size":u.percent(f,h);break;case"align":u.alt(f,h,["start",Yh,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&Hg.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",Yh);let d=u.get("position","auto");d==="auto"&&Hg.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),o(),e.endTime=s(),o(),r(t,e)}function R6(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class jH{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new NH,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const i=this;e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));function n(){let r=i.buffer,o=0;for(r=R6(r);o<r.length&&r[o]!=="\r"&&r[o]!==`
`;)++o;const a=r.slice(0,o);return r[o]==="\r"&&++o,r[o]===`
`&&++o,i.buffer=r.slice(o),a}function s(r){I6(r,function(o,a){},/:/)}try{let r="";if(i.state==="INITIAL"){if(!/\r\n|\n/.test(i.buffer))return this;r=n();const a=r.match(/^()?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");i.state="HEADER"}let o=!1;for(;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=n(),i.state){case"HEADER":/:/.test(r)?s(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new jg(0,0,""),i.state="CUE",r.indexOf("-->")===-1){i.cue.id=r;continue}case"CUE":if(!i.cue){i.state="BADCUE";continue}try{VH(r,i.cue,i.regionList)}catch{i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":{const a=r.indexOf("-->")!==-1;if(!r||a&&(o=!0)){i.oncue&&i.cue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}if(i.cue===null)continue;i.cue.text&&(i.cue.text+=`
`),i.cue.text+=r}continue;case"BADCUE":r||(i.state="ID")}}}catch{i.state==="CUETEXT"&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state=i.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(i){e.onparsingerror&&e.onparsingerror(i)}return e.onflush&&e.onflush(),this}}const HH=/\r\n|\n\r|\n|\r/g,zg=function(e,i,n=0){return e.slice(n,n+i.length)===i},zH=function(e){let i=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),r=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ze(i)||!Ze(n)||!Ze(s)||!Ze(r))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return i+=1e3*n,i+=60*1e3*s,i+=3600*1e3*r,i};function Gg(t,e,i){return Vc(t.toString())+Vc(e.toString())+Vc(i)}const GH=function(e,i,n){let s=e[i],r=e[s.prevCC];if(!r||!r.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(o=r)!=null&&o.new;){var o;e.ccOffset+=s.start-r.start,s.new=!1,s=r,r=e[s.prevCC]}e.presentationOffset=n};function WH(t,e,i,n,s,r,o){const a=new jH,l=vs(new Uint8Array(t)).trim().replace(HH,`
`).split(`
`),u=[],c=e?tj(e.baseTime,e.timescale):0;let d="00:00.000",f=0,h=0,p,m=!0;a.oncue=function(g){const v=i[n];let b=i.ccOffset;const _=(f-c)/9e4;if(v!=null&&v.new&&(h!==void 0?b=i.ccOffset=v.start:GH(i,n,_)),_){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}b=_-i.presentationOffset}const y=g.endTime-g.startTime,E=ys((g.startTime+b-h)*9e4,s*9e4)/9e4;g.startTime=Math.max(E,0),g.endTime=Math.max(E+y,0);const S=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(S)),g.id||(g.id=Gg(g.startTime,g.endTime,S)),g.endTime>0&&u.push(g)},a.onparsingerror=function(g){p=g},a.onflush=function(){if(p){o(p);return}r(u)},l.forEach(g=>{if(m)if(zg(g,"X-TIMESTAMP-MAP=")){m=!1,g.slice(16).split(",").forEach(v=>{zg(v,"LOCAL:")?d=v.slice(6):zg(v,"MPEGTS:")&&(f=parseInt(v.slice(7)))});try{h=zH(d)/1e3}catch(v){p=v}return}else g===""&&(m=!1);a.parse(g+`
`)}),a.flush()}const Wg="stpp.ttml.im1t",P6=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,D6=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,KH={left:"start",center:"center",right:"end",start:"start",end:"end"};function O6(t,e,i,n){const s=Lt(new Uint8Array(t),["mdat"]);if(s.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const r=s.map(a=>vs(a)),o=ej(e.baseTime,1,e.timescale);try{r.forEach(a=>i(YH(a,o)))}catch(a){n(a)}}function YH(t,e){const s=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(r).reduce((d,f)=>(d[f]=s.getAttribute(`ttp:${f}`)||r[f],d),{}),a=s.getAttribute("xml:space")!=="preserve",l=M6(Kg(s,"styling","style")),u=M6(Kg(s,"layout","region")),c=Kg(s,"body","[begin]");return[].map.call(c,d=>{const f=$6(d,a);if(!f||!d.hasAttribute("begin"))return null;const h=Xg(d.getAttribute("begin"),o),p=Xg(d.getAttribute("dur"),o);let m=Xg(d.getAttribute("end"),o);if(h===null)throw F6(d);if(m===null){if(p===null)throw F6(d);m=h+p}const g=new jg(h-e,m-e,f);g.id=Gg(g.startTime,g.endTime,g.text);const v=u[d.getAttribute("region")],b=l[d.getAttribute("style")],_=XH(v,b,l),{textAlign:y}=_;if(y){const E=KH[y];E&&(g.lineAlign=E),g.align=y}return si(g,_),g}).filter(d=>d!==null)}function Kg(t,e,i){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(i)):[]}function M6(t){return t.reduce((e,i)=>{const n=i.getAttribute("xml:id");return n&&(e[n]=i),e},{})}function $6(t,e){return[].slice.call(t.childNodes).reduce((i,n,s)=>{var r;return n.nodeName==="br"&&s?i+`
`:(r=n.childNodes)!=null&&r.length?$6(n,e):e?i+n.textContent.trim().replace(/\s+/g," "):i+n.textContent},"")}function XH(t,e,i){const n="http://www.w3.org/ns/ttml#styling";let s=null;const r=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&i.hasOwnProperty(o)&&(s=i[o]),r.reduce((a,l)=>{const u=Yg(e,n,l)||Yg(t,n,l)||Yg(s,n,l);return u&&(a[l]=u),a},{})}function Yg(t,e,i){return t&&t.hasAttributeNS(e,i)?t.getAttributeNS(e,i):null}function F6(t){return new Error(`Could not parse ttml timestamp ${t}`)}function Xg(t,e){if(!t)return null;let i=L6(t);return i===null&&(P6.test(t)?i=qH(t,e):D6.test(t)&&(i=ZH(t,e))),i}function qH(t,e){const i=P6.exec(t),n=(i[4]|0)+(i[5]|0)/e.subFrameRate;return(i[1]|0)*3600+(i[2]|0)*60+(i[3]|0)+n/e.frameRate}function ZH(t,e){const i=D6.exec(t),n=Number(i[1]);switch(i[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Xh{constructor(e,i){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=i}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,i,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=i,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class QH{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=U6(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(V.FRAG_LOADING,this.onFragLoading,this),e.on(V.FRAG_LOADED,this.onFragLoaded,this),e.on(V.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(V.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(V.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(V.FRAG_LOADING,this.onFragLoading,this),e.off(V.FRAG_LOADED,this.onFragLoaded,this),e.off(V.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(V.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(V.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(V.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Xh(this,"textTrack1"),i=new Xh(this,"textTrack2"),n=new Xh(this,"textTrack3"),s=new Xh(this,"textTrack4");this.cea608Parser1=new C6(1,e,i),this.cea608Parser2=new C6(3,n,s)}addCues(e,i,n,s,r){let o=!1;for(let a=r.length;a--;){const l=r[a],u=JH(l[0],l[1],i,n);if(u>=0&&(l[0]=Math.min(l[0],i),l[1]=Math.max(l[1],n),o=!0,u/(n-i)>.5))return}if(o||r.push([i,n]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,i,n,s)}else{const a=this.Cues.newCue(null,i,n,s);this.hls.trigger(V.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:i,id:n,initPTS:s,timescale:r,trackId:o}){const{unparsedVttFrags:a}=this;n===it.MAIN&&(this.initPTS[i.cc]={baseTime:s,timescale:r,trackId:o}),a.length&&(this.unparsedVttFrags=[],a.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(V.FRAG_LOADED,l):this.hls.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,i){const{media:n}=this;if(n)for(let s=0;s<n.textTracks.length;s++){const r=n.textTracks[s];if(N6(r,{name:e,lang:i,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return r}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:i,captionsTracks:n,media:s}=this,{label:r,languageCode:o}=i[e],a=this.getExistingTrack(r,o);if(a)n[e]=a,Jl(n[e]),b6(n[e],s);else{const l=this.createTextTrack("captions",r,o);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const i=this.captionsProperties[e];if(!i)return;const n=i.label,s={_id:e,label:n,kind:"captions",default:i.media?!!i.media.default:!1,closedCaptions:i.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(V.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,i,n){const s=this.media;if(s)return s.addTextTrack(e,i,n)}onMediaAttaching(e,i){this.media=i.media,i.mediaSource||this._cleanTracks()}onMediaDetaching(e,i){const n=!!i.transferMedia;if(this.media=null,n)return;const{captionsTracks:s}=this;Object.keys(s).forEach(r=>{Jl(s[r]),delete s[r]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=U6(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const i=e.textTracks;if(i)for(let n=0;n<i.length;n++)Jl(i[n])}onSubtitleTracksUpdated(e,i){const n=i.subtitleTracks||[],s=n.some(r=>r.textCodec===Wg);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(J8(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const o=this.media,a=o?zh(o.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(a){let d=null;for(let f=0;f<a.length;f++)if(a[f]&&N6(a[f],l)){d=a[f],a[f]=null;break}d&&(c=d)}if(c)Jl(c);else{const d=B6(l);c=this.createTextTrack(d,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),a!=null&&a.length){const l=a.filter(u=>u!==null).map(u=>u.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(V.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,i){this.config.enableCEA708Captions&&i.captions&&i.captions.forEach(n=>{const s=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!s)return;const r=`textTrack${s[1]}`,o=this.captionsProperties[r];o&&(o.label=n.name,n.lang&&(o.languageCode=n.lang),o.media=n)})}closedCaptionsForLevel(e){const i=this.hls.levels[e.level];return i?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,i){if(this.enabled&&i.frag.type===it.MAIN){var n,s;const{cea608Parser1:r,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:u}=i.frag,c=(n=(s=i.part)==null?void 0:s.index)!=null?n:-1;r&&o&&(u!==a+1||u===a&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(r.reset(),o.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}}onFragLoaded(e,i){const{frag:n,payload:s}=i;if(n.type===it.SUBTITLE)if(s.byteLength){const r=n.decryptdata,o="stats"in i;if(r==null||!r.encrypted||o){const a=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),a&&a.textCodec===Wg?this._parseIMSC1(n,s):this._parseVTTs(i)}}else this.hls.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,i){const n=this.hls;O6(i,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),n.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{n.logger.log(`Failed to parse IMSC1: ${s}`),n.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var i;const{frag:n,payload:s}=e,{initPTS:r,unparsedVttFrags:o}=this,a=r.length-1;if(!r[n.cc]&&a===-1){o.push(e);return}const l=this.hls,u=(i=n.initSegment)!=null&&i.data?Vs(n.initSegment.data,new Uint8Array(s)).buffer:s;WH(u,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,c=>{this._appendCues(c,n.level),l.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(n,s),l.logger.log(`Failed to parse VTT cue: ${c}`),!(d&&a>n.cc)&&l.trigger(V.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:c})})}_fallbackToIMSC1(e,i){const n=this.tracks[e.level];n.textCodec||O6(i,this.initPTS[e.cc],()=>{n.textCodec=Wg,this._parseIMSC1(e,i)},()=>{n.textCodec="wvtt"})}_appendCues(e,i){const n=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[i];if(!s||s.mode==="disabled")return;e.forEach(r=>y6(s,r))}else{const s=this.tracks[i];if(!s)return;const r=s.default?"default":"subtitles"+i;n.trigger(V.CUES_PARSED,{type:"subtitles",cues:e,track:r})}}onFragDecrypted(e,i){const{frag:n}=i;n.type===it.SUBTITLE&&this.onFragLoaded(V.FRAG_LOADED,i)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,i){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:s}=i;if(!(n.type===it.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let r=0;r<s.length;r++){const o=s[r].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();const a=this.extractCea608Data(o);this.cea608Parser1.addData(s[r].pts,a[0]),this.cea608Parser2.addData(s[r].pts,a[1])}}}onBufferFlushing(e,{startOffset:i,endOffset:n,endOffsetSubtitles:s,type:r}){const{media:o}=this;if(!(!o||o.currentTime<n)){if(!r||r==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>Bg(a[l],i,n))}if(this.config.renderTextTracksNatively&&i===0&&s!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>Bg(a[l],i,s))}}}extractCea608Data(e){const i=[[],[]],n=e[0]&31;let s=2;for(let r=0;r<n;r++){const o=e[s++],a=127&e[s++],l=127&e[s++];if(a===0&&l===0)continue;if((4&o)!==0){const c=3&o;(c===0||c===1)&&(i[c].push(a),i[c].push(l))}}return i}}function B6(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function N6(t,e){return!!t&&t.kind===B6(e)&&Ig(e,t)}function JH(t,e,i,n){return Math.min(e,n)-Math.max(t,i)}function U6(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const ez=/\s/,tz={newCue(t,e,i,n){const s=[];let r,o,a,l,u;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<n.rows.length;f++)if(r=n.rows[f],a=!0,l=0,u="",!r.isEmpty()){var d;for(let m=0;m<r.chars.length;m++)ez.test(r.chars[m].uchar)&&a?l++:(u+=r.chars[m].uchar,a=!1);r.cueStartTime=e,e===i&&(i+=1e-4),l>=16?l--:l++;const h=R6(u.trim()),p=Gg(e,i,h);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(o=new c(e,i,h),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(o))}return t&&s.length&&(s.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),s.forEach(f=>y6(t,f))),s}};function iz(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const nz=/(\d+)-(\d+)\/(\d+)/;class V6{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||az,this.controller=new self.AbortController,this.stats=new W1}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,i,n){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const r=sz(e,this.controller.signal),o=e.responseType==="arraybuffer",a=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:u}=i.loadPolicy;this.context=e,this.config=i,this.callbacks=n,this.request=this.fetchSetup(e,r),self.clearTimeout(this.requestTimeout),i.timeout=l&&Ze(l)?l:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},i.timeout),(Nc(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var f;this.response=this.loader=d;const h=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),i.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},u-(h-s.loading.start)),!d.ok){const{status:m,statusText:g}=d;throw new lz(g||"fetch, bad network response",m,d)}s.loading.first=h,s.total=oz(d.headers)||s.total;const p=(f=this.callbacks)==null?void 0:f.onProgress;return p&&Ze(i.highWaterMark)?this.loadProgressively(d,s,e,i.highWaterMark,p):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var f,h;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const m=d[a];m&&(s.loaded=s.total=m);const g={url:p.url,data:d,code:p.status},v=(f=this.callbacks)==null?void 0:f.onProgress;v&&!Ze(i.highWaterMark)&&v(s,e,d,p),(h=this.callbacks)==null||h.onSuccess(g,s,e,p)}).catch(d=>{var f;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const h=d&&d.code||0,p=d?d.message:null;(f=this.callbacks)==null||f.onError({code:h,text:p},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const i=this.response.headers.get("age");e=i?parseFloat(i):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,i,n,s=0,r){const o=new T8,a=e.body.getReader(),l=()=>a.read().then(u=>{if(u.done)return o.dataLength&&r(i,n,o.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const c=u.value,d=c.length;return i.loaded+=d,d<s||o.dataLength?(o.push(c),o.dataLength>=s&&r(i,n,o.flush().buffer,e)):r(i,n,c.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function sz(t,e){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(si({},t.headers))};return t.rangeEnd&&i.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),i}function rz(t){const e=nz.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function oz(t){const e=t.get("Content-Range");if(e){const n=rz(e);if(Ze(n))return n}const i=t.get("Content-Length");if(i)return parseInt(i)}function az(t,e){return new self.Request(t.url,e)}class lz extends Error{constructor(e,i,n){super(e),this.code=void 0,this.details=void 0,this.code=i,this.details=n}}const uz=/^age:\s*[\d.]+\s*$/im;class j6{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new W1,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,i,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=i,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:i}=this;if(!e||!i)return;const n=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const r=this.xhrSetup;r?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return r(n,i.url)}).catch(o=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",i.url,!0),r(n,i.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,i,e)}).catch(o=>{var a;(a=this.callbacks)==null||a.onError({code:n.status,text:o.message},i,n,s)}):this.openAndSendXhr(n,i,e)}openAndSendXhr(e,i,n){e.readyState||e.open("GET",i.url,!0);const s=i.headers,{maxTimeToFirstByteMs:r,maxLoadTimeMs:o}=n.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);i.rangeEnd&&e.setRequestHeader("Range","bytes="+i.rangeStart+"-"+(i.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=i.responseType,self.clearTimeout(this.requestTimeout),n.timeout=r&&Ze(r)?r:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:i,stats:n}=this;if(!e||!i)return;const s=i.readyState,r=this.config;if(!n.aborted&&s>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),r.timeout!==r.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),r.timeout=r.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),i.onreadystatechange=null,i.onprogress=null;const u=i.status,c=i.responseType==="text"?i.responseText:null;if(u>=200&&u<300){const p=c??i.response;if(p!=null){var o,a;n.loading.end=Math.max(self.performance.now(),n.loading.first);const m=i.responseType==="arraybuffer"?p.byteLength:p.length;n.loaded=n.total=m,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const g=(o=this.callbacks)==null?void 0:o.onProgress;g&&g(n,e,p,i);const v={url:i.responseURL,data:p,code:u};(a=this.callbacks)==null||a.onSuccess(v,n,e,i);return}}const d=r.loadPolicy.errorRetry,f=n.retry,h={url:e.url,data:void 0,code:u};if(Th(d,f,!1,h))this.retry(d);else{var l;ti.error(`${u} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:u,text:i.statusText},e,i,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,i=this.stats.retry;if(Th(e,i,!0))this.retry(e);else{var n;ti.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:i,stats:n}=this;this.retryDelay=tg(e,n.retry),n.retry++,ti.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${i?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const i=this.stats;i.loaded=e.loaded,e.lengthComputable&&(i.total=e.total)}getCacheAge(){let e=null;if(this.loader&&uz.test(this.loader.getAllResponseHeaders())){const i=this.loader.getResponseHeader("age");e=i?parseFloat(i):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const cz={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},dz=ei(ei({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:j6,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:AU,bufferController:gj,capLevelController:Pg,errorController:RU,fpsController:pH,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:J9,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:cz},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},fz()),{},{subtitleStreamController:AH,subtitleTrackController:vH,timelineController:QH,audioStreamController:fj,audioTrackController:hj,emeController:Ql,cmcdController:cH,contentSteeringController:fH,interstitialsController:TH});function fz(){return{cueHandler:tz,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function hz(t,e,i){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=qg(t),s=["manifest","level","frag"],r=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(o=>{const a=`${o==="level"?"playlist":o}LoadPolicy`,l=e[a]===void 0,u=[];r.forEach(c=>{const d=`${o}Loading${c}`,f=e[d];if(f!==void 0&&l){u.push(d);const h=n[a].default;switch(e[a]={default:h},c){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),u.length&&i.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${a}": ${ui(e[a])}`)}),ei(ei({},n),e)}function qg(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(qg):Object.keys(t).reduce((e,i)=>(e[i]=qg(t[i]),e),{}):t}function pz(t,e){const i=t.loader;i!==V6&&i!==j6?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):iz()&&(t.loader=V6,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const qh=2,mz=.1,gz=.05,vz=100;class _z extends H9{constructor(e,i){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(V.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=i,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,i){this.setInterval(vz),this.mediaSource=i.mediaSource;const n=this.media=i.media;Yn(n,"playing",this.onMediaPlaying),Yn(n,"waiting",this.onMediaWaiting),Yn(n,"ended",this.onMediaEnded)}onMediaDetaching(e,i){this.clearInterval();const{media:n}=this;n&&(ns(n,"playing",this.onMediaPlaying),ns(n,"waiting",this.onMediaWaiting),ns(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,i){this.buffered=i.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const i=this.media.currentTime;this.poll(i,this.lastCurrentTime),this.lastCurrentTime=i}poll(e,i){var n,s;const r=(n=this.hls)==null?void 0:n.config;if(!r)return;const o=this.media;if(!o)return;const{seeking:a}=o,l=this.seeking&&!a,u=!this.seeking&&a,c=o.paused&&!a||o.ended||o.playbackRate===0;if(this.seeking=a,e!==i){i&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,r.nudgeOnVideoHole&&!c&&e>i&&this.nudgeOnVideoHole(e,i)),this.waiting===0&&this.stallResolved(e);return}if(u||l){l&&this.stallResolved(e);return}if(c){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&o.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(V.MEDIA_ENDED,{stalled:!1}));return}if(!bt.getBuffered(o).length){this.nudgeRetry=0;return}const d=bt.bufferInfo(o,e,0),f=d.nextStart||0,h=this.fragmentTracker;if(a&&h&&this.hls){const S=H6(this.hls.inFlightFragments,e),A=d.len>qh,C=!f||S||f-e>qh&&!h.getPartialFragment(e);if(A||C)return;this.moved=!1}const p=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&h){if(!(d.len>0)&&!f)return;const A=Math.max(f,d.start||0)-e,T=!!(p!=null&&p.live)?p.targetduration*2:qh,I=Zh(e,h);if(A>0&&(A<=T||I)){o.paused||this._trySkipBufferHole(I);return}}const m=r.detectStallWithCurrentTimeMs,g=self.performance.now(),v=this.waiting;let b=this.stalled;if(b===null)if(v>0&&g-v<m)b=this.stalled=v;else{this.stalled=g;return}const _=g-b;if(!a&&(_>=m||v)&&this.hls){var y;if(((y=this.mediaSource)==null?void 0:y.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(e-(p?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(V.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const E=bt.bufferInfo(o,e,r.maxBufferHole);this._tryFixBufferStall(E,_,e)}stallResolved(e){const i=this.stalled;if(i&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-i;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(V.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,i){var n;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&s&&s.length>1&&e>s.end(0)){const r=bt.bufferedInfo(bt.timeRangesToArray(this.buffered.audio),e,0);if(r.len>1&&i>=r.start){const o=bt.timeRangesToArray(s),a=bt.bufferedInfo(o,i,0).bufferedIndex;if(a>-1&&a<o.length-1){const l=bt.bufferedInfo(o,e,0).bufferedIndex,u=o[a].end,c=o[a+1].start;if((l===-1||l>a)&&c-u<1&&e-u<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${c} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;let f=Zh(e,this.fragmentTracker);f&&"fragment"in f?f=f.fragment:f||(f=void 0);const h=bt.bufferInfo(this.media,e,0);this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:f,buffer:h.len,bufferInfo:h})}}}}}_tryFixBufferStall(e,i,n){var s,r;const{fragmentTracker:o,media:a}=this,l=(s=this.hls)==null?void 0:s.config;if(!a||!o||!l)return;const u=(r=this.hls)==null?void 0:r.latestLevelDetails,c=Zh(n,o);if((c||u!=null&&u.live&&n<u.fragmentStart)&&(this._trySkipBufferHole(c)||!this.media))return;const d=e.buffered,f=this.adjacentTraversal(e,n);(d&&d.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-n<l.maxBufferHole||f))&&(i>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,i){const n=this.fragmentTracker,s=e.nextStart;if(n&&s){const r=n.getFragAtPos(i,it.MAIN),o=n.getFragAtPos(s,it.MAIN);if(r&&o)return o.sn-r.sn<2}return!1}_reportStall(e){const{hls:i,media:n,stallReported:s,stalled:r}=this;if(!s&&r!==null&&n&&i){this.stallReported=!0;const o=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${ui(e)})`);this.warn(o.message),i.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len,bufferInfo:e,stalled:{start:r}})}}_trySkipBufferHole(e){var i;const{fragmentTracker:n,media:s}=this,r=(i=this.hls)==null?void 0:i.config;if(!s||!n||!r)return 0;const o=s.currentTime,a=bt.bufferInfo(s,o,0),l=o<a.start?a.start:a.nextStart;if(l&&this.hls){const c=a.len<=r.maxBufferHole,d=a.len>0&&a.len<1&&s.readyState<3,f=l-o;if(f>0&&(c||d)){if(f>r.maxBufferHole){let p=!1;if(o===0){const m=n.getAppendedFrag(0,it.MAIN);m&&l<m.end&&(p=!0)}if(!p&&e){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||H6(this.hls.inFlightFragments,l))return 0;let g=!1,v=e.end;for(;v<l;){const b=Zh(v,n);if(b)v+=b.duration;else{g=!0;break}}if(g)return 0}}const h=Math.max(l+gz,o+mz);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${h}`),this.moved=!0,s.currentTime=h,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${h}`),m={type:at.MEDIA_ERROR,details:Le.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,buffer:a.len,bufferInfo:a};e&&("fragment"in e?m.part=e:m.frag=e),this.hls.trigger(V.ERROR,m)}return h}}return 0}_tryNudgeBuffer(e){const{hls:i,media:n,nudgeRetry:s}=this,r=i?.config;if(!n||!r)return 0;const o=n.currentTime;if(this.nudgeRetry++,s<r.nudgeMaxRetry){const a=o+(s+1)*r.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${o} to ${a}`);this.warn(l.message),n.currentTime=a,i.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const a=new Error(`Playhead still not moving while enough data buffered @${o} after ${r.nudgeMaxRetry} nudges`);this.error(a.message),i.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.BUFFER_STALLED_ERROR,error:a,fatal:!0,buffer:e.len,bufferInfo:e})}}}function H6(t,e){const i=z6(t.main);if(i&&i.start<=e)return i;const n=z6(t.audio);return n&&n.start<=e?n:null}function z6(t){if(!t)return null;switch(t.state){case $e.IDLE:case $e.STOPPED:case $e.ENDED:case $e.ERROR:return null}return t.frag}function Zh(t,e){return e.getAppendedFrag(t,it.MAIN)||e.getPartialFragment(t)}const bz=.25;function Zg(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Qg(t,e,i,n,s){let r=new t(e,i,"");try{r.value=n,s&&(r.type=s)}catch{r=new t(e,i,ui(s?ei({type:s},n):n))}return r}const Qh=(()=>{const t=Zg();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class yz{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(V.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(V.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,i){var n;this.media=i.media,((n=i.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const i=(e=this.hls)==null?void 0:e.latestLevelDetails;i&&this.updateDateRangeCues(i)}onMediaDetaching(e,i){this.media=null,!i.transferMedia&&(this.id3Track&&(this.removeCues&&Jl(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const i=this.getID3Track(e.textTracks);return i.mode="hidden",i}getID3Track(e){if(this.media){for(let i=0;i<e.length;i++){const n=e[i];if(n.kind==="metadata"&&n.label==="id3")return b6(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,i){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:s}=this.hls.config;if(!n&&!s)return;const{samples:r}=i;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=Zg();if(o)for(let a=0;a<r.length;a++){const l=r[a].type;if(l===bs.emsg&&!n||!s)continue;const u=D8(r[a].data),c=r[a].pts;let d=c+r[a].duration;d>Qh&&(d=Qh),d-c<=0&&(d=c+bz);for(let h=0;h<u.length;h++){const p=u[h];if(!O8(p)){this.updateId3CueEnds(c,l);const m=Qg(o,c,d,p,l);m&&this.id3Track.addCue(m)}}}}updateId3CueEnds(e,i){var n;const s=(n=this.id3Track)==null?void 0:n.cues;if(s)for(let r=s.length;r--;){const o=s[r];o.type===i&&o.startTime<e&&o.endTime===Qh&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:i,endOffset:n,type:s}){const{id3Track:r,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(r&&(a||l)){let u;s==="audio"?u=c=>c.type===bs.audioId3&&l:s==="video"?u=c=>c.type===bs.emsg&&a:u=c=>c.type===bs.audioId3&&l||c.type===bs.emsg&&a,Bg(r,i,n,u)}}onLevelUpdated(e,{details:i}){this.updateDateRangeCues(i,!0)}onLevelPtsUpdated(e,i){Math.abs(i.drift)>.01&&this.updateDateRangeCues(i.details)}updateDateRangeCues(e,i){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:s,enableDateRangeMetadataCues:r,interstitialsController:o}=this.hls.config;if(!r)return;const a=Zg();if(n&&s&&!o){const{fragmentStart:m,fragmentEnd:g}=e;let v=this.assetCue;v?(v.startTime=m,v.endTime=g):a&&(v=this.assetCue=Qg(a,m,g,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),v&&(v.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(v),v.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:u}=e,c=Object.keys(u);let d=this.dateRangeCuesAppended;if(l&&i){var f;if((f=l.cues)!=null&&f.length){const m=Object.keys(d).filter(g=>!c.includes(g));for(let g=m.length;g--;){var h;const v=m[g],b=(h=d[v])==null?void 0:h.cues;delete d[v],b&&Object.keys(b).forEach(_=>{const y=b[_];if(y){y.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(y)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const p=e.fragments[e.fragments.length-1];if(!(c.length===0||!Ze(p?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let m=0;m<c.length;m++){const g=c[m],v=u[g],b=v.startTime,_=d[g],y=_?.cues||{};let E=_?.durationKnown||!1,S=Qh;const{duration:A,endDate:C}=v;if(C&&A!==null)S=b+A,E=!0;else if(v.endOnNext&&!E){const I=c.reduce((D,R)=>{if(R!==v.id){const O=u[R];if(O.class===v.class&&O.startDate>v.startDate&&(!D||v.startDate<D.startDate))return O}return D},null);I&&(S=I.startTime,E=!0)}const T=Object.keys(v.attr);for(let I=0;I<T.length;I++){const D=T[I];if(!zU(D))continue;const R=y[D];if(R)E&&!(_!=null&&_.durationKnown)?R.endTime=S:Math.abs(R.startTime-b)>.01&&(R.startTime=b,R.endTime=S);else if(a){let O=v.attr[D];GU(D)&&(O=s9(O));const U=Qg(a,b,S,{key:D,data:O},bs.dateRange);U&&(U.id=g,this.id3Track.addCue(U),y[D]=U,o&&(D==="X-ASSET-LIST"||D==="X-ASSET-URL")&&U.addEventListener("enter",this.onEventCueEnter))}}d[g]={cues:y,dateRange:v,durationKnown:E}}}}}class wz{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:i}=this,n=this.levelDetails;if(!i||!n)return;this.currentTime=i.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:o}=this.config;if(!r||o===1||!n.live)return;const a=this.targetLatency;if(a===null)return;const l=s-a,u=Math.min(this.maxLatency,a+n.targetduration);if(l<u&&l>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,o)),f=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,h=Math.min(d,Math.max(1,f));this.changeMediaPlaybackRate(i,h)}else i.playbackRate!==1&&i.playbackRate!==0&&this.changeMediaPlaybackRate(i,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const i=this.levelDetails;return i?e.liveMaxLatencyDurationCount*i.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:i,partHoldBack:n,targetduration:s}=e,{liveSyncDuration:r,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let u=a&&n||i;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=r!==void 0?r:o*s);const c=s;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),i=this.targetLatency;if(e===null||i===null)return null;const n=this.levelDetails;if(n===null)return null;const s=n.edge,r=e-i-this.edgeStalled,o=s-n.totalduration,a=s-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(o,r),a)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const i=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-i,0)}get forwardBufferLength(){const{media:e}=this,i=this.levelDetails;if(!e||!i)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):i.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(V.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(V.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(V.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(V.ERROR,this.onError,this))}onMediaAttached(e,i){this.media=i.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:i}){i.advanced&&this.onTimeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,i){var n;i.details===Le.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,i){var n,s;e.playbackRate!==i&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${i}`),e.playbackRate=i)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class Ez extends Lg{constructor(e,i){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=i,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this),e.on(V.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this),e.off(V.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(i=>{i.loadError=0,i.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,i){this.resetLevels()}onManifestLoaded(e,i){const n=this.hls.config.preferManagedMediaSource,s=[],r={},o={};let a=!1,l=!1,u=!1;i.levels.forEach(c=>{const d=c.attrs;let{audioCodec:f,videoCodec:h}=c;f&&(c.audioCodec=f=bh(f,n)||void 0),h&&(h=c.videoCodec=aU(h));const{width:p,height:m,unknownCodecs:g}=c,v=g?.length||0;if(a||(a=!!(p&&m)),l||(l=!!h),u||(u=!!f),v||f&&!this.isAudioSupported(f)||h&&!this.isVideoSupported(h)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:b,"FRAME-RATE":_,"HDCP-LEVEL":y,"PATHWAY-ID":E,RESOLUTION:S,"VIDEO-RANGE":A}=d,T=`${`${E||"."}-`}${c.bitrate}-${S}-${_}-${b}-${A}-${y}`;if(r[T])if(r[T].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const I=o[T]+=1;c.attrs["PATHWAY-ID"]=new Array(I+1).join(".");const D=this.createLevel(c);r[T]=D,s.push(D)}else r[T].addGroupId("audio",d.AUDIO),r[T].addGroupId("text",d.SUBTITLES);else{const I=this.createLevel(c);r[T]=I,o[T]=1,s.push(I)}}),this.filterAndSortMediaOptions(s,i,a,l,u)}createLevel(e){const i=new Pc(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(s.message),i.supportedResult=S9(s,[])}return i}isAudioSupported(e){return Ic(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Ic(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,i,n,s,r){var o;let a=[],l=[],u=e;const c=((o=i.stats)==null?void 0:o.parsing)||{};if((n||s)&&r&&(u=u.filter(({videoCodec:b,videoRange:_,width:y,height:E})=>(!!b||!!(y&&E))&&vU(_))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let b="no level with compatible codecs found in manifest",_=b;i.levels.length&&(_=`one or more CODECS in variant not supported: ${ui(i.levels.map(E=>E.attrs.CODECS).filter((E,S,A)=>A.indexOf(E)===S))}`,this.warn(_),b+=` (${_})`);const y=new Error(b);this.hls.trigger(V.ERROR,{type:at.MEDIA_ERROR,details:Le.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:i.url,error:y,reason:_})}}),c.end=performance.now();return}i.audioTracks&&(a=i.audioTracks.filter(b=>!b.audioCodec||this.isAudioSupported(b.audioCodec)),G6(a)),i.subtitles&&(l=i.subtitles,G6(l));const d=u.slice(0);u.sort((b,_)=>{if(b.attrs["HDCP-LEVEL"]!==_.attrs["HDCP-LEVEL"])return(b.attrs["HDCP-LEVEL"]||"")>(_.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&b.height!==_.height)return b.height-_.height;if(b.frameRate!==_.frameRate)return b.frameRate-_.frameRate;if(b.videoRange!==_.videoRange)return wh.indexOf(b.videoRange)-wh.indexOf(_.videoRange);if(b.videoCodec!==_.videoCodec){const y=b9(b.videoCodec),E=b9(_.videoCodec);if(y!==E)return E-y}if(b.uri===_.uri&&b.codecSet!==_.codecSet){const y=_h(b.codecSet),E=_h(_.codecSet);if(y!==E)return E-y}return b.averageBitrate!==_.averageBitrate?b.averageBitrate-_.averageBitrate:0});let f=d[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==d.length)){for(let b=0;b<d.length;b++)if(d[b].pathwayId===u[0].pathwayId){f=d[b];break}}this._levels=u;for(let b=0;b<u.length;b++)if(u[b]===f){var h;this._firstLevel=b;const _=f.bitrate,y=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${_}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const E=Math.min(_,this.hls.config.abrEwmaDefaultEstimateMax);E>y&&y===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=E)}break}const p=r&&!s,m=this.hls.config,g=!!(m.audioStreamController&&m.audioTrackController),v={levels:u,audioTracks:a,subtitleTracks:l,sessionData:i.sessionData,sessionKeys:i.sessionKeys,firstLevel:this._firstLevel,stats:i.stats,audio:r,video:s,altAudio:g&&!p&&a.some(b=>!!b.url)};c.end=performance.now(),this.hls.trigger(V.MANIFEST_PARSED,v)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const i=this._levels;if(i.length===0)return;if(e<0||e>=i.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,i.length-1)}const n=this.currentLevelIndex,s=this.currentLevel,r=s?s.attrs["PATHWAY-ID"]:void 0,o=i[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,n===e&&s&&r===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${n}${r?" with Pathway "+r:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(V.LEVEL_SWITCHING,l);const u=o.details;if(!u||u.live){const c=this.switchParams(o.uri,s?.details,u);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const i=this.steering.pathways(),n=e.filter(s=>i.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${i}`);return}this.steering.pathwayPriority=n}}onError(e,i){i.fatal||!i.context||i.context.type===Rt.LEVEL&&i.context.level===this.level&&this.checkRetry(i)}onFragBuffered(e,{frag:i}){if(i!==void 0&&i.type===it.MAIN){const n=i.elementaryStreams;if(!Object.keys(n).some(r=>!!n[r]))return;const s=this._levels[i.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,i){var n;const{level:s,details:r}=i,o=i.levelInfo;if(!o){var a;this.warn(`Invalid level index ${s}`),(a=i.deliveryDirectives)!=null&&a.skip&&(r.deltaUpdateFailed=!0);return}if(o===this.currentLevel||i.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let l=o.details;l===i.details&&l.advanced&&(l=void 0),this.playlistLoaded(s,i,l)}else(n=i.deliveryDirectives)!=null&&n.skip&&(r.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,i){super.loadingPlaylist(e,i);const n=this.getUrlWithDirectives(e.uri,i),s=this.currentLevelIndex,r=e.attrs["PATHWAY-ID"],o=e.details,a=o?.age;this.log(`Loading level index ${s}${i?.msn!==void 0?" at sn "+i.msn+" part "+i.part:""}${r?" Pathway "+r:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${n}`),this.hls.trigger(V.LEVEL_LOADING,{url:n,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:i||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var i;if(this._levels.length===1)return;const n=this._levels.filter((r,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(r),r===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,r.details&&r.details.fragments.forEach(a=>a.level=-1)),!1));b8(n),this._levels=n,this.currentLevelIndex>-1&&(i=this.currentLevel)!=null&&i.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=n.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(V.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:i}){this._levels=i}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:i,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==i&&(this._maxAutoLevel=i,this.hls.trigger(V.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:i,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function G6(t){const e={};t.forEach(i=>{const n=i.groupId||"";i.id=e[n]=e[n]||0,e[n]++})}function W6(){return self.SourceBuffer||self.WebKitSourceBuffer}function K6(){if(!Jo())return!1;const e=W6();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Sz(){if(!K6())return!1;const t=Jo();return typeof t?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(Rc(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(Rc(e,"audio"))))}function xz(){var t;const e=W6();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const Tz=100;class Az extends pg{constructor(e,i,n){super(e,i,n,"stream-controller",it.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,r=s?s.currentTime:null;if(r===null||!Ze(r)||(this.log(`Media seeked to ${r.toFixed(3)}`),!this.getBufferedFrag(r)))return;const o=this.getFwdBufferInfoAtPos(s,r,it.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${r} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(V.MANIFEST_PARSED,this.onManifestParsed,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.LEVEL_LOADED,this.onLevelLoaded,this),e.on(V.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(V.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(V.BUFFER_CREATED,this.onBufferCreated,this),e.on(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(V.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(V.MANIFEST_PARSED,this.onManifestParsed,this),e.off(V.LEVEL_LOADED,this.onLevelLoaded,this),e.off(V.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(V.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(V.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(V.BUFFER_CREATED,this.onBufferCreated,this),e.off(V.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(V.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,i){if(this.levels){const{lastCurrentTime:n,hls:s}=this;if(this.stopLoad(),this.setInterval(Tz),this.level=-1,!this.startFragRequested){let r=s.startLevel;r===-1&&(s.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=s.firstAutoLevel),s.nextLoadLevel=r,this.level=s.loadLevel,this._hasEnoughToStart=!!i}n>0&&e===-1&&!i&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=$e.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=i?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=$e.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case $e.WAITING_LEVEL:{const{levels:e,level:i}=this,n=e?.[i],s=n?.details;if(s&&(!s.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(s))break;this.state=$e.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=$e.IDLE;break}break}case $e.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===$e.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:i,levels:n,media:s}=this;if(i===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const r=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[r]))return;const o=n[r],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const m={};this.altAudio===2&&(m.type="video"),this.hls.trigger(V.BUFFER_EOS,m),this.state=$e.ENDED;return}if(!this.buffering)return;e.loadLevel!==r&&e.manualLevel===-1&&this.log(`Adapting to level ${r} from level ${this.level}`),this.level=e.nextLoadLevel=r;const u=o.details;if(!u||this.state===$e.WAITING_LEVEL||this.waitForLive(o)){this.level=r,this.state=$e.WAITING_LEVEL,this.startFragRequested=!1;return}const c=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(f,u);if(this.couldBacktrack&&!this.fragPrevious&&h&&Hi(h)&&this.fragmentTracker.getState(h)!==Zi.OK){var p;const g=((p=this.backtrackFragment)!=null?p:h).sn-u.startSN,v=u.fragments[g-1];v&&h.cc===v.cc&&(h=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){const g=this.audioOnly&&!this.altAudio?li.AUDIO:li.VIDEO,v=(g===li.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;v&&this.afterBufferFlushed(v,g,it.MAIN)}h=this.getNextFragmentLoopLoading(h,u,a,it.MAIN,d)}h&&(h.initSegment&&!h.initSegment.data&&!this.bitrateTest&&(h=h.initSegment),this.loadFragment(h,o,f))}loadFragment(e,i,n){const s=this.fragmentTracker.getState(e);s===Zi.NOT_LOADED||s===Zi.PARTIAL?Hi(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,i)):super.loadFragment(e,i,n):this._loadInitSegment(e,i):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,it.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:i}=this;if(i!=null&&i.readyState){let n;const s=this.getAppendedFrag(i.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const r=this.getLevelDetails();if(r!=null&&r.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<r.targetduration*2)return}if(!i.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],u=this.fragLastKbps;u&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:n=0}else n=0;const o=this.getBufferedFrag(i.currentTime+n);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,u=a.duration,c=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case $e.KEY_LOADING:case $e.FRAG_LOADING:case $e.FRAG_LOADING_WAITING_RETRY:case $e.PARSING:case $e.PARSED:this.state=$e.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,i){super.flushMainBuffer(e,i,this.altAudio===2?"video":null)}onMediaAttached(e,i){super.onMediaAttached(e,i);const n=i.media;Yn(n,"playing",this.onMediaPlaying),Yn(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,i){const{media:n}=this;n&&(ns(n,"playing",this.onMediaPlaying),ns(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,i),!i.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(V.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,i){let n=!1,s=!1;for(let r=0;r<i.levels.length;r++){const o=i.levels[r].audioCodec;o&&(n=n||o.indexOf("mp4a.40.2")!==-1,s=s||o.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&s&&!xz(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=i.levels,this.startFragRequested=!1}onLevelLoading(e,i){const{levels:n}=this;if(!n||this.state!==$e.IDLE)return;const s=i.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=$e.WAITING_LEVEL)}onLevelLoaded(e,i){var n;const{levels:s,startFragRequested:r}=this,o=i.level,a=i.details,l=a.totalduration;if(!s){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${l}`);const u=i.levelInfo,c=this.fragCurrent;c&&(this.state===$e.FRAG_LOADING||this.state===$e.FRAG_LOADING_WAITING_RETRY)&&c.level!==i.level&&c.loader&&this.abortCurrentFrag();let d=0;if(a.live||(n=u.details)!=null&&n.live){var f;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,u.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(u.details=a,this.levelLastLoaded=u,r||this.setStartPosition(a,d),this.hls.trigger(V.LEVEL_UPDATED,{details:a,level:o}),this.state===$e.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=$e.IDLE}r&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:i,media:n}=this;if(!n)return;const s=this.hls.liveSyncPosition,r=this.getLoadPosition(),o=e.fragmentStart,a=e.edge,l=r>=o-i.maxFragLookUpTolerance&&r<=a;if(s!==null&&n.duration>s&&(r<s||!l)){const c=i.liveMaxLatencyDuration!==void 0?i.liveMaxLatencyDuration:i.liveMaxLatencyDurationCount*e.targetduration;if((!l&&n.readyState<4||r<a-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),n.readyState))if(this.warn(`Playback: ${r.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const d=bt.bufferInfo(n,s,0);if(!((u=d.buffered)!=null&&u.length)){n.currentTime=s;return}if(d.start<=r){n.currentTime=s;return}const{nextStart:h}=bt.bufferedInfo(d.buffered,r,0);h&&(n.currentTime=h)}else n.currentTime=s}}_handleFragmentLoadProgress(e){var i;const n=e.frag,{part:s,payload:r}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const a=o[n.level];if(!a){this.warn(`Level ${n.level} not found on progress`);return}const l=a.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const u=a.videoCodec,c=l.PTSKnown||!l.live,d=(i=n.initSegment)==null?void 0:i.data,f=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new Z8(this.hls,it.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,m=p!==-1,g=new sg(n.level,n.sn,n.stats.chunkCount,r.byteLength,p,m),v=this.initPTS[n.cc];h.push(r,d,f,u,n,s,l.totalduration,c,g,v)}onAudioTrackSwitching(e,i){const n=this.hls,s=this.altAudio===2;if(Sh(i.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.fragmentTracker.removeAllFragments(),n.once(V.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(V.AUDIO_TRACK_SWITCHED,i)}),n.trigger(V.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(V.AUDIO_TRACK_SWITCHED,i)}}onAudioTrackSwitched(e,i){const n=Sh(i.url,this.hls);if(n){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,i){const n=i.tracks;let s,r,o=!1;for(const a in n){const l=n[a];if(l.id==="main"){if(r=a,s=l,a==="video"){const u=n[a];u&&(this.videoBuffer=u.buffer)}}else o=!0}o&&s?(this.log(`Alternate track found, use ${r}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,i){const{frag:n,part:s}=i,r=n.type===it.MAIN;if(r){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${s?" p: "+s.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===$e.PARSED&&(this.state=$e.IDLE);return}const a=s?s.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),Hi(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,s)}const o=this.media;o&&(!this._hasEnoughToStart&&bt.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),r&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,i){var n;if(i.fatal){this.state=$e.ERROR;return}switch(i.details){case Le.FRAG_GAP:case Le.FRAG_PARSING_ERROR:case Le.FRAG_DECRYPT_ERROR:case Le.FRAG_LOAD_ERROR:case Le.FRAG_LOAD_TIMEOUT:case Le.KEY_LOAD_ERROR:case Le.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(it.MAIN,i);break;case Le.LEVEL_LOAD_ERROR:case Le.LEVEL_LOAD_TIMEOUT:case Le.LEVEL_PARSING_ERROR:!i.levelRetry&&this.state===$e.WAITING_LEVEL&&((n=i.context)==null?void 0:n.type)===Rt.LEVEL&&(this.state=$e.IDLE);break;case Le.BUFFER_ADD_CODEC_ERROR:case Le.BUFFER_APPEND_ERROR:if(i.parent!=="main")return;this.reduceLengthAndFlushBuffer(i)&&this.resetLoadingState();break;case Le.BUFFER_FULL_ERROR:if(i.parent!=="main")return;this.reduceLengthAndFlushBuffer(i)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Le.INTERNAL_EXCEPTION:this.recoverWorkerError(i);break}}onFragLoadEmergencyAborted(){this.state=$e.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:i}){if(i!==li.AUDIO||!this.altAudio){const n=(i===li.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,i,it.MAIN),this.tick())}}onLevelsUpdated(e,i){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=i.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const i=e.currentTime;let n=this.startPosition;if(n>=0&&i<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${i}`);return}const s=this.timelineOffset;s&&n&&(n+=s);const r=this.getLevelDetails(),o=bt.getBuffered(e),a=o.length?o.start(0):0,l=a-n,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<u||this.loadingParts&&l<2*(r?.partTarget||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),i<n&&(this.log(`seek to target start position ${n} from current time ${i} buffer start ${a}`),e.currentTime=n)}}_getAudioCodec(e){let i=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&i&&(this.log("Swapping audio codec"),i.indexOf("mp4a.40.5")!==-1?i="mp4a.40.2":i="mp4a.40.5"),i}_loadBitrateTestFrag(e,i){e.bitrateTest=!0,this._doFragLoad(e,i).then(n=>{const{hls:s}=this,r=n?.frag;if(!r||this.fragContextChanged(r))return;i.fragmentError=0,this.state=$e.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=r.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),s.trigger(V.FRAG_LOADED,n),r.bitrateTest=!1}).catch(n=>{this.state===$e.STOPPED||this.state===$e.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const i=this.playlistType,{hls:n}=this,{remuxResult:s,chunkMeta:r}=e,o=this.getCurrentContext(r);if(!o){this.resetWhenMissingContext(r);return}const{frag:a,part:l,level:u}=o,{video:c,text:d,id3:f,initSegment:h}=s,{details:p}=u,m=this.altAudio?void 0:s.audio;if(this.fragContextChanged(a)){this.fragmentTracker.removeFragment(a);return}if(this.state=$e.PARSING,h){const g=h.tracks;if(g){const y=a.initSegment||a;if(this.unhandledEncryptionError(h,a))return;this._bufferInitSegment(u,g,y,r),n.trigger(V.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:i,tracks:g})}const v=h.initPTS,b=h.timescale,_=this.initPTS[a.cc];if(Ze(v)&&(!_||_.baseTime!==v||_.timescale!==b)){const y=h.trackId;this.initPTS[a.cc]={baseTime:v,timescale:b,trackId:y},n.trigger(V.INIT_PTS_FOUND,{frag:a,id:i,initPTS:v,timescale:b,trackId:y})}}if(c&&p){m&&c.type==="audiovideo"&&this.logMuxedErr(a);const g=p.fragments[a.sn-1-p.startSN],v=a.sn===p.startSN,b=!g||a.cc>g.cc;if(s.independent!==!1){const{startPTS:_,endPTS:y,startDTS:E,endDTS:S}=c;if(l)l.elementaryStreams[c.type]={startPTS:_,endPTS:y,startDTS:E,endDTS:S};else if(c.firstKeyFrame&&c.independent&&r.id===1&&!b&&(this.couldBacktrack=!0),c.dropped&&c.independent){const A=this.getMainFwdBufferInfo(),C=(A?A.end:this.getLoadPosition())+this.config.maxBufferHole,T=c.firstKeyFramePTS?c.firstKeyFramePTS:_;if(!v&&C<T-this.config.maxBufferHole&&!b){this.backtrack(a);return}else b&&(a.gap=!0);a.setElementaryStreamInfo(c.type,a.start,y,a.start,S,!0)}else v&&_-(p.appliedTimelineOffset||0)>qh&&(a.gap=!0);a.setElementaryStreamInfo(c.type,_,y,E,S),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(c,a,l,r,v||b)}else if(v||b)a.gap=!0;else{this.backtrack(a);return}}if(m){const{startPTS:g,endPTS:v,startDTS:b,endDTS:_}=m;l&&(l.elementaryStreams[li.AUDIO]={startPTS:g,endPTS:v,startDTS:b,endDTS:_}),a.setElementaryStreamInfo(li.AUDIO,g,v,b,_),this.bufferFragmentData(m,a,l,r)}if(p&&f!=null&&f.samples.length){const g={id:i,frag:a,details:p,samples:f.samples};n.trigger(V.FRAG_PARSING_METADATA,g)}if(p&&d){const g={id:i,frag:a,details:p,samples:d.samples};n.trigger(V.FRAG_PARSING_USERDATA,g)}}logMuxedErr(e){this.warn(`${Hi(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,i,n,s){if(this.state!==$e.PARSING)return;this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&(delete i.audio,i.audiovideo&&this.logMuxedErr(n));const{audio:r,video:o,audiovideo:a}=i;if(r){const u=e.audioCodec;let c=yh(r.codec,u);c==="mp4a"&&(c="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");const f=r.metadata;f&&"channelCount"in f&&(f.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&r.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),u&&u!==c&&this.log(`Swapping manifest audio codec "${u}" for "${c}"`),r.levelCodec=c,r.id=it.MAIN,this.log(`Init audio buffer, container:${r.container}, codecs[selected/level/parsed]=[${c||""}/${u||""}/${r.codec}]`),delete i.audiovideo}if(o){o.levelCodec=e.videoCodec,o.id=it.MAIN;const u=o.codec;if(u?.length===4)switch(u){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${o.codec!==u?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete i.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete i.video,delete i.audio);const l=Object.keys(i);if(l.length){if(this.hls.trigger(V.BUFFER_CODECS,i),!this.hls)return;l.forEach(u=>{const d=i[u].initSegment;d!=null&&d.byteLength&&this.hls.trigger(V.BUFFER_APPENDING,{type:u,data:d,frag:n,part:null,chunkMeta:s,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,it.MAIN)}get maxBufferLength(){const{levels:e,level:i}=this,n=e?.[i];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=$e.IDLE}checkFragmentChanged(){const e=this.media;let i=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(bt.isBuffered(e,n)?i=this.getAppendedFrag(n):bt.isBuffered(e,n+.1)&&(i=this.getAppendedFrag(n+.1)),i){this.backtrackFragment=null;const s=this.fragPlaying,r=i.level;(!s||i.sn!==s.sn||s.level!==r)&&(this.fragPlaying=i,this.hls.trigger(V.FRAG_CHANGED,{frag:i}),(!s||s.level!==r)&&this.hls.trigger(V.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const i=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Ze(i)?this.getAppendedFrag(i):null}get currentProgramDateTime(){var e;const i=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Ze(i)){const n=this.getLevelDetails(),s=this.currentFrag||(n?Wa(null,n.fragments,i):null);if(s){const r=s.programDateTime;if(r!==null){const o=r+(i-s.start)*1e3;return new Date(o)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class kz extends Us{constructor(e,i){super("key-loader",i),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const s=this.keyIdToKeyInfo[n].loader;if(s){var i;if(e&&e!==((i=s.context)==null?void 0:i.frag.type))return;s.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[e];(i.mediaKeySessionContext||i.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[e].loader;i&&i.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,i=Le.KEY_LOAD_ERROR,n,s,r){return new mo({type:at.NETWORK_ERROR,details:i,fatal:!1,frag:e,response:r,error:n,networkDetails:s})}loadClear(e,i,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(i.length)for(let s=0,r=i.length;s<r;s++){const o=i[s];if(e.cc<=o.cc&&(!Hi(e)||!Hi(o)||e.sn<o.sn)||!n&&s==r-1)return this.emeController.selectKeySystemFormat(o).then(a=>{if(!this.emeController)return;o.setKeyFormat(a);const l=Ih(a);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const s=Dc(this.config);if(s.length)return this.emeController.getKeySystemAccess(s)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(i=>this.loadInternal(e,i)):this.loadInternal(e)}loadInternal(e,i){var n,s;i&&e.setKeyFormat(i);const r=e.decryptdata;if(!r){const u=new Error(i?`Expected frag.decryptdata to be defined after setting format ${i}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Le.KEY_LOAD_ERROR,u))}const o=r.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Le.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));const a=Jg(r);let l=this.keyIdToKeyInfo[a];if((n=l)!=null&&n.decryptdata.key)return r.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(s=l)!=null&&s.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(c=>{const{keyInfo:d}=c;return r.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[a]?"Rel":"L"}oading${r.keyId?" keyId: "+Kn(r.keyId):""} URI: ${r.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[a]={decryptdata:r,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},r.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return r.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,Le.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${r.method}"`)))}}loadKeyEME(e,i){const n={frag:i,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var s;if(!e.decryptdata.keyId&&(s=i.initSegment)!=null&&s.data){const o=XN(i.initSegment.data);if(o.length){const a=o[0];a.some(l=>l!==0)&&(this.log(`Using keyId found in init segment ${Kn(a)}`),e.decryptdata.keyId=a,Ka.setKeyIdForUri(e.decryptdata.uri,a))}}const r=this.emeController.loadKey(n);return(e.keyLoadPromise=r.then(o=>(e.mediaKeySessionContext=o,n))).catch(o=>{throw e.keyLoadPromise=null,"data"in o&&(o.data.frag=i),o})}return Promise.resolve(n)}loadKeyHTTP(e,i){const n=this.config,s=n.loader,r=new s(n);return i.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:i,responseType:"arraybuffer",url:e.decryptdata.uri},u=n.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,m)=>{const{frag:g,keyInfo:v}=p,b=Jg(v.decryptdata);if(!g.decryptdata||v!==this.keyIdToKeyInfo[b])return a(this.createKeyLoadError(g,Le.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));v.decryptdata.key=g.decryptdata.key=new Uint8Array(f.data),g.keyLoader=null,v.loader=null,o({frag:g,keyInfo:v})},onError:(f,h,p,m)=>{this.resetLoader(h),a(this.createKeyLoadError(i,Le.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,ei({url:l.url,data:void 0},f)))},onTimeout:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(i,Le.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(i,Le.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};r.load(l,c,d)})}resetLoader(e){const{frag:i,keyInfo:n,url:s}=e,r=n.loader;i.keyLoader===r&&(i.keyLoader=null,n.loader=null);const o=Jg(n.decryptdata)||s;delete this.keyIdToKeyInfo[o],r&&r.destroy()}}function Jg(t){if(t.keyFormat!==pn.FAIRPLAY){const e=t.keyId;if(e)return Kn(e)}return t.uri}function Y6(t){const{type:e}=t;switch(e){case Rt.AUDIO_TRACK:return it.AUDIO;case Rt.SUBTITLE_TRACK:return it.SUBTITLE;default:return it.MAIN}}function e2(t,e){let i=t.url;return(i===void 0||i.indexOf("data:")===0)&&(i=e.url),i}class Cz{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(V.MANIFEST_LOADING,this.onManifestLoading,this),e.on(V.LEVEL_LOADING,this.onLevelLoading,this),e.on(V.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(V.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(V.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(V.MANIFEST_LOADING,this.onManifestLoading,this),e.off(V.LEVEL_LOADING,this.onLevelLoading,this),e.off(V.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(V.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(V.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const i=this.hls.config,n=i.pLoader,s=i.loader,r=n||s,o=new r(i);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const i=this.loaders[e];i&&i.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,i){const{url:n}=i;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Rt.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,i){const{id:n,level:s,pathwayId:r,url:o,deliveryDirectives:a,levelInfo:l}=i;this.load({id:n,level:s,pathwayId:r,responseType:"text",type:Rt.LEVEL,url:o,deliveryDirectives:a,levelOrTrack:l})}onAudioTrackLoading(e,i){const{id:n,groupId:s,url:r,deliveryDirectives:o,track:a}=i;this.load({id:n,groupId:s,level:null,responseType:"text",type:Rt.AUDIO_TRACK,url:r,deliveryDirectives:o,levelOrTrack:a})}onSubtitleTrackLoading(e,i){const{id:n,groupId:s,url:r,deliveryDirectives:o,track:a}=i;this.load({id:n,groupId:s,level:null,responseType:"text",type:Rt.SUBTITLE_TRACK,url:r,deliveryDirectives:o,levelOrTrack:a})}onLevelsUpdated(e,i){const n=this.loaders[Rt.LEVEL];if(n){const s=n.context;s&&!i.levels.some(r=>r===s.levelOrTrack)&&(n.abort(),delete this.loaders[Rt.LEVEL])}}load(e){var i;const n=this.hls.config;let s=this.getInternalLoader(e);if(s){const u=this.hls.logger,c=s.context;if(c&&c.levelOrTrack===e.levelOrTrack&&(c.url===e.url||c.deliveryDirectives&&!e.deliveryDirectives)){c.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${c.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let r;if(e.type===Rt.MANIFEST?r=n.manifestLoadPolicy.default:r=si({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),Ze((i=e.deliveryDirectives)==null?void 0:i.part)){let u;if(e.type===Rt.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===Rt.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===Rt.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const c=u.partTarget,d=u.targetduration;if(c&&d){const f=Math.max(c*3,d*.8)*1e3;r=si({},r,{maxTimeToFirstByteMs:Math.min(f,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,r.maxTimeToFirstByteMs)})}}}const o=r.errorRetry||r.timeoutRetry||{},a={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(u,c,d,f)=>{const h=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=u.data;c.parsing.start=performance.now(),Mr.isMediaPlaylist(p)||d.type!==Rt.MANIFEST?this.handleTrackOrLevelPlaylist(u,c,d,f||null,h):this.handleMasterPlaylist(u,c,d,f)},onError:(u,c,d,f)=>{this.handleNetworkError(c,d,!1,u,f)},onTimeout:(u,c,d)=>{this.handleNetworkError(c,d,!0,void 0,u)}};s.load(e,a,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:i},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${i}`),this.hls.startLoad(i))}handleMasterPlaylist(e,i,n,s){const r=this.hls,o=e.data,a=e2(e,n),l=Mr.parseMasterPlaylist(o,a);if(l.playlistParsingError){i.parsing.end=performance.now(),this.handleManifestParsingError(e,n,l.playlistParsingError,s,i);return}const{contentSteering:u,levels:c,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p}=l;this.variableList=p,c.forEach(b=>{const{unknownCodecs:_}=b;if(_){const{preferManagedMediaSource:y}=this.hls.config;let{audioCodec:E,videoCodec:S}=b;for(let A=_.length;A--;){const C=_[A];Ic(C,"audio",y)?(b.audioCodec=E=E?`${E},${C}`:C,Gl.audio[E.substring(0,4)]=2,_.splice(A,1)):Ic(C,"video",y)&&(b.videoCodec=S=S?`${S},${C}`:C,Gl.video[S.substring(0,4)]=2,_.splice(A,1))}}});const{AUDIO:m=[],SUBTITLES:g,"CLOSED-CAPTIONS":v}=Mr.parseMasterPlaylistMedia(o,a,l);m.length&&!m.some(_=>!_.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new xi({}),bitrate:0,url:""})),r.trigger(V.MANIFEST_LOADED,{levels:c,audioTracks:m,subtitles:g,captions:v,contentSteering:u,url:a,stats:i,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,i,n,s,r){const o=this.hls,{id:a,level:l,type:u}=n,c=e2(e,n),d=Ze(l)?l:Ze(a)?a:0,f=Y6(n),h=Mr.parseLevelPlaylist(e.data,c,d,f,0,this.variableList);if(u===Rt.MANIFEST){const p={attrs:new xi({}),bitrate:0,details:h,name:"",url:c};h.requestScheduled=i.loading.start+m8(h,0),o.trigger(V.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:c,stats:i,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}i.parsing.end=performance.now(),n.levelDetails=h,this.handlePlaylistLoaded(h,e,i,n,s,r)}handleManifestParsingError(e,i,n,s,r){this.hls.trigger(V.ERROR,{type:at.NETWORK_ERROR,details:Le.MANIFEST_PARSING_ERROR,fatal:i.type===Rt.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:i,networkDetails:s,stats:r})}handleNetworkError(e,i,n=!1,s,r){let o=`A network ${n?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===Rt.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===Rt.AUDIO_TRACK||e.type===Rt.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let l=Le.UNKNOWN,u=!1;const c=this.getInternalLoader(e);switch(e.type){case Rt.MANIFEST:l=n?Le.MANIFEST_LOAD_TIMEOUT:Le.MANIFEST_LOAD_ERROR,u=!0;break;case Rt.LEVEL:l=n?Le.LEVEL_LOAD_TIMEOUT:Le.LEVEL_LOAD_ERROR,u=!1;break;case Rt.AUDIO_TRACK:l=n?Le.AUDIO_TRACK_LOAD_TIMEOUT:Le.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case Rt.SUBTITLE_TRACK:l=n?Le.SUBTITLE_TRACK_LOAD_TIMEOUT:Le.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);const d={type:at.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:a,networkDetails:i,stats:r};if(s){const f=i?.url||e.url;d.response=ei({url:f,data:void 0},s)}this.hls.trigger(V.ERROR,d)}handlePlaylistLoaded(e,i,n,s,r,o){const a=this.hls,{type:l,level:u,levelOrTrack:c,id:d,groupId:f,deliveryDirectives:h}=s,p=e2(i,s),m=Y6(s);let g=typeof s.level=="number"&&m===it.MAIN?u:void 0;const v=e.playlistParsingError;if(v){if(this.hls.logger.warn(`${v} ${e.url}`),!a.config.ignorePlaylistParsingErrors){a.trigger(V.ERROR,{type:at.NETWORK_ERROR,details:Le.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:v,reason:v.message,response:i,context:s,level:g,parent:m,networkDetails:r,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const b=e.playlistParsingError=new Error("No Segments found in Playlist");a.trigger(V.ERROR,{type:at.NETWORK_ERROR,details:Le.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:b,reason:b.message,response:i,context:s,level:g,parent:m,networkDetails:r,stats:n});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Rt.MANIFEST:case Rt.LEVEL:if(g){if(!c)g=0;else if(c!==a.levels[g]){const b=a.levels.indexOf(c);b>-1&&(g=b)}}a.trigger(V.LEVEL_LOADED,{details:e,levelInfo:c||a.levels[0],level:g||0,id:d||0,stats:n,networkDetails:r,deliveryDirectives:h,withoutMultiVariant:l===Rt.MANIFEST});break;case Rt.AUDIO_TRACK:a.trigger(V.AUDIO_TRACK_LOADED,{details:e,track:c,id:d||0,groupId:f||"",stats:n,networkDetails:r,deliveryDirectives:h});break;case Rt.SUBTITLE_TRACK:a.trigger(V.SUBTITLE_TRACK_LOADED,{details:e,track:c,id:d||0,groupId:f||"",stats:n,networkDetails:r,deliveryDirectives:h});break}}}class Es{static get version(){return Mc}static isMSESupported(){return K6()}static isSupported(){return Sz()}static getMediaSource(){return Jo()}static get Events(){return V}static get MetadataSchema(){return bs}static get ErrorTypes(){return at}static get ErrorDetails(){return Le}static get DefaultConfig(){return Es.defaultConfig?Es.defaultConfig:dz}static set DefaultConfig(e){Es.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new gg,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const i=this.logger=FN(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=hz(Es.DefaultConfig,e,i);this.userConfig=e,n.progressive&&pz(n,i);const{abrController:s,bufferController:r,capLevelController:o,errorController:a,fpsController:l}=n,u=new a(this),c=this.abrController=new s(this),d=new PU(this),f=n.interstitialsController,h=f?this.interstitialsController=new f(this,Es):null,p=this.bufferController=new r(this,d),m=this.capLevelController=new o(this),g=new l(this),v=new Cz(this),b=n.contentSteeringController,_=b?new b(this):null,y=this.levelController=new Ez(this,_),E=new yz(this),S=new kz(this.config,this.logger),A=this.streamController=new Az(this,d,S),C=this.gapController=new _z(this,d);m.setStreamController(A),g.setStreamController(A);const T=[v,y,A];h&&T.splice(1,0,h),_&&T.splice(1,0,_),this.networkControllers=T;const I=[c,p,C,m,g,E,d];this.audioTrackController=this.createController(n.audioTrackController,T);const D=n.audioStreamController;D&&T.push(this.audioStreamController=new D(this,d,S)),this.subtitleTrackController=this.createController(n.subtitleTrackController,T);const R=n.subtitleStreamController;R&&T.push(this.subtititleStreamController=new R(this,d,S)),this.createController(n.timelineController,I),S.emeController=this.emeController=this.createController(n.emeController,I),this.cmcdController=this.createController(n.cmcdController,I),this.latencyController=this.createController(wz,I),this.coreComponents=I,T.push(u);const O=u.onErrorOut;typeof O=="function"&&this.on(V.ERROR,O,u),this.on(V.MANIFEST_LOADED,v.onManifestLoaded,v)}createController(e,i){if(e){const n=new e(this);return i&&i.push(n),n}return null}on(e,i,n=this){this._emitter.on(e,i,n)}once(e,i,n=this){this._emitter.once(e,i,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,i,n=this,s){this._emitter.off(e,i,n,s)}listeners(e){return this._emitter.listeners(e)}emit(e,i,n){return this._emitter.emit(e,i,n)}trigger(e,i){if(this.config.debug)return this.emit(e,e,i);try{return this.emit(e,e,i)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const s=e===V.ERROR;this.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.INTERNAL_EXCEPTION,fatal:s,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(V.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(i=>i.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(i=>i.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const r=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(V.ERROR,{type:at.OTHER_ERROR,details:Le.ATTACH_MEDIA_ERROR,fatal:!0,error:r});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const i="media"in e,n=i?e.media:e,s=i?e:{media:n};this._media=n,this.trigger(V.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(V.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(V.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const i=this.media,n=this._url,s=this._url=G1.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),i&&n&&(n!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(i)),this.trigger(V.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,i){this.logger.log(`startLoad(${e+(i?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,i),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[it.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[it.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[it.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,i=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),i&&this.startLoad(i))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=_H()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const i=!!e;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){gU(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:i}}=this;if(!e)return 0;const n=e.length;for(let s=0;s<n;s++)if(e[s].maxBitrate>=i)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:i,maxHdcpLevel:n}=this;let s;if(i===-1&&e!=null&&e.length?s=e.length-1:s=i,n)for(let r=s;r--;){const o=e[r].attrs["HDCP-LEVEL"];if(o&&o<=n)return r}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var i;return((i=this.audioTrackController)==null?void 0:i.setAudioOption(e))||null}setSubtitleOption(e){var i;return((i=this.subtitleTrackController)==null?void 0:i.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const i=this.audioTrackController;i&&(i.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const i=this.subtitleTrackController;i&&(i.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const i=this.subtitleTrackController;i&&(i.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,i=this.allAudioTracks){const n=L9(i);return x9(e,n,navigator.mediaCapabilities)}}Es.defaultConfig=void 0;const Lz={class:"group/cover","shrink-0":"",relative:"",bg:"$bew-skeleton",rounded:"$bew-radius","overflow-hidden":"","cursor-pointer":"","group-hover:z-2":"",style:{"aspect-ratio":"16 / 9",contain:"layout style","will-change":"auto"}},Iz={key:0,"w-full":"","h-full":"",bg:"$bew-skeleton",rounded:"$bew-radius",style:{"aspect-ratio":"16 / 9"}},Rz={key:0,pos:"absolute top-0 left-0","w-full":"","h-fit":"","aspect-video":"",flex:"~ col gap-2 items-center justify-center",bg:"$bew-fill-4","backdrop-blur-20px":"","mix-blend-luminosity":"",rounded:"$bew-radius","z-2":""},Pz={"mb-2":"","color-white":"","text-lg":""},Dz={key:0,pos:"absolute top-0 left-0","w-full":"","aspect-video":"",rounded:"$bew-radius","bg-black":""},Oz=["controls"],Mz=["src"],$z={key:0,pos:"absolute top-0 left-0","w-full":"","h-full":"",flex:"~ items-center justify-center",bg:"black/50","pointer-events-none":""},Fz={key:0,bg:"$bew-theme-color","text-center":"","lh-0":"","h-30px":"","w-30px":"","text-white":"",rounded:"1/2",shadow:"$bew-shadow-1",border:"1 $bew-theme-color",grid:"~ place-content-center",text:"xl","fw-bold":""},Bz={key:1,bg:"$bew-elevated-solid","text-center":"","lh-30px":"","h-30px":"","w-30px":"",rounded:"1/2",shadow:"$bew-shadow-1",border:"1 $bew-border-color"},Nz={class:"video-card-cover-stats__items"},Uz={key:0,class:"video-card-cover-stats__item cover-stat-view"},Vz={class:"video-card-cover-stats__value"},jz={key:1,class:"video-card-cover-stats__item cover-stat-danmaku"},Hz={class:"video-card-cover-stats__value"},zz={key:2,class:"video-card-cover-stats__item cover-stat-like"},Gz={class:"video-card-cover-stats__value"},Wz={key:0,class:"video-card-cover-stats__item video-card-cover-stats__item--duration"},Kz={class:"video-card-cover-stats__value"},Yz=qe(Me({__name:"VideoCardCover",props:{skeleton:{type:Boolean},video:{},layout:{},horizontal:{type:Boolean},removed:{type:Boolean},isHover:{type:Boolean},shouldHideOverlayElements:{type:Boolean},previewVideoUrl:{},videoElement:{},isInWatchLater:{type:Boolean},showWatcherLater:{type:Boolean},coverImageUrl:{},coverStatValues:{},coverStatsVisibility:{},hasCoverStats:{type:Boolean},shouldHideCoverStats:{type:Boolean},coverStatsStyle:{}},emits:["toggleWatchLater","undo","imageLoaded"],setup(t,{emit:e}){const i=t,n=e,s=z(null),r=z(!1);let o=null,a=null;function l(){o&&(o.destroy(),o=null),a&&(a.pause(),a.unload(),a.detachMediaElement(),a.destroy(),a=null),r.value=!1}async function u(c,d){if(c.includes(".flv"))try{const h=(await Promise.resolve().then(()=>xX)).default;h.isSupported()&&(l(),d.removeAttribute("src"),d.load(),r.value=!0,a=h.createPlayer({type:"flv",url:c,isLive:!0},{enableWorker:!1,enableStashBuffer:!1,stashInitialSize:128,lazyLoad:!1,lazyLoadMaxDuration:1,seekType:"range"}),a.attachMediaElement(d),a.load(),a.on(h.Events.LOADING_COMPLETE,()=>{r.value=!1}),a.on(h.Events.ERROR,(p,m)=>{console.error("FLV Player error:",p,m),r.value=!1,l()}),d.addEventListener("loadeddata",()=>{r.value=!1,d.play().catch(()=>{})},{once:!0}),d.addEventListener("canplay",()=>{r.value&&(r.value=!1)},{once:!0}))}catch(f){console.error("Failed to load flv.js:",f),r.value=!1}else if(c.includes(".m3u8")||c.includes("m3u8")){if(Es.isSupported())l(),d.removeAttribute("src"),d.load(),r.value=!0,o=new Es({enableWorker:!0,lowLatencyMode:!0,maxBufferLength:10,maxMaxBufferLength:20,liveSyncDurationCount:2,liveMaxLatencyDurationCount:5,maxBufferSize:60*1e3*1e3}),o.loadSource(c),o.attachMedia(d),o.on(Es.Events.MANIFEST_PARSED,()=>{r.value=!1,d.play().catch(()=>{})}),o.on(Es.Events.ERROR,(f,h)=>{if(h.fatal)switch(r.value=!1,h.type){case Es.ErrorTypes.MEDIA_ERROR:o?.recoverMediaError();break;default:l();break}}),o.on(Es.Events.BUFFER_APPENDED,()=>{r.value&&(r.value=!1)});else if(d.canPlayType("application/vnd.apple.mpegurl")){r.value=!0,d.src=c;const f=()=>{r.value=!1,d.removeEventListener("canplay",f)};d.addEventListener("canplay",f),d.play().catch(()=>{r.value=!1})}}}return Pe([()=>i.previewVideoUrl,()=>i.isHover,s],([c,d,f])=>{if(!d){l(),f&&(f.removeAttribute("src"),f.load());return}!c||!f||u(c,f)}),Ki(()=>{l()}),(c,d)=>(L(),P("div",Lz,[c.skeleton?(L(),P("div",Iz)):(L(),P(Te,{key:1},[F(v5,{src:c.coverImageUrl,loading:"lazy","root-margin":"150px","show-skeleton":!1,onLoaded:d[0]||(d[0]=f=>n("imageLoaded"))},null,8,["src"]),c.removed?(L(),P("div",Rz,[x("p",Pz,G(c.$t("video_card.video_removed")),1),F(Ir,{color:"rgba(255,255,255,.35)","text-color":"white",size:"small",onClick:d[1]||(d[1]=ft(f=>n("undo"),["prevent","stop"]))},{left:H(()=>[...d[4]||(d[4]=[x("div",{"i-mingcute-back-line":"","text-lg":""},null,-1)])]),default:H(()=>[He(" "+G(c.$t("common.undo")),1)]),_:1})])):X("",!0),!c.removed&&w(k).enableVideoPreview?(L(),_e(nt,{key:1,name:"fade"},{default:H(()=>[c.previewVideoUrl&&c.isHover?(L(),P("div",Dz,[x("video",{ref_key:"videoRef",ref:s,autoplay:"",muted:"",controls:w(k).enableVideoCtrlBarOnVideoCard&&!c.video?.roomid,style:Ue({pointerEvents:w(k).enableVideoCtrlBarOnVideoCard&&!c.video?.roomid?"auto":"none"}),"w-full":"","h-full":""},[x("source",{src:c.previewVideoUrl},null,8,Mz)],12,Oz),F(nt,{name:"fade"},{default:H(()=>[w(r)?(L(),P("div",$z,[...d[5]||(d[5]=[x("div",{class:"loading-spinner"},null,-1)])])):X("",!0)]),_:1})])):X("",!0)]),_:1})):X("",!0),c.video?.rank?(L(),P("div",{key:2,pos:"absolute top-0","p-2":"",class:Ie(c.layout==="modern"?"group-hover:opacity-0":{"opacity-0":c.shouldHideOverlayElements}),"duration-300":""},[Number(c.video.rank)<=3?(L(),P("div",Fz,G(c.video.rank),1)):(L(),P("div",Bz,G(c.video.rank),1))],2)):X("",!0),!c.removed&&c.video?(L(),P(Te,{key:3},[c.layout==="old"&&(c.video.duration||c.video.durationStr)?(L(),P("div",{key:0,pos:"absolute bottom-0 right-0",z:"2",p:"x-2 y-1",m:"1",rounded:"$bew-radius",text:"!white xs",bg:"black opacity-60",class:Ie({"opacity-0":c.shouldHideOverlayElements}),"duration-300":""},G(c.video.duration?w(Tn)(c.video.duration):c.video.durationStr),3)):X("",!0),x("div",{class:"opacity-0 group-hover/cover:opacity-100",transform:"scale-70 group-hover/cover:scale-100","duration-300":"",pos:"absolute top-0 left-0","z-2":"",onClick:d[2]||(d[2]=ft(()=>{},["stop"]))},[mi(c.$slots,"coverTopLeft",{},void 0,!0)]),c.video.liveStatus===1?(L(),P("div",{key:1,class:Ie(c.layout==="modern"?"group-hover:opacity-0":{"opacity-0":c.shouldHideOverlayElements}),pos:"absolute left-0 top-0",bg:"$bew-theme-color",text:"xs white","fw-bold":"",p:"x-2 y-1","m-1":"","inline-block":"",rounded:"$bew-radius","duration-300":""},[...d[6]||(d[6]=[He(" LIVE ",-1),x("i",{"i-svg-spinners:pulse-3":"","align-middle":"","mt--0.2em":""},null,-1)])],2)):X("",!0),c.video.badge&&Object.keys(c.video.badge).length>0?(L(),P("div",{key:2,class:Ie(c.layout==="modern"?"group-hover:opacity-0":{"opacity-0":c.shouldHideOverlayElements}),style:Ue({backgroundColor:c.video.badge.bgColor,color:c.video.badge.color}),pos:"absolute right-0 top-0",bg:"$bew-theme-color",text:"xs white",p:"x-2 y-1","m-1":"","inline-block":"",rounded:"$bew-radius","duration-300":""},G(c.video.badge.text),7)):X("",!0),c.showWatcherLater?(L(),P("button",{key:3,pos:"absolute top-0 right-0",z:"2",p:"x-2 y-1",m:"1",rounded:"$bew-radius",text:"!white xl",bg:"black opacity-60",class:"opacity-0 group-hover/cover:opacity-100",transform:"scale-70 group-hover/cover:scale-100","duration-300":"",onClick:d[3]||(d[3]=ft(f=>n("toggleWatchLater"),["prevent","stop"]))},[c.isInWatchLater?(L(),_e(sr,{key:1,content:c.$t("common.added"),placement:"bottom-right",type:"dark"},{default:H(()=>[F(w(ji),{icon:"line-md:confirm"})]),_:1},8,["content"])):(L(),_e(sr,{key:0,content:c.$t("common.save_to_watch_later"),placement:"bottom-right",type:"dark"},{default:H(()=>[...d[7]||(d[7]=[x("div",{"i-mingcute:carplay-line":""},null,-1)])]),_:1},8,["content"]))])):X("",!0),c.layout==="modern"&&c.hasCoverStats?(L(),P("div",{key:4,class:Ie(["video-card-cover-stats video-card-stats",{"video-card-cover-stats--hidden":c.shouldHideCoverStats}]),style:Ue(c.coverStatsStyle)},[x("div",Nz,[c.coverStatsVisibility?.view?(L(),P("span",Uz,[F(w(ji),{icon:"mingcute:play-circle-line",class:"video-card-cover-stats__icon","aria-hidden":"true"}),x("span",Vz,G(c.coverStatValues?.view),1)])):X("",!0),c.coverStatsVisibility?.danmaku?(L(),P("span",jz,[F(w(ji),{icon:"mingcute:danmaku-line",class:"video-card-cover-stats__icon","aria-hidden":"true"}),x("span",Hz,G(c.coverStatValues?.danmaku),1)])):X("",!0),c.coverStatsVisibility?.like?(L(),P("span",zz,[F(w(ji),{icon:"mingcute:thumb-up-2-line",class:"video-card-cover-stats__icon","aria-hidden":"true"}),x("span",Gz,G(c.coverStatValues?.like),1)])):X("",!0)]),c.coverStatsVisibility?.duration?(L(),P("span",Wz,[x("span",Kz,G(c.coverStatValues?.duration),1)])):X("",!0)],6)):X("",!0)],64)):X("",!0)],64))]))}}),[["__scopeId","data-v-18ea4d25"]]);function X6(t){return t?t.authorUrl||(t.mid?`//space.bilibili.com/${t.mid}`:""):""}function Xz(t){return t.value?t.value.currentTime:null}function qz(t,e){const i=`https://www.bilibili.com/video/${t.bvid??`av${t.aid}`}`,n=e.value;return n&&n>5?`${i}/?t=${n}`:`${i}`}const Zz=["href"],Qz={key:0,pos:"absolute top-21px left-22px","w-14px":"","h-14px":"",bg:"$bew-theme-color",border:"2 outset solid white",rounded:"1/2",grid:"","place-items-center":""},Jz={key:1,pos:"absolute top-18px left-22px","w-14px":"","h-14px":"",bg:"$bew-theme-color",rounded:"1/2",grid:"","place-items-center":""},eG={key:0,pos:"absolute right--4px",w:"28px",h:"28px",bg:"$bew-skeleton",rounded:"1/2",flex:"~ items-center justify-end"},t2=qe(Me({__name:"VideoCardAuthorAvatar",props:{author:{},maxCount:{default:3},isLive:{type:Boolean},compact:{type:Boolean,default:!1}},setup(t){const e=t,i=ge(()=>Array.isArray(e.author)?e.author?.slice(0,e.maxCount)||[]:[e.author]),n=ge(()=>Array.isArray(e.author)?!1:e.author?.authorFace==="__ketang_icon__");return(s,r)=>{const o=Ge("Picture");return w(n)?(L(),P("div",{key:0,style:{width:"34px",height:"34px"},class:Ie(s.compact?"mr-2":"mr-4"),pos:"relative","shrink-0":""},[...r[1]||(r[1]=[x("div",{class:"ketang-icon","w-34px":"","h-34px":"",rounded:"1/2",bg:"$bew-theme-color-10",grid:"~ place-items-center"},[x("div",{"i-mingcute:book-2-line":"",text:"xl $bew-theme-color"})],-1)])],2)):(L(),P("div",{key:1,style:Ue({width:Array.isArray(s.author)&&s.author.length>1?`${28+w(i)?.length*6}px`:"34px",height:Array.isArray(s.author)&&s.author.length>1?"28px":"34px"}),class:Ie(s.compact?"mr-2":"mr-4"),pos:"relative","shrink-0":""},[(L(!0),P(Te,null,Ne(w(i),(a,l)=>(L(),P("a",{key:l,href:w(X6)(a),target:"_blank",rounded:"1/2",object:"center cover",bg:"$bew-skeleton",cursor:"pointer","position-absolute":"","top-0":"","inline-block":"",style:Ue({zIndex:w(i).length-l,left:`${l*6}px`,width:w(i).length>1?"28px":"34px",height:w(i).length>1?"28px":"34px"}),class:Ie({live:s.isLive}),onClick:r[0]||(r[0]=ft(()=>{},["stop"]))},[F(o,{src:`${w(Li)(a.authorFace)}@50w_50h_1c`,loading:"lazy","w-full":"","h-full":"","aspect-ratio":"1/1",rounded:"1/2"},null,8,["src"]),a.followed&&!Array.isArray(s.author)?(L(),P("div",Qz,[...r[2]||(r[2]=[x("div",{"color-white":"","text-sm":"",class:"i-mingcute:check-fill w-8px h-8px"},null,-1)])])):s.isLive?(L(),P("div",Jz,[...r[3]||(r[3]=[x("div",{"color-white":"","text-sm":"",class:"i-svg-spinners:pulse-3 w-12px h-12px"},null,-1)])])):X("",!0)],14,Zz))),128)),Array.isArray(s.author)&&s.author.length>s.maxCount?(L(),P("span",eG,[...r[4]||(r[4]=[x("span",{text:"sm $bew-text-2","mr-1px":""},"+",-1)])])):X("",!0)],6))}}}),[["__scopeId","data-v-11569005"]]),tG=["href"],iG={key:0},nG={key:1},q6=Me({__name:"VideoCardAuthorName",props:{author:{}},setup(t){return(e,i)=>(L(),P("a",{class:"channel-name","un-text":"hover:$bew-theme-color","cursor-pointer":"","mr-4":"",href:w(X6)(Array.isArray(e.author)?e.author[0]:e.author),target:"_blank",onClick:i[0]||(i[0]=ft(()=>{},["stop"]))},[x("span",null,[Array.isArray(e.author)&&e.author.length>1?(L(),P("span",iG,G(e.$t("video_card.group_contribution",{firstAuthor:e.author[0].name,num:e.author.length})),1)):(L(),P("span",nG,G(Array.isArray(e.author)?e.author[0].name:e.author?.name),1))])],8,tG))}}),sG={key:0,m:"r-4",w:"34px",h:"34px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":""},rG={flex:"~ gap-1 justify-between items-start",w:"full"},oG={key:0,"shrink-0":"","w-8":"","h-8":"",rounded:"1/2",bg:"$bew-skeleton"},aG={key:0,flex:"~ gap-2 items-center",w:"full"},lG={flex:"~ col gap-1",w:"[calc(100%-50px)]"},uG={key:0,w:"34px",h:"34px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":"","m-r-2":""},cG={flex:"~ items-center gap-1"},dG={flex:"~ gap-1 justify-between items-start",w:"full",pos:"relative"},fG=["title"],hG=["href"],pG={key:0,class:"video-card-meta__chip",bg:"$bew-fill-1",p:"x-2","lh-6":"",rounded:"$bew-radius",text:"$bew-text-3"},mG={key:1,text:"$bew-text-2",grid:"~ place-items-center"},gG={key:0,"i-mingcute:cellphone-2-line":""},vG={key:1,"i-mingcute:movie-line":""},_G={key:1,class:"video-card-meta",flex:"~ gap-2 items-center",w:"full"},bG={flex:"~ col gap-1",w:"full"},yG={key:0,class:"video-card-meta__chip",bg:"$bew-fill-1",p:"x-2","lh-6":"",rounded:"$bew-radius",text:"$bew-text-3"},wG={key:1,text:"$bew-text-2",grid:"~ place-items-center"},EG={key:0,"i-mingcute:cellphone-2-line":""},SG={key:1,"i-mingcute:movie-line":""},xG={key:0,bg:"$bew-fill-1",p:"x-2",rounded:"$bew-radius",text:"$bew-text-3","lh-6":"","mr-1":""},TG={text:"$bew-text-2",grid:"~ place-items-center"},AG={key:0,"i-mingcute:cellphone-2-line":""},kG={key:1,"i-mingcute:movie-line":""},CG={flex:"~ items-center gap-1 wrap"},LG={key:0},IG={key:0,bg:"$bew-fill-1",p:"x-2",rounded:"$bew-radius",text:"$bew-text-3","lh-6":"","mr-1":""},RG={text:"$bew-text-2",grid:"~ place-items-center"},PG={key:0,"i-mingcute:cellphone-2-line":""},DG={key:1,"i-mingcute:movie-line":""},OG=qe(Me({__name:"VideoCardInfo",props:{skeleton:{type:Boolean},video:{},layout:{},horizontal:{type:Boolean},videoUrl:{},moreBtn:{type:Boolean},showVideoOptions:{type:Boolean},titleFontSizeClass:{},titleStyle:{},authorFontSizeClass:{},metaFontSizeClass:{},highlightTags:{},hideAuthor:{type:Boolean}},emits:["moreBtnClick"],setup(t,{expose:e,emit:i}){const n=t,s=i,r=z(null);e({moreBtnRef:r});const o=ge(()=>{const a=n.video?.tag;return a?Array.isArray(a)?a.filter(Boolean):[a]:[]});return(a,l)=>(L(),P("div",{style:Ue({width:a.horizontal?"100%":"unset",marginTop:a.horizontal?"0":a.layout==="modern"?"0.5rem":"1rem"}),flex:"~"},[a.skeleton?(L(),P(Te,{key:0},[a.layout==="old"&&!a.horizontal&&!a.hideAuthor?(L(),P("div",sG)):X("",!0),x("div",{class:Ie(["group/desc",a.layout==="modern"?"gap-2":""]),flex:"~ col",w:"full",align:"items-start"},[x("div",rG,[x("div",{class:Ie(["keep-two-lines",[a.layout==="modern"?"w-[calc(100%-40px)]":"w-full",a.layout==="modern"?"video-card-title":""]]),style:Ue(a.titleStyle),text:"overflow-ellipsis $bew-text-1 lg"},[...l[1]||(l[1]=[x("div",{"w-full":"",bg:"$bew-skeleton","rounded-4px":"",style:{height:"1em","margin-bottom":"calc((var(--bew-title-line-height, 1.35) - 1) * 0.5em)"}},null,-1),x("div",{w:"3/4",bg:"$bew-skeleton","rounded-4px":"",style:{height:"1em"}},null,-1)])],6),a.layout==="modern"?(L(),P("div",oG)):X("",!0)]),a.layout==="modern"&&!a.hideAuthor?(L(),P("div",aG,[l[2]||(l[2]=x("div",{w:"34px",h:"34px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":""},null,-1)),x("div",lG,[x("div",{w:"60%",bg:"$bew-skeleton","rounded-4px":"",class:Ie(a.authorFontSizeClass),style:{height:"1em"}},null,2),x("div",{w:"80%",bg:"$bew-skeleton","rounded-4px":"",class:Ie(a.metaFontSizeClass),style:{height:"calc(1em + 0.24em)"}},null,2)])])):X("",!0),a.layout==="modern"&&a.hideAuthor?(L(),P("div",{key:1,flex:"~ items-center gap-2",class:Ie(a.metaFontSizeClass)},[...l[3]||(l[3]=[x("div",{w:"60px",bg:"$bew-skeleton",rounded:"$bew-radius",style:{height:"calc(1em + 0.24em)"}},null,-1)])],2)):a.layout==="old"?(L(),P(Te,{key:2},[a.hideAuthor?(L(),P("div",{key:0,"mt-2":"",flex:"~ gap-1",class:Ie(a.metaFontSizeClass)},[...l[4]||(l[4]=[x("div",{bg:"$bew-skeleton",rounded:"$bew-radius","lh-6":"",p:"x-2",w:"60px",style:{height:"calc(1em + 0.24em)"}},null,-1)])],2)):(L(),P(Te,{key:1},[x("div",{text:"$bew-text-2","w-fit":"",m:"t-2",flex:"~ items-center",class:Ie(a.authorFontSizeClass)},[a.horizontal?(L(),P("div",uG)):X("",!0),l[5]||(l[5]=x("div",{w:"100px",bg:"$bew-skeleton","rounded-4px":"",style:{height:"1em"}},null,-1))],2),x("div",cG,[x("div",{class:Ie(a.metaFontSizeClass),text:"$bew-text-2"},[...l[6]||(l[6]=[x("div",{w:"150px",bg:"$bew-skeleton","rounded-4px":"",style:{height:"1em",display:"inline-block"}},null,-1)])],2)]),x("div",{"mt-2":"",flex:"~ gap-1",class:Ie(a.metaFontSizeClass)},[...l[7]||(l[7]=[x("div",{bg:"$bew-skeleton",rounded:"$bew-radius","lh-6":"",p:"x-2",w:"60px",style:{height:"calc(1em + 0.24em)"}},null,-1)])],2)],64))],64)):X("",!0)],2)],64)):a.video?(L(),P(Te,{key:1},[a.layout==="old"&&!a.horizontal&&a.video.author&&!a.hideAuthor?(L(),_e(t2,{key:0,author:a.video.author,"is-live":a.video.liveStatus===1},null,8,["author","is-live"])):X("",!0),x("div",{class:Ie(["group/desc",a.layout==="modern"?"gap-2":""]),flex:"~ col",w:"full",align:"items-start"},[x("div",dG,[x("h3",{class:Ie([a.video.liveStatus===1?"keep-one-line":"keep-two-lines",a.layout==="modern"?"video-card-title":"",a.titleFontSizeClass]),text:"overflow-ellipsis $bew-text-1",style:Ue(a.titleStyle),cursor:"pointer",title:a.video.title},[x("a",{href:a.videoUrl,target:"_blank"},G(a.video.title),9,hG)],14,fG),a.moreBtn?(L(),P("div",{key:0,ref_key:"moreBtnRef",ref:r,class:Ie(["video-card__more-btn",[{"more-active":a.showVideoOptions},a.layout==="modern"?"overflow-hidden rounded-full":""]]),bg:"hover:$bew-fill-2 active:$bew-fill-3","shrink-0":"","w-32px":"","h-32px":"",m:"t--3px r--4px",grid:"","place-items-center":"","cursor-pointer":"",rounded:"50%","duration-300":"",onClick:l[0]||(l[0]=ft(u=>s("moreBtnClick",u),["stop","prevent"]))},[...l[8]||(l[8]=[x("div",{"i-mingcute:more-2-line":"",text:"lg"},null,-1)])],2)):X("",!0)]),a.layout==="modern"&&a.hideAuthor&&(o.value.length||a.highlightTags.length||a.video.publishedTimestamp||a.video.capsuleText||a.video.type==="vertical"||a.video.type==="bangumi")?(L(),P("div",{key:0,flex:"~ items-center gap-2 wrap",class:Ie(a.metaFontSizeClass)},[(L(!0),P(Te,null,Ne(o.value,u=>(L(),P("span",{key:`primary-${u}`,class:"video-card-meta__chip",text:"$bew-theme-color",p:"x-2","lh-6":"",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),(L(!0),P(Te,null,Ne(a.highlightTags,u=>(L(),P("span",{key:`highlight-${u}`,class:"video-card-meta__chip",text:"$bew-theme-color",p:"x-2","lh-6":"",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),a.video.publishedTimestamp||a.video.capsuleText?(L(),P("span",pG,G(a.video.publishedTimestamp?w(_c)(a.video.publishedTimestamp*1e3):a.video.capsuleText?.trim()),1)):X("",!0),a.video.type==="vertical"||a.video.type==="bangumi"?(L(),P("span",mG,[a.video.type==="vertical"?(L(),P("div",gG)):a.video.type==="bangumi"?(L(),P("div",vG)):X("",!0)])):X("",!0)],2)):X("",!0),a.layout==="modern"&&!a.hideAuthor?(L(),P("div",_G,[a.video.author?(L(),_e(t2,{key:0,author:a.video.author,"is-live":a.video.liveStatus===1,compact:""},null,8,["author","is-live"])):X("",!0),x("div",bG,[a.video.author?(L(),P("div",{key:0,flex:"~ items-center gap-2",text:"$bew-text-2",class:Ie(a.authorFontSizeClass)},[F(q6,{author:a.video.author},null,8,["author"])],2)):X("",!0),o.value.length||a.highlightTags.length||a.video.publishedTimestamp||a.video.capsuleText||a.video.type==="vertical"||a.video.type==="bangumi"?(L(),P("div",{key:1,flex:"~ items-center gap-2 wrap",class:Ie(a.metaFontSizeClass)},[(L(!0),P(Te,null,Ne(o.value,u=>(L(),P("span",{key:`primary-${u}`,class:"video-card-meta__chip",text:"$bew-theme-color",p:"x-2","lh-6":"",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),(L(!0),P(Te,null,Ne(a.highlightTags,u=>(L(),P("span",{key:`highlight-${u}`,class:"video-card-meta__chip",text:"$bew-theme-color",p:"x-2","lh-6":"",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),a.video.publishedTimestamp||a.video.capsuleText?(L(),P("span",yG,G(a.video.publishedTimestamp?w(_c)(a.video.publishedTimestamp*1e3):a.video.capsuleText?.trim()),1)):X("",!0),a.video.type==="vertical"||a.video.type==="bangumi"?(L(),P("span",wG,[a.video.type==="vertical"?(L(),P("div",EG)):a.video.type==="bangumi"?(L(),P("div",SG)):X("",!0)])):X("",!0)],2)):X("",!0)])])):a.layout==="old"?(L(),P(Te,{key:2},[a.hideAuthor?(L(),P("div",{key:0,"mt-2":"",flex:"~ gap-1 wrap",class:Ie(a.metaFontSizeClass)},[(L(!0),P(Te,null,Ne(o.value,u=>(L(),P("span",{key:`legacy-primary-${u}`,text:"$bew-theme-color","lh-6":"",p:"x-2",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),(L(!0),P(Te,null,Ne(a.highlightTags,u=>(L(),P("span",{key:`highlight-${u}`,text:"$bew-theme-color","lh-6":"",p:"x-2",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),a.video.publishedTimestamp||a.video.capsuleText?(L(),P("span",xG,G(a.video.publishedTimestamp?w(_c)(a.video.publishedTimestamp*1e3):a.video.capsuleText?.trim()),1)):X("",!0),x("span",TG,[a.video.type==="vertical"?(L(),P("div",AG)):a.video.type==="bangumi"?(L(),P("div",kG)):X("",!0)])],2)):(L(),P(Te,{key:1},[x("div",{text:"$bew-text-2","w-fit":"",m:"t-2",flex:"~ items-center wrap",class:Ie(a.authorFontSizeClass)},[x("span",{style:Ue({marginBottom:a.horizontal?"0.5rem":"0"}),flex:"inline items-center"},[a.horizontal&&a.video.author?(L(),_e(t2,{key:0,author:a.video.author,"is-live":a.video.liveStatus===1},null,8,["author","is-live"])):X("",!0),F(q6,{author:a.video.author},null,8,["author"])],4)],2),x("div",CG,[x("div",{text:"$bew-text-2",rounded:"$bew-radius","inline-block":"",class:Ie(a.metaFontSizeClass)},[a.video.view||a.video.viewStr?(L(),P("span",LG,G(a.video.view?a.$t("common.view",{count:w(Bs)(a.video.view)},a.video.view):`${w(Bs)(a.video.viewStr||"0")}${a.$t("common.viewWithoutNum")}`),1)):X("",!0),a.video.danmaku||a.video.danmakuStr?(L(),P(Te,{key:1},[l[9]||(l[9]=x("span",{"text-xs":"","font-light":"","mx-4px":""},"",-1)),x("span",null,G(a.video.danmaku?a.$t("common.danmaku",{count:w(Bs)(a.video.danmaku)},a.video.danmaku):`${w(Bs)(a.video.danmakuStr||"0")}${a.$t("common.danmakuWithoutNum")}`),1)],64)):X("",!0),l[10]||(l[10]=x("br",null,null,-1))],2)]),x("div",{"mt-2":"",flex:"~ gap-1 wrap",class:Ie(a.metaFontSizeClass)},[(L(!0),P(Te,null,Ne(o.value,u=>(L(),P("span",{key:`legacy-primary-${u}`,text:"$bew-theme-color","lh-6":"",p:"x-2",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),(L(!0),P(Te,null,Ne(a.highlightTags,u=>(L(),P("span",{key:`highlight-${u}`,text:"$bew-theme-color","lh-6":"",p:"x-2",rounded:"$bew-radius",bg:"$bew-theme-color-20"},G(u),1))),128)),a.video.publishedTimestamp||a.video.capsuleText?(L(),P("span",IG,G(a.video.publishedTimestamp?w(_c)(a.video.publishedTimestamp*1e3):a.video.capsuleText?.trim()),1)):X("",!0),x("span",RG,[a.video.type==="vertical"?(L(),P("div",PG)):a.video.type==="bangumi"?(L(),P("div",DG)):X("",!0)])],2)],64))],64)):X("",!0)],2)],64)):X("",!0)],4))}}),[["__scopeId","data-v-97a19212"]]);function MG(t){const e=Ha(),{openIframeDrawer:i}=$t(),n=An(),s=ge(()=>Vt(t)),r=hs("moments-selected-uploader",z(null)),o=z(!1),a=z({}),l=z(!1),u=z(null),c=z(null),d=z(),f=z(null),h=z(!1),p=z(!1),m=z(null),g=z(null),v=z(""),b=z("auto"),_=z(null),y=z(null),E=z(!1);Dd(()=>{E.value=!0,m.value&&(clearTimeout(m.value),m.value=null),g.value&&(clearTimeout(g.value),g.value=null),p.value=!1});const S=ge(()=>{if(l.value||!s.value.video)return;let B="";if(s.value.video.url)B=s.value.video.url;else if(s.value.video.bvid||s.value.video.aid)B=qz(s.value.video,f);else if(s.value.video.epid)B=`https://www.bilibili.com/bangumi/play/ep${s.value.video.epid}/`;else if(s.value.video.roomid)B=`https://live.bilibili.com/${s.value.video.roomid}/`;else return"";try{const W=new URL(B);return W.pathname.endsWith("/")||(W.pathname+="/"),W.toString()}catch{return B}}),A=ge(()=>{if(!s.value.video)return{view:void 0,danmaku:void 0,like:void 0};const{view:B,viewStr:W,danmaku:te,danmakuStr:re,like:q,likeStr:le}=s.value.video;return{view:Fs(B??W),danmaku:Fs(te??re),like:Fs(q??le)}}),C=ge(()=>s.value.showPreview&&k.value.enableVideoPreview&&p.value&&v.value&&n.isLogin);function T(B){return B?.author?(Array.isArray(B.author)?B.author:[B.author]).map(te=>te.mid).filter(te=>typeof te=="number"):[]}Pe(()=>p.value,async B=>{if(!(!s.value.video||!B)&&!E.value){if(r.value!==null){const W=T(s.value.video);if(W.length===0||!W.includes(r.value))return}if(s.value.showPreview&&k.value.enableVideoPreview&&!v.value){if(!n.isLogin)return;if(s.value.video.roomid)try{const W=await ze.live.getLivePlayUrl({cid:s.value.video.roomid,platform:"web",qn:80});if(E.value)return;W.code===0&&W.data.durl&&W.data.durl.length>0&&(v.value=W.data.durl[0].url)}catch{}else if(s.value.video.aid||s.value.video.bvid){let W=s.value.video.cid;if(!W)try{const te=await ze.video.getVideoInfo({bvid:s.value.video.bvid});if(E.value)return;te.code===0&&(W=te.data.cid)}catch{}if(E.value)return;ze.video.getVideoPreview({bvid:s.value.video.bvid,cid:W}).then(te=>{E.value||te.code===0&&te.data.durl&&te.data.durl.length>0&&(v.value=te.data.durl[0].url)})}}}});function I(){if(s.value.video)if(h.value)ze.watchlater.removeFromWatchLater({aid:s.value.video.id,csrf:oi()}).then(B=>{B.code===0?(h.value=!1,setTimeout(()=>{n.getAllWatchLaterList()},1e3)):e.error(B.message)});else{const B={csrf:oi()};s.value.video.bvid?B.bvid=s.value.video.bvid:B.aid=s.value.video.id,ze.watchlater.saveToWatchLater(B).then(W=>{W.code===0?(h.value=!0,setTimeout(()=>{n.getAllWatchLaterList()},1e3)):e.error(W.message)})}}function D(){g.value&&(clearTimeout(g.value),g.value=null),b.value="visible",m.value&&clearTimeout(m.value);const B=k.value.hoverVideoCardDelayed?1200:500;m.value=window.setTimeout(()=>{m.value=null,p.value=!0},B)}function R(){m.value&&(clearTimeout(m.value),m.value=null),g.value&&clearTimeout(g.value),g.value=window.setTimeout(()=>{g.value=null,b.value="auto",p.value=!1},100)}function O(B){f.value=Xz(_),k.value.videoCardLinkOpenMode==="background"&&S.value&&!B.ctrlKey&&!B.metaKey&&(B.preventDefault(),Wo(S.value)),k.value.videoCardLinkOpenMode==="drawer"&&S.value&&!B.ctrlKey&&!B.metaKey&&(B.preventDefault(),i(S.value))}function M(B){if(!u.value)return;const{height:W}=u.value.getBoundingClientRect(),te=Math.min(406,window.innerHeight*.8),re=B.y,le=window.innerHeight-B.y>te?0:-te-W,be=Math.max(le,-re+10);o.value=!1,a.value={position:"absolute",top:0,left:0,transform:`translate(${B.x}px, ${B.y+be}px)`},o.value=!0}function U(){if(s.value.type==="appRcmd"){const B={access_key:ts.value.accessToken,goto:s.value.video?.goto,id:s.value.video?.id,idx:Number((Date.now()/1e3).toFixed(0)),reason_id:d.value?.dislikeReasonId,build:74800100,device:"pad",mobi_app:"iphone",appkey:po.appkey};ze.video.undoDislikeVideo({...B,sign:Q5(B)}).then(W=>{W.code===0?l.value=!1:e.error(W.message)})}else l.value=!1}function $(B){d.value=B,l.value=!0}return{showVideoOptions:o,videoOptionsFloatingStyles:a,removed:l,moreBtnRef:u,contextMenuRef:c,videoCurrentTime:f,isInWatchLater:h,isHover:p,previewVideoUrl:v,contentVisibility:b,videoElement:_,cardRootRef:y,videoUrl:S,videoStatNumbers:A,shouldHideOverlayElements:C,toggleWatchLater:I,handleMouseEnter:D,handelMouseLeave:R,handleClick:O,handleMoreBtnClick:M,handleUndo:U,handleRemoved:$,removeHttpFromUrl:Li,calcCurrentTime:Tn,numFormatter:Bs}}var bo=(t=>(t.Dislike="dislike",t.Feedback="feedback",t.WatchLater="watch_later",t))(bo||{});const $G={flex:"~ col gap-4"},FG={text:"$bew-text-1"},BG={text:"$bew-text-3 sm"},NG=Me({__name:"BlockUserConfirmDialog",props:Sn({modelValue:{type:Boolean},video:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:Sn(["confirm","close"],["update:modelValue"]),setup(t,{emit:e}){const i=t,n=e,s=Fn(t,"modelValue"),r=ge(()=>Array.isArray(i.video.author)?i.video.author[0]?.name||"":i.video.author?.name||"");function o(){n("confirm"),s.value=!1}function a(){s.value=!1,n("close")}return(l,u)=>{const c=Ge("Dialog");return s.value?(L(),_e(c,{key:0,title:l.$t("video_card.block_user_confirm.title"),width:"420px","append-to-bewly-body":"",onClose:a,onConfirm:o},{default:H(()=>[x("div",$G,[x("p",FG,G(l.$t("video_card.block_user_confirm.message",{name:w(r)})),1),x("p",BG,G(l.$t("video_card.block_user_confirm.warning")),1)])]),_:1},8,["title"])):X("",!0)}}}),UG={flex:"~ col gap-2"},VG=["onClick"],jG={flex:"~ gap-2"},HG={bg:"$bew-theme-color","color-white":"","w-20px":"","h-20px":"","rounded-10":"",flex:"~ justify-center items-center"},zG=["innerHTML"],GG=qe(Me({__name:"DislikeDialog",props:Sn({modelValue:{type:Boolean},video:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:Sn(["removed","close"],["update:modelValue"]),setup(t,{emit:e}){const i=t,n=e,s=Fn(t,"modelValue"),r=Ha(),{t:o}=St(),a=z(!1),l=z(1);function u(){s.value=!1,n("close")}function c(){if(!ts.value.accessToken){r.warning(o("auth.auth_access_key_first"));return}a.value=!0;const d={access_key:ts.value.accessToken,goto:i.video?.goto,id:i.video?.id,idx:(Date.now()/1e3).toFixed(0),reason_id:l.value,build:74800100,device:"pad",mobi_app:"iphone",appkey:po.appkey};ze.video.dislikeVideo({...d,sign:Q5(d)}).then(f=>{f.code===0?n("removed",{dislikeReasonId:l.value}):r.error(f.message)}).finally(()=>{a.value=!1})}return Ps(d=>{if(s.value){const f=i.video?.threePointV2?.find(h=>h.type===bo.Dislike)?.reasons||[];if(d.key>="0"&&d.key<="9")d.preventDefault(),f.forEach(h=>{f[Number(d.key)-1]&&h.id===f[Number(d.key)-1].id&&(l.value=h.id)});else if(d.key==="ArrowUp"){d.preventDefault();const h=f.findIndex(p=>l.value===p.id);h>0&&(l.value=f[h-1].id)}else if(d.key==="ArrowDown"){d.preventDefault();const h=f.findIndex(p=>l.value===p.id);h<f.length-1&&(l.value=f[h+1].id)}}}),(d,f)=>{const h=Ge("Dialog");return s.value?(L(),_e(h,{key:0,title:d.$t("home.tell_us_why"),width:"420px","append-to-bewly-body":"",loading:w(a),onClose:u,onConfirm:c},{default:H(()=>[x("ul",UG,[(L(!0),P(Te,null,Ne(d.video?.threePointV2?.find(p=>p.type===w(bo).Dislike)?.reasons,(p,m)=>(L(),P("li",{key:p.id,class:Ie({"activated-dislike-reason":w(l)===p.id}),p:"x-6 y-4",rounded:"$bew-radius","cursor-pointer":"",bg:"$bew-fill-1 hover:$bew-fill-2",flex:"~ gap-2 items-center justify-between",onClick:g=>l.value=p.id},[x("div",jG,[x("div",HG,G(m+1),1),He(" "+G(p.name),1)]),w(l)===p.id?(L(),_e(w(ji),{key:0,icon:"line-md:confirm","w-18px":"","h-18px":""})):X("",!0)],10,VG))),128))]),x("p",{text:"$bew-text-3 sm","mt-4":"",innerHTML:d.$t("home.not_interested_desc")},null,8,zG)]),_:1},8,["title","loading"])):X("",!0)}}}),[["__scopeId","data-v-dc7e92bc"]]),WG={flex:"~ col gap-4"},KG={text:"$bew-text-1"},YG={text:"$bew-text-3 sm"},XG=Me({__name:"FollowUserConfirmDialog",props:Sn({modelValue:{type:Boolean},video:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:Sn(["confirm","close"],["update:modelValue"]),setup(t,{emit:e}){const i=t,n=e,s=Fn(t,"modelValue"),r=ge(()=>Array.isArray(i.video.author)?i.video.author[0]?.name||"":i.video.author?.name||"");function o(){n("confirm"),s.value=!1}function a(){s.value=!1,n("close")}return(l,u)=>{const c=Ge("Dialog");return s.value?(L(),_e(c,{key:0,title:l.$t("video_card.follow_user_confirm.title"),width:"420px","append-to-bewly-body":"",onClose:a,onConfirm:o},{default:H(()=>[x("div",WG,[x("p",KG,G(l.$t("video_card.follow_user_confirm.message",{name:w(r)})),1),x("p",YG,G(l.$t("video_card.follow_user_confirm.warning")),1)])]),_:1},8,["title"])):X("",!0)}}}),qG={flex:"~ col gap-4"},ZG={text:"$bew-text-1"},QG={text:"$bew-text-3 sm"},JG=Me({__name:"UnfollowUserConfirmDialog",props:Sn({modelValue:{type:Boolean},video:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:Sn(["confirm","close"],["update:modelValue"]),setup(t,{emit:e}){const i=t,n=e,s=Fn(t,"modelValue"),r=ge(()=>Array.isArray(i.video.author)?i.video.author[0]?.name||"":i.video.author?.name||"");function o(){n("confirm"),s.value=!1}function a(){s.value=!1,n("close")}return(l,u)=>{const c=Ge("Dialog");return s.value?(L(),_e(c,{key:0,title:l.$t("video_card.unfollow_user_confirm.title"),width:"420px","append-to-bewly-body":"",onClose:a,onConfirm:o},{default:H(()=>[x("div",qG,[x("p",ZG,G(l.$t("video_card.unfollow_user_confirm.message",{name:w(r)})),1),x("p",QG,G(l.$t("video_card.unfollow_user_confirm.warning")),1)])]),_:1},8,["title"])):X("",!0)}}}),eW={key:0},tW=["onClick"],iW={key:0},nW={key:1},sW=["onClick"],rW={key:2,class:"divider"},oW=["onClick"],aW={key:0,class:"divider"},lW=qe(Me({__name:"VideoCardContextMenu",props:{video:{},contextMenuStyles:{},isFollowingPage:{type:Boolean,default:!1}},emits:["removed","close","reopen"],setup(t,{emit:e}){const i=t,n=e,s=z(null),r=z(!1),o=z(!1);function a(){if(!s.value)return;const{scrollTop:te,scrollHeight:re,clientHeight:q}=s.value;r.value=te>0,o.value=te<re-q-5}function l(){s.value&&s.value.scrollTo({top:0,behavior:"smooth"})}function u(){s.value&&s.value.scrollTo({top:s.value.scrollHeight,behavior:"smooth"})}const c=hs("getVideoType"),d=Mt([{id:1,name:""},{id:2,name:"UP"}]),{t:f}=St(),h=z(!1),p=z(!1),m=z(!1),g=z(!1),v=z(!1),b=z(!1),{openIframeDrawer:_}=$t(),y=ge(()=>{let te=[[{command:0,name:f("video_card.operation.open_in_new_tab"),icon:"i-solar:square-top-down-bold-duotone"},{command:1,name:f("video_card.operation.open_in_background"),icon:"i-solar:square-top-down-bold-duotone"},{command:3,name:f("video_card.operation.open_in_new_window"),icon:"i-solar:maximize-square-3-bold-duotone"},{command:2,name:f("video_card.operation.open_in_current_tab"),icon:"i-solar:square-top-down-bold-duotone"},{command:4,name:f("video_card.operation.open_in_drawer"),icon:"i-solar:archive-up-minimlistic-bold-duotone"}],[{command:7,name:f("video_card.operation.copy_video_link"),icon:"i-solar:copy-bold-duotone"},{command:8,name:f("video_card.operation.copy_bv_number"),icon:"i-solar:copy-bold-duotone"},{command:9,name:f("video_card.operation.copy_av_number"),icon:"i-solar:copy-bold-duotone"}],[{command:5,name:f("video_card.operation.view_the_original_cover"),icon:"i-solar:gallery-minimalistic-bold-duotone"}]];const re=Array.isArray(i.video.author)?i.video.author[0]?.followed:i.video.author?.followed;return(re!==void 0||i.isFollowingPage)&&(re===!0||i.isFollowingPage&&re!==!1?te.push([{command:11,name:f("video_card.operation.unfollow_user"),icon:"i-solar:user-minus-bold-duotone",color:"text-orange-500"}]):te.push([{command:10,name:f("video_card.operation.follow_user"),icon:"i-solar:user-plus-bold-duotone",color:"text-blue-500"}])),te.push([{command:12,name:f("video_card.operation.block_user"),icon:"i-solar:user-block-bold-duotone",color:"text-red-500"}]),(c()==="bangumi"||c()==="live")&&(te=te.map(q=>q.filter(le=>le.command!==8&&le.command!==9&&le.command!==6))),te});Pe(()=>h.value,te=>{te&&ot(()=>{a()})});let E=null;st(()=>{h.value=!0,ot(()=>{a(),s.value&&(E=new ResizeObserver(()=>{a()}),E.observe(s.value))})}),ki(()=>{E&&(E.disconnect(),E=null)});function S(te){U()}function A(te){switch(te){case bo.Feedback:break;case bo.Dislike:T();break}}function C(te){switch(te){case 0:Os(i.video.url),O();break;case 1:Wo(i.video.url),O();break;case 3:b.value=!0;break;case 2:window.open(i.video.url,"_self"),O();break;case 4:_(i.video.url||""),O();break;case 7:navigator.clipboard.writeText(i.video.url),O();break;case 8:navigator.clipboard.writeText(i.video.bvid),O();break;case 9:navigator.clipboard.writeText(`av${i.video.id.toString()}`),O();break;case 5:window.open(i.video.cover,"_blank"),O();break;case 10:I();break;case 11:D();break;case 12:R();break}}function T(){p.value=!0,h.value=!1}function I(){g.value=!0,h.value=!1}function D(){v.value=!0,h.value=!1}function R(){m.value=!0,h.value=!1}function O(){h.value=!1,b.value=!1,n("close")}function M(){O()}function U(te){n("removed",te),O()}async function $(){if(!i.video.author){console.error("No author information available");return}const te=Array.isArray(i.video.author)?i.video.author[0]?.mid:i.video.author.mid;if(!te){console.error("No author mid available");return}try{const re=await ze.user.relationModify({fid:te.toString(),act:5,re_src:11,csrf:oi()});re.code===0?U():console.error("Block user failed:",re.message)}catch(re){console.error("Block user error:",re)}}async function B(){if(!i.video.author){console.error("No author information available");return}const te=Array.isArray(i.video.author)?i.video.author[0]?.mid:i.video.author.mid;if(!te){console.error("No author mid available");return}try{const re=await ze.user.relationModify({fid:te.toString(),act:1,re_src:11,csrf:oi()});re.code===0?O():console.error("Follow user failed:",re.message)}catch(re){console.error("Follow user error:",re)}}async function W(){if(!i.video.author){console.error("No author information available");return}const te=Array.isArray(i.video.author)?i.video.author[0]?.mid:i.video.author.mid;if(!te){console.error("No author mid available");return}try{const re=await ze.user.relationModify({fid:te.toString(),act:2,re_src:11,csrf:oi()});re.code===0?O():console.error("Unfollow user failed:",re.message)}catch(re){console.error("Unfollow user error:",re)}}return(te,re)=>{const q=Ge("PipWindow");return L(),P("div",null,[w(h)?(L(),P("div",eW,[x("div",{style:Ue([{"backdrop-filter":"var(--bew-filter-glass-1)","box-shadow":"var(--bew-shadow-edge-glow-1), var(--bew-shadow-1)"},te.contextMenuStyles]),"p-1":"",bg:"$bew-elevated",rounded:"$bew-radius","min-w-200px":"",m:"t-4 l-[calc(-200px+1rem)]",border:"1 $bew-border-color",class:"context-menu-container"},[Bt(x("div",{class:"scroll-indicator scroll-indicator-top",onClick:l},[...re[4]||(re[4]=[x("i",{class:"i-mingcute:up-line"},null,-1)])],512),[[ii,w(r)]]),x("ul",{ref_key:"menuListRef",ref:s,flex:"~ col gap-1",class:"context-menu-list",onScroll:a},[w(c)()==="appRcmd"?(L(!0),P(Te,{key:0},Ne(te.video.threePointV2,le=>(L(),P(Te,{key:le.type},[le.type!==w(bo).WatchLater&&le.type!==w(bo).Feedback?(L(),P("li",{key:0,class:"context-menu-item",onClick:be=>A(le.type)},[re[5]||(re[5]=x("i",{class:"item-icon","i-solar:confounded-circle-bold-duotone":""},null,-1)),le.type===w(bo).Dislike?(L(),P("span",iW,G(te.$t("video_card.operation.not_interested")),1)):(L(),P("span",nW,G(le.title),1))],8,tW)):X("",!0)],64))),128)):w(c)()==="rcmd"?(L(!0),P(Te,{key:1},Ne(w(d),le=>(L(),P("li",{key:le.id,class:"context-menu-item",onClick:be=>S(le.id)},[re[6]||(re[6]=x("i",{class:"item-icon","i-solar:confounded-circle-bold-duotone":""},null,-1)),He(" "+G(le.name),1)],8,sW))),128)):X("",!0),w(c)()==="rcmd"?(L(),P("div",rW)):X("",!0),(L(!0),P(Te,null,Ne(w(y),(le,be)=>(L(),P(Te,{key:be},[(L(!0),P(Te,null,Ne(le,se=>(L(),P("li",{key:se.command,class:Ie(["context-menu-item",se.color]),onClick:ne=>C(se.command)},[x("i",{class:Ie(["item-icon",[se.icon,se.color]])},null,2),He(" "+G(se.name),1)],10,oW))),128)),be!==w(y).length-1?(L(),P("div",aW)):X("",!0)],64))),128))],544),Bt(x("div",{class:"scroll-indicator scroll-indicator-bottom",onClick:u},[...re[7]||(re[7]=[x("i",{class:"i-mingcute:down-line"},null,-1)])],512),[[ii,w(o)]])],4)])):X("",!0),w(h)?(L(),P("div",{key:1,pos:"fixed top-0 left-0","w-full":"","h-full":"",style:{"z-index":"9998"},onClick:O,onContextmenu:ft(M,["right","prevent","stop"])},null,32)):X("",!0),w(p)?(L(),_e(GG,{key:2,modelValue:w(p),"onUpdate:modelValue":re[0]||(re[0]=le=>kt(p)?p.value=le:null),video:te.video,onClose:O,onRemoved:U},null,8,["modelValue","video"])):X("",!0),w(g)?(L(),_e(XG,{key:3,modelValue:w(g),"onUpdate:modelValue":re[1]||(re[1]=le=>kt(g)?g.value=le:null),video:te.video,onClose:O,onConfirm:B},null,8,["modelValue","video"])):X("",!0),w(v)?(L(),_e(JG,{key:4,modelValue:w(v),"onUpdate:modelValue":re[2]||(re[2]=le=>kt(v)?v.value=le:null),video:te.video,onClose:O,onConfirm:W},null,8,["modelValue","video"])):X("",!0),w(m)?(L(),_e(NG,{key:5,modelValue:w(m),"onUpdate:modelValue":re[3]||(re[3]=le=>kt(m)?m.value=le:null),video:te.video,onClose:O,onConfirm:$},null,8,["modelValue","video"])):X("",!0),w(b)?(L(),_e(q,{key:6,url:te.video.url,onClose:O},null,8,["url"])):X("",!0)])}}}),[["__scopeId","data-v-744a8bf4"]]),uW={class:"video-card group",w:"full",rounded:"$bew-radius"},Z6=qe(Me({__name:"VideoCard",props:{skeleton:{type:Boolean},video:{},type:{default:"common"},showWatcherLater:{type:Boolean,default:!0},horizontal:{type:Boolean},showPreview:{type:Boolean},moreBtn:{type:Boolean,default:!0},hideAuthor:{type:Boolean},isFollowingPage:{type:Boolean}},setup(t){const e=t,i=ge(()=>k.value.videoCardLayout==="old"?"old":"modern"),n=MG(e),{mainAppRef:s}=$t(),{titleFontSizeClass:r,titleStyle:o,authorFontSizeClass:a,metaFontSizeClass:l}=CN(),u=/(?||||views?|likes?|danmakus?|comments?|||||[])/gi,c=/[]/g;function d(M,U){return typeof M=="number"?Bs(M).trim():U?U.replace(u,"").replace(c,"").replace(/\s+/g," ").trim()||U.trim():""}const f=ge(()=>{if(!e.video||i.value!=="modern")return{view:"",danmaku:"",like:"",duration:""};const M=n.videoStatNumbers.value;return{view:d(M.view,e.video.viewStr),danmaku:d(M.danmaku,e.video.danmakuStr),like:d(M.like,e.video.likeStr),duration:e.video.duration?Tn(e.video.duration):e.video.durationStr??""}}),h=ge(()=>{const{view:M,danmaku:U,like:$,duration:B}=f.value;return e.hideAuthor?{view:!!M,danmaku:!1,like:!1,duration:!!B}:{view:!!M,danmaku:!!U,like:!!$,duration:!!B}}),p=ge(()=>{if(i.value!=="modern")return!1;const M=h.value,U=f.value;return M.view&&U.view||M.danmaku&&U.danmaku||M.like&&U.like||M.duration&&U.duration}),m=ge(()=>e.showPreview&&k.value.enableVideoPreview&&n.isHover.value&&n.previewVideoUrl.value&&n.shouldHideOverlayElements.value),g=ge(()=>{const M=e.video;if(!M)return[];const{tag:U}=M;return U?Array.isArray(U)?U.filter(Boolean):[U]:[]}),v=ge(()=>i.value!=="modern"?{}:{}),b=[{view:1e6,ratio:.01},{view:2e5,ratio:.025},{view:1e5,ratio:.04},{view:1e4,ratio:.05}],_=[{view:1e6,ratio:.001},{view:2e5,ratio:.0025},{view:1e5,ratio:.004},{view:0,ratio:.005}],y=ge(()=>{if(!e.video)return[];if(!k.value.showVideoCardRecommendTag)return[];const M=[],U=n.videoStatNumbers.value,$=U.view??0;if($<=0)return M;if($>=1e4){const te=(U.like??0)/$,re=b.find(se=>$>=se.view);re&&te>=re.ratio&&M.push("");const le=(U.danmaku??0)/$,be=_.find(se=>$>=se.view);be&&le>be.ratio&&M.push("")}const B=e.video?E(e.video):void 0;return B&&M.push(B),$>=1e6&&(g.value.some(te=>/||views?|play/i.test(te))||M.push("")),g.value.length>=2?[]:g.value.length>0?M.slice(0,1):M.slice(0,2)});function E(M){const U=S(M);if(U){if(U>=2400)return"";if(U>=1200)return""}}function S(M){const{duration:U}=M;return typeof U=="number"&&U>0?U:A(M.durationStr)}function A(M){if(!M)return;const U=M.split(":").map(B=>Number(B));if(U.some(B=>Number.isNaN(B)))return;let $=0;for(const B of U)$=$*60+B;return $}const C=ge(()=>e.video?`${n.removeHttpFromUrl(e.video.cover)}@672w_378h_1c_!web-home-common-cover`:""),T=z(),I=z(!1),D=ge(()=>e.skeleton),R=ge(()=>e.skeleton);Pe(()=>e.skeleton,M=>{M&&(I.value=!1)});function O(){I.value=!0}return Jr(()=>{T.value?.moreBtnRef&&(n.moreBtnRef.value=T.value.moreBtnRef)}),Xu("getVideoType",()=>e.type),(M,U)=>(L(),P("div",{ref:$=>w(n).cardRootRef.value=$,class:Ie(["video-card-container",[i.value==="modern"?"mb-3":"mb-4",M.skeleton?"video-card-container--skeleton":"video-card-container--interactive"]]),"duration-300":"","ease-in-out":"",rounded:"$bew-radius"},[x("div",uW,[(L(),_e(wr(D.value?"div":"ALink"),Sr({style:{display:M.horizontal?"flex":"block",gap:M.horizontal?"1.5rem":"0"}},D.value?{}:{href:w(n).videoUrl.value,type:"videoCard",customClickEvent:w(k).videoCardLinkOpenMode==="drawer"||w(k).videoCardLinkOpenMode==="background"},zp(D.value?{}:{mouseenter:w(n).handleMouseEnter,mouseleave:w(n).handelMouseLeave,click:w(n).handleClick})),{default:H(()=>[x("div",{class:Ie(M.horizontal?"horizontal-card-cover":"vertical-card-cover")},[F(Yz,{skeleton:D.value,video:e.video,layout:i.value,horizontal:M.horizontal,removed:w(n).removed.value,"is-hover":w(n).isHover.value,"should-hide-overlay-elements":!!w(n).shouldHideOverlayElements.value,"preview-video-url":w(n).previewVideoUrl.value||"","video-element":w(n).videoElement.value||null,"is-in-watch-later":w(n).isInWatchLater.value,"show-watcher-later":M.showWatcherLater,"cover-image-url":C.value,"cover-stat-values":f.value,"cover-stats-visibility":h.value,"has-cover-stats":!!p.value,"should-hide-cover-stats":!!m.value,"cover-stats-style":v.value,onToggleWatchLater:w(n).toggleWatchLater,onUndo:w(n).handleUndo,onImageLoaded:O},{coverTopLeft:H(()=>[mi(M.$slots,"coverTopLeft",{},void 0,!0)]),_:3},8,["skeleton","video","layout","horizontal","removed","is-hover","should-hide-overlay-elements","preview-video-url","video-element","is-in-watch-later","show-watcher-later","cover-image-url","cover-stat-values","cover-stats-visibility","has-cover-stats","should-hide-cover-stats","cover-stats-style","onToggleWatchLater","onUndo"])],2),w(n).removed.value?X("",!0):(L(),_e(OG,{key:0,ref_key:"infoComponentRef",ref:T,skeleton:R.value,video:e.video,layout:i.value,horizontal:M.horizontal||!1,"video-url":w(n).videoUrl.value,"more-btn":M.moreBtn,"show-video-options":w(n).showVideoOptions.value,"title-font-size-class":w(r),"title-style":w(o),"author-font-size-class":w(a),"meta-font-size-class":w(l),"highlight-tags":y.value,"hide-author":M.hideAuthor,onMoreBtnClick:w(n).handleMoreBtnClick},null,8,["skeleton","video","layout","horizontal","video-url","more-btn","show-video-options","title-font-size-class","title-style","author-font-size-class","meta-font-size-class","highlight-tags","hide-author","onMoreBtnClick"]))]),_:3},16,["style"]))]),w(n).showVideoOptions.value&&e.video?(L(),_e(La,{key:0,to:w(s)},[F(lW,{video:{...e.video,url:w(n).videoUrl.value},"context-menu-styles":w(n).videoOptionsFloatingStyles.value,"is-following-page":e.isFollowingPage,onClose:U[0]||(U[0]=$=>w(n).showVideoOptions.value=!1),onRemoved:w(n).handleRemoved},null,8,["video","context-menu-styles","is-following-page","onRemoved"])],8,["to"])):X("",!0)],2))}}),[["__scopeId","data-v-02f045bb"]]),cW=Object.freeze(Object.defineProperty({__proto__:null,default:Z6},Symbol.toStringTag,{value:"Module"})),dW={key:0,"mb-3":"","pointer-events-none":"","select-none":"",style:{"aspect-ratio":"11 / 10"}},fW={key:1,flex:"~ gap-6","mb-3":"","pointer-events-none":"","select-none":"",style:{contain:"layout","min-height":"180px"}},hW={key:2,"mb-4":"","pointer-events-none":"","select-none":"",style:{"aspect-ratio":"10 / 11"}},pW={key:3,flex:"~ gap-6","mb-4":"","pointer-events-none":"","select-none":"",style:{contain:"layout","min-height":"180px"}},mW=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"VideoCardSkeleton",props:{horizontal:{type:Boolean},hasTag:{type:Boolean}},setup(t){return(e,i)=>w(k).videoCardLayout==="modern"&&!e.horizontal?(L(),P("div",dW,[...i[0]||(i[0]=[x("div",{"aspect-video":"",bg:"$bew-skeleton",rounded:"$bew-radius",style:{"aspect-ratio":"16 / 9"}},null,-1),x("div",{flex:"~ col gap-2","mt-2":""},[x("div",{flex:"~ gap-1 justify-between items-start",w:"full"},[x("div",{flex:"~ col gap-2",w:"[calc(100%-40px)]"},[x("div",{"w-full":"","h-5":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{w:"3/4","h-5":"",bg:"$bew-skeleton","rounded-4px":""})]),x("div",{"shrink-0":"","w-8":"","h-8":"",rounded:"1/2",bg:"$bew-skeleton"})]),x("div",{flex:"~ gap-2 items-center",w:"full","mt-1":""},[x("div",{w:"34px",h:"34px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":""}),x("div",{flex:"~ col gap-1",w:"[calc(100%-50px)]"},[x("div",{w:"60%","h-3":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{w:"80%","h-3":"",bg:"$bew-skeleton","rounded-4px":""})])])],-1)])])):w(k).videoCardLayout==="modern"&&e.horizontal?(L(),P("div",fW,[x("div",{class:Ie(e.horizontal?"horizontal-card-cover":"vertical-card-cover"),"shrink-0":"","aspect-video":"","h-fit":"",bg:"$bew-skeleton",rounded:"$bew-radius",style:{"aspect-ratio":"16 / 9"}},null,2),i[1]||(i[1]=x("div",{"w-full":"","mt-0":"",flex:"~ col gap-2"},[x("div",{flex:"~ gap-1 justify-between items-start",w:"full"},[x("div",{"w-full":"","h-5":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{"shrink-0":"","w-8":"","h-8":"",rounded:"1/2",bg:"$bew-skeleton"})]),x("div",{flex:"~ gap-2 items-center",w:"full","mt-2":""},[x("div",{w:"30px",h:"30px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":""}),x("div",{flex:"~ col gap-1",w:"[calc(100%-46px)]"},[x("div",{w:"60%","h-3":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{w:"80%","h-3":"",bg:"$bew-skeleton","rounded-4px":""})])])],-1))])):w(k).videoCardLayout==="old"&&!e.horizontal?(L(),P("div",hW,[...i[2]||(i[2]=[x("div",{"aspect-video":"",bg:"$bew-skeleton",rounded:"$bew-radius",style:{"aspect-ratio":"16 / 9"}},null,-1),x("div",{flex:"","mt-5":""},[x("div",{m:"r-4",w:"34px",h:"34px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":""}),x("div",{w:"[calc(100%-34px)]"},[x("div",{flex:"~ col gap-2","mb-4":"","w-inherit":""},[x("div",{"w-full":"","h-5":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{w:"3/4","h-5":"",bg:"$bew-skeleton","rounded-4px":""})]),x("div",{flex:"~ col gap-2","mb-3":""},[x("div",{w:"40%","h-3":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{w:"60%","h-3":"",bg:"$bew-skeleton","rounded-4px":""})]),x("div",{text:"transparent sm","inline-block":"",p:"x-2","lh-22px":"",bg:"$bew-skeleton","rounded-4":""}," hello world ")])],-1)])])):w(k).videoCardLayout==="old"&&e.horizontal?(L(),P("div",pW,[x("div",{class:Ie(e.horizontal?"horizontal-card-cover":"vertical-card-cover"),"shrink-0":"","aspect-video":"","h-fit":"",bg:"$bew-skeleton",rounded:"$bew-radius"},null,2),i[3]||(i[3]=x("div",{"w-full":"","mt-0":"",flex:"~ gap-4"},[x("div",{w:"[calc(100%-30px)]"},[x("div",{grid:"","gap-2":""},[x("div",{"w-full":"","h-5":"",bg:"$bew-skeleton","rounded-4px":""})]),x("div",{"mt-4":"",flex:"~ col gap-2"},[x("div",{flex:"~ items-center justify-start","w-inherit":""},[x("div",{m:"r-2",w:"30px",h:"30px",rounded:"1/2",bg:"$bew-skeleton","shrink-0":""}),x("div",{w:"40%","h-5":"",bg:"$bew-skeleton","rounded-4px":""})]),x("div",{w:"60%","h-4":"",bg:"$bew-skeleton","rounded-4px":""}),x("div",{text:"transparent sm","inline-block":"","w-fit":"","lh-6":"",p:"x-2","mt-1":"",bg:"$bew-skeleton","rounded-4":""}," hello world ")])])],-1))])):X("",!0)}}),[["__scopeId","data-v-6d9756c1"]])},Symbol.toStringTag,{value:"Module"}));function gW(t){const e=ge(()=>({"--grid-cols-base":k.value.gridColumns.base,"--grid-cols-sm":k.value.gridColumns.sm,"--grid-cols-md":k.value.gridColumns.md,"--grid-cols-lg":k.value.gridColumns.lg,"--grid-cols-xl":k.value.gridColumns.xl,"--grid-cols-xxl":k.value.gridColumns.xxl}));return{gridClass:ge(()=>{const n=t();return n==="adaptive"?"grid-adaptive":n==="twoColumns"?"grid-two-columns":"grid-one-column"}),gridCssVars:e}}function vW(){const t=ge(()=>{const n=k.value.videoCardShadowCurve;return!n||n.length===0?void 0:`linear-gradient(to top, ${[...n].sort((r,o)=>r.position-o.position).map(r=>`rgba(0, 0, 0, ${r.opacity/100}) ${r.position}%`).join(", ")})`}),e=ge(()=>{const n=k.value.videoCardShadowHeight;return n===0?"0":n!==void 0?`calc(${n} * 100%)`:void 0});return{shadowStyleVars:ge(()=>{const n={};return e.value!==void 0&&(n["--bew-video-card-shadow-height-multiplier"]=e.value),k.value.videoCardShadowHeight!==0&&t.value&&(n["--bew-video-card-shadow-gradient"]=t.value),n})}}const Q6=20,_W=2,rs=qe(Me({__name:"VideoCardGrid",props:{items:{},gridLayout:{},loading:{type:Boolean,default:!1},noMoreContent:{type:Boolean,default:!1},needToLoginFirst:{type:Boolean,default:!1},videoType:{},showPreview:{type:Boolean,default:!1},showWatchLater:{type:Boolean,default:!0},moreBtn:{type:Boolean,default:!0},transformItem:{},getItemKey:{},isSkeletonItem:{type:Function,default:void 0},initialSkeletonCount:{default:30},emptyDescription:{},loginButtonText:{},refreshButtonText:{},enableRowPadding:{type:Boolean,default:!1},isFollowingPage:{type:Boolean}},emits:["loadMore","refresh","login"],setup(t,{emit:e}){const i=t,n=e,s=z(null),r=z(null),o=z(!1),{gridClass:a,gridCssVars:l}=gW(()=>i.gridLayout),{shadowStyleVars:u}=vW(),c=ge(()=>{const Re=Math.ceil(window.innerHeight/400),ie=Math.ceil(Re*1.5)*5;return Math.min(ie,i.initialSkeletonCount)}),d=z(0),f=z(0),h=z(0),p=ge(()=>!(i.needToLoginFirst||i.noMoreContent||i.items.length>=Q6)),m=ge(()=>{if(!p.value)return[];const Re=i.items.length,Z=c.value,ae=Math.max(0,Z-Re);return Array.from({length:ae},(ie,ue)=>({_isSkeleton:!0,_skeletonId:`skeleton-padding-${ue}`}))}),g=ge(()=>i.loading&&i.items.length>=Q6),v=ge(()=>g.value?Array.from({length:10},(Z,ae)=>({_isSkeleton:!0,_skeletonId:`skeleton-more-${ae}`})):[]),b=ge(()=>p.value?[...i.items,...m.value]:g.value?[...i.items,...v.value]:i.items);function _(){return d.value>=_W||h.value<b.value.length?!1:!i.loading&&!i.noMoreContent&&!i.needToLoginFirst&&i.items.length>0}const y=z(!1);let E=null;function S(){if(_()){if(y.value)return;y.value=!0,n("loadMore"),E!==null&&window.clearTimeout(E),E=window.setTimeout(()=>{i.loading||(y.value=!1),E=null},1500)}}const A=typeof window<"u"&&"IntersectionObserver"in window;let C=null;function T(){C&&(C.disconnect(),C=null),o.value=!1}function I(){if(!A)return;T();const Re=r.value;Re&&(C=new IntersectionObserver(Z=>{const ae=Z[0];ae&&(o.value=ae.isIntersecting,ae.isIntersecting&&R())},{root:null,rootMargin:"0px 0px 100% 0px",threshold:0}),C.observe(Re))}let D=null;function R(){if(_()){if(A){o.value&&S();return}D===null&&(D=requestAnimationFrame(()=>{D=null;const Re=s.value;if(!Re)return;const Z=Re.getBoundingClientRect(),ae=window.innerHeight;Z.bottom-ae<ae&&S()}))}}const O=wm(R,100);function M(){O()}function U(){A||(Et()&&!k.value.useOriginalBilibiliHomepage?rn.on(Ua,M):window.addEventListener("scroll",M,{passive:!0}))}function $(){rn.off(Ua,M),window.removeEventListener("scroll",M)}Pe(()=>i.loading,(Re,Z)=>{Re||(y.value=!1,E!==null&&(window.clearTimeout(E),E=null),f.value>0&&i.items.length===f.value&&d.value++),Z&&!Re&&ot(()=>{R()})}),Pe(()=>i.items.length,(Re,Z)=>{if(Re===0&&Z>0){d.value=0,f.value=0;return}Re>f.value&&(d.value=0),f.value=Re,y.value=!1,ot(()=>{R()})}),Pe(()=>i.noMoreContent,(Re,Z)=>{Z&&!Re&&(d.value=0)}),Pe(r,()=>{I()}),Pe(()=>b.value.length,(Re,Z)=>{if(Re===0){h.value=0;return}if(Re<h.value){h.value=Re;return}if(Re>Z){q(Re);return}h.value=Re}),st(()=>{h.value=b.value.length,U(),I(),ot(()=>{R()})}),ki(()=>{$(),T(),E!==null&&(window.clearTimeout(E),E=null),D!==null&&(cancelAnimationFrame(D),D=null)});const B=ge(()=>i.gridLayout!=="adaptive"),W=ge(()=>({...u.value,...l.value})),te=ge(()=>i.noMoreContent&&i.items.length===0&&!i.needToLoginFirst);let re=0;function q(Re){const Z=++re,ae=typeof window<"u"&&"requestIdleCallback"in window,ie=ue=>{if(Z!==re)return;const ve=Re-h.value;if(ve<=0)return;let j=8;if(ue&&typeof ue.timeRemaining=="function"){const K=ue.timeRemaining();K>12?j=20:K>8&&(j=12)}h.value+=Math.min(j,ve),ae?window.requestIdleCallback(ie,{timeout:50}):requestAnimationFrame(()=>ie())};ie()}const le=ge(()=>b.value.slice(0,h.value));function be(Re){return Re?Re.epid||Re.goto==="bangumi"||Re.type==="bangumi"?"bangumi":i.videoType==="rcmd"||i.videoType==="appRcmd"?i.videoType:i.videoType||"common":i.videoType||"common"}const se=ge(()=>{const Re=le.value,Z=i.videoType||"common",ae=Array.from({length:Re.length});for(let ie=0;ie<Re.length;ie++){const ue=Re[ie],ve=Xe(ue,ie);if(ue?._isSkeleton){ae[ie]={key:ve,item:ue,skeleton:!0,type:Z,video:void 0};continue}if(i.isSkeletonItem)try{if(i.isSkeletonItem(ue)){ae[ie]={key:ve,item:ue,skeleton:!0,type:Z,video:void 0};continue}}catch{}const j=xe(ue),K=!j||j.id==null&&!j.bvid,oe=K?Z:be(j);ae[ie]={key:ve,item:ue,skeleton:K,type:oe,video:j}}return ae});let ne=new WeakMap,pe=null;function ye(){ne=new WeakMap,pe=null}Pe(()=>i.transformItem,()=>{ye()});function xe(Re){if(Re&&!Re?._isSkeleton)try{const Z=typeof Re;if(Z==="object"||Z==="function"){const ie=Re;if(ne.has(ie))return ne.get(ie);const ue=i.transformItem(Re);return ne.set(ie,ue),ue}if(pe||(pe=new Map),pe.has(Re))return pe.get(Re);const ae=i.transformItem(Re);return pe.set(Re,ae),ae}catch{return}}function Be(){n("login")}function Ke(){n("refresh")}function Xe(Re,Z){if(Re?._skeletonId)return Re._skeletonId;if(!Re)return`empty-${Z}`;try{return i.getItemKey(Re,Z)}catch{return`error-${Z}`}}return(Re,Z)=>{const ae=Ge("Button"),ie=Ge("Empty"),ue=Ge("VideoCard");return L(),P("div",null,[Re.needToLoginFirst?(L(),_e(ie,{key:0,"mt-6":"",description:Re.$t("common.please_log_in_first")},{default:H(()=>[F(ae,{type:"primary",onClick:Be},{default:H(()=>[He(G(Re.loginButtonText||Re.$t("common.login")),1)]),_:1})]),_:1},8,["description"])):w(te)?(L(),_e(ie,{key:1,"mt-6":"",description:Re.emptyDescription||Re.$t("common.no_more_content")},{default:H(()=>[F(ae,{type:"primary",onClick:Ke},{default:H(()=>[He(G(Re.refreshButtonText||Re.$t("common.operation.refresh")),1)]),_:1})]),_:1},8,["description"])):(L(),P("div",{key:2,ref_key:"gridContainerRef",ref:s,class:"video-card-grid-container",m:"b-0 t-0",relative:"","w-full":"",style:Ue(w(W))},[x("div",{class:Ie(w(a))},[(L(!0),P(Te,null,Ne(w(se),(ve,j,K,oe)=>{const he=[ve.key,ve.skeleton,ve.type,ve.video,Re.showPreview,Re.showWatchLater,w(B),Re.moreBtn];if(oe&&oe.key===ve.key&&um(oe,he))return oe;const ce=(L(),_e(ue,{key:ve.key,skeleton:ve.skeleton,type:ve.type,video:ve.video,"show-preview":Re.showPreview,"show-watcher-later":Re.showWatchLater,horizontal:w(B),"more-btn":Re.moreBtn,"is-following-page":i.isFollowingPage},El({_:2},[Ne(Re.$slots,(me,Q)=>({name:Q,fn:H(()=>[mi(Re.$slots,Q,{item:ve.item},void 0,!0)])}))]),1032,["skeleton","type","video","show-preview","show-watcher-later","horizontal","more-btn","is-following-page"]));return ce.memo=he,ce},Z,0),128))],2),x("div",{ref_key:"loadMoreSentinelRef",ref:r,class:"load-more-sentinel","aria-hidden":"true"},null,512)],4)),Re.noMoreContent&&!Re.needToLoginFirst&&Re.items.length>0?(L(),_e(ie,{key:3,class:"pb-4",description:Re.$t("common.no_more_content")},null,8,["description"])):X("",!0)])}}}),[["__scopeId","data-v-2d3766d7"]]),J6=Object.assign({"./ALink.vue":HC,"./AppBackground.vue":ZC,"./ArticleCard/ArticleCard.vue":hL,"./BangumiCard/BangumiCard.vue":CR,"./BangumiCard/BangumiCardSkeleton.vue":hR,"./BangumiEpisodeList/BangumiEpisodeList.vue":DR,"./Button.vue":OR,"./CodeEditor.vue":MR,"./Dialog.vue":HR,"./Dock/Dock.vue":qP,"./Empty.vue":eD,"./HorizontalScrollView.vue":iD,"./IframeDrawer.vue":lD,"./IframePage.vue":dD,"./Input.vue":mD,"./LazyPicture.vue":xD,"./List/List.vue":TD,"./List/ListItem.vue":LD,"./Loading.vue":PD,"./Logo.vue":OD,"./MediaEpisodeSelect/MediaEpisodeSelect.vue":VD,"./MovieCard/MovieCard.vue":QD,"./Picture.vue":iO,"./PipWindow.vue":oO,"./Progress.vue":aO,"./Radio.vue":uO,"./SearchBar/SearchBar.vue":dM,"./Select.vue":vM,"./Settings/Settings.vue":kM,"./SideBar/SideBar.vue":IM,"./Slider.vue":DM,"./SmoothLoading.vue":$M,"./Tooltip.vue":VP,"./TopBar/BewlyOrBiliTopBarSwitcher.vue":FM,"./TopBar/TopBar.vue":zB,"./UserCard/UserCard.vue":AN,"./VideoCard/VideoCard.vue":cW,"./VideoCard/VideoCardSkeleton.vue":mW,"./VideoCardGrid.vue":Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}))}),bW={install:t=>{for(const e in J6){const i=e.split("/"),n=i[i.length-1].replace(".vue","").replace(".ts","");t.component(n,J6[e].default)}}},yW=Uk();async function wW(t){t.config.globalProperties.$app={context:""},t.provide("app",t.config.globalProperties.$app),t.use(O4),t.use(VC,{transition:"Vue-Toastification__fade",maxToasts:20,newestOnTop:!0,position:hc.TOP_RIGHT,timeout:3e3,hideProgressBar:!1}),t.use(bW),t.use(yW)}const EW=`/* Copy from @unocss/reset/tailwind.css */

/*
1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)
2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)
2. [UnoCSS]: allow to override the default border color with css var \`--un-default-border-color\`
*/

*,
::before,
::after {
  box-sizing: border-box; /* 1 */
  border-width: 0; /* 2 */
  border-style: solid; /* 2 */
  border-color: var(--un-default-border-color, #e5e7eb); /* 2 */
}

::before,
::after {
  --un-content: "";
}

/*
1. Use a consistent sensible line-height in all browsers.
2. Prevent adjustments of font size after orientation changes in iOS.
3. Use a more readable tab size.
4. Use the user's configured \`sans\` font-family by default.
5. Use the user's configured \`sans\` font-feature-settings by default.
6. Use the user's configured \`sans\` font-variation-settings by default.
7. Disable tap highlights on iOS.
*/

html,
:host {
  line-height: 1.5; /* 1 */
  -webkit-text-size-adjust: 100%; /* 2 */
  -moz-tab-size: 4; /* 3 */
  tab-size: 4; /* 3 */
  font-family:
    ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; /* 4 */
  font-feature-settings: normal; /* 5 */
  font-variation-settings: normal; /* 6 */
  -webkit-tap-highlight-color: transparent; /* 7 */
}

/*
1. Remove the margin in all browsers.
2. Inherit line-height from \`html\` so users can set them as a class directly on the \`html\` element.
*/

body {
  margin: 0; /* 1 */
  line-height: inherit; /* 2 */
}

/*
1. Add the correct height in Firefox.
2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)
3. Ensure horizontal rules are visible by default.
*/

hr {
  height: 0; /* 1 */
  color: inherit; /* 2 */
  border-top-width: 1px; /* 3 */
}

/*
Add the correct text decoration in Chrome, Edge, and Safari.
*/

abbr:where([title]) {
  text-decoration: underline dotted;
}

/*
Remove the default font size and weight for headings.
*/

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: inherit;
  font-weight: inherit;
}

/*
Reset links to optimize for opt-in styling instead of opt-out.
*/

a {
  color: inherit;
  text-decoration: inherit;
}

/*
Add the correct font weight in Edge and Safari.
*/

b,
strong {
  font-weight: bolder;
}

/*
1. Use the user's configured \`mono\` font-family by default.
2. Use the user's configured \`mono\` font-feature-settings by default.
3. Use the user's configured \`mono\` font-variation-settings by default.
4. Correct the odd \`em\` font sizing in all browsers.
*/

code,
kbd,
samp,
pre {
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 1 */
  font-feature-settings: normal; /* 2 */
  font-variation-settings: normal; /* 3 */
  font-size: 1em; /* 4 */
}

/*
Add the correct font size in all browsers.
*/

small {
  font-size: 80%;
}

/*
Prevent \`sub\` and \`sup\` elements from affecting the line height in all browsers.
*/

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/*
1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)
2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)
3. Remove gaps between table borders by default.
*/

table {
  text-indent: 0; /* 1 */
  border-color: inherit; /* 2 */
  border-collapse: collapse; /* 3 */
}

/*
1. Change the font styles in all browsers.
2. Remove the margin in Firefox and Safari.
3. Remove default padding in all browsers.
*/

button,
input,
optgroup,
select,
textarea {
  font-family: inherit; /* 1 */
  font-feature-settings: inherit; /* 1 */
  font-variation-settings: inherit; /* 1 */
  font-size: 100%; /* 1 */
  font-weight: inherit; /* 1 */
  line-height: inherit; /* 1 */
  color: inherit; /* 1 */
  margin: 0; /* 2 */
  padding: 0; /* 3 */
}

/*
Remove the inheritance of text transform in Edge and Firefox.
*/

button,
select {
  text-transform: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Remove default button styles.
*/

button,
[type="button"],
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 1 */
  background-color: transparent; /* 2 */
  background-image: none; /* 2 */
}

/*
Use the modern Firefox focus style for all focusable elements.
*/

:-moz-focusring {
  outline: auto;
}

/*
Remove the additional \`:invalid\` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)
*/

:-moz-ui-invalid {
  box-shadow: none;
}

/*
Add the correct vertical alignment in Chrome and Firefox.
*/

progress {
  vertical-align: baseline;
}

/*
Correct the cursor style of increment and decrement buttons in Safari.
*/

::-webkit-inner-spin-button,
::-webkit-outer-spin-button {
  height: auto;
}

/*
1. Correct the odd appearance in Chrome and Safari.
2. Correct the outline style in Safari.
*/

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/*
Remove the inner padding in Chrome and Safari on macOS.
*/

::-webkit-search-decoration {
  -webkit-appearance: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Change font properties to \`inherit\` in Safari.
*/

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/*
Add the correct display in Chrome and Safari.
*/

summary {
  display: list-item;
}

/*
Removes the default spacing for appropriate elements.
*/

blockquote,
dl,
dd,
h1,
h2,
h3,
h4,
h5,
h6,
hr,
figure,
p,
pre {
  margin: 0;
}

fieldset {
  margin: 0;
  padding: 0;
}

legend {
  padding: 0;
}

ol,
ul,
menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

dialog {
  padding: 0;
}

/*
Prevent resizing textareas horizontally by default.
*/

textarea {
  resize: vertical;
}

/*
1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)
2. Set the default placeholder color to the user's configured gray 400 color.
*/

input::placeholder,
textarea::placeholder {
  opacity: 1; /* 1 */
  color: #9ca3af; /* 2 */
}

/*
Set the default cursor for buttons.
*/

button,
[role="button"] {
  cursor: pointer;
}

/*
Make sure disabled buttons don't get the pointer cursor.
*/

:disabled {
  cursor: default;
}

/*
1. Make replaced elements \`display: block\` by default. (https://github.com/mozdevs/cssremedy/issues/14)
2. Add \`vertical-align: middle\` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)
   This can trigger a poorly considered lint error in some tools but is included by design.
*/

img,
svg,
video,
canvas,
audio,
iframe,
embed,
object {
  display: block; /* 1 */
  vertical-align: middle; /* 2 */
}

/*
Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)
*/

img,
video {
  max-width: 100%;
  height: auto;
}

/*
Make elements with the HTML hidden attribute stay hidden by default.
*/

[hidden] {
  display: none;
}
`;function SW(){try{["__INITIAL_STATE__","__playinfo__"].forEach(e=>{if(window[e])try{window[e]=null}catch{}}),console.log("[BewlyBewly] Cleaned up Bilibili global objects")}catch(t){console.warn("[BewlyBewly] Failed to cleanup global objects:",t)}}function xW(){console.log("[BewlyBewly] Starting gentle Bilibili script cleanup...");try{SW(),console.log("[BewlyBewly] Gentle cleanup completed")}catch(t){console.error("[BewlyBewly] Error during script cleanup:",t)}}const TW=[".bili-header",".bili-header .bili-header__bar","#internationalHeader",".link-navbar","#home_nav","#biliMainHeader","#bili-header-container",".custom-navbar"];let sa=null;function ew(t){return t.querySelector(".bili-header")}function AW(t){if(sa&&sa.ownerDocument===t)return sa;const e=ew(t);return e?(sa=e,sa.querySelector(".bili-header__bar")?.classList.add("slide-down"),sa):null}function kW(t){const e=ew(t)||sa;return e?(e.querySelectorAll(":scope > *:not(.bili-header__bar)").forEach(n=>n.style.display="none"),(e.parentElement!==t.body||e!==t.body.firstElementChild)&&t.body.prepend(e),sa=e,!0):!1}function jc(t){for(const e of TW)t.querySelectorAll(e).forEach(i=>{i.style.removeProperty("visibility"),i.style.removeProperty("display")})}function tw(t){const e="https://passport.bilibili.com/login";function i(r){r.hasAttribute("data-bewly-login-handler")||(r.setAttribute("data-bewly-login-handler","true"),r.style.cursor="pointer",r.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),window.location.href=e}))}t.querySelectorAll(".login-btn").forEach(i);const s=new MutationObserver(r=>{r.forEach(o=>{o.addedNodes.forEach(a=>{if(a.nodeType===Node.ELEMENT_NODE){const l=a;l.classList.contains("login-btn")&&i(l),l.querySelectorAll(".login-btn").forEach(i)}})})});return s.observe(t.body,{childList:!0,subtree:!0}),()=>{s.disconnect()}}let Jh=null;function CW(t){const e=document.createElement("button");return e.className="bewly-clear-selection-btn btn",e.textContent="",e.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),LW(t)}),e}function LW(t){t.querySelectorAll('.group-list ul li input[type="checkbox"]:checked').forEach(i=>{i.click()})}function IW(t){k.value.enlargeFavoriteDialog?t.classList.add("bewly-enlarged-favorite-dialog"):t.classList.remove("bewly-enlarged-favorite-dialog")}function RW(t){if(t.querySelector(".bewly-clear-selection-btn"))return;const e=t.querySelector(".bottom");if(!e)return;const i=CW(t),n=e.querySelector(".btn");n?e.insertBefore(i,n):e.prepend(i)}function iw(t){IW(t),RW(t)}function PW(){Jh&&Jh.disconnect(),Jh=new MutationObserver(e=>{for(const i of e)for(const n of Array.from(i.addedNodes))if(n instanceof HTMLElement){const s=n.classList?.contains("collection-m-exp")?n:n.querySelector?.(".collection-m-exp");s&&setTimeout(()=>{iw(s)},100)}}),Jh.observe(document.body,{childList:!0,subtree:!0});const t=document.querySelector(".collection-m-exp");t&&iw(t)}async function DW(t){}const an={danmuBtn:".bilibili-player-video-danmaku-switch > input[type=checkbox],.bpx-player-dm-switch input[type=checkbox]",playBtn:".bpx-player-ctrl-play,.bilibili-player-video-btn-start,.squirtle-video-start",state:".bilibili-player-video-state,.bpx-player-state-wrap,.bpx-player-video-state",title:".video-title,.bilibili-player-video-top-title,#player-title,.season-info .title",subtitle:".video-pod__item.active>.title,.multip-list-item.multip-list-item-active",widescreen:".bpx-player-ctrl-wide,.bilibili-player-video-btn-widescreen,.squirtle-video-widescreen",pagefullscreen:".bpx-player-ctrl-web,.bilibili-player-video-web-fullscreen,.squirtle-video-pagefullscreen",videoArea:".bilibili-player-video-wrap,.bpx-player-video-area",video:'#bilibiliPlayer video,#bilibili-player video,.bilibili-player video,.player-container video,#bilibiliPlayer bwp-video,#bilibili-player bwp-video,.bilibili-player bwp-video,.player-container bwp-video,#bofqi video,[aria-label=""] video',player:"#bilibili-player,.bpx-player-container",autoPlaySwitchOn:".auto-play .switch-btn.on"};class iu{constructor(e,i,n){this.max=e,this.timeout=i,this.fn=n,this.count=0,this.repeat=this.start.bind(this)}start(){this.count++,!(this.count>this.max)&&(this.fn()||setTimeout(this.repeat,this.timeout))}}let ra=null,ur=null,cr=null,js=null,Hc=null,nu=null;function dr(){return document.querySelector(an.video)}function qa(){return location.pathname.startsWith("/video/")}function i2(t){const e=Math.floor(t/60);return t=Math.floor(t%60),`${e<10?`0${e}`:e}:${t<10?`0${t}`:t}`}function zc(t){ra||(ra=document.createElement("div"),ra.style.cssText="display: none; position: absolute; z-index: 99; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 8px 12px; background-color: rgba(8, 8, 8, 0.75); color: white; font-size: 22px; border-radius: 4px;");const e=document.querySelector(an.state);e&&(e.parentElement!==ra.parentElement&&e.parentElement.appendChild(ra),ra.textContent=t,ra.style.display="block",setTimeout(()=>{ra.style.display="none"},1e3))}function Gc(){DW(),dw(),fw()}function OW(){new iu(20,500,()=>{if(document.querySelector("[data-screen='web']"))return setTimeout(()=>{Gc()},1e3),!0;const t=sw();return t&&setTimeout(()=>{Gc()},1e3),t}).start()}function e0(t=1e3){if(!k.value.videoPlayerScroll)return;const e=()=>{const i=document.querySelector(an.player);if(!i)return;const n=document.querySelector(".bpx-player-sending-bar");if(n){const s=n.getBoundingClientRect(),r=window.innerHeight-s.bottom;r<0&&window.scrollBy({top:-r,behavior:"smooth"})}else i.scrollIntoView({block:"center",behavior:"smooth"})};t>0?setTimeout(e,t):e()}function MW(){new iu(20,500,()=>{if(document.querySelector("[data-screen='wide']"))return e0(),setTimeout(()=>{Gc()},1e3),!0;const t=nw();return t&&(e0(),setTimeout(()=>{Gc()},1e3)),t}).start()}function nw(){const t=document.querySelector(an.widescreen);return t?(t.click(),!0):!1}function sw(){const t=document.querySelector(an.pagefullscreen);return t?(t.click(),!0):!1}function rw(){return e0(),setTimeout(()=>{Gc()},2e3),!0}function $W(){const t=k.value.defaultDanmakuState;if(!t||t==="system")return;const e=t==="on";new iu(20,500,()=>{const i=document.querySelector(an.danmuBtn);if(!i)return!1;if(i.checked===e)return!0;const n=i.closest("label")||(i.parentElement instanceof HTMLElement?i.parentElement:null);return n?n.click():i.click(),i.checked!==e&&(i.checked=e,i.dispatchEvent(new Event("change",{bubbles:!0}))),i.checked===e}).start()}function ow(){if(document.querySelectorAll(".video-pod__item").length>0||document.querySelectorAll(".multi-page__item, .page-item").length>0||document.querySelector(".video-sections-content-list, .base-video-sections-v1, .video-sections-v1"))return!0;const n=document.querySelectorAll(".list-item, .episode-item, .section-item, .collect-item");return Array.from(n).some(r=>r.closest(".recommend-list-v1, .rec-list, .next-play, .video-page-card-small, .recommend-list")?!1:r.querySelector('a[href*="/video/"]')!==null)}function FW(){return document.querySelector(an.autoPlaySwitchOn)!==null}function aw(){if(/https?:\/\/(?:www\.)?bilibili\.com\/list\//.test(location.href))return"playlist";const t=!!document.querySelector(".view-mode");if(!!document.querySelector(".video-pod__item, .multi-page__item, .page-item"))return t?"multipart":"collection";const i=document.querySelector("#app");if(i?.__vue__){const n=i.__vue__.videoData;if(n){const{videos:s}=n,r=i.__vue__.isSection;if(s>1)return"multipart";if(r)return"collection"}}return ow()?"collection":"recommend"}function BW(){const t=[{container:".auto-play",switchOn:".switch-btn.on",switchOff:".switch-btn:not(.on)"},{container:".continuous-btn",switchOn:".switch-btn.on",switchOff:".switch-btn:not(.on)"},{container:null,switchOn:".switch-btn.on",switchOff:".switch-btn:not(.on)"}];for(const e of t){let i=document;if(e.container){const r=document.querySelector(e.container);if(!r)continue;i=r}const n=i.querySelector(e.switchOn),s=i.querySelector(e.switchOff);if(n)return{button:n,isOn:!0};if(s)return{button:s,isOn:!1}}return null}function Wc(t){new iu(30,500,()=>{const e=document.querySelector(".bpx-player-ctrl-setting-loop input[type=checkbox]");return e?(e.checked!==t&&(e.checked=t,e.dispatchEvent(new Event("change",{bubbles:!0}))),e.checked===t):!1}).start()}let lw=!1,n2=!1;function NW(){document.addEventListener("click",t=>{if(n2)return;t.target.closest(".auto-play .switch-btn, .continuous-btn .switch-btn")&&(lw=!0)},!0)}function t0(t){new iu(30,500,()=>{const e=BW();if(!e)return!1;const{button:i,isOn:n}=e;if(n!==t){n2=!0;try{i.click()}finally{setTimeout(()=>{n2=!1},0)}}return!0}).start()}function s2(t){t&&Wc(!1),new iu(30,500,()=>{const e=t?"0":"2",i=document.querySelector(`.bpx-player-ctrl-setting-handoff input[type=radio][value="${e}"]`);return i?(i.checked||(i.checked=!0,i.dispatchEvent(new Event("change",{bubbles:!0}))),i.checked):!1}).start()}function uw(){if(k.value.useBilibiliDefaultAutoPlay||lw)return;const t=aw();let e="default";switch(t){case"multipart":e=k.value.autoPlayMultipart;break;case"collection":e=k.value.autoPlayCollection;break;case"recommend":e=k.value.autoPlayRecommend;break;case"playlist":e=k.value.autoPlayPlaylist;break}if(t==="playlist"){switch(e){case"autoPlay":s2(!0);break;case"pauseAtEnd":s2(!1);break;case"loop":s2(!1);break}return}switch(e){case"autoPlay":Wc(!1),t0(!0);break;case"autoPlayWithRecommend":Wc(!1),t0(!0);break;case"pauseAtEnd":Wc(!1),t0(!1);break;case"loop":Wc(!0),t0(!1);break}}function UW(t){if(t){const n=t.querySelector(an.playBtn);if(n){n.click();return}}const e=document.querySelector(an.player);if(e){const n=e.querySelector(an.playBtn);if(n){n.click();return}}const i=dr();i&&(i.paused?i.play():i.pause())}function su(t,e){const i=dr();!i||i.readyState===0||!Number.isFinite(i.duration)||e<1&&!i.paused||(t?i.currentTime=Math.min(i.currentTime+e,i.duration-1):i.duration===i.currentTime?VW():i.currentTime=Math.max(i.currentTime-e,0))}function VW(t){const e=document.querySelector(an.videoArea);e&&e.click();const i={bubbles:!0,cancelable:!0,key:"ArrowLeft",code:"ArrowLeft",keyCode:37},n=new KeyboardEvent("keydown",i),s=new KeyboardEvent("keyup",i);document.body.dispatchEvent(n),document.body.dispatchEvent(s)}async function jW(){const t=dr();t&&document.pictureInPictureEnabled&&!t.disablePictureInPicture&&t.readyState!==0&&(document.fullscreenElement&&await document.exitFullscreen(),document.pictureInPictureElement?document.exitPictureInPicture():t.requestPictureInPicture())}function HW(){const t=document.querySelector(".bpx-player-ctrl-setting-lightoff input[type=checkbox], .bilibili-player-video-btn-setting-right-others-content-lightoff input[type=checkbox], .squirtle-lightoff");if(t){t.click();return}const e=document.querySelector(".bilibili-player-video-btn-setting");e&&(e.addEventListener("mouseover",()=>{setTimeout(()=>{e.dispatchEvent(new MouseEvent("mouseout")),setTimeout(()=>{const i=document.querySelector(".bpx-player-ctrl-setting-lightoff input[type=checkbox], .bilibili-player-video-btn-setting-right-others-content-lightoff input[type=checkbox], .squirtle-lightoff");i&&i.click()},100)},150)},{once:!0}),e.dispatchEvent(new MouseEvent("mouseover")))}function zW(){const t=document.querySelector(".bpx-player-ctrl-subtitle-close-switch"),e=document.querySelector(".bpx-player-ctrl-subtitle-language-item");if(t&&e){t.classList.contains("bpx-state-active")?e.click():t.click();return}let i=document.querySelector(".bilibili-player-iconfont-subtitle");if(i){if(i.nextElementSibling)i.click();else{const s=i.parentElement;s&&(s.addEventListener("mouseover",()=>{setTimeout(()=>{s.dispatchEvent(new MouseEvent("mouseout")),setTimeout(()=>i.click(),500)},150)},{once:!0}),s.dispatchEvent(new MouseEvent("mouseover")))}return}if(i=document.querySelector(".bpx-player-ctrl-subtitle span"),i){i.click();return}const n=document.querySelector(".squirtle-subtitle-wrap");if(n&&n.firstElementChild){n.firstElementChild.click();return}zc("")}function cw(t){const e=dr();if(!e)return;const i=.25;if(t)e.playbackRate<5&&(e.playbackRate=Number.parseFloat((e.playbackRate+i).toFixed(2)));else{const n=Number.parseFloat((e.playbackRate-i).toFixed(2));n>=.25&&(e.playbackRate=n)}zc(` ${e.playbackRate}`)}function GW(){const t=dr();t&&(t.playbackRate=1,zc(" 1"))}function dw(){if(!k.value.rememberPlaybackRate)return;const t=dr();if(!t){setTimeout(()=>dw(),1e3);return}const e=k.value.savedPlaybackRate;e>=.25&&e<=5&&(t.playbackRate=e,e!==1&&zc(` ${e}`))}function fw(){if(!k.value.rememberPlaybackRate)return;const t=dr();if(!t){setTimeout(()=>fw(),1e3);return}t.hasAttribute("bewly-rate-listener")||(t.setAttribute("bewly-rate-listener","true"),t.addEventListener("ratechange",()=>{if(k.value.rememberPlaybackRate){const e=t.playbackRate;e>=.25&&e<=5&&(k.value.savedPlaybackRate=e)}}))}function WW(){const t=dr();t&&(t.currentTime=0,t.paused&&t.play())}function r2(t){const e=dr();if(!e)return;let i=e.style.width;i===""&&(i="100%"),t>0?e.style.width=i==="50%"?"75%":"100%":t<0?e.style.width=i==="100%"?"75%":"50%":e.style.width="100%",e.style.margin="auto"}function KW(){const t=document.querySelector(an.danmuBtn);t&&zc(` ${t.checked?"On":"Off"}`)}function YW(){js||(js=document.createElement("div"),js.style.cssText="display: none; position: absolute; z-index: 99; top: 0px; left: 50%; transform: translateX(-50%); padding: 4px 8px; background-color: rgba(8, 8, 8, 0.75); color: white; font-size: 22px;");const t=document.querySelector(an.state),e=document.querySelector(an.title),i=document.querySelector(an.subtitle);t&&e&&e.textContent?(t.parentElement!==js.parentElement&&(t.parentElement.appendChild(js),js.style.display="none"),js.style.display==="none"?(i&&i.getAttribute("title")?js.textContent=`${e.textContent} - ${i.getAttribute("title")}`:js.textContent=e.textContent,js.style.display="block"):js.style.display="none"):js.style.display="none"}function XW(){ur||(ur=document.createElement("div"),ur.style.cssText="display: none; position: absolute; z-index: 99; bottom: 55px; right: 20px; padding: 4px 8px; background-color: rgba(8, 8, 8, 0.75); color: white; font-size: 16px; border-radius: 4px;"),ur.style.display==="none"?hw(!0):(ur.style.display="none",Hc&&(clearTimeout(Hc),Hc=null))}function hw(t=!1){const e=dr(),i=document.querySelector(an.state);if(i&&e&&e.readyState!==0&&Number.isFinite(e.duration)){const n=Math.round(e.currentTime),s=Math.round(e.duration),r=s-n,o=`${i2(n)} / ${i2(s)} [-${i2(r)}]`;t&&(ur.style.display="block"),i.parentElement!==ur.parentElement&&i.parentElement.appendChild(ur),ur.textContent=o,Hc=window.setTimeout(hw,1e3)}else Hc=null,ur&&(ur.style.display="none")}function qW(){cr||(cr=document.createElement("div"),cr.style.cssText="display: none; position: absolute; z-index: 99; top: 10px; right: 20px; padding: 4px 8px; background-color: rgba(8, 8, 8, 0.75); color: white; font-size: 16px; border-radius: 4px;"),cr.style.display==="none"?pw(!0):(cr.style.display="none",nu&&(clearInterval(nu),nu=null))}function pw(t=!1){const e=document.querySelector(an.state);if(e){const i=new Date,n=i.getHours().toString().padStart(2,"0"),s=i.getMinutes().toString().padStart(2,"0"),r=i.getSeconds().toString().padStart(2,"0"),o=`${n}:${s}:${r}`;t&&(cr.style.display="block"),e.parentElement!==cr.parentElement&&e.parentElement.appendChild(cr),cr.textContent=o,nu||(nu=window.setInterval(pw,1e3))}else nu=null,cr&&(cr.style.display="none")}function ZW(){e0(3e3)}function QW(){try{if(document.querySelector(".bpx-player-interaction-question"))return!0;const e=window.location.href;return!!(e.includes("?")&&(e.includes("edge_id=")||e.includes("graph_version="))||document.querySelector('.bpx-player-ctrl-btn[aria-label*=""]'))}catch(t){return console.error(":",t),!1}}function JW(){if(k.value.useBilibiliDefaultAutoPlay)return;const t=aw();if(t!=="multipart"&&t!=="collection")return;let e="default";switch(t){case"multipart":e=k.value.autoPlayMultipart;break;case"collection":e=k.value.autoPlayCollection;break}if(e==="autoPlayWithRecommend")return;const i=document.querySelector(".bpx-player-ending-related-item-title");if(!i||!i.textContent)return;const n=i.textContent.trim(),s=document.querySelectorAll(".video-page-card-small .title");if(s.length===0)return;let r=!1;for(const o of Array.from(s)){const a=o.textContent?.trim();if(a&&a===n){r=!0;break}}if(r){const o=document.querySelector(".bpx-player-ending-related-item-cancel");o&&o.click()}}function mw(){const t=dr();if(!t){setTimeout(()=>mw(),1e3);return}t.hasAttribute("bewly-auto-exit-listener")||(t.setAttribute("bewly-auto-exit-listener","true"),t.addEventListener("ended",async()=>{if(!QW()&&(setTimeout(()=>{JW()},1500),k.value.autoExitFullscreenOnEnd)){if(k.value.autoExitFullscreenExcludeAutoPlay&&FW())return;if(k.value.enableRandomPlay){const{isRandomPlayActive:i}=await Promise.resolve().then(()=>tK);if(i())return}(document.fullscreenElement||document.webkitFullscreenElement)&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen());const e=document.querySelector(an.pagefullscreen);e&&e.classList.contains("bpx-state-entered")&&e.click()}}))}let yo=!1,i0=!1;const oa=new Set;let aa=null,gw=!1;function vw(){const t=document.querySelector("html")?.getAttribute("lang");return document.querySelector("html")?.getAttribute("data-i18n")==="en"||t==="en"?"Random Play":t==="zh-TW"||t==="zh-Hant"?"":""}function o2(){const t=Array.from(document.querySelectorAll(".video-pod__item, .multi-page__item, .page-item"));if(t.length>0)return t;const i=Array.from(document.querySelectorAll(".list-item, .episode-item, .section-item, .collect-item")).filter(r=>r.querySelector('a[href*="/video/"]')!==null);return i.length>0?i:Array.from(document.querySelectorAll('[class*="episode"], [class*="item"], [class*="video"]')).filter(r=>r.querySelector('a[href*="/video/"]')!==null&&!r.classList.contains("active")&&!r.classList.contains("current"))}function _w(t){const e=t.findIndex(i=>i.classList.contains("active")||i.classList.contains("current")||i.classList.contains("on"));return e>=0?e:0}function bw(t,e){if(console.log("[BewlyCat Random Play] getRandomNextEpisode called, currentIndex:",e,"visitedEpisodes:",Array.from(oa)),t.length<=1)return e;oa.size>=t.length&&(console.log("[BewlyCat Random Play] All episodes visited, resetting"),oa.clear(),oa.add(e));const i=t.map((s,r)=>r).filter(s=>!oa.has(s));if(console.log("[BewlyCat Random Play] Unvisited indices:",i),i.length===0){console.log("[BewlyCat Random Play] No unvisited indices, selecting random excluding current");const s=t.map((o,a)=>a).filter(o=>o!==e);if(s.length===0)return console.log("[BewlyCat Random Play] No available indices"),e;const r=s[Math.floor(Math.random()*s.length)];return console.log("[BewlyCat Random Play] Selected from available:",r),r}const n=i[Math.floor(Math.random()*i.length)];return console.log("[BewlyCat Random Play] Selected from unvisited:",n),n}function yw(t,e){if(e<0||e>=t.length)return;const i=t[e];console.log("[BewlyCat Random Play] Target episode element:",i);let n=null;const s=i.querySelector("a");if(console.log("[BewlyCat Random Play] Found link:",s,"href:",s?.href),s&&s.href)n=s;else{const o=i.querySelector(".simple-base-item");if(console.log("[BewlyCat Random Play] Found .simple-base-item:",o),o)n=o;else{const a=i.querySelector(".base-item, .item, .video-item");a?n=a:n=i}}if(!n){console.log("[BewlyCat Random Play] No clickable element found");return}console.log("[BewlyCat Random Play] Clickable element:",n),(()=>{try{if(console.log("[BewlyCat Random Play] Attempting to click element:",e,n),oa.add(e),n instanceof HTMLAnchorElement&&n.href){console.log("[BewlyCat Random Play] Clicking anchor element, href:",n.href),n.click();return}console.log("[BewlyCat Random Play] Simulating click on element"),n.click(),setTimeout(()=>{const o=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,button:0,buttons:1});n.dispatchEvent(o),setTimeout(()=>{const a=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window,button:0,buttons:0});n.dispatchEvent(a),setTimeout(()=>{const l=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0,detail:1});n.dispatchEvent(l),console.log("[BewlyCat Random Play] Click sequence completed")},10)},10)},10)}catch(o){console.error("[BewlyCat Random Play] Click failed:",o)}})()}function a2(){const t=document.querySelector(".auto-play");if(!t||document.querySelector(".random-play-btn"))return null;const e=document.createElement("div");e.className="random-play",e.style.cssText=`
    margin-left: 12px;
  `;const i=document.createElement("div");i.className="random-play-btn",i.style.cssText=`
    display: flex;
    align-items: center;
    cursor: pointer;
    font-size: 14px;
    color: var(--text3);
    user-select: none;
  `;const n=document.createElement("div");n.className="txt",n.textContent=vw(),n.style.cssText=`
    margin-right: 4px;
  `;const s=document.createElement("div");s.className="switch-btn",s.style.cssText=`
    position: relative;
    width: 30px;
    height: 20px;
    background: var(--bew-switch-bg);
    border-radius: 10px;
    transition: background-color 0.3s;
    cursor: pointer;
  `;const r=document.createElement("div");r.className="switch-block",r.style.cssText=`
    position: absolute;
    top: 2px;
    left: 2px;
    width: 16px;
    height: 16px;
    background: white;
    border-radius: 50%;
    transition: transform 0.3s;
  `,s.appendChild(r),i.appendChild(n),i.appendChild(s),e.appendChild(i);function o(l){l?(s.style.backgroundColor="var(--bew-theme-color)",r.style.transform="translateX(10px)"):(s.style.backgroundColor="var(--bew-switch-bg)",r.style.transform="translateX(0)")}i.addEventListener("click",()=>{const l=!yo;l2(l),o(l),gw=!0}),o(yo);const a=t.parentElement;return a&&a.appendChild(e),e}function ww(){const t=()=>{const i=document.querySelector("video");if(!i){setTimeout(t,1e3);return}aa&&(i.removeEventListener("ended",aa),i.removeEventListener("pause",aa)),i.setAttribute("data-bewly-random-play-listener","true");let n=!1;const s=()=>{if(console.log("[BewlyCat Random Play] Video ended, random play listener triggered"),n){console.log("[BewlyCat Random Play] Already processing, skipping");return}if(!yo){console.log("[BewlyCat Random Play] Random play disabled, skipping");return}n=!0,setTimeout(()=>{if(n=!1,!yo){console.log("[BewlyCat Random Play] Random play disabled during delay, skipping");return}const r=o2();if(console.log("[BewlyCat Random Play] Found episodes:",r.length),r.length<=1){console.log("[BewlyCat Random Play] Not enough episodes");return}const o=_w(r);console.log("[BewlyCat Random Play] Current episode index:",o);const a=bw(r,o);console.log("[BewlyCat Random Play] Next episode index:",a),a!==o?yw(r,a):console.log("[BewlyCat Random Play] Next index same as current, not jumping")},1500)};i.addEventListener("ended",s),i.addEventListener("pause",()=>{i.currentTime>0&&i.duration>0&&i.duration-i.currentTime<1&&s()}),aa=s};t(),new MutationObserver(()=>{const i=document.querySelector("video");i&&!i.hasAttribute("data-bewly-random-play-listener")&&t()}).observe(document.body,{childList:!0,subtree:!0})}function Ew(){const t=document.querySelector("video");!t||!aa||(t.removeEventListener("ended",aa),t.removeEventListener("pause",aa),aa=null,t.removeAttribute("data-bewly-random-play-listener"),oa.clear())}function l2(t){yo=t,t?ww():Ew()}function eK(){return yo}function n0(){i0=!1,oa.clear()}function u2(){const t=document.querySelector(".random-play-btn .switch-btn"),e=document.querySelector(".random-play-btn .switch-block");t&&e&&(yo?(t.style.backgroundColor="var(--bew-theme-color)",e.style.transform="translateX(16px)"):(t.style.backgroundColor="var(--bew-switch-bg)",e.style.transform="translateX(0)"))}function s0(){if(!Kc()||i0)return;const t=()=>{if(document.querySelector(".auto-play")){if(k.value.enableRandomPlay){if(a2(),gw)u2();else{const i=o2(),n=k.value.minVideosForRandom||5;i.length>=n&&k.value.randomPlayMode==="auto"&&!yo&&l2(!0),yo&&u2()}i0=!0}}else setTimeout(t,100)};setTimeout(t,500)}function Sw(){let t=window.location.href,e=null;const i=()=>{e&&clearTimeout(e),e=window.setTimeout(()=>{const r=window.location.href;if(r!==t){const o=r.split("?")[0].split("#")[0],a=t.split("?")[0].split("#")[0];o!==a?(t=r,n0(),setTimeout(()=>{Kc()&&s0()},1500)):t=r}},500)};window.addEventListener("pushstate",i,!0),window.addEventListener("popstate",i,!0);let n=null;new MutationObserver(r=>{Kc()&&(n&&clearTimeout(n),n=window.setTimeout(()=>{if(!i0){s0();return}const o=document.querySelector(".random-play-btn"),a=document.querySelector(".auto-play");if(!o&&a&&k.value.enableRandomPlay){let l=!1;for(const u of r)if(u.type==="childList"){const c=Array.from(u.removedNodes),d=Array.from(u.addedNodes),f=c.some(p=>p.nodeType===Node.ELEMENT_NODE&&(p.classList?.contains("auto-play")||p.classList?.contains("random-play-btn")||p.querySelector?.(".auto-play")!==null)),h=d.some(p=>p.nodeType===Node.ELEMENT_NODE&&p.classList?.contains("auto-play"));if(f||h){l=!0;break}}l&&setTimeout(()=>{a2()},500)}},300))}).observe(document.body,{childList:!0,subtree:!0})}function xw(){Kc()&&s0(),Sw()}function Kc(){return/https?:\/\/(?:www\.)?bilibili\.com\/video\/.*/.test(window.location.href)}const tK=Object.freeze(Object.defineProperty({__proto__:null,createRandomPlayUI:a2,disableRandomPlay:Ew,enableRandomPlay:ww,getCurrentEpisodeIndex:_w,getRandomNextEpisode:bw,getRandomPlayText:vw,getVideoEpisodes:o2,initRandomPlay:xw,initRandomPlayOnVideoPage:s0,isRandomPlayActive:eK,isVideoPage:Kc,jumpToEpisode:yw,observeRandomPlayPageChanges:Sw,resetRandomPlayInitialization:n0,setRandomPlayEnabled:l2,syncRandomPlayUI:u2},Symbol.toStringTag,{value:"Module"})),Yc={};function gi(t,e){try{return!t||typeof e!="function"?!1:(Yc[t],Yc[t]=e,!0)}catch{return!1}}let la=null,Xc=null,Tw=0;function Aw(){const t=Date.now();t-Tw<100||(Tw=t,Xc=k.value.shortcuts||{})}function r0(){if(k.value.keyboard===!1){la&&(document.removeEventListener("keydown",la,!0),la=null),Xc=null;return}la&&(document.removeEventListener("keydown",la,!0),la=null),Object.keys(Yc).forEach(t=>{delete Yc[t]}),iK(),Aw(),la=t=>{if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.target.isContentEditable||t.target instanceof HTMLElement&&t.target.tagName==="BILI-COMMENTS"||t.metaKey)return;const e=t.target;if(e&&e.id==="bewly"||(Aw(),!Xc))return;const i=document.querySelector(".bpx-player")||document.querySelector(".bilibili-player"),n=sK(t);try{const s=Object.keys(Xc);for(const r of s)try{const o=Xc[r];if(!o?.enabled)continue;let a="";if(typeof o=="string"?a=o:o&&typeof o=="object"&&(a=String(o.key||"")),!a)continue;if(a.toLowerCase()===n.toLowerCase()){const l=Yc[r];if(l){t.preventDefault(),t.stopPropagation();try{l(t,i||void 0)}catch{}return}}}catch{}}catch{}},document.addEventListener("keydown",la,!0)}function iK(){gi("danmuStatus",()=>{KW()}),gi("webFullscreen",()=>{sw()}),gi("widescreen",()=>{nw()}),gi("shortStepBackward",()=>{su(!1,5)}),gi("longStepBackward",()=>{su(!1,30)}),gi("shortStepForward",()=>{su(!0,5)}),gi("longStepForward",()=>{su(!0,30)}),gi("playPause",(t,e)=>{UW(e)}),gi("pip",()=>{jW()}),gi("turnOffLight",()=>{HW()}),gi("caption",()=>{zW()}),gi("increasePlaybackRate",()=>{cw(!0)}),gi("decreasePlaybackRate",()=>{cw(!1)}),gi("resetPlaybackRate",()=>{GW()}),gi("previousFrame",()=>{su(!1,.042)}),gi("nextFrame",()=>{su(!0,.042)}),gi("replay",()=>{WW()}),gi("increaseVideoSize",()=>{r2(1)}),gi("decreaseVideoSize",()=>{r2(-1)}),gi("resetVideoSize",()=>{r2(0)}),gi("videoTitle",()=>{YW()}),gi("videoTime",()=>{XW()}),gi("clockTime",()=>{qW()}),gi("toggleFollow",()=>{nK()})}function nK(){try{const t=document.querySelector(".upinfo-btn-panel .follow-btn, .up-info .follow-btn, .video-info-detail .follow-btn, button.follow-btn");if(!t)return;const e=t.classList.contains("not-follow"),i=n=>{n.click();const s=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window}),r=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window}),o=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});n.dispatchEvent(s),n.dispatchEvent(r),n.dispatchEvent(o)};if(e){const n=t.querySelector(".follow-btn-inner");i(n||t)}else{const n=t.querySelector(".follow-btn-inner");i(n||t),setTimeout(()=>{try{const r=Array.from(document.querySelectorAll('.follow_dropdown li, .van-popover li, .van-followed li, [class*="follow"] li')).find(o=>o.textContent?.includes("")||o.textContent?.includes("")||o.textContent?.toLowerCase().includes("unfollow"));r&&i(r)}catch(s){console.error("[BewlyCat] Error clicking unfollow:",s)}},150)}}catch(t){console.error("[BewlyCat] Error toggling follow:",t)}}function sK(t){const e=[];t.ctrlKey&&e.push("Ctrl"),t.altKey&&e.push("Alt"),t.shiftKey&&e.push("Shift");let i=t.key;return i.length===1?i=i.toUpperCase():i===" "?i="Space":i==="ArrowUp"?i="":i==="ArrowDown"?i="":i==="ArrowLeft"?i="":i==="ArrowRight"&&(i=""),e.push(i),e.join("+")}const rK='<svg aria-hidden="true" style="position:absolute;width:0px;height:0px;overflow:hidden;"><symbol id="channel-ai" fill="#333" viewBox="0 0 36 36"><path d="M9.16728 20.0727L19.10775 20.0727L21.111 24.31365L7.156155 24.31365L9.16728 20.0727z" fill="#00B9E7ff"></path><path d="M11.268419999999999 8.658495C11.42745 8.23944 11.828985 7.962345 12.277185 7.962345L15.453 7.962345C15.798750000000002 7.962345 16.0377 8.308440000000001 15.915 8.631765L8.070525 29.30265C7.911495 29.7216 7.5099599999999995 29.998799999999996 7.061745 29.998799999999996L4.733475 29.998799999999996C3.9783299999999997 29.998799999999996 3.45678 29.24295 3.72471 28.53705L11.268419999999999 8.658495z" fill="#00B9E7ff"></path><path d="M26.639249999999997 7.871415C26.0532 7.867484999999999 25.5762 8.3244 25.57725 8.88876L25.5963 28.984650000000002C25.5972 29.5449 26.0691 29.998649999999998 26.650949999999998 29.998649999999998L29.1798 29.998649999999998C29.76225 29.998649999999998 30.234450000000002 29.543850000000003 30.234450000000002 28.982999999999997L30.234450000000002 8.904074999999999C30.234450000000002 8.345895 29.7666 7.892325 29.186999999999998 7.8884549999999996L26.639249999999997 7.871415z" fill="#59E0F9ff"></path><path d="M17.11875 8.655104999999999C16.95975 8.23605 16.5582 7.9589550000000004 16.11 7.9589550000000004L12.218219999999999 7.9589550000000004L20.31675 29.299200000000003C20.475749999999998 29.7183 20.8773 29.995350000000002 21.3255 29.995350000000002L23.65365 29.995350000000002C24.408900000000003 29.995350000000002 24.93045 29.239649999999997 24.662550000000003 28.5336L17.11875 8.655104999999999z" fill="#59E0F9ff"></path><path d="M32.75775 3.39144C32.87685 3.15303 33.2169 3.15303 33.336 3.39144L33.5304 3.780585C33.905100000000004 4.530705 34.456649999999996 5.178495 35.13735 5.66811L35.4945 5.925075C35.673899999999996 6.054075000000001 35.673899999999996 6.320924999999999 35.4945 6.449910000000001L35.13735 6.70689C34.456649999999996 7.196505 33.905100000000004 7.8442799999999995 33.5304 8.594415L33.336 8.98356C33.2169 9.221969999999999 32.87685 9.221969999999999 32.75775 8.98356L32.56335 8.594415C32.188649999999996 7.8442799999999995 31.6371 7.196505 30.9564 6.70689L30.599249999999998 6.449910000000001C30.419850000000004 6.320924999999999 30.419850000000004 6.054075000000001 30.599249999999998 5.925075L30.9564 5.66811C31.6371 5.178495 32.188649999999996 4.530705 32.56335 3.780585L32.75775 3.39144z" fill="#FDDE80ff"></path></symbol><symbol id="channel-life-experience" fill="#333" viewBox="0 0 36 36"><path d="M15.921510000000001 9.49977C15.665759999999999 10.82031 15.754755000000001 12.127695 16.12569 13.328940000000001L8.54493 20.038890000000002L8.548815 20.042355C8.36904 20.20536 8.1975 20.381475000000002 8.035530000000001 20.570549999999997C5.958855 22.995795 6.24141 26.645325 8.666655 28.72209C11.091885 30.79872 14.74143 30.516195 16.818045 28.09095C16.954710000000002 27.931395000000002 17.08113 27.766515 17.197485 27.597164999999997L22.96527 18.87393C26.95953 19.241715 30.65976 16.5276 31.43895 12.50604C31.768275000000003 10.806165 31.526069999999997 9.12795 30.846525 7.6700099999999996C30.557235000000002 7.0493250000000005 29.738445 7.002315 29.28873 7.5187800000000005L25.913520000000002 11.395455C25.659509999999997 11.68713 25.217129999999997 11.717715 24.925530000000002 11.463750000000001L22.93632 9.73194C22.64472 9.477975 22.614044999999997 9.03564 22.868070000000003 8.743965000000001L26.199075 4.9182749999999995C26.65455 4.395105 26.483760000000004 3.5802300000000002 25.8156 3.3935400000000002C25.60881 3.335745 25.39785 3.28587 25.18329 3.2443049999999998C20.898435 2.414145 16.75167 5.214779999999999 15.921510000000001 9.49977z" fill="#FDDE80ff"></path><path d="M11.03139 25.95975C10.131734999999999 25.189484999999998 10.026915 23.8356 10.797285 22.935885C11.567654999999998 22.03632 12.921479999999999 21.931485000000002 13.821135000000002 22.701749999999997C14.720835000000001 23.47215 14.825669999999999 24.826034999999997 14.05527 25.7256C13.2849 26.625315 11.93106 26.730150000000002 11.03139 25.95975z" fill="#FB813Aff"></path></symbol><symbol id="channel-life-joy" fill="#333" viewBox="0 0 36 36"><path d="M6.116445000000001 11.45652C6.088965 9.844664999999999 8.33085 10.254764999999999 9.455235 10.66128C11.965395000000001 11.98203 16.22895 14.71227 13.20195 15.0672C9.41817 15.510750000000002 6.1507950000000005 13.471335 6.116445000000001 11.45652z" fill="#FB813Aff"></path><path d="M6.8341650000000005 21.732300000000002C7.262115 17.1798 10.97442 15.20835 12.479969999999998 14.742315000000001C12.730934999999999 14.742315000000001 14.426580000000001 15.7614 20.196 16.9392C24.03825 17.723399999999998 26.4942 16.51455 27.6546 14.90091C28.2075 14.13204 28.98435 13.619085 29.6151 14.325479999999999C30.520049999999998 15.339000000000002 31.51005 17.29035 31.51005 20.31075C31.51005 26.034150000000004 27.0486 31.4829 18.84855 31.4829C11.226555000000001 31.4829 6.361575 26.75955 6.8341650000000005 21.732300000000002z" fill="#FDDE80ff"></path><path d="M22.2102 11.122785C22.2102 14.770995 19.2528 17.7285 15.60465 17.7285C11.95638 17.7285 8.998935 14.770995 8.998935 11.122785C8.998935 7.474575000000001 11.95638 4.517115 15.60465 4.517115C19.2528 4.517115 22.2102 7.474575000000001 22.2102 11.122785z" fill="#FDDE80ff"></path><path d="M15.0021 11.61426C15.0021 12.445500000000001 14.328299999999999 13.119345000000001 13.49706 13.119345000000001C12.66582 13.119345000000001 11.991975 12.445500000000001 11.991975 11.61426C11.991975 10.78302 12.66582 10.10916 13.49706 10.10916C14.328299999999999 10.10916 15.0021 10.78302 15.0021 11.61426z" fill="#FB813Aff"></path></symbol><symbol id="channel-emotion" fill="#333" viewBox="0 0 36 36"><path d="M17.46489 10.130295C13.208580000000001 3.6895350000000002 4.581345 7.48518 5.214015 14.78883C5.762219999999999 21.1176 12.025575 26.12937 16.45503 28.715325C17.080125 29.080365 17.848365 29.080365 18.47361 28.715325C22.902630000000002 26.12937 29.166045000000004 21.11745 29.71425 14.78883C30.346845000000002 7.48518 21.720525 3.6895350000000002 17.46489 10.130295z" fill="#FF5C7Aff"></path><path d="M25.42521 19.474125C24.596204999999998 15.266160000000001 19.361805 15.397350000000001 18.146445 19.284480000000002C17.155155 22.45536 19.01304 26.094675000000002 20.6784 28.398525C21.102629999999998 28.985325000000003 21.819885 29.279670000000003 22.53399 29.160000000000004C25.33737 28.690125000000002 29.21631 27.405075000000004 30.738239999999998 24.451919999999998C32.60376 20.83161 28.970924999999998 17.061555000000002 25.42521 19.474125z" fill="#FFCFE6ff"></path></symbol><symbol id="channel-health" fill="#333" viewBox="0 0 36 36"><path d="M5.51004 11.096084999999999C5.51004 9.886365 5.51004 9.28149 5.745464999999999 8.81946C5.952555 8.41302 6.28299 8.08257 6.6894149999999994 7.875495C7.151475 7.64007 7.756335 7.64007 8.96604 7.64007L27.212685 7.64007C28.422435 7.64007 29.027234999999997 7.64007 29.489325 7.875495C29.895690000000002 8.08257 30.226170000000003 8.41302 30.433245 8.81946C30.668684999999996 9.28149 30.668684999999996 9.88635 30.668684999999996 11.096070000000001L30.668684999999996 24.903930000000003C30.668684999999996 26.113680000000002 30.668684999999996 26.71848 30.433245 27.180570000000003C30.226170000000003 27.58695 29.895690000000002 27.917429999999996 29.489325 28.124489999999998C29.027234999999997 28.35993 28.422435 28.35993 27.212685 28.35993L8.966025 28.35993C7.756335 28.35993 7.151475 28.35993 6.6894149999999994 28.124489999999998C6.28299 27.917429999999996 5.952555 27.58695 5.745464999999999 27.180570000000003C5.51004 26.71848 5.51004 26.113680000000002 5.51004 24.903930000000003L5.51004 11.096084999999999z" fill="#FF5C7Aff"></path><path d="M4.649744999999999 10.807575L4.649744999999999 10.807575C4.649744999999999 9.869145 4.649744999999999 9.39993 4.79307 9.02634C5.012445 8.45457 5.46426 8.00277 6.036014999999999 7.7833950000000005C6.409604999999999 7.64007 6.878820000000001 7.64007 7.81725 7.64007L7.81725 7.64007L28.402410000000003 7.64007L28.402410000000003 7.64007C29.340870000000002 7.64007 29.810159999999996 7.64007 30.18369 7.7833950000000005C30.755519999999997 8.00277 31.207245 8.454555000000001 31.42671 9.026355C31.569989999999997 9.39993 31.569989999999997 9.86916 31.569989999999997 10.807575L31.569989999999997 10.807575C31.569989999999997 11.120385 31.569989999999997 11.27679 31.522169999999996 11.40132C31.44903 11.59191 31.2984 11.74251 31.107884999999996 11.815635C30.983325 11.86341 30.826950000000004 11.86341 30.51417 11.86341L5.70558 11.86341C5.3927700000000005 11.86341 5.236365 11.86341 5.111835 11.815635C4.921245 11.74251 4.770645 11.59191 4.6975050000000005 11.40132C4.649744999999999 11.27679 4.649744999999999 11.120385 4.649744999999999 10.807575z" fill="#FFCFE6ff"></path><path d="M19.81008 17.791484999999998L19.81008 14.828159999999999C19.81008 14.430510000000002 19.487805 14.108160000000002 19.09008 14.108160000000002L17.088765 14.108160000000002C16.69104 14.108160000000002 16.368765 14.430510000000002 16.368765 14.828159999999999L16.368765 17.791484999999998L13.405439999999999 17.791484999999998C13.007774999999999 17.791484999999998 12.68544 18.11376 12.68544 18.511485L12.68544 20.5128C12.68544 20.910525 13.007774999999999 21.2328 13.405439999999999 21.2328L16.368765 21.2328L16.368765 24.196170000000002C16.368765 24.59376 16.69104 24.916169999999997 17.088765 24.916169999999997L19.09008 24.916169999999997C19.487805 24.916169999999997 19.81008 24.59376 19.81008 24.196170000000002L19.81008 21.2328L22.77345 21.2328C23.171039999999998 21.2328 23.49345 20.910525 23.49345 20.5128L23.49345 18.511485C23.49345 18.11376 23.171039999999998 17.791484999999998 22.77345 17.791484999999998L19.81008 17.791484999999998z" fill="#FFCFE6ff"></path></symbol><symbol id="channel-parenting" fill="#333" viewBox="0 0 36 36"><path d="M8.941185 14.543565000000001C8.385315 14.725155 7.900005 14.749200000000002 7.304235 14.786069999999999L14.838194999999999 7.611075L16.317075 14.50815L23.748630000000002 14.50815C26.818559999999998 14.50815 29.307164999999998 16.996755 29.307164999999998 20.066685C29.307164999999998 23.13648 26.818559999999998 25.625085000000002 23.748630000000002 25.625085000000002L15.24024 25.625085000000002C11.888580000000001 25.625085000000002 9.14862 22.95201 9.06597 19.60128L8.941185 14.543565000000001z" fill="#FDDE80ff"></path><path d="M14.403749999999999 6.69123C15.620115000000002 8.33712 14.63472 11.241225 12.30309 12.964455000000001C9.971415 14.687715 5.9522699999999995 15.602685000000001 4.5825000000000005 13.89078C2.94639 11.845965 5.44998 8.414385 7.781655000000001 6.691155C10.11333 4.9679400000000005 13.187355 5.04534 14.403749999999999 6.69123z" fill="#FDDE80ff"></path><path d="M10.307939999999999 10.079415000000001C10.307939999999999 10.681995 9.81945 11.1705 9.216854999999999 11.1705C8.61426 11.1705 8.12577 10.681995 8.12577 10.079415000000001C8.12577 9.47682 8.61426 8.98833 9.216854999999999 8.98833C9.81945 8.98833 10.307939999999999 9.47682 10.307939999999999 10.079415000000001z" fill="#FB813Aff"></path><path d="M9.218145 19.059404999999998L15.356444999999999 21.157049999999998L12.963165 28.160355L6.82482 26.062709999999996L9.218145 19.059404999999998z" fill="#FDDE80ff"></path><path d="M22.180889999999998 21.959715000000003L28.10895 19.325805L31.11423 26.0892L25.186170000000004 28.72311L22.180889999999998 21.959715000000003z" fill="#FDDE80ff"></path><path d="M32.954685 23.98623C33.47871 24.58455 33.418515 25.494195 32.82033 26.018205C23.804789999999997 33.91503 11.234925 33.463725 3.72405 25.95327C3.1616850000000003 25.390949999999997 3.16167 24.47913 3.724005 23.916809999999998C4.28634 23.354490000000002 5.1981 23.354490000000002 5.76048 23.916809999999998C12.12426 30.280319999999996 22.966995 30.820169999999997 30.922710000000002 23.851875C31.52088 23.327849999999998 32.430675 23.388044999999998 32.954685 23.98623z" fill="#FB813Aff"></path><path d="M29.095769999999998 21.59223C29.58984 16.71105 27.09807 15.548250000000001 25.724309999999996 14.87937C26.064435000000003 14.538525 27.466845 14.372699999999998 28.771050000000002 14.986514999999999C30.558525000000003 15.82761 31.65336 17.98401 32.13447 19.385849999999998C32.317485 19.919235 32.00313 20.479965 31.477109999999996 20.683155C30.59697 21.022845 29.36721 21.498765 29.095769999999998 21.59223z" fill="#FB813Aff"></path><path d="M16.257165 14.503829999999999C15.175440000000002 6.7941 10.894575 4.96434 8.962545 5.99331C8.963474999999999 5.68998 8.963655 5.2934849999999996 8.963715 4.9278C8.96382 4.36917 9.376575 3.88818 9.934379999999999 3.85785C16.79919 3.484425 18.32688 10.757895 18.627555 14.503829999999999C18.296355000000002 14.53983 17.10864 14.503829999999999 16.257165 14.503829999999999z" fill="#FB813Aff"></path></symbol><symbol id="channel-rural" fill="#333" viewBox="0 0 36 36"><path d="M16.371795 16.095165C11.928555 14.781105 11.386545 8.96892 15.166080000000001 6.191715C19.736069999999998 8.479575 19.470525 13.23903 16.371795 16.095165z" fill="#57D587ff"></path><path d="M28.014195 13.99926C27.290879999999998 18.576 21.598995000000002 19.87128 18.352649999999997 16.486275C20.024925 11.65683 24.778365 11.29944 28.014195 13.99926z" fill="#57D587ff"></path><path d="M16.954124999999998 25.582035C11.13936 28.482480000000002 5.026065 23.03799 6.24807 16.57512C13.123980000000001 14.552579999999999 17.40225 19.68927 16.954124999999998 25.582035z" fill="#57D587ff"></path><path d="M29.70159 22.05735C28.631954999999998 28.250355000000003 20.887484999999998 29.896994999999997 16.550069999999998 25.2432C18.91167 18.72591 25.365315 18.333075 29.70159 22.05735z" fill="#57D587ff"></path><path d="M24.461280000000002 8.518559999999999C24.84288 9.216315 24.58656 10.091325 23.88888 10.47294C20.59473 12.2745 18.9396 15.645315 18.33321 19.250925C17.723085 22.879155 18.233430000000002 26.441850000000002 18.95601 28.205714999999998C19.257405 28.94169 18.90519 29.78265 18.1692 30.084045C17.43336 30.38559 16.5924 30.033360000000002 16.29087 29.29737C15.33456 26.96271 14.808239999999998 22.845599999999997 15.49311 18.77328C16.181715 14.678234999999999 18.15321 10.327259999999999 22.506915 7.9461450000000005C23.204595 7.56453 24.07968 7.820819999999999 24.461280000000002 8.518559999999999z" fill="#1F9F81ff"></path></symbol><symbol id="channel-travel" fill="#333" viewBox="0 0 36 36"><path d="M10.929555 30.19593C10.929555 29.142285 11.788395 28.28808 12.842055 28.28808C13.8957 28.28808 14.754525 29.142285 14.754525 30.19593C14.754525 31.249589999999998 13.8957 32.103795 12.842055 32.103795C11.788395 32.103795 10.929555 31.249589999999998 10.929555 30.19593z" fill="#59E1F9ff"></path><path d="M21.775965 30.19593C21.775965 29.142285 22.63479 28.28808 23.688435 28.28808C24.74208 28.28808 25.60089 29.142285 25.60089 30.19593C25.60089 31.249589999999998 24.74208 32.103795 23.688435 32.103795C22.63479 32.103795 21.775965 31.249589999999998 21.775965 30.19593z" fill="#59E1F9ff"></path><path d="M14.656604999999999 5.5494900000000005C13.940909999999999 5.5494900000000005 13.360680000000002 6.12972 13.360680000000002 6.84549L13.360680000000002 14.053785L11.63268 14.053785L11.63268 6.84549C11.63268 5.175375 12.986564999999999 3.82149 14.656604999999999 3.82149L21.534195 3.82149C23.20431 3.82149 24.558194999999998 5.175375 24.558194999999998 6.84549L24.558194999999998 14.450054999999999L22.830195 14.450054999999999L22.830195 6.84549C22.830195 6.12972 22.249875 5.5494900000000005 21.534195 5.5494900000000005L14.656604999999999 5.5494900000000005z" fill="#59E1F9ff"></path><path d="M11.05668 6.845505C11.05668 4.857285 12.668444999999998 3.24549 14.656604999999999 3.24549L21.534195 3.24549C23.522399999999998 3.24549 25.134195 4.85727 25.134195 6.84549L25.134195 15.026055L22.254195000000003 15.026055L22.254195000000003 6.84549C22.254195000000003 6.44784 21.93177 6.12549 21.534195 6.12549L14.656604999999999 6.12549C14.259045 6.12549 13.936679999999999 6.44784 13.936679999999999 6.845505L13.936679999999999 14.6298L11.05668 14.6298L11.05668 6.845505zM14.656604999999999 4.3974899999999995C13.304685 4.3974899999999995 12.208680000000001 5.493494999999999 12.208680000000001 6.845505L12.208680000000001 13.477800000000002L12.784680000000002 13.477800000000002L12.784680000000002 6.845505C12.784680000000002 5.81163 13.622805 4.97349 14.656604999999999 4.97349L21.534195 4.97349C22.568115 4.97349 23.406195 5.811615 23.406195 6.84549L23.406195 13.874055000000002L23.982195 13.874055000000002L23.982195 6.84549C23.982195 5.493494999999999 22.886205 4.3974899999999995 21.534195 4.3974899999999995L14.656604999999999 4.3974899999999995z" fill="#59E1F9ff"></path><path d="M14.65719 6.053324999999999C14.219759999999999 6.053324999999999 13.865174999999999 6.407909999999999 13.865174999999999 6.845325000000001L13.865174999999999 7.20984C13.865174999999999 7.965375 13.252695 8.577855 12.497175 8.577855C11.74164 8.577855 11.129175 7.965375 11.129175 7.20984L11.129175 6.845325000000001C11.129175 4.89687 12.708704999999998 3.317325 14.65719 3.317325L21.53463 3.317325C23.483085000000003 3.317325 25.06263 4.89687 25.06263 6.845325000000001L25.06263 7.35084C25.06263 8.106359999999999 24.450195 8.71884 23.69463 8.71884C22.9392 8.71884 22.32663 8.106359999999999 22.32663 7.35084L22.32663 6.845325000000001C22.32663 6.407909999999999 21.972089999999998 6.053324999999999 21.53463 6.053324999999999L14.65719 6.053324999999999z" fill="#59E1F9ff"></path><path d="M7.671434999999999 12.747405C7.671434999999999 11.55435 8.63871 10.587225 9.83178 10.587405C15.35097 10.588140000000001 20.870205 10.58853 26.38944 10.587465C27.58263 10.58724 28.55001 11.55438 28.55001 12.74754L28.55001 27.636765000000004C28.55001 28.82967 27.58305 29.796765 26.390010000000004 29.796765C20.87049 29.796765 15.35097 29.796765 9.831434999999999 29.796765C8.638515 29.796765 7.671434999999999 28.82967 7.671434999999999 27.636765000000004L7.671434999999999 12.747405z" fill="#00B9E7ff"></path><path d="M13.304175 16.839645C13.304175 16.044330000000002 13.94889 15.399645 14.74416 15.399645C15.539475 15.399645 16.184160000000002 16.044330000000002 16.184160000000002 16.839645L16.184160000000002 23.54457C16.184160000000002 24.339885000000002 15.539475 24.984569999999998 14.74416 24.984569999999998C13.94889 24.984569999999998 13.304175 24.339885000000002 13.304175 23.54457L13.304175 16.839645z" fill="#FDDE80ff"></path><path d="M20.037315 16.839645C20.037315 16.044330000000002 20.682000000000002 15.399645 21.477315 15.399645C22.27263 15.399645 22.917315 16.044330000000002 22.917315 16.839645L22.917315 23.54457C22.917315 24.339885000000002 22.27263 24.984569999999998 21.477315 24.984569999999998C20.682000000000002 24.984569999999998 20.037315 24.339885000000002 20.037315 23.54457L20.037315 16.839645z" fill="#FDDE80ff"></path></symbol><symbol id="channel-handmake" fill="#333" viewBox="0 0 36 36"><path d="M18.93744 21.35607C18.546915000000002 21.9636 17.659005 21.9636 17.26833 21.356355L15.81264 19.09353C15.602250000000002 18.766650000000002 15.602250000000002 18.34719 15.812355 18.020159999999997L24.53631 4.446705C24.751289999999997 4.11219 25.20201 4.011374999999999 25.497645 4.277265C27.086115 5.7056249999999995 27.451005000000002 8.11482 26.258685 9.96999L18.93744 21.35607z" fill="#6D69E4ff"></path><path d="M17.060969999999998 18.64512L18.840674999999997 19.67256L15.975075 24.635955000000003L14.195339999999998 23.608515L17.060969999999998 18.64512z" fill="#6D69E4ff"></path><path d="M17.23968 21.37263C17.630789999999998 21.97497 18.51264 21.97512 18.903885 21.372915L20.38248 19.097279999999998C20.596035 18.768674999999998 20.596035 18.345165 20.382765 18.01641L11.56986 4.439535C11.35473 4.108125 10.90755 4.00794 10.611825 4.269959999999999C9.00069 5.697405 8.62881 8.111655 9.835065 9.96999L17.23968 21.37263z" fill="#9796EDff"></path><path d="M17.060969999999998 19.67256L18.840674999999997 18.64512L21.609075 23.440170000000002L19.82937 24.46761L17.060969999999998 19.67256z" fill="#9796EDff"></path><path d="M10.2252 28.300169999999998C8.772255 27.366329999999998 8.351445 25.431555000000003 9.2853 23.978595C10.21914 22.525635 12.15402 22.10472 13.606965 23.038710000000002C15.059955 23.97255 15.48072 25.907325 14.54688 27.360284999999998C13.613025 28.813245 11.678145 29.234009999999998 10.2252 28.300169999999998zM8.943255 30.29472C6.388755 28.652835000000003 5.648925 25.25112 7.2907649999999995 22.69656C8.932605 20.14215 12.334409999999998 19.402275000000003 14.88888 21.044159999999998C17.44344 22.68591 18.183315 26.087759999999996 16.541430000000002 28.64217C14.899530000000002 31.196730000000002 11.497755 31.936605 8.943255 30.29472z" fill="#FDDE80ff"></path><path d="M22.58712 28.300169999999998C21.13416 27.366329999999998 20.713395 25.431555000000003 21.647235000000002 23.978595C22.581075 22.525635 24.51585 22.10472 25.968809999999998 23.038710000000002C27.42177 23.97255 27.842684999999996 25.907325 26.90871 27.360284999999998C25.974869999999996 28.813245 24.040080000000003 29.234009999999998 22.58712 28.300169999999998zM21.305235 30.29472C18.750675 28.652835000000003 18.0108 25.25112 19.652684999999998 22.69656C21.29457 20.14215 24.696284999999996 19.402275000000003 27.250844999999998 21.044159999999998C29.80527 22.68591 30.54513 26.087759999999996 28.903245000000002 28.64217C27.26151 31.196730000000002 23.859645 31.936605 21.305235 30.29472z" fill="#FDDE80ff"></path><path d="M19.61121 18.490319999999997C19.61121 19.319475 18.939030000000002 19.99167 18.109875 19.99167C17.28072 19.99167 16.608525 19.319475 16.608525 18.490319999999997C16.608525 17.661165 17.28072 16.98897 18.109875 16.98897C18.939030000000002 16.98897 19.61121 17.661165 19.61121 18.490319999999997z" fill="#FDDE80ff"></path></symbol><symbol id="channel-gym" fill="#333" viewBox="0 0 36 36"><path d="M3.0051449999999997 18.06681C3.0051449999999997 17.27151 3.619935 16.62681 4.37829 16.62681L31.84113 16.62681C32.59944 16.62681 33.214169999999996 17.27151 33.214169999999996 18.06681C33.214169999999996 18.862125 32.59944 19.50681 31.84113 19.50681L4.37829 19.50681C3.619935 19.50681 3.0051449999999997 18.862125 3.0051449999999997 18.06681z" fill="#FF8834ff"></path><path d="M28.19247 7.919955L26.032470000000004 7.919955L26.032470000000004 28.08L28.19247 28.08C29.385510000000004 28.08 30.35247 27.11289 30.35247 25.92L30.35247 10.07991C30.35247 8.88699 29.385360000000002 7.919955 28.19247 7.919955z" fill="#FFD671ff"></path><path d="M12.346874999999999 7.919955L10.186875 7.919955L10.186875 28.08L12.346874999999999 28.08C13.539810000000001 28.08 14.506844999999998 27.11289 14.506844999999998 25.92L14.506844999999998 10.079925C14.506844999999998 8.887005 13.539794999999998 7.919955 12.346874999999999 7.919955z" fill="#FF8834ff"></path><path d="M23.87247 7.92L26.032470000000004 7.92L26.032470000000004 28.08L23.87247 28.08C22.679565 28.08 21.71247 27.11289 21.71247 25.92L21.71247 10.079744999999999C21.71247 8.88699 22.679714999999998 7.92 23.87247 7.92z" fill="#FF8834ff"></path><path d="M8.026875 7.919955L10.186875 7.919955L10.186875 28.08L8.026875 28.08C6.83394 28.08 5.866875 27.11289 5.866875 25.92L5.866875 10.07991C5.866875 8.88699 6.8339550000000004 7.919955 8.026875 7.919955z" fill="#FFD671ff"></path></symbol><symbol id="channel-outdoors" fill="#333" viewBox="0 0 36 36"><path d="M13.94172 6.175980000000001C14.472434999999999 5.114625 15.98703 5.114625 16.51767 6.175980000000001L27.147750000000002 27.436035000000004C27.6264 28.393485 26.93016 29.52 25.85967 29.52L4.59966 29.52C3.5291999999999994 29.52 2.83296 28.393485 3.311685 27.436035000000004L13.94172 6.175980000000001z" fill="#1F9F81ff"></path><path d="M4.588725 29.520285C3.52482 29.512230000000002 2.835315 28.39047 3.312315 27.43647L8.750340000000001 16.560285L9.519975 18.099645000000002C9.94449 18.948675 11.156189999999999 18.948675 11.58072 18.099645000000002L12.50235 16.25631C13.03302 15.19503 14.5476 15.19503 15.078240000000001 16.25631L18.15999 22.419645C18.58449 23.268674999999998 19.796115 23.268674999999998 20.220765 22.419645L22.43031 18.000435L27.148320000000002 27.43647C27.627119999999998 28.393919999999998 26.930880000000002 29.520435 25.86039 29.520435L4.89642 29.520435C4.8932400000000005 29.520285 4.89006 29.520285 4.88688 29.520285L4.588725 29.520285z" fill="#57D587ff"></path><path d="M24.021645 14.81598C24.552434999999996 13.754625 26.06703 13.754625 26.59767 14.81598L32.90775 27.436035000000004C33.3864 28.393485 32.69016 29.52 31.61967 29.52L18.999645 29.52C17.929154999999998 29.52 17.232915 28.393485 17.711714999999998 27.436035000000004L24.021645 14.81598z" fill="#1F9F81ff"></path><path d="M29.27031 20.16L32.90832 27.436035000000004C33.387119999999996 28.393485 32.69088 29.52 31.62039 29.52L19.00023 29.52C17.929875000000003 29.52 17.233635 28.393485 17.712285 27.436035000000004L22.43031 18L25.74633 24.63207C26.011725 25.16271 26.76903 25.16271 27.034274999999997 24.63207L29.27031 20.16z" fill="#57D587ff"></path></symbol><symbol id="channel-home" fill="#333" viewBox="0 0 36 36"><path d="M8.389859999999999 7.566809999999999C8.389859999999999 6.37392 9.3567 5.406855 10.549605 5.406855C10.599495 5.406855 10.649805 5.406855 10.700520000000001 5.406855L21.03681 5.406855C21.08736 5.406855 21.13761 5.406855 21.18729 5.406855C22.38033 5.406840000000001 23.34744 6.373965 23.34744 7.567019999999999L23.34744 30.606915L10.700505 30.606915C9.42438 30.606915 8.389859999999999 29.692230000000002 8.389859999999999 28.563689999999998L8.389859999999999 7.566809999999999z" fill="#FF8834ff"></path><path d="M14.140545 16.99935C14.140545 16.60176 14.462924999999998 16.27935 14.860515 16.27935L16.876800000000003 16.27935C17.27439 16.27935 17.596799999999998 16.60176 17.596799999999998 16.99935L17.596799999999998 19.015484999999998C17.596799999999998 19.41321 17.27439 19.735485 16.876800000000003 19.735485L14.860515 19.735485C14.462924999999998 19.735485 14.140545 19.41321 14.140545 19.015484999999998L14.140545 16.99935z" fill="#FFD671ff"></path><path d="M14.140545 10.560929999999999C14.140545 10.163295 14.462924999999998 9.84093 14.860515 9.84093L16.876800000000003 9.84093C17.27439 9.84093 17.596799999999998 10.163295 17.596799999999998 10.560929999999999L17.596799999999998 12.577125C17.596799999999998 12.974775000000001 17.27439 13.297125000000001 16.876800000000003 13.297125000000001L14.860515 13.297125000000001C14.462924999999998 13.297125000000001 14.140545 12.974775000000001 14.140545 12.577125L14.140545 10.560929999999999z" fill="#FFD671ff"></path><path d="M14.140545 23.43759C14.140545 23.04 14.462924999999998 22.71759 14.860515 22.71759L16.876800000000003 22.71759C17.27439 22.71759 17.596799999999998 23.04 17.596799999999998 23.43759L17.596799999999998 25.453725C17.596799999999998 25.85145 17.27439 26.173724999999997 16.876800000000003 26.173724999999997L14.860515 26.173724999999997C14.462924999999998 26.173724999999997 14.140545 25.85145 14.140545 25.453725L14.140545 23.43759z" fill="#FFD671ff"></path><path d="M23.34744 13.210575L28.549875 13.210575C29.742765000000002 13.210575 30.709875 14.17764 30.709875 15.370560000000001L30.709875 15.370560000000001L30.709875 28.446915C30.709875 29.639805 29.742765000000002 30.606915 28.549875 30.606915L23.34744 30.606915L23.34744 13.210575z" fill="#FFD671ff"></path><path d="M25.73424 16.99905C25.73424 16.601325000000003 26.056514999999997 16.27905 26.45424 16.27905L27.603074999999997 16.27905C28.0008 16.27905 28.323075 16.601325000000003 28.323075 16.99905L28.323075 19.0152C28.323075 19.41279 28.0008 19.7352 27.603074999999997 19.7352L26.45424 19.7352C26.056514999999997 19.7352 25.73424 19.41279 25.73424 19.0152L25.73424 16.99905z" fill="#FF8834ff"></path><path d="M25.73424 23.43729C25.73424 23.039565 26.056514999999997 22.71729 26.45424 22.71729L27.603074999999997 22.717154999999998C28.0008 22.717154999999998 28.323075 23.039565 28.323075 23.437155L28.323075 25.45344C28.323075 25.85103 28.0008 26.17344 27.603074999999997 26.17344L26.45424 26.17344C26.056514999999997 26.17344 25.73424 25.85103 25.73424 25.45344L25.73424 23.43729z" fill="#FF8834ff"></path><path d="M6.702195000000001 29.707050000000002C6.702195000000001 28.911749999999998 7.346895 28.267049999999998 8.142195000000001 28.267049999999998L30.95439 28.267049999999998C31.74969 28.267049999999998 32.39439 28.911749999999998 32.39439 29.707050000000002C32.39439 30.502365 31.74969 31.14705 30.95439 31.14705L8.142195000000001 31.14705C7.346895 31.14705 6.702195000000001 30.502365 6.702195000000001 29.707050000000002z" fill="#FF8834ff"></path></symbol><symbol id="channel-painting" fill="#333" viewBox="0 0 36 36"><path d="M18.5616 28.269930000000002C19.040115 30.006285000000002 20.579909999999998 31.62657 22.277085 31.02351C27.39687 29.20407 31.07463 24.195315 31.07463 18.301395C31.07463 10.870905 25.229234999999996 4.84734 18.018720000000002 4.84734C10.807965 4.84734 4.96266 10.870905 4.96266 18.301395C5.00169 19.15689 5.18418 19.93161 5.418810000000001 20.45751C6.265815 22.355715 8.420910000000001 22.737885 10.10088 22.69383C12.051075 22.64271 14.44839 22.860285 15.841439999999999 24.013289999999998C17.396790000000003 25.30065 18.17799 26.877885 18.5616 28.269930000000002z" fill="#FDDE80ff"></path><path d="M13.177889999999998 15.746685C13.177889999999998 17.162355 12.030194999999999 18.310035 10.614435 18.310035C9.198705 18.310035 8.051010000000002 17.162355 8.051010000000002 15.746685C8.051010000000002 14.330894999999998 9.198705 13.183215 10.614435 13.183215C12.030194999999999 13.183215 13.177889999999998 14.330894999999998 13.177889999999998 15.746685z" fill="#FB813Aff"></path><path d="M18.612 11.22483C18.612 12.306420000000001 17.735325 13.183215 16.65375 13.183215C15.57216 13.183215 14.695350000000001 12.306420000000001 14.695350000000001 11.22483C14.695350000000001 10.143239999999999 15.57216 9.26646 16.65375 9.26646C17.735325 9.26646 18.612 10.143239999999999 18.612 11.22483z" fill="#FB813Aff"></path><path d="M24.54495 11.224845C24.54495 12.033809999999999 23.889165 12.68961 23.08017 12.68961C22.271325 12.68961 21.615405000000003 12.033809999999999 21.615405000000003 11.224845C21.615405000000003 10.415880000000001 22.271325 9.760079999999999 23.08017 9.760079999999999C23.889165 9.760079999999999 24.54495 10.415880000000001 24.54495 11.224845z" fill="#FB813Aff"></path><path d="M22.07376 21.932205C21.621315000000003 21.14871 21.880229999999997 20.14719 22.655520000000003 19.68105L31.77015 14.200995C32.738115 13.61901 33.995954999999995 13.96314 34.532925 14.956814999999999C35.05824 15.928995 34.686434999999996 17.14305 33.706649999999996 17.654115L24.27783 22.573590000000003C23.48985 22.984560000000002 22.518 22.701749999999997 22.07376 21.932205z" fill="#FB813Aff"></path><path d="M17.676435 22.12863C18.480809999999998 22.02321 19.383405 20.97 19.85904 20.310195L23.039565 24.090915000000003C20.79879 25.44711 17.941830000000003 24.460410000000003 17.333849999999998 22.514115C17.27424 22.323165000000003 17.478285 22.154685 17.676435 22.12863z" fill="#FB813Aff"></path><path d="M24.238229999999998 22.44729C23.947635 23.800755 22.614915 24.662309999999998 21.26145 24.371715000000002C19.908 24.08112 19.046445 22.74825 19.337040000000002 21.394949999999998C19.627634999999998 20.041484999999998 20.96049 19.17993 22.313805000000002 19.470525C23.667270000000002 19.76112 24.52881 21.09384 24.238229999999998 22.44729z" fill="#FB813Aff"></path></symbol><symbol id="channel-shortplay" fill="#333" viewBox="0 0 36 36"><path d="M4.92351 14.173725C4.92351 12.980775000000001 5.89056 12.013725 7.08351 12.013725L27.90576 12.013725C29.09865 12.013725 30.065759999999997 12.980775000000001 30.065759999999997 14.173725L30.065759999999997 27.834629999999997C30.065759999999997 29.027520000000003 29.09865 29.99463 27.90576 29.99463L7.08351 29.99463C5.89056 29.99463 4.92351 29.027520000000003 4.92351 27.834629999999997L4.92351 14.173725z" fill="#6D69E4ff"></path><path d="M4.96161 9.73206C4.96161 8.661765 5.74539 7.752870000000001 6.804045 7.59552L15.702765 6.27288C16.89609 6.09552 18.109005 6.09534 19.302195 6.2723700000000004L28.224719999999998 7.595955C29.28369 7.75305 30.067769999999996 8.662065 30.067769999999996 9.732585L30.067769999999996 12.05307L4.96161 12.05307L4.96161 9.73206z" fill="#FDDE80ff"></path><path d="M4.8969000000000005 27.834629999999997L4.8969000000000005 12.016380000000002L16.080765 12.016380000000002C16.080765 15.681885 13.16871 23.885565 7.09146 23.885565C9.64359 23.885565 10.224165 26.63496 10.186214999999999 28.745279999999998C10.173255 29.465429999999998 9.553574999999999 29.99463 8.833335 29.99463L7.056900000000001 29.99463C5.86398 29.99463 4.8969000000000005 29.027520000000003 4.8969000000000005 27.834629999999997z" fill="#9796EDff"></path><path d="M30.06879 27.834629999999997L30.06879 12.01641L18.88503 12.01641C18.88503 15.681885 21.796995000000003 23.885565 27.874230000000004 23.885565C25.322114999999997 23.885565 24.74151 26.63496 24.77952 28.745279999999998C24.79248 29.465429999999998 25.412115 29.99463 26.132400000000004 29.99463L27.90879 29.99463C29.101679999999998 29.99463 30.06879 29.027520000000003 30.06879 27.834629999999997z" fill="#9796EDff"></path><path d="M9.631920000000001 12.042179999999998L4.92363 12.042179999999998L4.92363 24.06585C9.20415 24.06585 9.84603 16.05009 9.631920000000001 12.042179999999998z" fill="#6D69E4ff"></path><path d="M25.36056 12.042179999999998L30.06879 12.042179999999998L30.06879 24.06585C25.788240000000002 24.06585 25.146434999999997 16.05009 25.36056 12.042179999999998z" fill="#6D69E4ff"></path><path d="M4.8969000000000005 22.874115L8.829315000000001 22.874115C9.624600000000001 22.874115 10.269315 23.5188 10.269315 24.314114999999997L10.269315 24.314114999999997C10.269315 25.109429999999996 9.624600000000001 25.754115 8.829315000000001 25.754115L4.8969000000000005 25.754115L4.8969000000000005 22.874115z" fill="#FDDE80ff"></path><path d="M30.06879 22.874115L26.13024 22.874115C25.334925 22.874115 24.690239999999996 23.5188 24.690239999999996 24.314114999999997L24.690239999999996 24.314114999999997C24.690239999999996 25.109429999999996 25.334925 25.754115 26.13024 25.754115L30.06879 25.754115L30.06879 22.874115z" fill="#FDDE80ff"></path></symbol><symbol id="channel-activity" fill="#333" viewBox="0 0 1024 1024"><path d="M518.656 475.904a223.488 223.488 0 0 1-23.296-75.52 366.08 366.08 0 0 1 81.408 14.592 623.104 623.104 0 0 1-58.112 60.928m-69.888-119.04c-11.52-58.112-8.704-55.296-25.6-156.928a265.984 265.984 0 0 0-78.336 46.592c51.2 104.448 60.928 165.376 92.928 290.304 51.2-5.632 211.968-40.704 226.56-130.56 8.704-64-142.336-64-215.04-49.408m37.12 267.264a263.424 263.424 0 0 0-107.52 69.632l43.52 153.6a47.872 47.872 0 0 1-92.928 23.296L216.576 473.088l-72.704-204.8c2.816-5.632 5.888-8.704 8.704-14.336l-14.592-51.2a46.08 46.08 0 0 1 32-57.856 47.616 47.616 0 0 1 58.112 34.304v2.816a334.848 334.848 0 0 1 98.816-43.52c177.152-46.592 203.264 55.04 429.824 23.296L890.368 588.8c-171.52 90.112-232.448-11.52-403.712 35.072" fill="#F39800"/></symbol><symbol id="channel-ad" viewBox="0 0 1024 1024"><path d="M576.768 153.6c32.768-32.512 132.096 13.824 221.952 103.68S935.168 446.464 902.4 479.232a27.648 27.648 0 0 1-6.144 4.608c-37.632 22.784-640 377.6-640 377.6a110.592 110.592 0 0 1-48.384-30.976 140.288 140.288 0 0 1-34.56-49.152s381.184-588.8 399.36-620.8a34.56 34.56 0 0 1 4.096-6.912z" fill="#9796ED"/><path d="M172.288 780.032c-4.864 3.328-35.328 19.968-51.2 28.928a18.688 18.688 0 0 0-9.728 19.456 104.192 104.192 0 0 0 31.488 58.368 117.504 117.504 0 0 0 59.392 33.024 19.2 19.2 0 0 0 19.968-8.448c10.752-17.152 32-51.2 33.024-51.2a110.592 110.592 0 0 1-48.384-30.976 140.288 140.288 0 0 1-34.56-49.152z" fill="#9289F0"/><path d="M576.768 153.6c32.768-32.512 132.096 13.824 221.952 103.68S935.168 446.464 902.4 479.232a27.648 27.648 0 0 1-6.144 4.608c-37.632 22.784-102.4 60.16-102.4 60.16s-64-4.096-173.312-113.664c-102.4-102.4-112.128-171.008-112.128-171.008s39.936-61.696 62.464-98.816a34.56 34.56 0 0 1 5.888-6.912z" fill="#F7DF88"/><path d="M680.458 374.492a230.144 83.712 45 1 0 118.387-118.386 230.144 83.712 45 1 0-118.387 118.386Z" fill="#8683EA"/></symbol><symbol id="channel-animal" viewBox="0 0 1024 1024"><path d="M517.376 465.152a144.924 144.924 0 0 1 137.529 99.214c1.28 3.926 2.275 7.85 2.901 11.805a132.267 132.267 0 0 1-14.279 263.765H380.473a132.267 132.267 0 0 1-14.25-263.794 74.044 74.044 0 0 1 2.872-11.776 144.924 144.924 0 0 1 137.529-99.214h10.752zm-96.683-47.047c50.262-3.783 85.618-59.165 79.047-123.733-6.599-64.57-52.65-113.892-102.912-110.109-50.232 3.755-85.617 59.165-79.018 123.733 6.599 64.57 52.65 113.864 102.912 110.08zm182.614 0c50.233 3.755 96.284-45.511 102.883-110.109 6.6-64.568-28.786-119.978-79.018-123.733-50.262-3.783-96.313 45.511-102.912 110.08-6.6 64.569 28.785 119.979 79.018 123.733zM717.426 551.14c39.082 21.816 96.91-4.267 129.138-58.226 32.256-53.96 26.709-115.37-12.374-137.188-39.11-21.817-96.938 4.267-129.166 58.226-32.256 53.96-26.71 115.37 12.402 137.188zm-410.852 0c39.111-21.817 44.658-83.229 12.402-137.188-32.228-53.96-90.055-80.043-129.138-58.226-39.11 21.817-44.658 83.229-12.43 137.188 32.256 53.959 90.084 80.042 129.166 58.226z" fill="#FB7299"/><path d="M621.511 113.778c76.231-.939 138.468 74.012 149.504 173.34 37.746-13.312 75.861-12.914 107.293 4.324 70.712 38.77 80.753 147.968 22.442 243.91a272.327 272.327 0 0 1-71.11 78.337c9.158 22.87 14.221 47.843 14.221 73.984v23.438a199.111 199.111 0 0 1-199.11 199.111H379.25a199.111 199.111 0 0 1-199.111-199.11v-23.44c0-26.168 5.063-51.114 14.222-74.012a272.1 272.1 0 0 1-71.111-78.307c-58.311-95.943-48.27-205.141 22.442-243.911 31.432-17.238 69.547-17.636 107.321-4.352 11.008-99.3 73.245-174.25 149.476-173.312 42.41.54 81.152 24.462 109.511 62.777 28.36-38.287 67.1-62.237 109.511-62.777z" fill="#FFD7E7"/><path d="M512 465.152a141.198 141.198 0 0 1 134.741 98.958l.086.256c1.905 6.087 3.015 12.231 3.356 18.29a132.267 132.267 0 0 1-9.728 264.164h-256.91a132.267 132.267 0 0 1-9.671-264.192l-.2 4.58a76.853 76.853 0 0 1 3.5-22.842l.085-.284A141.198 141.198 0 0 1 512 465.18zm-91.307-47.047c50.262-3.783 85.618-59.165 79.047-123.733-6.599-64.57-52.65-113.892-102.912-110.109-50.232 3.755-85.617 59.165-79.018 123.733 6.599 64.57 52.65 113.864 102.912 110.08zm182.614 0c50.233 3.755 96.284-45.511 102.883-110.109 6.6-64.568-28.786-119.978-79.018-123.733-50.262-3.783-96.313 45.511-102.912 110.08-6.6 64.569 28.785 119.979 79.018 123.733zM717.426 551.14c39.082 21.816 96.91-4.267 129.138-58.226 32.256-53.96 26.709-115.37-12.374-137.188-39.11-21.817-96.938 4.267-129.166 58.226-32.256 53.96-26.71 115.37 12.402 137.188zm-410.852 0c39.111-21.817 44.658-83.229 12.402-137.188-32.228-53.96-90.055-80.043-129.138-58.226-39.11 21.817-44.658 83.229-12.43 137.188 32.256 53.959 90.084 80.042 129.166 58.226z" fill="#FB7299"/></symbol><symbol id="channel-anime" viewBox="0 0 1024 1024"><path d="m588.8 359.68-12.032-7.424L727.04 145.664a30.976 30.976 0 0 0-51.2-36.352l-153.6 210.176L281.6 170.24a30.976 30.976 0 1 0-33.024 52.736L486.4 369.92l-22.784 31.488a30.976 30.976 0 1 0 51.2 36.352l25.6-35.072 16.128 9.728A30.976 30.976 0 1 0 588.8 359.68zM710.4 850.688a53.248 53.248 0 1 0 106.496 0 53.248 53.248 0 1 0-106.496 0ZM261.12 797.44a53.248 53.248 0 1 0 53.504 53.248 53.248 53.248 0 0 0-53.504-53.248z" fill="#FB813A"/><path d="M234.24 314.368h556.288q92.928 0 92.928 92.928V768q0 92.928-92.928 92.928H234.24q-92.928 0-92.928-92.928V407.296q0-92.928 92.928-92.928Z" fill="#FDDE80"/><path d="M392.192 575.232a128.256 128.256 0 1 0 256.512 0 128.256 128.256 0 1 0-256.512 0Z" fill="#FFF"/><path d="M476.928 546.56c0-26.88 19.2-37.632 42.24-25.6l49.664 28.672a25.6 25.6 0 0 1 0 48.64l-49.664 28.672c-23.04 13.568-42.24 2.56-42.24-24.32z" fill="#FB813A"/></symbol><symbol id="channel-blackroom" viewBox="0 0 1024 1024"><path d="M0 0h1024v1024H0z" fill="none"/><path d="M874.675 156.595c14.848 0 27.136 11.187 28.8 25.6l.205 3.405v335.949c0 14.873-11.213 27.136-25.626 28.825l-3.379.18H697.702l-54.476 54.502a29.03 29.03 0 0 1-35.354 4.429l-2.944-2.023-2.74-2.406-54.527-54.528-134.912.026c-13.747 0-25.242-9.55-28.263-22.35l-.563-3.276-.205-3.38V382.567H370.74c-13.721 0-25.216-9.523-28.237-22.348l-.563-3.252-.205-3.404V185.6c0-14.874 11.213-27.136 25.626-28.826l3.38-.179h503.935z" fill="#AAF6C4"/><path d="M755.2 268.8c18.611 0 33.92 14.003 36.02 32.026l.255 4.25v435.2c0 18.585-14.003 33.92-32.051 36.018l-4.224.256H422.733L287.36 878.08c-21.683 16.256-51.763 3.738-57.165-20.992l-.665-4.02-.205-3.993v-72.55h-54.4c-17.152 0-31.54-11.93-35.303-27.955l-.716-4.096-.256-4.199v-435.2c0-18.611 14.028-33.945 32.05-36.019l4.225-.256H755.2z" fill="#59D498"/><path d="M392.525 563.2a32 32 0 0 1 3.277 63.846l-3.277.154h-108.8a32 32 0 0 1-3.251-63.846l3.25-.154h108.8zm108.8-145.075a32 32 0 0 1 3.277 63.846l-3.277.154h-217.6a32 32 0 0 1-3.251-63.821l3.25-.18h217.6z" fill="#FFF"/></symbol><symbol id="channel-broadcast" viewBox="0 0 1024 1024"><path d="M665.6 852.48H194.56c-38.4 0-66.56-30.72-66.56-69.12v-281.6c0-38.4 30.72-69.12 66.56-69.12H665.6c38.4 0 66.56 30.72 66.56 69.12v284.16c0 35.84-30.72 66.56-66.56 66.56M688.768 282.138c0 76.8-61.44 138.24-135.68 138.24s-133.12-61.44-133.12-138.24 61.44-138.24 135.68-138.24 133.12 64 133.12 138.24" fill="#FE6998"/><path d="M384 332.8c0 48.64-38.4 89.6-87.04 89.6s-87.04-38.4-87.04-89.6 38.4-89.6 87.04-89.6S384 284.16 384 332.8" fill="#FF5B61"/><path d="m414.72 558.08 115.2 69.12c15.36 10.24 15.36 30.72 0 40.96l-115.2 69.12c-15.36 10.24-35.84-2.56-35.84-20.48V578.56c2.56-17.92 20.48-28.16 35.84-20.48" fill="#FDDE80"/><path d="m790.912 511.59-168.96 99.84c-30.72 17.92-30.72 66.56 0 84.48l168.96 99.84c30.72 17.92 71.68-5.12 71.68-43.52V555.11c0-38.4-38.4-61.44-71.68-43.52" fill="#FE6998"/></symbol><symbol id="channel-car" viewBox="0 0 1024 1024"><path d="M210.688 588.8h25.6a51.2 51.2 0 0 1 51.2 45.568l14.08 128A51.2 51.2 0 0 1 256 819.2h-30.976a51.2 51.2 0 0 1-51.2-45.568l-14.08-128A51.2 51.2 0 0 1 204.8 588.8zm577.536 0h25.6a51.2 51.2 0 0 1 51.2 51.2 41.984 41.984 0 0 1 0 5.632l-14.08 128a51.2 51.2 0 0 1-51.2 45.568h-25.6a51.2 51.2 0 0 1-51.2-51.2 41.984 41.984 0 0 1 0-5.632l14.08-128a51.2 51.2 0 0 1 51.2-45.568zm118.272-195.84a38.656 38.656 0 0 1-25.6 48.128l-25.6 7.424a38.4 38.4 0 0 1-22.528-73.472l25.6-7.424a38.144 38.144 0 0 1 48.128 25.344zm-691.2 29.952a38.4 38.4 0 0 1-47.872 25.6l-25.6-7.424a38.656 38.656 0 0 1-25.6-48.128 38.144 38.144 0 0 1 47.872-25.6l25.6 7.424a38.4 38.4 0 0 1 25.6 48.128z" fill="#23ADE5"/><path d="M292.608 201.216A1109.76 1109.76 0 0 1 512 179.2a1165.568 1165.568 0 0 1 224 22.016 51.2 51.2 0 0 1 38.144 32L870.4 486.4v230.4a25.6 25.6 0 0 1-25.6 25.6H179.2a25.6 25.6 0 0 1-25.6-25.6V486.4L256 232.704a51.2 51.2 0 0 1 36.608-31.488z" fill="#48CFE5"/><path d="M230.4 512h102.4q25.6 0 25.6 25.6v25.6q0 25.6-25.6 25.6H230.4q-25.6 0-25.6-25.6v-25.6q0-25.6 25.6-25.6ZM691.2 512h102.4q25.6 0 25.6 25.6v25.6q0 25.6-25.6 25.6H691.2q-25.6 0-25.6-25.6v-25.6q0-25.6 25.6-25.6Z" fill="#FFF"/><path d="M327.68 270.848A1000.96 1000.96 0 0 1 499.712 256a1429.248 1429.248 0 0 1 196.864 15.36 25.6 25.6 0 0 1 20.992 18.176l39.68 134.656a25.6 25.6 0 0 1-17.408 31.744 24.064 24.064 0 0 1-9.472 0q-125.184-12.032-230.4-12.032a1894.4 1894.4 0 0 0-204.8 11.264 25.6 25.6 0 0 1-28.16-22.784 25.6 25.6 0 0 1 0-9.984L307.2 288.768a25.6 25.6 0 0 1 20.48-17.92z" fill="#FDDE80"/><path d="M614.4 358.4a102.4 102.4 0 0 0-100.864 86.784h51.2a51.2 51.2 0 0 1 99.072 5.12l51.2 4.352A102.4 102.4 0 0 0 614.4 358.4z" fill="#23ADE5"/></symbol><symbol id="channel-cinema" viewBox="0 0 1024 1024"><path d="M682.24 716.8c34.56 0 71.936-2.56 106.496 0 61.184 0 74.752 39.936 76.8 93.184a32 32 0 0 0 64 0c0-71.936-25.6-143.872-106.752-157.184a807.168 807.168 0 0 0-138.496 0 32 32 0 0 0-2.56 64" fill="#FB813A"/><path d="M860.672 489.472A354.304 354.304 0 1 0 506.368 844.8a358.4 358.4 0 0 0 354.304-355.328" fill="#FB813A"/><path d="M695.552 566.528a79.872 79.872 0 1 1 79.872-80.128 79.872 79.872 0 0 1-79.872 79.872M508.928 384a79.872 79.872 0 0 1-79.872-79.872 80.128 80.128 0 0 1 160 0A80.128 80.128 0 0 1 508.928 384m0 372.992a79.872 79.872 0 0 1-79.872-79.872 81.92 81.92 0 0 1 79.872-79.872A80.128 80.128 0 0 1 588.8 675.84a78.592 78.592 0 0 1-80.128 79.872M322.56 566.528a79.872 79.872 0 1 1 79.872-80.128 79.872 79.872 0 0 1-79.872 79.872M512 128a372.992 372.992 0 1 0 372.736 371.968A374.016 374.016 0 0 0 512 128" fill="#FFBA7B"/><path d="M567.552 489.472a58.624 58.624 0 1 0-58.624 58.624 59.136 59.136 0 0 0 58.624-58.624" fill="#FB952C"/></symbol><symbol id="channel-cinephile" viewBox="0 0 1024 1024"><path d="M226.816 201.728h571.136q79.616 0 79.616 79.616v458.24q0 79.616-79.616 79.616H226.816q-79.616 0-79.616-79.616v-458.24q0-79.616 79.616-79.616Z" fill="#9796ED"/><path d="M222.976 269.312h77.056v57.856h-77.056zm167.168 0H467.2v57.856h-77.056zm167.168 0h77.056v57.856h-77.056zm167.168 0h77.056v57.856H724.48zM222.976 693.76h77.056v57.856h-77.056zm167.168 0H467.2v57.856h-77.056zm167.168 0h77.056v57.856h-77.056zM147.2 375.296h730.368v270.08H147.2z" fill="#7B78EA"/><path d="m544.721 506.356 2.535-2.535q23.351-23.351 46.703 0l199.664 199.665q23.351 23.351 0 46.703l-2.534 2.534q-23.352 23.351-46.703 0L544.72 553.059q-23.351-23.352 0-46.703Z" fill="#FFD043"/><path d="M708.352 418.816h-25.6v-24.32a13.568 13.568 0 0 0-13.568-13.568H665.6a13.312 13.312 0 0 0-13.312 13.568v24.32h-25.6a13.568 13.568 0 0 0-13.568 13.568v5.632a13.568 13.568 0 0 0 13.568 13.568h25.6v24.32a13.312 13.312 0 0 0 13.312 13.568h5.632a13.568 13.568 0 0 0 13.568-13.568v-24.32h25.6a13.312 13.312 0 0 0 13.312-13.568v-5.632a13.312 13.312 0 0 0-15.36-13.568zm-190.464 0h-25.6v-24.32a13.312 13.312 0 0 0-13.312-13.568h-5.632a13.568 13.568 0 0 0-13.568 13.568v24.32H435.2a13.312 13.312 0 0 0-13.312 13.568v5.632a13.312 13.312 0 0 0 13.312 13.568h25.6v24.32a13.568 13.568 0 0 0 13.568 13.568H480a13.312 13.312 0 0 0 13.312-13.568v-24.32h25.6a13.312 13.312 0 0 0 13.312-13.568v-5.632a13.312 13.312 0 0 0-14.336-13.568zm-24.32 153.344h-18.432v-18.432a10.24 10.24 0 0 0-10.24-10.24H460.8a10.24 10.24 0 0 0-10.24 10.24v18.432h-18.432a10.24 10.24 0 0 0-10.24 10.24v4.352a10.24 10.24 0 0 0 10.24 10.24h18.432V614.4a10.24 10.24 0 0 0 10.24 10.24h4.352a10.24 10.24 0 0 0 10.24-10.24v-18.432h18.432a10.24 10.24 0 0 0 10.24-10.24v-4.352a10.24 10.24 0 0 0-10.496-9.216z" fill="#FFD778"/></symbol><symbol id="channel-comic" viewBox="0 0 1024 1024"><path d="M722.204 843.492h-551.68a70.144 70.144 0 0 1-69.973-69.917V400.896a70.144 70.144 0 0 1 69.973-69.945h551.68a70.144 70.144 0 0 1 69.917 69.973v372.623a70.144 70.144 0 0 1-69.917 69.945" fill="#FDDE80"/><path d="M710.315 341.703c22.613-7.339 38.2-29.099 36.067-52.793a143.616 143.616 0 0 0-6.542-32.142C700.36 135.14 510.72 87.723 316.274 150.869 121.799 214.016-3.783 363.804 35.698 485.461c3.413 10.525 7.993 20.452 13.596 29.81 12.231 20.423 37.604 28.871 60.217 21.533l600.804-195.1z" fill="#9796ED"/><path d="m281.031 123.676 11.236 34.617c4.977 15.332 21.617 23.78 36.92 18.802 15.332-4.978 23.809-21.59 18.83-36.92l-11.235-34.59a29.383 29.383 0 0 0-36.92-18.801c-15.36 4.95-23.809 21.59-18.83 36.892" fill="#7B78EB"/><path d="M444.16 714.07a139.748 139.748 0 0 0 138.297-119.553 17.493 17.493 0 0 0-17.124-20.195H322.987a17.493 17.493 0 0 0-17.124 20.195A139.776 139.776 0 0 0 444.16 714.07" fill="#FFAF66"/><path d="m704.796 680.903-85.845-40.619s12.288 55.752 71.396 92.672c-.086.74-.285 1.423-.37 2.19-12.715 94.55 38.2 179.4 113.692 189.554 75.492 10.127 146.973-58.31 159.687-152.86 12.687-94.52-38.2-179.4-113.72-189.525-60.018-8.079-117.42 33.65-144.84 98.588z" fill="#9796ED"/><path d="m856.064 682.012-19.797 99.158a6.57 6.57 0 0 1-6.457 5.29h-17.778a6.6 6.6 0 0 1-6.542-7.537l14.478-99.13a6.542 6.542 0 0 1 6.485-5.66h23.154c4.181 0 7.282 3.812 6.457 7.88M833.166 818.09l-2.986 16.298a6.57 6.57 0 0 1-6.457 5.405h-20.964a6.6 6.6 0 0 1-6.485-7.652l2.645-16.27a6.6 6.6 0 0 1 6.485-5.547h21.277c4.124 0 7.253 3.727 6.485 7.766" fill="#C5C2FF"/></symbol><symbol id="channel-competition" viewBox="0 0 1024 1024"><defs><style>@font-face{font-family:element-icons;src:url(chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff) format(&quot;woff&quot;),url(&quot;chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf &quot;) format(&quot;truetype&quot;)}</style></defs><path d="M545.03 736.563v68.01h108.108a23.997 23.997 0 0 1 24.002 23.997v17.833a23.997 23.997 0 0 1-24.002 23.997h-282.27a23.997 23.997 0 0 1-24.003-24.003V828.57a23.997 23.997 0 0 1 24.002-23.998h108.109v-68.014c-57.334-7.639-108.467-34.888-146.432-74.783-103.526-30.924-171.49-125.808-202.27-278.917-12.545-62.382 28.042-123.085 90.639-135.588a115.978 115.978 0 0 1 22.707-2.242h20.68V227.2a48 48 0 0 1 48-48h399.41a48 48 0 0 1 48 48v17.828h20.67c7.629 0 15.232.752 22.707 2.242 62.597 12.498 103.179 73.206 90.64 135.588-30.777 153.104-98.74 247.987-202.26 278.917-37.97 39.895-89.104 67.144-146.433 74.783zM270.34 545.653a248.545 248.545 0 0 1-6.041-54.614V310.856h-20.685c-3.262 0-6.523.322-9.728.962-26.83 5.356-44.222 31.37-38.846 58.112 15.78 78.49 40.755 136.643 75.295 175.719zm489.37-234.797v180.183c0 18.76-2.09 37.038-6.042 54.605 34.535-39.076 59.51-97.234 75.29-175.719 5.376-26.737-12.017-52.751-38.846-58.107a49.705 49.705 0 0 0-9.728-.962h-20.674z" fill="#FFD778"/><path d="m512 487.639-59.791 31.217a12.8 12.8 0 0 1-18.535-13.527l11.392-65.982-48.19-46.653a12.8 12.8 0 0 1 7.077-21.863l66.683-9.625 29.9-60.176a12.8 12.8 0 0 1 22.928 0l29.9 60.176 66.683 9.625a12.8 12.8 0 0 1 7.076 21.863l-48.19 46.653 11.393 65.982a12.8 12.8 0 0 1-18.535 13.527L512 487.639z" fill="#FB813A"/></symbol><symbol id="channel-dance" viewBox="0 0 1024 1024"><path d="M956.672 513.792a476.416 476.416 0 0 0-890.368 0L512 727.296l-95.232 45.568a117.76 117.76 0 0 0 192.256 0L512 727.04z" fill="#FC6B8A"/><path d="m512 727.296 208.64-99.84a222.976 222.976 0 0 0-416.768 0z" fill="#FFF"/><path d="m405.453 751.54 541.184-258.586 14.029 29.312-541.184 258.61z" fill="#FF5C7A"/><path d="m666.624 545.792-18.688-15.36-112.64 135.424L575.488 492.8l-23.552-5.632-40.192 172.544-40.448-172.544-23.808 5.632 40.704 173.056-112.896-135.424-18.688 15.36 111.616 134.144-391.68-186.88L62.72 522.24 603.904 780.8l14.08-29.44-87.552-41.728 136.192-163.84z" fill="#F14767"/></symbol><symbol id="channel-danjiyouxi" viewBox="0 0 1024 1024"><path d="M512 153.6h-.026q50.458 0 50.458 50.458v100.864q0 50.457-50.458 50.457H512q-50.458 0-50.458-50.457V204.058q0-50.458 50.458-50.458Z" fill="#FB952C"/><path d="M637.056 254.49H386.944C219.187 254.49 83.2 390.477 83.2 558.234c0 167.73 135.987 303.718 303.744 303.718h250.112c167.757 0 303.744-135.987 303.744-303.718 0-167.757-135.987-303.744-303.744-303.744z" fill="#FFF"/><path d="M637.056 254.49H386.944C219.187 254.49 83.2 390.477 83.2 558.234c0 167.73 135.987 303.718 303.744 303.718h250.112c167.757 0 303.744-135.987 303.744-303.718 0-167.757-135.987-303.744-303.744-303.744zM404.787 611.84h-35.712v35.712a35.738 35.738 0 0 1-71.475 0V611.84h-35.738a35.738 35.738 0 0 1 0-71.475H297.6v-35.738a35.738 35.738 0 0 1 71.475 0v35.738h35.738a35.738 35.738 0 0 1 0 71.475zm285.901 71.424a107.213 107.213 0 1 1 0-214.4 107.213 107.213 0 0 1 0 214.4z" fill="#F55E55"/><path d="M639.923 576.102a53.606 53.606 0 1 0 107.213 0 53.606 53.606 0 0 0-107.213 0z" fill="#FB952C"/></symbol><symbol id="channel-digital" viewBox="0 0 1024 1024"><path d="m298.496 284.928 17.664-51.2a36.608 36.608 0 0 1 33.28-22.016h325.376a37.12 37.12 0 0 1 34.304 22.016l17.408 51.2h88.576a69.376 69.376 0 0 1 66.56 70.656v377.344a69.12 69.12 0 0 1-67.84 70.144H209.92a69.12 69.12 0 0 1-68.352-70.144V355.584a69.376 69.376 0 0 1 68.352-70.656z" fill="#FFBA7B"/><path d="M141.568 457.728h740.096v271.36a69.632 69.632 0 0 1-73.728 73.984H210.688a69.12 69.12 0 0 1-69.12-69.376z" fill="#FB952C"/><path d="M512 358.4a197.376 197.376 0 1 1-197.376 197.376A197.632 197.632 0 0 1 512 358.4z" fill="#FB952C"/><path d="M512 409.6a148.224 148.224 0 1 1-147.968 147.968A147.968 147.968 0 0 1 512 409.6z" fill="#FFF"/><path d="M512 457.728a98.816 98.816 0 1 1-98.56 98.56 98.56 98.56 0 0 1 98.56-98.56z" fill="#FB952C"/><path d="M733.696 358.4h73.984a25.6 25.6 0 0 1 25.6 25.6 25.6 25.6 0 0 1-25.6 25.6h-73.984a25.6 25.6 0 0 1-25.6-25.6 25.6 25.6 0 0 1 25.6-25.6z" fill="#FFF"/></symbol><symbol id="channel-documentary" viewBox="0 0 1024 1024"><path d="M404.9 386.765c-70.897-2.565-143.347 12.06-196.65 38.182-48.848 23.963-117.63 89.46-121.928 135.563h735.323c-3.217 0-12.015-9.428-14.738-11.52-5.017-3.825-9.742-7.808-14.76-11.543-11.902-8.91-24.66-16.897-37.147-24.975a1040.175 1040.175 0 0 0-77.063-45.585c-52.47-27.945-107.865-50.805-165.69-65.002a533.88 533.88 0 0 0-107.347-15.12" fill="#47CFE5"/><path d="M744.605 489.163c-12.713 32.31-136.71 36.765-181.395 36.765H137.802c-15.232 0-29.767 5.197-39.757 14.265-9.9 8.977-14.107 20.767-11.7 32.355 0 .112 0 .27.09.337 9.293 43.672 35.73 83.34 76.365 114.683 1.62 1.26 3.263 2.52 4.928 3.735 106.74 78.457 292.522 81.157 423.45 43.875 41.445-11.79 80.865-28.17 115.177-49.635 38.992-24.39 78.795-57.308 102.308-91.733 3.465-5.062 41.22-61.177 41.962-60.885l-106.02-43.762z" fill="#47CFE5"/><path d="m918.058 505.317-29.88-17.077a75.082 75.082 0 0 0-70.11-2.138 75.375 75.375 0 0 0-37.418-59.354l-29.925-17.078a11.453 11.453 0 0 0-15.66 4.275l-7.83 13.703a59.063 59.063 0 0 0 21.96 80.572l15.795 9.045a.045.045 0 0 1-.045.045l51.48 29.43.045-.045 17.46 9.99a59.085 59.085 0 0 0 80.573-21.938l7.83-13.725a11.543 11.543 0 0 0-4.275-15.705" fill="#2BBAE4"/><path d="M654.515 712.497C351.327 720.867 266.3 564.425 266.3 564.425H85.782a31.995 31.995 0 0 0 .63 8.46c9.293 43.672 35.73 83.34 76.365 114.683 1.62 1.282 3.263 2.52 4.928 3.735 106.717 78.457 292.5 81.18 423.428 43.875a509.692 509.692 0 0 0 63.382-22.68" fill="#E5E6E6"/><path d="M654.515 712.497c-65.16 1.8-120.15-4.41-166.567-14.242-49.005-10.373-26.168 59.31-3.218 56.79 37.485-4.072 73.665-10.598 106.403-19.913a502.358 502.358 0 0 0 63.382-22.635" fill="#E4E5E4"/><path d="M407.127 674.923c21.578 69.84 69.705 117.652 116.775 113.647 3.735-.338 6.233-4.072 5.513-7.74L504.98 655.212a5.715 5.715 0 0 0-6.682-4.5l-86.715 16.898a5.782 5.782 0 0 0-4.455 7.313" fill="#47CFE5"/><path d="M441.238 614.712a29.295 29.295 0 1 1-58.613.023 29.295 29.295 0 0 1 58.612-.022" fill="#0099BC"/><path d="M252.597 310.467a64.282 64.282 0 0 1 64.305-64.102c18.81 0 35.73 8.122 47.52 21.127a64.17 64.17 0 0 1 111.713 42.975 16.56 16.56 0 0 1-16.582 16.583 16.56 16.56 0 0 1-16.605-16.583 31.05 31.05 0 0 0-61.988-2.16h-.18l.113 77.468a16.582 16.582 0 1 1-33.188 0v-75.397c0-17.033-13.928-30.938-30.96-30.938a31.05 31.05 0 0 0-31.027 31.027 16.56 16.56 0 1 1-33.12 0" fill="#47CFE5"/><path d="M364.332 408.027a22.253 22.253 0 0 1-22.207-22.23V310.4a25.358 25.358 0 1 0-50.715.09 22.23 22.23 0 0 1-44.415 0c0-38.453 31.365-69.75 69.907-69.75a69.75 69.75 0 0 1 47.52 18.765 70.2 70.2 0 0 1 47.61-18.765c38.453 0 69.75 31.297 69.75 69.75a22.23 22.23 0 0 1-44.437 0 25.425 25.425 0 0 0-50.738-1.778l-.157 2.385.09 74.7a22.253 22.253 0 0 1-22.208 22.23zm-47.542-134.19c20.16 0 36.562 16.403 36.562 36.563v75.42a10.98 10.98 0 1 0 21.915 0l-.09-83.093h.923a36.742 36.742 0 0 1 35.82-28.867c20.205 0 36.653 16.447 36.653 36.652a10.98 10.98 0 0 0 21.937 0c0-32.265-26.235-58.5-58.5-58.5-16.448 0-32.288 7.02-43.447 19.305l-4.163 4.545-4.162-4.612a58.635 58.635 0 0 0-43.336-19.283 58.635 58.635 0 0 0-58.657 58.5 10.957 10.957 0 0 0 21.915 0 36.675 36.675 0 0 1 36.63-36.63z" fill="#47CFE5"/><path d="M389.87 621.283h-66.33a47.79 47.79 0 0 1-35.032-15.593l-23.715-25.695a28.575 28.575 0 0 0-20.88-9.293H91.048a6.525 6.525 0 1 1 0-13.095h152.887c11.453 0 22.567 4.928 30.488 13.523l23.715 25.718c6.66 7.2 15.93 11.34 25.425 11.34h66.33a6.525 6.525 0 1 1-.023 13.095" fill="#0099BC"/></symbol><symbol id="channel-douga" viewBox="0 0 1024 1024"><path d="M273.408 166.912h477.696c58.368 0 105.984 47.616 105.984 105.984v477.696c0 58.368-47.616 105.984-105.984 105.984H273.408c-58.368 0-105.984-47.616-105.984-105.984V273.408c-.512-58.368 47.616-106.496 105.984-106.496z" fill="#7B78EB"/><path d="M512 525.312v98.816c33.28-14.848 72.704.512 87.552 33.792 14.848 33.28-.512 72.704-33.792 87.552-16.896 7.68-35.84 7.68-53.248 0v111.616H273.408c-58.368 0-105.984-47.616-105.984-105.984V512H304.64c-21.504 19.456-24.064 53.248-4.608 74.752 19.456 21.504 53.248 24.064 74.752 4.608 21.504-18.944 24.064-53.248 4.608-74.752L374.784 512H512v-40.96c-4.096.512-9.216.512-13.312 0-51.2 0-86.016-47.616-86.016-105.984s20.992-108.032 86.016-108.032H512v-90.112h238.592c58.368 0 105.984 47.616 105.984 105.984V524.8H735.744c20.992-23.552 19.456-59.392-3.584-80.896-23.552-20.992-59.392-19.456-80.896 3.584-19.968 21.504-19.968 55.296 0 76.8H512z" fill="#9796ED"/><path d="M512 525.312v98.816l13.312-4.096c35.84-7.68 72.704 15.872 79.872 52.224 7.68 35.84-18.432 72.192-54.272 78.848-4.096 1.024-8.704 1.024-13.312 1.024-9.216 0-16.384-3.072-25.088-6.144V857.6h-14.336V724.992l18.432 8.192c27.136 11.776 58.368-.512 70.144-27.648 11.776-27.136-.512-58.368-27.648-70.144-13.312-5.632-28.672-5.632-42.496 0l-18.432 8.192v-117.76h-98.304c14.848 33.28-.512 72.704-33.792 87.552-33.28 14.848-72.704-.512-87.552-33.792-7.68-16.896-7.68-35.84 0-53.248H166.912V512h137.216c-21.504 19.456-24.064 53.248-4.608 74.752 19.456 21.504 53.248 24.064 74.752 4.608 21.504-19.456 24.064-53.248 4.608-74.752L374.272 512H512v-39.936h-13.312c-51.2 0-86.016-47.104-86.016-105.984s20.992-109.568 86.016-109.568H512v-89.6h13.312v105.984h-26.624c-49.664 0-73.216 33.28-73.216 94.208 0 53.248 30.72 92.672 73.216 92.672 3.584.512 7.68.512 11.264 0l15.36-2.048V512h102.912c-13.824-35.84 4.096-76.8 40.448-90.624 35.84-13.824 76.8 4.096 90.624 40.448 6.144 15.872 6.144 33.792 0 50.176h97.792v13.312H736.256c20.992-23.552 19.456-59.392-3.584-80.896-23.552-20.992-59.392-19.456-80.896 3.584-19.968 21.504-19.968 55.296 0 76.8H512z" fill="#6A68C6"/><path d="M444.928 693.248c-23.04 13.312-52.224 5.12-65.024-17.408-4.096-7.68-6.144-15.36-6.144-24.064V392.192c0-26.624 20.992-47.616 47.616-47.616 8.704 0 16.896 2.048 24.576 6.656L667.648 483.84c23.04 13.312 30.208 42.496 16.896 65.024-4.096 6.656-10.24 12.8-16.896 16.896" fill="#FDDE80"/></symbol><symbol id="channel-ent" viewBox="0 0 1024 1024"><path d="m570.647 415.186 30.592 30.592q36.204 36.204 0 72.408l-360.59 360.59q-36.204 36.204-72.408 0l-30.593-30.592q-36.203-36.204 0-72.407l360.59-360.591q36.205-36.204 72.409 0Z" fill="#FF8693"/><path d="m369.92 543.744 137.472-137.472a38.912 38.912 0 0 1 54.528 0l48.384 48.64a38.4 38.4 0 0 1 0 54.528L472.32 647.424z" fill="#FC6376"/><path d="m298.989 643.872 72.601 72.576q12.855 12.85.004 25.705l-1.628 1.63q-12.85 12.854-25.705.004l-72.602-72.576q-12.854-12.85-.004-25.705l1.629-1.63q12.85-12.854 25.705-.004Z" fill="#FFA9B1"/><path d="M737.024 547.584a99.328 99.328 0 0 1 62.72-62.72l51.2-13.568A27.136 27.136 0 0 0 864 421.632L826.624 384a98.816 98.816 0 0 1-22.784-85.76l16.896-63.232c7.168-27.136-8.96-43.52-36.096-36.096l-63.232 16.896a98.816 98.816 0 0 1-85.76-23.04l-37.376-36.864a27.136 27.136 0 0 0-49.408 13.312l-13.824 51.2a97.792 97.792 0 0 1-62.464 62.72l-51.2 13.824a27.136 27.136 0 0 0-13.312 49.408L445.44 384a97.536 97.536 0 0 1 23.04 85.504l-16.896 63.232c-7.424 27.392 8.96 43.52 36.096 36.352l63.232-16.896a97.792 97.792 0 0 1 85.76 22.784l37.376 37.376a26.88 26.88 0 0 0 49.408-13.312z" fill="#FDDE80"/><path d="m886.272 417.536-74.752-75.008 30.464-114.432a41.216 41.216 0 0 0-8.704-41.472 41.728 41.728 0 0 0-41.472-7.424l-114.432 30.72-74.752-76.032a41.728 41.728 0 0 0-39.424-13.312 41.216 41.216 0 0 0-28.416 31.488l-27.392 102.4L404.48 281.6a42.24 42.24 0 0 0-31.744 28.16 42.24 42.24 0 0 0 13.312 40.448l74.752 75.008-30.72 114.432a41.728 41.728 0 0 0 8.96 41.472 37.888 37.888 0 0 0 27.392 10.752 56.832 56.832 0 0 0 14.08-2.048l114.432-30.72 74.752 75.008a45.824 45.824 0 0 0 31.232 14.336 34.304 34.304 0 0 0 8.96 0 41.216 41.216 0 0 0 28.416-31.488l27.392-102.4 102.4-27.392a41.984 41.984 0 0 0 31.488-28.416 40.96 40.96 0 0 0-13.312-41.216zm-84.736-203.52h5.12a16.896 16.896 0 0 1 0 5.12l-25.6 93.696-72.96-73.728zm-32 139.776-34.56 128-128 34.56-102.4-102.4 34.56-128 128-34.56zm-199.424-192c0-2.56 1.792-4.096 1.792-4.608a9.984 9.984 0 0 1 4.096 3.072l59.648 59.648-87.296 23.296zM412.416 323.84 409.6 320a12.8 12.8 0 0 1 4.864-2.048l81.152-21.76L472.064 384zm58.368 230.4a18.944 18.944 0 0 1-5.12 0 17.92 17.92 0 0 1 0-5.12l25.6-93.696L563.2 528.64zm230.4 51.2c0 2.816-1.536 4.096-1.536 4.864a20.992 20.992 0 0 1-4.352-3.328l-59.392-59.392 87.296-23.552zm156.16-156.16-81.152 21.76L799.488 384l59.392 59.392a40.96 40.96 0 0 1 3.328 3.84 12.8 12.8 0 0 1-4.096 2.56z" fill="#FCC029"/></symbol><symbol id="channel-fashion" viewBox="0 0 1024 1024"><path d="M691.2 204.8a44.032 44.032 0 0 1 29.952 34.048 117.76 117.76 0 0 1-13.056 76.8s-19.2 29.952-24.32 39.936a235.008 235.008 0 0 0-25.6 107.008v40.704H365.312v-39.424a235.008 235.008 0 0 0-25.6-107.008c-5.12-9.984-24.32-39.936-24.32-39.936a117.76 117.76 0 0 1-13.056-76.8 44.544 44.544 0 0 1 34.56-35.328v-57.088a29.952 29.952 0 0 1 27.136-31.744 29.952 29.952 0 0 1 27.648 31.744v73.728A237.056 237.056 0 0 0 512 253.952a241.408 241.408 0 0 0 125.184-35.072v-71.168a27.136 27.136 0 1 1 53.76 0z" fill="#FF6A9B"/><path d="M658.432 487.936h-293.12L204.8 780.288a36.352 36.352 0 0 0 10.24 46.592 492.288 492.288 0 0 0 595.456 0 36.608 36.608 0 0 0 8.704-47.36z" fill="#FF9DC6"/><path d="M409.6 537.6a9.984 9.984 0 0 0-13.568 4.608l-124.16 250.624a10.496 10.496 0 0 0 4.608 13.568 14.848 14.848 0 0 0 4.608 0 9.984 9.984 0 0 0 8.96-5.632l124.16-250.88A10.24 10.24 0 0 0 409.6 537.6zm46.336 105.472a9.984 9.984 0 0 0-12.032 7.424l-40.448 170.752a10.24 10.24 0 0 0 7.424 12.288h2.304a9.728 9.728 0 0 0 9.728-7.936l40.448-170.752a9.984 9.984 0 0 0-7.424-11.776zm294.912 148.736-124.16-250.624A9.984 9.984 0 0 0 614.4 537.6a10.24 10.24 0 0 0-4.608 13.312l124.16 250.88a9.984 9.984 0 0 0 8.96 5.632 14.848 14.848 0 0 0 4.608 0 10.496 10.496 0 0 0 3.328-15.616zM579.84 650.496a9.984 9.984 0 0 0-19.456 4.608l40.448 170.752a9.728 9.728 0 0 0 9.728 7.936h2.304a10.24 10.24 0 0 0 7.424-12.288z" fill="#FF6A9B"/></symbol><symbol id="channel-food" viewBox="0 0 1024 1024"><path d="M116.78099999999999 503.883a75.294 75.294 0 1 0 150.588 0 75.294 75.294 0 1 0-150.588 0ZM267.36899999999997 411.211a75.294 75.294 0 1 0 150.589 0 75.294 75.294 0 1 0-150.589 0Z" fill="#FA942D"/><path d="M209.453 480.723a75.294 75.294 0 1 0 150.588 0 75.294 75.294 0 1 0-150.588 0Z" fill="#FE5D79"/><path d="M638.042 532.841a127.428 127.428 0 1 0 254.856 0 127.428 127.428 0 1 0-254.856 0Z" fill="#FA942D"/><path d="M499.05 457.547a133.21 133.21 0 1 0 266.42 0 133.21 133.21 0 1 0-266.42 0Z" fill="#FA942D"/><path d="M522.21 556.017a150.588 150.588 0 1 0 301.176 0 150.588 150.588 0 1 0-301.176 0Z" fill="#FE5D79"/><path d="M932.292 474.925a28.762 28.762 0 0 1 28.747 28.763l-.045 1.355-.09 1.355c-14.306 150.92-130.606 272.866-280.742 299.189l20.179 80.745a23.16 23.16 0 0 1-22.468 28.778H343.37a23.16 23.16 0 0 1-22.467-28.778l20.178-80.745C192.813 779.595 77.552 660.329 60.928 512.015l-.557-5.376a28.958 28.958 0 0 1 28.822-31.714h843.084z" fill="#FDDC7A"/><path d="M442.549 196.924h136.147c21.263 0 39.8 14.457 44.95 35.087l60.732 242.914H336.866l60.732-242.899a46.336 46.336 0 0 1 44.95-35.102z" fill="#F6C338"/><path d="M688.038 192.904c9.442-30.178 28.386-29.41 34.68-47.586 7.063-20.45 9.367-45.719 6.927-75.822 16.851 17.936 25.977 37.015 30.946 62.284 4.894 24.937-9.126 44.182-29.063 74.48-19.923 30.314-8.81 67.615 0 94.916-16.851-17.92-59.904-55.777-43.475-108.272zm-404.676-38.656c11.324-37.708 34.063-36.774 41.607-59.483C333.463 69.21 336.233 37.632 333.282 0c20.239 22.408 31.202 46.26 37.165 77.854 5.873 31.172-10.948 55.22-34.876 93.109-23.944 37.873-10.602 84.48 0 118.633-20.24-22.422-71.936-69.722-52.21-135.348z" fill="#C6D2E1"/><path d="M510.63 706.605a92.672 92.672 0 0 1 92.672 92.672V915.11H417.958V799.277a92.672 92.672 0 0 1 92.672-92.672z" fill="#F5BC20"/></symbol><symbol id="channel-game" viewBox="0 0 1024 1024"><path d="M256.512 166.144h510.976q90.112 0 90.112 90.112v510.976q0 90.112-90.112 90.112H256.512q-90.112 0-90.112-90.112V256.256q0-90.112 90.112-90.112Z" fill="#58D598"/><path d="M307.2 325.632h136.448V462.08H307.2zm272.896 0h136.448V462.08H580.096zM443.648 462.336v75.776h-64.256v204.544h59.392V674.56h146.432v68.096h59.136V538.112h-64.256v-75.776H443.648z" fill="#17AD8A"/></symbol><symbol id="channel-gaoxiao" viewBox="0 0 1024 1024"><path d="M512 131.282c-210.288 0-380.718 170.43-380.718 380.718S301.712 892.718 512 892.718 892.718 722.288 892.718 512c0-209.841-170.43-380.718-380.718-380.718zm0 675.998c-132.359 0-239.511-102.715-239.511-229.744 0-110.697 107.126-42.64 239.511-42.64 132.359 0 239.511-65.825 239.511 42.614C751.065 704.118 643.912 807.253 512 807.253z" fill="#FFD46A"/><path d="M512 807.28c-132.359 0-239.511-102.715-239.511-229.744 0-110.697 107.126-42.64 239.511-42.64 132.359 0 239.511-65.825 239.511 42.614C751.065 704.118 643.912 807.253 512 807.253z" fill="#FFF"/><path d="M511.79 667.097c-61.571 0-112.955 30.877-126.687 72.651a220.554 220.554 0 0 0 253.794 0C624.3 698 572.915 667.097 511.79 667.097zM280.839 304.102a26.256 26.256 0 0 1 32.111-13.654l2.862 1.13 127.344 60.205a26.256 26.256 0 0 1 3.36 45.608l-2.966 1.706-122.224 60.206a26.256 26.256 0 0 1-25.863-45.607l2.652-1.497 73.44-36.207-78.192-36.943a26.256 26.256 0 0 1-13.653-32.112l1.129-2.835zm463.662 0a26.256 26.256 0 0 0-32.112-13.654l-2.836 1.13-127.37 60.205a26.256 26.256 0 0 0-3.334 45.608l2.94 1.706 122.224 60.206a26.256 26.256 0 0 0 25.889-45.607l-2.678-1.497-73.413-36.207 78.191-36.943a26.256 26.256 0 0 0 13.654-32.112l-1.155-2.835z" fill="#FD621D"/></symbol><symbol id="channel-gongkaike" fill="none" viewBox="0 0 40 40"><rect width="14" height="3" rx="1.5" transform="matrix(-.17365 .9848 -.98266 -.18541 17.38 20)" fill="#FFD778"/><rect width="14" height="3" rx="1.5" transform="matrix(-.17365 -.9848 .98681 -.16186 26.425 33.752)" fill="#FFD778"/><rect x="7" y="6" width="26.654" height="20.042" rx="2" fill="#7B78EA"/><rect x="4" y="23.815" width="32" height="3" rx="1.5" fill="#FFD778"/><path fill-rule="evenodd" clip-rule="evenodd" d="m24.638 15.197-5.43 3.671a.753.753 0 0 1-.59.113.756.756 0 0 1-.279-.13.8.8 0 0 1-.21-.235.82.82 0 0 1-.129-.442v-7.35a.854.854 0 0 1 .233-.583.767.767 0 0 1 .555-.24.715.715 0 0 1 .42.129l5.43 3.67a.832.832 0 0 1 .344.521.87.87 0 0 1-.105.624.79.79 0 0 1-.239.252Z" fill="#FFD778"/></symbol><symbol id="channel-guochandonghuatuijian" viewBox="0 0 1024 1024"><path d="M873.472 321.792c-46.08-46.592-102.4-73.472-161.536-40.192a177.152 177.152 0 0 0-51.2-161.536s-83.456 107.52-15.104 219.648c-12.288 13.568-24.32 27.136-36.352 39.424-26.88 27.136 14.592 69.12 41.216 41.984l68.608-69.632c40.704-40.96 76.8-23.808 112.896 12.288 26.624 26.88 68.096-15.104 41.472-41.984z" fill="#58D598"/><path d="M705.024 344.576a189.696 189.696 0 0 0-270.848 0 195.072 195.072 0 0 0-41.216 62.464 249.088 249.088 0 0 0-177.664 74.496 256 256 0 0 0 0 359.68 248.576 248.576 0 0 0 354.816 0 256 256 0 0 0 73.472-179.2 190.976 190.976 0 0 0 61.44-41.728 195.84 195.84 0 0 0 0-275.712z" fill="#FF5C7A"/><path d="M514.304 808.704a187.136 187.136 0 0 1-267.264-5.12 193.536 193.536 0 0 1 5.12-271.104s-45.056 120.832 43.776 214.272a210.176 210.176 0 0 0 218.368 61.952" fill="#F14767"/></symbol><symbol id="channel-guochuang" viewBox="0 0 1024 1024"><path d="M873.472 321.792c-46.08-46.592-102.4-73.472-161.536-40.192a177.152 177.152 0 0 0-51.2-161.536s-83.456 107.52-15.104 219.648c-12.288 13.568-24.32 27.136-36.352 39.424-26.88 27.136 14.592 69.12 41.216 41.984l68.608-69.632c40.704-40.96 76.8-23.808 112.896 12.288 26.624 26.88 68.096-15.104 41.472-41.984z" fill="#58D598"/><path d="M705.024 344.576a189.696 189.696 0 0 0-270.848 0 195.072 195.072 0 0 0-41.216 62.464 249.088 249.088 0 0 0-177.664 74.496 256 256 0 0 0 0 359.68 248.576 248.576 0 0 0 354.816 0 256 256 0 0 0 73.472-179.2 190.976 190.976 0 0 0 61.44-41.728 195.84 195.84 0 0 0 0-275.712z" fill="#FF5C7A"/><path d="M514.304 808.704a187.136 187.136 0 0 1-267.264-5.12 193.536 193.536 0 0 1 5.12-271.104s-45.056 120.832 43.776 214.272a210.176 210.176 0 0 0 218.368 61.952" fill="#F14767"/></symbol><symbol id="channel-information" viewBox="0 0 1024 1024"><path d="M760.686 768a21.943 21.943 0 0 0 19.836 21.84l2.107.103a21.943 21.943 0 0 0 21.84-19.836l.102-2.107V321.829h29.258a58.514 58.514 0 0 1 58.514 58.514V819.2a58.514 58.514 0 0 1-58.514 58.514H190.17a58.514 58.514 0 0 1-58.514-58.514V204.8a58.514 58.514 0 0 1 58.514-58.514h512a58.514 58.514 0 0 1 58.515 58.514V768z" fill="#7DD3E0"/><path d="M248.686 234.057h394.971q29.257 0 29.257 29.257V526.63q0 29.257-29.257 29.257H248.686q-29.257 0-29.257-29.257V263.314q0-29.257 29.257-29.257Z" fill="#3DA9D3"/><path d="m404.773 300.515 129.462 80.925a15.945 15.945 0 0 1 0 27.063l-129.462 80.925a15.945 15.945 0 0 1-24.43-13.531v-161.85a15.945 15.945 0 0 1 24.43-13.532z" fill="#FFD469"/><path d="M248.686 614.4h394.971q29.257 0 29.257 29.257t-29.257 29.257H248.686q-29.257 0-29.257-29.257t29.257-29.257ZM248.686 731.429h219.428q29.257 0 29.257 29.257t-29.257 29.257H248.686q-29.257 0-29.257-29.257t29.257-29.257Z" fill="#3DA9D3"/></symbol><symbol id="channel-kichiku" viewBox="0 0 1024 1024"><path d="M918.784 510.208a187.904 187.904 0 0 0-88.832-159.488 156.416 156.416 0 0 0 1.792-22.016A150.784 150.784 0 0 0 620.8 190.208a151.04 151.04 0 0 0-216.32 0 150.784 150.784 0 0 0-210.944 138.496 156.416 156.416 0 0 0 1.792 22.016 187.648 187.648 0 0 0-13.824 309.504v1.536a215.296 215.296 0 0 0 332.8 179.2 215.04 215.04 0 0 0 332.8-179.2v-2.56a187.904 187.904 0 0 0 71.68-148.992z" fill="#FC6B8A"/><path d="M680.704 479.744A150.528 150.528 0 0 1 572.672 435.2a150.016 150.016 0 0 1-120.064 0 150.528 150.528 0 0 1-108.032 45.824h-11.264v167.168A166.4 166.4 0 0 0 499.2 814.08h33.536a166.4 166.4 0 0 0 165.888-165.888V478.464a137.216 137.216 0 0 1-17.92 1.28z" fill="#FFF"/><path d="M476.928 651.264a33.536 33.536 0 1 0 67.072 0 33.536 33.536 0 1 0-67.072 0Z" fill="#E2006C"/><path d="M635.904 554.496H614.4v-21.504a12.032 12.032 0 0 0-11.776-11.776h-4.864a12.032 12.032 0 0 0-11.776 11.776v21.504h-21.248a11.776 11.776 0 0 0-11.776 11.52v5.12a11.776 11.776 0 0 0 11.776 11.52h21.248v21.504a12.032 12.032 0 0 0 11.776 11.776h4.864A12.032 12.032 0 0 0 614.4 604.16v-21.504h21.248a11.776 11.776 0 0 0 11.776-11.52v-5.12a11.776 11.776 0 0 0-11.52-11.52zm-179.968 0H435.2v-21.504a12.032 12.032 0 0 0-11.776-11.776h-4.864a12.032 12.032 0 0 0-11.776 11.776v21.504H384a11.776 11.776 0 0 0-11.776 11.52v5.12A11.776 11.776 0 0 0 384 582.656h21.248v21.504a12.032 12.032 0 0 0 11.776 11.776h4.864A12.032 12.032 0 0 0 435.2 604.16v-21.504h21.248a11.52 11.52 0 0 0 11.776-11.52v-5.12a11.52 11.52 0 0 0-12.288-11.52z" fill="#FF5C7A"/><path d="M600.32 651.008a12.288 12.288 0 0 0-12.288 12.544c0 34.048-34.816 61.696-76.8 61.696s-76.8-27.648-76.8-61.696a12.544 12.544 0 1 0-25.6 0c0 47.616 45.824 86.528 102.4 86.528s102.4-38.912 102.4-86.528a12.544 12.544 0 0 0-13.312-12.544z" fill="#EB53A8"/></symbol><symbol id="channel-knowledge" viewBox="0 0 1024 1024"><path d="M492.27 147.73A255.343 255.343 0 0 1 627.2 620.261v51.2a37.547 37.547 0 0 1-25.6 34.134H379.733a44.655 44.655 0 0 1-25.6-34.134v-51.2A256.649 256.649 0 0 1 492.271 147.73z" fill="#FFA200"/><path d="M550.4 534.93v-76.8h51.2c46.61 0 51.2-26.787 51.2-42.668v-128c0-23.116-17.203-42.666-51.2-42.666H388.267c-42.104 0-59.734 21.111-59.734 42.666v76.8h102.4v-68.266H550.4v119.466h-51.2c-60.501-.563-76.8 24.406-76.8 42.667v76.8h128zm-62.669 24.532a59.733 59.733 0 1 1-59.733 59.734 59.733 59.733 0 0 1 59.733-59.734z" fill="#FFF0D3"/><path d="M354.133 739.738H627.2v8.533a128 128 0 0 1-128 128h-17.067a128 128 0 0 1-128-128v-8.533z" fill="#5FB5EC"/><path d="M746.667 210.662h119.466a17.067 17.067 0 0 1 0 34.134H746.667a17.067 17.067 0 0 1 0-34.134zM806.4 150.93a17.067 17.067 0 0 1 17.067 17.067v119.466a17.067 17.067 0 0 1-34.134 0V167.996a17.067 17.067 0 0 1 17.067-17.067zM157.867 662.93h119.466a17.067 17.067 0 0 1 0 34.132H157.867a17.067 17.067 0 0 1 0-34.133zm59.733-59.734a17.067 17.067 0 0 1 17.067 17.066V739.73a17.067 17.067 0 0 1-34.134 0V620.262a17.067 17.067 0 0 1 17.067-17.066z" fill="#FFE074"/><path d="M200.533 662.938h34.134v34.133h-34.134zM789.333 210.67h34.134v34.134h-34.134z" fill="#FFE074"/></symbol><symbol id="channel-life" viewBox="0 0 1024 1024"><path d="M881.408 664.064V504.32a168.192 168.192 0 0 0-128-162.56l-7.936-1.792v144.896a12.288 12.288 0 0 1-14.592 11.776 170.752 170.752 0 0 0-30.464-2.816H561.664v-27.648a37.632 37.632 0 0 1 11.776-27.648 175.872 175.872 0 0 0 57.856-135.68A179.2 179.2 0 0 0 460.8 132.352 175.872 175.872 0 0 0 279.808 308.48V409.6h32.256a225.536 225.536 0 0 0 15.872 19.2 36.608 36.608 0 0 1 9.472 25.6v42.496A193.792 193.792 0 0 0 179.2 712.96a197.12 197.12 0 0 0 197.12 166.656h325.12a148.48 148.48 0 0 0 45.568-6.144 217.088 217.088 0 0 0 64.256-31.744 176.896 176.896 0 0 0 18.176-15.616l4.608-4.352a156.16 156.16 0 0 0 47.36-111.872v-35.84c.512-3.072.256-6.656 0-9.984z" fill="#FFD778"/><path d="M468.736 238.592a40.192 40.192 0 1 0 40.192 40.192 40.192 40.192 0 0 0-40.192-40.192zm-145.152 124.16H217.6a34.816 34.816 0 1 0 0 69.376h106.24a34.816 34.816 0 1 0 0-69.376z" fill="#FB813A"/></symbol><symbol id="channel-live" viewBox="0 0 1024 1024"><path d="M392.448 275.911a92.416 92.416 0 1 1-184.832 0 92.416 92.416 0 0 1 184.832 0" fill="#23ADE5"/><path d="m826.624 464.583-63.744 36.864v-48.64a72.206 72.206 0 0 0-71.68-71.936H190.72a72.192 72.192 0 0 0-71.936 71.936v295.424a71.936 71.936 0 0 0 71.936 71.936H691.2a71.936 71.936 0 0 0 71.936-71.936v-23.808l63.488 37.888a51.2 51.2 0 0 0 76.8-44.544V508.871a51.2 51.2 0 0 0-76.8-44.288m-253.696-95.232c79.46.142 143.986-64.156 144.128-143.616.142-79.46-64.156-143.986-143.616-144.128-79.26-.142-143.701 63.858-144.128 143.104-.427 79.46 63.644 144.213 143.104 144.64h.512" fill="#48CFE5"/><path d="m425.216 512.967 124.16 71.936a25.6 25.6 0 0 1 0 42.496l-124.16 71.68a25.6 25.6 0 0 1-37.12-21.248v-143.36a25.6 25.6 0 0 1 37.12-21.504" fill="#FDDE80"/></symbol><symbol id="channel-love" viewBox="0 0 1024 1024"><path d="M131.56 512a380.44 380.44 0 1 0 760.88 0 380.44 380.44 0 1 0-760.88 0Z" fill="#00AEEC"/><path d="M600.518 766.255c-13.183 0-22.6-11.3-22.6-22.6 0-92.286 75.335-167.62 169.503-167.62 13.184 0 22.6 11.3 22.6 22.6s-11.3 22.6-22.6 22.6c-67.801 0-124.302 54.618-124.302 122.42 0 13.183-9.417 22.6-22.6 22.6zm-177.036 0c-13.184 0-22.6-11.3-22.6-22.6 0-67.802-56.502-122.42-124.303-122.42-13.184 0-22.6-11.3-22.6-22.6s11.3-22.6 22.6-22.6c94.168 0 169.503 75.334 169.503 167.62 0 13.183-9.417 22.6-22.6 22.6zm-82.869-459.542c33.901-28.25 79.102-37.668 122.42-24.484 5.65 1.883 7.533 9.417 3.766 15.067l-62.151 62.151c-7.534 7.533-7.534 20.717 0 28.25 7.533 7.534 20.717 7.534 28.25 0l69.685-69.684c50.851-50.851 133.72-50.851 186.454 0 50.85 50.85 50.85 131.836 0 182.687L523.3 664.553c-7.533 7.533-18.833 7.533-24.484 0L325.546 495.05c-47.084-58.385-39.55-141.253 15.067-188.337z" fill="#FFF"/></symbol><symbol id="channel-manhua" viewBox="0 0 1024 1024"><path d="M738.629 807.087H260.446c-33.443-.075-60.541-28.997-60.641-64.712V397.312c.1-35.715 27.198-64.687 60.64-64.762H738.63c33.442.125 60.516 29.072 60.59 64.787V742.35c-.1 35.715-27.173 64.637-60.59 64.737" fill="#FFE494"/><path d="M497.564 701.015A125.278 125.278 0 0 0 621.543 593.82a15.685 15.685 0 0 0-15.36-18.107H388.92a15.685 15.685 0 0 0-15.335 18.107 125.303 125.303 0 0 0 123.98 107.195" fill="#F6C435"/><path d="M748.669 342.19c20.28-6.568 34.241-26.074 32.343-47.328a128.75 128.75 0 0 0-5.869-28.797c-35.39-109.043-205.4-151.552-379.73-94.957C221.085 227.728 108.47 362.02 143.86 471.065a130.061 130.061 0 0 0 12.188 26.724c10.989 18.332 33.717 25.9 53.997 19.331l538.624-174.954z" fill="#9796ED"/><path d="m363.82 146.732 10.065 31.044c4.47 13.737 19.381 21.305 33.093 16.859 13.736-4.47 21.354-19.356 16.883-33.093l-10.065-31.02a26.3 26.3 0 0 0-49.976 16.235m383.425 499.537-80.496-36.415s11.539 49.977 66.935 83.094c-.075.65-.25 1.249-.35 1.948-11.914 84.768 35.815 160.843 106.596 169.934 70.756 9.092 137.765-52.274 149.704-137.04 11.888-84.743-35.815-160.844-106.621-169.91-56.27-7.243-110.068 30.17-135.768 88.414z" fill="#9796ED"/><path d="m890.38 647.293-17.757 88.913a5.894 5.894 0 0 1-5.795 4.745h-15.934a5.92 5.92 0 0 1-5.87-6.768l12.988-88.888a5.87 5.87 0 0 1 5.794-5.07h20.755c3.747 0 6.544 3.421 5.795 7.068m-20.53 121.98-2.673 14.611a5.894 5.894 0 0 1-5.794 4.846h-18.782a5.92 5.92 0 0 1-5.82-6.844l2.374-14.585a5.92 5.92 0 0 1 5.819-4.995h19.056a5.902 5.902 0 0 1 5.82 6.993" fill="#FFF"/></symbol><symbol id="channel-match" viewBox="0 0 1024 1024"><path d="M545.03 736.563v68.01h108.108a23.997 23.997 0 0 1 24.002 23.997v17.833a23.997 23.997 0 0 1-24.002 23.997h-282.27a23.997 23.997 0 0 1-24.003-24.003V828.57a23.997 23.997 0 0 1 24.002-23.998h108.109v-68.014c-57.334-7.639-108.467-34.888-146.432-74.783-103.526-30.924-171.49-125.808-202.27-278.917-12.545-62.382 28.042-123.085 90.639-135.588a115.978 115.978 0 0 1 22.707-2.242h20.68V227.2a48 48 0 0 1 48-48h399.41a48 48 0 0 1 48 48v17.828h20.67c7.629 0 15.232.752 22.707 2.242 62.597 12.498 103.179 73.206 90.64 135.588-30.777 153.104-98.74 247.987-202.26 278.917-37.97 39.895-89.104 67.144-146.433 74.783zM270.34 545.653a248.545 248.545 0 0 1-6.041-54.614V310.856h-20.685c-3.262 0-6.523.322-9.728.962-26.83 5.356-44.222 31.37-38.846 58.112 15.78 78.49 40.755 136.643 75.295 175.719zm489.37-234.797v180.183c0 18.76-2.09 37.038-6.042 54.605 34.535-39.076 59.51-97.234 75.29-175.719 5.376-26.737-12.017-52.751-38.846-58.107a49.705 49.705 0 0 0-9.728-.962h-20.674z" fill="#FFD778"/><path d="m512 487.639-59.791 31.217a12.8 12.8 0 0 1-18.535-13.527l11.392-65.982-48.19-46.653a12.8 12.8 0 0 1 7.077-21.863l66.683-9.625 29.9-60.176a12.8 12.8 0 0 1 22.928 0l29.9 60.176 66.683 9.625a12.8 12.8 0 0 1 7.076 21.863l-48.19 46.653 11.393 65.982a12.8 12.8 0 0 1-18.535 13.527L512 487.639z" fill="#FB813A"/></symbol><symbol id="channel-movie" viewBox="0 0 1024 1024"><path d="M954.624 452.864H919.04v-168.96a37.376 37.376 0 0 0-25.6-36.608 36.608 36.608 0 0 0-46.592 34.304v170.24H199.936V282.88a37.632 37.632 0 0 0-25.6-36.608A36.352 36.352 0 0 0 128 281.6v170.24H92.16a15.616 15.616 0 0 0-15.36 15.872V550.4a15.36 15.36 0 0 0 15.36 15.616h26.88v85.248a135.68 135.68 0 0 0 134.4 136.192h114.432a135.68 135.68 0 0 0 134.4-136.192v-20.992a7.936 7.936 0 0 1 7.68-7.936h25.6a7.68 7.68 0 0 1 7.68 7.936v20.992a135.936 135.936 0 0 0 134.4 136.192H793.6A135.68 135.68 0 0 0 928 651.264v-85.248h25.6a15.36 15.36 0 0 0 15.36-15.616v-81.664a15.616 15.616 0 0 0-15.36-15.872" fill="#E5E6E6"/><path d="M361.216 727.552h-102.4A87.296 87.296 0 0 1 172.8 640v-79.872a61.184 61.184 0 0 1 60.416-61.44h153.6a61.184 61.184 0 0 1 60.416 61.44V640a87.296 87.296 0 0 1-86.528 87.552" fill="#FF5C7A"/><path d="M685.568 727.552h102.4A87.296 87.296 0 0 0 873.984 640v-79.872a61.184 61.184 0 0 0-60.416-61.44h-153.6a61.184 61.184 0 0 0-60.416 61.44V640a87.296 87.296 0 0 0 86.528 87.552" fill="#2CBAE5"/></symbol><symbol id="channel-music" viewBox="0 0 1024 1024"><path d="M881.92 460.8a335.36 335.36 0 0 0-334.336-335.104h-73.216A335.616 335.616 0 0 0 139.776 460.8v313.6a18.688 18.688 0 0 0 18.432 18.688h41.984c13.568 46.336 37.888 80.384 88.576 80.384h98.304a37.376 37.376 0 0 0 37.376-36.864l1.28-284.672a36.864 36.864 0 0 0-37.12-37.12h-99.84a111.616 111.616 0 0 0-51.2 12.8V454.4a242.432 242.432 0 0 1 241.664-241.664h67.328A242.176 242.176 0 0 1 787.968 454.4v74.496a110.592 110.592 0 0 0-54.272-14.08h-99.84a36.864 36.864 0 0 0-37.12 37.12v284.672a37.376 37.376 0 0 0 37.376 36.864h98.304c51.2 0 75.008-34.048 88.576-80.384h41.984a18.688 18.688 0 0 0 18.432-18.688z" fill="#45C7DD"/><path d="m646.1859999999999 792.7090000000001.274-196.096q.046-32.512 32.558-32.466l1.024.001q32.512.045 32.466 32.557l-.274 196.096q-.045 32.512-32.557 32.467l-1.024-.002q-32.512-.045-32.467-32.557ZM307.26800000000003 792.7349999999999l.274-196.096q.045-32.512 32.557-32.467l1.024.002q32.512.045 32.467 32.557l-.274 196.096q-.045 32.512-32.557 32.466l-1.024-.001q-32.512-.045-32.467-32.557Z" fill="#FF5C7A"/></symbol><symbol id="channel-musicplus" viewBox="0 0 1024 1024"><path d="M153.6 256h716.8q25.6 0 25.6 25.6v512q0 25.6-25.6 25.6H153.6q-25.6 0-25.6-25.6v-512q0-25.6 25.6-25.6Z" fill="#3DA9D3"/><path d="M153.6 256h153.6v563.2H153.6a25.6 25.6 0 0 1-25.6-25.6v-512a25.6 25.6 0 0 1 25.6-25.6zm716.8 0H716.8v563.2h153.6a25.6 25.6 0 0 0 25.6-25.6v-512a25.6 25.6 0 0 0-25.6-25.6z" fill="#7DD3E0"/><path d="M783.36 320h46.08q15.36 0 15.36 15.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48Q768 320 783.36 320ZM783.36 448h46.08q15.36 0 15.36 15.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48Q768 448 783.36 448ZM783.36 576h46.08q15.36 0 15.36 15.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48Q768 576 783.36 576ZM783.36 704h46.08q15.36 0 15.36 15.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48Q768 704 783.36 704Z" fill="#3DA9D3"/><path d="M576 180.736c8.78-2.611 15.898-1.92 21.35 2.074 5.479 3.993 11.008 9.83 16.64 17.459 5.607 7.654 12.544 16.256 20.762 25.856 8.243 9.574 19.456 18.509 33.69 26.777 12.236 7.68 22.963 12.954 32.204 15.77l25.959 7.86a146.846 146.846 0 0 1 23.654 9.266s17.741 9.984 25.523 20.48c8.116 10.906 14.874 19.661 16.615 30.976 1.715 11.341 1.613 21.914-.461 31.693a72.73 72.73 0 0 1-9.574 24.576c-4.276 6.58-7.86 9.933-10.752 9.933-2.868.026-5.402-1.613-7.604-5.043-2.227-3.38-3.84-9.984-4.864-19.763-1.69-15.872-6.656-27.034-14.976-33.46-8.32-6.425-21.35-9.984-39.142-10.726a96.051 96.051 0 0 1-48.922-15.616 283.047 283.047 0 0 1-34.97-26.803c-8.882-7.373-15.794-9.549-20.889-6.298-4.992 3.226-7.577 8.115-7.731 14.746l-.563 26.752-6.707 273.792-.794 35.405c.154 9.856-1.664 21.196-5.427 33.996-3.789 12.8-10.675 25.293-20.66 37.453-9.932 12.16-23.09 23.22-39.475 33.229s-36.582 17.357-60.595 22.067c-24.448 4.762-46.413 3.584-65.894-3.507-19.456-7.091-34.381-17.434-44.775-31.027-10.24-12.928-15.436-29.594-14.77-47.514.69-18.048 8.857-36.045 24.473-53.965s32.435-31.283 50.432-40.115a198.81 198.81 0 0 1 51.814-17.715 178.842 178.842 0 0 1 44.314-3.02c13.005 1.049 22.579 2.38 28.749 3.942 0 0 6.45-280.167 8.294-341.607.23-12.109 3.584-22.323 9.933-30.976 6.4-8.55 14.771-14.208 25.139-16.947zm160.922 288.18a12.8 12.8 0 0 1 .358 2.969v40.96l41.728-6.912a12.8 12.8 0 0 1 14.9 12.595v15.002a12.8 12.8 0 0 1-10.702 12.646l-45.952 7.629.026 45.363a12.8 12.8 0 0 1-9.83 12.442l-15.36 3.66a12.8 12.8 0 0 1-15.77-12.441V560.64l-41.114 6.86a12.8 12.8 0 0 1-14.899-12.62v-15.002a12.8 12.8 0 0 1 10.701-12.646l45.312-7.552v-44.134a12.8 12.8 0 0 1 9.83-12.468l15.36-3.635a12.8 12.8 0 0 1 15.412 9.472z" fill="#FFD469"/><path d="M194.56 320h46.08Q256 320 256 335.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48q0-15.36 15.36-15.36ZM194.56 448h46.08Q256 448 256 463.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48q0-15.36 15.36-15.36ZM194.56 576h46.08Q256 576 256 591.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48q0-15.36 15.36-15.36ZM194.56 704h46.08Q256 704 256 719.36v20.48q0 15.36-15.36 15.36h-46.08q-15.36 0-15.36-15.36v-20.48q0-15.36 15.36-15.36Z" fill="#3DA9D3"/></symbol><symbol id="channel-read" viewBox="0 0 1024 1024"><path d="M778.496 142.08h-537.6a56.832 56.832 0 0 0-60.16 54.016v630.528a56.832 56.832 0 0 0 59.136 54.016h537.6a56.832 56.832 0 0 0 59.136-54.016V196.096a56.832 56.832 0 0 0-59.136-54.016z" fill="#54E2E2"/><path d="M298.496 679.168h421.376a25.6 25.6 0 0 0 0-52.736H298.496a25.6 25.6 0 1 0 0 52.736zm421.376 53.76H298.496a25.6 25.6 0 1 0 0 52.736h421.376a25.6 25.6 0 0 0 0-52.736zM352.256 237.056h314.112q80.128 0 80.128 80.128v154.368q0 80.128-80.128 80.128H352.256q-80.128 0-80.128-80.128V317.184q0-80.128 80.128-80.128Z" fill="#23ADE5"/><path d="M355.584 361.472a49.408 49.408 0 1 0 98.816 0 49.408 49.408 0 1 0-98.816 0ZM375.552 551.936l120.832-144.384a44.544 44.544 0 0 1 68.352 0l120.832 144.384z" fill="#2EC3E5"/></symbol><symbol id="channel-sports" viewBox="0 0 1024 1024"><path d="m497.894 517.862 23.885 29.261a58.573 58.573 0 0 1-5.606 80.051L241.946 880.742a47.718 47.718 0 0 1-65.613-.768 49.818 49.818 0 0 1-4.301-66.816l108.57-136.37 126.105-158.362a58.573 58.573 0 0 1 91.187-.564z" fill="#1BAD8B"/><path d="M698.931 153.6a117.146 117.146 0 0 1 11.418 233.728l60.416 45.9c4.352 3.329 10.163 3.918 15.104 1.588l73.625-34.637a46.285 46.285 0 0 1 59.11 17.587 44.34 44.34 0 0 1-11.929 59.316l-125.952 90.265a58.573 58.573 0 0 1-65.945 1.562l-66.048-42.752-44.135 47.77 70.605 83.327a58.012 58.012 0 0 1 4.608 6.196l1.946 3.302a58.573 58.573 0 0 1-22.861 79.616L466.79 852.71a49.382 49.382 0 0 1-65.74-16.998 52.096 52.096 0 0 1 11.904-68.582l105.548-83.175-106.29-68.3-1.537-1.025a59.75 59.75 0 0 1-.896-.614l-13.824-7.168a58.573 58.573 0 0 1-23.296-82.278l71.68-118.887-30.72-13.824a14.643 14.643 0 0 0-14.336 1.331l-80.486 55.604a48.87 48.87 0 0 1-62.669-5.965 39.347 39.347 0 0 1 1.792-56.858l128.282-115.149a58.573 58.573 0 0 1 57.446-12.032l143.54 47.258A117.146 117.146 0 0 1 698.93 153.6z" fill="#57D59A"/></symbol><symbol id="channel-spread" viewBox="0 0 1024 1024"><defs><style>@font-face{font-family:element-icons;src:url(chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.woff) format(&quot;woff&quot;),url(&quot;chrome-extension://moombeodfomdpjnpocobemoiaemednkg/fonts/element-icons.ttf &quot;) format(&quot;truetype&quot;)}</style></defs><path d="M324.557 660.316v56.832c0 30.193 24.473 54.672 54.671 54.672 30.193 0 54.672-24.474 54.672-54.672v-14.05l-109.343-42.782zm186.47 72.965c-7.961 65.72-63.933 116.639-131.799 116.639-73.328 0-132.772-59.443-132.772-132.772V629.75L129.3 583.91v.067a39.05 39.05 0 1 1-78.1 0V411.72a39.05 39.05 0 0 1 78.1 0v.066l499.85-195.594V192.65a39.05 39.05 0 1 1 78.106 0v610.396a39.05 39.05 0 1 1-78.105 0v-23.541L511.032 733.28z" fill="#FFD778"/><path d="M808.786 458.732H933.75a39.05 39.05 0 0 1 39.05 39.05v.133a39.05 39.05 0 0 1-39.05 39.05H808.786a39.05 39.05 0 0 1-39.05-39.05v-.133a39.05 39.05 0 0 1 39.05-39.05zm-3.313 130.437 108.258 62.612a39.05 39.05 0 0 1 14.284 53.3l-.056.102a39.045 39.045 0 0 1-53.376 14.3l-108.257-62.618a39.05 39.05 0 0 1-14.285-53.299l.056-.097a39.045 39.045 0 0 1 53.376-14.3zm-39.147-250.343 108.257-62.612a39.045 39.045 0 0 1 53.376 14.305l.051.092a39.05 39.05 0 0 1-14.285 53.305l-108.247 62.612a39.045 39.045 0 0 1-53.376-14.3l-.05-.097a39.05 39.05 0 0 1 14.279-53.3z" fill="#FB813A"/></symbol><symbol id="channel-tech" viewBox="0 0 1024 1024"><path d="M510.208 683.264H396.032l-50.688 209.408h329.472l-50.688-209.408h-113.92z" fill="#FFD778"/><path d="M535.552 150.528v-28.16a25.6 25.6 0 1 0-51.2 0v28.16A271.872 271.872 0 0 0 239.36 420.096v97.28a25.6 25.6 0 0 0 26.88 26.88h487.936a25.6 25.6 0 0 0 25.6-26.88v-97.28a271.616 271.616 0 0 0-244.224-269.568z" fill="#48CFE5"/><path d="M228.864 464.64h562.432q103.168 0 103.168 103.168v15.36q0 103.168-103.168 103.168H228.864q-103.168 0-103.168-103.168v-15.36q0-103.168 103.168-103.168Z" fill="#2CBAE5"/><path d="M742.4 537.6a37.632 37.632 0 1 0 37.632 37.632A37.376 37.376 0 0 0 742.4 537.6zm-465.664 0a37.632 37.632 0 1 0 37.632 37.632 37.632 37.632 0 0 0-37.632-37.632z" fill="#FFD778"/></symbol><symbol id="channel-teleplay" viewBox="0 0 1024 1024"><path d="M271.616 247.808a212.224 212.224 0 0 0-49.664 172.8l25.6 126.72c56.832 21.76 60.16 87.552 67.328 149.248a1167.872 1167.872 0 0 1 190.208-14.08 1247.488 1247.488 0 0 1 196.096 14.08c7.68-61.696 4.352-126.72 59.904-148.736l25.6-128a211.712 211.712 0 0 0-49.92-172.288 218.624 218.624 0 0 0-165.12-74.752H436.736a218.624 218.624 0 0 0-165.12 74.752" fill="#FFB161"/><path d="m505.088 412.672-34.816-34.56a19.456 19.456 0 0 0-27.392 27.392l25.6 25.6-25.6 25.6a19.456 19.456 0 0 0 27.392 27.392l34.816-34.56 35.072 34.56a18.688 18.688 0 0 0 13.568 5.632 19.456 19.456 0 0 0 13.824-33.024l-25.6-25.6 25.6-25.6a19.456 19.456 0 0 0-13.824-33.024 18.688 18.688 0 0 0-13.568 5.632z" fill="#FFE494"/><path d="M822.016 482.56a130.816 130.816 0 0 0-133.888 128v68.864L320 680.96v-69.376a130.304 130.304 0 0 0-120.32-128h-13.568A81.92 81.92 0 0 0 102.4 563.2a76.8 76.8 0 0 0 0 13.312 79.104 79.104 0 0 0 38.912 54.784l8.96 4.352h2.304a25.6 25.6 0 0 1 15.36 22.016v63.744a112.384 112.384 0 0 0 80.896 105.472 51.2 51.2 0 0 0 98.816 5.888h313.088a51.2 51.2 0 0 0 98.816-5.888 112.384 112.384 0 0 0 79.104-105.472v-70.656a25.6 25.6 0 0 1 8.192-11.52h1.536l4.608-2.816a80.384 80.384 0 0 0 51.2-61.44v-12.032a81.92 81.92 0 0 0-83.712-79.616" fill="#FB952C"/></symbol><symbol id="channel-topic" viewBox="0 0 1024 1024"><path d="M880.64 520.448C880.64 642.56 768 742.4 627.712 742.4H409.6l-165.632 74.496-92.928-258.56a146.688 146.688 0 0 1-3.072-37.888V482.56C147.968 360.448 258.56 256 398.08 256h232.704c136.448 0 249.856 104.448 249.856 226.56v37.888zm-238.336-311.04h-256a280.064 280.064 0 0 0-279.04 273.152v43.776a250.88 250.88 0 0 0 3.072 46.336L215.04 878.08l183.04-90.112h244.224c153.6 0 279.04-116.48 279.04-261.632V482.56a279.808 279.808 0 0 0-279.04-273.152zm58.112 351.744a51.2 51.2 0 0 1-51.2-51.2 55.552 55.552 0 0 1 58.112-52.48 54.528 54.528 0 0 1 51.2 55.296 57.088 57.088 0 0 1-58.112 49.408m-179.2 0a51.2 51.2 0 0 1-51.2-51.2 55.552 55.552 0 0 1 58.112-52.48 54.528 54.528 0 0 1 51.2 55.296 59.392 59.392 0 0 1-58.112 49.408m-179.2 0a51.2 51.2 0 0 1-51.2-51.2 55.552 55.552 0 0 1 58.112-52.48 54.528 54.528 0 0 1 51.2 55.296 59.648 59.648 0 0 1-58.112 49.408m279.04-270.336H412.672c-122.112 0-224 87.296-224 188.928V512a111.36 111.36 0 0 0 3.072 31.744L267.264 768l110.592-58.112H645.12A194.048 194.048 0 0 0 842.752 512v-29.44c-2.816-104.448-102.4-191.744-223.744-191.744" fill="currentColor"/></symbol><symbol id="channel-tuiguang" viewBox="0 0 1024 1024"><path d="M324.557 660.316v56.832c0 30.193 24.473 54.672 54.671 54.672 30.193 0 54.672-24.474 54.672-54.672v-14.05l-109.343-42.782zm186.47 72.965c-7.961 65.72-63.933 116.639-131.799 116.639-73.328 0-132.772-59.443-132.772-132.772V629.75L129.3 583.91v.067a39.05 39.05 0 1 1-78.1 0V411.72a39.05 39.05 0 0 1 78.1 0v.066l499.85-195.594V192.65a39.05 39.05 0 1 1 78.106 0v610.396a39.05 39.05 0 1 1-78.105 0v-23.541L511.032 733.28z" fill="#FFD778"/><path d="M808.786 458.732H933.75a39.05 39.05 0 0 1 39.05 39.05v.133a39.05 39.05 0 0 1-39.05 39.05H808.786a39.05 39.05 0 0 1-39.05-39.05v-.133a39.05 39.05 0 0 1 39.05-39.05zm-3.313 130.437 108.258 62.612a39.05 39.05 0 0 1 14.284 53.3l-.056.102a39.045 39.045 0 0 1-53.376 14.3l-108.257-62.618a39.05 39.05 0 0 1-14.285-53.299l.056-.097a39.045 39.045 0 0 1 53.376-14.3zm-39.147-250.343 108.257-62.612a39.045 39.045 0 0 1 53.376 14.305l.051.092a39.05 39.05 0 0 1-14.285 53.305l-108.247 62.612a39.045 39.045 0 0 1-53.376-14.3l-.05-.097a39.05 39.05 0 0 1 14.279-53.3z" fill="#FB813A"/></symbol><symbol id="channel-vlog" viewBox="0 0 1024 1024"><path d="M824.195 570.693V462.049l49.951-49.951v200.704a74.927 74.927 0 0 1-44.956 68.682L574.44 792.601l-142.636-30.795 377.582-168.31a24.976 24.976 0 0 0 14.81-22.803z" fill="#7C79EE"/><path d="M799.22 312.195h49.95q24.976 0 24.976 24.976v124.878q0 24.975-24.975 24.975H799.22q-24.976 0-24.976-24.975V337.17q0-24.976 24.976-24.976Z" fill="#7C79EE"/><path d="M249.756 162.341h449.561q99.903 0 99.903 99.903V512q0 99.902-99.903 99.902h-449.56q-99.903 0-99.903-99.902V262.244q0-99.903 99.902-99.903Z" fill="#9796ED"/><path d="M299.707 212.293H624.39q49.951 0 49.951 49.95V512q0 49.951-49.95 49.951H299.706q-49.95 0-49.95-49.951V262.244q0-49.951 49.95-49.951Z" fill="#FFE494"/><path d="m438.447 300.606 104.822 69.907a24.976 24.976 0 0 1 0 41.56l-104.822 69.881a24.976 24.976 0 0 1-38.837-20.78V321.412a24.976 24.976 0 0 1 38.837-20.805z" fill="#7C79EE"/><path d="M474.537 649.366h99.902a49.951 49.951 0 0 1 49.951 49.951v137.366a49.951 49.951 0 0 1-49.951 49.951h-99.902a49.951 49.951 0 0 1-49.952-49.951V699.317a49.951 49.951 0 0 1 49.952-49.951z" fill="#9796ED"/></symbol><symbol id="channel-vtuber" viewBox="0 0 1024 1024"><path d="M212.557 605.082c-.077 42.854-13.799 82.048-41.037 117.606-40.909 53.325-83.917 69.274-77.824 85.197 11.34 35.405 45.568 49.024 102.656 40.883 36.787 61.44 95.488 90.01 176.026 85.606 88.601-9.6 119.654-92.006 93.107-247.219l-252.903-82.048zm522.112-13.67a293.504 293.504 0 0 1-52.352 122.828c-40.448 55.706-31.386 56.934-25.344 73.6 7.782 21.453 24.013 50.048 48.742 85.811 80.205 26.931 158.362 13.056 234.496-41.574 30.95-25.344-15.974-57.267-51.942-136.602-10.317-22.784-5.069-88.013 15.77-195.66l-169.37 91.596z" fill="#23ADE5"/><path d="m706.202 689.664 113.28-16.384c35.993-44.646 69.888-54.502 101.683-29.517 47.693 37.427 8.269 142.029-71.501 102.759-1.74 0-51.507 5.53-149.35 16.64l5.888-73.524zm-285.568 69.811a41.882 41.882 0 0 1 18.508 56.73l-36.096 69.709a43.136 43.136 0 0 1-57.548 18.764 41.882 41.882 0 0 1-18.484-56.73l36.045-69.708a43.136 43.136 0 0 1 57.575-18.765z" fill="#FFE6DF"/><path d="M465.46 698.112c-35.508-.666-67.457 23.296-95.873 71.834-.051.358 18.1 20.172 54.451 59.468l-18.585 64.154c2.662 36.173 57.062 54.272 163.174 54.272s165.146-21.427 177.152-64.23l-30.72-93.236c50.79-1.126 76.211-7.424 76.211-18.841 0-17.152-27.673-97.536-27.673-115.328 0-11.853-26.445-5.632-79.309 18.688l-218.829 23.219z" fill="#47CFE5"/><path d="m528.538 684.083 56.192-4.915 22.912 53.683c-23.962 27.955-38.35 41.805-43.085 41.523-6.375-.025-22.912-11.161-49.639-33.408l13.62-56.883z" fill="#FED878"/><path d="m560.512 728.013-37.427 106.393 53.888 79.079 38.86-87.168z" fill="#FED878"/><path d="M574.54 705.024c290.484-44.826 302.72-134.016 290.51-252.928-12.237-118.886-160.282-200.422-330.752-182.093-170.42 18.33-298.676 129.587-286.464 248.474 12.21 118.912 36.224 231.321 326.707 186.521z" fill="#FFE6DF"/><path d="M388.02 350.848c25.65 24.32 31.743 31.411 85.452 58.445 105.14 42.752 245.811 9.344 192.205-92.928 19.533 43.417 96.256 99.763 131.43 118.502-8.755 137.216-15.565 200.781 8.755 209.101 19.584 6.707 83.584-40.064 102.119-171.187 19.712-239.463-231.783-433.152-347.955-354.304-276.276-94.515-476.8 224.87-420.378 440.09 30.72 113.689 139.392 207.923 174.746 182.348 24.806-17.92 3.276-148.429-35.047-228.864 48.717-40.448 68.71-57.625 108.672-161.177z" fill="#23ADE5"/><path d="m337.306 490.163 2.38.359 129.357 29.184c13.159 2.944 16.896 19.353 7.424 27.904l-2.073 1.587L368.46 618.7a16.282 16.282 0 0 1-19.968-25.6l2.099-1.639 73.805-48.435-91.879-20.736a16.307 16.307 0 0 1-12.646-17.075l.358-2.38a16.307 16.307 0 0 1 17.076-12.673zM653.928 504.238a86.58 42.317 84 1 0 84.17-8.847 86.58 42.317 84 1 0-84.17 8.847Z" fill="#24A7DA"/><path d="m625.254 565.632 2.407.256a16.282 16.282 0 0 1 13.235 18.867c-8.525 48.205-28.672 71.527-57.446 67.712a58.778 58.778 0 0 1-24.628-9.958l-1.33-.947-1.511 1.28c-28.621 22.912-55.885 15.052-71.04-22.63l-1.69-4.48a16.282 16.282 0 0 1 30.72-10.906l2.176 5.888c5.658 14.13 9.984 16.204 20.045 6.86l4.045-4.044 4.659-5.095a16.307 16.307 0 0 1 23.04-1.331l1.843 1.971c2.867 3.584 11.853 10.291 17.946 11.085 7.526 1.024 15.232-7.885 21.069-41.062a16.307 16.307 0 0 1 16.46-13.466z" fill="#24A7DA"/></symbol><symbol id="channel-yinpin" viewBox="0 0 1024 1024"><path d="M870.4 436.992a168.192 168.192 0 0 1-183.552 153.6A170.24 170.24 0 0 1 537.6 401.92a168.192 168.192 0 0 1 183.552-153.6A170.24 170.24 0 0 1 870.4 436.992" fill="#FFBA7B"/><path d="M738.56 806.4c148.992-131.072 169.472-360.448 53.504-529.408-7.68-11.264-128-22.272-128-22.272L194.304 665.6a60.16 60.16 0 0 0-4.352 83.712v1.536C334.592 921.6 579.584 947.2 738.56 806.4" fill="#FFBA7B"/><path d="M371.2 645.12a207.872 207.872 0 0 0 182.784-195.584 30.208 30.208 0 0 0-33.28-31.744L179.2 455.424a30.464 30.464 0 0 0-25.6 38.144A204.8 204.8 0 0 0 371.2 645.12" fill="#FB952C"/><path d="M723.2 338.432a35.072 35.072 0 1 0 30.72 38.656 34.816 34.816 0 0 0-30.72-38.656M539.904 281.6l54.272 23.552a51.2 51.2 0 0 1 25.6 66.56l-5.888 14.336a49.408 49.408 0 0 1-65.024 25.6l-54.272-23.552a6.912 6.912 0 0 1 0-12.544l53.76-22.272a7.168 7.168 0 0 0 3.84-8.96l-21.76-55.04a6.656 6.656 0 0 1 8.704-8.96" fill="#FB813A"/><path d="M442.112 142.336A17.408 17.408 0 0 0 425.216 128h-3.84a17.664 17.664 0 0 0-17.408 17.664v113.152a76.8 76.8 0 0 0-29.184 0 83.2 83.2 0 0 0-67.584 71.68c0 30.72 30.464 48.64 68.096 40.192a83.2 83.2 0 0 0 67.84-70.912v-157.44z" fill="#FC611F"/></symbol><symbol id="channel-zhishi" viewBox="0 0 1024 1024"><path d="M781.367 132.313c60.919 0 110.32 50.371 110.32 112.514V778.16c0 62.1-49.359 112.472-110.32 112.472H518.75c0-16.116-25.692-29.152-57.375-29.152S404 874.56 404 890.633H284.82c-60.918 0-110.32-50.372-110.32-112.43V244.827c0-62.143 49.36-112.514 110.32-112.514h496.547z" fill="#FBC92A"/><path d="M781.367 132.313c60.919 0 110.32 50.371 110.32 112.514v209.671c-49.485 4.894-86.062 22.022-86.062 42.399 0 20.376 36.577 37.547 86.063 42.356v34.72c0 62.143-49.36 112.515-110.32 112.515H284.82c-60.918 0-110.32-50.372-110.32-112.515V244.827c0-62.143 49.36-112.514 110.32-112.514h496.547z" fill="#FFEA85"/><path d="M346.625 686.487a114.75 58.345 0 1 0 229.5 0 114.75 58.345 0 1 0-229.5 0Z" fill="#FBC92A"/><path d="M260.563 803.136a43.031 42.188 0 1 0 86.062 0 43.031 42.188 0 1 0-86.063 0ZM490.063 803.136a71.719 42.188 0 1 0 143.437 0 71.719 42.188 0 1 0-143.438 0Z" fill="#F4B828"/><path d="M674.506 477.448a27.21 27.21 0 0 1 39.024 1.224 28.519 28.519 0 0 1-1.182 39.74 238.022 238.022 0 0 1-330.918 0 28.519 28.519 0 0 1-1.182-39.74 27.21 27.21 0 0 1 38.982-1.224 183.642 183.642 0 0 0 255.276 0zM734.792 272.923h5.19a41.766 41.766 0 0 1 41.343 42.188v56.278c0 23.288-18.478 42.188-41.344 42.188h-5.189a41.766 41.766 0 0 1-41.344-42.188v-56.278c0-23.288 18.52-42.188 41.344-42.188zm-380.995 0h5.189a41.766 41.766 0 0 1 41.344 42.188v56.278c0 23.288-18.52 42.188-41.344 42.188h-5.19a41.766 41.766 0 0 1-41.343-42.188v-56.278c0-23.288 18.478-42.188 41.344-42.188z" fill="#FBC92A"/></symbol><symbol id="channel-zongyi" viewBox="0 0 1024 1024"><path d="M25.115 625.015c127-67.634 201.653-43.033 188.69 73.103l-.724 5.894c-13.961 104.648 52.674 162.367 81.945 128.3l1.698-2.123a24.976 24.976 0 1 1 40.211 29.646c-28.747 39.012-82.12 39.936-122.33 6.444-39.312-32.768-59.442-90.661-51.95-161.018l1.449-12.088.8-7.992c3.695-46.13-12.14-59.967-61.416-41.76l-8.517 3.347-9.166 3.922-9.79 4.495-10.49 5.145-11.114 5.695-5.844 3.072a24.976 24.976 0 1 1-23.477-44.082z" fill="#EC0000"/><path d="m419.355 437.872 237.268 148.256-217.887 254.8a79.922 79.922 0 0 1-103.1 15.835l-18.806-11.738a79.922 79.922 0 0 1-30.97-99.628l133.52-307.525z" fill="#FF5C00"/><path d="M385.488 416.718 690.49 607.282l-92.335 72.38c-29.621 20.454-77.899 9.74-144.859-32.094-66.984-41.86-97.78-80.572-92.384-116.137l24.576-114.713z" fill="#EC0000"/><path d="M432.167 681.484a26.524 26.524 0 0 1 6.569 39.187l-19.107 23.577a22.828 22.828 0 0 1-38.412-23.976l12.862-27.499a26.524 26.524 0 0 1 38.088-11.289z" fill="#FFD3A5"/><path d="M391.831 255.75c-76.025 121.631-39.036 281.9 82.62 357.9 121.656 76.026 281.924 39.038 357.925-82.619 76.026-121.63 39.037-281.9-82.62-357.9-121.655-76.026-281.899-39.037-357.925 82.62z" fill="#FF962A"/><path d="m749.757 173.106 5.145 3.322a258.997 258.997 0 0 1 112.165 167.336 77.55 77.55 0 0 1-11.413 36.89c-35.066 56.17-139.364 54.271-232.973-4.222-93.584-58.443-140.987-151.377-105.897-207.547 6.894-11.04 16.484-19.856 28.148-26.4a259.047 259.047 0 0 1 204.8 30.621z" fill="#FFB468"/><path d="M842.317 513.698a264.242 264.242 0 0 1-9.94 17.333c-76.026 121.657-236.27 158.645-357.901 82.645-121.681-76.026-158.67-236.27-82.67-357.926a278.773 278.773 0 0 1 11.24-16.559c-62.44 119.159-23.353 268.139 92.584 340.593 114.713 71.68 263.718 42.883 344.09-62.614l2.597-3.497z" fill="#FF6B18"/><path d="M380.168 236.694c-49.702 79.522 16.234 210.394 147.231 292.24 131.022 81.87 277.53 83.743 327.23 4.22 16.434-26.299 20.23-58.193 13.188-92.11 13.986 45.955 11.189 90.787-12.138 128.125-58.468 93.559-219.686 98.33-360.049 10.615-140.363-87.715-206.748-234.696-148.28-328.28 23.477-37.588 62.889-59.816 110.717-67.309-33.967 8.492-61.315 25.975-77.9 52.499z" fill="#FFB468"/><path d="m458.017 184.22 2.298-1.798c-26.824 21.054-43.833 37.338-51.05 48.877-43.858 70.182 17.657 187.742 139.313 263.743 121.657 76.025 253.952 79.572 297.81 9.39 7.742-12.388 14.86-33.642 21.354-63.787 7.143 34.041 3.396 66.085-13.112 92.51-49.702 79.522-196.209 77.673-327.23-4.222-131.023-81.845-196.934-212.717-147.232-292.24 16.584-26.523 43.932-44.006 77.849-52.473z" fill="#FFD3A5"/></symbol><symbol id="creator-audio" fill="none" viewBox="0 0 25 24"><rect opacity=".01" x=".5" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5 2.5h10A4.5 4.5 0 0 1 19.5 7v4.5a1 1 0 1 0 2 0V7A6.5 6.5 0 0 0 15 .5H5A2.5 2.5 0 0 0 2.5 3v17A2.5 2.5 0 0 0 5 22.5h9.5a1 1 0 1 0 0-2H5a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 .5-.5Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.561 14.348a1.5 1.5 0 0 0-2.121 0l-2.475 2.475a1 1 0 1 0 1.414 1.414l2.121-2.121 2.122 2.121a1 1 0 1 0 1.414-1.414l-2.475-2.475Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.5 13.976a1 1 0 0 1 1 1V21.5a1 1 0 1 1-2 0v-6.524a1 1 0 0 1 1-1Z" fill="#61666D"/><path d="M12.75 8.548v3" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8.75 12.922c0-.759.645-1.374 1.44-1.374h2.56v1.625c0 .76-.644 1.375-1.44 1.375h-1.12c-.795 0-1.44-.616-1.44-1.375v-.25Z" stroke="#61666D" stroke-width="2" stroke-linejoin="round"/><path d="m15.25 9.048-2.5-.5" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></symbol><symbol id="creator-magic" fill="none" viewBox="0 0 26 24"><path d="M24 0H0v24h24V0Z" fill="#fff" fill-opacity=".01"/><path fill-rule="evenodd" clip-rule="evenodd" d="M23.06 14.348a1.5 1.5 0 0 0-2.12 0l-2.476 2.475a1 1 0 1 0 1.415 1.414L22 16.116l2.121 2.121a1 1 0 1 0 1.415-1.414l-2.475-2.475Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M22 13.976a1 1 0 0 1 1 1V21.5a1 1 0 1 1-2 0v-6.524a1 1 0 0 1 1-1Z" fill="#61666D"/><path d="M24 0H0v24h24V0Z" fill="#fff" fill-opacity=".01"/><path d="M22 11.488c0-5.523-4.477-10-10-10s-10 4.477-10 10c0 5.522 4.477 10 10 10a9.955 9.955 0 0 0 4.954-1.312" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 15.413c1.607 0 2.25-1.286 2.25-1.286h-4.5s.643 1.286 2.25 1.286ZM15.5 8.487v2M8.5 8.487v2" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></symbol><symbol id="creator-manage" fill="none" viewBox="0 0 25 24"><rect opacity=".01" x=".5" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5 2.5h10A4.5 4.5 0 0 1 19.5 7v4.281a1 1 0 1 0 2 0V7A6.5 6.5 0 0 0 15 .5H5A2.5 2.5 0 0 0 2.5 3v17A2.5 2.5 0 0 0 5 22.5h5.5a1 1 0 1 0 0-2H5a.5.5 0 0 1-.5-.5V3a.5.5 0 0 1 .5-.5Zm9 8.866a1 1 0 0 0 0-1.732l-3-1.732a1 1 0 0 0-1.5.866v3.464a1 1 0 0 0 1.5.866l3-1.732Zm7.19 6.872-1.595 2.763h-3.19l-1.596-2.763 1.596-2.763h3.19l1.596 2.763Zm1.733-1a2 2 0 0 1 0 2l-1.596 2.763a2 2 0 0 1-1.732 1h-3.19a2 2 0 0 1-1.732-1l-1.596-2.763a2 2 0 0 1 0-2l1.596-2.763a2 2 0 0 1 1.732-1h3.19a2 2 0 0 1 1.732 1l1.596 2.763ZM18 16.988a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z" fill="#61666D"/></symbol><symbol id="creator-note" fill="none" viewBox="0 0 25 24"><rect opacity=".01" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 2.5h10A4.5 4.5 0 0 1 19 7v4.5a1 1 0 1 0 2 0V7A6.5 6.5 0 0 0 14.5.5h-10A2.5 2.5 0 0 0 2 3v17a2.5 2.5 0 0 0 2.5 2.5h9.761a1 1 0 1 0 0-2H4.5A.5.5 0 0 1 4 20V3a.5.5 0 0 1 .5-.5Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 9a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H7a1 1 0 0 1-1-1ZM6 13a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2H7a1 1 0 0 1-1-1ZM21.05 14.348a1.5 1.5 0 0 0-2.121 0l-2.475 2.475a1 1 0 1 0 1.414 1.414l2.122-2.121 2.12 2.121a1 1 0 1 0 1.415-1.414l-2.475-2.475Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19.99 13.976a1 1 0 0 1 1 1V21.5a1 1 0 1 1-2 0v-6.524a1 1 0 0 1 1-1Z" fill="#61666D"/></symbol><symbol id="creator-video" fill="none" viewBox="0 0 26 24"><rect opacity=".01" x="1.556" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.556 10.187a1 1 0 0 0-1 1v1.384a1 1 0 0 0 2 0v-1.384a1 1 0 0 0-1-1Zm-7 10.313a1 1 0 1 0 0 2h1a1 1 0 1 0 0-2h-1ZM22.61 15.348a1.5 1.5 0 0 0-2.122 0l-2.475 2.475a1 1 0 0 0 1.414 1.414l2.122-2.121 2.121 2.121a1 1 0 0 0 1.414-1.414l-2.475-2.475Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.549 14.976a1 1 0 0 1 1 1V22.5a1 1 0 1 1-2 0v-6.524a1 1 0 0 1 1-1ZM3.209 5.5h16.347a1 1 0 0 1 1 1v5.391h2V6.5a3 3 0 0 0-3-3H3.209a3 3 0 0 0-3 3v13a3 3 0 0 0 3 3h12.244v-2H3.209a1 1 0 0 1-1-1v-13a1 1 0 0 1 1-1Z" fill="#61666D"/><path d="M13.362 12.134a1 1 0 0 1 0 1.732l-3 1.732a1 1 0 0 1-1.5-.866v-3.464a1 1 0 0 1 1.5-.866l3 1.732Z" fill="#61666D"/></symbol><symbol id="header-channel" fill="none" viewBox="0 0 21 21"><circle cx="5.688" cy="14" r="3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="10.5" cy="5.688" r="3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="15.313" cy="14" r="3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></symbol><symbol id="header-collect" fill="none" viewBox="0 0 20 21"><path clip-rule="evenodd" d="m11.05 3.168 1.741 3.528c.163.33.48.56.844.613l3.894.566a1.12 1.12 0 0 1 .621 1.911l-2.817 2.747a1.12 1.12 0 0 0-.323.993l.666 3.877a1.12 1.12 0 0 1-1.626 1.181l-3.484-1.83a1.12 1.12 0 0 0-1.042 0l-3.483 1.83a1.12 1.12 0 0 1-1.626-1.18l.664-3.878a1.119 1.119 0 0 0-.321-.993L1.939 9.786a1.121 1.121 0 0 1 .622-1.911l3.894-.566a1.12 1.12 0 0 0 .843-.613L9.04 3.168a1.121 1.121 0 0 1 2.01 0Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M11.603 11.874a1.618 1.618 0 0 1-3.12-.017" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></symbol><symbol id="header-creation" fill="none" viewBox="0 0 20 21"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.743c-.07 0-.14 0-.212.002-3.934.11-7.204 3.404-7.286 7.338a7.478 7.478 0 0 0 2.868 6.05.83.83 0 0 1 .303.472l.631 2.842a2.082 2.082 0 0 0 2.032 1.63h3.326c.976 0 1.822-.678 2.034-1.633l.632-2.842a.825.825 0 0 1 .3-.467A7.478 7.478 0 0 0 17.5 9.243a7.5 7.5 0 0 0-7.5-7.5Zm0 1.666a5.84 5.84 0 0 1 5.834 5.834 5.798 5.798 0 0 1-2.236 4.582 2.505 2.505 0 0 0-.85 1.235H7.253a2.516 2.516 0 0 0-.85-1.236 5.786 5.786 0 0 1-2.233-4.706c.063-3.063 2.605-5.622 5.665-5.706.055-.002.111-.003.166-.003ZM7.637 16.76l.295 1.326c.042.191.21.324.404.324h3.326a.413.413 0 0 0 .407-.326l.294-1.323H7.637Zm2.72-10.662a.8.8 0 0 1 .359 1.074l-.609 1.216h1.08a.8.8 0 0 1 .716 1.158l-1.188 2.374a.8.8 0 1 1-1.43-.716l.607-1.216h-1.08a.8.8 0 0 1-.715-1.158l1.187-2.374a.8.8 0 0 1 1.074-.358Z" fill="currentColor"/></symbol><symbol id="header-creator" fill="none" viewBox="0 0 18 18"><path d="M12.082 10h2.06c.909 0 1.646.737 1.646 1.647v1.235c0 .91-.737 1.647-1.647 1.647H3.847c-.91 0-1.647-.737-1.647-1.647v-1.235c0-.91.737-1.647 1.647-1.647h2.059M8.994 11.235V3.824M12.082 6.294 8.994 3.206 5.906 6.294" stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"/></symbol><symbol id="header-download" fill="none" viewBox="0 0 20 20"><path d="M16.703 10.764c.716 0 1.297.548 1.297 1.223v4.79c0 .675-.58 1.223-1.297 1.223h-4.595c-.716 0-1.297-.547-1.297-1.223v-4.79c0-.675.58-1.223 1.297-1.223h4.595ZM2.81 13.465c.448 0 .81.342.81.764v2.854c0 .422-.362.764-.81.764-.448 0-.811-.342-.811-.764v-2.854c0-.422.363-.764.81-.764Zm5.621 0c.448 0 .811.342.811.764v2.854c0 .422-.363.764-.81.764-.448 0-.811-.342-.811-.764v-2.854c0-.422.363-.764.81-.764Zm-2.81.662c.447 0 .81.343.81.765v1.528c0 .422-.363.765-.81.765-.448 0-.811-.342-.811-.765v-1.528c0-.422.363-.765.81-.765Zm10.756-1.834h-3.946v4.178h3.946v-4.178Zm-7.946-1.529c.448 0 .811.343.811.765s-.363.764-.81.764H2.81c-.448 0-.811-.342-.811-.764s.363-.765.81-.765h5.622ZM7.892 2c.716 0 1.297.548 1.297 1.223v4.79c0 .675-.58 1.223-1.297 1.223H3.297C2.581 9.236 2 8.688 2 8.013v-4.79C2 2.548 2.58 2 3.297 2h4.595Zm8.81 0C17.42 2 18 2.548 18 3.223v4.79c0 .675-.58 1.223-1.297 1.223h-4.595c-.716 0-1.297-.548-1.297-1.223v-4.79c0-.675.58-1.223 1.297-1.223h4.595ZM7.569 3.529H3.622v4.178h3.946V3.529Zm8.81 0h-3.946v4.178h3.946V3.529Z" fill="currentColor"/></symbol><symbol id="header-dynamic" fill="none" viewBox="0 0 22 22"><path d="M0 0h22v22H0V0Z" fill="#fff" fill-opacity=".01"/><path d="M11 11a4.583 4.583 0 1 1 0-9.167V11ZM11 11a4.583 4.583 0 0 1-9.167 0H11ZM11 11a4.583 4.583 0 0 1 9.167 0H11ZM11 11a4.583 4.583 0 0 1 0 9.167V11Z" stroke="#61666D" stroke-width="2" stroke-linejoin="round"/></symbol><symbol id="header-history" fill="none" viewBox="0 0 20 21"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 1.743a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 1.636c4.061 0 7.364 3.304 7.364 7.364 0 4.06-3.303 7.363-7.363 7.363-4.061 0-7.364-3.303-7.364-7.363 0-4.06 3.303-7.364 7.364-7.364Z" fill="#61666D"/><path d="M10 6.652v4.091M12.454 10.743H10" stroke="#61666D" stroke-width="1.7" stroke-linecap="round"/></symbol><symbol id="header-hot" fill="none" viewBox="0 0 22 22"><path fill-rule="evenodd" clip-rule="evenodd" d="m4.89 17.272.003.002a8.562 8.562 0 0 0 6.07 2.515c2.287 0 4.248-.735 5.648-2.178l.002-.002c1.387-1.475 2.17-3.427 2.13-5.427.042-.799-.051-2.819-1.334-5.427v-.001c-.2-.399-.593-.688-1.07-.784a1.409 1.409 0 0 0-1.278.387c-.152.13-.281.26-.396.375l-.001.001-.031.031c-.422-3.408-2.025-5.027-3.468-5.76a.669.669 0 0 0-.061-.053.325.325 0 0 0-.135-.062c-.741-.28-1.559.123-1.845.887v.002c-.618 1.688-1.771 2.845-2.958 3.989-1.648 1.564-3.407 3.27-3.364 6.326-.043 1.962.743 3.79 2.089 5.179Zm-1.84-4.207a6.746 6.746 0 0 1-.048-.971C2.959 9.13 4.653 7.478 6.305 5.912c1.185-1.144 2.37-2.33 3.006-4.065.254-.678.974-1.017 1.61-.763.041 0 .084.043.126.085.88.44 1.838 1.227 2.528 2.604-.69-1.377-1.648-2.164-2.528-2.604-.042-.042-.085-.085-.127-.085-.635-.254-1.355.085-1.609.763-.635 1.736-1.82 2.921-3.006 4.065-1.652 1.566-3.346 3.218-3.303 6.182-.008.328.009.652.048.97Zm11.427-5.883c.106-.085.212-.19.328-.307.117-.117.244-.244.392-.37a1.21 1.21 0 0 1 1.1-.34c.424.085.763.34.932.678-.169-.339-.508-.593-.931-.677a1.21 1.21 0 0 0-1.101.338c-.148.127-.275.254-.392.37l-.143.143a2.69 2.69 0 0 1-.185.165Zm-1.78-.823c.146.796.186 1.62.17 2.39a12.118 12.118 0 0 0-.17-2.39Zm4.039 4.306c.075.483.112.974.112 1.471v.043c0 1.524-.55 3.048-1.609 4.15-1.186 1.1-2.71 1.693-4.319 1.608a6.533 6.533 0 0 0 0 0c1.61.085 3.133-.508 4.32-1.609 1.058-1.1 1.608-2.625 1.608-4.15v-.042c0-.497-.037-.988-.112-1.47Zm-5.805 7.073c1.55.081 3.02-.488 4.168-1.552 1.016-1.06 1.55-2.531 1.55-4.008v-.042c0-1.274-.252-2.51-.754-3.641-.651.622-1.11.996-1.477 1.192-.206.11-.391.17-.572.18a1.156 1.156 0 0 1-.499-.085c-.426-.16-.68-.58-.68-1.033v-.004c.022-1.048-.062-2.19-.372-3.21-.285-.941-.758-1.767-1.505-2.328-.824 1.742-2.065 2.979-3.203 4.076l-.079.077c-1.536 1.494-2.695 2.62-2.655 4.772v.004c0 1.388.53 2.692 1.508 3.67l.003.002a6.333 6.333 0 0 0 4.556 1.93h.01Z" fill="currentColor"/></symbol><symbol id="header-login" fill="none" viewBox="0 0 18 18"><path d="M6.75 8.25v2.625m4.5-2.625v2.625m-3.938-6.75H5.928c-1.418 0-2.128 0-2.67.276-.476.243-.864.63-1.107 1.107-.276.542-.276 1.252-.276 2.67v2.769c0 1.419 0 2.128.276 2.67.243.476.63.864 1.107 1.107C3.8 15 4.51 15 5.928 15h6.144c1.419 0 2.128 0 2.67-.276.476-.243.864-.63 1.107-1.107.276-.542.276-1.252.276-2.67V8.178c0-1.418 0-2.128-.276-2.67a2.533 2.533 0 0 0-1.107-1.107c-.542-.276-1.252-.276-2.67-.276h-1.384m-3.376 0h3.376m-3.376 0-1.687-2.25m5.063 2.25 1.687-2.25" stroke="#fff" stroke-width="1.333" stroke-linecap="round" stroke-linejoin="round"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.175 1.275a.75.75 0 0 1 1.05.15l1.463 1.95h2.625l1.462-1.95a.75.75 0 1 1 1.2.9l-.788 1.05c.508.003.94.011 1.31.041.523.043.984.133 1.412.351a3.6 3.6 0 0 1 1.574 1.574c.218.428.308.89.35 1.411.042.506.042 1.13.042 1.901v1.819c0 .77 0 1.395-.041 1.9-.043.523-.133.984-.351 1.412a3.6 3.6 0 0 1-1.574 1.574c-.428.218-.89.308-1.411.35-.506.042-1.13.042-1.901.042H6.403c-.77 0-1.395 0-1.901-.041-.522-.043-.983-.133-1.411-.351a3.6 3.6 0 0 1-1.574-1.574c-.218-.428-.308-.89-.35-1.411-.042-.506-.042-1.13-.042-1.901V8.653c0-.77 0-1.395.041-1.901.043-.522.133-.983.351-1.411a3.6 3.6 0 0 1 1.574-1.574c.428-.218.89-.308 1.411-.35.37-.03.803-.04 1.311-.041l-.788-1.051a.75.75 0 0 1 .15-1.05Zm-.55 3.636c-.43.035-.672.1-.853.193a2.1 2.1 0 0 0-.918.918c-.093.181-.158.423-.193.852-.035.438-.036 1-.036 1.811v1.755c0 .81 0 1.373.036 1.81.035.43.1.672.193.853a2.1 2.1 0 0 0 .918.918c.181.093.423.158.852.193.438.035 1 .036 1.811.036h5.13c.81 0 1.373 0 1.81-.036.43-.035.672-.1.853-.193a2.1 2.1 0 0 0 .918-.918c.093-.181.158-.423.193-.852.035-.438.036-1 .036-1.811V8.685c0-.81 0-1.373-.036-1.81-.035-.43-.1-.672-.193-.853a2.1 2.1 0 0 0-.918-.918c-.181-.093-.423-.158-.852-.193-.438-.035-1-.036-1.811-.036h-5.13c-.81 0-1.373 0-1.81.036ZM6.75 7.5a.75.75 0 0 1 .75.75v2.625a.75.75 0 0 1-1.5 0V8.25a.75.75 0 0 1 .75-.75Zm4.5 0a.75.75 0 0 1 .75.75v2.625a.75.75 0 0 1-1.5 0V8.25a.75.75 0 0 1 .75-.75Z" fill="#61666D"/></symbol><symbol id="header-message" fill="none" viewBox="0 0 20 20"><path d="M15.435 17.315H4.567A3.571 3.571 0 0 1 1 13.748V5.31c0-1.966 1.6-3.567 3.567-3.567h10.866c1.966 0 3.567 1.6 3.567 3.567v8.438a3.57 3.57 0 0 1-3.565 3.567ZM4.567 3.543c-.974 0-1.766.793-1.766 1.767v8.438c0 .973.792 1.766 1.766 1.766h10.866c.974 0 1.766-.793 1.766-1.766V5.31c0-.974-.792-1.767-1.766-1.767H4.567Z" fill="currentColor"/><path d="M10 10.743c-.488 0-.978-.133-1.403-.398l-.056-.039L4.333 7.2a.778.778 0 0 1-.143-1.147.918.918 0 0 1 1.23-.134l4.174 3.083a.826.826 0 0 0 .813 0L14.58 5.92a.918.918 0 0 1 1.23.134.78.78 0 0 1-.143 1.147L11.4 10.345a2.655 2.655 0 0 1-1.402.398Z" fill="currentColor"/></symbol><symbol id="header-order" fill="none" viewBox="0 0 24 24"><rect opacity=".01" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.5 4h7a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5Zm-2-1c.456-.607 1.182-1 2-1h7c.818 0 1.544.393 2 1h2C20.88 3 22 4.063 22 5.375v14.25C22 20.937 20.88 22 19.5 22h-15C3.12 22 2 20.937 2 19.625V5.375C2 4.063 3.12 3 4.5 3h2ZM6 4.9H4.5c-.276 0-.5.213-.5.475v14.25c0 .262.224.475.5.475h15c.276 0 .5-.213.5-.475V5.375a.488.488 0 0 0-.5-.475H18v1.6A2.5 2.5 0 0 1 15.5 9h-7A2.5 2.5 0 0 1 6 6.5V4.9Zm0 7.6a1 1 0 0 1 1-1h7a1 1 0 1 1 0 2H7a1 1 0 0 1-1-1Zm1 3a1 1 0 1 0 0 2h3a1 1 0 1 0 0-2H7Z" fill="#61666D"/></symbol><symbol id="header-search" fill="none" viewBox="0 0 19 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.345 15.7c.293.292.13.572-.152.863-.043.065-.097.119-.14.162-.282.248-.607.399-.868.14l-3.5-3.483a6.938 6.938 0 0 1-4.238 1.445c-3.826 0-6.947-3.096-6.947-6.914C1.5 4.106 4.61 1 8.447 1c3.826 0 6.947 3.095 6.947 6.913a6.908 6.908 0 0 1-1.528 4.325l3.48 3.462ZM3.136 7.903c0 2.912 2.385 5.274 5.3 5.274 2.916 0 5.3-2.362 5.3-5.274s-2.384-5.274-5.3-5.274c-2.926 0-5.3 2.372-5.3 5.274Z" fill="currentColor"/></symbol><symbol id="header-subscription" fill="none" viewBox="0 0 20 21"><path d="M0 .743h20v20H0v-20Z" fill="#fff" fill-opacity=".01"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6.633 6.576A3.368 3.368 0 0 1 9.2 3.306v6.541a3.368 3.368 0 0 1-2.567-3.27ZM10 1.61A4.967 4.967 0 0 0 6.35 9.943H1.667a.8.8 0 0 0-.8.8A4.967 4.967 0 0 0 9.2 14.394v4.682a.8.8 0 0 0 .8.8 4.967 4.967 0 0 0 3.652-8.333h4.681a.8.8 0 0 0 .8-.8A4.967 4.967 0 0 0 10.8 7.091V2.41a.8.8 0 0 0-.8-.8Zm-4.167 12.5a3.368 3.368 0 0 1-3.27-2.567h6.541a3.368 3.368 0 0 1-3.27 2.567Zm5.063-4.167h6.542a3.368 3.368 0 0 0-6.542 0ZM10.8 18.18V11.64a3.368 3.368 0 0 1 0 6.541Z" fill="#61666D"/></symbol><symbol id="header-vip" fill="none" viewBox="0 0 22 21"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 1.743a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 1.636c4.06 0 7.364 3.303 7.364 7.364 0 4.06-3.303 7.363-7.364 7.363-4.06 0-7.363-3.303-7.363-7.363 0-4.06 3.303-7.364 7.363-7.364Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.576 6.881c.194.347.338.72.429 1.105a2.13 2.13 0 0 1-.075 1.081c-.881.206-1.78.326-2.685.361-.021 0-.047.066-.074.196.018.393.136.773.346 1.105.206.262.32.148.56.075a4.27 4.27 0 0 1 1.49-.165c.174.115-.608 1.204-.823 1.53-.214.329-1.062 1.383-1.499 1.532-.436.146-.329.384.074.696.435.251.964.28 1.425.082.407-.21.743-.534.964-.935.131-.327 1.17-2.684 1.293-2.897.124-.213.297-.262.562-.353a6.257 6.257 0 0 1 2.066-.245c.577.1 1.071.123 1.13-.425a1.317 1.317 0 0 0-.618-1.278 2.953 2.953 0 0 0-1.598.172c-.248.083-.899.377-.98.303-.083-.073.213-.77-.083-1.35a1.722 1.722 0 0 0-1.426-.82c-.386 0-.543.181-.478.23Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.467 11.465a.256.256 0 0 0-.016.324c.074.122 2.57 2.32 2.858 2.556.288.234.42.154.723-.811.305-.966-1.202-1.502-1.646-1.72a5.988 5.988 0 0 0-1.4-.406c-.065-.004-.15-.012-.236-.012-.11 0-.218.014-.283.069Z" fill="currentColor"/></symbol><symbol id="history-carplay" fill="none" viewBox="0 0 16 17"><path d="M2.113 9.853c0-1.491 1.31-2.694 2.835-2.627a69.63 69.63 0 0 0 6.104 0c1.526-.067 2.835 1.136 2.835 2.627v2.02a.5.5 0 0 1-.5.5H2.613a.5.5 0 0 1-.5-.5v-2.02Z" stroke="#979797"/><path d="M4.227 4.548A1.5 1.5 0 0 1 5.692 3.37h4.743A1.5 1.5 0 0 1 11.9 4.548L12.438 7c-.266.031-.62.07-1.032.11-.942.09-2.186.18-3.406.18-1.22 0-2.431-.09-3.34-.18a39.698 39.698 0 0 1-.972-.108l.539-2.454Z" stroke="#979797"/><circle cx="4.722" cy="9.824" r=".766" fill="#979797"/><circle cx="11.278" cy="9.824" r=".766" fill="#979797"/><path d="M3.04 12.702h.817L3.6 13.775a.284.284 0 0 1-.56-.067v-1.006ZM12.918 12.702H12.1l.258 1.073a.284.284 0 0 0 .56-.067v-1.006Z" fill="#D8D8D8" stroke="#979797"/></symbol><symbol id="history-ipad" fill="none" viewBox="0 0 16 16"><path d="M4.6 13.5A1.5 1.5 0 0 1 3.1 12V4a1.5 1.5 0 0 1 1.5-1.5h6.796a1.5 1.5 0 0 1 1.5 1.5v8a1.5 1.5 0 0 1-1.5 1.5H4.6Z" stroke="currentColor"/><path d="M8.5 11.5h-1" stroke="currentColor" stroke-linecap="round"/></symbol><symbol id="history-pc" fill="none" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.55 13a.5.5 0 1 1 0 1h-5a.5.5 0 0 1 0-1h5Zm2.5-11a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-10a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10Zm0 1h-10a1 1 0 0 0-.993.883L2.05 4v6a1 1 0 0 0 .883.993L3.05 11h10a1 1 0 0 0 .993-.883L14.05 10V4a1 1 0 0 0-1-1Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 11h2l1 3H6l1-3Z" fill="currentColor"/></symbol><symbol id="history-phone" fill="none" viewBox="0 0 16 16"><path d="M9.096 2.5V3a.5.5 0 0 1-.5.5H7.404a.5.5 0 0 1-.5-.5v-.5h2.192Z" fill="#61666D" stroke="#61666D"/></symbol><symbol id="history-tv" fill="none" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10Zm0 1H3a1 1 0 0 0-.993.883L2 4v6a1 1 0 0 0 .883.993L3 11h10a1 1 0 0 0 .993-.883L14 10V4a1 1 0 0 0-1-1Z" fill="#999"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6.188 6.09V9.3h-.96V6.089h-1.09v-.788h3.14v.788h-1.09Zm5.408-.789L10.336 9.3H9.13L7.855 5.301h1.12l.764 2.982h.044l.753-2.982h1.06Z" fill="#999"/><path d="M3.5 11.5 3 13M4.182 11.5 3 13M12.5 11.5 13 13M11.864 11.5 13 13" stroke="#979797" stroke-linecap="round"/></symbol><symbol id="history-vioce" fill="none" viewBox="0 0 16 16"><path d="M4 13.5A1.5 1.5 0 0 1 2.5 12V4A1.5 1.5 0 0 1 4 2.5h8A1.5 1.5 0 0 1 13.5 4v8a1.5 1.5 0 0 1-1.5 1.5H4Z" stroke="#979797"/><path d="M5 8.5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H5Z" stroke="#979797"/><circle cx="4.397" cy="10.444" r=".45" fill="#979797"/><circle cx="6.199" cy="10.444" r=".45" fill="#979797"/><circle cx="5.204" cy="11.714" r=".45" fill="#979797"/><circle cx="8" cy="10.444" r=".45" fill="#979797"/><circle cx="7.006" cy="11.714" r=".45" fill="#979797"/><circle cx="9.801" cy="10.444" r=".45" fill="#979797"/><circle cx="11.603" cy="10.444" r=".45" fill="#979797"/><circle cx="8.807" cy="11.714" r=".45" fill="#979797"/><circle cx="10.609" cy="11.714" r=".45" fill="#979797"/></symbol><symbol id="palette-ad" fill="none" viewBox="0 0 32 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M4 .5h24A3.5 3.5 0 0 1 31.5 4v8a3.5 3.5 0 0 1-3.5 3.5H4A3.5 3.5 0 0 1 .5 12V4A3.5 3.5 0 0 1 4 .5ZM0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4Zm9.364-1.816.948-.168c.228.432.444.912.66 1.452h4.368v.828H6.448v2.688c-.048 2.628-.456 4.728-1.236 6.312l-.708-.636c.672-1.368 1.032-3.252 1.056-5.676V3.468h4.464c-.192-.468-.42-.9-.66-1.284Zm8.76 6.588h7.824v4.416h-.876v-.636H19v.636h-.876V8.772ZM19 9.6v2.136h6.072V9.6H19Zm2.712-4.884h-2.868a8.735 8.735 0 0 1-1.452 1.536l-.516-.684c1.08-.864 1.824-1.932 2.208-3.192l.864.096a7.808 7.808 0 0 1-.588 1.416h2.352V2.184h.876v1.704h3.924v.828h-3.924V6.66h4.836v.852H16.576V6.66h5.136V4.716Z" fill="currentColor"/></symbol><symbol id="palette-channel" fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.45 9V6.5a2.7 2.7 0 1 0-2.7 2.7h2.5a.2.2 0 0 0 .2-.2Zm-2.7-7a4.5 4.5 0 0 0 0 9h2.5a2 2 0 0 0 2-2V6.5A4.5 4.5 0 0 0 6.75 2ZM9.45 14.5V17a2.7 2.7 0 1 1-2.7-2.7h2.5c.11 0 .2.09.2.2Zm-2.7 7a4.5 4.5 0 1 1 0-9h2.5a2 2 0 0 1 2 2V17a4.5 4.5 0 0 1-4.5 4.5ZM14.75 9.2h2.5a2.7 2.7 0 1 0-2.7-2.7V9c0 .11.09.2.2.2Zm2.5-7.2a4.5 4.5 0 0 0-4.5 4.5V9a2 2 0 0 0 2 2h2.5a4.5 4.5 0 1 0 0-9ZM14.75 14.3h2.5a2.7 2.7 0 1 1-2.7 2.7v-2.5c0-.11.09-.2.2-.2Zm2.5 7.2a4.5 4.5 0 0 1-4.5-4.5v-2.5a2 2 0 0 1 2-2h2.5a4.5 4.5 0 1 1 0 9Z" fill="currentColor"/></symbol><symbol id="palette-service" fill="none" viewBox="0 0 24 24"><path d="M20.4 9.6V9A8.4 8.4 0 0 0 3.6 9v.6A2.37 2.37 0 0 0 1.35 12v3a2.36 2.36 0 0 0 2.4 2.4h1.5a2.36 2.36 0 0 0 2.4-2.4v-3A2.37 2.37 0 0 0 5.4 9.6V9a6.6 6.6 0 1 1 13.2 0v.6a2.37 2.37 0 0 0-2.25 2.4v3a2.42 2.42 0 0 0 1.93 2.36 7.25 7.25 0 0 1-4.45 3.25A3.44 3.44 0 0 0 12 20.1a3 3 0 0 0-1.68.44 1.38 1.38 0 0 0 0 2.42 3 3 0 0 0 1.68.44 2.47 2.47 0 0 0 2.2-1 9.06 9.06 0 0 0 6.07-5 2.36 2.36 0 0 0 2.38-2.4v-3a2.37 2.37 0 0 0-2.25-2.4ZM18.15 12a.551.551 0 0 1 .6-.6h1.5a.551.551 0 0 1 .6.6v3a.548.548 0 0 1-.6.6h-1.5a.55.55 0 0 1-.6-.6v-3Zm-15 0a.61.61 0 0 1 .16-.44.611.611 0 0 1 .44-.16h1.5a.55.55 0 0 1 .6.6v3a.55.55 0 0 1-.6.6h-1.5a.61.61 0 0 1-.44-.16.61.61 0 0 1-.16-.44v-3Z" fill="currentColor"/></symbol><symbol id="palette-sort" fill="none" viewBox="0 0 10 10"><line x1=".65" y1="1.35" x2="9.35" y2="1.35" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/><line x1=".65" y1="5.35" x2="9.35" y2="5.35" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/><line x1=".65" y1="9.35" x2="9.35" y2="9.35" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></symbol><symbol id="palette-top" fill="none" viewBox="0 0 15 8"><path d="M6.821.627a1 1 0 0 1 1.358 0l3.938 3.638C12.787 4.883 12.35 6 11.44 6H3.56c-.91 0-1.347-1.117-.678-1.735L6.82.627Z" fill="currentColor"/></symbol><symbol id="rate-crown-gold" fill="none" viewBox="0 0 43 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 0h41c-6.118 2.651-9.759 6.623-10.922 11.914C30 21.375 24 24 21 24H0V2a2 2 0 0 1 2-2Z" fill="url(#gold_linear)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.18 9.26a.302.302 0 0 1 .06.06L18 13l3.39-1.695a.3.3 0 0 1 .423.35l-1.606 5.62a1 1 0 0 1-.961.725h-8.492a1 1 0 0 1-.961-.725l-1.606-5.62a.3.3 0 0 1 .423-.35L12 13l2.76-3.68a.3.3 0 0 1 .42-.06ZM15 14a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM7.5 8a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm15 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM15 5.7a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z" fill="#ED9600"/><defs><linearGradient id="gold_linear" x1="23" y1="0" x2="23" y2="24" gradientUnits="userSpaceOnUse"><stop stop-color="#FE0"/><stop offset="1" stop-color="#FFC901"/></linearGradient></defs></symbol><symbol id="rate-crown-sliver" fill="none" viewBox="0 0 43 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 0h41c-6.118 2.651-9.759 6.623-10.922 11.914C30 21.375 24 24 21 24H0V2a2 2 0 0 1 2-2Z" fill="url(#sliver_linear)"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.18 9.26a.302.302 0 0 1 .06.06L18 13l3.39-1.695a.3.3 0 0 1 .423.35l-1.606 5.62a1 1 0 0 1-.961.725h-8.492a1 1 0 0 1-.961-.725l-1.606-5.62a.3.3 0 0 1 .423-.35L12 13l2.76-3.68a.3.3 0 0 1 .42-.06ZM15 14a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM7.5 8a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm15 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM15 5.7a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z" fill="#5F95A9"/><defs><linearGradient id="sliver_linear" x1="23" y1="24" x2="23" y2="0" gradientUnits="userSpaceOnUse"><stop stop-color="#ADC1D1"/><stop offset="1" stop-color="#D5DCE3"/></linearGradient></defs></symbol><symbol id="user-auth-company" viewBox="0 0 1024 1024"><path d="M141.211 512a370.789 370.789 0 1 0 741.578 0 370.789 370.789 0 1 0-741.578 0Z" fill="#333"/><path d="M93.09 512a418.91 418.91 0 1 0 837.82 0 418.91 418.91 0 1 0-837.82 0Z" fill="#4ac7ff"/><path d="M474.112 763.95a33.28 33.28 0 0 1-14.057 4.05 21.039 21.039 0 0 1-21.318-20.806 19.55 19.55 0 0 1 1.21-5.865l40.495-187.438-167.657.326a21.225 21.225 0 0 1-21.876-20.806 20.433 20.433 0 0 1 9.495-16.85l250.182-255.767c4.608-2.793 9.542-4.747 14.662-4.794a21.132 21.132 0 0 1 21.364 20.852 19.968 19.968 0 0 1-2.792 9.775l-40.216 184.32h167.843a21.178 21.178 0 0 1 21.644 20.852 20.294 20.294 0 0 1-9.495 16.943L474.112 763.95z" fill="#fff"/></symbol><symbol id="user-auth-people" viewBox="0 0 1024 1024"><path d="M0 512a512 512 0 1 0 1024 0A512 512 0 1 0 0 512z" fill="#FFF"/><path d="M93.09 512a418.91 418.91 0 1 0 837.82 0 418.91 418.91 0 1 0-837.82 0z" fill="#FFC62E"/><path d="M474.112 763.95a33.28 33.28 0 0 1-14.057 4.05 21.039 21.039 0 0 1-21.318-20.806 19.55 19.55 0 0 1 1.21-5.865l40.495-187.438-167.657.326a21.225 21.225 0 0 1-21.876-20.806 20.433 20.433 0 0 1 9.495-16.85l250.182-255.767c4.608-2.793 9.542-4.747 14.662-4.794a21.132 21.132 0 0 1 21.364 20.852 19.968 19.968 0 0 1-2.792 9.775l-40.216 184.32h167.843a21.178 21.178 0 0 1 21.644 20.852 20.294 20.294 0 0 1-9.495 16.943L474.112 763.95z" fill="#FFF"/></symbol><symbol id="user-cheese" fill="none" viewBox="0 0 24 24"><rect opacity=".01" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.372 1h4.494C18.689 1 21 3.311 21 6.134v11.875A5.006 5.006 0 0 1 16.009 23H4.722A2.731 2.731 0 0 1 2 20.277V3.723A2.731 2.731 0 0 1 4.722 1h6.65ZM10 3H8v5.151l.106-.039a2.578 2.578 0 0 1 1.79 0l.104.039V3ZM6 3v7.058c0 .398.293.7.627.7a.574.574 0 0 0 .2-.037l1.975-.734a.568.568 0 0 1 .397 0l1.975.734a.574.574 0 0 0 .2.037c.333 0 .626-.302.626-.7V3h3.867A3.136 3.136 0 0 1 19 6.134v11.875A2.995 2.995 0 0 1 16.009 21H4.722A.732.732 0 0 1 4 20.277V3.723C4 3.331 4.331 3 4.722 3h1.277Z" fill="#61666D"/></symbol><symbol id="user-lang" fill="none" viewBox="0 0 24 24"><path opacity=".01" d="M0 0h24v24H0V0Z" fill="#C4C4C4"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10Zm-2.29-2.333A17.9 17.9 0 0 1 8.027 13H4.062a8.008 8.008 0 0 0 5.648 6.667ZM10.03 13c.151 2.439.848 4.73 1.97 6.752A15.906 15.906 0 0 0 13.97 13h-3.94Zm9.908 0h-3.965a17.9 17.9 0 0 1-1.683 6.667A8.008 8.008 0 0 0 19.938 13ZM4.062 11h3.965A17.9 17.9 0 0 1 9.71 4.333 8.008 8.008 0 0 0 4.062 11Zm5.969 0h3.938A15.904 15.904 0 0 0 12 4.248 15.906 15.906 0 0 0 10.03 11h.001Zm4.259-6.667A17.9 17.9 0 0 1 15.973 11h3.965a8.008 8.008 0 0 0-5.648-6.667Z" fill="#61666D"/></symbol><symbol id="user-live" fill="none" viewBox="0 0 24 24"><rect opacity=".01" width="24" height="24" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 2h-13A2.507 2.507 0 0 0 1 4.5v14C1 19.875 2.125 21 3.5 21h13c1.375 0 2.5-1.125 2.5-2.5v-14C19 3.125 17.875 2 16.5 2Zm0 2c.271 0 .5.229.5.5v14c0 .271-.229.5-.5.5h-13a.507.507 0 0 1-.5-.5v-14c0-.271.229-.5.5-.5h13Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.054 5c-.107 0-.216.01-.325.03l-2.1.392C17.69 5.598 17 6.509 17 7.576v7.496c0 1.068.69 1.979 1.63 2.155l2.1.391c.109.021.218.03.325.03 1.054 0 1.946-.959 1.946-2.184V7.185C23 5.959 22.108 5 21.054 5Zm-.086 2.021c.017.036.032.09.032.164v8.279a.388.388 0 0 1-.032.164l-1.915-.357a.355.355 0 0 1-.053-.199V7.576c0-.101.032-.168.053-.198l1.915-.357ZM5 7a1 1 0 0 1 1-1h3a1 1 0 0 1 0 2H6a1 1 0 0 1-1-1Z" fill="#61666D"/></symbol><symbol id="user-logout" fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M23.228 12.133A1.061 1.061 0 0 0 23 10.979l-2.995-2.995a1.059 1.059 0 1 0-1.497 1.498l1.187 1.187h-9.423a1.058 1.058 0 1 0 0 2.118h9.423l-1.187 1.187a1.059 1.059 0 1 0 1.497 1.498L23 12.477c.097-.098.175-.214.228-.344Z" fill="#61666D"/><path d="M16.262 17.718a8.471 8.471 0 1 1 0-11.98" stroke="#61666D" stroke-width="2" stroke-linecap="round"/></symbol><symbol id="user-pay" fill="none" viewBox="0 0 24 24"><path opacity=".01" d="M0 0h24v24H0V0Z" fill="#C4C4C4"/><path fill-rule="evenodd" clip-rule="evenodd" d="M20.5 8h-5.22A3.291 3.291 0 0 0 12 11.281v1.438A3.291 3.291 0 0 0 15.28 16h5.22a2.5 2.5 0 0 0 2.5-2.5v-3A2.5 2.5 0 0 0 20.5 8Zm0 2c.275 0 .5.225.5.5v3c0 .275-.225.5-.5.5h-5.22A1.299 1.299 0 0 1 14 12.719v-1.438c0-.694.587-1.281 1.28-1.281h5.22Z" fill="#61666D"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.433 2h15.133A2.44 2.44 0 0 1 22 4.434V9h-2V4.434A.44.44 0 0 0 19.566 4H4.433A.439.439 0 0 0 4 4.434v15.132c0 .236.198.434.433.434h15.133a.44.44 0 0 0 .434-.434V15h2v4.566A2.44 2.44 0 0 1 19.566 22H4.433A2.44 2.44 0 0 1 2 19.566V4.434A2.44 2.44 0 0 1 4.433 2Z" fill="#61666D"/></symbol><symbol id="user-shop" fill="none" viewBox="0 0 24 24"><rect opacity=".01" x="2.182" y="2.182" width="19.636" height="19.636" fill="#C4C4C4"/><path d="M2 9a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v2l-.7.42a3.5 3.5 0 0 1-3.6 0L17 11l-.7.42a3.5 3.5 0 0 1-3.6 0L12 11l-.7.42a3.5 3.5 0 0 1-3.6 0L7 11l-.7.42a3.5 3.5 0 0 1-3.6 0L2 11V9Z" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 12.245v7.922a1.5 1.5 0 0 0 1.5 1.5h13a1.5 1.5 0 0 0 1.5-1.5V12M4 6.911v-2.41A1.5 1.5 0 0 1 5.5 3h13A1.5 1.5 0 0 1 20 4.5V7" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14.5 17h-5v4.666h5V17Z" stroke="#61666D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></symbol><symbol id="widget-agree" fill="none" viewBox="0 0 17 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.78 2.335a.553.553 0 0 0-.452.196c-.176.206-.248.376-.336.626l-.03.088c-.088.253-.2.576-.433.988-.396.702-.785 1.163-1.346 1.516-.361.227-.682.413-1.016.51v6.408h5.178c.841 0 1.574-.573 1.778-1.39l1.03-4.118a.667.667 0 0 0-.647-.828h-2.85a.5.5 0 0 1-.454-.71l.003-.005.009-.021a5.588 5.588 0 0 0 .156-.404c.091-.269.184-.606.213-.926.051-.564.063-.923-.166-1.357-.245-.465-.495-.56-.636-.573Zm1.596 2.996h2.13a1.667 1.667 0 0 1 1.617 2.07l-1.03 4.12a2.833 2.833 0 0 1-2.748 2.146H4A2.167 2.167 0 0 1 1.833 11.5V7.497c0-1.196.97-2.166 2.167-2.166h1.667c.215 0 .44-.086.984-.428.376-.237.663-.551 1.008-1.162.186-.33.272-.576.358-.824l.032-.092c.104-.295.225-.6.52-.944a1.552 1.552 0 0 1 1.303-.542c.565.052 1.072.424 1.43 1.103.375.712.33 1.331.277 1.913-.032.351-.117.696-.204.976Zm-6.21 7.336V6.33H4c-.644 0-1.167.522-1.167 1.166V11.5c0 .644.523 1.167 1.167 1.167h1.167Z" fill="currentColor"/></symbol><symbol id="widget-arrow" viewBox="0 0 1024 1024"><path fill="none" stroke-linejoin="round" stroke-linecap="round" stroke-width="145.067" stroke="currentColor" d="m341.333 170.667 341.334 341.332-341.334 341.335"/></symbol><symbol id="widget-bookmark" fill="none" viewBox="0 0 15 15"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.695 2.188c.902-.007 1.79.365 2.618 1.065.9.762 1.292 1.946 1.28 3.118-.011 1.175-.427 2.404-1.232 3.312-1.468 1.659-3.227 3.009-4.078 3.623a1.332 1.332 0 0 1-1.566-.002c-.848-.615-2.6-1.963-4.077-3.62-.806-.902-1.222-2.132-1.233-3.308-.012-1.173.38-2.36 1.28-3.123.805-.681 1.692-1.05 2.596-1.05.783 0 1.536.277 2.216.797.674-.52 1.416-.807 2.196-.812Zm.007.937c-.625.004-1.264.267-1.887.833a.469.469 0 0 1-.63 0c-.618-.561-1.267-.817-1.902-.817-.637 0-1.317.258-1.99.828-.63.533-.959 1.418-.949 2.398.01.977.359 1.98.995 2.694 1.413 1.582 3.102 2.885 3.928 3.484a.394.394 0 0 0 .468 0c.829-.598 2.523-1.9 3.924-3.483.639-.721.987-1.725.997-2.7.01-.978-.319-1.86-.949-2.393-.7-.593-1.379-.848-2.005-.844Z" fill="currentColor"/></symbol><symbol id="widget-coin" viewBox="0 0 1024 1024"><path fill="currentColor" d="M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64zm0 64c-212.077 0-384 171.923-384 384s171.923 384 384 384 384-171.923 384-384-171.923-384-384-384zm155.52 118.144c20.224 0 36.608 14.912 36.608 33.28 0 18.432-16.384 33.344-36.608 33.344H545.28v61.12c107.27 5.592 192.973 90.674 199.523 197.165l.029.595.384 11.904v44.48c.003.159.004.347.004.536 0 18.38-14.9 33.28-33.28 33.28-16.467 0-30.141-11.96-32.809-27.668l-.028-.196-.512-5.952v-44.48c-.282-71.949-53.31-131.428-122.408-141.79l-.792-.098-10.112-1.152v311.04c.003.159.004.347.004.536 0 18.38-14.9 33.28-33.28 33.28-16.467 0-30.141-11.96-32.809-27.668l-.028-.196-.512-6.016V440.512c-71.128 5.419-127.509 61.8-132.898 132.441l-.03.487-.384 10.112v44.48c.003.159.004.347.004.536 0 18.38-14.9 33.28-33.28 33.28-16.467 0-30.141-11.96-32.809-27.668l-.028-.196-.512-5.952v-44.48c.339-108.061 82.027-196.938 187.017-208.618l.951-.086 11.904-.96v-61.12H350.717c-20.16 0-36.48-14.912-36.48-33.28 0-18.432 16.32-33.28 36.48-33.28h316.8z"/></symbol><symbol id="widget-danmaku" viewBox="0 0 1024 1024"><path fill="currentColor" d="M800 128c89.6 0 160 70.4 160 160v448c0 89.6-70.4 160-160 160H224c-89.6 0-160-70.4-160-160V288c0-89.6 70.4-160 160-160h576zm0 64H224c-51.2 0-91.072 36.864-95.552 86.528L128 288v448c0 51.2 36.864 91.072 86.528 95.552L224 832h576c51.2 0 91.072-36.864 95.552-86.528L896 736V288c0-54.4-41.6-96-96-96zM368 576v64h-64v-64h64zm416 0v64H432v-64h352zM304 384v64h-64v-64h64zm448 0v64H368v-64h384z"/></symbol><symbol id="widget-download" fill="none" viewBox="0 0 23 26"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.455 8.246c-2.278 0-3.32 2.833-1.595 4.312l8.676 7.433a2.952 2.952 0 0 0 3.84 0l8.677-7.433c1.728-1.48.679-4.312-1.596-4.312H17.1V3.108A3.113 3.113 0 0 0 13.99 0H8.484a3.114 3.114 0 0 0-3.11 3.108v5.138h-2.92Zm2.638 14.663a1.273 1.273 0 1 0 0 2.546H17.82a1.273 1.273 0 1 0 0-2.546H5.093Z" fill="currentColor"/></symbol><symbol id="widget-entry-arrow" fill="none" viewBox="0 0 7 11"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.104 1.104a.355.355 0 0 0 0 .502l3.888 3.887-3.888 3.888a.355.355 0 0 0 .502.502l3.97-3.972a.591.591 0 0 0 0-.836l-3.97-3.971a.355.355 0 0 0-.502 0Z" fill="currentColor"/><path d="M1.104 1.606 1.81.898l-.707.708Zm0-.502.707.707-.707-.707Zm3.888 4.39.707.706a1 1 0 0 0 0-1.414l-.707.707ZM1.104 9.38l-.707-.707.707.707Zm0 .502-.707.707.707-.707Zm.502 0-.708-.708.708.708Zm3.97-3.972.708.707-.707-.707Zm0-.836-.706.707.707-.707Zm-3.97-3.971-.708.707.708-.707ZM1.81.898a.645.645 0 0 1 0 .913L.397.397c-.53.529-.53 1.387 0 1.916L1.81.898Zm3.888 3.888L1.81.898.397 2.313 4.284 6.2 5.7 4.786ZM1.81 10.088 5.699 6.2 4.284 4.786.397 8.674l1.414 1.414Zm0-.913a.645.645 0 0 1 0 .913L.397 8.674c-.53.529-.53 1.387 0 1.916L1.81 9.175Zm-.913 0a.645.645 0 0 1 .913 0L.397 10.59c.529.529 1.387.529 1.916 0L.898 9.175Zm3.972-3.97L.898 9.174l1.415 1.415 3.971-3.972L4.87 5.204Zm0 .577a.409.409 0 0 1 0-.578l1.414 1.414a1.591 1.591 0 0 0 0-2.25L4.87 5.782ZM.898 1.811 4.87 5.782l1.414-1.414L2.313.397.898 1.81Zm.913 0a.645.645 0 0 1-.913 0L2.313.397a1.355 1.355 0 0 0-1.916 0L1.81 1.81Z" fill="currentColor"/></symbol><symbol id="widget-favorite" viewBox="0 0 1024 1024"><path fill="currentColor" d="M722.88 311.04c-36.771-6.091-67.347-28.365-84.62-59.115l-.308-.597L565.44 99.712c-20.736-47.616-86.144-47.616-109.888 0l-65.28 142.848c-17.92 35.712-50.56 62.528-89.152 68.48l-154.496 23.808c-47.488 5.952-68.288 65.472-32.64 101.184l115.84 119.04c26.688 26.816 38.592 65.536 32.64 104.192L235.776 825.92c-8.96 50.624 44.544 86.4 89.088 62.528l130.688-71.424c16.599-9.818 36.582-15.619 57.92-15.619s41.321 5.801 58.457 15.913l130.151 71.131c44.608 23.808 95.104-11.904 89.152-62.528l-29.696-166.656c-1.052-5.987-1.654-12.88-1.654-19.914 0-32.801 13.084-62.547 34.318-84.302l115.816-119.016c35.648-35.712 14.848-95.232-32.64-101.184L722.88 311.041zm25.472 199.424c-40.704 40.768-59.2 99.904-50.048 158.592l28.48 159.936-124.672-68.16c-25.433-14.826-55.984-23.578-88.578-23.578-28.767 0-55.942 6.817-79.997 18.925l1.023-.467-134.528 73.344 25.6-159.68c9.152-59.072-9.28-118.208-50.56-159.488l-110.08-113.152 145.856-22.4c59.008-9.152 109.376-48.512 136.64-103.168l63.104-137.92 65.472 136.96c22.08 53.248 76.352 94.72 137.088 104.064L858.944 396.8 748.352 510.464z"/></symbol><symbol id="widget-follow" fill="none" viewBox="0 0 44 44"><g filter="url(#filter0_d_1644_110696)"><path fill-rule="evenodd" clip-rule="evenodd" d="M29.148 22.427a1.056 1.056 0 1 0-2.112 0v1.884h-2.005a1.056 1.056 0 0 0 0 2.112h2.005v1.912a1.056 1.056 0 0 0 2.112 0v-1.912h1.976a1.056 1.056 0 0 0 0-2.112h-1.976v-1.884Z" fill="#fff"/><path d="M24.684 31.24c-.44.32-.884.633-1.334.94a1.34 1.34 0 0 1-1.49.002 52.583 52.583 0 0 1-2.85-2.085c-.51-.4-1.006-.816-1.486-1.249l-.204-.181c-.502-.445-1.302-1.153-1.623-1.456-1.088-1.03-1.868-1.984-2.386-2.917a6.394 6.394 0 0 1-.845-3.168c0-1.796.507-3.61 1.652-4.8 1.125-1.173 2.47-1.668 4.134-1.66 1.534 0 3.225.776 4.324 1.832l.013.012.015-.013c1.151-1.074 2.957-1.83 4.46-1.83 1.687 0 3.005.48 4.142 1.66 1.145 1.189 1.536 3.002 1.536 4.798" stroke="#fff" stroke-width="2.592" stroke-linecap="round" stroke-linejoin="round"/></g><defs><filter id="filter0_d_1644_110696" x="9.17" y="13.371" width="26.867" height="24.333" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1644_110696"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1644_110696" result="shape"/></filter></defs></symbol><symbol id="widget-followed" fill="none" viewBox="0 0 45 45"><g filter="url(#filter0_d_1644_133773)"><path fill-rule="evenodd" clip-rule="evenodd" d="M31.79 14.297c-1.546-1.261-3.204-1.93-4.887-1.918-1.457.01-2.841.527-4.1 1.463-1.27-.937-2.676-1.435-4.137-1.435-1.687 0-3.343.663-4.846 1.89-1.68 1.372-2.463 3.786-2.44 5.897.021 2.117.773 4.123 2.277 5.748 2.958 3.196 6.58 5.69 8.006 6.668.685.47 1.597.471 2.283.002 1.43-.977 5.057-3.485 7.996-6.686 1.502-1.635 2.269-3.612 2.29-5.726.023-2.11-.763-4.532-2.443-5.903Zm-3.68 5.906a1 1 0 1 0-1.372-1.455l-4.214 3.974-2.101-1.91a1 1 0 0 0-1.346 1.48l2.786 2.533a1 1 0 0 0 1.36-.012l4.887-4.61Z" fill="currentColor"/></g><defs><filter id="filter0_d_1644_133773" x="9.379" y="12.379" width="26.855" height="24.584" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="2"/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_1644_133773"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_1644_133773" result="shape"/></filter></defs></symbol><symbol id="widget-gongyi" fill="none" viewBox="0 0 56 56"><circle cx="28" cy="28" r="28" fill="#00AEEC"/><path d="M41 32.78c-4.49 0-8.129 3.603-8.129 8.047M23.129 40.828c0-4.445-3.64-8.048-8.129-8.048" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/><path d="M18.534 16.728a7.327 7.327 0 0 1 6.78-1.435c.344.1.43.53.176.782l-3.412 3.37a1.097 1.097 0 0 0 0 1.56 1.124 1.124 0 0 0 1.58 0l3.948-3.9c2.835-2.802 7.432-2.802 10.267 0a7.112 7.112 0 0 1 0 10.143l-9.169 9.058a1 1 0 0 1-1.405 0l-9.565-9.449.015-.015a7.113 7.113 0 0 1 .785-10.114Z" fill="#fff"/></symbol><symbol id="widget-people" viewBox="0 0 1024 1024"><path fill="currentColor" d="M261.02 371.451c0-77.623 62.926-140.549 140.549-140.549s140.549 62.926 140.549 140.549S479.192 512 401.569 512 261.02 449.074 261.02 371.451zm140.549-200.784c-110.89 0-200.784 89.895-200.784 200.785 0 76.316 42.577 142.687 105.273 176.656-113.878 39.533-195.626 147.776-195.626 275.107 0 16.637 13.484 30.118 30.118 30.118s30.118-13.481 30.118-30.118c0-127.524 103.378-230.9 230.902-230.9s230.904 103.376 230.904 230.9c0 16.637 13.481 30.118 30.118 30.118 16.631 0 30.118-13.481 30.118-30.118 0-127.331-81.751-235.574-195.628-275.107 62.696-33.968 105.275-100.34 105.275-176.656 0-110.89-89.896-200.785-200.787-200.785zm271.057 381.49c0-16.634 13.487-30.118 30.118-30.118h.018c60.982-.01 110.417-49.448 110.417-110.432 0-60.907-49.309-110.297-110.188-110.431l-.247.001c-14.993 0-29.22 2.972-42.171 8.331-15.372 6.358-32.985-.948-39.346-16.318s.946-32.985 16.318-39.343c20.131-8.326 42.171-12.905 65.199-12.905v-.001c94.256 0 170.671 76.41 170.671 170.666 0 55.967-26.943 105.642-68.56 136.765 64.831 35.96 108.713 105.099 108.713 184.489 0 16.637-13.481 30.118-30.118 30.118-16.631 0-30.118-13.481-30.118-30.118 0-83.167-67.421-150.588-150.588-150.588-16.631 0-30.118-13.482-30.118-30.116z"/></symbol><symbol id="widget-play-count" fill="none" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.833 2.667a2.5 2.5 0 0 0-2.5 2.5v5.666a2.5 2.5 0 0 0 2.5 2.5h8.334a2.5 2.5 0 0 0 2.5-2.5V5.167a2.5 2.5 0 0 0-2.5-2.5H3.833Zm-1.5 2.5a1.5 1.5 0 0 1 1.5-1.5h8.334a1.5 1.5 0 0 1 1.5 1.5v5.666a1.5 1.5 0 0 1-1.5 1.5H3.833a1.5 1.5 0 0 1-1.5-1.5V5.167Zm8.25 3.266a.5.5 0 0 0 0-.866l-3.5-2.02a.5.5 0 0 0-.75.432v4.042a.5.5 0 0 0 .75.433l3.5-2.021Z" fill="currentColor"/></symbol><symbol id="widget-play-logo" fill="none" viewBox="0 0 48 48"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.664 5.39a2 2 0 1 0-3.328 2.22l2.026 3.038c-2.277.093-4.173.218-5.689.344-3.59.297-6.353 3.098-6.69 6.648C3.741 20.197 3.5 23.59 3.5 27c0 3.41.24 6.803.483 9.36.337 3.55 3.1 6.35 6.69 6.648 2.976.247 7.418.492 13.327.492s10.35-.245 13.327-.492c3.59-.297 6.353-3.099 6.69-6.648.242-2.557.483-5.95.483-9.36 0-3.41-.24-6.803-.483-9.36-.337-3.55-3.1-6.35-6.69-6.648-1.516-.126-3.412-.251-5.689-.344l2.026-3.039a2 2 0 1 0-3.328-2.218l-3.42 5.13a203.698 203.698 0 0 0-5.832 0l-3.42-5.13ZM30.75 24.836c1.667.962 1.667 3.368 0 4.33l-9 5.196c-1.667.962-3.75-.24-3.75-2.165V21.804c0-1.925 2.083-3.127 3.75-2.165l9 5.196Z" fill="currentColor" opacity=".9"/></symbol><symbol id="widget-roll" fill="none" viewBox="0 0 12 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.002C12 3.142 10.205.664 7.683.024a.75.75 0 0 0-.369 1.454C9.15 1.943 10.5 3.807 10.5 6c0 1.8-.908 3.38-2.25 4.144V8.25a.75.75 0 0 0-1.499 0v2.796c0 .045.004.089.013.132a.75.75 0 0 0 .932.798c2.516-.643 4.304-3.118 4.304-5.973ZM4.524.005H4.49a.757.757 0 0 0-.172.022C1.797.658 0 3.14 0 6.004c0 2.86 1.788 5.337 4.304 5.974a.75.75 0 0 0 .367-1.454C2.846 10.062 1.5 8.198 1.5 6.004c0-1.805.91-3.385 2.25-4.147V3.55a.75.75 0 0 0 1.5 0V.745a.75.75 0 0 0-.023-.173l-.01-.04A.654.654 0 0 0 5.155.39.756.756 0 0 0 4.58.01h.001a.665.665 0 0 0-.056-.004Z" fill="currentColor"/></symbol><symbol id="widget-sina" fill="none" viewBox="0 0 34 30"><path fill-rule="evenodd" clip-rule="evenodd" d="M27.211 10.657c-.551 0-1.102-.551-1.102-1.102.183-1.287-.552-2.573-2.022-2.94h-.55c-.552 0-1.103-.552-1.103-1.103 0-.551.55-1.102 1.102-1.102 2.573 0 4.594 2.021 4.594 4.593v.368c0 .918-.367 1.286-.919 1.286M13.247 19.66c-.368 0-.552.368-.552.736 0 .367.368.55.552.55.183 0 .55-.367.55-.55.185-.368-.183-.736-.55-.736m-3.124.552c-.918 0-1.654.735-1.654 1.653 0 .92.736 1.654 1.654 1.654.919 0 1.654-.735 1.654-1.654 0-.918-.735-1.653-1.654-1.653m2.94 5.145c-2.94.734-5.88-.552-6.431-3.124-.551-2.573 1.286-4.961 4.226-5.696 2.94-.735 5.88.551 6.431 3.123.551 2.573-1.286 4.962-4.226 5.697m-.735-11.576c-5.512.367-9.922 3.491-9.738 7.166.183 3.675 4.96 6.247 10.473 5.88 5.513-.368 9.922-3.491 9.739-7.167-.184-3.674-4.962-6.063-10.474-5.88m10.474-4.96c2.388 1.102.918 5.512.918 5.512a5.7 5.7 0 0 1 3.308 1.654c2.572 2.94.367 9.187-8.453 12.127-7.9 2.572-15.802 0-18.006-4.962-2.205-5.328 2.204-13.413 9.738-17.639.919-.551 3.858-1.47 5.512.368.919 1.102 0 4.226 0 4.226s3.491-2.94 6.982-1.286m10.107 1.837c0 .735-.736 1.47-1.47 1.47-.735 0-1.47-.735-1.47-1.47v-.184c.55-3.674-2.022-6.982-5.696-7.533h-1.103c-.735 0-1.47-.735-1.47-1.47S22.434 0 23.17 0h.184c5.328 0 9.738 4.41 9.738 9.738v.735c-.183 0-.183.184-.183.184" fill="currentColor"/></symbol><symbol id="widget-tv-tips" viewBox="0 0 60 60"><g id="&#x9875;&#x9762;-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="&#x5C0F;&#x7535;&#x89C6;&#x5237;&#x65B0;&#x52A0;&#x8F7D;-&#x53CC;&#x5217;" transform="translate(-154 -68)"><g id="&#x5C0F;&#x7535;&#x89C6;" transform="translate(154 68)"><rect id="&#x77E9;&#x5F62;" x="0" y="0" width="60" height="60"/><path d="M39.081 8.418c1.268-.157 2.43.712 2.67 1.955.057.296.04.539-.003.762-.045.22-.122.419-.225.598-.05.09-.11.174-.169.258l-.177.252-.357.502a70.382 70.382 0 0 1-1.473 1.974c-.092.118-.185.233-.277.35.706.023 1.413.05 2.12.08 1.487.067 2.974.15 4.462.26l.07.005.078.007.158.016c.106.008.21.024.316.04l.157.022.156.03a7.88 7.88 0 0 1 1.525.447 7.956 7.956 0 0 1 4.747 5.65c.026.104.044.209.063.314l.028.158.022.159.021.159c.008.054.012.095.017.144l.031.28a106.32 106.32 0 0 1 .62 12.39 94.188 94.188 0 0 1-.145 4.517 86.153 86.153 0 0 1-.259 3.385l-.057.564-.03.281-.015.141a8.038 8.038 0 0 1-.726 2.625 8.062 8.062 0 0 1-1.453 2.128 7.944 7.944 0 0 1-4.487 2.372c-.106.016-.212.035-.319.046l-.316.033-.557.046-1.114.086c-.743.056-1.486.104-2.23.151a192.107 192.107 0 0 1-22.317.054 154.773 154.773 0 0 1-4.458-.313l-.139-.012-.07-.006-.078-.007c-.107-.012-.214-.022-.32-.037l-.319-.049-.316-.063a7.974 7.974 0 0 1-3.44-1.7 8.02 8.02 0 0 1-2.762-4.979l-.04-.319-.03-.281a88.767 88.767 0 0 1-.277-3.382 99.285 99.285 0 0 1-.145-9.03c.085-3.007.296-6.007.62-8.996a8.058 8.058 0 0 1 .676-2.46 7.899 7.899 0 0 1 1.415-2.117 7.871 7.871 0 0 1 5.028-2.473l.157-.015.14-.01.278-.02 1.116-.073a169.996 169.996 0 0 1 5.153-.236c-.095-.12-.192-.24-.286-.362a70.382 70.382 0 0 1-1.474-1.974l-.357-.502-.177-.252c-.059-.084-.119-.168-.17-.258a2.016 2.016 0 0 1-.224-.598 1.934 1.934 0 0 1-.003-.762 2.428 2.428 0 0 1 2.67-1.955c.297.037.522.127.719.238.195.111.359.246.497.399.07.076.13.16.191.242l.184.247.365.496c.48.666.956 1.336 1.413 2.018.458.683.904 1.374 1.332 2.079.166.274.33.55.49.829a325.8 325.8 0 0 1 5.279-.02c.54.003 1.08.008 1.62.014.16-.276.321-.55.486-.823.428-.705.874-1.396 1.332-2.079.458-.682.933-1.352 1.413-2.018l.365-.496.184-.247c.061-.083.122-.166.191-.242.139-.153.302-.288.497-.4.197-.11.422-.2.72-.237ZM30.673 19.5c-2.619 0-4.97.03-7.197.09a172.005 172.005 0 0 0-6.51.276l-1.103.072-.359.025-.146.013a3.362 3.362 0 0 0-2.706 1.952c-.149.328-.25.693-.289 1.052a109.34 109.34 0 0 0-.595 8.63 95.201 95.201 0 0 0 .139 8.614 84.698 84.698 0 0 0 .262 3.202l.023.225.026.203c.015.1.03.178.043.235l.007.031a3.472 3.472 0 0 0 2.598 2.594l.166.033.158.024.164.018.205.018c1.416.12 2.872.222 4.33.304a190.612 190.612 0 0 0 10.445.294 190.038 190.038 0 0 0 11.336-.346c.663-.042 1.432-.092 2.166-.147l1.103-.085.496-.041.227-.024.137-.02a3.422 3.422 0 0 0 1.891-1.005l.013-.014a3.482 3.482 0 0 0 .937-1.985l.01-.078.047-.44.054-.536a83.256 83.256 0 0 0 .244-3.19 90.42 90.42 0 0 0 .138-4.299c.022-2.876-.076-5.782-.293-8.63a100.416 100.416 0 0 0-.298-3.215l-.029-.256-.009-.082-.026-.194-.028-.152-.016-.073a3.398 3.398 0 0 0-2.537-2.556l-.058-.013-.144-.027-.152-.022-.162-.016-.061-.005c-1.339-.1-2.755-.182-4.326-.251-2.744-.12-5.603-.185-8.739-.2-.527-.002-1.055-.003-1.582-.003Zm5.08 15.823c.102-.355.433-.517.8-.445.39.077.67.395.594.787l-.019.093-.017.082-.037.158a7.55 7.55 0 0 1-.285.92c-.157.402-.35.799-.604 1.18-.254.38-.58.747-1.006 1.036a2.897 2.897 0 0 1-.706.348c-.253.085-.521.13-.783.139-.51.016-1.025-.1-1.474-.318a3.902 3.902 0 0 1-1.145-.851 5.692 5.692 0 0 1-.672-.88 5.682 5.682 0 0 1-.672.88 3.904 3.904 0 0 1-1.145.851c-.45.218-.964.334-1.474.318a2.77 2.77 0 0 1-.783-.139 2.897 2.897 0 0 1-.706-.348 3.739 3.739 0 0 1-1.006-1.036 6.076 6.076 0 0 1-.603-1.18 7.809 7.809 0 0 1-.286-.92l-.037-.158-.017-.082-.018-.093c-.077-.392.203-.71.592-.787.368-.072.699.09.802.445l.018.064.031.109.038.122a6.766 6.766 0 0 0 .273.73c.137.314.296.612.48.866.186.253.387.468.6.606.215.139.43.206.67.211.257.009.512-.041.756-.155.246-.112.48-.293.704-.51.223-.22.427-.484.609-.77a5.69 5.69 0 0 0 .375-.672l.054-.114.045-.099.029-.064a.717.717 0 0 1 .671-.425h.004a.717.717 0 0 1 .667.425l.03.064.044.1.054.113a5.771 5.771 0 0 0 .375.671c.182.287.386.55.61.77.223.218.458.399.703.51.244.115.5.165.755.156a1.24 1.24 0 0 0 .67-.21c.214-.14.415-.354.6-.607.185-.254.344-.552.481-.866a6.298 6.298 0 0 0 .273-.73l.038-.122.031-.109Zm-1.03-7.666c.235-.824.898-1.38 1.717-1.144.38.11.76.22 1.135.341l.563.18.56.188c.743.255 1.48.523 2.21.807.367.139.73.286 1.092.433.363.148.726.294 1.084.451a24.249 24.249 0 0 1 1.593.758c.176.092.345.185.525.291.627.367.731 1.043.499 1.765-.268.833-1.131 1.564-1.959 1.294l-.035-.011c-.17-.055-.351-.121-.527-.186a29.122 29.122 0 0 1-.53-.202c-.176-.07-.352-.138-.527-.211-.176-.07-.351-.142-.525-.217-.35-.144-.697-.297-1.046-.442l-1.049-.436c-.699-.29-1.4-.572-2.1-.85l-1.052-.414c-.35-.14-.701-.265-1.05-.404l-.043-.017c-.727-.292-.756-1.2-.535-1.974Zm-10.128-1.144c.82-.236 1.482.32 1.718 1.144.22.774.192 1.682-.535 1.974l-.043.017c-.349.139-.7.264-1.05.404l-1.052.413c-.7.279-1.401.56-2.1.85l-1.049.437c-.35.145-.696.298-1.046.442-.174.075-.35.147-.525.217-.175.073-.352.141-.528.21-.175.07-.352.137-.53.203-.175.065-.357.13-.526.186l-.035.011c-.828.27-1.691-.461-1.96-1.294-.232-.722-.127-1.398.5-1.765.18-.106.349-.199.524-.291a24.251 24.251 0 0 1 1.593-.758c.36-.157.722-.303 1.084-.451.363-.147.726-.294 1.092-.433.73-.284 1.468-.552 2.211-.807l.56-.189.563-.179a39.2 39.2 0 0 1 1.134-.34Z" id="&#x5F62;&#x72B6;&#x7ED3;&#x5408;" fill="currentColor"/></g></g></g></symbol><symbol id="widget-up" viewBox="0 0 14 10.666"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 2.5A2.5 2.5 0 0 1 2.5 0h8.334a2.5 2.5 0 0 1 2.5 2.5v5.666a2.5 2.5 0 0 1-2.5 2.5H2.5a2.5 2.5 0 0 1-2.5-2.5ZM2.5 1A1.5 1.5 0 0 0 1 2.5v5.666a1.5 1.5 0 0 0 1.5 1.5h8.334a1.5 1.5 0 0 0 1.5-1.5V2.5a1.5 1.5 0 0 0-1.5-1.5zM3 2.833a.5.5 0 0 1 .5.5v2.5a1 1 0 1 0 2 0v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-4 0v-2.5a.5.5 0 0 1 .5-.5Zm4.667 0a.5.5 0 0 0-.5.5v4a.5.5 0 1 0 1 0v-.667H9.25a1.917 1.917 0 1 0 0-3.833zM9.25 5.666H8.167V3.833H9.25a.917.917 0 1 1 0 1.833z" fill="currentColor" id="path48"/></symbol><symbol id="widget-watch-later" viewBox="0 0 200 200"><path d="M17.5 100c0-45.563 36.937-82.5 82.501-82.5 44.504 0 80.778 35.238 82.442 79.334l-7.138-7.137a7.5 7.5 0 0 0-10.607 10.606l20.001 20a7.5 7.5 0 0 0 10.607 0l20.002-20a7.5 7.5 0 0 0-10.607-10.606l-7.245 7.245c-1.616-52.432-44.63-94.441-97.455-94.441-53.848 0-97.501 43.652-97.501 97.5s43.653 97.5 97.501 97.5c32.719 0 61.673-16.123 79.346-40.825a7.5 7.5 0 0 0-12.199-8.728c-14.978 20.934-39.472 34.553-67.147 34.553-45.564 0-82.501-36.937-82.501-82.5zm109.888-12.922c9.215 5.743 9.215 20.101 0 25.843l-29.62 18.46c-9.215 5.742-20.734-1.436-20.734-12.922V81.541c0-11.486 11.519-18.664 20.734-12.921l29.62 18.459z" fill="currentColor"/></symbol><symbol id="widget-watch-save" viewBox="0 0 200 200"><path d="M176.725 56.608c1.507 1.508 2.44 3.591 2.44 5.892s-.932 4.384-2.44 5.892l-92.883 92.892c-2.262 2.264-5.388 3.664-8.842 3.664s-6.579-1.4-8.842-3.664l-51.217-51.225a8.333 8.333 0 1 1 11.781-11.785l48.277 48.277 89.942-89.942c1.508-1.507 3.591-2.44 5.892-2.44s4.384.932 5.892 2.44z" fill="currentColor"/></symbol><symbol id="widget-wechat" fill="none" viewBox="0 0 36 29"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.423 5.197c-.99 0-1.782.77-1.782 1.732s.792 1.732 1.782 1.732 1.782-.77 1.782-1.732c0-.963-.792-1.732-1.782-1.732m-8.514 0c-.988 0-1.781.77-1.781 1.732S7.92 8.66 8.909 8.66c.99 0 1.783-.77 1.783-1.732 0-.963-.793-1.732-1.783-1.732m4.95 12.895c0 .962.198 1.924.594 2.694h-1.187c-1.387 0-2.97-.192-4.357-.577L3.96 22.52l1.188-3.85C1.98 16.745 0 13.857 0 10.393 0 4.62 5.94 0 13.067 0c6.533 0 11.88 3.85 12.87 8.66h-.99c-6.139 0-11.088 4.235-11.088 9.431m15.047-4.234c-.792 0-1.387.577-1.387 1.347 0 .771.595 1.348 1.387 1.348s1.386-.577 1.386-1.348c0-.77-.595-1.347-1.386-1.347m-7.127 0c-.792 0-1.386.577-1.386 1.347 0 .771.594 1.348 1.386 1.348.791 0 1.385-.577 1.385-1.348 0-.77-.594-1.347-1.386-1.347m9.701 11.356.99 3.079-3.563-1.924c-1.188.384-2.376.577-3.761.577-5.743 0-10.494-3.85-10.494-8.66 0-4.812 4.751-8.662 10.494-8.662 5.74 0 10.492 3.85 10.492 8.661 0 2.695-1.583 5.197-4.158 6.929" fill="currentColor"/></symbol></svg>',o0="1.5.7";function mn(t,...e){k.value.volumeNormalizationDebug&&console.log(`[BewlyAudio] ${t}`,...e)}function ru(t,...e){console.error(`[BewlyAudio] ${t}`,...e)}let gn=null,Ss=null,zt=null,Za=null,a0=!1;function oK(){if(!gn){const t=window.AudioContext||window.webkitAudioContext;t?(gn=new t({latencyHint:"playback"}),mn("AudioContext initialized",gn.state)):ru("AudioContext not supported")}return gn}function aK(t,e){try{const i=t.createAnalyser();i.fftSize=1024,i.smoothingTimeConstant=.8;const n=i.fftSize,s=new Float32Array(n),r=t.createGain();return r.gain.setValueAtTime(1,t.currentTime),e.connect(i),i.connect(r),r.connect(t.destination),mn("Audio processing chain created (Simplified)"),{analyser:i,adaptiveGain:r,dataArray:s,limiter:r}}catch(i){throw ru("Failed to create processing chain",i),i}}function c2(){if(!Ss||!zt||!gn||zt.animationId)return;const{analyser:t,adaptiveGain:e}=Ss,{dataArray:i}=zt,n=gn;let s=0;function r(){if(!Ss||!zt||!gn||(zt.animationId=window.setTimeout(r,200),Za&&Za.paused))return;t.getFloatTimeDomainData(i);let o=0;for(let d=0;d<i.length;d++)o+=i[d]*i[d];const a=Math.sqrt(o/i.length),u=10**((k.value.voiceGateDb||-34)/20);if(a>u){zt.recentLoudness.push(a);const d=15;if(zt.recentLoudness.length>=5){const f=zt.smoothedLoudness;if(f>1e-4){const h=a/f;(h>2||h<.5)&&(zt.recentLoudness=zt.recentLoudness.slice(-3),mn(`Scene change detected (ratio: ${h.toFixed(2)}), reset window`))}}if(zt.recentLoudness.length>d){const f=zt.recentLoudness.slice(-5).reduce((p,m)=>p+m,0)/5,h=zt.recentLoudness.slice(0,Math.min(10,zt.recentLoudness.length-5)).reduce((p,m)=>p+m,0)/Math.min(10,zt.recentLoudness.length-5);f>h*1.5?zt.recentLoudness=zt.recentLoudness.slice(-10):zt.recentLoudness.shift()}if(zt.recentLoudness.length>=3){const f=[...zt.recentLoudness].sort((v,b)=>v-b),h=Math.floor(f.length*.4),p=f.slice(h),m=Math.floor(p.length*.3),g=p[m];if(zt.smoothedLoudness===0)zt.smoothedLoudness=g;else{const b=Math.abs(g-zt.smoothedLoudness)/zt.smoothedLoudness>.5?.7:.5;zt.smoothedLoudness=zt.smoothedLoudness*(1-b)+g*b}}}const c=n.currentTime;if(c-s>=.5){s=c;const d=zt.smoothedLoudness;if(d>1e-4){const f=20*Math.log10(d),h=k.value.targetVolume||50,p=-30+h/100*20,m=p-f,v=10**(Math.max(-15,Math.min(15,m))/20),_=(11-(k.value.adaptiveGainSpeed||5)/10)*.8;e.gain.setTargetAtTime(Math.max(.01,v),c,_);const y=zt.recentLoudness.length;mn(`Loudness: ${f.toFixed(1)}dB (${y} samples) | Gain: ${m>0?"+":""}${m.toFixed(1)}dB | Target: ${p.toFixed(1)}dB | Volume: ${h}`)}}}r(),mn("Loudness analysis started")}function d2(){zt?.animationId&&(clearTimeout(zt.animationId),zt.animationId=null,mn("Loudness analysis stopped"))}function kw(t){if(a0&&Za===t){f2();return}if(!k.value.enableVolumeNormalization)return;if(t.readyState<1){t.addEventListener("loadedmetadata",()=>kw(t),{once:!0});return}mn("Attaching to video element",t),Za=t,a0=!0,t.addEventListener("play",()=>c2()),t.addEventListener("pause",()=>{});const e=oK();if(e){e.state==="suspended"&&e.resume().then(()=>{mn("AudioContext resumed")}).catch(i=>ru("Failed to resume AudioContext",i));try{if(Ss&&Ss.source.mediaElement===t)mn("Reusing existing audio nodes");else{const i=e.createMediaElementSource(t),n=aK(e,i);Ss={source:i,...n},zt={dataArray:n.dataArray,smoothedLoudness:0,targetLoudness:(k.value.targetVolume||50)/100,animationId:null,recentLoudness:[]}}f2(),mn("Successfully attached")}catch(i){i.message?.includes("already connected")||ru("Error attaching to video",i)}}}function f2(){if(!Ss||!gn)return;const{source:t,limiter:e}=Ss;if(k.value.enableVolumeNormalization)try{try{t.disconnect(gn.destination)}catch{}e.connect(gn.destination),zt?.animationId||c2(),console.log("[BewlyAudio] Volume normalization ENABLED")}catch(i){ru("Error enabling processing",i)}else try{d2(),e.disconnect(),t.connect(gn.destination),console.log("[BewlyAudio] Volume normalization DISABLED (Bypass)")}catch(i){ru("Error disabling processing",i)}}function lK(){if(d2(),Ss&&gn)try{Ss.limiter.disconnect(),Ss.source.connect(gn.destination)}catch{}Za=null,a0=!1,mn("Detached (Bypass mode)")}function h2(){const t=location.pathname;return t.includes("/video/")||t.includes("/bangumi/play/")||t.includes("/medialist/")||t.startsWith("/festival/")||t.startsWith("/cheese/play/")}function uK(){h2()&&mn("Initializing Audio Interceptor");let t=location.href;setInterval(()=>{if(location.href!==t&&(t=location.href,h2()&&mn("URL changed")),!h2()){a0&&(mn("Not on video page, detaching"),lK());return}const e=document.querySelector("video");e&&e!==Za&&(mn("New video element detected"),kw(e))},1e3)}function cK(){Pe(()=>k.value.enableVolumeNormalization,t=>{mn("Settings changed: enableVolumeNormalization =",t),Za&&f2()}),Pe(()=>k.value.targetVolume,t=>{zt&&(zt.targetLoudness=(t||50)/100,mn("Target volume updated",t))})}let Cw=!1;function dK(t){if(Cw=t,Ss&&gn){const{source:e,limiter:i}=Ss;if(t)try{d2(),i.disconnect(),e.connect(gn.destination),console.log("[BewlyAudio] Volume normalization temporarily DISABLED")}catch{}else if(k.value.enableVolumeNormalization)try{e.disconnect(gn.destination),i.connect(gn.destination),c2(),console.log("[BewlyAudio] Volume normalization temporarily ENABLED")}catch{}}}function fK(){return Cw}let p2=null,Lw=!1;function hK(){window.self!==window.top&&(p2||Il(()=>{p2=new MutationObserver(()=>{Iw()}),p2.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),Iw()}))}function Iw(){const e=document.querySelector(".pswp")?.classList.contains("pswp--open")??!1;e!==Lw&&(Lw=e,window.parent.postMessage({type:"IFRAME_PHOTO_VIEWER_STATE",isOpen:e},"*"))}const m2="bewly-blocked-feed-card",g2=".bili-video-card.is-rcmd:not(.enable-no-interest)";let wo=null,ou=null,l0=!1;const qc=new Set,v2=new WeakSet;function Rw(){return document.querySelector(".feed-card")?.parentElement||document.body||document.documentElement}function pK(){if(!wo)return;const t=Rw();if(!(ou===t&&ou?.isConnected))try{wo.disconnect(),wo.observe(t,{childList:!0,subtree:!0}),ou=t}catch{}}function mK(t){v2.has(t)||(v2.add(t),window.setTimeout(()=>{v2.delete(t),t.isConnected&&(t.querySelector(g2)||t.classList.remove(m2))},1500))}function Pw(t){const e=t.closest(".feed-card");e&&(e.classList.contains(m2)||(e.classList.add(m2),mK(e)))}function Dw(t){t instanceof Element&&t.matches(g2)&&Pw(t),t.querySelectorAll?.(g2).forEach(Pw)}function gK(){l0=!1;for(const t of qc)Dw(t);qc.clear(),pK()}function vK(){l0||(l0=!0,requestAnimationFrame(gK))}function _K(){wo||(Dw(document),wo=new MutationObserver(t=>{for(const e of t)for(let i=0;i<e.addedNodes.length;i++){const n=e.addedNodes[i];n.nodeType===Node.ELEMENT_NODE&&qc.add(n)}qc.size>0&&vK()}),ou=Rw(),wo.observe(ou,{childList:!0,subtree:!0}))}function bK(){wo&&(wo.disconnect(),wo=null,ou=null,qc.clear(),l0=!1)}function Ow(t){typeof window>"u"||typeof MutationObserver>"u"||(t?_K():bK())}function yK(){const{locale:t}=St();let e=!1;const i=ro.frostedGlassBlurIntensity,n=10,s=h=>Number.isFinite(h)?Math.min(Pf,Math.max(Rf,h)):i,r=h=>{const p=s(h),m=document.querySelector("#bewly"),g=[document.documentElement];if(m&&g.push(m),!k.value.enableFrostedGlass){g.forEach(_=>{_.style.removeProperty("--bew-filter-glass-1"),_.style.removeProperty("--bew-filter-glass-2")});return}const v=`blur(${p}px)`,b=`blur(${p+n}px)`;g.forEach(_=>{_.style.setProperty("--bew-filter-glass-1",v),_.style.setProperty("--bew-filter-glass-2",b)})};Pe(()=>k.value.language,async()=>{k.value.language||(jo.i18n.getUILanguage()==="zh-CN"?k.value.language=Nn.Mandarin_CN:jo.i18n.getUILanguage()==="zh-TW"?(await jo.i18n.getAcceptLanguages()).includes("zh-HK")?k.value.language=Nn.Cantonese:k.value.language=Nn.Mandarin_TW:k.value.language=Nn.English),t.value=k.value.language,t.value===Nn.Mandarin_CN?document.documentElement.lang="zh-CN":t.value===Nn.Mandarin_TW?document.documentElement.lang="zh-TW":t.value===Nn.Cantonese?document.documentElement.lang="zh-HK":document.documentElement.lang="en"},{immediate:!0}),Pe([()=>k.value.customizeFont,()=>k.value.fontFamily],()=>{typeof k.value.customizeFont=="boolean"&&(k.value.customizeFont="recommend"),!k.value.fontFamily&&k.value.customizeFont!=="custom"&&(k.value.fontFamily='CJKEmDash, Numbers, Onest, ShangguSansSCVF, -apple-system, BlinkMacSystemFont, InterVariable, Inter, "Segoe UI", Cantarell, "Noto Sans", "Roboto Flex", Roboto, sans-serif, ui-sans-serif, system-ui, "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", emoji'),document.documentElement.style.removeProperty("--bew-custom-fonts"),k.value.customizeFont==="default"?document.documentElement.classList.remove("modify-fonts"):k.value.customizeFont==="recommend"?document.documentElement.classList.add("modify-fonts"):(document.documentElement.classList.add("modify-fonts"),document.documentElement.style.setProperty("--bew-custom-fonts",k.value.fontFamily))},{immediate:!0});let o=null;Pe(()=>k.value.overrideDanmakuFont,()=>{k.value.overrideDanmakuFont?o=Tr(`
          .bewly-design.modify-fonts .bili-danmaku-x-dm {
            font-family: var(--bew-fonts) !important;
          }
        `):o?.remove()},{immediate:!0});const a=Tr(`
    .video-info-container .special-text-indent[data-title^=''],a[title^=''],p[title^=''],h3[title^=''],
    .video-info-container .special-text-indent[data-title^=''],a[title^=''],p[title^=''],h3[title^=''],
    .video-info-container .special-text-indent[data-title^=''],a[title^=''],p[title^=''],h3[title^=''],
    .video-info-container .special-text-indent[data-title^=''],a[title^=''],p[title^=''],h3[title^=''],
    .video-info-container .special-text-indent[data-title^=''],a[title^=''],p[title^=''],h3[title^=''] {
      text-indent: 0 !important;
    }
  `);if(Pe(()=>k.value.removeTheIndentFromChinesePunctuation,()=>{k.value.removeTheIndentFromChinesePunctuation?document.documentElement.appendChild(a):document.documentElement.removeChild(a)},{immediate:!0}),Pe(()=>k.value.enableFrostedGlass,()=>{const h=document.querySelector("#bewly");k.value.enableFrostedGlass?(h&&h.classList.remove("disable-frosted-glass"),document.documentElement.classList.remove("disable-frosted-glass")):(h&&h.classList.add("disable-frosted-glass"),document.documentElement.classList.add("disable-frosted-glass")),r(k.value.frostedGlassBlurIntensity)},{immediate:!0}),Pe(()=>k.value.frostedGlassBlurIntensity,h=>{const p=s(h);if(p!==h){k.value.frostedGlassBlurIntensity=p;return}r(p)},{immediate:!0}),Pe(()=>k.value.disableShadow,h=>{const p=document.querySelector("#bewly");h?(p&&p.classList.add("disable-shadow"),document.documentElement.classList.add("disable-shadow")):(p&&p.classList.remove("disable-shadow"),document.documentElement.classList.remove("disable-shadow"))},{immediate:!0}),Pe(()=>k.value.blockAds,()=>{k.value.blockAds?document.documentElement.classList.add("block-useless-contents"):document.documentElement.classList.remove("block-useless-contents"),Ow(k.value.blockAds&&Et()&&!ai())},{immediate:!0}),!ai()){const h=()=>{Ow(k.value.blockAds&&Et()&&!ai())};window.addEventListener("pushstate",h),window.addEventListener("popstate",h),window.addEventListener("hashchange",h)}const l=Tr(`
    .activity-game-list {
      display: none !important;
    }
  `);Pe(()=>k.value.blockTopSearchPageAds,()=>{k.value.blockTopSearchPageAds?document.documentElement.appendChild(l):document.documentElement.removeChild(l)},{immediate:!0}),Pe(()=>k.value.themeColor,()=>{const h=document.querySelector("#bewly");h&&h.style.setProperty("--bew-theme-color",k.value.themeColor),document.documentElement.style.setProperty("--bew-theme-color",k.value.themeColor)},{immediate:!0});let u=null,c=null;if(Pe([()=>Yt.value.customizeCSS,()=>Yt.value.customizeCSSContent],()=>{const p=document.querySelector("#bewly")?.shadowRoot||null;document.querySelectorAll("[data-bewly-customizeCSS]").forEach(m=>{m.remove()}),p?.querySelectorAll("[data-bewly-customizeCSS]").forEach(m=>{m.remove()}),Yt.value.customizeCSS&&(u=Tr(Yt.value.customizeCSSContent),u.setAttribute("data-bewly-customizeCSS",""),p&&(c=Tr(Yt.value.customizeCSSContent,p),c.setAttribute("data-bewly-customizeCSS","")))},{immediate:!0}),Pe(()=>ts.value.accessToken,h=>{h&&(Ds()||(ts.value.accessToken=""))},{immediate:!0}),Pe(()=>k.value.showTopBar,h=>{if(e)return;const p=!h;k.value.useOriginalBilibiliTopBar!==p&&(e=!0,k.value.useOriginalBilibiliTopBar=p,e=!1)},{immediate:!0}),Pe(()=>k.value.useOriginalBilibiliTopBar,h=>{const p=!h;if(!e&&k.value.showTopBar!==p&&(e=!0,k.value.showTopBar=p,e=!1),f(),!ai()){const m={type:uc,useOriginalBilibiliTopBar:k.value.useOriginalBilibiliTopBar},g=new Set;document.querySelectorAll("iframe").forEach(v=>g.add(v)),document.getElementById("bewly")?.shadowRoot?.querySelectorAll("iframe").forEach(v=>g.add(v)),g.forEach(v=>{try{const b=v.contentWindow?.document;b?.documentElement?.classList.toggle("remove-top-bar",!k.value.useOriginalBilibiliTopBar),k.value.useOriginalBilibiliTopBar&&b&&jc(b)}catch{}try{v.contentWindow?.postMessage(m,"*")}catch{}})}},{immediate:!0}),!ai()&&Et()){const p=document.getElementById("bewly")?.shadowRoot;p&&new MutationObserver(()=>{f()}).observe(p,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]})}Pe(()=>k.value.adaptToOtherPageStyles,()=>{k.value.adaptToOtherPageStyles?document.documentElement.classList.add("bewly-design"):document.documentElement.classList.remove("bewly-design")},{immediate:!0});function d(){const p=document.getElementById("bewly")?.shadowRoot;return p?!!p.querySelector('iframe[src*="bilibili.com"]'):!1}function f(){if(!ai())if(Et()){const h=d(),p=!k.value.useOriginalBilibiliTopBar||h;document.documentElement.classList.toggle("remove-top-bar",p);const m=document.querySelector(".bili-header");m&&(h?m.style.display="none":m.style.removeProperty("display")),k.value.useOriginalBilibiliTopBar&&!h&&jc(document)}else document.documentElement.classList.toggle("remove-top-bar",!k.value.useOriginalBilibiliTopBar),k.value.useOriginalBilibiliTopBar,jc(document)}}const wK={"m-auto":"","max-w":"$bew-page-max-width"},EK={p:"t-[calc(var(--bew-top-bar-height)+10px)]","m-auto":"",w:"lg:[calc(100%-200px)] [calc(100%-150px)]"},SK=qe(Me({__name:"App",setup(t){function e(){return/https?:\/\/(?:www\.)?bilibili\.com\/festival\/.*/.test(document.URL)}const i=Fl(),n=N5(),s=An();let r;k.value.adaptToOtherPageStyles?r=Js().isDark:r=z(!1);const[a,l]=lk(!1);function u(){const ue=new URLSearchParams(window.location.search).get("page");return ue&&Object.values(_t).includes(ue)?ue:null}const c=z(u()||k.value.dockItemsConfig.find(ie=>ie.visible===!0)?.page||_t.Home);Ht(window,"pushstate",()=>{const ie=u();ie&&ie!==c.value&&(c.value=ie)}),Ht(window,"popstate",()=>{const ie=u();ie&&ie!==c.value&&(c.value=ie)});function d(){if(!Et()||Of())return;const ie=new URLSearchParams(window.location.search);if(ie.has("keyword")||ie.has("category")||ie.has("user_order")||ie.has("user_type")||ie.has("search_type")||ie.has("live_room_order")||ie.has("live_user_order")||ie.has("pn")){ie.delete("keyword"),ie.delete("category"),ie.delete("user_order"),ie.delete("user_type"),ie.delete("search_type"),ie.delete("live_room_order"),ie.delete("live_user_order"),ie.delete("pn");const ve=`${window.location.pathname}?${ie.toString()}`;window.history.replaceState({},"",ve)}}c.value!==_t.Search&&c.value!==_t.SearchResults&&Et()&&!Of()&&(d(),s.searchKeyword="");const f=z(Ni.ForYou),h={[_t.Home]:jt(()=>Promise.resolve().then(()=>$X)),[_t.Search]:jt(()=>Promise.resolve().then(()=>BX)),[_t.SearchResults]:jt(()=>Promise.resolve().then(()=>dee)),[_t.Anime]:jt(()=>Promise.resolve().then(()=>Hee)),[_t.History]:jt(()=>Promise.resolve().then(()=>_te)),[_t.WatchLater]:jt(()=>Promise.resolve().then(()=>Wte)),[_t.Favorites]:jt(()=>Promise.resolve().then(()=>uie)),[_t.Moments]:jt(()=>Promise.resolve().then(()=>fie))},p=z(),m=z(null),g=z(),v=z(),b=z(),_=z(),y=z(),E=z(Vn.Hidden),S=Ho(()=>{const ie=m.value;if(!ie){v.value?.();return}if(ie.scrollTop===0)v.value?.();else{pe();const ue=()=>{ie.scrollTop===0?v.value?.():setTimeout(ue,50)};setTimeout(ue,100)}},500),A=Ho(()=>b.value?.(),200),C=Ho(()=>pe(),500),T=Ho(()=>_.value?.(),500),I=Ho(()=>y.value?.(),500),D=z(),R=z(!0),O=z(""),M=z(!1),U=z(gs.None);function $(ie){U.value=ie}const B=z(!1),W=z();Ht(window,"message",({data:ie})=>{switch(ie){case zy:{const ue=n.getDockItemConfigByPage(c.value);ue&&(ue.useOriginalBiliPage=!1)}break;case Gy:{const ue=n.getDockItemConfigByPage(c.value);ue&&(ue.useOriginalBiliPage=!0)}break}}),Ht(window,"message",({data:ie,source:ue})=>{if(!ie||ie.type!=="IFRAME_PHOTO_VIEWER_STATE")return;const ve=W.value?.$el?.querySelector("iframe");ve&&ue===ve.contentWindow&&(B.value=ie.isOpen)}),Ht(window,"message",({data:ie,source:ue})=>{if(ue!==window.parent)return;const{type:ve,isDark:j,darkModeBaseColor:K}=ie;if(ve==="iframeDarkModeChange"&&ai()){const oe=e();if(j){if(document.querySelector("#bewly")?.classList.add("dark"),oe||(document.documentElement.classList.add("dark"),document.body?.classList.add("dark")),K){document.documentElement.style.setProperty("--bew-dark-base-color",K);const he=document.getElementById("bewly");he?.shadowRoot&&he.style.setProperty("--bew-dark-base-color",K)}}else document.querySelector("#bewly")?.classList?.remove("dark"),oe||(document.documentElement.classList.remove("dark"),document.body?.classList.remove("dark"));document.documentElement.offsetHeight}},{passive:!0});const te=ge(()=>{if(!Et(window.self.location.href)||ai())return"";const ie=k.value.dockItemsConfig.find(ue=>ue.page===c.value);return ie&&(ie.useOriginalBiliPage||!i.getDockItemByPage(c.value)?.hasBewlyPage)?i.getBiliWebPageURLByPage(c.value):""}),re=ge(()=>ai()?!1:c.value===_t.SearchResults?Et()&&!k.value.useOriginalBilibiliHomepage:!i.getDockItemByPage(c.value)?.hasBewlyPage||te.value?!1:Et()&&!k.value.useOriginalBilibiliHomepage),q=ge(()=>fn()&&ai()||lc()&&k.value.openNotificationsPageAsDrawer&&ai()||ai()?!1:k.value.useOriginalBilibiliHomepage||Et()&&!n.getDockItemIsUseOriginalBiliPage(c.value)||Et()&&n.getDockItemIsUseOriginalBiliPage(c.value)||!Et()),le=z(!0);Pe(()=>c.value,()=>{if(!le.value){const ie=new URL(window.location.href);ie.searchParams.set("page",c.value),window.history.replaceState({},"",ie.toString())}m.value?.scrollTo({top:0}),le.value=!1},{immediate:!0}),Pe([()=>q.value,()=>c.value],()=>{const ie=document.querySelector(".bili-header");ie&&Et()&&(n.getDockItemIsUseOriginalBiliPage(c.value)&&!ai()?ie.style.visibility="hidden":ie.style.visibility="visible")},{immediate:!0}),yK();let be=!1;st(()=>{if(window.dispatchEvent(new CustomEvent(Hy)),Et()&&!k.value.useOriginalBilibiliHomepage&&ot(()=>{const ie=m.value;ie&&Oy(g,([{isIntersecting:ue}])=>{ue&&A()},{root:ie,rootMargin:"200px",threshold:0})}),Et()){document.body.style.setProperty("background-color","unset","important");const ie=()=>{ot(()=>{const ue=m.value;ue&&(ue.setAttribute("tabindex","0"),ue.focus({preventScroll:!0}))})};Ps("Home",ue=>{C(),ie(),ue.preventDefault()}),document.addEventListener("keydown",ue=>{ue.key==="ArrowUp"&&ue.metaKey&&!ue.ctrlKey&&!ue.altKey&&!ue.shiftKey&&(C(),ie(),ue.preventDefault())})}document.addEventListener("scroll",()=>{window.scrollY>0?R.value=!1:R.value=!0})});function se(ie){ie.openInNewTab?Os(`https://www.bilibili.com/?page=${ie.page}`):(ie.useOriginalBiliPage?Et()||(location.href=`https://www.bilibili.com/?page=${ie.page}`):Et()?ne(ie.page):location.href=`https://www.bilibili.com/?page=${ie.page}`,c.value=ie.page,Et()&&!Of()&&(ie.page===_t.Search||ie.page!==_t.SearchResults)&&(s.searchKeyword="",d()))}function ne(ie){const ue=m.value?.scrollTop??0;if(c.value===ie){c.value!==_t.Search&&c.value!==_t.SearchResults&&(ue===0?S():C());return}c.value=ie}function pe(ie=0){const ue=m.value;ue&&(Ba(ue,ie),D.value?.toggleTopBarVisible(!0)),W.value?.handleBackToTop()}let ye=null,xe=null,Be=null,Ke=0;function Xe(ie,ue){Ke=ue.target?.scrollTop??0,Be===null&&(be||(rn.emit(Mf,!0),be=!0),Be=requestAnimationFrame(()=>{const ve=Ke;rn.emit(Ua,ve),R.value=ve===0,ye&&clearTimeout(ye),xe&&clearTimeout(xe),xe=setTimeout(()=>{rn.emit(Mf,!1),be=!1},150),ye=setTimeout(()=>{},150),Be=null}))}function Re(ie){Xe(null,ie)}function Z(ie){const ue=(K,oe)=>K.protocol===oe.protocol&&K.host===oe.host&&K.port===oe.port,ve=new URL(location.href),j=new URL(ie);try{if(!ue(ve,j)){Os(ie);return}}catch{Os(ie);return}O.value=ie,M.value=!0}async function ae(){await ot();const ie=m.value;return ie?ie.scrollHeight>ie.clientHeight:!1}if(Jr(async ie=>{if(!ai())return null;const ue=new MutationObserver(([{target:j}])=>{if(!(j instanceof HTMLElement))return null;j.classList.contains("bpx-state-entered")?parent.postMessage(Tm):parent.postMessage(Am)}),ve=new AbortController;jy(".bpx-player-ctrl-btn.bpx-player-ctrl-web",500,ve).then(j=>{j&&ue.observe(j,{attributes:!0})}),ie(()=>{ue.disconnect(),ve.abort()})}),Xu("BEWLY_APP",{activatedPage:c,homeActivatedPage:f,mainAppRef:p,scrollViewportRef:m,reachTop:R,handleBackToTop:pe,handlePageRefresh:v,handleReachBottom:b,handleUndoRefresh:_,handleForwardRefresh:y,undoForwardState:E,openIframeDrawer:Z,haveScrollbar:ae,activeDrawer:U,setActiveDrawer:$}),k.value.cleanUrlArgument){let ie=function(){if(!(K||document.readyState==="loading"))try{K=!0;const he=new URL(window.location.href);let ce=!1;for(const me of ve)he.searchParams.has(me)&&(he.searchParams.delete(me),ce=!0);if(he.hostname.endsWith("bilibili.com")&&he.pathname.startsWith("/video/"))for(const me of j)he.searchParams.has(me)&&(he.searchParams.delete(me),ce=!0);if(ce){const me=he.toString().replace(/([^:])\/\/(?!\/)/g,"$1/").replace(/%3D/gi,"=").replace(/%26/g,"&");window.requestIdleCallback?window.requestIdleCallback(()=>{history.replaceState(null,"",me),K=!1}):setTimeout(()=>{history.replaceState(null,"",me),K=!1},0)}else K=!1}catch(he){console.warn("URL:",he),K=!1}},ue=function(he=2e3){oe&&clearTimeout(oe),oe=setTimeout(()=>{document.readyState==="complete"&&ie()},he)};const ve=new Set(["spm_id_from","from_source","msource","bsource","seid","source","session_id","visit_id","sourceFrom","from_spmid","share_source","share_medium","share_plat","share_session_id","share_tag","unique_k","csource","vd_source","tab","is_story_h5","share_from","plat_id","-Arouter","launch_id","live_from","hotRank","broadcast_type","trackid"]),j=new Set(["buvid","mid","spmid","timestamp","up_id"]);let K=!1,oe=null;if(document.readyState==="complete"?ue(1e3):window.addEventListener("load",()=>ue(1e3),{once:!0}),typeof window<"u"){let he=window.location.href,ce=null;const me=()=>{window.location.href!==he&&(he=window.location.href,ue(2e3)),ce=setTimeout(me,1e3)};document.addEventListener("visibilitychange",()=>{document.hidden?ce&&(clearTimeout(ce),ce=null):ce||me()}),me()}}return(ie,ue)=>{const ve=Ge("AppBackground"),j=Ge("Settings"),K=Ge("Dock"),oe=Ge("SideBar"),he=Ge("BewlyOrBiliTopBarSwitcher"),ce=Ge("TopBar"),me=Ge("IframePage"),Q=Ge("IframeDrawer");return L(),P("div",{id:"bewly-wrapper",ref_key:"mainAppRef",ref:p,class:Ie(["bewly-wrapper",{dark:w(r)}]),text:"$bew-text-1 size-$bew-base-font-size"},[w(re)?(L(),_e(ve,{key:0,"activated-page":c.value},null,8,["activated-page"])):X("",!0),(L(),_e(Hu,null,[w(a)?(L(),_e(j,{key:0,"z-10002":"",onClose:ue[0]||(ue[0]=Y=>a.value=!1)})):X("",!0)],1024)),w(ai)()?X("",!0):(L(),P("div",{key:1,pos:"absolute top-0 left-0","w-full":"","h-full":"","overflow-hidden":"","pointer-events-none":"",style:Ue({opacity:B.value?0:1,transition:"opacity 0.2s ease"})},[!w(k).useOriginalBilibiliHomepage&&(w(k).alwaysUseDock||w(re)||w(te))?(L(),_e(K,{key:0,"pointer-events-auto":"","activated-page":c.value,onSettingsVisibilityChange:w(l),onRefresh:w(S),onUndoRefresh:w(T),onForwardRefresh:w(I),onBackToTop:w(C),onDockItemClick:se},null,8,["activated-page","onSettingsVisibilityChange","onRefresh","onUndoRefresh","onForwardRefresh","onBackToTop"])):(L(),_e(oe,{key:1,"pointer-events-auto":"",onSettingsVisibilityChange:w(l)},null,8,["onSettingsVisibilityChange"]))],4)),w(q)?(L(),P("div",{key:2,"m-auto":"","max-w":"$bew-page-max-width",style:Ue({opacity:B.value?0:1,pointerEvents:B.value?"none":"auto",transition:"opacity 0.2s ease"})},[w(k).showBewlyOrBiliTopBarSwitcher?(L(),_e(he,{key:0})):X("",!0),F(ce,{pos:"top-0 left-0",z:"99 hover:1001","w-full":""})],4)):X("",!0),w(k).useOriginalBilibiliHomepage?X("",!0):(L(),P("div",{key:3,pos:"absolute top-0 left-0","w-full":"","h-full":"",style:Ue({height:w(re)||w(te)?"100dvh":"0"})},[F(nt,{name:"fade"},{default:H(()=>[w(re)?(L(),P("div",{key:0,ref_key:"scrollViewportRef",ref:m,"h-inherit":"","of-y-auto":"","of-x-hidden":"",style:{"overscroll-behavior":"contain"},onScrollPassive:Re},[x("main",wK,[x("div",EK,[F(nt,{name:"page-fade"},{default:H(()=>[(L(),_e(wr(h[c.value]),{key:c.value}))]),_:1}),x("div",{ref_key:"loadMoreSentinelRef",ref:g,"h-1px":"","w-full":"","pointer-events-none":"","opacity-0":""},null,512)])])],544)):X("",!0)]),_:1}),!w(re)&&w(te)&&!w(ai)()?(L(),_e(nt,{key:0,name:"fade"},{default:H(()=>[F(me,{ref_key:"iframePageRef",ref:W,url:w(te)},null,8,["url"])]),_:1})):X("",!0)],4)),M.value?(L(),_e(Q,{key:4,url:O.value,onClose:ue[1]||(ue[1]=Y=>M.value=!1)},null,8,["url"])):X("",!0)],2)}}}),[["__scopeId","data-v-b6c33175"]]),Mw=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width: 100%; height: 100%;">
  <rect x="22" y="44" width="8" height="24" rx="2" fill="#fff"/>
  <rect x="40" y="24" width="8" height="44" rx="2" fill="#fff"/>
  <rect x="58" y="34" width="8" height="34" rx="2" fill="#fff"/>
</svg>`,xK=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 88 88" style="width: 100%; height: 100%;">
  <rect x="22" y="44" width="8" height="24" rx="2" fill="#fff" opacity="0.4"/>
  <rect x="40" y="24" width="8" height="44" rx="2" fill="#fff" opacity="0.4"/>
  <rect x="58" y="34" width="8" height="34" rx="2" fill="#fff" opacity="0.4"/>
  <line x1="20" y1="20" x2="68" y2="68" stroke="#fff" stroke-width="4" stroke-linecap="round"/>
</svg>`;let Hs=null,u0=null,Zc=!1;function TK(){const t=document.createElement("div");t.className="bpx-player-ctrl-btn bewly-volume-normalization-control",t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("tabindex","0");const e=document.createElement("div");e.className="bpx-player-ctrl-btn-icon bewly-vn-icon";const i=document.createElement("span");i.className="bpx-common-svg-icon",i.innerHTML=Mw,e.appendChild(i),e.title="";const n=document.createElement("div");n.className="bewly-vn-slider-wrap",n.style.cssText=`
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(21, 21, 21, 0.9);
    border-radius: 2px;
    padding: 10px 15px 14px;
    display: none;
    flex-direction: column;
    align-items: center;
    z-index: 100;
  `;const s=document.createElement("div");s.className="bewly-vn-value",s.style.cssText=`
    color: #fff;
    font-size: 12px;
    line-height: 18px;
    text-align: center;
    margin-bottom: 4px;
  `,s.textContent=`${k.value.targetVolume}`;const r=100,o=document.createElement("div");o.className="bewly-vn-slider-container",o.style.cssText=`
    position: relative;
    width: 32px;
    height: ${r}px;
    display: flex;
    justify-content: center;
  `;const a=document.createElement("div");a.className="bewly-vn-track",a.style.cssText=`
    position: relative;
    width: 2px;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 1px;
  `;const l=document.createElement("div");l.style.cssText=`
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    border-radius: 1px;
  `;const u=document.createElement("div");u.className="bewly-vn-bar",u.style.cssText=`
    position: absolute;
    left: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    background: var(--bew-theme-color, #00a1d6);
    border-radius: 1px;
    transform-origin: bottom;
  `,u.style.transform=`scaleY(${k.value.targetVolume/100})`,l.appendChild(u),a.appendChild(l);const c=document.createElement("div");c.className="bewly-vn-thumb",c.style.cssText=`
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 12px;
    height: 12px;
  `,c.style.bottom=`${k.value.targetVolume}%`;const d=document.createElement("div");d.className="bewly-vn-thumb-dot",d.style.cssText=`
    width: 12px;
    height: 12px;
    background: var(--bew-theme-color, #00a1d6);
    border-radius: 50%;
  `,c.appendChild(d),o.appendChild(a),o.appendChild(c);const f=document.createElement("input");f.type="range",f.min="0",f.max="100",f.value=String(k.value.targetVolume),f.className="bewly-vn-slider",f.style.cssText=`
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    writing-mode: vertical-lr;
    direction: rtl;
  `,o.appendChild(f);const h=document.createElement("style");return h.textContent=`
    .bewly-volume-normalization-control:hover .bewly-vn-slider-wrap {
      display: flex !important;
    }
    .bewly-volume-normalization-control .bewly-vn-icon.disabled {
      opacity: 0.35 !important;
    }
  `,document.head.appendChild(h),f.addEventListener("input",()=>{const p=Number(f.value);k.value.targetVolume=p,s.textContent=`${p}`,u.style.transform=`scaleY(${p/100})`,c.style.bottom=`${p}%`}),n.addEventListener("click",p=>{p.stopPropagation()}),t.addEventListener("click",()=>{const p=!fK();dK(p),AK(e,i,p)}),n.appendChild(s),n.appendChild(o),t.appendChild(e),t.appendChild(n),u0=f,t}function AK(t,e,i){i?(e.innerHTML=xK,t.classList.add("disabled"),t.title=""):(e.innerHTML=Mw,t.classList.remove("disabled"),t.title="")}function kK(){const t=document.querySelector(".bpx-player-control-bottom-right");if(t)return t;const e=document.querySelector(".bilibili-player-video-btn-quality");return e?.parentElement?e.parentElement:null}function $w(){if(Zc||!k.value.enableVolumeNormalization)return;const t=kK();if(!t||t.querySelector(".bewly-volume-normalization-control"))return;const e=t.querySelector(".bpx-player-ctrl-volume");!e||!e.querySelector(".bpx-player-ctrl-btn-icon")||(Hs=TK(),e.nextSibling?t.insertBefore(Hs,e.nextSibling):t.appendChild(Hs),Zc=!0,console.log("[BewlyAudio] Volume normalization control injected"))}function CK(){Hs&&Hs.parentElement&&Hs.parentElement.removeChild(Hs),Hs=null,u0=null,Zc=!1}function LK(){if(location.hostname.includes("live.bilibili.com"))return;Pe(()=>k.value.enableVolumeNormalization,e=>{e?$w():CK()},{immediate:!0}),Pe(()=>k.value.targetVolume,e=>{if(u0&&Hs){u0.value=String(e);const i=Hs.querySelector(".bewly-vn-value"),n=Hs.querySelector(".bewly-vn-bar"),s=Hs.querySelector(".bewly-vn-thumb");i&&(i.textContent=`${e}`),n&&(n.style.transform=`scaleY(${e/100})`),s&&(s.style.bottom=`${e}%`)}});let t=location.href;setInterval(()=>{location.href!==t&&(t=location.href,Zc=!1),k.value.enableVolumeNormalization&&!Zc&&$w()},2e3)}const IK=/Firefox/i.test(navigator.userAgent),RK=Fy(),ri=document.URL;function Fw(){return/https?:\/\/(?:www\.)?bilibili\.com\/festival\/.*/.test(document.URL)}function Bw(){return ai()?!1:!!(Et()||fn()||/https?:\/\/(?:www\.)?bilibili\.com\/watchlater\/list.*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/v\/popular\/all.*/.test(ri)||/https?:\/\/search\.bilibili\.com\.*/.test(ri)||/https?:\/\/t\.bilibili\.com(?!\/vote|\/share|\/pages\/nav).*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/opus\/.*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/history.*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/account\/history.*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/watchlater\/#\/list.*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/watchlater\/list.*/.test(ri)||/https?:\/\/space\.bilibili\.com\.*/.test(ri)||/https?:\/\/message\.bilibili\.com\.*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/v\/(?!popular).*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/c\/(?!popular).*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/(?:anime|guochuang).*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/(?:tv|movie|variety|mooc|documentary).*/.test(ri)||/https?:\/\/(?:www\.)?bilibili\.com\/read\/.*/.test(ri)||/^https?:\/\/(?:www\.)?bilibili\.com\/404.*$/.test(ri)||/^https?:\/\/member\.bilibili\.com\/platform.*$/.test(ri)||/^https?:\/\/account\.bilibili\.com\/.*$/.test(ri)||/^https?:\/\/passport\.bilibili\.com\/login.*$/.test(ri)||/https?:\/\/music\.bilibili\.com\/pc\/music-center.*$/.test(ri))}function _2(){return!!(ai()&&(Et()||fn()||/https?:\/\/search\.bilibili\.com\/all.*/.test(ri)||/https?:\/\/www\.bilibili\.com\/anime.*/.test(ri)||/https?:\/\/space\.bilibili\.com\/\d+\/favlist.*/.test(ri)||/https?:\/\/www\.bilibili\.com\/history.*/.test(ri)||/https?:\/\/www\.bilibili\.com\/watchlater\/#\/list.*/.test(ri)||/https?:\/\/www\.bilibili\.com\/watchlater\/list.*/.test(ri)||/https?:\/\/t\.bilibili\.com(?!\/vote|\/share|\/pages\/nav).*/.test(ri)||lc()))}if(RK)console.warn("[BewlyCat] Detected Electron environment, extension disabled.");else{let t=function(){if(f)return;const g=!!(document.fullscreenElement||document.webkitFullscreenElement),b=document.querySelector(".bpx-player-ctrl-web,.bilibili-player-video-web-fullscreen")?.classList.contains("bpx-state-entered");if(g||b){f=!0;return}const _=k.value.defaultVideoPlayerMode;if(k.value.keepCollectionVideoDefaultMode&&ow())rw();else if(!_||_==="default")rw();else switch(_){case"webFullscreen":OW();break;case"widescreen":MW();break}r0(),$W(),setTimeout(()=>{uw()},2e3),setTimeout(()=>{mw()},2e3),f=!0,e()},e=function(){h||!k.value.externalWatchLaterButton||setTimeout(()=>{!h&&k.value.externalWatchLaterButton&&Promise.resolve().then(()=>pie).then(({addWatchLaterButton:g})=>{g(),h=!0}).catch(g=>console.error(":",g))},5e3)},i=function(){qa()&&k.value.enableRandomPlay&&xw()},n=function(){location.href!==d&&(d=location.href,f=!1,h=!1,n0(),fn()&&(t(),fn()&&ZW(),qa()&&k.value.enableRandomPlay&&setTimeout(()=>{i()},2e3))),requestAnimationFrame(n)},s=function(){document.visibilityState==="visible"&&fn()&&!f&&t()},r=function(){document.addEventListener("click",g=>{const v=g.target;if(v.closest(".bili-watch-later, .bili-watch-later--wrap, .bili-watch-later__icon")){setTimeout(()=>{An().getAllWatchLaterList()},1e3);return}const _=v.closest(".bili-video-card a, .bili-video-card__wrap a");if(_ instanceof HTMLAnchorElement){g.preventDefault();const y=_.href;k.value.videoCardLinkOpenMode==="background"?Wo(y):window.open(y,"_blank")}},!0)},o=function(){return new Promise(g=>{Il(async()=>{a(),g()})})},a=function(){const g=document.querySelectorAll("#bewly");g.length>0&&g.forEach(C=>{const T=C.getAttribute("data-version")||"0.0.0",I=C.getAttribute("data-dev")==="true";Vy(T,o0)<0?C.remove():I||C.remove()});const v=document.createElement("div");v.id="bewly",v.setAttribute("data-version",o0),v.setAttribute("data-dev","false"),k.value.darkModeBaseColor&&v.style.setProperty("--bew-dark-base-color",k.value.darkModeBaseColor);const b=document.createElement("div"),_=document.createElement("link"),y=v.attachShadow?.({mode:"open"})||v,E=document.createElement("style");E.textContent=`${EW}`,_.setAttribute("rel","stylesheet"),_.setAttribute("href",jo.runtime.getURL("dist/contentScripts/style.css")),y.appendChild(E),y.appendChild(_),y.appendChild(b),v.style.opacity="0",v.style.transition="opacity 0.5s",_.onload=()=>{setTimeout(()=>{v.style.opacity="1"},500)};const S=document.createElement("div");S.innerHTML=rK,y.appendChild(S),document.body.appendChild(v);const A=nc(SK);wW(A),A.mount(b)},l=function(g){const v=JSON.parse(JSON.stringify(g));window.postMessage({type:"BEWLY_SETTINGS_UPDATE",data:v},"*")},u=function(){const g=Yt.value.locallyUploadedWallpaper;if(g?.isLocal&&g.id)if(!L3(g.id))Yt.value.locallyUploadedWallpaper=null,Ko(k.value.wallpaper)&&(k.value.wallpaper=""),Ko(k.value.searchPageWallpaper)&&(k.value.searchPageWallpaper="");else{const v=`local-wallpaper:${g.id}`,b=k3(g.id);b&&(k.value.wallpaper.startsWith("data:image/")&&k.value.wallpaper===b&&(k.value.wallpaper=v),k.value.searchPageWallpaper.startsWith("data:image/")&&k.value.searchPageWallpaper===b&&(k.value.searchPageWallpaper=v))}};IK&&(window.requestIdleCallback=window.requestIdleCallback.bind(window),window.cancelIdleCallback=window.cancelIdleCallback.bind(window),window.requestAnimationFrame=window.requestAnimationFrame.bind(window),window.cancelAnimationFrame=window.cancelAnimationFrame.bind(window),window.setTimeout=window.setTimeout.bind(window),window.clearTimeout=window.clearTimeout.bind(window));let c,d=location.href,f=!1,h=!1;(Bw()||_2())&&(k.value.adaptToOtherPageStyles&&Js(),k.value.adaptToOtherPageStyles&&!Fw()?(document.documentElement.classList.add("bewly-design"),ai()&&hK(),Il(async()=>{const v=document.head.querySelector("#dark-mode");v&&document.head.removeChild(v)})):document.documentElement.classList.remove("bewly-design")),k.value.adaptToOtherPageStyles&&Et()&&(c=Tr(`
    html.bewly-design {
      background-color: var(--bew-bg);
      transition: background-color 0.2s ease-in;
    }

    body {
      display: none;
    }
  `),Tr(`
    body {
      transition: opacity 0.5s;
    }
  `),setTimeout(()=>{c?.isConnected&&document.documentElement.removeChild(c)},4e3)),window.addEventListener(Hy,()=>{c&&(document.documentElement.removeChild(c),qa()&&t())}),requestAnimationFrame(n),window.addEventListener("load",()=>{qa()?(t(),k.value.enableRandomPlay&&setTimeout(()=>{i()},3e3)):fn()&&t(),/https?:\/\/search\.bilibili\.com\.*/.test(location.href)&&r()}),window.addEventListener("pageshow",()=>{fn()&&!f&&t()}),window.addEventListener("visibilitychange",s);const p=Tr(".bili-header, #biliMainHeader { visibility: hidden !important; }");async function m(){!ai()&&!k.value.useOriginalBilibiliHomepage&&Et()&&(AW(document),Tr(`
      body > *:not(#bewly):not(script):not(style):not(.bili-header):not(.custom-navbar):not(.be-settings) {
        display: none !important;
        visibility: hidden !important;
        pointer-events: none !important;
        position: absolute !important;
        left: -9999px !important;
      }
      .home-redesign-base, .bilibili-gate-root {
        display: none !important;
      }
      /* Ensure the original top bar remains visible and properly positioned */
      /* The visibility/display will be controlled by .remove-top-bar class in removeTopBar.scss */
      .bili-header {
        position: relative !important;
        left: 0 !important;
        pointer-events: auto !important;
      }
    `),xW(),kW(document),tw(document)),(Bw()||_2())&&(Et()?a():await o()),p&&document.documentElement.removeChild(p),uK(),cK(),LK(),fn()&&PW()}if(document.readyState!=="loading"?m():document.addEventListener("DOMContentLoaded",()=>m()),Pe(k,(g,v)=>{if(l(g),g.enableRandomPlay!==void 0&&qa()&&(g.enableRandomPlay?setTimeout(()=>{i()},1e3):n0()),qa()&&v&&(g.autoPlayMultipart!==v.autoPlayMultipart||g.autoPlayCollection!==v.autoPlayCollection||g.autoPlayRecommend!==v.autoPlayRecommend||g.autoPlayPlaylist!==v.autoPlayPlaylist)&&setTimeout(()=>{uw()},1e3),qa()&&v&&g.externalWatchLaterButton!==v.externalWatchLaterButton)if(g.externalWatchLaterButton)h=!1,e();else{const b=document.querySelector(".bewly-watch-later-btn");b&&(b.remove(),h=!1)}},{deep:!0}),window.addEventListener("message",g=>{if(g.source!==window)return;const{type:v}=g.data;v==="BEWLY_REQUEST_SETTINGS"&&l(k.value)}),window.addEventListener("message",g=>{if(g.source!==window.parent)return;const{type:v,isDark:b,darkModeBaseColor:_,useOriginalBilibiliTopBar:y}=g.data;if(v===zo){const E=Fw();if(b){const S=document.querySelector("#bewly");S&&S.classList.add("dark"),E||(document.documentElement.classList.add("dark"),document.body?.classList.add("dark")),_&&document.documentElement.style.setProperty("--bew-dark-base-color",_)}else{const S=document.querySelector("#bewly");S&&S.classList.remove("dark"),E||(document.documentElement.classList.remove("dark"),document.body?.classList.remove("dark"))}}else if(v===uc){if(typeof y!="boolean")return;document.documentElement.classList.toggle("remove-top-bar",!y),y&&(jc(document),tw(document))}},{passive:!0}),u(),NW(),ai()&&(lc()||fn())){const g=lc()?"message":"video";console.log(`[Bewly IFrame] ESC listener initialized for ${g} page`),window.addEventListener("keydown",v=>{if(v.key!=="Escape"&&v.code!=="Escape")return;console.log("[Bewly IFrame] ESC key pressed in iframe");const b=document.activeElement,_=b?.tagName?.toLowerCase(),y=_==="input"||_==="textarea"||b?.hasAttribute("contenteditable");if(console.log("[Bewly IFrame] Active element:",_,"isInput:",y),y){console.log("[Bewly IFrame] Focus in input element, ignoring ESC");return}if(fn()){const E=document.querySelector(".bpx-player-ctrl-btn.bpx-player-ctrl-web"),S=document.querySelector(".bpx-player-ctrl-btn.bpx-player-ctrl-wide"),A=E?.classList.contains("bpx-state-entered"),C=S?.classList.contains("bpx-state-entered");if(console.log("[Bewly IFrame] Video state - webFull:",A,"wide:",C),A||C){console.log("[Bewly IFrame] Video in fullscreen/wide mode, letting player handle ESC");return}}console.log("[Bewly IFrame] Sending close request to parent"),v.preventDefault(),v.stopPropagation(),window.parent.postMessage({type:"BEWLY_DRAWER_CLOSE_REQUEST",source:"iframe"},"*")},!0)}}const PK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),DK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),OK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),MK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),$K=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),FK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),BK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),NK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),UK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),VK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),jK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),HK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),zK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),GK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),WK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),KK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),YK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),XK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),qK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ZK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),QK={flex:"~","ml--8":""},JK={"w-140px":"","shrink-0":""},eY={"w-inherit":"",pos:"fixed"},tY={flex:"~ col gap-1"},iY=["onClick"],nY={class:"flex items-center"},sY={class:"flex-1","pl-6":"","pr-4":""},rY=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"PluginComponentsAndPages",setup(t){const{t:e}=St(),i=z(ho.General),n=[{value:ho.General,title:e("settings.plugin.general"),icon:"i-mingcute:settings-3-line",iconActivated:"i-mingcute:settings-3-fill",component:jt(()=>Promise.resolve().then(()=>gie))},{value:ho.VideoCard,title:e("settings.plugin.video_card"),icon:"i-mingcute:video-camera-line",iconActivated:"i-mingcute:video-camera-fill",component:jt(()=>Promise.resolve().then(()=>Cie))},{value:ho.TopBar,title:e("settings.plugin.topbar"),icon:"i-mingcute:layout-top-line",iconActivated:"i-mingcute:layout-top-fill",component:jt(()=>Promise.resolve().then(()=>fne))},{value:ho.DockAndSidebar,title:e("settings.plugin.dock_and_sidebar"),icon:"i-mingcute:navigation-line",iconActivated:"i-mingcute:navigation-fill",component:jt(()=>Promise.resolve().then(()=>ioe))},{value:ho.Home,title:e("settings.plugin.home"),icon:"i-mingcute:home-5-line",iconActivated:"i-mingcute:home-5-fill",component:jt(()=>Promise.resolve().then(()=>Zoe))},{value:ho.Search,title:e("settings.plugin.search"),icon:"i-mingcute:search-2-line",iconActivated:"i-mingcute:search-2-fill",component:jt(()=>Promise.resolve().then(()=>poe))},{value:ho.VolumeBalance,title:e("settings.plugin.volume_balance"),icon:"i-mingcute:volume-line",iconActivated:"i-mingcute:volume-fill",component:jt(()=>Promise.resolve().then(()=>sae))}];return(s,r)=>(L(),P("div",QK,[x("div",JK,[x("div",eY,[x("ul",tY,[(L(),P(Te,null,Ne(n,o=>x("li",{key:o.value,style:Ue({backgroundColor:i.value===o.value?"var(--bew-fill-3)":""}),"cursor-pointer":"",p:"y-2 x-4",rounded:"$bew-radius",bg:"hover:$bew-fill-2","duration-300":"",onClick:a=>i.value=o.value},[x("div",nY,[x("div",{class:Ie([i.value===o.value?o.iconActivated:o.icon,"mr-2 text-lg"])},null,2),x("span",null,G(o.title),1)])],12,iY)),64))])])]),x("div",sY,[F(nt,{name:"page-fade"},{default:H(()=>[(L(),_e(wr(n.find(o=>o.value===i.value)?.component)))]),_:1})])]))}})},Symbol.toStringTag,{value:"Module"})),oY={flex:"~","ml--8":""},aY={"w-140px":"","shrink-0":""},lY={"w-inherit":"",pos:"fixed"},uY={flex:"~ col gap-1"},cY=["onClick"],dY={class:"flex items-center"},fY={class:"flex-1","pl-6":"","pr-4":""},hY=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"BilibiliFeaturesEnhancement",setup(t){const{t:e}=St(),i=z(Vl.Comments),n=[{value:Vl.Comments,title:e("settings.bilibili_features.comments"),icon:"i-mingcute:comment-line",iconActivated:"i-mingcute:comment-fill",component:jt(()=>Promise.resolve().then(()=>rae))},{value:Vl.VideoPlayback,title:e("settings.bilibili_features.video_playback"),icon:"i-mingcute:play-circle-line",iconActivated:"i-mingcute:play-circle-fill",component:jt(()=>Promise.resolve().then(()=>oae))},{value:Vl.AutoPlay,title:e("settings.bilibili_features.auto_play"),icon:"i-mingcute:list-check-line",iconActivated:"i-mingcute:list-check-fill",component:jt(()=>Promise.resolve().then(()=>aae))},{value:Vl.VipFeatures,title:e("settings.bilibili_features.vip_features"),icon:"i-mingcute:vip-1-line",iconActivated:"i-mingcute:vip-1-fill",component:jt(()=>Promise.resolve().then(()=>lae))}];return(s,r)=>(L(),P("div",oY,[x("div",aY,[x("div",lY,[x("ul",uY,[(L(),P(Te,null,Ne(n,o=>x("li",{key:o.value,style:Ue({backgroundColor:i.value===o.value?"var(--bew-fill-3)":""}),"cursor-pointer":"",p:"y-2 x-4",rounded:"$bew-radius",bg:"hover:$bew-fill-2","duration-300":"",onClick:a=>i.value=o.value},[x("div",dY,[x("div",{class:Ie([i.value===o.value?o.iconActivated:o.icon,"mr-2 text-lg"])},null,2),x("span",null,G(o.title),1)])],12,cY)),64))])])]),x("div",fY,[F(nt,{name:"page-fade"},{default:H(()=>[(L(),_e(wr(n.find(o=>o.value===i.value)?.component)))]),_:1})])]))}})},Symbol.toStringTag,{value:"Module"})),pY=[{name:"22 ",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/searchBarCharacters/22chan-1.png"},{name:"33 ",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/searchBarCharacters/33chan-1.png"},{name:"22 ",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/searchBarCharacters/22chan-2.png"},{name:"33 ",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/searchBarCharacters/33chan-2.png"}],mY=[{name:"LoremPicsum Random Image",url:"https://picsum.photos/2560/1440/?nature",thumbnail:"https://picsum.photos/2560/1440/?nature"},{name:"Nicolas Lafargue - Rocky Mountain Cloudscape",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/rocky-mountain-cloudscape.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/rocky-mountain-cloudscape-thumbnail.jpg"},{name:"Zongnan Bao- Green white mountains",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/green-white-mountains.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/green-white-mountains-thumbnail.jpg"},{name:"Colin Watts - Night Sky Stars",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/night-sky-stars.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/night-sky-stars-thumbnail.jpg"},{name:"Ryan Geller - Sailboats moored at Land and Sea Park in The Exumas",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/sailboats-moored-at-the-exumas.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/sailboats-moored-at-the-exumas-thumbnail.jpg"},{name:"NASA - Outer Space Photo",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/outer-space-photo.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/outer-space-photo-thumbnail.jpg"},{name:"BML2019 VR (pid: 74271400)",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/bml2019-vr.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/bml2019-vr-thumbnail.jpg"},{name:"2020 ",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/2020-.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/2020--thumbnail.jpg"},{name:"2020 BDF",url:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/2020-bdf.jpg",thumbnail:"https://cdn.jsdelivr.net/gh/BewlyBewly/Imgs/wallpapers/2020-bdf-thumbnail.jpg"}],gY={class:"b-settings-item","py-4":""},vY={flex:"~ gap-4","justify-between":"","items-center":"","text-base":""},_Y={class:"left-content",w:"5/7"},bY={class:"right-content",w:"2/7"},yY={key:0,"mt-4":""},Oe=qe(Me({__name:"SettingsItem",props:{title:{},desc:{}},setup(t){return(e,i)=>(L(),P("div",gY,[x("div",vY,[x("div",_Y,[x("div",null,[mi(e.$slots,"title",{},()=>[He(G(e.title),1)],!0)]),x("div",{text:"sm $bew-text-2","break-words":"",style:Ue({marginTop:e.$slots.desc||e.desc?"0.25rem":"0"})},[mi(e.$slots,"desc",{},()=>[He(G(e.desc),1)],!0)],4)]),x("div",bY,[mi(e.$slots,"default",{},void 0,!0)])]),e.$slots.bottom?(L(),P("div",yY,[mi(e.$slots,"bottom",{},void 0,!0)])):X("",!0)]))}}),[["__scopeId","data-v-f6f767a2"]]),wY={class:"b-settings-item-group"},EY={text:"base $bew-text-1","fw-bold":""},SY={key:0,text:"sm $bew-text-2"},xY={style:{"box-shadow":"var(--bew-shadow-edge-glow-1), var(--bew-shadow-1)"},"mt-2":"","px-4":"","mx--4":"",rounded:"$bew-radius",bg:"$bew-fill-alt",shadow:"$bew-shadow-edge-glow-1"},It=qe(Me({__name:"SettingsItemGroup",props:{title:{},desc:{}},setup(t){return(e,i)=>(L(),P("div",wY,[x("p",EY,G(e.title),1),e.desc?(L(),P("p",SY,G(e.desc),1)):X("",!0),x("main",xY,[mi(e.$slots,"default",{},void 0,!0)])]))}}),[["__scopeId","data-v-5b50b544"]]),TY={color:"$bew-warning-color"},AY={"w-full":"",flex:"",rounded:"$bew-radius",bg:"$bew-fill-1","p-1":""},kY={grid:"~ xl:cols-5 lg:cols-4 cols-3 gap-4"},CY=["onClick"],LY=["src","alt"],IY={key:0,class:"opacity-0 group-hover:opacity-100","duration-300":"",pos:"absolute top-4px right-4px","z-1":"",text:"14px",flex:"~ gap-1"},RY=["src","alt"],PY={flex:"","items-center":"","gap-4":""},DY={"aspect-video":"",bg:"$bew-fill-1",rounded:"$bew-radius","overflow-hidden":"","un-border":"4 transparent","cursor-pointer":"","shrink-0":"",w:"xl:1/5 lg:1/4 md:1/3"},OY=["src"],MY={color:"sm $bew-text-3","mt-2":""},$Y={color:"$bew-warning-color"},Nw=qe(Me({__name:"ChangeWallpaper",props:{type:{}},setup(t){const e=t,i=z(null),n=ge(()=>e.type==="global"),s=ge(()=>n.value?k.value.wallpaperMode==="buildIn":k.value.searchPageWallpaperMode==="buildIn"),r=ge(()=>{const h=Yt.value.locallyUploadedWallpaper;return h?.url?Om(h.url):null});function o(h){return Ko(h)}function a(h){n.value?k.value.wallpaperMode=h:k.value.searchPageWallpaperMode=h,h==="byUrl"&&(k.value.wallpaper.startsWith("data:image/")||o(k.value.wallpaper)?k.value.wallpaper="":(k.value.searchPageWallpaper.startsWith("data:image/")||o(k.value.searchPageWallpaper))&&(k.value.searchPageWallpaper=""))}function l(h){n.value?(h?k.value.enableWallpaperMasking=!0:k.value.enableWallpaperMasking=!1,k.value.wallpaper=h):k.value.searchPageWallpaper=h}function u(h){return new Promise((p,m)=>{const g=new FileReader;g.readAsDataURL(h),g.onload=()=>p(g.result),g.onerror=v=>m(v)})}async function c(h){i.value&&i.value.click();const p=h.target?.files?.[0];p&&Uy(p,2560,1440,.9,async m=>{try{const g=await u(m);Yt.value.locallyUploadedWallpaper?.isLocal&&Yt.value.locallyUploadedWallpaper?.id&&C3(Yt.value.locallyUploadedWallpaper.id);const v=await GC(m,g),b=`local-wallpaper:${v.id}`;l(b),Yt.value.locallyUploadedWallpaper={...v,url:b}}catch(g){console.error(":",g)}})}function d(){Yt.value.locallyUploadedWallpaper?.isLocal&&Yt.value.locallyUploadedWallpaper?.id&&C3(Yt.value.locallyUploadedWallpaper.id),l(""),Yt.value.locallyUploadedWallpaper=null}function f(){const h=Yt.value.locallyUploadedWallpaper;if(h?.isLocal&&h.id&&!L3(h.id)){Yt.value.locallyUploadedWallpaper=null;const p=n.value?k.value.wallpaper:k.value.searchPageWallpaper;o(p)&&l("")}}return st(()=>{f()}),(h,p)=>{const m=Ge("Radio"),g=Ge("Input"),v=Ge("Tooltip"),b=Ge("Slider");return L(),_e(It,{title:h.$t("settings.group_wallpaper")},{default:H(()=>[w(n)?X("",!0):(L(),_e(Oe,{key:0,title:h.$t("settings.individually_set_search_page_wallpaper")},{desc:H(()=>[x("span",TY,G(h.$t("common.performance_impact_warn")),1)]),default:H(()=>[F(m,{modelValue:w(k).individuallySetSearchPageWallpaper,"onUpdate:modelValue":p[0]||(p[0]=_=>w(k).individuallySetSearchPageWallpaper=_)},null,8,["modelValue"])]),_:1},8,["title"])),w(n)||w(k).individuallySetSearchPageWallpaper&&!w(n)?(L(),P(Te,{key:1},[F(Oe,{title:h.$t("settings.wallpaper_mode"),desc:h.$t("settings.wallpaper_mode_desc")},{default:H(()=>[x("div",AY,[x("div",{"flex-1":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(s)?"var(--bew-theme-color)":"",color:w(s)?"white":""}),onClick:p[1]||(p[1]=_=>a("buildIn"))},G(h.$t("settings.wallpaper_mode_opt.build_in")),5),x("div",{"flex-1":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(s)?"":"var(--bew-theme-color)",color:w(s)?"":"white"}),onClick:p[2]||(p[2]=_=>a("byUrl"))},G(h.$t("settings.wallpaper_mode_opt.by_url")),5)])]),_:1},8,["title","desc"]),F(Oe,{title:h.$t("settings.wallpaper_cache_time")},{desc:H(()=>[He(G(h.$t("settings.wallpaper_cache_time_desc")),1)]),default:H(()=>[w(n)?(L(),_e(g,{key:0,modelValue:w(k).wallpaperCacheTime,"onUpdate:modelValue":p[3]||(p[3]=_=>w(k).wallpaperCacheTime=_),type:"number",min:0,max:168,placeholder:"0","w-100px":""},{suffix:H(()=>[...p[15]||(p[15]=[x("span",{text:"sm $bew-text-2"},"h",-1)])]),_:1},8,["modelValue"])):(L(),_e(g,{key:1,modelValue:w(k).searchPageWallpaperCacheTime,"onUpdate:modelValue":p[4]||(p[4]=_=>w(k).searchPageWallpaperCacheTime=_),type:"number",min:0,max:168,placeholder:"0","w-100px":""},{suffix:H(()=>[...p[16]||(p[16]=[x("span",{text:"sm $bew-text-2"},"h",-1)])]),_:1},8,["modelValue"]))]),_:1},8,["title"]),w(s)?(L(),_e(Oe,{key:0,title:h.$t("settings.choose_ur_wallpaper")},{bottom:H(()=>[x("div",kY,[x("picture",{"aspect-video":"",bg:"$bew-fill-1",rounded:"$bew-radius","overflow-hidden":"","un-border":"4 transparent","cursor-pointer":"",grid:"","place-items-center":"",class:Ie({"selected-wallpaper":w(n)?w(k).wallpaper==="":w(k).searchPageWallpaper===""}),onClick:p[5]||(p[5]=_=>l(""))},[...p[17]||(p[17]=[x("div",{"i-tabler:photo-off":"",text:"3xl $bew-text-3"},null,-1)])],2),(L(!0),P(Te,null,Ne(w(mY),_=>(L(),_e(v,{key:_.url,placement:"top",content:_.name,"aspect-video":""},{default:H(()=>[x("picture",{"aspect-video":"",bg:"$bew-fill-1",rounded:"$bew-radius","overflow-hidden":"","un-border":"4 transparent","w-full":"",class:Ie({"selected-wallpaper":w(n)?w(k).wallpaper===_.url:w(k).searchPageWallpaper===_.url}),onClick:y=>l(_.url)},[x("img",{src:_.thumbnail||_.url,alt:_.name,"w-full":"","h-full":"","object-cover":"",class:"img-no-error"},null,8,LY)],10,CY)]),_:2},1032,["content"]))),128)),F(v,{placement:"top",content:w(Yt).locallyUploadedWallpaper?.name||"","aspect-video":""},{default:H(()=>[x("input",{ref_key:"uploadWallpaperRef",ref:i,type:"file",accept:"image/*",hidden:"",onChange:c},null,544),x("picture",{class:Ie(["group",{"selected-wallpaper":w(n)?w(k).wallpaper===(w(r)||w(Yt).locallyUploadedWallpaper?.url):w(k).searchPageWallpaper===(w(r)||w(Yt).locallyUploadedWallpaper?.url)}]),"aspect-video":"",bg:"$bew-fill-1",rounded:"$bew-radius","overflow-hidden":"","un-border":"4 transparent","w-full":"",flex:"~ items-center justify-center",onClick:p[6]||(p[6]=_=>l(w(r)||w(Yt).locallyUploadedWallpaper?.url||""))},[w(Yt).locallyUploadedWallpaper?(L(),P("div",IY,[x("button",{style:{"backdrop-filter":"var(--bew-filter-glass-1)"},bg:"$bew-content","rounded-full":"","w-28px":"","h-28px":"",grid:"","place-items-center":"",onClick:c},[...p[18]||(p[18]=[x("i",{"i-mingcute:edit-2-line":""},null,-1)])]),x("button",{style:{"backdrop-filter":"var(--bew-filter-glass-1)"},bg:"$bew-content","rounded-full":"","w-28px":"","h-28px":"",grid:"","place-items-center":"",onClick:d},[...p[19]||(p[19]=[x("i",{"i-mingcute:delete-2-line":""},null,-1)])])])):X("",!0),w(Yt).locallyUploadedWallpaper?(L(),P("img",{key:2,src:w(r)||w(Yt).locallyUploadedWallpaper.url,alt:w(Yt).locallyUploadedWallpaper.name,"w-full":"","h-full":"","object-cover":""},null,8,RY)):(L(),P("div",{key:1,absolute:"","w-full":"","h-full":"",grid:"","place-items-center":"",onClick:c},[...p[20]||(p[20]=[x("div",{"i-tabler:photo-up":"",text:"3xl $bew-text-3"},null,-1)])]))],2)]),_:1},8,["content"])])]),_:1},8,["title"])):(L(),_e(Oe,{key:1,title:h.$t("settings.image_url")},{bottom:H(()=>[x("div",PY,[x("picture",DY,[(w(n)?w(k).wallpaper:w(k).searchPageWallpaper)?(L(),P("img",{key:0,src:w(n)?w(k).wallpaper:w(k).searchPageWallpaper,alt:"",loading:"lazy","w-full":"","h-full":"","object-cover":"",onerror:"this.style.display='none'; this.onerror=null;"},null,8,OY)):X("",!0)]),x("div",null,[w(n)?(L(),_e(g,{key:0,modelValue:w(k).wallpaper,"onUpdate:modelValue":p[7]||(p[7]=_=>w(k).wallpaper=_),"w-full":""},null,8,["modelValue"])):(L(),_e(g,{key:1,modelValue:w(k).searchPageWallpaper,"onUpdate:modelValue":p[8]||(p[8]=_=>w(k).searchPageWallpaper=_),"w-full":""},null,8,["modelValue"])),x("p",MY,G(h.$t("settings.image_url_hint")),1)])])]),_:1},8,["title"])),F(Oe,{title:h.$t("settings.enable_wallpaper_masking")},{desc:H(()=>[x("span",$Y,G(h.$t("common.performance_impact_warn")),1)]),default:H(()=>[w(n)?(L(),_e(m,{key:0,modelValue:w(k).enableWallpaperMasking,"onUpdate:modelValue":p[9]||(p[9]=_=>w(k).enableWallpaperMasking=_)},null,8,["modelValue"])):(L(),_e(m,{key:1,modelValue:w(k).searchPageEnableWallpaperMasking,"onUpdate:modelValue":p[10]||(p[10]=_=>w(k).searchPageEnableWallpaperMasking=_)},null,8,["modelValue"]))]),_:1},8,["title"]),(w(n)?w(k).enableWallpaperMasking:w(k).searchPageEnableWallpaperMasking)?(L(),_e(Oe,{key:2,title:h.$t("settings.wallpaper_mask_opacity")},{default:H(()=>[w(n)?(L(),_e(b,{key:0,modelValue:w(k).wallpaperMaskOpacity,"onUpdate:modelValue":p[11]||(p[11]=_=>w(k).wallpaperMaskOpacity=_),label:`${w(k).wallpaperMaskOpacity}%`},null,8,["modelValue","label"])):(L(),_e(b,{key:1,modelValue:w(k).searchPageWallpaperMaskOpacity,"onUpdate:modelValue":p[12]||(p[12]=_=>w(k).searchPageWallpaperMaskOpacity=_),label:`${w(k).searchPageWallpaperMaskOpacity}%`},null,8,["modelValue","label"]))]),_:1},8,["title"])):X("",!0),(w(n)?w(k).enableWallpaperMasking:w(k).searchPageEnableWallpaperMasking)?(L(),_e(Oe,{key:3,title:h.$t("settings.wallpaper_blur_intensity")},{default:H(()=>[w(n)?(L(),_e(b,{key:0,modelValue:w(k).wallpaperBlurIntensity,"onUpdate:modelValue":p[13]||(p[13]=_=>w(k).wallpaperBlurIntensity=_),min:0,max:60,label:`${w(k).wallpaperBlurIntensity}px`},null,8,["modelValue","label"])):(L(),_e(b,{key:1,modelValue:w(k).searchPageWallpaperBlurIntensity,"onUpdate:modelValue":p[14]||(p[14]=_=>w(k).searchPageWallpaperBlurIntensity=_),min:0,max:60,label:`${w(k).searchPageWallpaperBlurIntensity}px`},null,8,["modelValue","label"]))]),_:1},8,["title"])):X("",!0)],64)):X("",!0)]),_:1},8,["title"])}}}),[["__scopeId","data-v-96af3078"]]),FY={flex:"~ gap-2 wrap","justify-end":""},BY=["onClick"],NY=["value"],UY={flex:"~ gap-2 wrap","justify-end":""},VY=["onClick"],jY=["value"],HY={color:"$bew-warning-color"},zY=["innerHTML"],GY={text:"$bew-error-color"},WY=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Appearance",setup(t){const{t:e}=St(),i=ge(()=>["#22c55e","#34d399","#14b8a6","#06b6d4","#00a1d6","#60a5fa","#3b82f6","#6366f1","#818cf8","#a78bfa","#f46d43","#fb923c","#f59e0b","#eab308","#f43f5e","#fb7299","#fda4af"]),n=ge(()=>["#2a2d32","#1a1b1e","#2d2a2f","#2a2f2d","#2f2d2a","#252829","#2c2a2a","#292a2c"]),s=ge(()=>!i.value.includes(k.value.themeColor)),r=ge(()=>!n.value.includes(k.value.darkModeBaseColor)),o=ge(()=>[{label:e("settings.customize_font_opt.default"),value:"default"},{label:e("settings.customize_font_opt.recommend"),value:"recommend"},{label:e("settings.customize_font_opt.custom"),value:"custom"}]),a=ge(()=>[{label:e("settings.theme_opt.light"),value:"light"},{label:e("settings.theme_opt.dark"),value:"dark"},{label:e("settings.theme_opt.auto"),value:"auto"}]);Pe(()=>k.value.wallpaper,h=>{f(h)});function l(h){k.value.themeColor=h}const u=Ho(h=>l(h),100);function c(h){k.value.darkModeBaseColor=h}const d=Ho(h=>c(h),100);function f(h){h?k.value.enableWallpaperMasking=!0:k.value.enableWallpaperMasking=!1,k.value.wallpaper=h}return(h,p)=>{const m=Ge("Radio"),g=Ge("Slider"),v=Ge("Input"),b=Ge("CodeEditor");return L(),P("div",null,[F(It,{title:h.$t("settings.group_color")},{default:H(()=>[F(Oe,{title:h.$t("settings.theme")},{default:H(()=>[F(hi,{modelValue:w(k).theme,"onUpdate:modelValue":p[0]||(p[0]=_=>w(k).theme=_),"w-full":"",options:w(a)},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,{title:h.$t("settings.theme_color")},{default:H(()=>[x("div",FY,[(L(!0),P(Te,null,Ne(w(i),_=>(L(),P("div",{key:_,"w-20px":"","h-20px":"","rounded-8":"","cursor-pointer":"",transition:"","duration-300":"","box-border":"",style:Ue({background:_,transform:_===w(k).themeColor?"scale(1.3)":"scale(1)",border:_===w(k).themeColor?"2px solid white":"2px solid transparent",boxShadow:_===w(k).themeColor?"0 0 0 1px var(--bew-border-color), var(--bew-shadow-1)":"none"}),onClick:y=>l(_)},null,12,BY))),128)),x("div",{"w-20px":"","h-20px":"","rounded-8":"","overflow-hidden":"","cursor-pointer":"",transition:"","duration-300":"",flex:"~ items-center justify-center",style:Ue({transform:w(s)?"scale(1.3)":"scale(1)",border:w(s)?"2px solid white":`2px solid ${w(k).themeColor}`,boxShadow:w(s)?"0 0 0 1px var(--bew-border-color), var(--bew-shadow-1)":"none"})},[p[13]||(p[13]=x("div",{"i-mingcute:color-picker-line":"",pos:"absolute","text-white":"","w-12px":"","h-12px":"","pointer-events-none":""},null,-1)),x("input",{value:w(k).themeColor,type:"color","w-30px":"","h-30px":"","p-0":"","m-0":"",block:"","shrink-0":"","rounded-8":"","border-none":"","cursor-pointer":"",onInput:p[1]||(p[1]=_=>w(u)(_.target?.value))},null,40,NY)],4)])]),_:1},8,["title"]),F(Oe,{title:h.$t("settings.dark_mode_base_color")},{default:H(()=>[x("div",UY,[(L(!0),P(Te,null,Ne(w(n),_=>(L(),P("div",{key:_,"w-20px":"","h-20px":"","rounded-8":"","cursor-pointer":"",transition:"","duration-300":"","box-border":"",style:Ue({background:_,transform:_===w(k).darkModeBaseColor?"scale(1.3)":"scale(1)",border:_===w(k).darkModeBaseColor?"2px solid white":"2px solid transparent",boxShadow:_===w(k).darkModeBaseColor?"0 0 0 1px var(--bew-border-color), var(--bew-shadow-1)":"none"}),onClick:y=>c(_)},null,12,VY))),128)),x("div",{"w-20px":"","h-20px":"","rounded-8":"","overflow-hidden":"","cursor-pointer":"",transition:"","duration-300":"",flex:"~ items-center justify-center",style:Ue({transform:w(r)?"scale(1.3)":"scale(1)",border:w(r)?"2px solid white":`2px solid ${w(k).darkModeBaseColor}`,boxShadow:w(r)?"0 0 0 1px var(--bew-border-color), var(--bew-shadow-1)":"none"})},[p[14]||(p[14]=x("div",{"i-mingcute:color-picker-line":"",pos:"absolute","text-white":"","w-12px":"","h-12px":"","pointer-events-none":""},null,-1)),x("input",{value:w(k).darkModeBaseColor,type:"color","w-30px":"","h-30px":"","p-0":"","m-0":"",block:"","shrink-0":"","rounded-8":"","border-none":"","cursor-pointer":"",onInput:p[2]||(p[2]=_=>w(d)(_.target?.value))},null,40,jY)],4)])]),_:1},8,["title"]),F(Oe,{title:h.$t("settings.gradient_theme_color_background")},{default:H(()=>[F(m,{modelValue:w(k).useLinearGradientThemeColorBackground,"onUpdate:modelValue":p[3]||(p[3]=_=>w(k).useLinearGradientThemeColorBackground=_)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1},8,["title"]),F(Nw,{type:"global"}),F(It,{title:h.$t("settings.group_visual_effects")},{default:H(()=>[F(Oe,{title:h.$t("settings.enable_frosted_glass")},{desc:H(()=>[x("span",HY,G(h.$t("common.performance_impact_warn")),1)]),default:H(()=>[F(m,{modelValue:w(k).enableFrostedGlass,"onUpdate:modelValue":p[4]||(p[4]=_=>w(k).enableFrostedGlass=_)},null,8,["modelValue"])]),_:1},8,["title"]),w(k).enableFrostedGlass?(L(),_e(Oe,{key:0,title:h.$t("settings.frosted_glass_blur_intensity")},{default:H(()=>[F(g,{modelValue:w(k).frostedGlassBlurIntensity,"onUpdate:modelValue":p[5]||(p[5]=_=>w(k).frostedGlassBlurIntensity=_),min:w(Rf),max:w(Pf),label:`${w(k).frostedGlassBlurIntensity}`},null,8,["modelValue","min","max","label"])]),_:1},8,["title"])):X("",!0),F(Oe,{title:h.$t("settings.disable_shadow")},{default:H(()=>[F(m,{modelValue:w(k).disableShadow,"onUpdate:modelValue":p[6]||(p[6]=_=>w(k).disableShadow=_)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:h.$t("settings.group_fonts")},{default:H(()=>[F(Oe,{title:h.$t("settings.customize_font")},El({default:H(()=>[F(hi,{modelValue:w(k).customizeFont,"onUpdate:modelValue":p[7]||(p[7]=_=>w(k).customizeFont=_),options:w(o),w:"full"},null,8,["modelValue","options"])]),_:2},[w(k).customizeFont==="custom"?{name:"bottom",fn:H(()=>[F(v,{modelValue:w(k).fontFamily,"onUpdate:modelValue":p[8]||(p[8]=_=>w(k).fontFamily=_),onKeydownPassive:ft(()=>{},["stop"])},null,8,["modelValue"]),x("div",{text:"sm $bew-text-2","mt-1":"",innerHTML:w(e)("settings.customize_font_desc")},null,8,zY)]),key:"0"}:void 0]),1032,["title"]),F(Oe,{title:h.$t("settings.remove_the_indent_from_chinese_punctuation"),desc:h.$t("settings.remove_the_indent_from_chinese_punctuation_desc")},{default:H(()=>[F(m,{modelValue:w(k).removeTheIndentFromChinesePunctuation,"onUpdate:modelValue":p[9]||(p[9]=_=>w(k).removeTheIndentFromChinesePunctuation=_)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:h.$t("settings.override_danmaku_font"),desc:h.$t("settings.override_danmaku_font_desc")},{default:H(()=>[F(m,{modelValue:w(k).overrideDanmakuFont,"onUpdate:modelValue":p[10]||(p[10]=_=>w(k).overrideDanmakuFont=_)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"]),F(It,null,{default:H(()=>[F(Oe,{title:h.$t("settings.customize_css")},El({desc:H(()=>[x("span",GY,G(h.$t("settings.customize_css_desc")),1)]),default:H(()=>[F(m,{modelValue:w(Yt).customizeCSS,"onUpdate:modelValue":p[11]||(p[11]=_=>w(Yt).customizeCSS=_)},null,8,["modelValue"])]),_:2},[w(Yt).customizeCSS?{name:"bottom",fn:H(()=>[F(b,{modelValue:w(Yt).customizeCSSContent,"onUpdate:modelValue":p[12]||(p[12]=_=>w(Yt).customizeCSSContent=_),language:"css",onKeydownPassive:ft(()=>{},["stop"])},null,8,["modelValue"])]),key:"0"}:void 0]),1032,["title"])]),_:1})])}}})},Symbol.toStringTag,{value:"Module"})),KY=["innerHTML"],YY={class:"shortcut-item-config"},XY={class:"flex items-center gap-2 mb-2"},qY=["onKeydown","onKeyup"],ZY={key:1,class:"shortcut-key border rounded px-3 py-1 text-sm"},QY={class:"shortcut-actions flex gap-1"},JY=["title","onClick"],eX=["title"],tX=["title","onClick"],iX={class:"shortcut-key-readonly border rounded px-3 py-1 text-sm"},nX=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Shortcuts",setup(t){const{t:e}=St(),i=[{key:"Space",description:e("settings.shortcuts.official.play_pause")},{key:"",description:e("settings.shortcuts.official.forward")},{key:"",description:e("settings.shortcuts.official.backward")},{key:"",description:e("settings.shortcuts.official.volume_up")},{key:"",description:e("settings.shortcuts.official.volume_down")},{key:"Esc",description:e("settings.shortcuts.official.exit_fullscreen")},{key:"F",description:e("settings.shortcuts.official.fullscreen")},{key:"D",description:e("settings.shortcuts.official.danmu_toggle")},{key:"M",description:e("settings.shortcuts.official.mute")},{key:"[",description:e("settings.shortcuts.official.prev_video")},{key:"]",description:e("settings.shortcuts.official.next_video")},{key:"Shift + 1",description:e("settings.shortcuts.official.speed_1")},{key:"Shift + 2",description:e("settings.shortcuts.official.speed_2")},{key:"Enter",description:e("settings.shortcuts.official.input_danmu")}],n=[{title:e("settings.shortcuts.group.homepage"),shortcuts:[{id:"homeRefresh",name:e("settings.shortcuts.home_refresh"),description:e("settings.shortcuts.home_refresh_desc"),defaultKey:"R"}]},{title:e("settings.shortcuts.group.general"),shortcuts:[{id:"danmuStatus",name:e("settings.shortcuts.danmu_status"),description:e("settings.shortcuts.danmu_status_desc"),defaultKey:"Shift+D"},{id:"webFullscreen",name:e("settings.shortcuts.web_fullscreen"),description:e("settings.shortcuts.web_fullscreen_desc"),defaultKey:"W"},{id:"widescreen",name:e("settings.shortcuts.widescreen"),description:e("settings.shortcuts.widescreen_desc"),defaultKey:"T"},{id:"shortStepBackward",name:e("settings.shortcuts.short_step_backward"),description:e("settings.shortcuts.short_step_backward_desc"),defaultKey:"J"},{id:"longStepBackward",name:e("settings.shortcuts.long_step_backward"),description:e("settings.shortcuts.long_step_backward_desc"),defaultKey:"Shift+J"},{id:"playPause",name:e("settings.shortcuts.play_pause_ext"),description:e("settings.shortcuts.play_pause_ext_desc"),defaultKey:"K"},{id:"shortStepForward",name:e("settings.shortcuts.short_step_forward"),description:e("settings.shortcuts.short_step_forward_desc"),defaultKey:"L"},{id:"longStepForward",name:e("settings.shortcuts.long_step_forward"),description:e("settings.shortcuts.long_step_forward_desc"),defaultKey:"Shift+L"},{id:"pip",name:e("settings.shortcuts.pip"),description:e("settings.shortcuts.pip_desc"),defaultKey:"P"},{id:"turnOffLight",name:e("settings.shortcuts.turn_off_light"),description:e("settings.shortcuts.turn_off_light_desc"),defaultKey:"I"},{id:"caption",name:e("settings.shortcuts.caption"),description:e("settings.shortcuts.caption_desc"),defaultKey:"C"},{id:"increasePlaybackRate",name:e("settings.shortcuts.increase_playback_rate"),description:e("settings.shortcuts.increase_playback_rate_desc"),defaultKey:"+"},{id:"decreasePlaybackRate",name:e("settings.shortcuts.decrease_playback_rate"),description:e("settings.shortcuts.decrease_playback_rate_desc"),defaultKey:"-"},{id:"resetPlaybackRate",name:e("settings.shortcuts.reset_playback_rate"),description:e("settings.shortcuts.reset_playback_rate_desc"),defaultKey:"0"},{id:"previousFrame",name:e("settings.shortcuts.previous_frame"),description:e("settings.shortcuts.previous_frame_desc"),defaultKey:","},{id:"nextFrame",name:e("settings.shortcuts.next_frame"),description:e("settings.shortcuts.next_frame_desc"),defaultKey:"."},{id:"replay",name:e("settings.shortcuts.replay"),description:e("settings.shortcuts.replay_desc"),defaultKey:"Shift+Backspace"},{id:"toggleFollow",name:e("settings.shortcuts.toggle_follow"),description:e("settings.shortcuts.toggle_follow_desc"),defaultKey:"Shift+F"}]},{title:e("settings.shortcuts.group.fullscreen_mode"),shortcuts:[{id:"increaseVideoSize",name:e("settings.shortcuts.increase_video_size"),description:e("settings.shortcuts.increase_video_size_desc"),defaultKey:"Shift++"},{id:"decreaseVideoSize",name:e("settings.shortcuts.decrease_video_size"),description:e("settings.shortcuts.decrease_video_size_desc"),defaultKey:"Shift+-"},{id:"resetVideoSize",name:e("settings.shortcuts.reset_video_size"),description:e("settings.shortcuts.reset_video_size_desc"),defaultKey:"Shift+0"},{id:"videoTitle",name:e("settings.shortcuts.video_title"),description:e("settings.shortcuts.video_title_desc"),defaultKey:"B"},{id:"videoTime",name:e("settings.shortcuts.video_time"),description:e("settings.shortcuts.video_time_desc"),defaultKey:"G"},{id:"clockTime",name:e("settings.shortcuts.clock_time"),description:e("settings.shortcuts.clock_time_desc"),defaultKey:"H"}]}],s=z(null),r=z([]);function o(g){return k.value.shortcuts?.[g]}function a(g){return ro.shortcuts?.[g]}function l(g,v){if(!k.value.shortcuts)return{hasConflict:!1,conflictInfo:null};for(const b of n)for(const _ of b.shortcuts){if(_.id===v)continue;const y=k.value.shortcuts[_.id];if(y&&typeof y=="object"&&y.key&&y.key.toLowerCase()===g.toLowerCase())return{hasConflict:!0,conflictInfo:{id:String(_.id),name:_.name}}}for(const b of i)if(b.key.toLowerCase()===g.toLowerCase())return{hasConflict:!0,conflictInfo:{id:"official",name:b.description}};return{hasConflict:!1,conflictInfo:null}}function u(g){s.value=g,r.value=[]}function c(g,v){console.log("Saving shortcut key:",g,v),k.value.shortcuts||(k.value.shortcuts={}),k.value.shortcuts[g]?k.value.shortcuts[g].key=v:n.flatMap(_=>_.shortcuts).find(_=>_.id===g)?k.value.shortcuts[g]={key:v,enabled:!0}:k.value.shortcuts[g]={key:v,enabled:!0},s.value=null,r.value=[];try{r0()}catch(b){console.error("Failed to re-register shortcuts:",b)}}function d(){s.value=null,r.value=[]}function f(g,v){if(s.value!==v||(g.preventDefault(),g.stopPropagation(),["Control","Alt","Shift","Meta","Dead"].includes(g.key)))return;const b=[];g.ctrlKey&&b.push("Ctrl"),g.altKey&&b.push("Alt"),g.shiftKey&&b.push("Shift"),g.metaKey&&b.push("Meta");let _=g.key;_.length===1?_=_.toUpperCase():_===" "?_="Space":_==="ArrowUp"?_="":_==="ArrowDown"?_="":_==="ArrowLeft"?_="":_==="ArrowRight"?_="":_==="Backspace"?_="Backspace":_==="Escape"&&(_="Esc"),["Control","Alt","Shift","Meta","Dead"].includes(_)||b.push(_),r.value=b}function h(g,v){if(s.value===v){if(g.key==="Escape"){d();return}if(g.key==="Backspace"&&!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey){d();return}if(!g.ctrlKey&&!g.altKey&&!g.shiftKey&&!g.metaKey&&r.value.length>0){const b=r.value.join("+");if(b.trim()===""){d();return}const _=l(b,v);if(_.hasConflict&&_.conflictInfo){const y=`"${_.conflictInfo.name}"`;confirm(y)?c(v,b):d()}else c(v,b)}}}function p(g){k.value.shortcuts||(k.value.shortcuts={});const v=a(g.id);if(v)k.value.shortcuts[g.id]=JSON.parse(JSON.stringify(v));else{const b={key:g.defaultKey,enabled:!0};k.value.shortcuts[g.id]=b}r0()}function m(){k.value.shortcuts||(k.value.shortcuts={}),n.forEach(g=>{g.shortcuts.forEach(v=>{const b=a(v.id);b&&k.value.shortcuts&&(k.value.shortcuts[v.id]=JSON.parse(JSON.stringify(b)))})}),r0()}return(g,v)=>(L(),P("div",null,[F(It,null,{default:H(()=>[F(Oe,{title:w(e)("settings.shortcuts.enable_all_shortcuts_toggle")},{desc:H(()=>[x("div",{innerHTML:w(e)("settings.shortcuts.enable_all_shortcuts_toggle_desc")},null,8,KY)]),default:H(()=>[F(Je,{modelValue:w(k).keyboard,"onUpdate:modelValue":v[0]||(v[0]=b=>w(k).keyboard=b)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1}),(L(),P(Te,null,Ne(n,b=>F(It,{key:b.title,title:b.title},{default:H(()=>[(L(!0),P(Te,null,Ne(b.shortcuts,_=>(L(),_e(Oe,{key:_.id,title:_.name,desc:_.description},{default:H(()=>[x("div",YY,[x("div",XY,[s.value===_.id?(L(),P("div",{key:0,class:"shortcut-edit-box border rounded px-3 py-1 min-w-[120px] text-center text-sm",tabindex:"0",onKeydown:y=>f(y,_.id),onKeyup:y=>h(y,_.id),onBlur:d},G(r.value.length>0?r.value.join("+"):w(e)("settings.shortcuts.press_keys")),41,qY)):(L(),P("div",ZY,G(o(_.id)?.key||_.defaultKey),1)),x("div",QY,[s.value!==_.id?(L(),P("button",{key:0,class:"edit-btn p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:w(e)("settings.shortcuts.item.edit_key"),onClick:y=>u(_.id)},[...v[1]||(v[1]=[x("i",{"i-mingcute:edit-line":""},null,-1)])],8,JY)):X("",!0),s.value===_.id?(L(),P("button",{key:1,class:"cancel-btn p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:w(e)("settings.shortcuts.item.cancel_edit"),onClick:d},[...v[2]||(v[2]=[x("i",{"i-mingcute:close-line":""},null,-1)])],8,eX)):X("",!0),x("button",{class:"reset-btn p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700",title:w(e)("settings.shortcuts.item.reset_default"),onClick:y=>p(_)},[...v[3]||(v[3]=[x("i",{"i-mingcute:refresh-1-line":""},null,-1)])],8,tX)]),F(Je,{"model-value":w(k).shortcuts[_.id]?.enabled??!1,"onUpdate:modelValue":y=>{w(k).shortcuts[_.id]?(w(k).shortcuts[_.id]??={key:_.defaultKey,enabled:!1}).enabled=y:w(k).shortcuts[_.id]={key:_.defaultKey,enabled:y}}},null,8,["model-value","onUpdate:modelValue"])])])]),_:2},1032,["title","desc"]))),128))]),_:2},1032,["title"])),64)),F(It,{title:w(e)("settings.shortcuts.group.global_actions")},{default:H(()=>[F(Oe,{title:w(e)("settings.shortcuts.reset_all_ext_shortcuts")},{default:H(()=>[F(Ir,{onClick:m},{default:H(()=>[He(G(w(e)("settings.shortcuts.reset_all_button")),1)]),_:1})]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:w(e)("settings.shortcuts.group.official_bilibili")},{default:H(()=>[(L(),P(Te,null,Ne(i,b=>F(Oe,{key:b.key,title:b.key,desc:b.description},{default:H(()=>[x("div",iX,G(b.key),1)]),_:2},1032,["title","desc"])),64))]),_:1},8,["title"])]))}}),[["__scopeId","data-v-46b94ae3"]])},Symbol.toStringTag,{value:"Module"})),sX=["textContent"],rX=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Compatibility",setup(t){Pe(()=>k.value.useOriginalBilibiliHomepage,()=>{Et()&&location.reload()});const e=ge(()=>getComputedStyle(document.querySelector("html")).getPropertyValue("--theme-color").trim()??"#00a1d6");function i(n){k.value.themeColor=n}return(n,s)=>(L(),P("div",null,[F(It,{title:n.$t("settings.group_common")},{default:H(()=>[F(Oe,{title:n.$t("settings.topbar_visibility"),desc:n.$t("settings.topbar_visibility_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showTopBar,"onUpdate:modelValue":s[0]||(s[0]=r=>w(k).showTopBar=r),label:w(k).showTopBar?n.$t("settings.chk_box.show"):n.$t("settings.chk_box.hidden")},null,8,["modelValue","label"])]),_:1},8,["title","desc"]),F(Oe,{title:n.$t("settings.use_original_bilibili_topbar")},{default:H(()=>[F(Je,{modelValue:w(k).useOriginalBilibiliTopBar,"onUpdate:modelValue":s[1]||(s[1]=r=>w(k).useOriginalBilibiliTopBar=r)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:n.$t("settings.use_original_bilibili_homepage")},{desc:H(()=>[x("span",{color:"$bew-error-color",textContent:G(n.$t("settings.use_original_bilibili_homepage_desc"))},null,8,sX)]),default:H(()=>[F(Je,{modelValue:w(k).useOriginalBilibiliHomepage,"onUpdate:modelValue":s[2]||(s[2]=r=>w(k).useOriginalBilibiliHomepage=r)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:n.$t("settings.adapt_to_other_page_styles"),desc:n.$t("settings.adapt_to_other_page_styles_desc")},{default:H(()=>[F(Je,{modelValue:w(k).adaptToOtherPageStyles,"onUpdate:modelValue":s[3]||(s[3]=r=>w(k).adaptToOtherPageStyles=r)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"]),F(It,{title:"Bilibili Evolved"},{default:H(()=>[F(Oe,{title:n.$t("settings.follow_bilibili_evolved_color"),desc:n.$t("settings.follow_bilibili_evolved_color_desc")},{default:H(()=>[x("div",{"w-20px":"","h-20px":"","rounded-8":"","cursor-pointer":"",transition:"","duration-300":"","box-border":"",style:Ue({background:w(e),transform:w(e)===w(k).themeColor?"scale(1.3)":"scale(1)",border:w(e)===w(k).themeColor?"2px solid white":"2px solid transparent",boxShadow:w(e)===w(k).themeColor?"0 0 0 1px var(--bew-border-color), var(--bew-shadow-1)":"none"}),onClick:s[4]||(s[4]=r=>i(w(e)))},null,4)]),_:1},8,["title","desc"])]),_:1})]))}})},Symbol.toStringTag,{value:"Module"})),oX={"max-w-800px":"","mx-auto":""},aX={relative:"","w-200px":"","m-auto":""},lX=["src"],uX={key:0,href:"https://github.com/keleus/BewlyCat/releases",target:"_blank",pos:"absolute bottom-0 right-0",transform:"translate-x-50%","un-text":"xs $bew-text-1",p:"y-1 x-2",bg:"$bew-fill-1","rounded-12":""},cX={"text-2xl":"","text-center":"","mt-2":""},dX={flex:"inline gap-2","fw-900":""},fX={key:0,"inline-block":"",text:"$bew-warning-color"},hX={"text-center":""},pX={href:"https://github.com/keleus/BewlyCat/releases",target:"_blank","un-text":"sm color-$bew-text-2 hover:color-$bew-text-3"},mX={style:{"box-shadow":"var(--bew-shadow-1), var(--bew-shadow-edge-glow-1)"},"mt-6":"","p-4":"",bg:"$bew-fill-alt",rounded:"$bew-radius",flex:"~ col items-center gap-6"},gX={"w-full":""},vX={class:"title"},_X={"w-full":""},bX={class:"title"},yX={flex:"~ gap-2"},wX={class:"title"},EX=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"About",setup(t){const{t:e}=St(),i=z(),n=z(!1),s=ge(()=>!1);st(()=>{l()});function r(){if(i.value){i.value.click();const u=c=>{const d=c.target;if(d.files&&d.files.length>0){const f=d.files[0];d.value="";const h=new FileReader;h.onload=p=>{const g=p.target.result,v=JSON.parse(g);Object.keys(v).forEach(b=>{b in k.value&&(k.value[b]=v[b])}),i.value?.removeEventListener("change",u)},h.readAsText(f)}};i.value.addEventListener("change",u)}}function o(){const u=JSON.stringify(k.value,null,2),c=new Blob([u],{type:"application/json"}),d=URL.createObjectURL(c),f=document.createElement("a"),p=new Date().toLocaleString("sv-SE").replace(/[- :]/g,"");f.href=d,f.download=`bewly-settings-${p}.json`,f.click(),URL.revokeObjectURL(d)}function a(){confirm(e("settings.reset_settings_confirm"))&&(ro.language=k.value.language,k.value=ro)}async function l(){const u="https://api.github.com/repos/keleus/BewlyCat/releases/latest";try{const c=await fetch(u);if(!c.ok)throw new Error("Network response was not ok");const f=(await c.json()).tag_name,h=`v${o0}`;f!==h&&(n.value=!0)}catch{}}return(u,c)=>{const d=Ge("Button"),f=Ge("Tooltip");return L(),P("div",null,[x("div",oX,[x("div",aX,[x("img",{src:`${w(Zs).runtime.getURL("/assets/icon-512.png")}`,alt:"",width:"200"},null,8,lX),w(n)?(L(),P("a",uX," NEW ")):X("",!0)]),x("section",cX,[x("p",dX,[c[0]||(c[0]=x("span",null,"BewlyCat",-1)),w(s)?(L(),P("span",fX," Dev ")):X("",!0)]),x("p",hX,[x("a",pX," v"+G(w(o0)),1)])]),x("section",mX,[x("section",gX,[x("h3",vX,G(u.$t("settings.links")),1),c[1]||(c[1]=x("div",{grid:"~ xl:cols-6 lg:cols-5 md:cols-4 cols-3 gap-2"},[x("a",{href:"https://github.com/keleus/BewlyCat",target:"_blank",class:"link-card",bg:"black dark:white !opacity-10 !hover:opacity-20","un-text":"black dark:white"},[x("div",{"i-tabler:brand-github":""}),He(" GitHub ")]),x("a",{href:"https://space.bilibili.com/32487218/dynamic",target:"_blank",class:"link-card",bg:"#fb7299 dark:#ffa7c0 !opacity-10 !hover:opacity-20","un-text":"#fb7299 dark:#ffa7c0"},[x("div",{"i-tabler:brand-bilibili":""}),He(" Bilibili ")]),x("a",{href:"https://www.xiaohongshu.com/user/profile/5fb77085000000000100060d",target:"_blank",class:"link-card",bg:"#FF2442 dark:#D7223A !opacity-10 !hover:opacity-20","un-text":"#FF2442 dark:#D7223A"},[x("div",{"i-tabler:book-2":""}),He("  ")])],-1))]),x("section",_X,[x("h3",bX,G(`${u.$t("settings.import_settings")} / ${u.$t("settings.export_settings")} / ${u.$t("settings.reset_settings")}`),1),x("div",yX,[F(d,{class:"btn",onClick:r},{left:H(()=>[...c[2]||(c[2]=[x("div",{"i-uil:import":""},null,-1)])]),default:H(()=>[x("input",{ref_key:"importSettingsRef",ref:i,type:"file",accept:".json",hidden:""},null,512),He(" "+G(u.$t("settings.import_settings")),1)]),_:1}),F(f,{placement:"bottom",content:u.$t("settings.export_settings_desc")},{default:H(()=>[F(d,{class:"btn",onClick:o},{left:H(()=>[...c[3]||(c[3]=[x("div",{"i-uil:export":""},null,-1)])]),default:H(()=>[He(" "+G(u.$t("settings.export_settings")),1)]),_:1})]),_:1},8,["content"]),F(d,{class:"btn",onClick:a},{left:H(()=>[...c[4]||(c[4]=[x("i",{"i-mingcute:back-line":""},null,-1)])]),default:H(()=>[He(" "+G(u.$t("settings.reset_settings")),1)]),_:1})])]),x("section",null,[x("h3",wX,G(u.$t("settings.contributors")),1),c[5]||(c[5]=x("a",{href:"https://github.com/hakadao/BewlyBewly/graphs/contributors",target:"_blank"},[x("img",{src:"https://contrib.rocks/image?repo=hakadao/BewlyBewly","w-full":""})],-1))])])])])}}}),[["__scopeId","data-v-d5a0a631"]])},Symbol.toStringTag,{value:"Module"}));var b2={exports:{}},Uw;function SX(){return Uw||(Uw=1,(function(t,e){(function(n,s){t.exports=s()})(self,function(){return(function(){var i={"./node_modules/es6-promise/dist/es6-promise.js":(function(o,a,l){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(u,c){o.exports=c()})(this,(function(){function u(N){var J=typeof N;return N!==null&&(J==="object"||J==="function")}function c(N){return typeof N=="function"}var d=void 0;Array.isArray?d=Array.isArray:d=function(N){return Object.prototype.toString.call(N)==="[object Array]"};var f=d,h=0,p=void 0,m=void 0,g=function(J,fe){O[h]=J,O[h+1]=fe,h+=2,h===2&&(m?m(M):$())};function v(N){m=N}function b(N){g=N}var _=typeof window<"u"?window:void 0,y=_||{},E=y.MutationObserver||y.WebKitMutationObserver,S=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",A=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function C(){return function(){return process.nextTick(M)}}function T(){return typeof p<"u"?function(){p(M)}:R()}function I(){var N=0,J=new E(M),fe=document.createTextNode("");return J.observe(fe,{characterData:!0}),function(){fe.data=N=++N%2}}function D(){var N=new MessageChannel;return N.port1.onmessage=M,function(){return N.port2.postMessage(0)}}function R(){var N=setTimeout;return function(){return N(M,1)}}var O=new Array(1e3);function M(){for(var N=0;N<h;N+=2){var J=O[N],fe=O[N+1];J(fe),O[N]=void 0,O[N+1]=void 0}h=0}function U(){try{var N=Function("return this")().require("vertx");return p=N.runOnLoop||N.runOnContext,T()}catch{return R()}}var $=void 0;S?$=C():E?$=I():A?$=D():_===void 0?$=U():$=R();function B(N,J){var fe=this,Ee=new this.constructor(re);Ee[te]===void 0&&oe(Ee);var Ae=fe._state;if(Ae){var De=arguments[Ae-1];g(function(){return ue(Ae,Ee,De,fe._result)})}else ae(fe,Ee,N,J);return Ee}function W(N){var J=this;if(N&&typeof N=="object"&&N.constructor===J)return N;var fe=new J(re);return Ke(fe,N),fe}var te=Math.random().toString(36).substring(2);function re(){}var q=void 0,le=1,be=2;function se(){return new TypeError("You cannot resolve a promise with itself")}function ne(){return new TypeError("A promises callback cannot return that same promise.")}function pe(N,J,fe,Ee){try{N.call(J,fe,Ee)}catch(Ae){return Ae}}function ye(N,J,fe){g(function(Ee){var Ae=!1,De=pe(fe,J,function(Ve){Ae||(Ae=!0,J!==Ve?Ke(Ee,Ve):Re(Ee,Ve))},function(Ve){Ae||(Ae=!0,Z(Ee,Ve))},"Settle: "+(Ee._label||" unknown promise"));!Ae&&De&&(Ae=!0,Z(Ee,De))},N)}function xe(N,J){J._state===le?Re(N,J._result):J._state===be?Z(N,J._result):ae(J,void 0,function(fe){return Ke(N,fe)},function(fe){return Z(N,fe)})}function Be(N,J,fe){J.constructor===N.constructor&&fe===B&&J.constructor.resolve===W?xe(N,J):fe===void 0?Re(N,J):c(fe)?ye(N,J,fe):Re(N,J)}function Ke(N,J){if(N===J)Z(N,se());else if(u(J)){var fe=void 0;try{fe=J.then}catch(Ee){Z(N,Ee);return}Be(N,J,fe)}else Re(N,J)}function Xe(N){N._onerror&&N._onerror(N._result),ie(N)}function Re(N,J){N._state===q&&(N._result=J,N._state=le,N._subscribers.length!==0&&g(ie,N))}function Z(N,J){N._state===q&&(N._state=be,N._result=J,g(Xe,N))}function ae(N,J,fe,Ee){var Ae=N._subscribers,De=Ae.length;N._onerror=null,Ae[De]=J,Ae[De+le]=fe,Ae[De+be]=Ee,De===0&&N._state&&g(ie,N)}function ie(N){var J=N._subscribers,fe=N._state;if(J.length!==0){for(var Ee=void 0,Ae=void 0,De=N._result,Ve=0;Ve<J.length;Ve+=3)Ee=J[Ve],Ae=J[Ve+fe],Ee?ue(fe,Ee,Ae,De):Ae(De);N._subscribers.length=0}}function ue(N,J,fe,Ee){var Ae=c(fe),De=void 0,Ve=void 0,tt=!0;if(Ae){try{De=fe(Ee)}catch(Fe){tt=!1,Ve=Fe}if(J===De){Z(J,ne());return}}else De=Ee;J._state!==q||(Ae&&tt?Ke(J,De):tt===!1?Z(J,Ve):N===le?Re(J,De):N===be&&Z(J,De))}function ve(N,J){try{J(function(Ee){Ke(N,Ee)},function(Ee){Z(N,Ee)})}catch(fe){Z(N,fe)}}var j=0;function K(){return j++}function oe(N){N[te]=j++,N._state=void 0,N._result=void 0,N._subscribers=[]}function he(){return new Error("Array Methods must be provided an Array")}var ce=(function(){function N(J,fe){this._instanceConstructor=J,this.promise=new J(re),this.promise[te]||oe(this.promise),f(fe)?(this.length=fe.length,this._remaining=fe.length,this._result=new Array(this.length),this.length===0?Re(this.promise,this._result):(this.length=this.length||0,this._enumerate(fe),this._remaining===0&&Re(this.promise,this._result))):Z(this.promise,he())}return N.prototype._enumerate=function(fe){for(var Ee=0;this._state===q&&Ee<fe.length;Ee++)this._eachEntry(fe[Ee],Ee)},N.prototype._eachEntry=function(fe,Ee){var Ae=this._instanceConstructor,De=Ae.resolve;if(De===W){var Ve=void 0,tt=void 0,Fe=!1;try{Ve=fe.then}catch(et){Fe=!0,tt=et}if(Ve===B&&fe._state!==q)this._settledAt(fe._state,Ee,fe._result);else if(typeof Ve!="function")this._remaining--,this._result[Ee]=fe;else if(Ae===ke){var je=new Ae(re);Fe?Z(je,tt):Be(je,fe,Ve),this._willSettleAt(je,Ee)}else this._willSettleAt(new Ae(function(et){return et(fe)}),Ee)}else this._willSettleAt(De(fe),Ee)},N.prototype._settledAt=function(fe,Ee,Ae){var De=this.promise;De._state===q&&(this._remaining--,fe===be?Z(De,Ae):this._result[Ee]=Ae),this._remaining===0&&Re(De,this._result)},N.prototype._willSettleAt=function(fe,Ee){var Ae=this;ae(fe,void 0,function(De){return Ae._settledAt(le,Ee,De)},function(De){return Ae._settledAt(be,Ee,De)})},N})();function me(N){return new ce(this,N).promise}function Q(N){var J=this;return f(N)?new J(function(fe,Ee){for(var Ae=N.length,De=0;De<Ae;De++)J.resolve(N[De]).then(fe,Ee)}):new J(function(fe,Ee){return Ee(new TypeError("You must pass an array to race."))})}function Y(N){var J=this,fe=new J(re);return Z(fe,N),fe}function ee(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function we(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ke=(function(){function N(J){this[te]=K(),this._result=this._state=void 0,this._subscribers=[],re!==J&&(typeof J!="function"&&ee(),this instanceof N?ve(this,J):we())}return N.prototype.catch=function(fe){return this.then(null,fe)},N.prototype.finally=function(fe){var Ee=this,Ae=Ee.constructor;return c(fe)?Ee.then(function(De){return Ae.resolve(fe()).then(function(){return De})},function(De){return Ae.resolve(fe()).then(function(){throw De})}):Ee.then(fe,fe)},N})();ke.prototype.then=B,ke.all=me,ke.race=Q,ke.resolve=W,ke.reject=Y,ke._setScheduler=v,ke._setAsap=b,ke._asap=g;function de(){var N=void 0;if(typeof l.g<"u")N=l.g;else if(typeof self<"u")N=self;else try{N=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var J=N.Promise;if(J){var fe=null;try{fe=Object.prototype.toString.call(J.resolve())}catch{}if(fe==="[object Promise]"&&!J.cast)return}N.Promise=ke}return ke.polyfill=de,ke.Promise=ke,ke}))}),"./node_modules/events/events.js":(function(o){var a=typeof Reflect=="object"?Reflect:null,l=a&&typeof a.apply=="function"?a.apply:function(R,O,M){return Function.prototype.apply.call(R,O,M)},u;a&&typeof a.ownKeys=="function"?u=a.ownKeys:Object.getOwnPropertySymbols?u=function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:u=function(R){return Object.getOwnPropertyNames(R)};function c(D){console&&console.warn&&console.warn(D)}var d=Number.isNaN||function(R){return R!==R};function f(){f.init.call(this)}o.exports=f,o.exports.once=C,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var h=10;function p(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(D){if(typeof D!="number"||D<0||d(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");h=D}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(R){if(typeof R!="number"||R<0||d(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this};function m(D){return D._maxListeners===void 0?f.defaultMaxListeners:D._maxListeners}f.prototype.getMaxListeners=function(){return m(this)},f.prototype.emit=function(R){for(var O=[],M=1;M<arguments.length;M++)O.push(arguments[M]);var U=R==="error",$=this._events;if($!==void 0)U=U&&$.error===void 0;else if(!U)return!1;if(U){var B;if(O.length>0&&(B=O[0]),B instanceof Error)throw B;var W=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw W.context=B,W}var te=$[R];if(te===void 0)return!1;if(typeof te=="function")l(te,this,O);else for(var re=te.length,q=E(te,re),M=0;M<re;++M)l(q[M],this,O);return!0};function g(D,R,O,M){var U,$,B;if(p(O),$=D._events,$===void 0?($=D._events=Object.create(null),D._eventsCount=0):($.newListener!==void 0&&(D.emit("newListener",R,O.listener?O.listener:O),$=D._events),B=$[R]),B===void 0)B=$[R]=O,++D._eventsCount;else if(typeof B=="function"?B=$[R]=M?[O,B]:[B,O]:M?B.unshift(O):B.push(O),U=m(D),U>0&&B.length>U&&!B.warned){B.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=D,W.type=R,W.count=B.length,c(W)}return D}f.prototype.addListener=function(R,O){return g(this,R,O,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(R,O){return g(this,R,O,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(D,R,O){var M={fired:!1,wrapFn:void 0,target:D,type:R,listener:O},U=v.bind(M);return U.listener=O,M.wrapFn=U,U}f.prototype.once=function(R,O){return p(O),this.on(R,b(this,R,O)),this},f.prototype.prependOnceListener=function(R,O){return p(O),this.prependListener(R,b(this,R,O)),this},f.prototype.removeListener=function(R,O){var M,U,$,B,W;if(p(O),U=this._events,U===void 0)return this;if(M=U[R],M===void 0)return this;if(M===O||M.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete U[R],U.removeListener&&this.emit("removeListener",R,M.listener||O));else if(typeof M!="function"){for($=-1,B=M.length-1;B>=0;B--)if(M[B]===O||M[B].listener===O){W=M[B].listener,$=B;break}if($<0)return this;$===0?M.shift():S(M,$),M.length===1&&(U[R]=M[0]),U.removeListener!==void 0&&this.emit("removeListener",R,W||O)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(R){var O,M,U;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[R]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[R]),this;if(arguments.length===0){var $=Object.keys(M),B;for(U=0;U<$.length;++U)B=$[U],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=M[R],typeof O=="function")this.removeListener(R,O);else if(O!==void 0)for(U=O.length-1;U>=0;U--)this.removeListener(R,O[U]);return this};function _(D,R,O){var M=D._events;if(M===void 0)return[];var U=M[R];return U===void 0?[]:typeof U=="function"?O?[U.listener||U]:[U]:O?A(U):E(U,U.length)}f.prototype.listeners=function(R){return _(this,R,!0)},f.prototype.rawListeners=function(R){return _(this,R,!1)},f.listenerCount=function(D,R){return typeof D.listenerCount=="function"?D.listenerCount(R):y.call(D,R)},f.prototype.listenerCount=y;function y(D){var R=this._events;if(R!==void 0){var O=R[D];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function E(D,R){for(var O=new Array(R),M=0;M<R;++M)O[M]=D[M];return O}function S(D,R){for(;R+1<D.length;R++)D[R]=D[R+1];D.pop()}function A(D){for(var R=new Array(D.length),O=0;O<R.length;++O)R[O]=D[O].listener||D[O];return R}function C(D,R){return new Promise(function(O,M){function U(B){D.removeListener(R,$),M(B)}function $(){typeof D.removeListener=="function"&&D.removeListener("error",U),O([].slice.call(arguments))}I(D,R,$,{once:!0}),R!=="error"&&T(D,U,{once:!0})})}function T(D,R,O){typeof D.on=="function"&&I(D,"error",R,O)}function I(D,R,O,M){if(typeof D.on=="function")M.once?D.once(R,O):D.on(R,O);else if(typeof D.addEventListener=="function")D.addEventListener(R,function U($){M.once&&D.removeEventListener(R,U),O($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D)}}),"./node_modules/webworkify-webpack/index.js":(function(o,a,l){function u(v){var b={};function _(E){if(b[E])return b[E].exports;var S=b[E]={i:E,l:!1,exports:{}};return v[E].call(S.exports,S,S.exports,_),S.l=!0,S.exports}_.m=v,_.c=b,_.i=function(E){return E},_.d=function(E,S,A){_.o(E,S)||Object.defineProperty(E,S,{configurable:!1,enumerable:!0,get:A})},_.r=function(E){Object.defineProperty(E,"__esModule",{value:!0})},_.n=function(E){var S=E&&E.__esModule?function(){return E.default}:function(){return E};return _.d(S,"a",S),S},_.o=function(E,S){return Object.prototype.hasOwnProperty.call(E,S)},_.p="/",_.oe=function(E){throw console.error(E),E};var y=_(_.s=ENTRY_MODULE);return y.default||y}var c="[\\.|\\-|\\+|\\w|/|@]+",d="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+c+").*?\\)";function f(v){return(v+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(v){return!isNaN(1*v)}function p(v,b,_){var y={};y[_]=[];var E=b.toString(),S=E.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!S)return y;for(var A=S[1],C=new RegExp("(\\\\n|\\W)"+f(A)+d,"g"),T;T=C.exec(E);)T[3]!=="dll-reference"&&y[_].push(T[3]);for(C=new RegExp("\\("+f(A)+'\\("(dll-reference\\s('+c+'))"\\)\\)'+d,"g");T=C.exec(E);)v[T[2]]||(y[_].push(T[1]),v[T[2]]=l(T[1]).m),y[T[2]]=y[T[2]]||[],y[T[2]].push(T[4]);for(var I=Object.keys(y),D=0;D<I.length;D++)for(var R=0;R<y[I[D]].length;R++)h(y[I[D]][R])&&(y[I[D]][R]=1*y[I[D]][R]);return y}function m(v){var b=Object.keys(v);return b.reduce(function(_,y){return _||v[y].length>0},!1)}function g(v,b){for(var _={main:[b]},y={main:[]},E={main:{}};m(_);)for(var S=Object.keys(_),A=0;A<S.length;A++){var C=S[A],T=_[C],I=T.pop();if(E[C]=E[C]||{},!(E[C][I]||!v[C][I])){E[C][I]=!0,y[C]=y[C]||[],y[C].push(I);for(var D=p(v,v[C][I],C),R=Object.keys(D),O=0;O<R.length;O++)_[R[O]]=_[R[O]]||[],_[R[O]]=_[R[O]].concat(D[R[O]])}}return y}o.exports=function(v,b){b=b||{};var _={main:l.m},y=b.all?{main:Object.keys(_.main)}:g(_,v),E="";Object.keys(y).filter(function(I){return I!=="main"}).forEach(function(I){for(var D=0;y[I][D];)D++;y[I].push(D),_[I][D]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",E=E+"var "+I+" = ("+u.toString().replace("ENTRY_MODULE",JSON.stringify(D))+")({"+y[I].map(function(R){return""+JSON.stringify(R)+": "+_[I][R].toString()}).join(",")+`});
`}),E=E+"new (("+u.toString().replace("ENTRY_MODULE",JSON.stringify(v))+")({"+y.main.map(function(I){return""+JSON.stringify(I)+": "+_.main[I].toString()}).join(",")+"}))(self);";var S=new window.Blob([E],{type:"text/javascript"});if(b.bare)return S;var A=window.URL||window.webkitURL||window.mozURL||window.msURL,C=A.createObjectURL(S),T=new window.Worker(C);return T.objectURL=C,T}}),"./src/config.js":(function(o,a,l){l.r(a),l.d(a,{defaultConfig:function(){return u},createDefaultConfig:function(){return c}});var u={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0};function c(){return Object.assign({},u)}}),"./src/core/features.js":(function(o,a,l){l.r(a);var u=l("./src/io/io-controller.js"),c=l("./src/config.js"),d=(function(){function f(){}return f.supportMSEH264Playback=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},f.supportNetworkStreamIO=function(){var h=new u.default({},(0,c.createDefaultConfig)()),p=h.loaderType;return h.destroy(),p=="fetch-stream-loader"||p=="xhr-moz-chunked-loader"},f.getNetworkLoaderTypeName=function(){var h=new u.default({},(0,c.createDefaultConfig)()),p=h.loaderType;return h.destroy(),p},f.supportNativeMediaPlayback=function(h){f.videoElement==null&&(f.videoElement=window.document.createElement("video"));var p=f.videoElement.canPlayType(h);return p==="probably"||p=="maybe"},f.getFeatureList=function(){var h={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return h.mseFlvPlayback=f.supportMSEH264Playback(),h.networkStreamIO=f.supportNetworkStreamIO(),h.networkLoaderName=f.getNetworkLoaderTypeName(),h.mseLiveFlvPlayback=h.mseFlvPlayback&&h.networkStreamIO,h.nativeMP4H264Playback=f.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),h.nativeWebmVP8Playback=f.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),h.nativeWebmVP9Playback=f.supportNativeMediaPlayback('video/webm; codecs="vp9"'),h},f})();a.default=d}),"./src/core/media-info.js":(function(o,a,l){l.r(a);var u=(function(){function c(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return c.prototype.isComplete=function(){var d=this.hasAudio===!1||this.hasAudio===!0&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,f=this.hasVideo===!1||this.hasVideo===!0&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&this.duration!=null&&this.metadata!=null&&this.hasKeyframesIndex!=null&&d&&f},c.prototype.isSeekable=function(){return this.hasKeyframesIndex===!0},c.prototype.getNearestKeyframe=function(d){if(this.keyframesIndex==null)return null;var f=this.keyframesIndex,h=this._search(f.times,d);return{index:h,milliseconds:f.times[h],fileposition:f.filepositions[h]}},c.prototype._search=function(d,f){var h=0,p=d.length-1,m=0,g=0,v=p;for(f<d[0]&&(h=0,g=v+1);g<=v;)if(m=g+Math.floor((v-g)/2),m===p||f>=d[m]&&f<d[m+1]){h=m;break}else d[m]<f?g=m+1:v=m-1;return h},c})();a.default=u}),"./src/core/media-segment-info.js":(function(o,a,l){l.r(a),l.d(a,{SampleInfo:function(){return u},MediaSegmentInfo:function(){return c},IDRSampleList:function(){return d},MediaSegmentInfoList:function(){return f}});var u=(function(){function h(p,m,g,v,b){this.dts=p,this.pts=m,this.duration=g,this.originalDts=v,this.isSyncPoint=b,this.fileposition=null}return h})(),c=(function(){function h(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return h.prototype.appendSyncPoint=function(p){p.isSyncPoint=!0,this.syncPoints.push(p)},h})(),d=(function(){function h(){this._list=[]}return h.prototype.clear=function(){this._list=[]},h.prototype.appendArray=function(p){var m=this._list;p.length!==0&&(m.length>0&&p[0].originalDts<m[m.length-1].originalDts&&this.clear(),Array.prototype.push.apply(m,p))},h.prototype.getLastSyncPointBeforeDts=function(p){if(this._list.length==0)return null;var m=this._list,g=0,v=m.length-1,b=0,_=0,y=v;for(p<m[0].dts&&(g=0,_=y+1);_<=y;)if(b=_+Math.floor((y-_)/2),b===v||p>=m[b].dts&&p<m[b+1].dts){g=b;break}else m[b].dts<p?_=b+1:y=b-1;return this._list[g]},h})(),f=(function(){function h(p){this._type=p,this._list=[],this._lastAppendLocation=-1}return Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),h.prototype.isEmpty=function(){return this._list.length===0},h.prototype.clear=function(){this._list=[],this._lastAppendLocation=-1},h.prototype._searchNearestSegmentBefore=function(p){var m=this._list;if(m.length===0)return-2;var g=m.length-1,v=0,b=0,_=g,y=0;if(p<m[0].originalBeginDts)return y=-1,y;for(;b<=_;)if(v=b+Math.floor((_-b)/2),v===g||p>m[v].lastSample.originalDts&&p<m[v+1].originalBeginDts){y=v;break}else m[v].originalBeginDts<p?b=v+1:_=v-1;return y},h.prototype._searchNearestSegmentAfter=function(p){return this._searchNearestSegmentBefore(p)+1},h.prototype.append=function(p){var m=this._list,g=p,v=this._lastAppendLocation,b=0;v!==-1&&v<m.length&&g.originalBeginDts>=m[v].lastSample.originalDts&&(v===m.length-1||v<m.length-1&&g.originalBeginDts<m[v+1].originalBeginDts)?b=v+1:m.length>0&&(b=this._searchNearestSegmentBefore(g.originalBeginDts)+1),this._lastAppendLocation=b,this._list.splice(b,0,g)},h.prototype.getLastSegmentBefore=function(p){var m=this._searchNearestSegmentBefore(p);return m>=0?this._list[m]:null},h.prototype.getLastSampleBefore=function(p){var m=this.getLastSegmentBefore(p);return m!=null?m.lastSample:null},h.prototype.getLastSyncPointBefore=function(p){for(var m=this._searchNearestSegmentBefore(p),g=this._list[m].syncPoints;g.length===0&&m>0;)m--,g=this._list[m].syncPoints;return g.length>0?g[g.length-1]:null},h})()}),"./src/core/mse-controller.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=l("./src/utils/logger.js"),f=l("./src/utils/browser.js"),h=l("./src/core/mse-events.js"),p=l("./src/core/media-segment-info.js"),m=l("./src/utils/exception.js"),g=(function(){function v(b){this.TAG="MSEController",this._config=b,this._emitter=new(c()),this._config.isLive&&this._config.autoCleanupSourceBuffer==null&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new p.IDRSampleList}return v.prototype.destroy=function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null},v.prototype.on=function(b,_){this._emitter.addListener(b,_)},v.prototype.off=function(b,_){this._emitter.removeListener(b,_)},v.prototype.attachMediaElement=function(b){if(this._mediaSource)throw new m.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var _=this._mediaSource=new window.MediaSource;_.addEventListener("sourceopen",this.e.onSourceOpen),_.addEventListener("sourceended",this.e.onSourceEnded),_.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=b,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),b.src=this._mediaSourceObjectURL},v.prototype.detachMediaElement=function(){if(this._mediaSource){var b=this._mediaSource;for(var _ in this._sourceBuffers){var y=this._pendingSegments[_];y.splice(0,y.length),this._pendingSegments[_]=null,this._pendingRemoveRanges[_]=null,this._lastInitSegments[_]=null;var E=this._sourceBuffers[_];if(E){if(b.readyState!=="closed"){try{b.removeSourceBuffer(E)}catch(S){d.default.e(this.TAG,S.message)}E.removeEventListener("error",this.e.onSourceBufferError),E.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[_]=null,this._sourceBuffers[_]=null}}if(b.readyState==="open")try{b.endOfStream()}catch(S){d.default.e(this.TAG,S.message)}b.removeEventListener("sourceopen",this.e.onSourceOpen),b.removeEventListener("sourceended",this.e.onSourceEnded),b.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)},v.prototype.appendInitSegment=function(b,_){if(!this._mediaSource||this._mediaSource.readyState!=="open"){this._pendingSourceBufferInit.push(b),this._pendingSegments[b.type].push(b);return}var y=b,E=""+y.container;y.codec&&y.codec.length>0&&(E+=";codecs="+y.codec);var S=!1;if(d.default.v(this.TAG,"Received Initialization Segment, mimeType: "+E),this._lastInitSegments[y.type]=y,E!==this._mimeTypes[y.type]){if(this._mimeTypes[y.type])d.default.v(this.TAG,"Notice: "+y.type+" mimeType changed, origin: "+this._mimeTypes[y.type]+", target: "+E);else{S=!0;try{var A=this._sourceBuffers[y.type]=this._mediaSource.addSourceBuffer(E);A.addEventListener("error",this.e.onSourceBufferError),A.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(C){d.default.e(this.TAG,C.message),this._emitter.emit(h.default.ERROR,{code:C.code,msg:C.message});return}}this._mimeTypes[y.type]=E}_||this._pendingSegments[y.type].push(y),S||this._sourceBuffers[y.type]&&!this._sourceBuffers[y.type].updating&&this._doAppendSegments(),f.default.safari&&y.container==="audio/mpeg"&&y.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=y.mediaDuration/1e3,this._updateMediaSourceDuration())},v.prototype.appendMediaSegment=function(b){var _=b;this._pendingSegments[_.type].push(_),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var y=this._sourceBuffers[_.type];y&&!y.updating&&!this._hasPendingRemoveRanges()&&this._doAppendSegments()},v.prototype.seek=function(b){for(var _ in this._sourceBuffers)if(this._sourceBuffers[_]){var y=this._sourceBuffers[_];if(this._mediaSource.readyState==="open")try{y.abort()}catch(I){d.default.e(this.TAG,I.message)}this._idrList.clear();var E=this._pendingSegments[_];if(E.splice(0,E.length),this._mediaSource.readyState!=="closed"){for(var S=0;S<y.buffered.length;S++){var A=y.buffered.start(S),C=y.buffered.end(S);this._pendingRemoveRanges[_].push({start:A,end:C})}if(y.updating||this._doRemoveRanges(),f.default.safari){var T=this._lastInitSegments[_];T&&(this._pendingSegments[_].push(T),y.updating||this._doAppendSegments())}}}},v.prototype.endOfStream=function(){var b=this._mediaSource,_=this._sourceBuffers;if(!b||b.readyState!=="open"){b&&b.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0);return}_.video&&_.video.updating||_.audio&&_.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,b.endOfStream())},v.prototype.getNearestKeyframe=function(b){return this._idrList.getLastSyncPointBeforeDts(b)},v.prototype._needCleanupSourceBuffer=function(){if(!this._config.autoCleanupSourceBuffer)return!1;var b=this._mediaElement.currentTime;for(var _ in this._sourceBuffers){var y=this._sourceBuffers[_];if(y){var E=y.buffered;if(E.length>=1&&b-E.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1},v.prototype._doCleanupSourceBuffer=function(){var b=this._mediaElement.currentTime;for(var _ in this._sourceBuffers){var y=this._sourceBuffers[_];if(y){for(var E=y.buffered,S=!1,A=0;A<E.length;A++){var C=E.start(A),T=E.end(A);if(C<=b&&b<T+3){if(b-C>=this._config.autoCleanupMaxBackwardDuration){S=!0;var I=b-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[_].push({start:C,end:I})}}else T<b&&(S=!0,this._pendingRemoveRanges[_].push({start:C,end:T}))}S&&!y.updating&&this._doRemoveRanges()}}},v.prototype._updateMediaSourceDuration=function(){var b=this._sourceBuffers;if(!(this._mediaElement.readyState===0||this._mediaSource.readyState!=="open")&&!(b.video&&b.video.updating||b.audio&&b.audio.updating)){var _=this._mediaSource.duration,y=this._pendingMediaDuration;y>0&&(isNaN(_)||y>_)&&(d.default.v(this.TAG,"Update MediaSource duration from "+_+" to "+y),this._mediaSource.duration=y),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}},v.prototype._doRemoveRanges=function(){for(var b in this._pendingRemoveRanges)if(!(!this._sourceBuffers[b]||this._sourceBuffers[b].updating))for(var _=this._sourceBuffers[b],y=this._pendingRemoveRanges[b];y.length&&!_.updating;){var E=y.shift();_.remove(E.start,E.end)}},v.prototype._doAppendSegments=function(){var b=this._pendingSegments;for(var _ in b)if(!(!this._sourceBuffers[_]||this._sourceBuffers[_].updating)&&b[_].length>0){var y=b[_].shift();if(y.timestampOffset){var E=this._sourceBuffers[_].timestampOffset,S=y.timestampOffset/1e3,A=Math.abs(E-S);A>.1&&(d.default.v(this.TAG,"Update MPEG audio timestampOffset from "+E+" to "+S),this._sourceBuffers[_].timestampOffset=S),delete y.timestampOffset}if(!y.data||y.data.byteLength===0)continue;try{this._sourceBuffers[_].appendBuffer(y.data),this._isBufferFull=!1,_==="video"&&y.hasOwnProperty("info")&&this._idrList.appendArray(y.info.syncPoints)}catch(C){this._pendingSegments[_].unshift(y),C.code===22?(this._isBufferFull||this._emitter.emit(h.default.BUFFER_FULL),this._isBufferFull=!0):(d.default.e(this.TAG,C.message),this._emitter.emit(h.default.ERROR,{code:C.code,msg:C.message}))}}},v.prototype._onSourceOpen=function(){if(d.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var b=this._pendingSourceBufferInit;b.length;){var _=b.shift();this.appendInitSegment(_,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(h.default.SOURCE_OPEN)},v.prototype._onSourceEnded=function(){d.default.v(this.TAG,"MediaSource onSourceEnded")},v.prototype._onSourceClose=function(){d.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))},v.prototype._hasPendingSegments=function(){var b=this._pendingSegments;return b.video.length>0||b.audio.length>0},v.prototype._hasPendingRemoveRanges=function(){var b=this._pendingRemoveRanges;return b.video.length>0||b.audio.length>0},v.prototype._onSourceBufferUpdateEnd=function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(h.default.UPDATE_END)},v.prototype._onSourceBufferError=function(b){d.default.e(this.TAG,"SourceBuffer Error: "+b)},v})();a.default=g}),"./src/core/mse-events.js":(function(o,a,l){l.r(a);var u={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};a.default=u}),"./src/core/transmuxer.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=l("./node_modules/webworkify-webpack/index.js"),f=l.n(d),h=l("./src/utils/logger.js"),p=l("./src/utils/logging-control.js"),m=l("./src/core/transmuxing-controller.js"),g=l("./src/core/transmuxing-events.js"),v=l("./src/core/media-info.js"),b=(function(){function _(y,E){if(this.TAG="Transmuxer",this._emitter=new(c()),E.enableWorker&&typeof Worker<"u")try{this._worker=f()("./src/core/transmuxing-worker.js"),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[y,E]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},p.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:p.default.getConfig()})}catch{h.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new m.default(y,E)}else this._controller=new m.default(y,E);if(this._controller){var S=this._controller;S.on(g.default.IO_ERROR,this._onIOError.bind(this)),S.on(g.default.DEMUX_ERROR,this._onDemuxError.bind(this)),S.on(g.default.INIT_SEGMENT,this._onInitSegment.bind(this)),S.on(g.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),S.on(g.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),S.on(g.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),S.on(g.default.MEDIA_INFO,this._onMediaInfo.bind(this)),S.on(g.default.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),S.on(g.default.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),S.on(g.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),S.on(g.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return _.prototype.destroy=function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),p.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null},_.prototype.on=function(y,E){this._emitter.addListener(y,E)},_.prototype.off=function(y,E){this._emitter.removeListener(y,E)},_.prototype.hasWorker=function(){return this._worker!=null},_.prototype.open=function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()},_.prototype.close=function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()},_.prototype.seek=function(y){this._worker?this._worker.postMessage({cmd:"seek",param:y}):this._controller.seek(y)},_.prototype.pause=function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()},_.prototype.resume=function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()},_.prototype._onInitSegment=function(y,E){var S=this;Promise.resolve().then(function(){S._emitter.emit(g.default.INIT_SEGMENT,y,E)})},_.prototype._onMediaSegment=function(y,E){var S=this;Promise.resolve().then(function(){S._emitter.emit(g.default.MEDIA_SEGMENT,y,E)})},_.prototype._onLoadingComplete=function(){var y=this;Promise.resolve().then(function(){y._emitter.emit(g.default.LOADING_COMPLETE)})},_.prototype._onRecoveredEarlyEof=function(){var y=this;Promise.resolve().then(function(){y._emitter.emit(g.default.RECOVERED_EARLY_EOF)})},_.prototype._onMediaInfo=function(y){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.default.MEDIA_INFO,y)})},_.prototype._onMetaDataArrived=function(y){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.default.METADATA_ARRIVED,y)})},_.prototype._onScriptDataArrived=function(y){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.default.SCRIPTDATA_ARRIVED,y)})},_.prototype._onStatisticsInfo=function(y){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.default.STATISTICS_INFO,y)})},_.prototype._onIOError=function(y,E){var S=this;Promise.resolve().then(function(){S._emitter.emit(g.default.IO_ERROR,y,E)})},_.prototype._onDemuxError=function(y,E){var S=this;Promise.resolve().then(function(){S._emitter.emit(g.default.DEMUX_ERROR,y,E)})},_.prototype._onRecommendSeekpoint=function(y){var E=this;Promise.resolve().then(function(){E._emitter.emit(g.default.RECOMMEND_SEEKPOINT,y)})},_.prototype._onLoggingConfigChanged=function(y){this._worker&&this._worker.postMessage({cmd:"logging_config",param:y})},_.prototype._onWorkerMessage=function(y){var E=y.data,S=E.data;if(E.msg==="destroyed"||this._workerDestroying){this._workerDestroying=!1,this._worker.terminate(),this._worker=null;return}switch(E.msg){case g.default.INIT_SEGMENT:case g.default.MEDIA_SEGMENT:this._emitter.emit(E.msg,S.type,S.data);break;case g.default.LOADING_COMPLETE:case g.default.RECOVERED_EARLY_EOF:this._emitter.emit(E.msg);break;case g.default.MEDIA_INFO:Object.setPrototypeOf(S,v.default.prototype),this._emitter.emit(E.msg,S);break;case g.default.METADATA_ARRIVED:case g.default.SCRIPTDATA_ARRIVED:case g.default.STATISTICS_INFO:this._emitter.emit(E.msg,S);break;case g.default.IO_ERROR:case g.default.DEMUX_ERROR:this._emitter.emit(E.msg,S.type,S.info);break;case g.default.RECOMMEND_SEEKPOINT:this._emitter.emit(E.msg,S);break;case"logcat_callback":h.default.emitter.emit("log",S.type,S.logcat);break}},_})();a.default=b}),"./src/core/transmuxing-controller.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=l("./src/utils/logger.js"),f=l("./src/utils/browser.js"),h=l("./src/core/media-info.js"),p=l("./src/demux/flv-demuxer.js"),m=l("./src/remux/mp4-remuxer.js"),g=l("./src/demux/demux-errors.js"),v=l("./src/io/io-controller.js"),b=l("./src/core/transmuxing-events.js"),_=(function(){function y(E,S){this.TAG="TransmuxingController",this._emitter=new(c()),this._config=S,E.segments||(E.segments=[{duration:E.duration,filesize:E.filesize,url:E.url}]),typeof E.cors!="boolean"&&(E.cors=!0),typeof E.withCredentials!="boolean"&&(E.withCredentials=!1),this._mediaDataSource=E,this._currentSegmentIndex=0;var A=0;this._mediaDataSource.segments.forEach(function(C){C.timestampBase=A,A+=C.duration,C.cors=E.cors,C.withCredentials=E.withCredentials,S.referrerPolicy&&(C.referrerPolicy=S.referrerPolicy)}),!isNaN(A)&&this._mediaDataSource.duration!==A&&(this._mediaDataSource.duration=A),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return y.prototype.destroy=function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null},y.prototype.on=function(E,S){this._emitter.addListener(E,S)},y.prototype.off=function(E,S){this._emitter.removeListener(E,S)},y.prototype.start=function(){this._loadSegment(0),this._enableStatisticsReporter()},y.prototype._loadSegment=function(E,S){this._currentSegmentIndex=E;var A=this._mediaDataSource.segments[E],C=this._ioctl=new v.default(A,this._config,E);C.onError=this._onIOException.bind(this),C.onSeeked=this._onIOSeeked.bind(this),C.onComplete=this._onIOComplete.bind(this),C.onRedirect=this._onIORedirect.bind(this),C.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),S?this._demuxer.bindDataSource(this._ioctl):C.onDataArrival=this._onInitChunkArrival.bind(this),C.open(S)},y.prototype.stop=function(){this._internalAbort(),this._disableStatisticsReporter()},y.prototype._internalAbort=function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)},y.prototype.pause=function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())},y.prototype.resume=function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())},y.prototype.seek=function(E){if(!(this._mediaInfo==null||!this._mediaInfo.isSeekable())){var S=this._searchSegmentIndexContains(E);if(S===this._currentSegmentIndex){var A=this._mediaInfo.segments[S];if(A==null)this._pendingSeekTime=E;else{var C=A.getNearestKeyframe(E);this._remuxer.seek(C.milliseconds),this._ioctl.seek(C.fileposition),this._pendingResolveSeekPoint=C.milliseconds}}else{var T=this._mediaInfo.segments[S];if(T==null)this._pendingSeekTime=E,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(S);else{var C=T.getNearestKeyframe(E);this._internalAbort(),this._remuxer.seek(E),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[S].timestampBase,this._loadSegment(S,C.fileposition),this._pendingResolveSeekPoint=C.milliseconds,this._reportSegmentMediaInfo(S)}}this._enableStatisticsReporter()}},y.prototype._searchSegmentIndexContains=function(E){for(var S=this._mediaDataSource.segments,A=S.length-1,C=0;C<S.length;C++)if(E<S[C].timestampBase){A=C-1;break}return A},y.prototype._onInitChunkArrival=function(E,S){var A=this,C=null,T=0;if(S>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,T=this._demuxer.parseChunks(E,S);else if((C=p.default.probe(E)).match){this._demuxer=new p.default(C,this._config),this._remuxer||(this._remuxer=new m.default(this._config));var I=this._mediaDataSource;I.duration!=null&&!isNaN(I.duration)&&(this._demuxer.overridedDuration=I.duration),typeof I.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=I.hasAudio),typeof I.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=I.hasVideo),this._demuxer.timestampBase=I.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),T=this._demuxer.parseChunks(E,S)}else C=null,d.default.e(this.TAG,"Non-FLV, Unsupported media type!"),Promise.resolve().then(function(){A._internalAbort()}),this._emitter.emit(b.default.DEMUX_ERROR,g.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),T=0;return T},y.prototype._onMediaInfo=function(E){var S=this;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},E),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,Object.setPrototypeOf(this._mediaInfo,h.default.prototype));var A=Object.assign({},E);Object.setPrototypeOf(A,h.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=A,this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(function(){var C=S._pendingSeekTime;S._pendingSeekTime=null,S.seek(C)})},y.prototype._onMetaDataArrived=function(E){this._emitter.emit(b.default.METADATA_ARRIVED,E)},y.prototype._onScriptDataArrived=function(E){this._emitter.emit(b.default.SCRIPTDATA_ARRIVED,E)},y.prototype._onIOSeeked=function(){this._remuxer.insertDiscontinuity()},y.prototype._onIOComplete=function(E){var S=E,A=S+1;A<this._mediaDataSource.segments.length?(this._internalAbort(),this._remuxer.flushStashedSamples(),this._loadSegment(A)):(this._remuxer.flushStashedSamples(),this._emitter.emit(b.default.LOADING_COMPLETE),this._disableStatisticsReporter())},y.prototype._onIORedirect=function(E){var S=this._ioctl.extraData;this._mediaDataSource.segments[S].redirectedURL=E},y.prototype._onIORecoveredEarlyEof=function(){this._emitter.emit(b.default.RECOVERED_EARLY_EOF)},y.prototype._onIOException=function(E,S){d.default.e(this.TAG,"IOException: type = "+E+", code = "+S.code+", msg = "+S.msg),this._emitter.emit(b.default.IO_ERROR,E,S),this._disableStatisticsReporter()},y.prototype._onDemuxException=function(E,S){d.default.e(this.TAG,"DemuxException: type = "+E+", info = "+S),this._emitter.emit(b.default.DEMUX_ERROR,E,S)},y.prototype._onRemuxerInitSegmentArrival=function(E,S){this._emitter.emit(b.default.INIT_SEGMENT,E,S)},y.prototype._onRemuxerMediaSegmentArrival=function(E,S){if(this._pendingSeekTime==null&&(this._emitter.emit(b.default.MEDIA_SEGMENT,E,S),this._pendingResolveSeekPoint!=null&&E==="video")){var A=S.info.syncPoints,C=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,f.default.safari&&A.length>0&&A[0].originalDts===C&&(C=A[0].pts),this._emitter.emit(b.default.RECOMMEND_SEEKPOINT,C)}},y.prototype._enableStatisticsReporter=function(){this._statisticsReporter==null&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))},y.prototype._disableStatisticsReporter=function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},y.prototype._reportSegmentMediaInfo=function(E){var S=this._mediaInfo.segments[E],A=Object.assign({},S);A.duration=this._mediaInfo.duration,A.segmentCount=this._mediaInfo.segmentCount,delete A.segments,delete A.keyframesIndex,this._emitter.emit(b.default.MEDIA_INFO,A)},y.prototype._reportStatisticsInfo=function(){var E={};E.url=this._ioctl.currentURL,E.hasRedirect=this._ioctl.hasRedirect,E.hasRedirect&&(E.redirectedURL=this._ioctl.currentRedirectedURL),E.speed=this._ioctl.currentSpeed,E.loaderType=this._ioctl.loaderType,E.currentSegmentIndex=this._currentSegmentIndex,E.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(b.default.STATISTICS_INFO,E)},y})();a.default=_}),"./src/core/transmuxing-events.js":(function(o,a,l){l.r(a);var u={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"};a.default=u}),"./src/core/transmuxing-worker.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logging-control.js"),c=l("./src/utils/polyfill.js"),d=l("./src/core/transmuxing-controller.js"),f=l("./src/core/transmuxing-events.js"),h=function(p){var m=null,g=R.bind(this);c.default.install(),p.addEventListener("message",function(O){switch(O.data.cmd){case"init":m=new d.default(O.data.param[0],O.data.param[1]),m.on(f.default.IO_ERROR,T.bind(this)),m.on(f.default.DEMUX_ERROR,I.bind(this)),m.on(f.default.INIT_SEGMENT,v.bind(this)),m.on(f.default.MEDIA_SEGMENT,b.bind(this)),m.on(f.default.LOADING_COMPLETE,_.bind(this)),m.on(f.default.RECOVERED_EARLY_EOF,y.bind(this)),m.on(f.default.MEDIA_INFO,E.bind(this)),m.on(f.default.METADATA_ARRIVED,S.bind(this)),m.on(f.default.SCRIPTDATA_ARRIVED,A.bind(this)),m.on(f.default.STATISTICS_INFO,C.bind(this)),m.on(f.default.RECOMMEND_SEEKPOINT,D.bind(this));break;case"destroy":m&&(m.destroy(),m=null),p.postMessage({msg:"destroyed"});break;case"start":m.start();break;case"stop":m.stop();break;case"seek":m.seek(O.data.param);break;case"pause":m.pause();break;case"resume":m.resume();break;case"logging_config":{var M=O.data.param;u.default.applyConfig(M),M.enableCallback===!0?u.default.addLogListener(g):u.default.removeLogListener(g);break}}});function v(O,M){var U={msg:f.default.INIT_SEGMENT,data:{type:O,data:M}};p.postMessage(U,[M.data])}function b(O,M){var U={msg:f.default.MEDIA_SEGMENT,data:{type:O,data:M}};p.postMessage(U,[M.data])}function _(){var O={msg:f.default.LOADING_COMPLETE};p.postMessage(O)}function y(){var O={msg:f.default.RECOVERED_EARLY_EOF};p.postMessage(O)}function E(O){var M={msg:f.default.MEDIA_INFO,data:O};p.postMessage(M)}function S(O){var M={msg:f.default.METADATA_ARRIVED,data:O};p.postMessage(M)}function A(O){var M={msg:f.default.SCRIPTDATA_ARRIVED,data:O};p.postMessage(M)}function C(O){var M={msg:f.default.STATISTICS_INFO,data:O};p.postMessage(M)}function T(O,M){p.postMessage({msg:f.default.IO_ERROR,data:{type:O,info:M}})}function I(O,M){p.postMessage({msg:f.default.DEMUX_ERROR,data:{type:O,info:M}})}function D(O){p.postMessage({msg:f.default.RECOMMEND_SEEKPOINT,data:O})}function R(O,M){p.postMessage({msg:"logcat_callback",data:{type:O,logcat:M}})}};a.default=h}),"./src/demux/amf-parser.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logger.js"),c=l("./src/utils/utf8-conv.js"),d=l("./src/utils/exception.js"),f=(function(){var p=new ArrayBuffer(2);return new DataView(p).setInt16(0,256,!0),new Int16Array(p)[0]===256})(),h=(function(){function p(){}return p.parseScriptData=function(m,g,v){var b={};try{var _=p.parseValue(m,g,v),y=p.parseValue(m,g+_.size,v-_.size);b[_.data]=y.data}catch(E){u.default.e("AMF",E.toString())}return b},p.parseObject=function(m,g,v){if(v<3)throw new d.IllegalStateException("Data not enough when parse ScriptDataObject");var b=p.parseString(m,g,v),_=p.parseValue(m,g+b.size,v-b.size),y=_.objectEnd;return{data:{name:b.data,value:_.data},size:b.size+_.size,objectEnd:y}},p.parseVariable=function(m,g,v){return p.parseObject(m,g,v)},p.parseString=function(m,g,v){if(v<2)throw new d.IllegalStateException("Data not enough when parse String");var b=new DataView(m,g,v),_=b.getUint16(0,!f),y;return _>0?y=(0,c.default)(new Uint8Array(m,g+2,_)):y="",{data:y,size:2+_}},p.parseLongString=function(m,g,v){if(v<4)throw new d.IllegalStateException("Data not enough when parse LongString");var b=new DataView(m,g,v),_=b.getUint32(0,!f),y;return _>0?y=(0,c.default)(new Uint8Array(m,g+4,_)):y="",{data:y,size:4+_}},p.parseDate=function(m,g,v){if(v<10)throw new d.IllegalStateException("Data size invalid when parse Date");var b=new DataView(m,g,v),_=b.getFloat64(0,!f),y=b.getInt16(8,!f);return _+=y*60*1e3,{data:new Date(_),size:10}},p.parseValue=function(m,g,v){if(v<1)throw new d.IllegalStateException("Data not enough when parse Value");var b=new DataView(m,g,v),_=1,y=b.getUint8(0),E,S=!1;try{switch(y){case 0:E=b.getFloat64(1,!f),_+=8;break;case 1:{var A=b.getUint8(1);E=!!A,_+=1;break}case 2:{var C=p.parseString(m,g+1,v-1);E=C.data,_+=C.size;break}case 3:{E={};var T=0;for((b.getUint32(v-4,!f)&16777215)===9&&(T=3);_<v-4;){var I=p.parseObject(m,g+_,v-_-T);if(I.objectEnd)break;E[I.data.name]=I.data.value,_+=I.size}if(_<=v-3){var D=b.getUint32(_-1,!f)&16777215;D===9&&(_+=3)}break}case 8:{E={},_+=4;var T=0;for((b.getUint32(v-4,!f)&16777215)===9&&(T=3);_<v-8;){var R=p.parseVariable(m,g+_,v-_-T);if(R.objectEnd)break;E[R.data.name]=R.data.value,_+=R.size}if(_<=v-3){var D=b.getUint32(_-1,!f)&16777215;D===9&&(_+=3)}break}case 9:E=void 0,_=1,S=!0;break;case 10:{E=[];var O=b.getUint32(1,!f);_+=4;for(var M=0;M<O;M++){var U=p.parseValue(m,g+_,v-_);E.push(U.data),_+=U.size}break}case 11:{var $=p.parseDate(m,g+1,v-1);E=$.data,_+=$.size;break}case 12:{var B=p.parseString(m,g+1,v-1);E=B.data,_+=B.size;break}default:_=v,u.default.w("AMF","Unsupported AMF value type "+y)}}catch(W){u.default.e("AMF",W.toString())}return{data:E,size:_,objectEnd:S}},p})();a.default=h}),"./src/demux/demux-errors.js":(function(o,a,l){l.r(a);var u={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"};a.default=u}),"./src/demux/exp-golomb.js":(function(o,a,l){l.r(a);var u=l("./src/utils/exception.js"),c=(function(){function d(f){this.TAG="ExpGolomb",this._buffer=f,this._buffer_index=0,this._total_bytes=f.byteLength,this._total_bits=f.byteLength*8,this._current_word=0,this._current_word_bits_left=0}return d.prototype.destroy=function(){this._buffer=null},d.prototype._fillCurrentWord=function(){var f=this._total_bytes-this._buffer_index;if(f<=0)throw new u.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var h=Math.min(4,f),p=new Uint8Array(4);p.set(this._buffer.subarray(this._buffer_index,this._buffer_index+h)),this._current_word=new DataView(p.buffer).getUint32(0,!1),this._buffer_index+=h,this._current_word_bits_left=h*8},d.prototype.readBits=function(f){if(f>32)throw new u.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(f<=this._current_word_bits_left){var h=this._current_word>>>32-f;return this._current_word<<=f,this._current_word_bits_left-=f,h}var p=this._current_word_bits_left?this._current_word:0;p=p>>>32-this._current_word_bits_left;var m=f-this._current_word_bits_left;this._fillCurrentWord();var g=Math.min(m,this._current_word_bits_left),v=this._current_word>>>32-g;return this._current_word<<=g,this._current_word_bits_left-=g,p=p<<g|v,p},d.prototype.readBool=function(){return this.readBits(1)===1},d.prototype.readByte=function(){return this.readBits(8)},d.prototype._skipLeadingZero=function(){var f;for(f=0;f<this._current_word_bits_left;f++)if((this._current_word&2147483648>>>f)!==0)return this._current_word<<=f,this._current_word_bits_left-=f,f;return this._fillCurrentWord(),f+this._skipLeadingZero()},d.prototype.readUEG=function(){var f=this._skipLeadingZero();return this.readBits(f+1)-1},d.prototype.readSEG=function(){var f=this.readUEG();return f&1?f+1>>>1:-1*(f>>>1)},d})();a.default=c}),"./src/demux/flv-demuxer.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logger.js"),c=l("./src/demux/amf-parser.js"),d=l("./src/demux/sps-parser.js"),f=l("./src/demux/demux-errors.js"),h=l("./src/core/media-info.js"),p=l("./src/utils/exception.js");function m(v,b){return v[b]<<24|v[b+1]<<16|v[b+2]<<8|v[b+3]}var g=(function(){function v(b,_){this.TAG="FLVDemuxer",this._config=_,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=b.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=b.hasAudioTrack,this._hasVideo=b.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new h.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=(function(){var y=new ArrayBuffer(2);return new DataView(y).setInt16(0,256,!0),new Int16Array(y)[0]===256})()}return v.prototype.destroy=function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null},v.probe=function(b){var _=new Uint8Array(b),y={match:!1};if(_[0]!==70||_[1]!==76||_[2]!==86||_[3]!==1)return y;var E=(_[4]&4)>>>2!==0,S=(_[4]&1)!==0,A=m(_,5);return A<9?y:{match:!0,consumed:A,dataOffset:A,hasAudioTrack:E,hasVideoTrack:S}},v.prototype.bindDataSource=function(b){return b.onDataArrival=this.parseChunks.bind(this),this},Object.defineProperty(v.prototype,"onTrackMetadata",{get:function(){return this._onTrackMetadata},set:function(b){this._onTrackMetadata=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onMediaInfo",{get:function(){return this._onMediaInfo},set:function(b){this._onMediaInfo=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onMetaDataArrived",{get:function(){return this._onMetaDataArrived},set:function(b){this._onMetaDataArrived=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onScriptDataArrived",{get:function(){return this._onScriptDataArrived},set:function(b){this._onScriptDataArrived=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onError",{get:function(){return this._onError},set:function(b){this._onError=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onDataAvailable",{get:function(){return this._onDataAvailable},set:function(b){this._onDataAvailable=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"timestampBase",{get:function(){return this._timestampBase},set:function(b){this._timestampBase=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"overridedDuration",{get:function(){return this._duration},set:function(b){this._durationOverrided=!0,this._duration=b,this._mediaInfo.duration=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"overridedHasAudio",{set:function(b){this._hasAudioFlagOverrided=!0,this._hasAudio=b,this._mediaInfo.hasAudio=b},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"overridedHasVideo",{set:function(b){this._hasVideoFlagOverrided=!0,this._hasVideo=b,this._mediaInfo.hasVideo=b},enumerable:!1,configurable:!0}),v.prototype.resetMediaInfo=function(){this._mediaInfo=new h.default},v.prototype._isInitialMetadataDispatched=function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!this._hasAudio&&this._hasVideo?this._videoInitialMetadataDispatched:!1},v.prototype.parseChunks=function(b,_){if(!this._onError||!this._onMediaInfo||!this._onTrackMetadata||!this._onDataAvailable)throw new p.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var y=0,E=this._littleEndian;if(_===0)if(b.byteLength>13){var S=v.probe(b);y=S.dataOffset}else return 0;if(this._firstParse){this._firstParse=!1,_+y!==this._dataOffset&&u.default.w(this.TAG,"First time parsing but chunk byteStart invalid!");var A=new DataView(b,y),C=A.getUint32(0,!E);C!==0&&u.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),y+=4}for(;y<b.byteLength;){this._dispatch=!0;var A=new DataView(b,y);if(y+11+4>b.byteLength)break;var T=A.getUint8(0),I=A.getUint32(0,!E)&16777215;if(y+11+I+4>b.byteLength)break;if(T!==8&&T!==9&&T!==18){u.default.w(this.TAG,"Unsupported tag type "+T+", skipped"),y+=11+I+4;continue}var D=A.getUint8(4),R=A.getUint8(5),O=A.getUint8(6),M=A.getUint8(7),U=O|R<<8|D<<16|M<<24,$=A.getUint32(7,!E)&16777215;$!==0&&u.default.w(this.TAG,"Meet tag which has StreamID != 0!");var B=y+11;switch(T){case 8:this._parseAudioData(b,B,I,U);break;case 9:this._parseVideoData(b,B,I,U,_+y);break;case 18:this._parseScriptData(b,B,I);break}var W=A.getUint32(11+I,!E);W!==11+I&&u.default.w(this.TAG,"Invalid PrevTagSize "+W),y+=11+I+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),y},v.prototype._parseScriptData=function(b,_,y){var E=c.default.parseScriptData(b,_,y);if(E.hasOwnProperty("onMetaData")){if(E.onMetaData==null||typeof E.onMetaData!="object"){u.default.w(this.TAG,"Invalid onMetaData structure!");return}this._metadata&&u.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=E;var S=this._metadata.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},S)),typeof S.hasAudio=="boolean"&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=S.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),typeof S.hasVideo=="boolean"&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=S.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),typeof S.audiodatarate=="number"&&(this._mediaInfo.audioDataRate=S.audiodatarate),typeof S.videodatarate=="number"&&(this._mediaInfo.videoDataRate=S.videodatarate),typeof S.width=="number"&&(this._mediaInfo.width=S.width),typeof S.height=="number"&&(this._mediaInfo.height=S.height),typeof S.duration=="number"){if(!this._durationOverrided){var A=Math.floor(S.duration*this._timescale);this._duration=A,this._mediaInfo.duration=A}}else this._mediaInfo.duration=0;if(typeof S.framerate=="number"){var C=Math.floor(S.framerate*1e3);if(C>0){var T=C/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=T,this._referenceFrameRate.fps_num=C,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=T}}if(typeof S.keyframes=="object"){this._mediaInfo.hasKeyframesIndex=!0;var I=S.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(I),S.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=S,u.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}Object.keys(E).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},E))},v.prototype._parseKeyframesIndex=function(b){for(var _=[],y=[],E=1;E<b.times.length;E++){var S=this._timestampBase+Math.floor(b.times[E]*1e3);_.push(S),y.push(b.filepositions[E])}return{times:_,filepositions:y}},v.prototype._parseAudioData=function(b,_,y,E){if(y<=1){u.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");return}if(!(this._hasAudioFlagOverrided===!0&&this._hasAudio===!1)){this._littleEndian;var S=new DataView(b,_,y),A=S.getUint8(0),C=A>>>4;if(C!==2&&C!==10){this._onError(f.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+C);return}var T=0,I=(A&12)>>>2;if(I>=0&&I<=4)T=this._flvSoundRateTable[I];else{this._onError(f.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+I);return}var D=A&1,R=this._audioMetadata,O=this._audioTrack;if(R||(this._hasAudio===!1&&this._hasAudioFlagOverrided===!1&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),R=this._audioMetadata={},R.type="audio",R.id=O.id,R.timescale=this._timescale,R.duration=this._duration,R.audioSampleRate=T,R.channelCount=D===0?1:2),C===10){var M=this._parseAACAudioData(b,_+1,y-1);if(M==null)return;if(M.packetType===0){R.config&&u.default.w(this.TAG,"Found another AudioSpecificConfig!");var U=M.data;R.audioSampleRate=U.samplingRate,R.channelCount=U.channelCount,R.codec=U.codec,R.originalCodec=U.originalCodec,R.config=U.config,R.refSampleDuration=1024/R.audioSampleRate*R.timescale,u.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",R);var $=this._mediaInfo;$.audioCodec=R.originalCodec,$.audioSampleRate=R.audioSampleRate,$.audioChannelCount=R.channelCount,$.hasVideo?$.videoCodec!=null&&($.mimeType='video/x-flv; codecs="'+$.videoCodec+","+$.audioCodec+'"'):$.mimeType='video/x-flv; codecs="'+$.audioCodec+'"',$.isComplete()&&this._onMediaInfo($)}else if(M.packetType===1){var B=this._timestampBase+E,W={unit:M.data,length:M.data.byteLength,dts:B,pts:B};O.samples.push(W),O.length+=M.data.length}else u.default.e(this.TAG,"Flv: Unsupported AAC data type "+M.packetType)}else if(C===2){if(!R.codec){var U=this._parseMP3AudioData(b,_+1,y-1,!0);if(U==null)return;R.audioSampleRate=U.samplingRate,R.channelCount=U.channelCount,R.codec=U.codec,R.originalCodec=U.originalCodec,R.refSampleDuration=1152/R.audioSampleRate*R.timescale,u.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",R);var $=this._mediaInfo;$.audioCodec=R.codec,$.audioSampleRate=R.audioSampleRate,$.audioChannelCount=R.channelCount,$.audioDataRate=U.bitRate,$.hasVideo?$.videoCodec!=null&&($.mimeType='video/x-flv; codecs="'+$.videoCodec+","+$.audioCodec+'"'):$.mimeType='video/x-flv; codecs="'+$.audioCodec+'"',$.isComplete()&&this._onMediaInfo($)}var te=this._parseMP3AudioData(b,_+1,y-1,!1);if(te==null)return;var B=this._timestampBase+E,re={unit:te,length:te.byteLength,dts:B,pts:B};O.samples.push(re),O.length+=te.length}}},v.prototype._parseAACAudioData=function(b,_,y){if(y<=1){u.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");return}var E={},S=new Uint8Array(b,_,y);return E.packetType=S[0],S[0]===0?E.data=this._parseAACAudioSpecificConfig(b,_+1,y-1):E.data=S.subarray(1),E},v.prototype._parseAACAudioSpecificConfig=function(b,_,y){var E=new Uint8Array(b,_,y),S=null,A=0,C=0,T=0,I=null;if(A=C=E[0]>>>3,T=(E[0]&7)<<1|E[1]>>>7,T<0||T>=this._mpegSamplingRates.length){this._onError(f.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");return}var D=this._mpegSamplingRates[T],R=(E[1]&120)>>>3;if(R<0||R>=8){this._onError(f.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration");return}A===5&&(I=(E[1]&7)<<1|E[2]>>>7,(E[2]&124)>>>2);var O=self.navigator.userAgent.toLowerCase();return O.indexOf("firefox")!==-1?T>=6?(A=5,S=new Array(4),I=T-3):(A=2,S=new Array(2),I=T):O.indexOf("android")!==-1?(A=2,S=new Array(2),I=T):(A=5,I=T,S=new Array(4),T>=6?I=T-3:R===1&&(A=2,S=new Array(2),I=T)),S[0]=A<<3,S[0]|=(T&15)>>>1,S[1]=(T&15)<<7,S[1]|=(R&15)<<3,A===5&&(S[1]|=(I&15)>>>1,S[2]=(I&1)<<7,S[2]|=8,S[3]=0),{config:S,samplingRate:D,channelCount:R,codec:"mp4a.40."+A,originalCodec:"mp4a.40."+C}},v.prototype._parseMP3AudioData=function(b,_,y,E){if(y<4){u.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");return}this._littleEndian;var S=new Uint8Array(b,_,y),A=null;if(E){if(S[0]!==255)return;var C=S[1]>>>3&3,T=(S[1]&6)>>1,I=(S[2]&240)>>>4,D=(S[2]&12)>>>2,R=S[3]>>>6&3,O=R!==3?2:1,M=0,U=0,$="mp3";switch(C){case 0:M=this._mpegAudioV25SampleRateTable[D];break;case 2:M=this._mpegAudioV20SampleRateTable[D];break;case 3:M=this._mpegAudioV10SampleRateTable[D];break}switch(T){case 1:I<this._mpegAudioL3BitRateTable.length&&(U=this._mpegAudioL3BitRateTable[I]);break;case 2:I<this._mpegAudioL2BitRateTable.length&&(U=this._mpegAudioL2BitRateTable[I]);break;case 3:I<this._mpegAudioL1BitRateTable.length&&(U=this._mpegAudioL1BitRateTable[I]);break}A={bitRate:U,samplingRate:M,channelCount:O,codec:$,originalCodec:$}}else A=S;return A},v.prototype._parseVideoData=function(b,_,y,E,S){if(y<=1){u.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");return}if(!(this._hasVideoFlagOverrided===!0&&this._hasVideo===!1)){var A=new Uint8Array(b,_,y)[0],C=(A&240)>>>4,T=A&15;if(T!==7){this._onError(f.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+T);return}this._parseAVCVideoPacket(b,_+1,y-1,E,S,C)}},v.prototype._parseAVCVideoPacket=function(b,_,y,E,S,A){if(y<4){u.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");return}var C=this._littleEndian,T=new DataView(b,_,y),I=T.getUint8(0),D=T.getUint32(0,!C)&16777215,R=D<<8>>8;if(I===0)this._parseAVCDecoderConfigurationRecord(b,_+4,y-4);else if(I===1)this._parseAVCVideoData(b,_+4,y-4,E,S,A,R);else if(I!==2){this._onError(f.default.FORMAT_ERROR,"Flv: Invalid video packet type "+I);return}},v.prototype._parseAVCDecoderConfigurationRecord=function(b,_,y){if(y<7){u.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");return}var E=this._videoMetadata,S=this._videoTrack,A=this._littleEndian,C=new DataView(b,_,y);E?typeof E.avcc<"u"&&u.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(this._hasVideo===!1&&this._hasVideoFlagOverrided===!1&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),E=this._videoMetadata={},E.type="video",E.id=S.id,E.timescale=this._timescale,E.duration=this._duration);var T=C.getUint8(0),I=C.getUint8(1);if(C.getUint8(2),C.getUint8(3),T!==1||I===0){this._onError(f.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord");return}if(this._naluLengthSize=(C.getUint8(4)&3)+1,this._naluLengthSize!==3&&this._naluLengthSize!==4){this._onError(f.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));return}var D=C.getUint8(5)&31;if(D===0){this._onError(f.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS");return}else D>1&&u.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+D);for(var R=6,O=0;O<D;O++){var M=C.getUint16(R,!A);if(R+=2,M!==0){var U=new Uint8Array(b,_+R,M);R+=M;var $=d.default.parseSPS(U);if(O===0){E.codecWidth=$.codec_size.width,E.codecHeight=$.codec_size.height,E.presentWidth=$.present_size.width,E.presentHeight=$.present_size.height,E.profile=$.profile_string,E.level=$.level_string,E.bitDepth=$.bit_depth,E.chromaFormat=$.chroma_format,E.sarRatio=$.sar_ratio,E.frameRate=$.frame_rate,($.frame_rate.fixed===!1||$.frame_rate.fps_num===0||$.frame_rate.fps_den===0)&&(E.frameRate=this._referenceFrameRate);var B=E.frameRate.fps_den,W=E.frameRate.fps_num;E.refSampleDuration=E.timescale*(B/W);for(var te=U.subarray(1,4),re="avc1.",q=0;q<3;q++){var le=te[q].toString(16);le.length<2&&(le="0"+le),re+=le}E.codec=re;var be=this._mediaInfo;be.width=E.codecWidth,be.height=E.codecHeight,be.fps=E.frameRate.fps,be.profile=E.profile,be.level=E.level,be.refFrames=$.ref_frames,be.chromaFormat=$.chroma_format_string,be.sarNum=E.sarRatio.width,be.sarDen=E.sarRatio.height,be.videoCodec=re,be.hasAudio?be.audioCodec!=null&&(be.mimeType='video/x-flv; codecs="'+be.videoCodec+","+be.audioCodec+'"'):be.mimeType='video/x-flv; codecs="'+be.videoCodec+'"',be.isComplete()&&this._onMediaInfo(be)}}}var se=C.getUint8(R);if(se===0){this._onError(f.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS");return}else se>1&&u.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+se);R++;for(var O=0;O<se;O++){var M=C.getUint16(R,!A);R+=2,M!==0&&(R+=M)}E.avcc=new Uint8Array(y),E.avcc.set(new Uint8Array(b,_,y),0),u.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",E)},v.prototype._parseAVCVideoData=function(b,_,y,E,S,A,C){for(var T=this._littleEndian,I=new DataView(b,_,y),D=[],R=0,O=0,M=this._naluLengthSize,U=this._timestampBase+E,$=A===1;O<y;){if(O+4>=y){u.default.w(this.TAG,"Malformed Nalu near timestamp "+U+", offset = "+O+", dataSize = "+y);break}var B=I.getUint32(O,!T);if(M===3&&(B>>>=8),B>y-M){u.default.w(this.TAG,"Malformed Nalus near timestamp "+U+", NaluSize > DataSize!");return}var W=I.getUint8(O+M)&31;W===5&&($=!0);var te=new Uint8Array(b,_+O,M+B),re={type:W,data:te};D.push(re),R+=te.byteLength,O+=M+B}if(D.length){var q=this._videoTrack,le={units:D,length:R,isKeyframe:$,dts:U,cts:C,pts:U+C};$&&(le.fileposition=S),q.samples.push(le),q.length+=R}},v})();a.default=g}),"./src/demux/sps-parser.js":(function(o,a,l){l.r(a);var u=l("./src/demux/exp-golomb.js"),c=(function(){function d(){}return d._ebsp2rbsp=function(f){for(var h=f,p=h.byteLength,m=new Uint8Array(p),g=0,v=0;v<p;v++)v>=2&&h[v]===3&&h[v-1]===0&&h[v-2]===0||(m[g]=h[v],g++);return new Uint8Array(m.buffer,0,g)},d.parseSPS=function(f){var h=d._ebsp2rbsp(f),p=new u.default(h);p.readByte();var m=p.readByte();p.readByte();var g=p.readByte();p.readUEG();var v=d.getProfileString(m),b=d.getLevelString(g),_=1,y=420,E=[0,420,422,444],S=8;if((m===100||m===110||m===122||m===244||m===44||m===83||m===86||m===118||m===128||m===138||m===144)&&(_=p.readUEG(),_===3&&p.readBits(1),_<=3&&(y=E[_]),S=p.readUEG()+8,p.readUEG(),p.readBits(1),p.readBool()))for(var A=_!==3?8:12,C=0;C<A;C++)p.readBool()&&(C<6?d._skipScalingList(p,16):d._skipScalingList(p,64));p.readUEG();var T=p.readUEG();if(T===0)p.readUEG();else if(T===1){p.readBits(1),p.readSEG(),p.readSEG();for(var I=p.readUEG(),C=0;C<I;C++)p.readSEG()}var D=p.readUEG();p.readBits(1);var R=p.readUEG(),O=p.readUEG(),M=p.readBits(1);M===0&&p.readBits(1),p.readBits(1);var U=0,$=0,B=0,W=0,te=p.readBool();te&&(U=p.readUEG(),$=p.readUEG(),B=p.readUEG(),W=p.readUEG());var re=1,q=1,le=0,be=!0,se=0,ne=0,pe=p.readBool();if(pe){if(p.readBool()){var ye=p.readByte(),xe=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Be=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];ye>0&&ye<16?(re=xe[ye-1],q=Be[ye-1]):ye===255&&(re=p.readByte()<<8|p.readByte(),q=p.readByte()<<8|p.readByte())}if(p.readBool()&&p.readBool(),p.readBool()&&(p.readBits(4),p.readBool()&&p.readBits(24)),p.readBool()&&(p.readUEG(),p.readUEG()),p.readBool()){var Ke=p.readBits(32),Xe=p.readBits(32);be=p.readBool(),se=Xe,ne=Ke*2,le=se/ne}}var Re=1;(re!==1||q!==1)&&(Re=re/q);var Z=0,ae=0;if(_===0)Z=1,ae=2-M;else{var ie=_===3?1:2,ue=_===1?2:1;Z=ie,ae=ue*(2-M)}var ve=(R+1)*16,j=(2-M)*((O+1)*16);ve-=(U+$)*Z,j-=(B+W)*ae;var K=Math.ceil(ve*Re);return p.destroy(),p=null,{profile_string:v,level_string:b,bit_depth:S,ref_frames:D,chroma_format:y,chroma_format_string:d.getChromaFormatString(y),frame_rate:{fixed:be,fps:le,fps_den:ne,fps_num:se},sar_ratio:{width:re,height:q},codec_size:{width:ve,height:j},present_size:{width:K,height:j}}},d._skipScalingList=function(f,h){for(var p=8,m=8,g=0,v=0;v<h;v++)m!==0&&(g=f.readSEG(),m=(p+g+256)%256),p=m===0?p:m},d.getProfileString=function(f){switch(f){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}},d.getLevelString=function(f){return(f/10).toFixed(1)},d.getChromaFormatString=function(f){switch(f){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}},d})();a.default=c}),"./src/flv.js":(function(o,a,l){l.r(a);var u=l("./src/utils/polyfill.js"),c=l("./src/core/features.js"),d=l("./src/io/loader.js"),f=l("./src/player/flv-player.js"),h=l("./src/player/native-player.js"),p=l("./src/player/player-events.js"),m=l("./src/player/player-errors.js"),g=l("./src/utils/logging-control.js"),v=l("./src/utils/exception.js");u.default.install();function b(S,A){var C=S;if(C==null||typeof C!="object")throw new v.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!C.hasOwnProperty("type"))throw new v.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(C.type){case"flv":return new f.default(C,A);default:return new h.default(C,A)}}function _(){return c.default.supportMSEH264Playback()}function y(){return c.default.getFeatureList()}var E={};E.createPlayer=b,E.isSupported=_,E.getFeatureList=y,E.BaseLoader=d.BaseLoader,E.LoaderStatus=d.LoaderStatus,E.LoaderErrors=d.LoaderErrors,E.Events=p.default,E.ErrorTypes=m.ErrorTypes,E.ErrorDetails=m.ErrorDetails,E.FlvPlayer=f.default,E.NativePlayer=h.default,E.LoggingControl=g.default,Object.defineProperty(E,"version",{enumerable:!0,get:function(){return"1.6.2"}}),a.default=E}),"./src/index.js":(function(o,a,l){o.exports=l("./src/flv.js").default}),"./src/io/fetch-stream-loader.js":(function(o,a,l){l.r(a);var u=l("./src/utils/browser.js"),c=l("./src/io/loader.js"),d=l("./src/utils/exception.js"),f=(function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(v[_]=b[_])},p(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(m,g);function v(){this.constructor=m}m.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}})(),h=(function(p){f(m,p);function m(g,v){var b=p.call(this,"fetch-stream-loader")||this;return b.TAG="FetchStreamLoader",b._seekHandler=g,b._config=v,b._needStash=!0,b._requestAbort=!1,b._contentLength=null,b._receivedLength=0,b}return m.isSupported=function(){try{var g=u.default.msedge&&u.default.version.minor>=15048,v=u.default.msedge?g:!0;return self.fetch&&self.ReadableStream&&v}catch{return!1}},m.prototype.destroy=function(){this.isWorking()&&this.abort(),p.prototype.destroy.call(this)},m.prototype.open=function(g,v){var b=this;this._dataSource=g,this._range=v;var _=g.url;this._config.reuseRedirectedURL&&g.redirectedURL!=null&&(_=g.redirectedURL);var y=this._seekHandler.getConfig(_,v),E=new self.Headers;if(typeof y.headers=="object"){var S=y.headers;for(var A in S)S.hasOwnProperty(A)&&E.append(A,S[A])}var C={method:"GET",headers:E,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(var A in this._config.headers)E.append(A,this._config.headers[A]);g.cors===!1&&(C.mode="same-origin"),g.withCredentials&&(C.credentials="include"),g.referrerPolicy&&(C.referrerPolicy=g.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,C.signal=this._abortController.signal),this._status=c.LoaderStatus.kConnecting,self.fetch(y.url,C).then(function(T){if(b._requestAbort){b._status=c.LoaderStatus.kIdle,T.body.cancel();return}if(T.ok&&T.status>=200&&T.status<=299){if(T.url!==y.url&&b._onURLRedirect){var I=b._seekHandler.removeURLParameters(T.url);b._onURLRedirect(I)}var D=T.headers.get("Content-Length");return D!=null&&(b._contentLength=parseInt(D),b._contentLength!==0&&b._onContentLengthKnown&&b._onContentLengthKnown(b._contentLength)),b._pump.call(b,T.body.getReader())}else if(b._status=c.LoaderStatus.kError,b._onError)b._onError(c.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:T.status,msg:T.statusText});else throw new d.RuntimeException("FetchStreamLoader: Http code invalid, "+T.status+" "+T.statusText)}).catch(function(T){if(!(b._abortController&&b._abortController.signal.aborted))if(b._status=c.LoaderStatus.kError,b._onError)b._onError(c.LoaderErrors.EXCEPTION,{code:-1,msg:T.message});else throw T})},m.prototype.abort=function(){if(this._requestAbort=!0,(this._status!==c.LoaderStatus.kBuffering||!u.default.chrome)&&this._abortController)try{this._abortController.abort()}catch{}},m.prototype._pump=function(g){var v=this;return g.read().then(function(b){if(b.done)if(v._contentLength!==null&&v._receivedLength<v._contentLength){v._status=c.LoaderStatus.kError;var _=c.LoaderErrors.EARLY_EOF,y={code:-1,msg:"Fetch stream meet Early-EOF"};if(v._onError)v._onError(_,y);else throw new d.RuntimeException(y.msg)}else v._status=c.LoaderStatus.kComplete,v._onComplete&&v._onComplete(v._range.from,v._range.from+v._receivedLength-1);else{if(v._abortController&&v._abortController.signal.aborted){v._status=c.LoaderStatus.kComplete;return}else if(v._requestAbort===!0)return v._status=c.LoaderStatus.kComplete,g.cancel();v._status=c.LoaderStatus.kBuffering;var E=b.value.buffer,S=v._range.from+v._receivedLength;v._receivedLength+=E.byteLength,v._onDataArrival&&v._onDataArrival(E,S,v._receivedLength),v._pump(g)}}).catch(function(b){if(v._abortController&&v._abortController.signal.aborted){v._status=c.LoaderStatus.kComplete;return}if(!(b.code===11&&u.default.msedge)){v._status=c.LoaderStatus.kError;var _=0,y=null;if((b.code===19||b.message==="network error")&&(v._contentLength===null||v._contentLength!==null&&v._receivedLength<v._contentLength)?(_=c.LoaderErrors.EARLY_EOF,y={code:b.code,msg:"Fetch stream meet Early-EOF"}):(_=c.LoaderErrors.EXCEPTION,y={code:b.code,msg:b.message}),v._onError)v._onError(_,y);else throw new d.RuntimeException(y.msg)}})},m})(c.BaseLoader);a.default=h}),"./src/io/io-controller.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logger.js"),c=l("./src/io/speed-sampler.js"),d=l("./src/io/loader.js"),f=l("./src/io/fetch-stream-loader.js"),h=l("./src/io/xhr-moz-chunked-loader.js"),p=l("./src/io/xhr-range-loader.js"),m=l("./src/io/websocket-loader.js"),g=l("./src/io/range-seek-handler.js"),v=l("./src/io/param-seek-handler.js"),b=l("./src/utils/exception.js"),_=(function(){function y(E,S,A){this.TAG="IOController",this._config=S,this._extraData=A,this._stashInitialSize=1024*384,S.stashInitialSize!=null&&S.stashInitialSize>0&&(this._stashInitialSize=S.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=1024*1024*3,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,S.enableStashBuffer===!1&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=E,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(E.url),this._refTotalLength=E.filesize?E.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new c.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return y.prototype.destroy=function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null},y.prototype.isWorking=function(){return this._loader&&this._loader.isWorking()&&!this._paused},y.prototype.isPaused=function(){return this._paused},Object.defineProperty(y.prototype,"status",{get:function(){return this._loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"extraData",{get:function(){return this._extraData},set:function(E){this._extraData=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(E){this._onDataArrival=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onSeeked",{get:function(){return this._onSeeked},set:function(E){this._onSeeked=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onError",{get:function(){return this._onError},set:function(E){this._onError=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onComplete",{get:function(){return this._onComplete},set:function(E){this._onComplete=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRedirect",{get:function(){return this._onRedirect},set:function(E){this._onRedirect=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onRecoveredEarlyEof",{get:function(){return this._onRecoveredEarlyEof},set:function(E){this._onRecoveredEarlyEof=E},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"currentURL",{get:function(){return this._dataSource.url},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"hasRedirect",{get:function(){return this._redirectedURL!=null||this._dataSource.redirectedURL!=null},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"currentRedirectedURL",{get:function(){return this._redirectedURL||this._dataSource.redirectedURL},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"currentSpeed",{get:function(){return this._loaderClass===p.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"loaderType",{get:function(){return this._loader.type},enumerable:!1,configurable:!0}),y.prototype._selectSeekHandler=function(){var E=this._config;if(E.seekType==="range")this._seekHandler=new g.default(this._config.rangeLoadZeroStart);else if(E.seekType==="param"){var S=E.seekParamStart||"bstart",A=E.seekParamEnd||"bend";this._seekHandler=new v.default(S,A)}else if(E.seekType==="custom"){if(typeof E.customSeekHandler!="function")throw new b.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new E.customSeekHandler}else throw new b.InvalidArgumentException("Invalid seekType in config: "+E.seekType)},y.prototype._selectLoader=function(){if(this._config.customLoader!=null)this._loaderClass=this._config.customLoader;else if(this._isWebSocketURL)this._loaderClass=m.default;else if(f.default.isSupported())this._loaderClass=f.default;else if(h.default.isSupported())this._loaderClass=h.default;else if(p.default.isSupported())this._loaderClass=p.default;else throw new b.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!")},y.prototype._createLoader=function(){this._loader=new this._loaderClass(this._seekHandler,this._config),this._loader.needStashBuffer===!1&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)},y.prototype.open=function(E){this._currentRange={from:0,to:-1},E&&(this._currentRange.from=E),this._speedSampler.reset(),E||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,Object.assign({},this._currentRange))},y.prototype.abort=function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)},y.prototype.pause=function(){this.isWorking()&&(this._loader.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)},y.prototype.resume=function(){if(this._paused){this._paused=!1;var E=this._resumeFrom;this._resumeFrom=0,this._internalSeek(E,!0)}},y.prototype.seek=function(E){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(E,!0)},y.prototype._internalSeek=function(E,S){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(S),this._loader.destroy(),this._loader=null;var A={from:E,to:-1};this._currentRange={from:A.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,A),this._onSeeked&&this._onSeeked()},y.prototype.updateUrl=function(E){if(!E||typeof E!="string"||E.length===0)throw new b.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=E},y.prototype._expandBuffer=function(E){for(var S=this._stashSize;S+1024*1024*1<E;)S*=2;if(S+=1024*1024*1,S!==this._bufferSize){var A=new ArrayBuffer(S);if(this._stashUsed>0){var C=new Uint8Array(this._stashBuffer,0,this._stashUsed),T=new Uint8Array(A,0,S);T.set(C,0)}this._stashBuffer=A,this._bufferSize=S}},y.prototype._normalizeSpeed=function(E){var S=this._speedNormalizeList,A=S.length-1,C=0,T=0,I=A;if(E<S[0])return S[0];for(;T<=I;){if(C=T+Math.floor((I-T)/2),C===A||E>=S[C]&&E<S[C+1])return S[C];S[C]<E?T=C+1:I=C-1}},y.prototype._adjustStashSize=function(E){var S=0;this._config.isLive||E<512?S=E:E>=512&&E<=1024?S=Math.floor(E*1.5):S=E*2,S>8192&&(S=8192);var A=S*1024+1024*1024*1;this._bufferSize<A&&this._expandBuffer(A),this._stashSize=S*1024},y.prototype._dispatchChunks=function(E,S){return this._currentRange.to=S+E.byteLength-1,this._onDataArrival(E,S)},y.prototype._onURLRedirect=function(E){this._redirectedURL=E,this._onRedirect&&this._onRedirect(E)},y.prototype._onContentLengthKnown=function(E){E&&this._fullRequestFlag&&(this._totalLength=E,this._fullRequestFlag=!1)},y.prototype._onLoaderChunkArrival=function(E,S,A){if(!this._onDataArrival)throw new b.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(E.byteLength);var C=this._speedSampler.lastSecondKBps;if(C!==0){var T=this._normalizeSpeed(C);this._speedNormalized!==T&&(this._speedNormalized=T,this._adjustStashSize(T))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=S),this._stashUsed+E.byteLength<=this._stashSize){var R=new Uint8Array(this._stashBuffer,0,this._stashSize);R.set(new Uint8Array(E),this._stashUsed),this._stashUsed+=E.byteLength}else{var R=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var M=this._stashBuffer.slice(0,this._stashUsed),I=this._dispatchChunks(M,this._stashByteStart);if(I<M.byteLength){if(I>0){var O=new Uint8Array(M,I);R.set(O,0),this._stashUsed=O.byteLength,this._stashByteStart+=I}}else this._stashUsed=0,this._stashByteStart+=I;this._stashUsed+E.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+E.byteLength),R=new Uint8Array(this._stashBuffer,0,this._bufferSize)),R.set(new Uint8Array(E),this._stashUsed),this._stashUsed+=E.byteLength}else{var I=this._dispatchChunks(E,S);if(I<E.byteLength){var D=E.byteLength-I;D>this._bufferSize&&(this._expandBuffer(D),R=new Uint8Array(this._stashBuffer,0,this._bufferSize)),R.set(new Uint8Array(E,I),0),this._stashUsed+=D,this._stashByteStart=S+I}}}else if(this._stashUsed===0){var I=this._dispatchChunks(E,S);if(I<E.byteLength){var D=E.byteLength-I;D>this._bufferSize&&this._expandBuffer(D);var R=new Uint8Array(this._stashBuffer,0,this._bufferSize);R.set(new Uint8Array(E,I),0),this._stashUsed+=D,this._stashByteStart=S+I}}else{this._stashUsed+E.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+E.byteLength);var R=new Uint8Array(this._stashBuffer,0,this._bufferSize);R.set(new Uint8Array(E),this._stashUsed),this._stashUsed+=E.byteLength;var I=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(I<this._stashUsed&&I>0){var O=new Uint8Array(this._stashBuffer,I);R.set(O,0)}this._stashUsed-=I,this._stashByteStart+=I}}},y.prototype._flushStashBuffer=function(E){if(this._stashUsed>0){var S=this._stashBuffer.slice(0,this._stashUsed),A=this._dispatchChunks(S,this._stashByteStart),C=S.byteLength-A;if(A<S.byteLength)if(E)u.default.w(this.TAG,C+" bytes unconsumed data remain when flush buffer, dropped");else{if(A>0){var T=new Uint8Array(this._stashBuffer,0,this._bufferSize),I=new Uint8Array(S,A);T.set(I,0),this._stashUsed=I.byteLength,this._stashByteStart+=A}return 0}return this._stashUsed=0,this._stashByteStart=0,C}return 0},y.prototype._onLoaderComplete=function(E,S){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)},y.prototype._onLoaderError=function(E,S){switch(u.default.e(this.TAG,"Loader error, code = "+S.code+", msg = "+S.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,E=d.LoaderErrors.UNRECOVERABLE_EARLY_EOF),E){case d.LoaderErrors.EARLY_EOF:{if(!this._config.isLive&&this._totalLength){var A=this._currentRange.to+1;A<this._totalLength&&(u.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(A,!1));return}E=d.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break}case d.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case d.LoaderErrors.CONNECTING_TIMEOUT:case d.LoaderErrors.HTTP_STATUS_CODE_INVALID:case d.LoaderErrors.EXCEPTION:break}if(this._onError)this._onError(E,S);else throw new b.RuntimeException("IOException: "+S.msg)},y})();a.default=_}),"./src/io/loader.js":(function(o,a,l){l.r(a),l.d(a,{LoaderStatus:function(){return c},LoaderErrors:function(){return d},BaseLoader:function(){return f}});var u=l("./src/utils/exception.js"),c={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},d={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},f=(function(){function h(p){this._type=p||"undefined",this._status=c.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return h.prototype.destroy=function(){this._status=c.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null},h.prototype.isWorking=function(){return this._status===c.kConnecting||this._status===c.kBuffering},Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"needStashBuffer",{get:function(){return this._needStash},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onContentLengthKnown",{get:function(){return this._onContentLengthKnown},set:function(p){this._onContentLengthKnown=p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onURLRedirect",{get:function(){return this._onURLRedirect},set:function(p){this._onURLRedirect=p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onDataArrival",{get:function(){return this._onDataArrival},set:function(p){this._onDataArrival=p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onError",{get:function(){return this._onError},set:function(p){this._onError=p},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onComplete",{get:function(){return this._onComplete},set:function(p){this._onComplete=p},enumerable:!1,configurable:!0}),h.prototype.open=function(p,m){throw new u.NotImplementedException("Unimplemented abstract function!")},h.prototype.abort=function(){throw new u.NotImplementedException("Unimplemented abstract function!")},h})()}),"./src/io/param-seek-handler.js":(function(o,a,l){l.r(a);var u=(function(){function c(d,f){this._startName=d,this._endName=f}return c.prototype.getConfig=function(d,f){var h=d;if(f.from!==0||f.to!==-1){var p=!0;h.indexOf("?")===-1&&(h+="?",p=!1),p&&(h+="&"),h+=this._startName+"="+f.from.toString(),f.to!==-1&&(h+="&"+this._endName+"="+f.to.toString())}return{url:h,headers:{}}},c.prototype.removeURLParameters=function(d){var f=d.split("?")[0],h=void 0,p=d.indexOf("?");p!==-1&&(h=d.substring(p+1));var m="";if(h!=null&&h.length>0)for(var g=h.split("&"),v=0;v<g.length;v++){var b=g[v].split("="),_=v>0;b[0]!==this._startName&&b[0]!==this._endName&&(_&&(m+="&"),m+=g[v])}return m.length===0?f:f+"?"+m},c})();a.default=u}),"./src/io/range-seek-handler.js":(function(o,a,l){l.r(a);var u=(function(){function c(d){this._zeroStart=d||!1}return c.prototype.getConfig=function(d,f){var h={};if(f.from!==0||f.to!==-1){var p=void 0;f.to!==-1?p="bytes="+f.from.toString()+"-"+f.to.toString():p="bytes="+f.from.toString()+"-",h.Range=p}else this._zeroStart&&(h.Range="bytes=0-");return{url:d,headers:h}},c.prototype.removeURLParameters=function(d){return d},c})();a.default=u}),"./src/io/speed-sampler.js":(function(o,a,l){l.r(a);var u=(function(){function c(){this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return c.prototype.reset=function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0},c.prototype.addBytes=function(d){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=d,this._totalBytes+=d):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=d,this._totalBytes+=d):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=d,this._totalBytes+=d,this._lastCheckpoint=this._now())},Object.defineProperty(c.prototype,"currentKBps",{get:function(){this.addBytes(0);var d=(this._now()-this._lastCheckpoint)/1e3;return d==0&&(d=1),this._intervalBytes/d/1024},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"lastSecondKBps",{get:function(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"averageKBps",{get:function(){var d=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/d/1024},enumerable:!1,configurable:!0}),c})();a.default=u}),"./src/io/websocket-loader.js":(function(o,a,l){l.r(a);var u=l("./src/io/loader.js"),c=l("./src/utils/exception.js"),d=(function(){var h=function(p,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(g[b]=v[b])},h(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(p,m);function g(){this.constructor=p}p.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}})(),f=(function(h){d(p,h);function p(){var m=h.call(this,"websocket-loader")||this;return m.TAG="WebSocketLoader",m._needStash=!0,m._ws=null,m._requestAbort=!1,m._receivedLength=0,m}return p.isSupported=function(){try{return typeof self.WebSocket<"u"}catch{return!1}},p.prototype.destroy=function(){this._ws&&this.abort(),h.prototype.destroy.call(this)},p.prototype.open=function(m){try{var g=this._ws=new self.WebSocket(m.url);g.binaryType="arraybuffer",g.onopen=this._onWebSocketOpen.bind(this),g.onclose=this._onWebSocketClose.bind(this),g.onmessage=this._onWebSocketMessage.bind(this),g.onerror=this._onWebSocketError.bind(this),this._status=u.LoaderStatus.kConnecting}catch(b){this._status=u.LoaderStatus.kError;var v={code:b.code,msg:b.message};if(this._onError)this._onError(u.LoaderErrors.EXCEPTION,v);else throw new c.RuntimeException(v.msg)}},p.prototype.abort=function(){var m=this._ws;m&&(m.readyState===0||m.readyState===1)&&(this._requestAbort=!0,m.close()),this._ws=null,this._status=u.LoaderStatus.kComplete},p.prototype._onWebSocketOpen=function(m){this._status=u.LoaderStatus.kBuffering},p.prototype._onWebSocketClose=function(m){if(this._requestAbort===!0){this._requestAbort=!1;return}this._status=u.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)},p.prototype._onWebSocketMessage=function(m){var g=this;if(m.data instanceof ArrayBuffer)this._dispatchArrayBuffer(m.data);else if(m.data instanceof Blob){var v=new FileReader;v.onload=function(){g._dispatchArrayBuffer(v.result)},v.readAsArrayBuffer(m.data)}else{this._status=u.LoaderStatus.kError;var b={code:-1,msg:"Unsupported WebSocket message type: "+m.data.constructor.name};if(this._onError)this._onError(u.LoaderErrors.EXCEPTION,b);else throw new c.RuntimeException(b.msg)}},p.prototype._dispatchArrayBuffer=function(m){var g=m,v=this._receivedLength;this._receivedLength+=g.byteLength,this._onDataArrival&&this._onDataArrival(g,v,this._receivedLength)},p.prototype._onWebSocketError=function(m){this._status=u.LoaderStatus.kError;var g={code:m.code,msg:m.message};if(this._onError)this._onError(u.LoaderErrors.EXCEPTION,g);else throw new c.RuntimeException(g.msg)},p})(u.BaseLoader);a.default=f}),"./src/io/xhr-moz-chunked-loader.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logger.js"),c=l("./src/io/loader.js"),d=l("./src/utils/exception.js"),f=(function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(v[_]=b[_])},p(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(m,g);function v(){this.constructor=m}m.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}})(),h=(function(p){f(m,p);function m(g,v){var b=p.call(this,"xhr-moz-chunked-loader")||this;return b.TAG="MozChunkedLoader",b._seekHandler=g,b._config=v,b._needStash=!0,b._xhr=null,b._requestAbort=!1,b._contentLength=null,b._receivedLength=0,b}return m.isSupported=function(){try{var g=new XMLHttpRequest;return g.open("GET","https://example.com",!0),g.responseType="moz-chunked-arraybuffer",g.responseType==="moz-chunked-arraybuffer"}catch(v){return u.default.w("MozChunkedLoader",v.message),!1}},m.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),p.prototype.destroy.call(this)},m.prototype.open=function(g,v){this._dataSource=g,this._range=v;var b=g.url;this._config.reuseRedirectedURL&&g.redirectedURL!=null&&(b=g.redirectedURL);var _=this._seekHandler.getConfig(b,v);this._requestURL=_.url;var y=this._xhr=new XMLHttpRequest;if(y.open("GET",_.url,!0),y.responseType="moz-chunked-arraybuffer",y.onreadystatechange=this._onReadyStateChange.bind(this),y.onprogress=this._onProgress.bind(this),y.onloadend=this._onLoadEnd.bind(this),y.onerror=this._onXhrError.bind(this),g.withCredentials&&(y.withCredentials=!0),typeof _.headers=="object"){var E=_.headers;for(var S in E)E.hasOwnProperty(S)&&y.setRequestHeader(S,E[S])}if(typeof this._config.headers=="object"){var E=this._config.headers;for(var S in E)E.hasOwnProperty(S)&&y.setRequestHeader(S,E[S])}this._status=c.LoaderStatus.kConnecting,y.send()},m.prototype.abort=function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=c.LoaderStatus.kComplete},m.prototype._onReadyStateChange=function(g){var v=g.target;if(v.readyState===2){if(v.responseURL!=null&&v.responseURL!==this._requestURL&&this._onURLRedirect){var b=this._seekHandler.removeURLParameters(v.responseURL);this._onURLRedirect(b)}if(v.status!==0&&(v.status<200||v.status>299))if(this._status=c.LoaderStatus.kError,this._onError)this._onError(c.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:v.status,msg:v.statusText});else throw new d.RuntimeException("MozChunkedLoader: Http code invalid, "+v.status+" "+v.statusText);else this._status=c.LoaderStatus.kBuffering}},m.prototype._onProgress=function(g){if(this._status!==c.LoaderStatus.kError){this._contentLength===null&&g.total!==null&&g.total!==0&&(this._contentLength=g.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var v=g.target.response,b=this._range.from+this._receivedLength;this._receivedLength+=v.byteLength,this._onDataArrival&&this._onDataArrival(v,b,this._receivedLength)}},m.prototype._onLoadEnd=function(g){if(this._requestAbort===!0){this._requestAbort=!1;return}else if(this._status===c.LoaderStatus.kError)return;this._status=c.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)},m.prototype._onXhrError=function(g){this._status=c.LoaderStatus.kError;var v=0,b=null;if(this._contentLength&&g.loaded<this._contentLength?(v=c.LoaderErrors.EARLY_EOF,b={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(v=c.LoaderErrors.EXCEPTION,b={code:-1,msg:g.constructor.name+" "+g.type}),this._onError)this._onError(v,b);else throw new d.RuntimeException(b.msg)},m})(c.BaseLoader);a.default=h}),"./src/io/xhr-range-loader.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logger.js"),c=l("./src/io/speed-sampler.js"),d=l("./src/io/loader.js"),f=l("./src/utils/exception.js"),h=(function(){var m=function(g,v){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&(b[y]=_[y])},m(g,v)};return function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");m(g,v);function b(){this.constructor=g}g.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)}})(),p=(function(m){h(g,m);function g(v,b){var _=m.call(this,"xhr-range-loader")||this;return _.TAG="RangeLoader",_._seekHandler=v,_._config=b,_._needStash=!1,_._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],_._currentChunkSizeKB=384,_._currentSpeedNormalized=0,_._zeroSpeedChunkCount=0,_._xhr=null,_._speedSampler=new c.default,_._requestAbort=!1,_._waitForTotalLength=!1,_._totalLengthReceived=!1,_._currentRequestURL=null,_._currentRedirectedURL=null,_._currentRequestRange=null,_._totalLength=null,_._contentLength=null,_._receivedLength=0,_._lastTimeLoaded=0,_}return g.isSupported=function(){try{var v=new XMLHttpRequest;return v.open("GET","https://example.com",!0),v.responseType="arraybuffer",v.responseType==="arraybuffer"}catch(b){return u.default.w("RangeLoader",b.message),!1}},g.prototype.destroy=function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),m.prototype.destroy.call(this)},Object.defineProperty(g.prototype,"currentSpeed",{get:function(){return this._speedSampler.lastSecondKBps},enumerable:!1,configurable:!0}),g.prototype.open=function(v,b){this._dataSource=v,this._range=b,this._status=d.LoaderStatus.kConnecting;var _=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(_=!0,this._totalLength=this._dataSource.filesize),!this._totalLengthReceived&&!_?(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1})):this._openSubRange()},g.prototype._openSubRange=function(){var v=this._currentChunkSizeKB*1024,b=this._range.from+this._receivedLength,_=b+v;this._contentLength!=null&&_-this._range.from>=this._contentLength&&(_=this._range.from+this._contentLength-1),this._currentRequestRange={from:b,to:_},this._internalOpen(this._dataSource,this._currentRequestRange)},g.prototype._internalOpen=function(v,b){this._lastTimeLoaded=0;var _=v.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?_=this._currentRedirectedURL:v.redirectedURL!=null&&(_=v.redirectedURL));var y=this._seekHandler.getConfig(_,b);this._currentRequestURL=y.url;var E=this._xhr=new XMLHttpRequest;if(E.open("GET",y.url,!0),E.responseType="arraybuffer",E.onreadystatechange=this._onReadyStateChange.bind(this),E.onprogress=this._onProgress.bind(this),E.onload=this._onLoad.bind(this),E.onerror=this._onXhrError.bind(this),v.withCredentials&&(E.withCredentials=!0),typeof y.headers=="object"){var S=y.headers;for(var A in S)S.hasOwnProperty(A)&&E.setRequestHeader(A,S[A])}if(typeof this._config.headers=="object"){var S=this._config.headers;for(var A in S)S.hasOwnProperty(A)&&E.setRequestHeader(A,S[A])}E.send()},g.prototype.abort=function(){this._requestAbort=!0,this._internalAbort(),this._status=d.LoaderStatus.kComplete},g.prototype._internalAbort=function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)},g.prototype._onReadyStateChange=function(v){var b=v.target;if(b.readyState===2){if(b.responseURL!=null){var _=this._seekHandler.removeURLParameters(b.responseURL);b.responseURL!==this._currentRequestURL&&_!==this._currentRedirectedURL&&(this._currentRedirectedURL=_,this._onURLRedirect&&this._onURLRedirect(_))}if(b.status>=200&&b.status<=299){if(this._waitForTotalLength)return;this._status=d.LoaderStatus.kBuffering}else if(this._status=d.LoaderStatus.kError,this._onError)this._onError(d.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:b.status,msg:b.statusText});else throw new f.RuntimeException("RangeLoader: Http code invalid, "+b.status+" "+b.statusText)}},g.prototype._onProgress=function(v){if(this._status!==d.LoaderStatus.kError){if(this._contentLength===null){var b=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,b=!0;var _=v.total;this._internalAbort(),_!=null&_!==0&&(this._totalLength=_)}if(this._range.to===-1?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,b){this._openSubRange();return}this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var y=v.loaded-this._lastTimeLoaded;this._lastTimeLoaded=v.loaded,this._speedSampler.addBytes(y)}},g.prototype._normalizeSpeed=function(v){var b=this._chunkSizeKBList,_=b.length-1,y=0,E=0,S=_;if(v<b[0])return b[0];for(;E<=S;){if(y=E+Math.floor((S-E)/2),y===_||v>=b[y]&&v<b[y+1])return b[y];b[y]<v?E=y+1:S=y-1}},g.prototype._onLoad=function(v){if(this._status!==d.LoaderStatus.kError){if(this._waitForTotalLength){this._waitForTotalLength=!1;return}this._lastTimeLoaded=0;var b=this._speedSampler.lastSecondKBps;if(b===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(b=this._speedSampler.currentKBps)),b!==0){var _=this._normalizeSpeed(b);this._currentSpeedNormalized!==_&&(this._currentSpeedNormalized=_,this._currentChunkSizeKB=_)}var y=v.target.response,E=this._range.from+this._receivedLength;this._receivedLength+=y.byteLength;var S=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():S=!0,this._onDataArrival&&this._onDataArrival(y,E,this._receivedLength),S&&(this._status=d.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}},g.prototype._onXhrError=function(v){this._status=d.LoaderStatus.kError;var b=0,_=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(b=d.LoaderErrors.EARLY_EOF,_={code:-1,msg:"RangeLoader meet Early-Eof"}):(b=d.LoaderErrors.EXCEPTION,_={code:-1,msg:v.constructor.name+" "+v.type}),this._onError)this._onError(b,_);else throw new f.RuntimeException(_.msg)},g})(d.BaseLoader);a.default=p}),"./src/player/flv-player.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=l("./src/utils/logger.js"),f=l("./src/utils/browser.js"),h=l("./src/player/player-events.js"),p=l("./src/core/transmuxer.js"),m=l("./src/core/transmuxing-events.js"),g=l("./src/core/mse-controller.js"),v=l("./src/core/mse-events.js"),b=l("./src/player/player-errors.js"),_=l("./src/config.js"),y=l("./src/utils/exception.js"),E=(function(){function S(A,C){if(this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new(c()),this._config=(0,_.createDefaultConfig)(),typeof C=="object"&&Object.assign(this._config,C),A.type.toLowerCase()!=="flv")throw new y.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");A.isLive===!0&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=A,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var T=f.default.chrome&&(f.default.version.major<50||f.default.version.major===50&&f.default.version.build<2661);this._alwaysSeekKeyframe=!!(T||f.default.msedge||f.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return S.prototype.destroy=function(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},S.prototype.on=function(A,C){var T=this;A===h.default.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(function(){T._emitter.emit(h.default.MEDIA_INFO,T.mediaInfo)}):A===h.default.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(function(){T._emitter.emit(h.default.STATISTICS_INFO,T.statisticsInfo)}),this._emitter.addListener(A,C)},S.prototype.off=function(A,C){this._emitter.removeListener(A,C)},S.prototype.attachMediaElement=function(A){var C=this;if(this._mediaElement=A,A.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),A.addEventListener("seeking",this.e.onvSeeking),A.addEventListener("canplay",this.e.onvCanPlay),A.addEventListener("stalled",this.e.onvStalled),A.addEventListener("progress",this.e.onvProgress),this._msectl=new g.default(this._config),this._msectl.on(v.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(v.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(v.default.SOURCE_OPEN,function(){C._mseSourceOpened=!0,C._hasPendingLoad&&(C._hasPendingLoad=!1,C.load())}),this._msectl.on(v.default.ERROR,function(T){C._emitter.emit(h.default.ERROR,b.ErrorTypes.MEDIA_ERROR,b.ErrorDetails.MEDIA_MSE_ERROR,T)}),this._msectl.attachMediaElement(A),this._pendingSeekTime!=null)try{A.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},S.prototype.detachMediaElement=function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)},S.prototype.load=function(){var A=this;if(!this._mediaElement)throw new y.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new y.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&this._mseSourceOpened===!1){this._hasPendingLoad=!0;return}this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new p.default(this._mediaDataSource,this._config),this._transmuxer.on(m.default.INIT_SEGMENT,function(C,T){A._msectl.appendInitSegment(T)}),this._transmuxer.on(m.default.MEDIA_SEGMENT,function(C,T){if(A._msectl.appendMediaSegment(T),A._config.lazyLoad&&!A._config.isLive){var I=A._mediaElement.currentTime;T.info.endDts>=(I+A._config.lazyLoadMaxDuration)*1e3&&A._progressChecker==null&&(d.default.v(A.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),A._suspendTransmuxer())}}),this._transmuxer.on(m.default.LOADING_COMPLETE,function(){A._msectl.endOfStream(),A._emitter.emit(h.default.LOADING_COMPLETE)}),this._transmuxer.on(m.default.RECOVERED_EARLY_EOF,function(){A._emitter.emit(h.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(m.default.IO_ERROR,function(C,T){A._emitter.emit(h.default.ERROR,b.ErrorTypes.NETWORK_ERROR,C,T)}),this._transmuxer.on(m.default.DEMUX_ERROR,function(C,T){A._emitter.emit(h.default.ERROR,b.ErrorTypes.MEDIA_ERROR,C,{code:-1,msg:T})}),this._transmuxer.on(m.default.MEDIA_INFO,function(C){A._mediaInfo=C,A._emitter.emit(h.default.MEDIA_INFO,Object.assign({},C))}),this._transmuxer.on(m.default.METADATA_ARRIVED,function(C){A._emitter.emit(h.default.METADATA_ARRIVED,C)}),this._transmuxer.on(m.default.SCRIPTDATA_ARRIVED,function(C){A._emitter.emit(h.default.SCRIPTDATA_ARRIVED,C)}),this._transmuxer.on(m.default.STATISTICS_INFO,function(C){A._statisticsInfo=A._fillStatisticsInfo(C),A._emitter.emit(h.default.STATISTICS_INFO,Object.assign({},A._statisticsInfo))}),this._transmuxer.on(m.default.RECOMMEND_SEEKPOINT,function(C){A._mediaElement&&!A._config.accurateSeek&&(A._requestSetTime=!0,A._mediaElement.currentTime=C/1e3)}),this._transmuxer.open()}},S.prototype.unload=function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)},S.prototype.play=function(){return this._mediaElement.play()},S.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(S.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(A){this._mediaElement.volume=A},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(A){this._mediaElement.muted=A},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(A){this._mediaElement?this._internalSeek(A):this._pendingSeekTime=A},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"mediaInfo",{get:function(){return Object.assign({},this._mediaInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"statisticsInfo",{get:function(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)},enumerable:!1,configurable:!0}),S.prototype._fillStatisticsInfo=function(A){if(A.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return A;var C=!0,T=0,I=0;if(this._mediaElement.getVideoPlaybackQuality){var D=this._mediaElement.getVideoPlaybackQuality();T=D.totalVideoFrames,I=D.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(T=this._mediaElement.webkitDecodedFrameCount,I=this._mediaElement.webkitDroppedFrameCount):C=!1;return C&&(A.decodedFrames=T,A.droppedFrames=I),A},S.prototype._onmseUpdateEnd=function(){if(!(!this._config.lazyLoad||this._config.isLive)){for(var A=this._mediaElement.buffered,C=this._mediaElement.currentTime,T=0,I=0;I<A.length;I++){var D=A.start(I),R=A.end(I);if(D<=C&&C<R){T=R;break}}T>=C+this._config.lazyLoadMaxDuration&&this._progressChecker==null&&(d.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}},S.prototype._onmseBufferFull=function(){d.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()},S.prototype._suspendTransmuxer=function(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))},S.prototype._checkProgressAndResume=function(){for(var A=this._mediaElement.currentTime,C=this._mediaElement.buffered,T=!1,I=0;I<C.length;I++){var D=C.start(I),R=C.end(I);if(A>=D&&A<R){A>=R-this._config.lazyLoadRecoverDuration&&(T=!0);break}}T&&(window.clearInterval(this._progressChecker),this._progressChecker=null,T&&(d.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))},S.prototype._isTimepointBuffered=function(A){for(var C=this._mediaElement.buffered,T=0;T<C.length;T++){var I=C.start(T),D=C.end(T);if(A>=I&&A<D)return!0}return!1},S.prototype._internalSeek=function(A){var C=this._isTimepointBuffered(A),T=!1,I=0;if(A<1&&this._mediaElement.buffered.length>0){var D=this._mediaElement.buffered.start(0);(D<1&&A<D||f.default.safari)&&(T=!0,I=f.default.safari?.1:D)}if(T)this._requestSetTime=!0,this._mediaElement.currentTime=I;else if(C){if(!this._alwaysSeekKeyframe)this._requestSetTime=!0,this._mediaElement.currentTime=A;else{var R=this._msectl.getNearestKeyframe(Math.floor(A*1e3));this._requestSetTime=!0,R!=null?this._mediaElement.currentTime=R.dts/1e3:this._mediaElement.currentTime=A}this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(A),this._transmuxer.seek(Math.floor(A*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=A)},S.prototype._checkAndApplyUnbufferedSeekpoint=function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var A=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(A)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(A),this._transmuxer.seek(Math.floor(A*1e3)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=A))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},S.prototype._checkAndResumeStuckPlayback=function(A){var C=this._mediaElement;if(A||!this._receivedCanPlay||C.readyState<2){var T=C.buffered;T.length>0&&C.currentTime<T.start(0)&&(d.default.w(this.TAG,"Playback seems stuck at "+C.currentTime+", seek to "+T.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=T.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)},S.prototype._onvLoadedMetadata=function(A){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)},S.prototype._onvSeeking=function(A){var C=this._mediaElement.currentTime,T=this._mediaElement.buffered;if(this._requestSetTime){this._requestSetTime=!1;return}if(C<1&&T.length>0){var I=T.start(0);if(I<1&&C<I||f.default.safari){this._requestSetTime=!0,this._mediaElement.currentTime=f.default.safari?.1:I;return}}if(this._isTimepointBuffered(C)){if(this._alwaysSeekKeyframe){var D=this._msectl.getNearestKeyframe(Math.floor(C*1e3));D!=null&&(this._requestSetTime=!0,this._mediaElement.currentTime=D.dts/1e3)}this._progressChecker!=null&&this._checkProgressAndResume();return}this._seekpointRecord={seekPoint:C,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)},S.prototype._onvCanPlay=function(A){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)},S.prototype._onvStalled=function(A){this._checkAndResumeStuckPlayback(!0)},S.prototype._onvProgress=function(A){this._checkAndResumeStuckPlayback()},S})();a.default=E}),"./src/player/native-player.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=l("./src/player/player-events.js"),f=l("./src/config.js"),h=l("./src/utils/exception.js"),p=(function(){function m(g,v){if(this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new(c()),this._config=(0,f.createDefaultConfig)(),typeof v=="object"&&Object.assign(this._config,v),g.type.toLowerCase()==="flv")throw new h.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(g.hasOwnProperty("segments"))throw new h.InvalidArgumentException("NativePlayer("+g.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=g,this._mediaElement=null}return m.prototype.destroy=function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null},m.prototype.on=function(g,v){var b=this;g===d.default.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){b._emitter.emit(d.default.MEDIA_INFO,b.mediaInfo)}):g===d.default.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(function(){b._emitter.emit(d.default.STATISTICS_INFO,b.statisticsInfo)}),this._emitter.addListener(g,v)},m.prototype.off=function(g,v){this._emitter.removeListener(g,v)},m.prototype.attachMediaElement=function(g){if(this._mediaElement=g,g.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{g.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}},m.prototype.detachMediaElement=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},m.prototype.load=function(){if(!this._mediaElement)throw new h.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)},m.prototype.unload=function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)},m.prototype.play=function(){return this._mediaElement.play()},m.prototype.pause=function(){this._mediaElement.pause()},Object.defineProperty(m.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"buffered",{get:function(){return this._mediaElement.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"duration",{get:function(){return this._mediaElement.duration},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"volume",{get:function(){return this._mediaElement.volume},set:function(g){this._mediaElement.volume=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"muted",{get:function(){return this._mediaElement.muted},set:function(g){this._mediaElement.muted=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"currentTime",{get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(g){this._mediaElement?this._mediaElement.currentTime=g:this._pendingSeekTime=g},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"mediaInfo",{get:function(){var g=this._mediaElement instanceof HTMLAudioElement?"audio/":"video/",v={mimeType:g+this._mediaDataSource.type};return this._mediaElement&&(v.duration=Math.floor(this._mediaElement.duration*1e3),this._mediaElement instanceof HTMLVideoElement&&(v.width=this._mediaElement.videoWidth,v.height=this._mediaElement.videoHeight)),v},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"statisticsInfo",{get:function(){var g={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return g;var v=!0,b=0,_=0;if(this._mediaElement.getVideoPlaybackQuality){var y=this._mediaElement.getVideoPlaybackQuality();b=y.totalVideoFrames,_=y.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!=null?(b=this._mediaElement.webkitDecodedFrameCount,_=this._mediaElement.webkitDroppedFrameCount):v=!1;return v&&(g.decodedFrames=b,g.droppedFrames=_),g},enumerable:!1,configurable:!0}),m.prototype._onvLoadedMetadata=function(g){this._pendingSeekTime!=null&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(d.default.MEDIA_INFO,this.mediaInfo)},m.prototype._reportStatisticsInfo=function(){this._emitter.emit(d.default.STATISTICS_INFO,this.statisticsInfo)},m})();a.default=p}),"./src/player/player-errors.js":(function(o,a,l){l.r(a),l.d(a,{ErrorTypes:function(){return d},ErrorDetails:function(){return f}});var u=l("./src/io/loader.js"),c=l("./src/demux/demux-errors.js"),d={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},f={NETWORK_EXCEPTION:u.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:u.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:u.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:u.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:c.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:c.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:c.default.CODEC_UNSUPPORTED}}),"./src/player/player-events.js":(function(o,a,l){l.r(a);var u={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",STATISTICS_INFO:"statistics_info"};a.default=u}),"./src/remux/aac-silent.js":(function(o,a,l){l.r(a);var u=(function(){function c(){}return c.getSilentFrame=function(d,f){if(d==="mp4a.40.2"){if(f===1)return new Uint8Array([0,200,0,128,35,128]);if(f===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(f===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(f===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(f===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(f===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(f===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(f===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(f===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},c})();a.default=u}),"./src/remux/mp4-generator.js":(function(o,a,l){l.r(a);var u=(function(){function c(){}return c.init=function(){c.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};for(var d in c.types)c.types.hasOwnProperty(d)&&(c.types[d]=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]);var f=c.constants={};f.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),f.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),f.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),f.STSC=f.STCO=f.STTS,f.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),f.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),f.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),f.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),f.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),f.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},c.box=function(d){for(var f=8,h=null,p=Array.prototype.slice.call(arguments,1),m=p.length,g=0;g<m;g++)f+=p[g].byteLength;h=new Uint8Array(f),h[0]=f>>>24&255,h[1]=f>>>16&255,h[2]=f>>>8&255,h[3]=f&255,h.set(d,4);for(var v=8,g=0;g<m;g++)h.set(p[g],v),v+=p[g].byteLength;return h},c.generateInitSegment=function(d){var f=c.box(c.types.ftyp,c.constants.FTYP),h=c.moov(d),p=new Uint8Array(f.byteLength+h.byteLength);return p.set(f,0),p.set(h,f.byteLength),p},c.moov=function(d){var f=c.mvhd(d.timescale,d.duration),h=c.trak(d),p=c.mvex(d);return c.box(c.types.moov,f,h,p)},c.mvhd=function(d,f){return c.box(c.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))},c.trak=function(d){return c.box(c.types.trak,c.tkhd(d),c.mdia(d))},c.tkhd=function(d){var f=d.id,h=d.duration,p=d.presentWidth,m=d.presentHeight;return c.box(c.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,p>>>8&255,p&255,0,0,m>>>8&255,m&255,0,0]))},c.mdia=function(d){return c.box(c.types.mdia,c.mdhd(d),c.hdlr(d),c.minf(d))},c.mdhd=function(d){var f=d.timescale,h=d.duration;return c.box(c.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,85,196,0,0]))},c.hdlr=function(d){var f=null;return d.type==="audio"?f=c.constants.HDLR_AUDIO:f=c.constants.HDLR_VIDEO,c.box(c.types.hdlr,f)},c.minf=function(d){var f=null;return d.type==="audio"?f=c.box(c.types.smhd,c.constants.SMHD):f=c.box(c.types.vmhd,c.constants.VMHD),c.box(c.types.minf,f,c.dinf(),c.stbl(d))},c.dinf=function(){var d=c.box(c.types.dinf,c.box(c.types.dref,c.constants.DREF));return d},c.stbl=function(d){var f=c.box(c.types.stbl,c.stsd(d),c.box(c.types.stts,c.constants.STTS),c.box(c.types.stsc,c.constants.STSC),c.box(c.types.stsz,c.constants.STSZ),c.box(c.types.stco,c.constants.STCO));return f},c.stsd=function(d){return d.type==="audio"?d.codec==="mp3"?c.box(c.types.stsd,c.constants.STSD_PREFIX,c.mp3(d)):c.box(c.types.stsd,c.constants.STSD_PREFIX,c.mp4a(d)):c.box(c.types.stsd,c.constants.STSD_PREFIX,c.avc1(d))},c.mp3=function(d){var f=d.channelCount,h=d.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,f,0,16,0,0,0,0,h>>>8&255,h&255,0,0]);return c.box(c.types[".mp3"],p)},c.mp4a=function(d){var f=d.channelCount,h=d.audioSampleRate,p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,f,0,16,0,0,0,0,h>>>8&255,h&255,0,0]);return c.box(c.types.mp4a,p,c.esds(d))},c.esds=function(d){var f=d.config||[],h=f.length,p=new Uint8Array([0,0,0,0,3,23+h,0,1,0,4,15+h,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([h]).concat(f).concat([6,1,2]));return c.box(c.types.esds,p)},c.avc1=function(d){var f=d.avcc,h=d.codecWidth,p=d.codecHeight,m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>>8&255,h&255,p>>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return c.box(c.types.avc1,m,c.box(c.types.avcC,f))},c.mvex=function(d){return c.box(c.types.mvex,c.trex(d))},c.trex=function(d){var f=d.id,h=new Uint8Array([0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return c.box(c.types.trex,h)},c.moof=function(d,f){return c.box(c.types.moof,c.mfhd(d.sequenceNumber),c.traf(d,f))},c.mfhd=function(d){var f=new Uint8Array([0,0,0,0,d>>>24&255,d>>>16&255,d>>>8&255,d&255]);return c.box(c.types.mfhd,f)},c.traf=function(d,f){var h=d.id,p=c.box(c.types.tfhd,new Uint8Array([0,0,0,0,h>>>24&255,h>>>16&255,h>>>8&255,h&255])),m=c.box(c.types.tfdt,new Uint8Array([0,0,0,0,f>>>24&255,f>>>16&255,f>>>8&255,f&255])),g=c.sdtp(d),v=c.trun(d,g.byteLength+16+16+8+16+8+8);return c.box(c.types.traf,p,m,v,g)},c.sdtp=function(d){for(var f=d.samples||[],h=f.length,p=new Uint8Array(4+h),m=0;m<h;m++){var g=f[m].flags;p[m+4]=g.isLeading<<6|g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy}return c.box(c.types.sdtp,p)},c.trun=function(d,f){var h=d.samples||[],p=h.length,m=12+16*p,g=new Uint8Array(m);f+=8+m,g.set([0,0,15,1,p>>>24&255,p>>>16&255,p>>>8&255,p&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255],0);for(var v=0;v<p;v++){var b=h[v].duration,_=h[v].size,y=h[v].flags,E=h[v].cts;g.set([b>>>24&255,b>>>16&255,b>>>8&255,b&255,_>>>24&255,_>>>16&255,_>>>8&255,_&255,y.isLeading<<2|y.dependsOn,y.isDependedOn<<6|y.hasRedundancy<<4|y.isNonSync,0,0,E>>>24&255,E>>>16&255,E>>>8&255,E&255],12+16*v)}return c.box(c.types.trun,g)},c.mdat=function(d){return c.box(c.types.mdat,d)},c})();u.init(),a.default=u}),"./src/remux/mp4-remuxer.js":(function(o,a,l){l.r(a);var u=l("./src/utils/logger.js"),c=l("./src/remux/mp4-generator.js"),d=l("./src/remux/aac-silent.js"),f=l("./src/utils/browser.js"),h=l("./src/core/media-segment-info.js"),p=l("./src/utils/exception.js"),m=(function(){function g(v){this.TAG="MP4Remuxer",this._config=v,this._isLive=v.isLive===!0,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new h.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new h.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!!(f.default.chrome&&(f.default.version.major<50||f.default.version.major===50&&f.default.version.build<2661)),this._fillSilentAfterSeek=f.default.msedge||f.default.msie,this._mp3UseMpegAudio=!f.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return g.prototype.destroy=function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null},g.prototype.bindDataSource=function(v){return v.onDataAvailable=this.remux.bind(this),v.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this},Object.defineProperty(g.prototype,"onInitSegment",{get:function(){return this._onInitSegment},set:function(v){this._onInitSegment=v},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onMediaSegment",{get:function(){return this._onMediaSegment},set:function(v){this._onMediaSegment=v},enumerable:!1,configurable:!0}),g.prototype.insertDiscontinuity=function(){this._audioNextDts=this._videoNextDts=void 0},g.prototype.seek=function(v){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()},g.prototype.remux=function(v,b){if(!this._onMediaSegment)throw new p.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(v,b),this._remuxVideo(b),this._remuxAudio(v)},g.prototype._onTrackMetadataReceived=function(v,b){var _=null,y="mp4",E=b.codec;if(v==="audio")this._audioMeta=b,b.codec==="mp3"&&this._mp3UseMpegAudio?(y="mpeg",E="",_=new Uint8Array):_=c.default.generateInitSegment(b);else if(v==="video")this._videoMeta=b,_=c.default.generateInitSegment(b);else return;if(!this._onInitSegment)throw new p.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(v,{type:v,data:_.buffer,codec:E,container:v+"/"+y,mediaDuration:b.duration})},g.prototype._calculateDtsBase=function(v,b){this._dtsBaseInited||(v.samples&&v.samples.length&&(this._audioDtsBase=v.samples[0].dts),b.samples&&b.samples.length&&(this._videoDtsBase=b.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)},g.prototype.flushStashedSamples=function(){var v=this._videoStashedLastSample,b=this._audioStashedLastSample,_={type:"video",id:1,sequenceNumber:0,samples:[],length:0};v!=null&&(_.samples.push(v),_.length=v.length);var y={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};b!=null&&(y.samples.push(b),y.length=b.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(_,!0),this._remuxAudio(y,!0)},g.prototype._remuxAudio=function(v,b){if(this._audioMeta!=null){var _=v,y=_.samples,E=void 0,S=-1,A=-1,C=this._audioMeta.refSampleDuration,T=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,I=this._dtsBaseInited&&this._audioNextDts===void 0,D=!1;if(!(!y||y.length===0)&&!(y.length===1&&!b)){var R=0,O=null,M=0;T?(R=0,M=_.length):(R=8,M=8+_.length);var U=null;if(y.length>1&&(U=y.pop(),M-=U.length),this._audioStashedLastSample!=null){var $=this._audioStashedLastSample;this._audioStashedLastSample=null,y.unshift($),M+=$.length}U!=null&&(this._audioStashedLastSample=U);var B=y[0].dts-this._dtsBase;if(this._audioNextDts)E=B-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())E=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(D=!0);else{var W=this._audioSegmentInfoList.getLastSampleBefore(B);if(W!=null){var te=B-(W.originalDts+W.duration);te<=3&&(te=0);var re=W.dts+W.duration+te;E=B-re}else E=0}if(D){var q=B-E,le=this._videoSegmentInfoList.getLastSegmentBefore(B);if(le!=null&&le.beginDts<q){var be=d.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(be){var se=le.beginDts,ne=q-le.beginDts;u.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+se+", duration: "+ne),y.unshift({unit:be,dts:se,pts:se}),M+=be.byteLength}}else D=!1}for(var pe=[],ye=0;ye<y.length;ye++){var $=y[ye],xe=$.unit,Be=$.dts-this._dtsBase,se=Be,Ke=!1,Xe=null,Re=0;if(!(Be<-.001)){if(this._audioMeta.codec!=="mp3"){var Z=Be,ae=3;if(this._audioNextDts&&(Z=this._audioNextDts),E=Be-Z,E<=-ae*C){u.default.w(this.TAG,"Dropping 1 audio frame (originalDts: "+Be+" ms ,curRefDts: "+Z+" ms)  due to dtsCorrection: "+E+" ms overlap.");continue}else if(E>=ae*C&&this._fillAudioTimestampGap&&!f.default.safari){Ke=!0;var ie=Math.floor(E/C);u.default.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
`+("originalDts: "+Be+" ms, curRefDts: "+Z+" ms, ")+("dtsCorrection: "+Math.round(E)+" ms, generate: "+ie+" frames")),se=Math.floor(Z),Re=Math.floor(Z+C)-se;var be=d.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);be==null&&(u.default.w(this.TAG,"Unable to generate silent frame for "+(this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame")),be=xe),Xe=[];for(var ue=0;ue<ie;ue++){Z=Z+C;var ve=Math.floor(Z),j=Math.floor(Z+C)-ve,K={dts:ve,pts:ve,cts:0,unit:be,size:be.byteLength,duration:j,originalDts:Be,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};Xe.push(K),M+=K.size}this._audioNextDts=Z+C}else se=Math.floor(Z),Re=Math.floor(Z+C)-se,this._audioNextDts=Z+C}else{if(se=Be-E,ye!==y.length-1){var oe=y[ye+1].dts-this._dtsBase-E;Re=oe-se}else if(U!=null){var oe=U.dts-this._dtsBase-E;Re=oe-se}else pe.length>=1?Re=pe[pe.length-1].duration:Re=Math.floor(C);this._audioNextDts=se+Re}S===-1&&(S=se),pe.push({dts:se,pts:se,cts:0,unit:$.unit,size:$.unit.byteLength,duration:Re,originalDts:Be,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),Ke&&pe.push.apply(pe,Xe)}}if(pe.length===0){_.samples=[],_.length=0;return}T?O=new Uint8Array(M):(O=new Uint8Array(M),O[0]=M>>>24&255,O[1]=M>>>16&255,O[2]=M>>>8&255,O[3]=M&255,O.set(c.default.types.mdat,4));for(var ye=0;ye<pe.length;ye++){var xe=pe[ye].unit;O.set(xe,R),R+=xe.byteLength}var he=pe[pe.length-1];A=he.dts+he.duration;var ce=new h.MediaSegmentInfo;ce.beginDts=S,ce.endDts=A,ce.beginPts=S,ce.endPts=A,ce.originalBeginDts=pe[0].originalDts,ce.originalEndDts=he.originalDts+he.duration,ce.firstSample=new h.SampleInfo(pe[0].dts,pe[0].pts,pe[0].duration,pe[0].originalDts,!1),ce.lastSample=new h.SampleInfo(he.dts,he.pts,he.duration,he.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(ce),_.samples=pe,_.sequenceNumber++;var me=null;T?me=new Uint8Array:me=c.default.moof(_,S),_.samples=[],_.length=0;var Q={type:"audio",data:this._mergeBoxes(me,O).buffer,sampleCount:pe.length,info:ce};T&&I&&(Q.timestampOffset=S),this._onMediaSegment("audio",Q)}}},g.prototype._remuxVideo=function(v,b){if(this._videoMeta!=null){var _=v,y=_.samples,E=void 0,S=-1,A=-1,C=-1,T=-1;if(!(!y||y.length===0)&&!(y.length===1&&!b)){var I=8,D=null,R=8+v.length,O=null;if(y.length>1&&(O=y.pop(),R-=O.length),this._videoStashedLastSample!=null){var M=this._videoStashedLastSample;this._videoStashedLastSample=null,y.unshift(M),R+=M.length}O!=null&&(this._videoStashedLastSample=O);var U=y[0].dts-this._dtsBase;if(this._videoNextDts)E=U-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())E=0;else{var $=this._videoSegmentInfoList.getLastSampleBefore(U);if($!=null){var B=U-($.originalDts+$.duration);B<=3&&(B=0);var W=$.dts+$.duration+B;E=U-W}else E=0}for(var te=new h.MediaSegmentInfo,re=[],q=0;q<y.length;q++){var M=y[q],le=M.dts-this._dtsBase,be=M.isKeyframe,se=le-E,ne=M.cts,pe=se+ne;S===-1&&(S=se,C=pe);var ye=0;if(q!==y.length-1){var xe=y[q+1].dts-this._dtsBase-E;ye=xe-se}else if(O!=null){var xe=O.dts-this._dtsBase-E;ye=xe-se}else re.length>=1?ye=re[re.length-1].duration:ye=Math.floor(this._videoMeta.refSampleDuration);if(be){var Be=new h.SampleInfo(se,pe,ye,M.dts,!0);Be.fileposition=M.fileposition,te.appendSyncPoint(Be)}re.push({dts:se,pts:pe,cts:ne,units:M.units,size:M.length,isKeyframe:be,duration:ye,originalDts:le,flags:{isLeading:0,dependsOn:be?2:1,isDependedOn:be?1:0,hasRedundancy:0,isNonSync:be?0:1}})}D=new Uint8Array(R),D[0]=R>>>24&255,D[1]=R>>>16&255,D[2]=R>>>8&255,D[3]=R&255,D.set(c.default.types.mdat,4);for(var q=0;q<re.length;q++)for(var Ke=re[q].units;Ke.length;){var Xe=Ke.shift(),Re=Xe.data;D.set(Re,I),I+=Re.byteLength}var Z=re[re.length-1];if(A=Z.dts+Z.duration,T=Z.pts+Z.duration,this._videoNextDts=A,te.beginDts=S,te.endDts=A,te.beginPts=C,te.endPts=T,te.originalBeginDts=re[0].originalDts,te.originalEndDts=Z.originalDts+Z.duration,te.firstSample=new h.SampleInfo(re[0].dts,re[0].pts,re[0].duration,re[0].originalDts,re[0].isKeyframe),te.lastSample=new h.SampleInfo(Z.dts,Z.pts,Z.duration,Z.originalDts,Z.isKeyframe),this._isLive||this._videoSegmentInfoList.append(te),_.samples=re,_.sequenceNumber++,this._forceFirstIDR){var ae=re[0].flags;ae.dependsOn=2,ae.isNonSync=0}var ie=c.default.moof(_,S);_.samples=[],_.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(ie,D).buffer,sampleCount:re.length,info:te})}}},g.prototype._mergeBoxes=function(v,b){var _=new Uint8Array(v.byteLength+b.byteLength);return _.set(v,0),_.set(b,v.byteLength),_},g})();a.default=m}),"./src/utils/browser.js":(function(o,a,l){l.r(a);var u={};function c(){var d=self.navigator.userAgent.toLowerCase(),f=/(edge)\/([\w.]+)/.exec(d)||/(opr)[\/]([\w.]+)/.exec(d)||/(chrome)[ \/]([\w.]+)/.exec(d)||/(iemobile)[\/]([\w.]+)/.exec(d)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(d)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(d)||/(webkit)[ \/]([\w.]+)/.exec(d)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(d)||/(msie) ([\w.]+)/.exec(d)||d.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(d)||d.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(d)||[],h=/(ipad)/.exec(d)||/(ipod)/.exec(d)||/(windows phone)/.exec(d)||/(iphone)/.exec(d)||/(kindle)/.exec(d)||/(android)/.exec(d)||/(windows)/.exec(d)||/(mac)/.exec(d)||/(linux)/.exec(d)||/(cros)/.exec(d)||[],p={browser:f[5]||f[3]||f[1]||"",version:f[2]||f[4]||"0",majorVersion:f[4]||f[2]||"0",platform:h[0]||""},m={};if(p.browser){m[p.browser]=!0;var g=p.majorVersion.split(".");m.version={major:parseInt(p.majorVersion,10),string:p.version},g.length>1&&(m.version.minor=parseInt(g[1],10)),g.length>2&&(m.version.build=parseInt(g[2],10))}if(p.platform&&(m[p.platform]=!0),(m.chrome||m.opr||m.safari)&&(m.webkit=!0),m.rv||m.iemobile){m.rv&&delete m.rv;var v="msie";p.browser=v,m[v]=!0}if(m.edge){delete m.edge;var b="msedge";p.browser=b,m[b]=!0}if(m.opr){var _="opera";p.browser=_,m[_]=!0}if(m.safari&&m.android){var y="android";p.browser=y,m[y]=!0}m.name=p.browser,m.platform=p.platform;for(var E in u)u.hasOwnProperty(E)&&delete u[E];Object.assign(u,m)}c(),a.default=u}),"./src/utils/exception.js":(function(o,a,l){l.r(a),l.d(a,{RuntimeException:function(){return c},IllegalStateException:function(){return d},InvalidArgumentException:function(){return f},NotImplementedException:function(){return h}});var u=(function(){var p=function(m,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(v[_]=b[_])},p(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(m,g);function v(){this.constructor=m}m.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}})(),c=(function(){function p(m){this._message=m}return Object.defineProperty(p.prototype,"name",{get:function(){return"RuntimeException"},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"message",{get:function(){return this._message},enumerable:!1,configurable:!0}),p.prototype.toString=function(){return this.name+": "+this.message},p})(),d=(function(p){u(m,p);function m(g){return p.call(this,g)||this}return Object.defineProperty(m.prototype,"name",{get:function(){return"IllegalStateException"},enumerable:!1,configurable:!0}),m})(c),f=(function(p){u(m,p);function m(g){return p.call(this,g)||this}return Object.defineProperty(m.prototype,"name",{get:function(){return"InvalidArgumentException"},enumerable:!1,configurable:!0}),m})(c),h=(function(p){u(m,p);function m(g){return p.call(this,g)||this}return Object.defineProperty(m.prototype,"name",{get:function(){return"NotImplementedException"},enumerable:!1,configurable:!0}),m})(c)}),"./src/utils/logger.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=(function(){function f(){}return f.e=function(h,p){(!h||f.FORCE_GLOBAL_TAG)&&(h=f.GLOBAL_TAG);var m="["+h+"] > "+p;f.ENABLE_CALLBACK&&f.emitter.emit("log","error",m),f.ENABLE_ERROR&&(console.error?console.error(m):console.warn?console.warn(m):console.log(m))},f.i=function(h,p){(!h||f.FORCE_GLOBAL_TAG)&&(h=f.GLOBAL_TAG);var m="["+h+"] > "+p;f.ENABLE_CALLBACK&&f.emitter.emit("log","info",m),f.ENABLE_INFO&&(console.info?console.info(m):console.log(m))},f.w=function(h,p){(!h||f.FORCE_GLOBAL_TAG)&&(h=f.GLOBAL_TAG);var m="["+h+"] > "+p;f.ENABLE_CALLBACK&&f.emitter.emit("log","warn",m),f.ENABLE_WARN&&(console.warn?console.warn(m):console.log(m))},f.d=function(h,p){(!h||f.FORCE_GLOBAL_TAG)&&(h=f.GLOBAL_TAG);var m="["+h+"] > "+p;f.ENABLE_CALLBACK&&f.emitter.emit("log","debug",m),f.ENABLE_DEBUG&&(console.debug?console.debug(m):console.log(m))},f.v=function(h,p){(!h||f.FORCE_GLOBAL_TAG)&&(h=f.GLOBAL_TAG);var m="["+h+"] > "+p;f.ENABLE_CALLBACK&&f.emitter.emit("log","verbose",m),f.ENABLE_VERBOSE&&console.log(m)},f})();d.GLOBAL_TAG="flv.js",d.FORCE_GLOBAL_TAG=!1,d.ENABLE_ERROR=!0,d.ENABLE_INFO=!0,d.ENABLE_WARN=!0,d.ENABLE_DEBUG=!0,d.ENABLE_VERBOSE=!0,d.ENABLE_CALLBACK=!1,d.emitter=new(c()),a.default=d}),"./src/utils/logging-control.js":(function(o,a,l){l.r(a);var u=l("./node_modules/events/events.js"),c=l.n(u),d=l("./src/utils/logger.js"),f=(function(){function h(){}return Object.defineProperty(h,"forceGlobalTag",{get:function(){return d.default.FORCE_GLOBAL_TAG},set:function(p){d.default.FORCE_GLOBAL_TAG=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"globalTag",{get:function(){return d.default.GLOBAL_TAG},set:function(p){d.default.GLOBAL_TAG=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableAll",{get:function(){return d.default.ENABLE_VERBOSE&&d.default.ENABLE_DEBUG&&d.default.ENABLE_INFO&&d.default.ENABLE_WARN&&d.default.ENABLE_ERROR},set:function(p){d.default.ENABLE_VERBOSE=p,d.default.ENABLE_DEBUG=p,d.default.ENABLE_INFO=p,d.default.ENABLE_WARN=p,d.default.ENABLE_ERROR=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableDebug",{get:function(){return d.default.ENABLE_DEBUG},set:function(p){d.default.ENABLE_DEBUG=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableVerbose",{get:function(){return d.default.ENABLE_VERBOSE},set:function(p){d.default.ENABLE_VERBOSE=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableInfo",{get:function(){return d.default.ENABLE_INFO},set:function(p){d.default.ENABLE_INFO=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableWarn",{get:function(){return d.default.ENABLE_WARN},set:function(p){d.default.ENABLE_WARN=p,h._notifyChange()},enumerable:!1,configurable:!0}),Object.defineProperty(h,"enableError",{get:function(){return d.default.ENABLE_ERROR},set:function(p){d.default.ENABLE_ERROR=p,h._notifyChange()},enumerable:!1,configurable:!0}),h.getConfig=function(){return{globalTag:d.default.GLOBAL_TAG,forceGlobalTag:d.default.FORCE_GLOBAL_TAG,enableVerbose:d.default.ENABLE_VERBOSE,enableDebug:d.default.ENABLE_DEBUG,enableInfo:d.default.ENABLE_INFO,enableWarn:d.default.ENABLE_WARN,enableError:d.default.ENABLE_ERROR,enableCallback:d.default.ENABLE_CALLBACK}},h.applyConfig=function(p){d.default.GLOBAL_TAG=p.globalTag,d.default.FORCE_GLOBAL_TAG=p.forceGlobalTag,d.default.ENABLE_VERBOSE=p.enableVerbose,d.default.ENABLE_DEBUG=p.enableDebug,d.default.ENABLE_INFO=p.enableInfo,d.default.ENABLE_WARN=p.enableWarn,d.default.ENABLE_ERROR=p.enableError,d.default.ENABLE_CALLBACK=p.enableCallback},h._notifyChange=function(){var p=h.emitter;if(p.listenerCount("change")>0){var m=h.getConfig();p.emit("change",m)}},h.registerListener=function(p){h.emitter.addListener("change",p)},h.removeListener=function(p){h.emitter.removeListener("change",p)},h.addLogListener=function(p){d.default.emitter.addListener("log",p),d.default.emitter.listenerCount("log")>0&&(d.default.ENABLE_CALLBACK=!0,h._notifyChange())},h.removeLogListener=function(p){d.default.emitter.removeListener("log",p),d.default.emitter.listenerCount("log")===0&&(d.default.ENABLE_CALLBACK=!1,h._notifyChange())},h})();f.emitter=new(c()),a.default=f}),"./src/utils/polyfill.js":(function(o,a,l){l.r(a);var u=(function(){function c(){}return c.install=function(){Object.setPrototypeOf=Object.setPrototypeOf||function(d,f){return d.__proto__=f,d},Object.assign=Object.assign||function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(d),h=1;h<arguments.length;h++){var p=arguments[h];if(p!=null)for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])}return f},typeof self.Promise!="function"&&l("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},c})();u.install(),a.default=u}),"./src/utils/utf8-conv.js":(function(o,a,l){l.r(a);function u(d,f,h){var p=d;if(f+h<p.length){for(;h--;)if((p[++f]&192)!==128)return!1;return!0}else return!1}function c(d){for(var f=[],h=d,p=0,m=d.length;p<m;){if(h[p]<128){f.push(String.fromCharCode(h[p])),++p;continue}else if(!(h[p]<192)){if(h[p]<224){if(u(h,p,1)){var g=(h[p]&31)<<6|h[p+1]&63;if(g>=128){f.push(String.fromCharCode(g&65535)),p+=2;continue}}}else if(h[p]<240){if(u(h,p,2)){var g=(h[p]&15)<<12|(h[p+1]&63)<<6|h[p+2]&63;if(g>=2048&&(g&63488)!==55296){f.push(String.fromCharCode(g&65535)),p+=3;continue}}}else if(h[p]<248&&u(h,p,3)){var g=(h[p]&7)<<18|(h[p+1]&63)<<12|(h[p+2]&63)<<6|h[p+3]&63;if(g>65536&&g<1114112){g-=65536,f.push(String.fromCharCode(g>>>10|55296)),f.push(String.fromCharCode(g&1023|56320)),p+=4;continue}}}f.push(""),++p}return f.join("")}a.default=c})},n={};function s(o){var a=n[o];if(a!==void 0)return a.exports;var l=n[o]={exports:{}};return i[o].call(l.exports,l,l.exports,s),l.exports}s.m=i,(function(){s.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(a,{a}),a}})(),(function(){s.d=function(o,a){for(var l in a)s.o(a,l)&&!s.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:a[l]})}})(),(function(){s.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})()})(),(function(){s.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)}})(),(function(){s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})}})();var r=s("./src/index.js");return r})()})})(b2)),b2.exports}var Vw=SX();const xX=aS({__proto__:null,default:Sf(Vw)},[Vw]),TX={pos:"relative"},AX={key:0,pos:"absolute","w-screen":"","h-580px":"","z-0":"",style:{left:"50%",transform:"translateX(-50%)",top:"calc(-1 * (var(--bew-top-bar-height) + 10px))"}},kX={key:0,flex:"~ col","justify-center":"","items-center":"",relative:"","w-full":"","z-10":"","mb-4":"","h-500px":""},CX={key:0,class:"glass-panel",bg:"$bew-elevated","p-1":"",w:"[calc(100%-280px)]","max-w":"fit","h-38px":"","rounded-full":"",text:"sm",shadow:"[var(--bew-shadow-1),var(--bew-shadow-edge-glow-1)]","box-border":"",border:"1 $bew-border-color"},LX={class:"home-tabs-scroll","h-full":"","of-x-auto":"","of-y-hidden":""},IX={class:"home-tabs-inside",flex:"~ items-center gap-1","h-inherit":"",rounded:"$bew-radius-half","w-max":""},RX=["onClick"],PX={class:"text-center"},DX={"i-svg-spinners:ring-resize":"",pos:"absolute right-4px top-4px","duration-300":"",text:"8px white"},OX={key:1,class:"glass-panel",flex:"~ gap-1 shrink-0","p-1":"","h-38px":"",bg:"$bew-elevated","ml-auto":"","rounded-full":"",shadow:"[var(--bew-shadow-1),var(--bew-shadow-edge-glow-1)]","box-border":"",border:"1 $bew-border-color"},MX=["onClick"],$X=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Home",setup(t){const e=Fl(),{handleBackToTop:i,homeActivatedPage:n}=$t(),s=Ho((b=0)=>i(b),1e3),r=z(0),o=n,a=ge(()=>({[Ni.ForYou]:jt(()=>Promise.resolve().then(()=>dae)),[Ni.Following]:k.value.useFollowingNewLayout?jt(()=>Promise.resolve().then(()=>Lae)):jt(()=>Promise.resolve().then(()=>Iae)),[Ni.SubscribedSeries]:jt(()=>Promise.resolve().then(()=>Rae)),[Ni.Trending]:jt(()=>Promise.resolve().then(()=>Pae)),[Ni.Ranking]:jt(()=>Promise.resolve().then(()=>Bae)),[Ni.Precious]:jt(()=>Promise.resolve().then(()=>Nae)),[Ni.Weekly]:jt(()=>Promise.resolve().then(()=>qae)),[Ni.Live]:jt(()=>Promise.resolve().then(()=>Zae))})),l=z(!1),u=z(!1),c=z(!1),d=z([]),f=z(),h=z(!1),p=ge(()=>[{icon:"i-mingcute:table-3-line",iconActivated:"i-mingcute:table-3-fill",value:"adaptive"},{icon:"i-mingcute:layout-grid-line",iconActivated:"i-mingcute:layout-grid-fill",value:"twoColumns"},{icon:"i-mingcute:list-check-3-line",iconActivated:"i-mingcute:list-check-3-fill",value:"oneColumn"}]);Pe(()=>k.value.homePageTabVisibilityList,()=>{d.value=m()},{deep:!0});function m(){(!k.value.homePageTabVisibilityList.length||k.value.homePageTabVisibilityList.length!==e.homeTabs.length)&&(k.value.homePageTabVisibilityList=e.homeTabs.map(_=>({page:_.page,visible:_.page!==Ni.Precious})));const b=[];for(const _ of k.value.homePageTabVisibilityList)_.visible&&b.push({i18nKey:(e.homeTabs.find(y=>y.page===_.page)||{})?.i18nKey||_.page,page:_.page});return b}st(()=>{l.value=!0,rn.on(Ua,b=>{r.value=b}),rn.off(Na),rn.on(Na,b=>{if(h.value=b,u.value=!1,k.value.autoHideTopBar&&k.value.showTopBar)if(!k.value.useSearchPageModeOnHomePage)b?u.value=!1:u.value=!0;else{const _=r.value;b?u.value=!1:_>550&&(u.value=!0)}}),d.value=m(),o.value=d.value[0].page,n.value=d.value[0].page}),ki(()=>{rn.off(Na),rn.off(Ua)});function g(b){if(o.value===b.page){const _=r.value;if(!k.value.useSearchPageModeOnHomePage&&_>0||k.value.useSearchPageModeOnHomePage&&_>510)s(k.value.useSearchPageModeOnHomePage?510:0);else{if(c.value)return;f.value&&f.value.initData()}return}else s(k.value.useSearchPageModeOnHomePage?510:0);c.value&&v(!1),o.value=b.page,n.value=b.page}function v(b){c.value=b}return(b,_)=>{const y=Ge("Logo"),E=Ge("SearchBar");return L(),P("div",TX,[F(nt,{name:"bg"},{default:H(()=>[w(k).useSearchPageModeOnHomePage&&w(k).individuallySetSearchPageWallpaper&&w(l)?(L(),P("div",AX,[x("div",{pos:"absolute left-0 top-0","w-full":"","h-inherit":"",bg:"cover center","z-1":"","pointer-events-none":"",style:Ue({backgroundImage:`url('${w(k).searchPageWallpaper}')`,backgroundAttachment:w(k).searchPageModeWallpaperFixed?"fixed":"unset"})},null,4),F(nt,{name:"fade"},{default:H(()=>[!w(k).individuallySetSearchPageWallpaper&&w(k).enableWallpaperMasking||w(k).searchPageEnableWallpaperMasking?(L(),P("div",{key:0,pos:"relative left-0 top-0","w-full":"","h-inherit":"","pointer-events-none":"","duration-300":"","z-1":"",style:Ue({backdropFilter:`blur(${w(k).individuallySetSearchPageWallpaper?w(k).searchPageWallpaperBlurIntensity:w(k).wallpaperBlurIntensity}px)`})},[x("div",{bg:"$bew-homepage-bg",pos:"absolute top-0 left-0","w-full":"","h-full":"",style:Ue({opacity:`${w(k).searchPageWallpaperMaskOpacity}%`})},null,4)],4)):X("",!0)]),_:1})])):X("",!0)]),_:1}),x("main",null,[F(nt,{name:"content"},{default:H(()=>[w(k).useSearchPageModeOnHomePage&&w(l)?(L(),P("div",kX,[w(k).searchPageShowLogo?(L(),_e(y,{key:0,size:180,color:w(k).searchPageLogoColor==="white"?"white":"var(--bew-theme-color)",glow:w(k).searchPageLogoGlow,m:"t--70px b-12","z-1":""},null,8,["color","glow"])):X("",!0),F(E,{"darken-on-focus":w(k).searchPageDarkenOnSearchFocus,"blurred-on-focus":w(k).searchPageBlurredOnSearchFocus,"focused-character":w(k).searchPageSearchBarFocusCharacter},null,8,["darken-on-focus","blurred-on-focus","focused-character"])])):X("",!0)]),_:1}),x("header",{pos:"sticky top-[calc(var(--bew-top-bar-height)+10px)]","w-full":"","z-9":"",m:"b-4","duration-300":"","ease-in-out":"",flex:"~ justify-between items-start gap-4",class:Ie({hide:w(u)})},[!w(k).alwaysShowTabsOnHomePage&&w(d).length===1?X("",!0):(L(),P("section",CX,[x("div",LX,[x("div",IX,[(L(!0),P(Te,null,Ne(w(d),S=>(L(),P("button",{key:S.page,class:Ie({"tab-activated":w(o)===S.page}),"px-3":"","h-inherit":"",bg:"transparent hover:$bew-fill-2",text:"$bew-text-2 hover:$bew-text-1","fw-bold":"","rounded-full":"","cursor-pointer":"","duration-300":"",flex:"~ gap-2 items-center shrink-0",relative:"",onClick:A=>g(S)},[x("span",PX,G(b.$t(S.i18nKey)),1),F(nt,{name:"fade"},{default:H(()=>[Bt(x("div",DX,null,512),[[ii,w(o)===S.page&&w(c)]])]),_:2},1024)],10,RX))),128))])])])),w(k).enableGridLayoutSwitcher?(L(),P("div",OX,[(L(!0),P(Te,null,Ne(w(p),S=>(L(),P("div",{key:S.value,class:Ie({"grid-layout-item-activated":w(Df).home===S.value}),flex:"~ justify-center items-center","h-full":"","aspect-square":"",text:"$bew-text-2 hover:$bew-text-1","rounded-full":"",bg:"hover:$bew-fill-2","duration-300":"","cursor-pointer":"",onClick:A=>w(Df).home=S.value},[x("div",{class:Ie(w(Df).home===S.value?S.iconActivated:S.icon),"text-base":""},null,2)],10,MX))),128))])):X("",!0)],2),F(nt,{name:"page-fade"},{default:H(()=>[(L(),_e(Hu,{max:3},[(L(),_e(wr(w(a)[w(o)]),{key:w(o),ref_key:"tabPageRef",ref:f,"grid-layout":w(Df).home,"top-bar-visibility":w(h),onBeforeLoading:_[0]||(_[0]=S=>v(!0)),onAfterLoading:_[1]||(_[1]=S=>v(!1))},null,40,["grid-layout","top-bar-visibility"]))],1024))]),_:1})])])}}}),[["__scopeId","data-v-85e8baf5"]])},Symbol.toStringTag,{value:"Module"})),FX={flex:"~ col","justify-center":"","items-center":"","w-full":"","z-10":"",m:"t-20vh"},BX=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Search",setup(t){const e=z(""),i=An(),{searchKeyword:n,isLogin:s}=Va(i);ki(()=>{n.value=""});function r(a){const l=a.trim();if(!l)return;if(!s.value){const d=encodeURIComponent(l);window.location.href=`https://search.bilibili.com/all?keyword=${d}`;return}const u=new URLSearchParams(window.location.search);u.set("page","SearchResults"),u.set("keyword",l),u.delete("category"),u.delete("pn"),u.delete("user_order"),u.delete("user_type"),u.delete("search_type"),u.delete("live_room_order"),u.delete("live_user_order");const c=`${window.location.pathname}?${u.toString()}`;window.history.pushState({},"",c),e.value=l,n.value=l,window.dispatchEvent(new Event("pushstate"))}function o(a){k.value.usePluginSearchResultsPage&&r(a)}return(a,l)=>{const u=Ge("Logo"),c=Ge("SearchBar");return L(),P("div",FX,[w(k).searchPageShowLogo?(L(),_e(u,{key:0,size:180,color:w(k).searchPageLogoColor==="white"?"white":"var(--bew-theme-color)",glow:w(k).searchPageLogoGlow,"mb-12":"","z-1":""},null,8,["color","glow"])):X("",!0),F(c,{modelValue:e.value,"onUpdate:modelValue":l[0]||(l[0]=d=>e.value=d),"darken-on-focus":w(k).searchPageDarkenOnSearchFocus,"blurred-on-focus":w(k).searchPageBlurredOnSearchFocus,"focused-character":w(k).searchPageSearchBarFocusCharacter,"show-hot-search":w(k).showHotSearchInTopBar,"search-behavior":w(k).usePluginSearchResultsPage?"stay":"navigate",onSearch:o},null,8,["modelValue","darken-on-focus","blurred-on-focus","focused-character","show-hot-search","search-behavior"])])}}})},Symbol.toStringTag,{value:"Module"})),NX={class:"search-categories","mb-4":""},UX={flex:"","items-center":"","gap-2":"","flex-wrap":""},VX=["onClick"],jX={"text-base":"","font-medium":""},HX={key:0,text:"sm $bew-text-3","ml-1":""},zX=qe(Me({__name:"SearchCategoryTabs",props:{categories:{},currentCategory:{},categoryCounts:{}},emits:["select"],setup(t,{emit:e}){const i=t,n=e;function s(o){n("select",o)}function r(o){return o?o>99?"99+":o>=1e4?`${(o/1e4).toFixed(1)}`:`${o}`:""}return(o,a)=>(L(),P("div",NX,[x("div",UX,[(L(!0),P(Te,null,Ne(i.categories,l=>(L(),P("button",{key:l.value,class:Ie(["category-tab",{active:i.currentCategory===l.value}]),flex:"","items-center":"","gap-1.5":"","px-4":"","py-2":"",rounded:"$bew-radius-half","transition-all":"","duration-200":"","hover:bg":"$bew-fill-1",type:"button",onClick:u=>s(l.value)},[x("div",{class:Ie(l.icon),"text-base":""},null,2),x("span",jX,G(l.label),1),l.value!=="all"&&i.categoryCounts[l.value]>0?(L(),P("span",HX," ("+G(r(i.categoryCounts[l.value]))+") ",1)):X("",!0)],10,VX))),128))])]))}}),[["__scopeId","data-v-39258f1f"]]),GX={class:"search-live-filters","mb-4":""},WX={flex:"","items-center":"","gap-2":"","flex-wrap":""},KX=["onClick"],YX={"text-sm":"","font-medium":""},XX=qe(Me({__name:"SearchLiveFilters",props:{subCategory:{}},emits:["update:subCategory"],setup(t,{emit:e}){const i=t,n=e,s=[{value:"all",label:""},{value:"live_room",label:""},{value:"live_user",label:""}];function r(o){n("update:subCategory",o)}return(o,a)=>(L(),P("div",GX,[x("div",WX,[(L(),P(Te,null,Ne(s,l=>x("button",{key:l.value,class:Ie(["sub-category-tab",{active:i.subCategory===l.value}]),"px-4":"","py-2":"",rounded:"$bew-radius-half","transition-all":"","duration-200":"","hover:bg":"$bew-fill-1",type:"button",onClick:u=>r(l.value)},[x("span",YX,G(l.label),1)],10,KX)),64))])]))}}),[["__scopeId","data-v-1bb21bc2"]]),qX={key:0,class:"pagination"},ZX=["disabled"],QX={key:0,class:"i-tabler:loader-2 animate-spin"},JX={key:1,class:"i-tabler:chevron-left"},eq={key:0,class:"pagination-ellipsis"},tq=["disabled","onClick"],iq={key:0,class:"i-tabler:loader-2 animate-spin"},nq={key:1},sq=["disabled"],rq={key:0,class:"i-tabler:loader-2 animate-spin"},oq={key:1,class:"i-tabler:chevron-right"},Qa=qe(Me({__name:"Pagination",props:{currentPage:{},totalPages:{},disabled:{type:Boolean},loading:{type:Boolean}},emits:["change"],setup(t,{emit:e}){const i=t,n=e,s=ge(()=>{const{currentPage:l,totalPages:u}=i,c=7,d=[];if(u<=c)for(let f=1;f<=u;f++)d.push(f);else{d.push(1);let f=Math.max(2,l-2),h=Math.min(u-1,l+2);l<=4&&(f=2,h=5),l>=u-3&&(f=u-4,h=u-1),f>2&&d.push("ellipsis");for(let p=f;p<=h;p++)d.push(p);h<u-1&&d.push("ellipsis"),d.push(u)}return d});function r(l){i.disabled||i.loading||l===i.currentPage||l<1||l>i.totalPages||n("change",l)}function o(){i.currentPage>1&&r(i.currentPage-1)}function a(){i.currentPage<i.totalPages&&r(i.currentPage+1)}return(l,u)=>l.totalPages>1?(L(),P("div",qX,[x("button",{class:"pagination-btn",disabled:l.disabled||l.loading||l.currentPage===1,onClick:o},[l.loading?(L(),P("div",QX)):(L(),P("div",JX))],8,ZX),(L(!0),P(Te,null,Ne(s.value,(c,d)=>(L(),P(Te,{key:d},[c==="ellipsis"?(L(),P("span",eq," ... ")):(L(),P("button",{key:1,class:Ie(["pagination-btn",{active:c===l.currentPage,loading:l.loading&&c===l.currentPage}]),disabled:l.disabled||l.loading,onClick:f=>r(c)},[l.loading&&c===l.currentPage?(L(),P("div",iq)):(L(),P("span",nq,G(c),1))],10,tq))],64))),128)),x("button",{class:"pagination-btn",disabled:l.disabled||l.loading||l.currentPage===l.totalPages,onClick:a},[l.loading?(L(),P("div",rq)):(L(),P("div",oq))],8,sq)])):X("",!0)}}),[["__scopeId","data-v-264e6b37"]]),aq=["href"],lq={class:"card-content"},uq={class:"header-container"},cq={text:"base","font-bold":"",class:"season-title keep-one-line"},dq={text:"xs",class:"match-info"},fq={class:"game-stage-inline"},hq={key:0,class:"match-time"},pq={class:"teams-container"},mq={class:"team"},gq=["src","alt"],vq={text:"sm",class:"team-name keep-one-line"},_q={class:"score-container"},bq={key:0,class:"vs-text"},yq={class:"score"},wq={class:"score"},Eq={class:"team"},Sq=["src","alt"],xq={text:"sm",class:"team-name keep-one-line"},Tq=qe(Me({__name:"EsportsMatchCard",props:{contest:{},cardWidth:{}},setup(t){const e=t,i=ge(()=>e.contest.playback||e.contest.jumpURL||""),n=ge(()=>({width:e.cardWidth||"250px",minWidth:e.cardWidth||"250px"})),s=ge(()=>e.contest.contestStatus===3),r=ge(()=>e.contest.contestStatus===1),o=ge(()=>{if(!e.contest.stime)return"";const u=new Date(e.contest.stime*1e3),c=String(u.getMonth()+1).padStart(2,"0"),d=String(u.getDate()).padStart(2,"0"),f=String(u.getHours()).padStart(2,"0"),h=String(u.getMinutes()).padStart(2,"0");return`${c}-${d} ${f}:${h}`}),a=ge(()=>e.contest.homeScore!==void 0&&e.contest.homeScore!==null?e.contest.homeScore:r.value?null:0),l=ge(()=>e.contest.awayScore!==void 0&&e.contest.awayScore!==null?e.contest.awayScore:r.value?null:0);return(u,c)=>(L(),P("a",{href:i.value,target:"_blank",class:"esports-match-card",style:Ue(n.value),rounded:"$bew-radius",block:"",cursor:"pointer","duration-300":"",onClick:c[0]||(c[0]=ft(()=>{},["stop"]))},[x("div",lq,[x("div",uq,[x("div",cq,G(u.contest.season.title),1),x("div",{text:"sm",class:Ie(["status-badge",{finished:s.value,live:!r.value&&!s.value,upcoming:r.value}])},[s.value?(L(),P(Te,{key:0},[He("")],64)):r.value?(L(),P(Te,{key:1},[He("")],64)):(L(),P(Te,{key:2},[He("")],64))],2)]),x("div",dq,[x("span",fq,G(u.contest.gameStage),1),r.value?(L(),P("span",hq,G(o.value),1)):X("",!0)]),x("div",pq,[x("div",mq,[x("img",{src:u.contest.homeTeam.logoFull,alt:u.contest.homeTeam.title,class:"team-logo"},null,8,gq),x("div",vq,G(u.contest.homeTeam.title),1)]),x("div",_q,[r.value?(L(),P("span",bq,"VS")):(L(),P(Te,{key:1},[x("span",yq,G(a.value),1),c[1]||(c[1]=x("span",{class:"score-divider"},":",-1)),x("span",wq,G(l.value),1)],64))]),x("div",Eq,[x("img",{src:u.contest.awayTeam.logoFull,alt:u.contest.awayTeam.title,class:"team-logo"},null,8,Sq),x("div",xq,G(u.contest.awayTeam.title),1)])])])],12,aq))}}),[["__scopeId","data-v-9c814d1d"]]);function Ja(t,e={}){const{cooldownMs:i=800,retryDelayMs:n=120,maxAutoFillAttempts:s=2}=e,r=z(0),o=z(!0),a=z(!1),l=z({pending:!1,lastTriggered:0,lastAppended:0,autoFillAttempts:0});let u;function c(){u!==void 0&&(clearTimeout(u),u=void 0)}function d(b){c();const _=Math.max(b,0);l.value.pending=!0,u=window.setTimeout(()=>{u=void 0,f()},_)}async function f(){if(!o.value||a.value){l.value.pending=!1,l.value.autoFillAttempts=0;return}l.value.pending=!1,l.value.lastTriggered=Date.now(),l.value.autoFillAttempts=0;const b=await t();b.success&&(r.value+=1,l.value.lastAppended=b.itemsCount,b.itemsCount===0&&(a.value=!0))}function h(){if(!o.value||a.value)return;const _=Date.now()-l.value.lastTriggered;if(_<i){if(!l.value.pending){const y=i-_;d(y)}return}f()}async function p(b){await Aq();const y=Date.now()-l.value.lastTriggered,E=Math.max(i-y,0);if(l.value.pending&&o.value){d(Math.max(E,n));return}if(!o.value){l.value.autoFillAttempts=0;return}if(l.value.lastAppended<=0){l.value.autoFillAttempts=0;return}if(l.value.autoFillAttempts>=s){l.value.autoFillAttempts=0;return}if(await b()){l.value.autoFillAttempts=0;return}l.value.autoFillAttempts+=1,d(Math.max(E,n))}function m(){r.value=0,o.value=!0,a.value=!1,l.value={pending:!1,lastTriggered:0,lastAppended:0,autoFillAttempts:0},c()}function g(b){o.value=b}function v(b){a.value=b}return{page:r,hasMore:o,exhausted:a,requestLoadMore:h,handleLoadMoreCompletion:p,reset:m,setHasMore:g,setExhausted:v}}async function Aq(){await ot(),typeof window<"u"&&typeof window.requestAnimationFrame=="function"&&await new Promise(t=>window.requestAnimationFrame(()=>t()))}const kq=30;function el(){const t=z(0),e=z(0),i=z(0),n=z("");function s(u,c=0){const d=[u?.numResults,u?.num_results,u?.pageinfo?.total,u?.page_info?.total,u?.total].map(Number).find(g=>Number.isFinite(g)&&g>=0);e.value=d??c;const h=[u?.page_size,u?.pagesize,u?.pageinfo?.per_page,u?.pageinfo?.page_size,u?.page_info?.page_size,u?.page_info?.per_page].map(Number).find(g=>Number.isFinite(g)&&g>0)||kq,p=[u?.numPages,u?.num_pages,u?.pageinfo?.total_page,u?.pageinfo?.num_page,u?.pageinfo?.numPages,u?.pageinfo?.pages,u?.page_info?.total_page,u?.page_info?.num_page].map(Number).find(g=>Number.isFinite(g)&&g>0);p?i.value=p:e.value>0&&h>0?i.value=Math.ceil(e.value/h):e.value===0?i.value=c>0?1:0:i.value=1;const m=[u?.pageinfo?.context,u?.pageinfo?.next?.context,u?.page_info?.context,u?.page_info?.next?.context,u?.context].find(g=>typeof g=="string"&&g.length>0);n.value=typeof m=="string"?m:""}function r(u){t.value=u}function o(u){return u?t.value+1:1}const a=ge(()=>i.value>0?t.value<i.value:!!n.value);function l(){t.value=0,e.value=0,i.value=0,n.value=""}return{currentPage:t,totalResults:e,totalPages:i,context:n,hasMore:a,extractPagination:s,updatePage:r,getNextPage:o,reset:l}}function tl(t){const e=z(!1),i=z(""),n=z(null),s=z(0),r=z(0),o=z(""),a=z(null);let l=null;async function u(d,f,h={}){if(!d.trim())return n.value=null,!1;e.value=!0,i.value="";const p=Symbol("search-request");l=p;try{const m=await f({keyword:d,...h});return l!==p?!1:!m||m.code!==0?(i.value="",!1):(a.value=m,!0)}catch(m){return console.error(`Search error for ${t}:`,m),i.value="",!1}finally{l===p&&(e.value=!1)}}function c(){n.value=null,s.value=0,r.value=0,o.value="",i.value="",a.value=null,l=null}return{isLoading:e,error:i,results:n,totalResults:s,totalPages:r,context:o,lastResponse:a,search:u,reset:c}}function y2(){const t=z({});async function e(r){if(r.length===0)return;const o=[];for(let a=0;a<r.length;a+=40)o.push(r.slice(a,a+40));for(const a of o)try{const l=await ze.user.getRelations({fids:a.join(",")});l.code===0&&l.data&&Object.keys(l.data).forEach(u=>{const c=Number(u),d=l.data[u],f=d.attribute===2||d.attribute===6;t.value[c]={isFollowing:f,isLoading:!1}})}catch(l){console.error(":",l)}}function i(r,o){t.value[r]?t.value[r].isFollowing=o:t.value[r]={isFollowing:o,isLoading:!1}}function n(r,o){t.value[r]?t.value[r].isLoading=o:t.value[r]={isFollowing:!1,isLoading:o}}function s(){t.value={}}return{userRelations:t,batchQueryUserRelations:e,updateUserRelation:i,setUserRelationLoading:n,reset:s}}function Cq(t){if(!t||typeof t!="string")return t||"";const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x27;":"'","&apos;":"'","&nbsp;":" "};return t.replace(/&(?:#x?[0-9a-f]+|[a-z]+);/gi,i=>{if(i.startsWith("&#")){const n=i[2]==="x"||i[2]==="X",s=Number.parseInt(i.slice(n?3:2,-1),n?16:10);return Number.isNaN(s)?i:String.fromCharCode(s)}return e[i.toLowerCase()]||i})}function jw(t){return t?t>=1e4?`${(t/1e4).toFixed(1)}`:t.toString():"0"}function gt(t){if(typeof t!="string"||!t)return"";const e=t.replace(/<em class="keyword">/g,"").replace(/<\/em>/g,"");return Cq(e)}function w2(t){if(!t)return!1;const e=t.type||"";return typeof e=="string"&&e.toLowerCase().includes("ad")}function Lq(t){return t.split(/[\s,/|#;]+/g).filter(Boolean)}function Iq(t){const e=Math.max(0,Math.round(t)),i=Math.floor(e/60),n=e%60;if(i>=60){const s=Math.floor(i/60),r=i%60;return`${s}:${`${r}`.padStart(2,"0")}:${`${n}`.padStart(2,"0")}`}return`${i}:${`${n}`.padStart(2,"0")}`}function E2(t){const e=t.pic||t.cover,i=typeof e=="string"&&e.startsWith("//")?`https:${e}`:e,n=d0(t.duration)??d0(t.duration_seconds)??d0(t.duration_ms?Number(t.duration_ms)/1e3:void 0),s=typeof t.duration=="string"?t.duration:typeof t.durationStr=="string"?t.durationStr:n?Iq(n):void 0;let r;t.type==="ketang"&&t.episode_count_text?r=[t.episode_count_text]:r=Vq(t);const o=t.type==="ketang"?void 0:gt(t.typename||"").trim();let a;if(t.type==="ketang"){const u=typeof t.author=="string"?t.author:t.author?.name||t.author?.uname||"";a={name:gt(u),mid:t.mid,authorFace:"__ketang_icon__"}}else if(typeof t.author=="object"&&t.author!==null&&!Array.isArray(t.author))if("authorFace"in t.author||"face"in t.author)a={name:gt(t.author.name||t.author.uname||""),mid:t.author.mid,authorFace:t.author.authorFace||t.author.face||""};else{const u=t.author.name||t.author.uname||t.owner?.name||"";a={name:gt(u),mid:t.mid||t.owner?.mid||t.author.mid,authorFace:t.upic||t.uface||t.owner?.face||""}}else{const u=typeof t.author=="string"?t.author:t.owner?.name||"";a={name:gt(u),mid:t.mid||t.owner?.mid,authorFace:t.upic||t.uface||t.owner?.face||""}}const l=t.type==="ketang"&&t.arcurl?t.arcurl:void 0;return{id:t.aid||t.id,duration:n,durationStr:s,title:gt(t.title||""),cover:i||"",author:a,view:t.play||t.stat?.view,danmaku:t.danmaku||t.video_review||t.stat?.danmaku,publishedTimestamp:t.pubdate,bvid:t.bvid,aid:t.aid,cid:t.cid,threePointV2:[],tag:r.length?r:void 0,capsuleText:o||void 0,type:t.type==="ketang"?"ketang":void 0,url:l}}function Rq(t){const e=t.cover||t.square_cover||t.vertical_cover||t.horizontal_cover,i=typeof e=="string"&&e.startsWith("//")?`https:${e}`:e,n=t.url||(t.season_id?`https://www.bilibili.com/bangumi/play/ss${t.season_id}`:void 0)||(t.media_id?`https://www.bilibili.com/bangumi/media/md${t.media_id}`:void 0)||"",s=Array.isArray(t.styles)?t.styles:Array.isArray(t.style)?t.style:[],r=typeof t.evaluate=="string"?gt(t.evaluate):"",o=typeof t.desc=="string"?gt(t.desc):"",a=s.map(l=>typeof l=="string"?gt(l):typeof l?.style_name=="string"?gt(l.style_name):typeof l?.name=="string"?gt(l.name):null).filter(Boolean);return{url:n,cover:i,title:gt(t.title),desc:Yw(r||o),evaluate:r,tags:a,capsuleText:gt(t.badge||t.badge_info?.text||t.season_type_name||""),view:t.play||t.stat?.view,follow:t.follow,badge:t.badge||t.badge_info?.text?{text:gt(t.badge||t.badge_info?.text),bgColor:t.badge_info?.bg_color||"#FB7299",bgColorDark:t.badge_info?.bg_color_night||"#FB7299"}:void 0}}function Hw(t){const e=t.season_id||t.media_id||t.id,i=Rq(t),n=Number(t.media_score?.score??t.score),s=Array.isArray(t.styles)?t.styles.map(c=>typeof c=="string"?gt(c):c?.style_name??c?.name).filter(Boolean):[],r=Number(t.pubtime||t.publish_time||t.ctime),o=jq(r),a=typeof i.desc=="string"?i.desc.slice(0,140):"",l=Mq(t),u=Hq(t,l);return{id:e,...i,url:i.url,score:Number.isFinite(n)?n:void 0,seasonType:gt(t.season_type_name||t.season_title||""),areas:Array.isArray(t.areas)?t.areas.map(c=>gt(typeof c=="string"?c:c?.name)).filter(Boolean).join(" / "):"",publishDate:r,publishDateFormatted:o,episodeCount:u,tags:s.filter(Boolean).slice(0,4),buttonText:gt(t.button_text||""),desc:Yw(a||i.desc||""),episodes:l}}function S2(t){const e=t.official_verify?.desc||t.verify_info||"",i=t.mid||t.uid,n=t.upic||t.face||t.uface||"";return{mid:i,name:gt(t.uname),face:n,sign:gt(t.usign||t.sign),fans:t.fans||t.attentions,videos:t.videos,level:t.level,gender:t.gender,isVerified:!!(t.official_verify?.type===0||t.is_verify),verifyInfo:gt(e),samples:Kw(t,7),isFollowed:t.is_follow||0,showFollowButton:!0,liveStatus:t.live_status,roomid:t.roomid||t.room_id}}function Pq(t){const e=S2(t);return{...e,face:e.face,name:e.name,fans:t.fans,videos:t.videos,desc:gt(t.usign||t.sign||""),level:t.level,gender:t.gender,officialVerify:gt(t.official_verify?.title||t.official_verify?.desc||""),url:`https://space.bilibili.com/${t.mid}`,samples:Kw(t,7)}}function zw(t){const e=Array.isArray(t.image_urls)&&t.image_urls[0]||t.pic||t.cover,i=Array.isArray(t.tags)?t.tags.map(n=>typeof n=="string"?{name:gt(n)}:typeof n?.name=="string"?{name:gt(n.name)}:typeof n?.tag_name=="string"?{name:gt(n.tag_name)}:null).filter(Boolean):void 0;return{id:t.id,title:gt(t.title),desc:gt(t.desc),cover:e,author:gt(t.author_name),authorMid:t.mid,view:t.view,like:t.like,reply:t.reply,publishTime:t.pub_time||t.publish_time||t.ctime,categoryName:gt(t.category_name),tags:i}}function Gw(t){const e=t.cover||t.square_cover||t.vertical_cover||t.horizontal_cover,i=t.url||t.goto_url||(t.season_id?`https://www.bilibili.com/bangumi/play/ss${t.season_id}`:void 0)||(t.media_id?`https://www.bilibili.com/bangumi/media/md${t.media_id}`:void 0)||"",n=Array.isArray(t.badges)&&t.badges.length>0?gt(t.badges[0].text):gt(t.badge||""),s=typeof t.areas=="string"?t.areas:"",r=typeof t.styles=="string"?t.styles:"",o=typeof t.index_show=="string"?t.index_show:"",a=Array.isArray(t.eps)?t.eps.map(l=>({id:l.id,title:l.title||l.index,url:l.url,cover:l.cover,badge:l.badges?.[0]?.text})):[];return{id:t.season_id||t.media_id||t.id,title:gt(t.title),url:i,cover:e,badge:n,score:typeof t.media_score?.score=="number"?t.media_score.score:void 0,areas:s,styles:r,indexShow:o,desc:gt(t.desc||""),episodes:a}}function Dq(t){const e=typeof t.cover=="string"?t.cover.startsWith("//")?`https:${t.cover}`:t.cover:void 0,i=t.url||t.link||"",n=t.id||t.card_value||t.pos||t.title||t.url;return{id:String(n??`${Date.now()}-${Math.random().toString(36).slice(2,8)}`),title:gt(t.title),desc:gt(t.desc),cover:e,url:i,badge:gt(t.corner)}}function Oq(t){return t.card_type!==2}function c0(t){const e=t.cover||t.user_cover||t.pic,i=typeof e=="string"&&e.startsWith("//")?`https:${e}`:e,n=t.uface||t.face||"",s=typeof n=="string"&&n.startsWith("//")?`https:${n}`:n,r=gt(t.cate_name?.trim()||t.area_name_v2?.trim()||t.area_name?.trim()||"");return{id:t.roomid,title:gt(t.title),cover:i||"",author:{name:gt(t.uname),authorFace:s||"",mid:t.uid},view:Fs(t.online),viewStr:String(t.online||""),tag:r,roomid:t.roomid,liveStatus:t.live_status,threePointV2:[]}}function Ww(t){return t?.type==="media_ft"||t?.result_type==="media_ft"||t?.season_type===4||t?.media_type===2}function Mq(t){const e=[],i=new Set,n=o=>{if(!o)return;const a=o.url||o.link||(o.id?`https://www.bilibili.com/bangumi/play/ep${o.id}`:""),l=gt(o.title||o.index_title||o.long_title||o.name||"");if(!l)return;let u=o.cover||o.pic||o.square_cover;typeof u=="string"&&u.startsWith("//")&&(u=`https:${u}`);const c=o.badge||o.badges?.[0]?.text,d=gt(o.long_title||o.index_title||""),f=String(o.id||o.ep_id||o.cid||l);if(i.has(f))return;i.add(f);const h=$q(o,l);e.push({id:f,title:l,longTitle:d,cover:u,url:a,badge:c,number:h})},s=o=>{o.forEach(a=>{if(a){if(Array.isArray(a)){s(a);return}typeof a=="object"&&(("title"in a||"index_title"in a||"long_title"in a)&&n(a),["episodes","items","data","modules"].forEach(l=>{const u=a[l];Array.isArray(u)&&s(u)}))}})};return[t?.episodes,t?.ep_list,t?.module_info?.episodes,t?.module_info?.modules,t?.modules,t?.season?.episodes].forEach(o=>{Array.isArray(o)&&s(o)}),e.length===0&&Array.isArray(t?.new_ep?.index_show)&&s(t.new_ep.index_show),e}function $q(t,e){const i=[t?.order,t?.episode,t?.index,t?.index_title,t?.title,t?.long_title,t?.episode_index,t?.ep_index,t?.ep_title,e];for(const n of i)if(typeof n=="number"){const s=Number.parseInt(String(n),10);if(Number.isFinite(s)&&s>0)return s}else if(typeof n=="string"){const s=n.match(/(\d+)/);if(s){const r=Number.parseInt(s[1],10);if(Number.isFinite(r)&&r>0)return r}}}function Kw(t,e=6){const i=Array.isArray(t?.res)?t.res:[],n=[];for(let s=0;s<i.length;s+=1){const r=i[s];if(!r)continue;const o=String(r.bvid||r.aid||r.id||r.arcurl||s),a=gt(r.title||r.long_title||` ${s+1}`),l=Fq(r.pic||r.cover),u=Bq(r),c=Nq(r.play),d=Uq(r.duration),f=d?d0(d):void 0;if(n.push({id:o,title:a,cover:l,url:u,duration:f,durationStr:d,play:c,aid:r.aid,bvid:r.bvid}),n.length>=e)break}return n}function Fq(t){if(!(typeof t!="string"||!t))return t.startsWith("//")?`https:${t}`:t}function Bq(t){if(typeof t?.arcurl=="string"&&t.arcurl)return t.arcurl;if(typeof t?.bvid=="string"&&t.bvid)return`https://www.bilibili.com/video/${t.bvid}`;if(typeof t?.aid=="number"&&Number.isFinite(t.aid))return`https://www.bilibili.com/video/av${t.aid}`}function Nq(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=t.trim();if(!e||e==="--")return;if(e.endsWith("")){const n=Number.parseFloat(e.slice(0,-1));return Number.isFinite(n)?Math.round(n*1e4):void 0}const i=Number.parseFloat(e.replace(/,/g,""));if(Number.isFinite(i))return Math.round(i)}}function Uq(t){if(typeof t=="string")return t.trim()||void 0;if(typeof t=="number"&&Number.isFinite(t)){const e=Math.max(0,Math.round(t)),i=Math.floor(e/60),n=e%60;return`${i}:${`${n}`.padStart(2,"0")}`}}function Vq(t){const e=[],i=o=>{typeof o=="string"&&e.push(o)};if(Array.isArray(t.tag)?e.push(...t.tag):i(t.tag),Array.isArray(t.tags))for(const o of t.tags)typeof o=="string"?e.push(o):typeof o?.tag_name=="string"?e.push(o.tag_name):typeof o?.name=="string"&&e.push(o.name);const n=e.flatMap(o=>Lq(o)).map(o=>gt(o).replace(/\s+/g,"")).filter(Boolean),s=[],r=new Set;for(const o of n)if(!(Array.from(o).length>=4)&&!r.has(o)&&(r.add(o),s.push(o),s.length>=3))break;return s}function d0(t){if(t!=null){if(typeof t=="number"&&Number.isFinite(t))return t>0?t:void 0;if(typeof t=="string"){const e=t.split(":").map(s=>Number(s));if(e.some(s=>Number.isNaN(s)))return;let i=0,n=1;for(let s=e.length-1;s>=0;s-=1)i+=e[s]*n,n*=60;return i}}}function Yw(t){if(!t)return"";if(t.includes("[{")||t.includes('{"')){const e=t.indexOf("[{");if(e>-1)return t.slice(0,e).trim()}return t.trim()}function jq(t){if(!t||!Number.isFinite(t)||t<=0)return"";const e=new Date(t*1e3);if(Number.isNaN(e.getTime()))return"";const i=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),s=`${e.getDate()}`.padStart(2,"0");return`${i}-${n}-${s}`}function Hq(t,e){const i=o=>{const a=Number(o);return Number.isFinite(a)&&a>0?a:void 0},n=i(t.total_count??t.total_count_show);if(n)return n;if(Array.isArray(t.eps)){if(t.eps.length>0)return t.eps.length}else{const o=i(t.eps);if(o)return o}const s=Array.isArray(t.module_info?.episodes)?t.module_info.episodes.length:void 0;if(s)return s;if(Array.isArray(t.episodes)&&t.episodes.length>0)return t.episodes.length;const r=t.new_ep?.index_show||t.new_ep?.show||t.index_show;if(typeof r=="string"){const o=r.match(/(\d+)\s*$/);if(o){const a=i(o[1]);if(a)return a}}if(e.length>0)return e.length}function zq(t){const e=typeof t.game_icon=="string"?t.game_icon.startsWith("//")?`https:${t.game_icon}`:t.game_icon:void 0,i=t.game_link||"";return{id:String(t.game_base_id||`${Date.now()}-${Math.random().toString(36).slice(2,8)}`),title:gt(t.game_name||t.game_name_v2),desc:gt(t.summary||t.notice),cover:e,url:i,badge:t.recommend_reason,tags:t.game_tags,rating:t.grade,downloads:t.download_num,platform:t.platform}}function Gq(t){const{timeRange:e,customStartDate:i,customEndDate:n}=t;if(e==="custom"){if(!i&&!n)return{};let o=0,a=Math.floor(Date.now()/1e3);if(i){const l=new Date(i).getTime();Number.isNaN(l)||(o=Math.floor(l/1e3))}if(n){const l=new Date(n).getTime();Number.isNaN(l)||(a=Math.floor(l/1e3)+86399)}return o>0&&a>0&&o>a&&([o,a]=[a,o]),{pubtime_begin_s:o,pubtime_end_s:a}}if(e==="all")return{};const s=Math.floor(Date.now()/1e3);let r=0;switch(e){case"day":r=s-24*3600;break;case"week":r=s-168*3600;break;case"halfyear":r=s-4320*3600;break;default:r=0}return r<=0?{}:{pubtime_begin_s:r,pubtime_end_s:s}}function f0(t){const{loadMore:e,context:i,filters:n}=t,r={pubtime_begin_s:0,pubtime_end_s:0,...Gq(n)};return{search_type:"video",duration:n.duration,order:n.order,category_id:"",context:e?i:"",...r}}function x2(t){return Array.isArray(t)?t.filter(e=>!Wq(e)):[]}function Wq(t){return!t||typeof t!="object"?!1:!!(t.is_ad===!0||t.is_ad_loc===!0||t.cm||t.cm_info||t.cm_mark||t.ad_info||t.ad_extra||t.ad_index||typeof t.card_type=="string"&&t.card_type.toLowerCase().includes("ad")||typeof t.type=="string"&&t.type.toLowerCase().includes("ad"))}function ua(t,e){const i=new Set,n=[];return t.forEach(s=>{const r=e(s);i.has(r)||(i.add(r),n.push(s))}),n}const Kq={key:1,class:"all-results","space-y-6":""},Yq={key:0},Xq={class:"activity-results",grid:"~ cols-1 md:cols-2 lg:cols-3 gap-4"},qq=["href"],Zq={class:"activity-cover"},Qq=["src","alt"],Jq={class:"activity-info"},eZ={class:"activity-title"},tZ={key:0,class:"activity-desc"},iZ={key:1,class:"activity-badge"},nZ={key:2,class:"game-meta",text:"xs $bew-text-3","mt-2":""},sZ={key:0},rZ={key:1},oZ={key:1},aZ={text:"lg $bew-text-1","font-medium":"","mb-3":"","mt-6":""},lZ={key:0,class:"media-ft-highlight-grid"},uZ=["href"],cZ=["src","alt"],dZ={key:0,class:"media-ft-highlight-badge"},fZ={class:"media-ft-highlight-info"},hZ=["innerHTML"],pZ={class:"media-ft-highlight-meta",text:"sm $bew-text-3",flex:"","items-center":"","gap-2":""},mZ={key:0,text:"$bew-theme-color","font-bold":""},gZ={key:1},vZ={key:2},_Z={key:3},bZ={key:0,class:"media-ft-highlight-desc"},yZ={class:"media-ft-highlight-actions",flex:"","items-center":"","gap-3":""},wZ=["href"],EZ={key:1,class:"bangumi-highlight-grid"},SZ=["href"],xZ=["src","alt"],TZ={key:0,class:"bangumi-highlight-badge"},AZ={class:"bangumi-highlight-info"},kZ={class:"bangumi-highlight-title",text:"lg $bew-text-1","font-medium":""},CZ={class:"bangumi-highlight-meta",text:"sm $bew-text-3",flex:"","items-center":"","gap-2":""},LZ={key:0,text:"$bew-theme-color","font-bold":""},IZ={key:1},RZ={key:2},PZ={key:3},DZ={key:0,class:"bangumi-highlight-desc"},OZ={key:1,class:"bangumi-highlight-tags"},MZ={class:"bangumi-highlight-actions",flex:"","items-center":"","gap-3":""},$Z=["href"],FZ={key:3},BZ={class:"esports-grid",flex:"~ wrap gap-4","mb-4":""},NZ=["href"],UZ={key:4},VZ={class:"user-highlight-grid"},jZ={class:"user-highlight-header",flex:"","items-center":"","gap-3":""},HZ=["src","alt","onClick"],zZ={class:"user-highlight-info",flex:"~ col","gap-1":"","flex-1":""},GZ={class:"user-highlight-name",text:"base $bew-text-1","font-medium":"",flex:"","items-center":"","gap-2":""},WZ=["href"],KZ=["innerHTML"],YZ={key:1,class:"gender-icon-badge gender-male"},XZ={key:2,class:"gender-icon-badge gender-female"},qZ={key:3,class:"user-highlight-verify"},ZZ={text:"xs $bew-text-3",flex:"","items-center":"","gap-3":""},QZ={key:0,class:"user-highlight-desc","mt-1":""},JZ=["disabled","onClick"],eQ={key:1,class:"user-highlight-sample-placeholder"},tQ={key:5,class:"article-results",grid:"~ cols-1 md:cols-2 gap-4"},iQ={key:0,text:"lg $bew-text-1","font-medium":"","mb-3":"","mt-6":""},nQ=qe(Me({__name:"AllSearchPage",props:{keyword:{},filters:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{haveScrollbar:o,handleBackToTop:a}=$t(),l=ge(()=>k.value.searchResultsPaginationMode),u=z(!1),{userRelations:c,batchQueryUserRelations:d,updateUserRelation:f}=y2(),{isLoading:h,error:p,results:m,lastResponse:g,search:v,reset:b}=tl("all"),{currentPage:_,totalResults:y,totalPages:E,context:S,hasMore:A,extractPagination:C,updatePage:T,getNextPage:I,reset:D}=el(),{hasMore:R,exhausted:O,requestLoadMore:M,handleLoadMoreCompletion:U,setHasMore:$,setExhausted:B,reset:W}=Ja(async()=>{const ce=await ie(!0),me=Z();return{success:ce,itemsCount:me}}),te=ge(()=>n.filters.order!==""||n.filters.duration!==0||n.filters.timeRange!=="all"||n.filters.customStartDate!==""||n.filters.customEndDate!==""),re=ge(()=>l.value==="pagination"&&_.value>1),q=z(null),le=z(0),be=z(16);rc(q,ce=>{const me=ce[0];le.value=me.contentRect.width});function se(){if(typeof window>"u")return;const ce=Number.parseFloat(getComputedStyle(document.documentElement).fontSize||"16");Number.isFinite(ce)&&(be.value=ce)}const ne=ge(()=>{const ce=le.value,me=250,Q=be.value,Y=5;if(!ce||!Number.isFinite(ce)||ce<=0)return{cardWidth:`${me}px`};const ee=Math.floor((ce+Q)/(me+Q)),we=Math.min(Math.max(ee,1),Y),ke=Q*Math.max(we-1,0),de=ce-ke;return{cardWidth:`${we>0?Math.max(de/we,me):me}px`}}),pe=ge(()=>{const ce=le.value,me=180,Q=be.value;if(!ce||!Number.isFinite(ce)||ce<=0)return 6;const Y=Math.floor((ce+Q)/(me+Q));return Math.max(1,Math.min(Y,7))});function ye(ce){const me=pe.value,Q=ce.slice(0,me),Y=Math.max(0,me-Q.length),ee=Array.from({length:Y},()=>null);return[...Q,...ee]}const xe=ge(()=>{if(!m.value?.result)return[];const ce=[];return m.value.result.forEach(Q=>{if(Q?.result_type==="activity"&&Array.isArray(Q.data)){const Y=Q.data.filter(Oq);ce.push(...Y.map(ee=>({...Dq(ee),_type:"activity"})))}else Q?.result_type==="web_game"&&Array.isArray(Q.data)&&ce.push(...Q.data.map(Y=>({...zq(Y),_type:"web_game"})))}),ce}),Be=[Lc,M1,$1,F1,B1,N1,U1];function Ke(ce){return Be[ce]||Lc}async function Xe(ce){c.value[ce]||(c.value[ce]={isFollowing:!1,isLoading:!1});const me=c.value[ce];if(!me.isLoading)try{me.isLoading=!0;const Q=oi(),Y=me.isFollowing?2:1;(await ze.user.relationModify({fid:String(ce),act:Y,re_src:11,csrf:Q})).code===0&&f(ce,!me.isFollowing)}catch(Q){console.error(":",Q)}finally{me.isLoading=!1}}function Re(ce){ce&&window.open(ce,"_blank","noopener")}function Z(){return m.value?(Array.isArray(m.value?.result)?m.value.result:[]).reduce((me,Q)=>Array.isArray(Q?.data)?me+Q.data.length:me,0):0}const ae=ge(()=>{if(!m.value?.result)return[];const ce=m.value.result.find(me=>me?.result_type==="video");return!ce||!Array.isArray(ce.data)?[]:ce.data.filter(me=>!w2(me))});st(()=>{se(),q.value&&(le.value=q.value.clientWidth),typeof window<"u"&&window.addEventListener("resize",se),n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&T(n.initialPage),ie(!1))}),ki(()=>{typeof window<"u"&&window.removeEventListener("resize",se)}),Pe(()=>n.keyword,async(ce,me)=>{const Q=(ce||"").trim(),Y=(me||"").trim();if(!Q){oe();return}Q!==Y&&(oe(),await ie(!1))}),Pe(()=>n.filters,()=>{n.keyword.trim()&&(oe(),ie(!1))},{deep:!0});async function ie(ce){const me=n.keyword.trim();if(!me)return!1;const Q=l.value==="scroll"&&ce;if(Q&&(h.value||O.value))return!1;Q||B(!1);const Y=Q?I(!0):_.value>0?_.value:I(!1),ee=Z();let we=!1;const ke=te.value;if(ke?we=await v(me,Ee=>ze.search.searchVideo(Ee),{page:Y,page_size:30,...f0({loadMore:Q,context:S.value,filters:n.filters})}):we=await v(me,Ee=>ze.search.searchAll(Ee),{page:Y,page_size:30,context:Y>1?S.value:"",web_roll_page:Y}),!we||!g.value?.data)return!1;const de=g.value.data;let N=de;if(ke){const Ee=Array.isArray(de?.result)?de.result:[];N={...de,result:[{result_type:"video",data:Ee}]}}const J=Array.isArray(N?.result)?N.result:[];if(Q&&m.value?m.value=ue(m.value,N):m.value=N,Array.isArray(m.value?.result)){const Ee=m.value.result.find(Ae=>Ae?.result_type==="bili_user");if(Ee&&Array.isArray(Ee.data)){const Ae=Ee.data.map(De=>De.mid).filter(Boolean);await d(Ae)}}const fe=J.reduce((Ee,Ae)=>Array.isArray(Ae?.data)?Ee+Ae.data.length:Ee,0);if(C(de,fe),T(Y),$(A.value),l.value==="scroll"){const Ee=Z(),Ae=Math.max(Ee-ee,0);(J.reduce((Ve,tt)=>Array.isArray(tt?.data)?Ve+tt.data.length:Ve,0)===0||Ae<=0&&Y>=E.value)&&B(!0),Q&&await U(o)}return!0}function ue(ce,me){const Q=Array.isArray(ce?.result)?ce.result:[],Y=Array.isArray(me?.result)?me.result:[],ee=new Map;Q.forEach(ke=>{const de=Array.isArray(ke?.data)?ve(ke.result_type,[...ke.data]):ke.data;ee.set(ke.result_type,{...ke,data:de})}),Y.forEach(ke=>{const de=Array.isArray(ke?.data)?[...ke.data]:[];if(ee.has(ke.result_type)){const N=ee.get(ke.result_type),J=Array.isArray(N?.data)?[...N.data,...de]:de;ee.set(ke.result_type,{...N,...ke,data:ve(ke.result_type,J)})}else ee.set(ke.result_type,{...ke,data:ve(ke.result_type,de)})});const we=Array.from(ee.values()).map(ke=>ke?.result_type==="video"&&Array.isArray(ke.data)?{...ke,data:x2(ke.data)}:ke);return{...ce,...me,result:we}}function ve(ce,me){const Q=new Set,Y=[];return me.forEach(ee=>{const we=j(ce,ee);Q.has(we)||(Q.add(we),Y.push(ee))}),Y}function j(ce,me){switch(ce){case"video":return String(me?.aid??me?.id??me?.bvid??JSON.stringify(me));case"media_bangumi":case"media_ft":return String(me?.season_id??me?.media_id??me?.id??JSON.stringify(me));case"bili_user":return String(me?.mid??JSON.stringify(me));case"article":return String(me?.id??JSON.stringify(me));case"live_room":return String(me?.roomid??me?.id??JSON.stringify(me));default:return String(me?.id??me?.aid??me?.bvid??me?.mid??JSON.stringify(me))}}async function K(ce){if(l.value!=="pagination")return;const me=n.keyword.trim();if(!me)return;a(),await ot(),u.value=!0;let Q=!1;const Y=te.value;if(Y?Q=await v(me,N=>ze.search.searchVideo(N),{page:ce,page_size:30,...f0({loadMore:!1,context:S.value,filters:n.filters})}):Q=await v(me,N=>ze.search.searchAll(N),{page:ce,page_size:30,context:ce>1?S.value:"",web_roll_page:ce}),!Q||!g.value?.data)return;const ee=g.value.data;let we=ee;if(Y){const N=Array.isArray(ee?.result)?ee.result:[];we={...ee,result:[{result_type:"video",data:N}]}}const ke=Array.isArray(we?.result)?we.result:[];if(m.value=we,Array.isArray(m.value?.result)){const N=m.value.result.find(J=>J?.result_type==="bili_user");if(N&&Array.isArray(N.data)){const J=N.data.map(fe=>fe.mid).filter(Boolean);await d(J)}}const de=ke.reduce((N,J)=>Array.isArray(J?.data)?N+J.data.length:N,0);C(ee,de),T(ce),$(A.value),u.value=!1,s("updatePage",ce)}function oe(){b(),D(),W(),m.value=null}async function he(){l.value==="scroll"&&(h.value||O.value||await ie(!0))}return e({isLoading:h,error:p,results:m,totalResults:y,hasMore:R,requestLoadMore:M,userRelations:c,updateUserRelation:f,currentPage:_,totalPages:E}),(ce,me)=>(L(),P("div",{ref_key:"searchContentRef",ref:q,class:"all-search-page"},[w(h)&&!w(m)?(L(),_e(Rr,{key:0})):(L(),P("div",Kq,[!re.value&&xe.value.length>0?(L(),P("div",Yq,[me[0]||(me[0]=x("h3",{text:"lg $bew-text-1","font-medium":"","mb-3":"","mt-6":""},"  ",-1)),x("div",Xq,[(L(!0),P(Te,null,Ne(xe.value,Q=>(L(),P("a",{key:Q.id,href:Q.url,target:"_blank",class:"activity-card"},[x("div",Zq,[Q.cover?(L(),P("img",{key:0,src:Q.cover,alt:Q.title},null,8,Qq)):X("",!0)]),x("div",Jq,[x("div",eZ,G(Q.title),1),Q.desc?(L(),P("div",tZ,G(Q.desc),1)):X("",!0),Q.badge?(L(),P("div",iZ,G(Q.badge),1)):X("",!0),Q.tags||Q.platform?(L(),P("div",nZ,[Q.tags?(L(),P("span",sZ,G(Q.tags),1)):X("",!0),Q.platform?(L(),P("span",rZ,"  "+G(Q.platform),1)):X("",!0)])):X("",!0)])],8,qq))),128))])])):X("",!0),(L(!0),P(Te,null,Ne(w(m)?.result,(Q,Y)=>(L(),P(Te,{key:`${Q?.result_type??"unknown"}-${Y}`},[Q?.result_type==="video"?(L(),P(Te,{key:0},[],64)):!re.value&&(Q?.result_type==="media_bangumi"||Q?.result_type==="media_ft")&&Array.isArray(Q.data)&&Q.data.length?(L(),P("div",oZ,[x("h3",aZ,G(Q.result_type==="media_ft"?"":""),1),Q.result_type==="media_ft"?(L(),P("div",lZ,[(L(!0),P(Te,null,Ne(Q.data.slice(0,2),ee=>(L(),P("div",{key:ee.season_id||ee.media_id||ee.id,class:"media-ft-highlight-card"},[x("a",{class:"media-ft-highlight-cover",href:ee.goto_url||ee.url||`https://www.bilibili.com/bangumi/media/md${ee.media_id}`,target:"_blank"},[x("img",{src:ee.cover,alt:w(gt)(ee.title)},null,8,cZ),ee.badges&&ee.badges.length?(L(),P("div",dZ,G(ee.badges[0].text),1)):X("",!0)],8,uZ),x("div",fZ,[x("div",{class:"media-ft-highlight-title",text:"lg $bew-text-1","font-medium":"",innerHTML:ee.title},null,8,hZ),x("div",pZ,[ee.media_score?.score?(L(),P("span",mZ,G(ee.media_score.score.toFixed(1))+"  ",1)):X("",!0),ee.areas?(L(),P("span",gZ,G(ee.areas),1)):X("",!0),ee.styles?(L(),P("span",vZ,G(ee.styles),1)):X("",!0),ee.index_show?(L(),P("span",_Z,G(ee.index_show),1)):X("",!0)]),ee.desc?(L(),P("div",bZ,G(w(gt)(ee.desc)),1)):X("",!0),ee.eps&&ee.eps.length?(L(),_e(uh,{key:1,episodes:ee.eps.map(we=>({id:we.id,title:we.title||we.index,url:we.url,cover:we.cover,badge:we.badges?.[0]?.text})),"fallback-url":ee.goto_url||ee.url},null,8,["episodes","fallback-url"])):X("",!0),x("div",yZ,[x("a",{class:"media-ft-highlight-button",href:ee.goto_url||ee.url||`https://www.bilibili.com/bangumi/media/md${ee.media_id}`,target:"_blank"},"  ",8,wZ)])])]))),128))])):(L(),P("div",EZ,[(L(!0),P(Te,null,Ne(Q.data.slice(0,2).map(w(Hw)),ee=>(L(),P("div",{key:ee.id||ee.title,class:"bangumi-highlight-card"},[x("a",{class:"bangumi-highlight-cover",href:ee.url,target:"_blank"},[x("img",{src:ee.cover,alt:ee.title},null,8,xZ),ee.badge?.text||ee.capsuleText?(L(),P("div",TZ,G(ee.badge?.text||ee.capsuleText),1)):X("",!0)],8,SZ),x("div",AZ,[x("div",kZ,G(ee.title),1),x("div",CZ,[ee.score?(L(),P("span",LZ,G(ee.score?.toFixed(1))+"  ",1)):X("",!0),ee.areas?(L(),P("span",IZ,G(ee.areas),1)):X("",!0),ee.episodeCount?(L(),P("span",RZ," "+G(ee.episodeCount)+" ",1)):X("",!0),ee.publishDateFormatted?(L(),P("span",PZ,""+G(ee.publishDateFormatted),1)):X("",!0)]),ee.desc?(L(),P("div",DZ,G(ee.desc),1)):X("",!0),ee.tags?.length?(L(),P("div",OZ,[(L(!0),P(Te,null,Ne(ee.tags,we=>(L(),P("span",{key:we},G(we),1))),128))])):X("",!0),ee.episodes&&ee.episodes.length||ee.episodeCount?(L(),_e(s1,{key:2,episodes:ee.episodes??[],"total-episodes":ee.episodeCount,"fallback-url":ee.url},null,8,["episodes","total-episodes","fallback-url"])):X("",!0),x("div",MZ,[x("a",{class:"bangumi-highlight-button",href:ee.url,target:"_blank"},G(ee.buttonText||""),9,$Z)])])]))),128))]))])):Q?.result_type==="activity"||Q?.result_type==="web_game"?(L(),P(Te,{key:2},[],64)):!re.value&&Q?.result_type==="esports"&&Array.isArray(Q.data)&&Q.data.length?(L(),P("div",FZ,[me[1]||(me[1]=x("h3",{text:"lg $bew-text-1","font-medium":"","mb-3":"","mt-6":""},"  ",-1)),x("div",BZ,[(L(!0),P(Te,null,Ne(Q.data,ee=>(L(),P(Te,{key:`esports-data-${ee.contest?.[0]?.ID}`},[(L(!0),P(Te,null,Ne(ee.contest?.slice(0,5),we=>(L(),_e(Tq,{key:`contest-${we.ID}`,contest:we,"card-width":ne.value.cardWidth},null,8,["contest","card-width"]))),128))],64))),128))]),x("a",{href:`https://www.bilibili.com/v/game/match/schedule?mid=${Q.data[0]?.contest?.[0]?.mid||0}&time=${Date.now()}`,target:"_blank",class:"more-esports-button"},G(w(r)("search_page.view_all_esports")),9,NZ)])):!re.value&&Q?.result_type==="bili_user"&&Array.isArray(Q.data)&&Q.data.length?(L(),P("div",UZ,[me[4]||(me[4]=x("h3",{text:"lg $bew-text-1","font-medium":"","mb-3":"","mt-6":""},"  ",-1)),x("div",VZ,[(L(!0),P(Te,null,Ne(Q.data.map(w(Pq)),ee=>(L(),P("div",{key:ee.mid,class:"user-highlight-card"},[x("div",jZ,[x("img",{src:ee.face,alt:ee.name,class:"user-highlight-avatar",onClick:we=>Re(ee.url)},null,8,HZ),x("div",zZ,[x("div",GZ,[x("a",{href:ee.url,target:"_blank"},G(ee.name),9,WZ),ee.level!==void 0?(L(),P("div",{key:0,class:"user-level-badge-icon",innerHTML:w(Ul).sanitize(Ke(ee.level))},null,8,KZ)):X("",!0),ee.gender===1?(L(),P("div",YZ,[...me[2]||(me[2]=[x("div",{"i-tabler:gender-male":""},null,-1)])])):ee.gender===2?(L(),P("div",XZ,[...me[3]||(me[3]=[x("div",{"i-tabler:gender-female":""},null,-1)])])):X("",!0),ee.officialVerify?(L(),P("span",qZ,G(ee.officialVerify),1)):X("",!0)]),x("div",ZZ,[x("span",null,""+G(w(jw)(ee.fans||0)),1),x("span",null,""+G(ee.videos||0),1)]),ee.desc?(L(),P("div",QZ,G(ee.desc),1)):X("",!0)]),x("button",{class:Ie(["user-highlight-follow",{followed:w(c)[ee.mid]?.isFollowing}]),disabled:w(c)[ee.mid]?.isLoading,onClick:ft(we=>Xe(ee.mid),["stop"])},G(w(c)[ee.mid]?.isLoading?"...":w(c)[ee.mid]?.isFollowing?"":"+ "),11,JZ)]),ee.samples&&ee.samples.length?(L(),P("div",{key:0,class:"user-highlight-samples",style:Ue({gridTemplateColumns:`repeat(${pe.value}, minmax(0, 1fr))`}),"mt-3":""},[(L(!0),P(Te,null,Ne(ye(ee.samples),(we,ke)=>(L(),P(Te,{key:we?.id||`placeholder-${ke}`},[we?(L(),_e(Z6,{key:0,video:{id:we.aid||0,title:we.title,cover:we.cover,author:{name:ee.name,mid:ee.mid,authorFace:ee.face},duration:we.duration,durationStr:we.durationStr,view:we.play,danmaku:0,publishedTimestamp:0,aid:we.aid,bvid:we.bvid,url:we.url,capsuleText:we.badge,threePointV2:[]},horizontal:!1,"show-preview":!0,"hide-author":!0},null,8,["video"])):(L(),P("div",eQ))],64))),128))],4)):X("",!0)]))),128))])])):!re.value&&Q?.result_type==="article"&&Array.isArray(Q.data)&&Q.data.length?(L(),P("div",tQ,[(L(!0),P(Te,null,Ne(Q.data.map(w(zw)),ee=>(L(),_e(Mm,Sr({key:ee.id},{ref_for:!0},ee),null,16))),128))])):X("",!0)],64))),128)),x("div",null,[ae.value.length>0?(L(),P("h3",iQ,"  ")):X("",!0),F(rs,{items:ae.value,"transform-item":Q=>Q.type==="live_room"?w(c0)(Q):w(E2)(Q),"get-item-key":Q=>Q.aid||Q.id||Q.roomid,"grid-layout":"adaptive",loading:w(h),"no-more-content":!w(R),"show-preview":!0,"show-watcher-later":!0,"empty-description":w(r)("common.no_data"),"enable-row-padding":"",onLoadMore:he},null,8,["items","transform-item","get-item-key","loading","no-more-content","empty-description"])])])),l.value==="pagination"?(L(),_e(Qa,{key:2,"current-page":w(_),"total-pages":w(E),loading:u.value,disabled:w(h),onChange:K},null,8,["current-page","total-pages","loading","disabled"])):X("",!0)],512))}}),[["__scopeId","data-v-19063b92"]]),sQ={class:"article-search-page"},rQ={key:0,class:"error-message"},oQ={key:1,class:"empty-state"},aQ={key:2,class:"article-grid"},lQ=qe(Me({__name:"ArticleSearchPage",props:{keyword:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{haveScrollbar:o,handleBackToTop:a}=$t(),l=ge(()=>k.value.searchResultsPaginationMode),u=z(!1),{isLoading:c,error:d,results:f,lastResponse:h,search:p,reset:m}=tl("article"),{currentPage:g,totalResults:v,totalPages:b,hasMore:_,extractPagination:y,updatePage:E,getNextPage:S,reset:A}=el(),{hasMore:C,exhausted:T,requestLoadMore:I,handleLoadMoreCompletion:D,setHasMore:R,setExhausted:O,reset:M}=Ja(async()=>{const W=await U(!0),te=f.value?.length||0;return{success:W,itemsCount:te}});Pe(()=>n.keyword,async(W,te)=>{const re=(W||"").trim(),q=(te||"").trim();if(!re){B();return}re!==q&&(B(),await U(!1))}),st(()=>{n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&E(n.initialPage),U(!1))});async function U(W){const te=n.keyword.trim();if(!te)return!1;const re=l.value==="scroll"&&W;if(re&&(c.value||T.value))return!1;re||O(!1);const q=re?S(!0):g.value>0?g.value:S(!1),le=f.value?.length||0;if(!await p(te,pe=>ze.search.searchArticle(pe),{page:q,pagesize:30})||!h.value?.data)return!1;const se=h.value.data,ne=Array.isArray(se?.result)?se.result:[];if(re&&f.value){const pe=[...f.value,...ne];f.value=ua(pe,ye=>String(ye?.id??JSON.stringify(ye)))}else f.value=ne;if(y(se,ne.length),E(q),R(_.value),l.value==="scroll"){const pe=f.value.length,ye=Math.max(pe-le,0);(ne.length===0||ye<=0&&q>=b.value)&&O(!0),re&&await D(o)}return!0}async function $(W){if(l.value!=="pagination")return;const te=n.keyword.trim();if(!te||(a(),await ot(),u.value=!0,!await p(te,be=>ze.search.searchArticle(be),{page:W,pagesize:30})||!h.value?.data))return;const q=h.value.data,le=Array.isArray(q?.result)?q.result:[];f.value=le,y(q,le.length),E(W),R(_.value),u.value=!1,s("updatePage",W)}function B(){m(),A(),M(),f.value=[]}return e({isLoading:c,error:d,results:f,totalResults:v,hasMore:C,requestLoadMore:I,currentPage:g,totalPages:b}),(W,te)=>(L(),P("div",sQ,[w(d)?(L(),P("div",rQ,G(w(d)),1)):!w(c)&&(!w(f)||w(f).length===0)?(L(),P("div",oQ,[F(Hn,{description:w(r)("common.no_data")},null,8,["description"])])):(L(),P("div",aQ,[(L(!0),P(Te,null,Ne(w(f),re=>(L(),_e(Mm,Sr({key:re.id},{ref_for:!0},w(zw)(re)),null,16))),128))])),l.value==="scroll"?(L(),P(Te,{key:3},[F(jl,{show:w(c)&&w(f)&&w(f).length>0,"keep-space":!0},null,8,["show"]),!w(c)&&w(f)&&w(f).length>0&&!w(C)?(L(),_e(Hn,{key:0,description:w(r)("common.no_more_content")},null,8,["description"])):X("",!0)],64)):(L(),_e(Qa,{key:4,"current-page":w(g),"total-pages":w(b),loading:u.value,disabled:w(c),onChange:$},null,8,["current-page","total-pages","loading","disabled"]))]))}}),[["__scopeId","data-v-5408aa5b"]]),uQ={class:"bangumi-search-page"},cQ={key:0,class:"error-message"},dQ={key:1,class:"empty-state"},fQ={key:2,class:"bangumi-results","space-y-6":""},hQ={key:0,class:"bangumi-highlight-grid"},pQ=["href"],mQ=["src","alt"],gQ={key:0,class:"bangumi-highlight-badge"},vQ={class:"bangumi-highlight-info"},_Q={class:"bangumi-highlight-title",text:"lg $bew-text-1","font-medium":""},bQ={class:"bangumi-highlight-meta",text:"sm $bew-text-3",flex:"","items-center":"","gap-2":""},yQ={key:0,text:"$bew-theme-color","font-bold":""},wQ={key:1},EQ={key:2},SQ={key:3},xQ={key:0,class:"bangumi-highlight-desc"},TQ={key:1,class:"bangumi-highlight-tags"},AQ={class:"bangumi-highlight-actions",flex:"","items-center":"","gap-3":""},kQ=["href"],CQ={key:1,"space-y-3":""},LQ={class:"bangumi-highlight-grid"},IQ=["href"],RQ=["src","alt"],PQ={key:0,class:"bangumi-highlight-badge"},DQ={class:"bangumi-highlight-info"},OQ={class:"bangumi-highlight-title",text:"lg $bew-text-1","font-medium":""},MQ={class:"bangumi-highlight-meta",text:"sm $bew-text-3",flex:"","items-center":"","gap-2":""},$Q={key:0,text:"$bew-theme-color","font-bold":""},FQ={key:1},BQ={key:2},NQ={key:3},UQ={key:0,class:"bangumi-highlight-desc"},VQ={class:"bangumi-highlight-actions",flex:"","items-center":"","gap-3":""},jQ=["href"],HQ=qe(Me({__name:"BangumiSearchPage",props:{keyword:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{haveScrollbar:o,handleBackToTop:a}=$t(),l=ge(()=>k.value.searchResultsPaginationMode),u=z(!1),{isLoading:c,error:d,results:f,lastResponse:h,search:p,reset:m}=tl("bangumi"),{currentPage:g,totalResults:v,totalPages:b,hasMore:_,extractPagination:y,updatePage:E,getNextPage:S,reset:A}=el(),{hasMore:C,exhausted:T,requestLoadMore:I,handleLoadMoreCompletion:D,setHasMore:R,setExhausted:O,reset:M}=Ja(async()=>{const te=await $(!0),re=f.value?.length||0;return{success:te,itemsCount:re}}),U=ge(()=>{const te=f.value||[];return{bangumi:te.filter(re=>!Ww(re)),movie:te.filter(re=>Ww(re))}});Pe(()=>n.keyword,async(te,re)=>{const q=(te||"").trim(),le=(re||"").trim();if(!q){W();return}q!==le&&(W(),await $(!1))}),st(()=>{n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&E(n.initialPage),$(!1))});async function $(te){const re=n.keyword.trim();if(!re)return!1;const q=l.value==="scroll"&&te;if(q&&(c.value||T.value))return!1;q||O(!1);const le=q?S(!0):g.value>0?g.value:S(!1),be=f.value?.length||0;if(!await p(re,ye=>ze.search.searchBangumi(ye),{page:le,pagesize:30})||!h.value?.data)return!1;const ne=h.value.data,pe=Array.isArray(ne?.result)?ne.result:[];if(q&&f.value){const ye=[...f.value,...pe];f.value=ua(ye,xe=>String(xe?.season_id??xe?.media_id??xe?.id??JSON.stringify(xe)))}else f.value=pe;if(y(ne,pe.length),E(le),R(_.value),l.value==="scroll"){const ye=f.value.length,xe=Math.max(ye-be,0);(pe.length===0||xe<=0&&le>=b.value)&&O(!0),q&&await D(o)}return!0}async function B(te){if(l.value!=="pagination")return;const re=n.keyword.trim();if(!re||(a(),await ot(),u.value=!0,!await p(re,se=>ze.search.searchBangumi(se),{page:te,pagesize:30})||!h.value?.data))return;const le=h.value.data,be=Array.isArray(le?.result)?le.result:[];f.value=be,y(le,be.length),E(te),R(_.value),u.value=!1,s("updatePage",te)}function W(){m(),A(),M(),f.value=[]}return e({isLoading:c,error:d,results:f,totalResults:v,hasMore:C,requestLoadMore:I,currentPage:g,totalPages:b}),(te,re)=>(L(),P("div",uQ,[w(d)?(L(),P("div",cQ,G(w(d)),1)):!w(c)&&(!w(f)||w(f).length===0)?(L(),P("div",dQ,[F(Hn,{description:w(r)("common.no_data")},null,8,["description"])])):(L(),P("div",fQ,[U.value.bangumi.length?(L(),P("div",hQ,[(L(!0),P(Te,null,Ne(U.value.bangumi.map(w(Hw)),q=>(L(),P("div",{key:q.id||q.title,class:"bangumi-highlight-card"},[x("a",{class:"bangumi-highlight-cover",href:q.url,target:"_blank",onClick:re[0]||(re[0]=ft(()=>{},["stop"]))},[x("img",{src:q.cover,alt:q.title},null,8,mQ),q.badge?.text||q.capsuleText?(L(),P("div",gQ,G(q.badge?.text||q.capsuleText),1)):X("",!0)],8,pQ),x("div",vQ,[x("div",_Q,G(q.title),1),x("div",bQ,[q.score?(L(),P("span",yQ,G(q.score?.toFixed(1))+"  ",1)):X("",!0),q.areas?(L(),P("span",wQ,G(q.areas),1)):X("",!0),q.episodeCount?(L(),P("span",EQ,"  "+G(q.episodeCount)+"  ",1)):X("",!0),q.publishDateFormatted?(L(),P("span",SQ," "+G(q.publishDateFormatted),1)):X("",!0)]),q.desc?(L(),P("div",xQ,G(q.desc),1)):X("",!0),q.tags?.length?(L(),P("div",TQ,[(L(!0),P(Te,null,Ne(q.tags,le=>(L(),P("span",{key:le},G(le),1))),128))])):X("",!0),q.episodes&&q.episodes.length||q.episodeCount?(L(),_e(s1,{key:2,episodes:q.episodes??[],"total-episodes":q.episodeCount,"fallback-url":q.url},null,8,["episodes","total-episodes","fallback-url"])):X("",!0),x("div",AQ,[x("a",{class:"bangumi-highlight-button",href:q.url,target:"_blank",onClick:re[1]||(re[1]=ft(()=>{},["stop"]))},G(q.buttonText||""),9,kQ)])])]))),128))])):X("",!0),U.value.movie.length?(L(),P("div",CQ,[re[4]||(re[4]=x("h3",{text:"lg $bew-text-1","font-medium":""},"  ",-1)),x("div",LQ,[(L(!0),P(Te,null,Ne(U.value.movie.map(w(Gw)),q=>(L(),P("div",{key:q.id||q.title,class:"bangumi-highlight-card"},[x("a",{class:"bangumi-highlight-cover",href:q.url,target:"_blank",onClick:re[2]||(re[2]=ft(()=>{},["stop"]))},[x("img",{src:q.cover,alt:q.title},null,8,RQ),q.badge?(L(),P("div",PQ,G(q.badge),1)):X("",!0)],8,IQ),x("div",DQ,[x("div",OQ,G(q.title),1),x("div",MQ,[q.score?(L(),P("span",$Q,G(q.score?.toFixed(1))+"  ",1)):X("",!0),q.areas?(L(),P("span",FQ,G(q.areas),1)):X("",!0),q.styles?(L(),P("span",BQ,G(q.styles),1)):X("",!0),q.indexShow?(L(),P("span",NQ,G(q.indexShow),1)):X("",!0)]),q.desc?(L(),P("div",UQ,G(q.desc),1)):X("",!0),q.episodes&&q.episodes.length?(L(),_e(uh,{key:1,episodes:q.episodes,"fallback-url":q.url},null,8,["episodes","fallback-url"])):X("",!0),x("div",VQ,[x("a",{class:"bangumi-highlight-button",href:q.url,target:"_blank",onClick:re[3]||(re[3]=ft(()=>{},["stop"]))},"  ",8,jQ)])])]))),128))])])):X("",!0)])),l.value==="scroll"?(L(),P(Te,{key:3},[F(jl,{show:w(c)&&w(f)&&w(f).length>0,"keep-space":!0},null,8,["show"]),!w(c)&&w(f)&&w(f).length>0&&!w(C)?(L(),_e(Hn,{key:0,description:w(r)("common.no_more_content")},null,8,["description"])):X("",!0)],64)):(L(),_e(Qa,{key:4,"current-page":w(g),"total-pages":w(b),loading:u.value,disabled:w(c),onChange:B},null,8,["current-page","total-pages","loading","disabled"]))]))}}),[["__scopeId","data-v-1a90cde7"]]),zQ={class:"live-search-page"},GQ={key:0,class:"error-message"},WQ={key:1,class:"live-results","space-y-6":""},KQ={key:0},YQ={flex:"","items-center":"","gap-3":"","mb-3":""},XQ={text:"sm $bew-text-3"},qQ={grid:"~ cols-3 gap-4"},ZQ={key:0,"mt-4":"",flex:"","justify-center":""},QQ={key:1},JQ={key:0,flex:"","items-center":"","gap-3":"","mb-3":""},eJ={text:"sm $bew-text-3"},tJ="adaptive",iJ=qe(Me({__name:"LiveSearchPage",props:{keyword:{},filters:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{haveScrollbar:o,handleBackToTop:a}=$t(),l=ge(()=>k.value.searchResultsPaginationMode),u=z(!1),{userRelations:c,batchQueryUserRelations:d,updateUserRelation:f}=y2(),{isLoading:h,error:p,results:m,lastResponse:g,search:v,reset:b}=tl("live"),{currentPage:_,totalResults:y,totalPages:E,hasMore:S,extractPagination:A,updatePage:C,getNextPage:T,reset:I}=el(),D=z(0),R=z(0),{hasMore:O,exhausted:M,requestLoadMore:U,handleLoadMoreCompletion:$,setHasMore:B,setExhausted:W,reset:te}=Ja(async()=>{const ie=await xe(!0),ue=ye();return{success:ie,itemsCount:ue}}),re=ge(()=>m.value?.result?Array.isArray(m.value.result.live_room)?m.value.result.live_room:[]:[]),q=ge(()=>m.value?.result?Array.isArray(m.value.result.live_user)?m.value.result.live_user:[]:[]),le=ge(()=>re.value.map(ie=>c0(ie))),be=ge(()=>l.value==="pagination"&&_.value>1),se=ge(()=>h.value?!1:n.filters.subCategory==="live_user"?q.value.length===0:n.filters.subCategory==="all"?q.value.length===0&&re.value.length===0:!1);function ne(ie){return jw(ie)}function pe(ie){return ie}function ye(){return re.value.length+q.value.length}Pe(()=>n.keyword,async(ie,ue)=>{const ve=(ie||"").trim(),j=(ue||"").trim();if(!ve){Xe();return}ve!==j&&(Xe(),await xe(!1))}),st(()=>{n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&C(n.initialPage),xe(!1))}),Pe(()=>n.filters,(ie,ue)=>{if(n.keyword.trim()){if(ie.subCategory===ue?.subCategory&&ie.subCategory==="all"&&ie.roomOrder!==ue?.roomOrder){Ke();return}Xe(),xe(!1)}},{deep:!0});async function xe(ie){const ue=n.keyword.trim();if(!ue)return!1;const ve=l.value==="scroll"&&ie;if(ve&&(h.value||M.value))return!1;ve||W(!1);const j=ve?T(!0):_.value>0?_.value:T(!1),K=ye();let oe=!1;if(n.filters.subCategory==="live_room"?oe=await v(ue,ce=>ze.search.searchLiveRoom(ce),{page:j,pagesize:30,order:n.filters.roomOrder}):n.filters.subCategory==="live_user"?oe=await v(ue,ce=>ze.search.searchLiveUser(ce),{page:j,page_size:30,order:n.filters.userOrder}):oe=await v(ue,ce=>ze.search.searchLive(ce),{page:j,pagesize:30,order:n.filters.roomOrder}),!oe||!g.value?.data)return!1;const he=g.value.data;if(n.filters.subCategory==="live_user"){const ce=Array.isArray(he?.result?.live_user)?he.result.live_user:Array.isArray(he?.result)?he.result:[],me=Array.isArray(m.value?.result?.live_user)?m.value.result.live_user:[],Q=ve?ua([...me,...ce],ee=>String(ee?.mid??JSON.stringify(ee))):ce;m.value={result:{live_room:[],live_user:Q}};const Y=Q.map(ee=>ee.mid).filter(Boolean);await d(Y),A(he,ce.length),R.value=y.value}else if(n.filters.subCategory==="live_room"){const ce=Array.isArray(he?.result?.live_room)?he.result.live_room:Array.isArray(he?.result)?he.result:[],me=Array.isArray(m.value?.result?.live_room)?m.value.result.live_room:[],Q=ve?ua([...me,...ce],Y=>String(Y?.roomid??Y?.id??JSON.stringify(Y))):ce;m.value={result:{live_room:Q,live_user:[]}},A(he,ce.length),D.value=y.value}else{const ce=Array.isArray(he?.result?.live_room)?he.result.live_room:[],me=Array.isArray(he?.result?.live_user)?he.result.live_user:[],Q=Array.isArray(m.value?.result?.live_room)?m.value.result.live_room:[],Y=Array.isArray(m.value?.result?.live_user)?m.value.result.live_user:[],ee=ve?ua([...Q,...ce],J=>String(J?.roomid??J?.id??JSON.stringify(J))):ce,we=ve?ua([...Y,...me],J=>String(J?.mid??JSON.stringify(J))):me;m.value={result:{live_room:ee,live_user:we}};const ke=we.map(J=>J.mid).filter(Boolean);await d(ke);const de=Number(he?.pageinfo?.live_room?.total)||Number(he?.pageinfo?.live_room?.numResults)||ce.length||0,N=Number(he?.pageinfo?.live_user?.total)||Number(he?.pageinfo?.live_user?.numResults)||me.length||0;D.value=de,R.value=N,A({total:de,numResults:de,pagesize:he?.pagesize||30,pageinfo:he?.pageinfo?.live_room},ce.length)}if(C(j),B(S.value),l.value==="scroll"){const ce=ye(),me=Math.max(ce-K,0);((n.filters.subCategory==="all"?(Array.isArray(he?.result?.live_room)?he.result.live_room.length:0)+(Array.isArray(he?.result?.live_user)?he.result.live_user.length:0):Array.isArray(he?.result)?he.result.length:0)===0||me<=0&&j>=E.value)&&W(!0),ve&&await $(o)}return!0}async function Be(ie){if(l.value!=="pagination")return;const ue=n.keyword.trim();if(!ue)return;a(),await ot(),u.value=!0;let ve=!1;if(n.filters.subCategory==="live_room"?ve=await v(ue,K=>ze.search.searchLiveRoom(K),{page:ie,pagesize:30,order:n.filters.roomOrder}):n.filters.subCategory==="live_user"?ve=await v(ue,K=>ze.search.searchLiveUser(K),{page:ie,page_size:30,order:n.filters.userOrder}):ve=await v(ue,K=>ze.search.searchLive(K),{page:ie,pagesize:30,order:n.filters.roomOrder}),!ve||!g.value?.data)return;const j=g.value.data;if(n.filters.subCategory==="live_user"){const K=Array.isArray(j?.result?.live_user)?j.result.live_user:Array.isArray(j?.result)?j.result:[];m.value={result:{live_room:[],live_user:K}};const oe=K.map(he=>he.mid).filter(Boolean);await d(oe),A(j,K.length),R.value=y.value}else if(n.filters.subCategory==="live_room"){const K=Array.isArray(j?.result?.live_room)?j.result.live_room:Array.isArray(j?.result)?j.result:[];m.value={result:{live_room:K,live_user:[]}},A(j,K.length),D.value=y.value}else{const K=Array.isArray(j?.result?.live_room)?j.result.live_room:[],oe=Array.isArray(j?.result?.live_user)?j.result.live_user:[];m.value={result:{live_room:K,live_user:oe}};const he=oe.map(Q=>Q.mid).filter(Boolean);await d(he);const ce=Number(j?.pageinfo?.live_room?.total)||Number(j?.pageinfo?.live_room?.numResults)||K.length||0,me=Number(j?.pageinfo?.live_user?.total)||Number(j?.pageinfo?.live_user?.numResults)||oe.length||0;D.value=ce,R.value=me,A({total:ce,numResults:ce,pagesize:j?.pagesize||30,pageinfo:j?.pageinfo?.live_room},K.length)}C(ie),B(S.value),u.value=!1,s("updatePage",ie)}async function Ke(){const ie=n.keyword.trim();if(ie){h.value=!0;try{const ue=await ze.search.searchLive({keyword:ie,page:1,pagesize:30,order:n.filters.roomOrder});if(!ue||ue.code!==0)return;const ve=Array.isArray(ue.data?.result?.live_room)?ue.data.result.live_room:[];m.value?.result&&(m.value={result:{...m.value.result,live_room:ve}});const j=Number(ue.data?.pageinfo?.live_room?.total)||Number(ue.data?.pageinfo?.live_room?.numResults)||ve.length||0;D.value=j}catch(ue){console.error("Refresh live rooms error:",ue)}finally{h.value=!1}}}function Xe(){b(),I(),te(),m.value=null,D.value=0,R.value=0}function Re(ie){f(ie.mid,ie.isFollowing)}function Z(){console.log("Switch to live_user mode")}async function ae(){l.value==="scroll"&&(h.value||M.value||await xe(!0))}return e({isLoading:h,error:p,results:m,liveRoomList:re,liveUserList:q,totalResults:y,liveRoomTotalResults:D,liveUserTotalResults:R,hasMore:O,requestLoadMore:U,userRelations:c,updateUserRelation:f,currentPage:_,totalPages:E}),(ie,ue)=>(L(),P("div",zQ,[w(p)?(L(),P("div",GQ,G(w(p)),1)):(L(),P("div",WQ,[se.value?(L(),_e(Hn,{key:0,description:w(r)("common.no_data")},null,8,["description"])):(L(),P(Te,{key:1},[!be.value&&q.value.length>0&&(ie.filters.subCategory==="all"||ie.filters.subCategory==="live_user")?(L(),P("div",KQ,[x("div",YQ,[ue[1]||(ue[1]=x("h3",{text:"lg $bew-text-1","font-medium":""},"  ",-1)),x("span",XQ," "+G(ne(ie.filters.subCategory==="live_user"?w(y):R.value||q.value.length))+" ",1)]),x("div",qQ,[(L(!0),P(Te,null,Ne(ie.filters.subCategory==="all"?q.value.slice(0,6):q.value,ve=>(L(),_e(V1,Sr({key:ve.mid||ve.uid},{ref_for:!0},{...w(S2)(ve),isFollowed:w(c)[ve.mid||ve.uid]?.isFollowing?1:0},{compact:!0,onFollowStateChanged:ue[0]||(ue[0]=(j,K)=>Re({mid:j,isFollowing:K}))}),null,16))),128))]),ie.filters.subCategory==="all"&&(R.value||0)>6?(L(),P("div",ZQ,[x("button",{class:"view-more-btn","px-6":"","py-2":"",rounded:"$bew-radius-half",bg:"$bew-fill-1 hover:$bew-fill-2",text:"sm $bew-text-1","transition-all":"",onClick:Z},"  ("+G(Math.max((R.value||0)-6,0))+"+) ",1)])):X("",!0)])):X("",!0),ie.filters.subCategory==="all"||ie.filters.subCategory==="live_room"?(L(),P("div",QQ,[re.value.length>0?(L(),P("div",JQ,[ue[2]||(ue[2]=x("h3",{text:"lg $bew-text-1","font-medium":""},"  ",-1)),x("span",eJ," "+G(ne(ie.filters.subCategory==="live_room"?w(y):D.value||re.value.length))+" ",1)])):X("",!0),F(rs,{items:le.value,"grid-layout":tJ,"transform-item":pe,"get-item-key":ve=>ve.id||ve.roomid,loading:w(h),"no-more-content":!w(O),"show-watcher-later":!1,"empty-description":w(r)("common.no_data"),"enable-row-padding":"","show-preview":"",onLoadMore:ae},null,8,["items","get-item-key","loading","no-more-content","empty-description"])])):X("",!0)],64)),l.value==="scroll"&&ie.filters.subCategory==="live_user"?(L(),P(Te,{key:2},[F(jl,{show:w(h)&&q.value.length>0,"keep-space":!0},null,8,["show"]),!w(h)&&q.value.length>0&&!w(O)?(L(),_e(Hn,{key:0,description:w(r)("common.no_more_content")},null,8,["description"])):X("",!0)],64)):X("",!0)])),l.value==="pagination"?(L(),_e(Qa,{key:2,"current-page":w(_),"total-pages":w(E),loading:u.value,disabled:w(h),onChange:Be},null,8,["current-page","total-pages","loading","disabled"])):X("",!0)]))}}),[["__scopeId","data-v-f83cd155"]]),nJ={class:"media-ft-search-page"},sJ={key:0,class:"error-message"},rJ={key:1,class:"empty-state"},oJ={key:2,class:"media-ft-results"},aJ={class:"media-ft-highlight-grid"},lJ=["href"],uJ=["src","alt"],cJ={key:0,class:"media-ft-highlight-badge"},dJ={class:"media-ft-highlight-info"},fJ={class:"media-ft-highlight-title",text:"lg $bew-text-1","font-medium":""},hJ={class:"media-ft-highlight-meta",text:"sm $bew-text-3",flex:"","items-center":"","gap-2":""},pJ={key:0,text:"$bew-theme-color","font-bold":""},mJ={key:1},gJ={key:2},vJ={key:3},_J={key:0,class:"media-ft-highlight-desc"},bJ={class:"media-ft-highlight-actions",flex:"","items-center":"","gap-3":""},yJ=["href"],wJ=qe(Me({__name:"MediaFtSearchPage",props:{keyword:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{haveScrollbar:o,handleBackToTop:a}=$t(),l=ge(()=>k.value.searchResultsPaginationMode),u=z(!1),{isLoading:c,error:d,results:f,lastResponse:h,search:p,reset:m}=tl("media_ft"),{currentPage:g,totalResults:v,totalPages:b,hasMore:_,extractPagination:y,updatePage:E,getNextPage:S,reset:A}=el(),{hasMore:C,exhausted:T,requestLoadMore:I,handleLoadMoreCompletion:D,setHasMore:R,setExhausted:O,reset:M}=Ja(async()=>{const W=await U(!0),te=f.value?.length||0;return{success:W,itemsCount:te}});Pe(()=>n.keyword,async(W,te)=>{const re=(W||"").trim(),q=(te||"").trim();if(!re){B();return}re!==q&&(B(),await U(!1))}),st(()=>{n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&E(n.initialPage),U(!1))});async function U(W){const te=n.keyword.trim();if(!te)return!1;const re=l.value==="scroll"&&W;if(re&&(c.value||T.value))return!1;re||O(!1);const q=re?S(!0):g.value>0?g.value:S(!1),le=f.value?.length||0;if(!await p(te,pe=>ze.search.searchMediaFt(pe),{page:q,pagesize:30})||!h.value?.data)return!1;const se=h.value.data,ne=Array.isArray(se?.result)?se.result:[];if(re&&f.value){const pe=[...f.value,...ne];f.value=ua(pe,ye=>String(ye?.season_id??ye?.media_id??ye?.id??JSON.stringify(ye)))}else f.value=ne;if(y(se,ne.length),E(q),R(_.value),l.value==="scroll"){const pe=f.value.length,ye=Math.max(pe-le,0);(ne.length===0||ye<=0&&q>=b.value)&&O(!0),re&&await D(o)}return!0}async function $(W){if(l.value!=="pagination")return;const te=n.keyword.trim();if(!te||(a(),await ot(),u.value=!0,!await p(te,be=>ze.search.searchMediaFt(be),{page:W,pagesize:30})||!h.value?.data))return;const q=h.value.data,le=Array.isArray(q?.result)?q.result:[];f.value=le,y(q,le.length),E(W),R(_.value),u.value=!1,s("updatePage",W)}function B(){m(),A(),M(),f.value=[]}return e({isLoading:c,error:d,results:f,totalResults:v,hasMore:C,requestLoadMore:I,currentPage:g,totalPages:b}),(W,te)=>(L(),P("div",nJ,[w(d)?(L(),P("div",sJ,G(w(d)),1)):!w(c)&&(!w(f)||w(f).length===0)?(L(),P("div",rJ,[F(Hn,{description:w(r)("common.no_data")},null,8,["description"])])):(L(),P("div",oJ,[x("div",aJ,[(L(!0),P(Te,null,Ne((w(f)||[]).map(w(Gw)),re=>(L(),P("div",{key:re.id||re.title,class:"media-ft-highlight-card"},[x("a",{class:"media-ft-highlight-cover",href:re.url,target:"_blank",onClick:te[0]||(te[0]=ft(()=>{},["stop"]))},[x("img",{src:re.cover,alt:re.title},null,8,uJ),re.badge?(L(),P("div",cJ,G(re.badge),1)):X("",!0)],8,lJ),x("div",dJ,[x("div",fJ,G(re.title),1),x("div",hJ,[re.score?(L(),P("span",pJ,G(re.score?.toFixed(1))+"  ",1)):X("",!0),re.areas?(L(),P("span",mJ,G(re.areas),1)):X("",!0),re.styles?(L(),P("span",gJ,G(re.styles),1)):X("",!0),re.indexShow?(L(),P("span",vJ,G(re.indexShow),1)):X("",!0)]),re.desc?(L(),P("div",_J,G(re.desc),1)):X("",!0),re.episodes&&re.episodes.length?(L(),_e(uh,{key:1,episodes:re.episodes,"fallback-url":re.url},null,8,["episodes","fallback-url"])):X("",!0),x("div",bJ,[x("a",{class:"media-ft-highlight-button",href:re.url,target:"_blank",onClick:te[1]||(te[1]=ft(()=>{},["stop"]))},"  ",8,yJ)])])]))),128))])])),l.value==="scroll"?(L(),P(Te,{key:3},[F(jl,{show:w(c)&&w(f)&&w(f).length>0,"keep-space":!0},null,8,["show"]),!w(c)&&w(f)&&w(f).length>0&&!w(C)?(L(),_e(Hn,{key:0,description:w(r)("common.no_more_content")},null,8,["description"])):X("",!0)],64)):(L(),_e(Qa,{key:4,"current-page":w(g),"total-pages":w(b),loading:u.value,disabled:w(c),onChange:$},null,8,["current-page","total-pages","loading","disabled"]))]))}}),[["__scopeId","data-v-07f66da0"]]),EJ={class:"user-search-page"},SJ={key:0,class:"error-message"},xJ={key:1,class:"empty-state"},TJ={key:2,class:"user-grid"},AJ=qe(Me({__name:"UserSearchPage",props:{keyword:{},filters:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{haveScrollbar:o,handleBackToTop:a}=$t(),l=ge(()=>k.value.searchResultsPaginationMode),u=z(!1),{userRelations:c,batchQueryUserRelations:d,updateUserRelation:f}=y2(),{isLoading:h,error:p,results:m,lastResponse:g,search:v,reset:b}=tl("user"),{currentPage:_,totalResults:y,totalPages:E,hasMore:S,extractPagination:A,updatePage:C,getNextPage:T,reset:I}=el(),{hasMore:D,exhausted:R,requestLoadMore:O,handleLoadMoreCompletion:M,setHasMore:U,setExhausted:$,reset:B}=Ja(async()=>{const le=await W(!0),be=m.value?.length||0;return{success:le,itemsCount:be}});Pe(()=>n.keyword,async(le,be)=>{const se=(le||"").trim(),ne=(be||"").trim();if(!se){re();return}se!==ne&&(re(),await W(!1))}),st(()=>{n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&C(n.initialPage),W(!1))}),Pe(()=>n.filters,()=>{n.keyword.trim()&&(re(),W(!1))},{deep:!0});async function W(le){const be=n.keyword.trim();if(!be)return!1;const se=l.value==="scroll"&&le;if(se&&(h.value||R.value))return!1;se||$(!1);const ne=se?T(!0):_.value>0?_.value:T(!1),pe=m.value?.length||0,xe={"":{order:"",order_sort:0},fans:{order:"fans",order_sort:0},fans_desc:{order:"fans",order_sort:1},level:{order:"level",order_sort:0},level_desc:{order:"level",order_sort:1}}[n.filters.order]||{order:"",order_sort:0};if(!await v(be,Z=>ze.search.searchUser(Z),{page:ne,pagesize:30,order:xe.order,order_sort:xe.order_sort,user_type:n.filters.userType})||!g.value?.data)return!1;const Ke=g.value.data,Xe=Array.isArray(Ke?.result)?Ke.result:[];if(se&&m.value){const Z=[...m.value,...Xe];m.value=ua(Z,ae=>String(ae?.mid??JSON.stringify(ae)))}else m.value=Xe;const Re=m.value.map(Z=>Z.mid).filter(Boolean);if(await d(Re),A(Ke,Xe.length),C(ne),U(S.value),l.value==="scroll"){const Z=m.value.length,ae=Math.max(Z-pe,0);(Xe.length===0||ae<=0&&ne>=E.value)&&$(!0),se&&await M(o)}return!0}async function te(le){if(l.value!=="pagination")return;const be=n.keyword.trim();if(!be)return;a(),await ot(),u.value=!0;const ne={"":{order:"",order_sort:0},fans:{order:"fans",order_sort:0},fans_desc:{order:"fans",order_sort:1},level:{order:"level",order_sort:0},level_desc:{order:"level",order_sort:1}}[n.filters.order]||{order:"",order_sort:0};if(!await v(be,Ke=>ze.search.searchUser(Ke),{page:le,pagesize:30,order:ne.order,order_sort:ne.order_sort,user_type:n.filters.userType})||!g.value?.data)return;const ye=g.value.data,xe=Array.isArray(ye?.result)?ye.result:[];m.value=xe;const Be=m.value.map(Ke=>Ke.mid).filter(Boolean);await d(Be),A(ye,xe.length),C(le),U(S.value),u.value=!1,s("updatePage",le)}function re(){b(),I(),B(),m.value=[]}function q(le){f(le.mid,le.isFollowing)}return e({isLoading:h,error:p,results:m,totalResults:y,hasMore:D,requestLoadMore:O,userRelations:c,updateUserRelation:f,currentPage:_,totalPages:E}),(le,be)=>(L(),P("div",EJ,[w(p)?(L(),P("div",SJ,G(w(p)),1)):!w(h)&&(!w(m)||w(m).length===0)?(L(),P("div",xJ,[F(Hn,{description:w(r)("common.no_data")},null,8,["description"])])):(L(),P("div",TJ,[(L(!0),P(Te,null,Ne(w(m),se=>(L(),_e(V1,Sr({key:se.mid},{ref_for:!0},{...w(S2)(se),isFollowed:w(c)[se.mid]?.isFollowing?1:0},{compact:!0,onFollowStateChanged:be[0]||(be[0]=(ne,pe)=>q({mid:ne,isFollowing:pe}))}),null,16))),128))])),l.value==="scroll"?(L(),P(Te,{key:3},[F(jl,{show:w(h)&&w(m)&&w(m).length>0,"keep-space":!0},null,8,["show"]),!w(h)&&w(m)&&w(m).length>0&&!w(D)?(L(),_e(Hn,{key:0,description:w(r)("common.no_more_content")},null,8,["description"])):X("",!0)],64)):(L(),_e(Qa,{key:4,"current-page":w(_),"total-pages":w(E),loading:u.value,disabled:w(h),onChange:te},null,8,["current-page","total-pages","loading","disabled"]))]))}}),[["__scopeId","data-v-8dde2273"]]),kJ={class:"video-search-page"},CJ={key:0,class:"error-message"},LJ=qe(Me({__name:"VideoSearchPage",props:{keyword:{},filters:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,{haveScrollbar:r,handleBackToTop:o}=$t(),a=ge(()=>k.value.searchResultsPaginationMode),l=z(!1),u=ge(()=>"adaptive"),{isLoading:c,error:d,results:f,lastResponse:h,search:p,reset:m}=tl("video"),{currentPage:g,totalResults:v,totalPages:b,context:_,hasMore:y,extractPagination:E,updatePage:S,getNextPage:A,reset:C}=el(),{hasMore:T,exhausted:I,requestLoadMore:D,handleLoadMoreCompletion:R,setHasMore:O,setExhausted:M,reset:U}=Ja(async()=>{const q=await $(!0),le=f.value?.length||0;return{success:q,itemsCount:le}});Pe(()=>n.keyword,async(q,le)=>{const be=(q||"").trim(),se=(le||"").trim();if(!be){W();return}be!==se&&(W(),await $(!1))}),st(()=>{n.keyword.trim()&&(n.initialPage&&n.initialPage>1&&S(n.initialPage),$(!1))}),Pe(()=>n.filters,()=>{n.keyword.trim()&&(W(),$(!1))},{deep:!0});async function $(q){const le=n.keyword.trim();if(!le)return!1;const be=a.value==="scroll"&&q;if(be&&(c.value||I.value))return!1;be||M(!1);const se=be?A(!0):g.value>0?g.value:A(!1),ne=f.value?.length||0;if(!await p(le,Xe=>ze.search.searchVideo(Xe),{page:se,page_size:30,...f0({loadMore:be,context:_.value,filters:n.filters})})||!h.value?.data)return!1;const ye=h.value.data,xe=Array.isArray(ye?.result)?ye.result:[],Be=x2(xe.filter(Xe=>!w2(Xe))),Ke=Be.map(Xe=>Xe.type==="live_room"?c0(Xe):E2(Xe));if(be&&f.value?f.value=[...f.value,...Ke]:f.value=Ke,E(ye,Be.length),S(se),O(y.value),a.value==="scroll"){const Xe=f.value.length,Re=Math.max(Xe-ne,0);(xe.length===0||Re<=0&&se>=b.value)&&M(!0),be&&await R(r)}return!0}async function B(q){if(a.value!=="pagination")return;const le=n.keyword.trim();if(!le)return;if(o(),await ot(),l.value=!0,!await p(le,xe=>ze.search.searchVideo(xe),{page:q,page_size:30,...f0({loadMore:!1,context:_.value,filters:n.filters})})||!h.value?.data){l.value=!1;return}const se=h.value.data,ne=Array.isArray(se?.result)?se.result:[],pe=x2(ne.filter(xe=>!w2(xe))),ye=pe.map(xe=>xe.type==="live_room"?c0(xe):E2(xe));f.value=ye,E(se,pe.length),S(q),O(y.value),l.value=!1,s("updatePage",q)}function W(){m(),C(),U(),f.value=[]}async function te(){a.value==="scroll"&&(c.value||I.value||await $(!0))}function re(q){return q}return e({isLoading:c,error:d,results:f,totalResults:v,hasMore:T,requestLoadMore:D,currentPage:g,totalPages:b}),(q,le)=>(L(),P("div",kJ,[w(d)?(L(),P("div",CJ,G(w(d)),1)):(L(),_e(rs,{key:1,items:w(f)||[],"grid-layout":u.value,loading:w(c),"no-more-content":a.value==="scroll"&&!w(T),"transform-item":re,"get-item-key":be=>be.aid||be.id,"empty-description":q.$t("common.no_data"),"enable-row-padding":"","show-preview":"",onLoadMore:te},null,8,["items","grid-layout","loading","no-more-content","get-item-key","empty-description"])),a.value==="pagination"?(L(),_e(Qa,{key:2,"current-page":w(g),"total-pages":w(b),loading:l.value,disabled:w(c),onChange:B},null,8,["current-page","total-pages","loading","disabled"])):X("",!0)]))}}),[["__scopeId","data-v-c8363a8e"]]),IJ={class:"search-results-panel"},RJ=qe(Me({__name:"SearchResultsPanel",props:{currentCategory:{},keyword:{},videoFilters:{},userFilters:{},liveFilters:{},initialPage:{}},emits:["updatePage"],setup(t,{expose:e,emit:i}){const n=t,s=i,r=z(),o=z(),a=z(),l=z(),u=z(),c=z(),d=z(),f=ge(()=>{switch(n.currentCategory){case"all":return r.value;case"video":return o.value;case"bangumi":return a.value;case"media_ft":return l.value;case"user":return u.value;case"live":return c.value;case"article":return d.value;default:return null}});function h(){const m=f.value;m&&m.requestLoadMore&&m.requestLoadMore()}function p(m){s("updatePage",m)}return e({handleReachBottom:h}),(m,g)=>(L(),P("div",IJ,[m.currentCategory==="all"?(L(),_e(nQ,{key:0,ref_key:"allPageRef",ref:r,keyword:m.keyword,filters:m.videoFilters,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","filters","initial-page"])):X("",!0),m.currentCategory==="video"?(L(),_e(LJ,{key:1,ref_key:"videoPageRef",ref:o,keyword:m.keyword,filters:m.videoFilters,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","filters","initial-page"])):X("",!0),m.currentCategory==="bangumi"?(L(),_e(HQ,{key:2,ref_key:"bangumiPageRef",ref:a,keyword:m.keyword,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","initial-page"])):X("",!0),m.currentCategory==="media_ft"?(L(),_e(wJ,{key:3,ref_key:"mediaFtPageRef",ref:l,keyword:m.keyword,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","initial-page"])):X("",!0),m.currentCategory==="user"?(L(),_e(AJ,{key:4,ref_key:"userPageRef",ref:u,keyword:m.keyword,filters:m.userFilters,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","filters","initial-page"])):X("",!0),m.currentCategory==="live"?(L(),_e(iJ,{key:5,ref_key:"livePageRef",ref:c,keyword:m.keyword,filters:m.liveFilters,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","filters","initial-page"])):X("",!0),m.currentCategory==="article"?(L(),_e(lQ,{key:6,ref_key:"articlePageRef",ref:d,keyword:m.keyword,"initial-page":m.initialPage,onUpdatePage:p},null,8,["keyword","initial-page"])):X("",!0)]))}}),[["__scopeId","data-v-b940dbf4"]]),PJ={class:"filter-bar","mb-4":"",flex:"~ col","gap-3":""},DJ={flex:"","items-center":"","gap-2":""},OJ={flex:"","items-center":"","gap-2":"","flex-wrap":"","flex-1":""},MJ=["onClick"],$J={flex:"~ col","gap-3":""},FJ={flex:"","items-center":"","gap-2":""},BJ={flex:"","items-center":"","gap-2":"","flex-wrap":""},NJ=["onClick"],UJ=qe(Me({__name:"SearchUserFilters",props:Sn({orderOptions:{},userTypeOptions:{}},{order:{default:""},orderModifiers:{},userType:{default:0},userTypeModifiers:{}}),emits:Sn(["update:order","update:userType"],["update:order","update:userType"]),setup(t,{emit:e}){const i=t,n=e,s=Fn(t,"order"),r=Fn(t,"userType"),o=z(!1);function a(u){s.value=u,n("update:order",u)}function l(u){r.value=u,n("update:userType",u)}return(u,c)=>(L(),P("div",PJ,[x("div",DJ,[c[3]||(c[3]=x("span",{text:"sm $bew-text-2","min-w-12":""},"",-1)),x("div",OJ,[(L(!0),P(Te,null,Ne(i.orderOptions,d=>(L(),P("button",{key:d.value,class:Ie(["filter-btn",{active:s.value===d.value}]),type:"button",onClick:f=>a(d.value)},G(d.label),11,MJ))),128))]),x("button",{class:"more-filters-btn",flex:"","items-center":"","gap-1":"",type:"button",onClick:c[0]||(c[0]=d=>o.value=!o.value)},[c[2]||(c[2]=x("span",{text:"sm $bew-text-2"},"",-1)),x("div",{class:Ie(["toggle-icon",{expanded:o.value}])},[...c[1]||(c[1]=[x("div",{class:"i-tabler:chevron-down",text:"sm $bew-text-3"},null,-1)])],2)])]),Bt(x("div",$J,[x("div",FJ,[c[4]||(c[4]=x("span",{text:"sm $bew-text-2","min-w-12":""},"",-1)),x("div",BJ,[(L(!0),P(Te,null,Ne(i.userTypeOptions,d=>(L(),P("button",{key:d.value,class:Ie(["filter-btn",{active:r.value===d.value}]),type:"button",onClick:f=>l(d.value)},G(d.label),11,NJ))),128))])])],512),[[ii,o.value]])]))}}),[["__scopeId","data-v-012d9866"]]),VJ={class:"date-picker-input-wrapper"},jJ=["placeholder"],HJ={key:0,class:"date-picker-panel"},zJ={class:"picker-header"},GJ={class:"year-controls"},WJ={class:"year-text"},KJ={class:"month-controls"},YJ={class:"month-text"},XJ={class:"picker-weekdays"},qJ={class:"picker-days"},ZJ=["onClick"],Xw=qe(Me({__name:"DatePicker",props:{modelValue:{},max:{},placeholder:{}},emits:["update:modelValue"],setup(t,{emit:e}){const i=t,n=e,s=z(!1),r=z(),o=z(""),a=z(!1),l=z(new Date().getFullYear()),u=z(new Date().getMonth()),c=ge(()=>{if(!i.max)return null;const U=new Date(i.max);return{year:U.getFullYear(),month:U.getMonth(),day:U.getDate()}}),d=ge(()=>i.modelValue?i.modelValue.replace(/-/g,"/"):i.placeholder||"");Pe(()=>i.modelValue,U=>{a.value||(o.value=U?d.value:"")},{immediate:!0});function f(U){if(!U)return null;const $=U.trim(),B=$.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(B){const[,re,q,le]=B;return new Date(Number(re),Number(q)-1,Number(le))}const W=$.match(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/);if(W){const[,re,q,le]=W;return new Date(Number(re),Number(q)-1,Number(le))}const te=$.match(/^(\d{4})(\d{1,2})(\d{1,2})$/);if(te){const[,re,q,le]=te;return new Date(Number(re),Number(q)-1,Number(le))}return null}const h=ge(()=>{const U=l.value,$=u.value,W=new Date(U,$,1).getDay(),te=new Date(U,$+1,0).getDate(),re=new Date(U,$,0).getDate(),q=[];for(let be=W-1;be>=0;be--){const se=re-be,ne=new Date(U,$-1,se);q.push({day:se,month:"prev",date:ne,disabled:p(ne),isToday:!1,isSelected:!1})}for(let be=1;be<=te;be++){const se=new Date(U,$,be),ne=m(se,new Date),pe=i.modelValue?m(se,new Date(i.modelValue)):!1;q.push({day:be,month:"current",date:se,disabled:p(se),isToday:ne,isSelected:pe})}const le=42-q.length;for(let be=1;be<=le;be++){const se=new Date(U,$+1,be);q.push({day:be,month:"next",date:se,disabled:p(se),isToday:!1,isSelected:!1})}return q});function p(U){if(!c.value)return!1;const $=new Date(U.getFullYear(),U.getMonth(),U.getDate()),B=new Date(c.value.year,c.value.month,c.value.day);return $>B}function m(U,$){return U.getFullYear()===$.getFullYear()&&U.getMonth()===$.getMonth()&&U.getDate()===$.getDate()}function g(U){const $=U.getFullYear(),B=String(U.getMonth()+1).padStart(2,"0"),W=String(U.getDate()).padStart(2,"0");return`${$}-${B}-${W}`}function v(U){if(U.disabled)return;const $=U.date;n("update:modelValue",g($)),s.value=!1}function b(){u.value===0?(u.value=11,l.value--):u.value--}function _(){u.value===11?(u.value=0,l.value++):u.value++}function y(){l.value--}function E(){l.value++}function S(){const U=new Date;p(U)||(n("update:modelValue",g(U)),s.value=!1)}function A(){n("update:modelValue",""),s.value=!1,o.value=""}function C(){if(i.modelValue){const U=new Date(i.modelValue);l.value=U.getFullYear(),u.value=U.getMonth()}else{const U=new Date;l.value=U.getFullYear(),u.value=U.getMonth()}s.value=!0}function T(){a.value||C()}function I(){a.value=!0,s.value=!1}function D(){a.value=!1;const U=f(o.value);U&&!Number.isNaN(U.getTime())?p(U)?o.value=d.value:n("update:modelValue",g(U)):o.value.trim()===""?n("update:modelValue",""):o.value=d.value}function R(U){U.key==="Enter"?U.target.blur():U.key==="Escape"&&(o.value=d.value,U.target.blur())}Py(r,()=>{s.value=!1});const O=["1","2","3","4","5","6","7","8","9","10","11","12"],M=["","","","","","",""];return(U,$)=>(L(),P("div",{ref_key:"pickerRef",ref:r,class:"date-picker",pos:"relative"},[x("div",VJ,[Bt(x("input",{"onUpdate:modelValue":$[0]||($[0]=B=>o.value=B),type:"text",class:Ie(["date-picker-input",{"has-value":U.modelValue}]),placeholder:U.placeholder||"",onClick:T,onFocus:I,onBlur:D,onKeydown:R},null,42,jJ),[[qs,o.value]]),x("button",{type:"button",class:"calendar-icon",onClick:C},[...$[1]||($[1]=[x("div",{class:"i-tabler:calendar","w-4":"","h-4":""},null,-1)])])]),F(nt,{name:"picker-fade"},{default:H(()=>[s.value?(L(),P("div",HJ,[x("div",zJ,[x("div",GJ,[x("button",{type:"button",class:"header-btn",onClick:y},[...$[2]||($[2]=[x("div",{class:"i-tabler:chevron-left","w-4":"","h-4":""},null,-1)])]),x("span",WJ,G(l.value)+"",1),x("button",{type:"button",class:"header-btn",onClick:E},[...$[3]||($[3]=[x("div",{class:"i-tabler:chevron-right","w-4":"","h-4":""},null,-1)])])]),x("div",KJ,[x("button",{type:"button",class:"header-btn",onClick:b},[...$[4]||($[4]=[x("div",{class:"i-tabler:chevron-up","w-5":"","h-5":""},null,-1)])]),x("div",YJ,G(O[u.value]),1),x("button",{type:"button",class:"header-btn",onClick:_},[...$[5]||($[5]=[x("div",{class:"i-tabler:chevron-down","w-5":"","h-5":""},null,-1)])])])]),x("div",XJ,[(L(),P(Te,null,Ne(M,B=>x("div",{key:B,class:"weekday"},G(B),1)),64))]),x("div",qJ,[(L(!0),P(Te,null,Ne(h.value,(B,W)=>(L(),P("button",{key:W,type:"button",class:Ie(["day-cell",{"other-month":B.month!=="current",disabled:B.disabled,today:B.isToday,selected:B.isSelected}]),onClick:te=>v(B)},G(B.day),11,ZJ))),128))]),x("div",{class:"picker-footer"},[x("button",{type:"button",class:"footer-btn clear",onClick:A},"  "),x("button",{type:"button",class:"footer-btn today",onClick:S},"  ")])])):X("",!0)]),_:1})],512))}}),[["__scopeId","data-v-681b26a7"]]),QJ={class:"filter-bar","mb-4":"",flex:"~ col","gap-3":""},JJ={flex:"","items-center":"","gap-2":""},eee={flex:"","items-center":"","gap-2":"","flex-wrap":"","flex-1":""},tee=["onClick"],iee={flex:"~ col","gap-3":""},nee={flex:"","items-center":"","gap-2":""},see={flex:"","items-center":"","gap-2":"","flex-wrap":""},ree=["onClick"],oee={flex:"","items-center":"","gap-2":""},aee={flex:"","items-center":"","gap-2":"","flex-wrap":""},lee=["onClick"],uee=qe(Me({__name:"SearchVideoFilters",props:Sn({orderOptions:{},durationOptions:{},timeRangeOptions:{}},{videoOrder:{default:""},videoOrderModifiers:{},duration:{default:0},durationModifiers:{},timeRange:{default:"all"},timeRangeModifiers:{},customStartDate:{default:""},customStartDateModifiers:{},customEndDate:{default:""},customEndDateModifiers:{}}),emits:["update:videoOrder","update:duration","update:timeRange","update:customStartDate","update:customEndDate"],setup(t){const e=t,i=Fn(t,"videoOrder"),n=Fn(t,"duration"),s=Fn(t,"timeRange"),r=Fn(t,"customStartDate"),o=Fn(t,"customEndDate"),a=z(""),l=z(""),u=z(!1);Pe([r,o],([h,p])=>{a.value!==h&&(a.value=h||""),l.value!==p&&(l.value=p||"")},{immediate:!0}),Pe([a,l],([h,p])=>{h&&p?(s.value="custom",r.value=h,o.value=p):!h&&!p&&s.value==="custom"&&(s.value="all",r.value="",o.value="")});function c(h){s.value=h,a.value="",l.value="",r.value="",o.value=""}function d(h){const p=h.getFullYear(),m=String(h.getMonth()+1).padStart(2,"0"),g=String(h.getDate()).padStart(2,"0");return`${p}-${m}-${g}`}const f=ge(()=>d(new Date));return(h,p)=>(L(),P("div",QJ,[x("div",JJ,[p[5]||(p[5]=x("span",{text:"sm $bew-text-2","min-w-12":""},"",-1)),x("div",eee,[(L(!0),P(Te,null,Ne(e.orderOptions,m=>(L(),P("button",{key:m.value,class:Ie(["filter-btn",{active:i.value===m.value}]),type:"button",onClick:g=>i.value=m.value},G(m.label),11,tee))),128))]),x("button",{class:"more-filters-btn",flex:"","items-center":"","gap-1":"",type:"button",onClick:p[0]||(p[0]=m=>u.value=!u.value)},[p[4]||(p[4]=x("span",{text:"sm $bew-text-2"},"",-1)),x("div",{class:Ie(["toggle-icon",{expanded:u.value}])},[...p[3]||(p[3]=[x("div",{class:"i-tabler:chevron-down",text:"sm $bew-text-3"},null,-1)])],2)])]),Bt(x("div",iee,[x("div",nee,[p[6]||(p[6]=x("span",{text:"sm $bew-text-2","min-w-12":""},"",-1)),x("div",see,[(L(!0),P(Te,null,Ne(e.durationOptions,m=>(L(),P("button",{key:m.value,class:Ie(["filter-btn",{active:n.value===m.value}]),type:"button",onClick:g=>n.value=m.value},G(m.label),11,ree))),128))])]),x("div",oee,[p[8]||(p[8]=x("span",{text:"sm $bew-text-2","min-w-12":""},"",-1)),x("div",aee,[(L(!0),P(Te,null,Ne(e.timeRangeOptions,m=>(L(),P("button",{key:m.value,class:Ie(["filter-btn",{active:s.value===m.value}]),type:"button",onClick:g=>c(m.value)},G(m.label),11,lee))),128)),F(Xw,{modelValue:a.value,"onUpdate:modelValue":p[1]||(p[1]=m=>a.value=m),max:f.value,placeholder:""},null,8,["modelValue","max"]),p[7]||(p[7]=x("span",{text:"sm $bew-text-3"},"",-1)),F(Xw,{modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=m=>l.value=m),max:f.value,placeholder:""},null,8,["modelValue","max"])])])],512),[[ii,u.value]])]))}}),[["__scopeId","data-v-c8285cb6"]]),cee={class:"search-results-container"},dee=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"SearchResults",setup(t){function e(){return new URLSearchParams(window.location.search).get("keyword")||""}const i=z(e()),n=ge(()=>(i.value||"").trim()),s=["all","video","bangumi","media_ft","user","live","article"],r=ge(()=>n.value?`${n.value} -  - `:" - ");Ck(r);function o(){const ne=new URLSearchParams(window.location.search).get("category");return ne&&s.includes(ne)?ne:"all"}function a(){const se=new URLSearchParams(window.location.search);return{page:Number(se.get("pn"))||1,userOrder:se.get("user_order")||"",userType:Number(se.get("user_type"))||0,liveSubCategory:se.get("search_type")||"all",liveRoomOrder:se.get("live_room_order")||"",liveUserOrder:se.get("live_user_order")||""}}function l(se){const ne=new URLSearchParams(window.location.search);Object.entries(se).forEach(([ye,xe])=>{xe==null||xe===""||xe===0||xe==="all"||ye==="pn"&&xe===1?ne.delete(ye):ne.set(ye,String(xe))});const pe=`${window.location.pathname}?${ne.toString()}`;window.history.pushState({},"",pe)}const u=z(o()),c=a(),d=z(c.page),f=z(""),h=z(0),p=z("all"),m=z(""),g=z(""),v=z(c.userOrder),b=z(c.userType),_=z(c.liveSubCategory),y=z(c.liveRoomOrder),E=z(c.liveUserOrder),S=ge(()=>({order:f.value,duration:h.value,timeRange:p.value,customStartDate:m.value,customEndDate:g.value})),A=ge(()=>({order:v.value,userType:b.value})),C=ge(()=>({subCategory:_.value,roomOrder:y.value,userOrder:E.value})),{handleReachBottom:T,handlePageRefresh:I}=$t(),D=An(),{searchKeyword:R}=Va(D),O=[{value:"",label:""},{value:"click",label:""},{value:"pubdate",label:""},{value:"dm",label:""},{value:"stow",label:""}],M=[{value:0,label:""},{value:1,label:"10"},{value:2,label:"10-30"},{value:3,label:"30-60"},{value:4,label:"60"}],U=[{value:"all",label:""},{value:"day",label:""},{value:"week",label:""},{value:"halfyear",label:""}],$=[{value:"",label:""},{value:"fans",label:""},{value:"fans_desc",label:""},{value:"level",label:"Lv"},{value:"level_desc",label:"Lv"}],B=[{value:0,label:""},{value:1,label:"UP"},{value:2,label:""},{value:3,label:""}],W=[{value:"all",label:"",icon:"i-tabler:search"},{value:"video",label:"",icon:"i-tabler:video"},{value:"bangumi",label:"",icon:"i-tabler:movie"},{value:"media_ft",label:"",icon:"i-tabler:movie-off"},{value:"user",label:"",icon:"i-tabler:user"},{value:"live",label:"",icon:"i-tabler:broadcast"},{value:"article",label:"",icon:"i-tabler:article"}],te=z({all:0,video:0,bangumi:0,media_ft:0,user:0,live:0,article:0}),re=z();function q(){const se=e();se!==i.value&&(i.value=se);const ne=a(),pe=o();u.value=pe,d.value=ne.page,f.value="",h.value=0,p.value="all",m.value="",g.value="",v.value=ne.userOrder,b.value=ne.userType,_.value=ne.liveSubCategory,y.value=ne.liveRoomOrder,E.value=ne.liveUserOrder}Ht(window,"popstate",q),Ht(window,"pushstate",q),Pe(()=>i.value,async(se,ne)=>{const pe=(se||"").trim(),ye=(ne||"").trim();pe&&(pe===ye&&se===ne||q())}),Pe(n,se=>{R.value=se},{immediate:!0}),Pe([v,b],()=>{n.value&&(d.value=1,l({user_order:v.value,user_type:b.value,pn:1}))},{deep:!1}),Pe(_,()=>{n.value&&(d.value=1,l({search_type:_.value,pn:1}))}),Pe(y,()=>{n.value&&(d.value=1,l({live_room_order:y.value,pn:1}))}),Pe(E,()=>{n.value&&(d.value=1,l({live_user_order:E.value,pn:1}))});function le(se){if(u.value===se)return;u.value=se,d.value=1;const ne=new URLSearchParams(window.location.search);ne.set("category",se),ne.delete("pn"),se!=="user"&&(ne.delete("user_order"),ne.delete("user_type")),se!=="live"&&(ne.delete("search_type"),ne.delete("live_room_order"),ne.delete("live_user_order"));const pe=`${window.location.pathname}?${ne.toString()}`;window.history.pushState({},"",pe)}function be(){T.value=()=>{n.value&&k.value.searchResultsPaginationMode!=="pagination"&&re.value?.handleReachBottom&&re.value.handleReachBottom()},I.value=()=>{new URLSearchParams(window.location.search).get("keyword")?window.dispatchEvent(new Event("pushstate")):window.location.reload()}}return st(()=>{q(),be()}),(se,ne)=>(L(),P("div",cee,[F(zX,{categories:W,"current-category":u.value,"category-counts":te.value,onSelect:le},null,8,["current-category","category-counts"]),u.value==="video"||u.value==="all"?(L(),_e(uee,{key:0,"video-order":f.value,"onUpdate:videoOrder":ne[0]||(ne[0]=pe=>f.value=pe),duration:h.value,"onUpdate:duration":ne[1]||(ne[1]=pe=>h.value=pe),"time-range":p.value,"onUpdate:timeRange":ne[2]||(ne[2]=pe=>p.value=pe),"custom-start-date":m.value,"onUpdate:customStartDate":ne[3]||(ne[3]=pe=>m.value=pe),"custom-end-date":g.value,"onUpdate:customEndDate":ne[4]||(ne[4]=pe=>g.value=pe),"order-options":O,"duration-options":M,"time-range-options":U},null,8,["video-order","duration","time-range","custom-start-date","custom-end-date"])):X("",!0),u.value==="user"?(L(),_e(UJ,{key:1,order:v.value,"onUpdate:order":ne[5]||(ne[5]=pe=>v.value=pe),"user-type":b.value,"onUpdate:userType":ne[6]||(ne[6]=pe=>b.value=pe),"order-options":$,"user-type-options":B},null,8,["order","user-type"])):X("",!0),u.value==="live"?(L(),_e(XX,{key:2,"sub-category":_.value,"onUpdate:subCategory":ne[7]||(ne[7]=pe=>_.value=pe)},null,8,["sub-category"])):X("",!0),F(RJ,{ref_key:"searchResultsPanelRef",ref:re,"current-category":u.value,keyword:n.value,"video-filters":S.value,"user-filters":A.value,"live-filters":C.value,"initial-page":d.value,onUpdatePage:ne[8]||(ne[8]=pe=>l({pn:pe}))},null,8,["current-category","keyword","video-filters","user-filters","live-filters","initial-page"])]))}}),[["__scopeId","data-v-6bac22ac"]])},Symbol.toStringTag,{value:"Module"})),fee=["bg"],hee={flex:"","mb-3":"","items-end":"",h:"66px","overflow-hidden":""},pee=["w","h"],mee=["text"],gee={text:"2xl","font-bold":""},vee=["text"],_ee=["bg"],bee=["border-l"],yee=["color","bg"],wee=["bg"],Eee={flex:"","gap-4":""},See=["href"],xee=["src","alt"],Tee={flex:"~ col"},Aee=["href"],kee={"mt-auto":"",text:"$bew-theme-color"},Cee=Me({__name:"AnimeTimeTable",setup(t,{expose:e}){const{t:i}=St(),n=Mt([]),s=z(),r=ge(()=>[i("anime.anime_timetable.days_of_week.mon"),i("anime.anime_timetable.days_of_week.tue"),i("anime.anime_timetable.days_of_week.wed"),i("anime.anime_timetable.days_of_week.thu"),i("anime.anime_timetable.days_of_week.fri"),i("anime.anime_timetable.days_of_week.sat"),i("anime.anime_timetable.days_of_week.sun")]);st(()=>{a()});function o(){n.length=0,a()}function a(){ze.anime.getAnimeTimeTable().then(l=>{const{code:u,result:c}=l;u===0&&Object.assign(n,c)})}return e({refreshAnimeTimeTable:o}),(l,u)=>(L(),P("div",null,[F(l5,null,{default:H(()=>[x("ul",{ref_key:"animeTimeTableWrap",ref:s,flex:"~"},[(L(!0),P(Te,null,Ne(w(n),c=>(L(),P("li",{key:c.date_ts,w:"1/1 sm:1/2 md:1/4 lg:1/5 xl:1/6 2xl:1/7",p:"x-2 b-8","shrink-0":"",bg:c.is_today?"!$bew-theme-color-10":"","hover:bg":"$bew-fill-1","duration-300":""},[x("div",hee,[x("div",{w:c.is_today?"50px":"38px",h:c.is_today?"48px":"36px","mr-4":"",style:Ue([{backgroundImage:`url(${w(Zs).runtime.getURL("/assets/anime-timetable-icons.png")})`,backgroundPosition:c.is_today?`-56px ${-36+(c.day_of_week-1)*-72}px`:`-146px ${-36+(c.day_of_week-1)*-72}px`,backgroundSize:c.is_today?"247px 663px":"",filter:c.is_today?"drop-shadow(50px 0 var(--bew-text-1))":"drop-shadow(38px 0 var(--bew-text-3))"},{transform:"translateX(-100%)","background-size":"247px 663px"}])},null,12,pee),x("h3",{text:c.is_today?"$bew-text-1":"$bew-text-3"},[x("span",gee,G(w(r)[c.day_of_week-1]),1),x("span",{text:`base ${c.is_today?"$bew-text-2":"$bew-text-3"}`,"ml-2":""},G(c.date),9,vee)],8,mee)]),x("span",{block:"","w-full":"","h-4px":"",bg:c.is_today?"$bew-theme-color":"$bew-fill-3","rounded-8":""},null,8,_ee),x("ul",{grid:"","gap-4":"","border-l":`~ 2px dashed ${c.is_today?"$bew-theme-color-40":"$bew-fill-2"}`,p:"t-3 l-3"},[(L(!0),P(Te,null,Ne(c.episodes,d=>(L(),P("li",{key:d.season_id},[x("div",{p:"x-2 y-1",w:"[fit-content]","mb-2":"","rounded-4":"",color:c.is_today?"$bew-theme-color":"$bew-text-3",bg:c.is_today?"$bew-theme-color-10":"$bew-fill-1",relative:"",grid:"","place-items-center":""},[x("i",{pos:"absolute left--3","w-2":"","h-2":"","rounded-6":"",bg:c.is_today?"$bew-theme-color":"$bew-fill-3",transform:"~ translate-x-[calc(-0.25rem-1px)]"},null,8,wee),He(" "+G(d.pub_time),1)],8,yee),x("div",Eee,[x("a",{href:`//www.bilibili.com/bangumi/play/ss${d.season_id}`,target:"_blank",tabindex:"-1","shrink-0":""},[x("img",{src:`${w(Li)(d.square_cover)}@80w_80h.webp`,alt:d.title,"w-18":"",aspect:"square",rounded:"$bew-radius-half"},null,8,xee)],8,See),x("div",Tee,[x("a",{href:`//www.bilibili.com/bangumi/play/ss${d.season_id}`,target:"_blank"},G(d.title),9,Aee),x("p",kee,G(d.pub_index),1)])])]))),128))],8,bee)],8,fee))),128))],512)]),_:1})]))}}),Lee={key:0,class:"anime-section"},Iee={flex:"","justify-between":"","items-center":"","mb-6":""},Ree={text:"3xl $bew-text-1",font:"bold"},Pee={"w-full":"",flex:""},Dee={class:"anime-section"},Oee={flex:"","justify-between":"","items-center":"","mb-6":""},Mee={text:"3xl $bew-text-1",font:"bold"},$ee={"w-full":"",flex:""},Fee={class:"anime-section"},Bee={flex:"","justify-between":"","items-end":""},Nee={text:"3xl $bew-text-1",font:"bold"},Uee={class:"anime-section"},Vee={text:"3xl $bew-text-1",font:"bold","mb-6":""},jee={grid:"~ 2xl:cols-6 xl:cols-5 lg:cols-4 md:cols-3 sm:cols-2 cols-1 gap-6"},Hee=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Anime",setup(t){const e=Mt([]),i=Mt([]),n=Mt([]),s=z(0),r=z(),o=z(),a=z(),l=z(),u=z(),c=z(),{handleReachBottom:d,handlePageRefresh:f}=$t(),h=ge(()=>r.value||o.value||a.value);st(()=>{m(),v(),g(),p()});function p(){d.value=()=>{a.value||u.value||g()},f.value=()=>{h.value||(e.length=0,i.length=0,n.length=0,s.value=0,u.value=!1,m(),v(),g(),c.value?.refreshAnimeTimeTable())}}function m(){r.value=!0,ze.anime.getAnimeWatchList({vmid:Ds()??0,pn:1,follow_status:2,ps:30}).then(b=>{const{code:_,data:{list:y}}=b;_===0&&Object.assign(e,y)}).catch(()=>Object.assign(e,[])).finally(()=>{r.value=!1})}function g(){a.value=!0,ze.anime.getRecommendAnimeList({coursor:s.value}).then(b=>{const{code:_,data:{items:y,coursor:E,has_next:S}}=b;_===0&&S&&(i.length===0?Object.assign(i,y[0].sub_items):i.push(...y[0].sub_items),s.value=E),_===0&&!S&&(u.value=!0)}).finally(()=>{a.value=!1})}function v(){o.value=!0,ze.anime.getPopularAnimeList().then(b=>{const{code:_,result:{list:y}}=b;_===0&&Object.assign(n,y)}).catch(()=>{}).finally(()=>o.value=!1)}return(b,_)=>{const y=Ge("Button"),E=Ge("BangumiCardSkeleton"),S=Ge("BangumiCard"),A=Ge("HorizontalScrollView"),C=Ge("Empty"),T=Ge("Loading");return L(),P("div",null,[x("div",null,[w(Ds)()?(L(),P("section",Lee,[x("div",Iee,[x("h3",Ree,G(b.$t("anime.your_watch_list")),1),F(y,{size:"large",style:{"--b-button-shadow":"var(--bew-shadow-1)"},onClick:_[0]||(_[0]=I=>w(Os)(`https://space.bilibili.com/${w(Ds)()??0}/bangumi`))},{default:H(()=>[He(G(b.$t("common.view_all")),1)]),_:1})]),F(A,{w:"[calc(100%+1.5rem)]"},{default:H(()=>[x("div",Pee,[(L(),P(Te,null,Ne(6,I=>Bt(F(E,{key:I,w:"2xl:[calc(100%/6-1.5rem)] xl:[calc(100%/5-1.5rem)] lg:[calc(100%/4-1.5rem)] md:[calc(100%/3-1.5rem)] sm:[calc(100%/2-1.5rem)] [calc(100%-1.5rem)]","last:w":"2xl:1/6 xl:1/5 lg:1/4 md:1/3 sm:1/2 full","shrink-0":"","mr-6":"","important-mb-0":"","last:pr-6":""}),[[ii,w(r)]])),64)),(L(!0),P(Te,null,Ne(w(e),I=>Bt((L(),_e(S,{key:I.short_url,bangumi:{url:I.url,cover:I.cover,coverHover:I?.horizontal_cover_16_9,title:I.title,desc:I.progress!==""?I.progress:b.$t("anime.havent_seen"),evaluate:I.evaluate,tags:I.styles,capsuleText:I.is_finish&&I.total_count?b.$t("anime.total_episodes",{ep:I.total_count}):!I.is_finish&&I.formal_ep_count?b.$t("anime.update_to_n_episodes",{ep:I.formal_ep_count}):"",badge:{text:I.badge_info.text||"",bgColor:I.badge_info.bg_color||"",bgColorDark:I.badge_info.bg_color_night||""}},w:"2xl:[calc(100%/6-1.5rem)] xl:[calc(100%/5-1.5rem)] lg:[calc(100%/4-1.5rem)] md:[calc(100%/3-1.5rem)] sm:[calc(100%/2-1.5rem)] [calc(100%-1.5rem)]","last:w":"2xl:1/6 xl:1/5 lg:1/4 md:1/3 sm:1/2 full","shrink-0":"","mr-6":"","important-mb-0":"","last:pr-6":""},null,8,["bangumi"])),[[ii,!I.title.includes("MADEBYBILIBILI")||!I.title.includes("")]])),128))])]),_:1})])):X("",!0),x("section",Dee,[x("div",Oee,[x("h3",Mee,G(b.$t("anime.popular_anime")),1),F(y,{size:"large",style:{"--b-button-shadow":"var(--bew-shadow-1)"},onClick:_[1]||(_[1]=I=>w(Os)("https://www.bilibili.com/v/popular/rank/bangumi"))},{default:H(()=>[He(G(b.$t("common.view_all")),1)]),_:1})]),F(A,{w:"[calc(100%+1.5rem)]"},{default:H(()=>[x("div",$ee,[(L(),P(Te,null,Ne(6,I=>Bt(F(E,{key:I,w:"2xl:[calc(100%/6-1.5rem)] xl:[calc(100%/5-1.5rem)] lg:[calc(100%/4-1.5rem)] md:[calc(100%/3-1.5rem)] sm:[calc(100%/2-1.5rem)] [calc(100%-1.5rem)]","last:w":"2xl:1/6 xl:1/5 lg:1/4 md:1/3 sm:1/2 full","shrink-0":"","mr-6":"","important-mb-0":"","last:pr-6":""}),[[ii,w(o)]])),64)),(L(!0),P(Te,null,Ne(w(n),I=>(L(),_e(S,{key:I.url,w:"2xl:[calc(100%/6-1.5rem)] xl:[calc(100%/5-1.5rem)] lg:[calc(100%/4-1.5rem)] md:[calc(100%/3-1.5rem)] sm:[calc(100%/2-1.5rem)] [calc(100%-1.5rem)]","last:w":"2xl:1/6 xl:1/5 lg:1/4 md:1/3 sm:1/2 full","shrink-0":"","mr-6":"","important-mb-0":"","last:pr-6":"",bangumi:{url:I.url,cover:I.cover,title:I.title,desc:b.$t("anime.follow",{num:w(Bs)(I.stat.series_follow)}),capsuleText:I.rating.replace("",""),rank:I.rank,badge:{text:I.badge_info.text||"",bgColor:I.badge_info.bg_color||"",bgColorDark:I.badge_info.bg_color_night||""}}},null,8,["bangumi"]))),128))])]),_:1})]),x("section",Fee,[x("div",Bee,[x("h3",Nee,G(b.$t("anime.anime_timetable.title")),1)]),F(Cee,{ref_key:"animeTimeTableRef",ref:c,w:"[calc(100%+1.5rem)]"},null,512)]),x("section",Uee,[x("h3",Vee,G(b.$t("anime.recommended_for_you")),1),x("div",jee,[(L(!0),P(Te,null,Ne(w(i),I=>(L(),_e(S,{key:I.episode_id,bangumi:{url:I.link??"",cover:I.cover,coverHover:I?.hover?.img,tags:I?.hover?.text,title:I.title,desc:I.sub_title,evaluate:I.evaluate,capsuleText:I.rating},onMouseenter:D=>l.value=I.season_id,onMouseleave:_[2]||(_[2]=D=>l.value=0)},null,8,["bangumi","onMouseenter"]))),128)),(L(),P(Te,null,Ne(30,I=>Bt(F(E,{key:I,"important-mb-0":""}),[[ii,w(a)]])),64))])])]),w(u)?(L(),_e(C,{key:0,class:"pb-4",description:b.$t("common.no_more_content")},null,8,["description"])):X("",!0),w(a)&&w(i).length!==0?(L(),_e(T,{key:1,m:"-t-4"})):X("",!0)])}}}),[["__scopeId","data-v-5a7822bd"]])},Symbol.toStringTag,{value:"Module"})),zee={key:0,flex:"~ col md:row lg:row","gap-4":""},Gee={w:"full md:60% lg:70% xl:75%",order:"2 md:1 lg:1","mb-6":""},Wee={text:"3xl $bew-text-1","font-bold":"","mb-6":""},Kee={"mr-8":"","px-4":"","b-l":"~ 2px dashed $bew-fill-2","group-hover:b-l":"$bew-theme-color-40","shrink-0":"",relative:"","duration-300":"",flex:"important-xl:~ items-center justify-center",hidden:""},Yee={text:"sm $bew-text-3","group-hover:text":"$bew-theme-color",bg:"$bew-fill-1","group-hover:bg":"$bew-theme-color-20",p:"x-3 y-1","rounded-8":"","duration-300":""},Xee={rounded:"$bew-radius",flex:"~ gap-6 col md:col lg:row items-start",relative:"","group-hover:bg":"$bew-fill-2","duration-300":"","w-full":"","p-2":"","m-1":"","content-visibility-auto":""},qee={pos:"relative",bg:"$bew-skeleton",w:"full md:full lg:250px",flex:"shrink-0",rounded:"$bew-radius","overflow-hidden":"","aspect-video":""},Zee=["src","alt"],Qee={key:0,pos:"absolute right-0 top-0",bg:"$bew-theme-color",text:"xs white",p:"x-2 y-1","m-1":"",rounded:"$bew-radius-half"},Jee={key:1,pos:"absolute bottom-0 right-0",bg:"black opacity-60",m:"2",p:"x-2 y-1",text:"white xs","rounded-8":""},ete={"w-full":"",pos:"absolute bottom-0",bg:"white opacity-60"},tte={flex:"","justify-between":"","w-full":"","h-full":""},ite={flex:"~ col"},nte=["href","title"],ste={class:"keep-two-lines",overflow:"hidden",text:"lg overflow-ellipsis"},rte=["href"],ote=["src"],ate={key:0,text:"$bew-theme-color",flex:"","items-center":"","gap-1":"",m:"l-2"},lte={display:"xl:none",flex:"","items-center":"",text:"$bew-text-3 sm","mt-auto":""},ute={"text-xl":"","mr-2":"","lh-0":""},cte={key:0,"i-mingcute:cellphone-line":""},dte={key:1,"i-mingcute:tv-1-line":""},fte={key:2,"i-mingcute:pad-line":""},hte={key:3,"i-mingcute:tv-2-line":""},pte=["onClick"],mte={relative:"",w:"full md:40% lg:30% xl:25%",order:"1 md:2 lg:2"},gte={pos:"sticky top-120px",flex:"~ col gap-4","justify-start":"","my-10":"","w-full":""},vte=["placeholder"],_te=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"History",setup(t){const{t:e}=St(),i=z(),n=z(!1),s=Mt([]),r=z(1),o=z(),a=z(),{handlePageRefresh:l,handleReachBottom:u,haveScrollbar:c}=$t(),d=ge(()=>Xi);st(()=>{h(),_(),f()});function f(){u.value=()=>{i.value||n.value||setTimeout(()=>{!i.value&&!n.value&&(o.value?p():h())},50)},l.value=()=>{s.length=0,r.value=1,n.value=!1,h()}}function h(){i.value=!0,ze.history.getHistoryList({type:"all",view_at:s.length>0?s[s.length-1].view_at:0}).then(async I=>{if(I.code===0){if(Array.isArray(I.data.list)&&I.data.list.length>0&&s.push(...I.data.list),s.length!==0&&I.data.list.length<20){i.value=!1,n.value=!0;return}n.value=!1,!await c()&&!n.value&&h()}}).finally(()=>{i.value=!1})}function p(){i.value=!0,ze.history.searchHistoryList({pn:r.value++,keyword:o.value}).then(I=>{if(I.code===0){if(s.length!==0&&I.data.list.length<20){i.value=!1,n.value=!0;return}I.data.list.forEach(D=>{s.push(D)}),n.value=!1}}).finally(()=>{i.value=!1})}function m(){s.length=0,r.value=1,n.value=!1,o.value?p():h()}function g(I,D){ze.history.deleteHistoryItem({kid:`${D.history.business}_${D.history.oid}`,csrf:oi()}).then(R=>{R.code===0&&s.splice(I,1)})}function v(I){return I.uri?I.uri:I.history.business===Xi.ARCHIVE?I?.videos&&I.videos>0?`https://www.bilibili.com/video/${I.history.bvid}?p=${I.history.page}`:`https://www.bilibili.com/video/${I.history.bvid}`:I.history.business===Xi.LIVE?`https://live.bilibili.com/${I.history.oid}`:I.history.business===Xi.ARTICLE||I.history.business===Xi.ARTICLE_LIST?I.history.cid===0?`https://www.bilibili.com/read/cv${I.history.oid}`:`https://www.bilibili.com/read/cv${I.history.cid}`:""}function b(I){return(I.history.business==="article"||I.history.business==="article-list")&&I.covers?Li(`${I.covers[0]}`):Li(I.cover)}function _(){ze.history.getHistoryPauseStatus().then(I=>{I.code===0&&(a.value=I.data)})}function y(I){ze.history.setHistoryPauseStatus({csrf:oi(),switch:I}).then(D=>{D.code===0&&_()})}function E(){ze.history.clearAllHistory({csrf:oi()}).then(I=>{I.code===0&&(s.length=0)})}function S(){confirm(e("history.clear_all_watch_history_confirm"))&&E()}function A(){confirm(e("history.pause_watch_history_confirm"))&&y(!0)}function C(){confirm(e("history.turn_on_watch_history_confirm"))&&y(!1)}function T(){location.href="https://passport.bilibili.com/login"}return(I,D)=>{const R=Ge("Progress"),O=Ge("ALink"),M=Ge("Empty"),U=Ge("loading"),$=Ge("Button");return w(oi)()?(L(),P("div",zee,[x("main",Gee,[x("h3",Wee,G(I.$t("history.title")),1),F(so,{name:"list"},{default:H(()=>[(L(!0),P(Te,null,Ne(w(s),(B,W)=>(L(),_e(O,{key:B.kid,type:"videoCard",href:v(B),block:"",class:"group",flex:"","cursor-pointer":""},{default:H(()=>[x("div",Kee,[D[2]||(D[2]=x("i",{pos:"absolute left--1px","w-2":"","h-2":"","rounded-6":"",bg:"$bew-fill-3","group-hover:bg":"$bew-theme-color",transform:"~ translate-x--1/2","duration-300":""},null,-1)),x("div",Yee,G(w(Af)(B.view_at*1e3,"YYYY-MM-DD HH:mm:ss").value),1)]),x("section",Xee,[x("div",qee,[x("img",{w:"full","aspect-video":"",src:`${b(B)}@480w_270h_1c`,alt:B.title,"object-cover":""},null,8,Zee),B.history.business!==w(d).ARCHIVE?(L(),P("span",Qee,[B.history.business===w(d).LIVE?(L(),P(Te,{key:0},[He(" Livestreaming ")],64)):B.history.business===w(d).PGC?(L(),P(Te,{key:1},[He(" PGC ")],64)):X("",!0)])):X("",!0),B.history.business===w(d).ARCHIVE||B.history.business===w(d).PGC?(L(),P("div",Jee,G(`${B.progress===-1?w(Tn)(B.duration):w(Tn)(B.progress)} /
                      ${w(Tn)(B.duration)}`),1)):X("",!0),x("div",ete,[B.history.business===w(d).ARCHIVE||B.history.business===w(d).PGC?(L(),_e(R,{key:0,percentage:B.progress/B.duration*100},null,8,["percentage"])):X("",!0)])]),x("div",tte,[x("div",ite,[x("a",{href:`${v(B)}`,target:"_blank",title:B.show_title?B.show_title:B.title},[x("h3",ste,G(B.show_title?B.show_title:B.title),1)],8,nte),x("a",{"un-text":"$bew-text-2 sm",m:"t-4 b-2",flex:"~ items-center","cursor-pointer":"","w-fit":"",rounded:"$bew-radius","hover:color":"$bew-theme-color","hover:bg":"$bew-theme-color-10","duration-300":"","pr-2":"",href:B.author_mid?`https://space.bilibili.com/${B.author_mid}`:B.uri,target:"_blank"},[x("img",{src:w(Li)(`${B.author_face?B.author_face:B.cover}@40w_40h_1c`),"w-30px":"","aspect-square":"","object-cover":"",alt:"",rounded:"1/2","mr-2":""},null,8,ote),He(" "+G(B.author_name?B.author_name:B.title)+" ",1),B.live_status===1?(L(),P("span",ate,[...D[3]||(D[3]=[x("div",{"i-tabler:live-photo":""},null,-1),He(" Live ",-1)])])):X("",!0)],8,rte),x("div",lte,[x("span",ute,[B.history.dt===1||B.history.dt===3||B.history.dt===5||B.history.dt===7?(L(),P("i",cte)):X("",!0),B.history.dt===2?(L(),P("i",dte)):X("",!0),B.history.dt===4||B.history.dt===6?(L(),P("i",fte)):X("",!0),B.history.dt===33?(L(),P("i",hte)):X("",!0)]),x("span",null,G(w(Af)(B.view_at*1e3,"YYYY-MM-DD HH:mm:ss").value),1)])]),x("button",{text:"2xl $bew-text-3","hover:color":"$bew-theme-color","opacity-0":"","group-hover:opacity-100":"","p-2":"","duration-300":"",onClick:ft(te=>g(W,B),["prevent","stop"])},[...D[4]||(D[4]=[x("div",{"i-tabler:trash":""},null,-1)])],8,pte)])])]),_:2},1032,["href"]))),128))]),_:1}),w(n)?(L(),_e(M,{key:0,class:"py-4",description:I.$t("common.no_more_content")},null,8,["description"])):X("",!0),F(nt,{name:"fade"},{default:H(()=>[w(i)&&w(s).length!==0&&!w(n)?(L(),_e(U,{key:0,m:"-t-4"})):X("",!0)]),_:1})]),x("aside",mte,[x("div",gte,[Bt(x("input",{"onUpdate:modelValue":D[0]||(D[0]=B=>kt(o)?o.value=B:null),type:"text",placeholder:w(e)("history.search_watch_history"),class:"p-x-14px lh-35px h-35px",rounded:"$bew-radius",bg:"$bew-content-solid",shadow:"$bew-shadow-1","outline-none":"","w-full":"",onKeyup:kl(m,["enter"])},null,40,vte),[[qs,w(o),void 0,{lazy:!0,trim:!0}]]),F($,{block:"",style:{"--b-button-shadow":"var(--bew-shadow-1)"},onClick:S},{left:H(()=>[...D[5]||(D[5]=[x("div",{"i-tabler:trash":""},null,-1)])]),default:H(()=>[He(" "+G(I.$t("history.clear_all_watch_history")),1)]),_:1}),w(a)?(L(),_e($,{key:1,block:"",style:{"--b-button-shadow":"var(--bew-shadow-1)"},onClick:C},{left:H(()=>[...D[7]||(D[7]=[x("div",{"i-ph:play-circle-bold":""},null,-1)])]),default:H(()=>[He(" "+G(I.$t("history.turn_on_watch_history")),1)]),_:1})):(L(),_e($,{key:0,block:"",style:{"--b-button-shadow":"var(--bew-shadow-1)"},onClick:A},{left:H(()=>[...D[6]||(D[6]=[x("div",{"i-ph:pause-circle-bold":""},null,-1)])]),default:H(()=>[He(" "+G(I.$t("history.pause_watch_history")),1)]),_:1}))])])])):(L(),_e(M,{key:1,"mt-6":"",description:w(e)("common.please_log_in_first")},{default:H(()=>[F($,{type:"primary",onClick:D[1]||(D[1]=B=>T())},{default:H(()=>[He(G(I.$t("common.login")),1)]),_:1})]),_:1},8,["description"]))}}})},Symbol.toStringTag,{value:"Module"})),bte={key:0,flex:"~ col md:row lg:row","gap-4":""},yte={w:"full md:60% lg:70% xl:75%",order:"2 md:1 lg:1","mb-6":""},wte={text:"3xl $bew-text-1","font-bold":"","mb-6":""},Ete={rounded:"$bew-radius",flex:"~ gap-6 col md:col lg:row items-start",relative:"","group-hover:bg":"$bew-fill-2","duration-300":"","w-full":"","p-2":"","m-1":"","content-visibility-auto":""},Ste={pos:"relative",bg:"$bew-skeleton",w:"full md:full lg:250px",flex:"shrink-0",rounded:"$bew-radius","overflow-hidden":"","aspect-video":""},xte=["src","alt"],Tte={pos:"absolute bottom-0 right-0",bg:"black opacity-60",m:"2",p:"x-2 y-1",text:"white xs","rounded-8":""},Ate={"w-full":"",pos:"absolute bottom-0",bg:"white opacity-60"},kte={flex:"","justify-between":"","w-full":"","h-full":""},Cte={flex:"~ col"},Lte=["onClick"],Ite=["href"],Rte=["src"],Pte={display:"block xl:none",text:"$bew-text-3 sm","mt-auto":"","mb-2":""},Dte={flex:"","items-center":"","gap-1":""},Ote=["onClick"],Mte=["onClick"],$te=["onClick"],Fte={relative:"",w:"full md:40% lg:30% xl:25%",order:"1 md:2 lg:2"},Bte={pos:"sticky top-120px","w-full":"",h:"230px md:[calc(100vh-160px)]","my-10":"",rounded:"$bew-radius","overflow-hidden":""},Nte={pos:"absolute top-0 left-0","w-full":"","h-inherit":"","z--1":""},Ute=["src"],Vte={pos:"absolute top-0 left-0","w-full":"","h-inherit":"","overflow-overlay":"",flex:"~ col gap-4 justify-start","p-6":""},jte={class:"hidden md:block",rounded:"$bew-radius",style:{"box-shadow":"0 16px 24px -12px rgba(0, 0, 0, .36)"},"aspect-video":"","mb-4":"",bg:"$bew-skeleton"},Hte=["src"],zte={text:"3xl white","fw-600":"",style:{"text-shadow":"0 0 12px rgba(0,0,0,.3)"}},Gte={key:0,flex:"~ col","gap-4":""},Wte=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"WatchLater",setup(t){const{t:e}=St(),{openIframeDrawer:i}=$t(),n=z(),s=z(),r=z([]),o=z(0),{handlePageRefresh:a,handleReachBottom:l,haveScrollbar:u}=$t(),c=z(1),d=z(20);st(()=>{p(),f()});async function f(){n.value=!1,s.value=!1,r.value.length=0,c.value=1,await m()}function h(){m()}function p(){a.value=async()=>{n.value||f()},l.value=async()=>{n.value||s.value||setTimeout(()=>{!n.value&&!s.value&&h()},50)}}async function m(){if(!(n.value||s.value)){n.value=!0;try{const C=await ze.watchlater.getWatchLaterListByPage({pn:c.value,ps:d.value});C.code===0&&(c.value===1&&(o.value=C.data.count),C.data.list.length<d.value&&(s.value=!0),r.value.push(...C.data.list),c.value++,!await u()&&!s.value&&m())}finally{n.value=!1}}}function g(C,T){ze.watchlater.removeFromWatchLater({aid:T,csrf:oi()}).then(I=>{I.code===0&&(r.value.splice(C,1),o.value--)})}function v(){confirm(e("watch_later.clear_all_confirm"))&&(n.value=!0,ze.watchlater.clearAllWatchLater({csrf:oi()}).then(T=>{T.code===0&&f()}).finally(()=>{n.value=!1}))}function b(){confirm(e("watch_later.remove_watched_videos_confirm"))&&ze.watchlater.removeFromWatchLater({viewed:!0,csrf:oi()}).then(T=>{T.code===0&&f()})}function _(){Os("https://www.bilibili.com/list/watchlater")}function y(C){k.value.videoCardLinkOpenMode==="drawer"?i(C):k.value.videoCardLinkOpenMode==="currentTab"?window.open(C,"_self"):k.value.videoCardLinkOpenMode==="background"?Wo(C):Os(C)}function E(){location.href="https://passport.bilibili.com/login"}function S(C){const T=`https://www.bilibili.com/video/${C}/`;k.value.videoCardLinkOpenMode==="drawer"?i(T):k.value.videoCardLinkOpenMode==="currentTab"?window.open(T,"_self"):k.value.videoCardLinkOpenMode==="background"?Wo(T):Os(T)}function A(C,T,I){S(T),g(C,I)}return(C,T)=>{const I=Ge("Empty"),D=Ge("Progress"),R=Ge("Tooltip"),O=Ge("ALink"),M=Ge("loading"),U=Ge("Button");return w(oi)()?(L(),P("div",bte,[x("main",yte,[x("h3",wte,G(w(e)("watch_later.title"))+" ("+G(w(o))+") ",1),w(o)===0&&!w(n)?(L(),_e(I,{key:0})):(L(),P(Te,{key:1},[F(so,{name:"list"},{default:H(()=>[(L(!0),P(Te,null,Ne(w(r),($,B)=>(L(),_e(O,{key:$.aid,href:`https://www.bilibili.com/list/watchlater?bvid=${$.bvid}`,type:"videoCard",class:"group",flex:"","cursor-pointer":""},{default:H(()=>[x("section",Ete,[x("div",Ste,[x("img",{w:"full","aspect-video":"",src:w(Li)(`${$.pic}@480w_270h_1c`),alt:$.title,"object-cover":""},null,8,xte),x("div",Tte,G(`${$.progress===-1?w(Tn)($.duration):w(Tn)($.progress)} /
                      ${w(Tn)($.duration)}`),1),x("div",Ate,[F(D,{percentage:$.progress/$.duration*100},null,8,["percentage"])])]),x("div",kte,[x("div",Cte,[x("a",{class:"keep-two-lines",overflow:"hidden","un-text":"lg overflow-ellipsis",onClick:ft(W=>y(`https://www.bilibili.com/list/watchlater?bvid=${$.bvid}`),["stop","prevent"])},G($.title),9,Lte),x("a",{"un-text":"$bew-text-2 sm",m:"t-4 b-2",flex:"~","items-center":"","cursor-pointer":"","w-fit":"",rounded:"$bew-radius","hover:color":"$bew-theme-color","hover:bg":"$bew-theme-color-10","duration-300":"","pr-2":"",href:`//space.bilibili.com/${$.owner.mid}`,target:"_blank",onClick:T[0]||(T[0]=ft(()=>{},["stop"]))},[x("img",{src:w(Li)(`${$.owner.face}@40w_40h_1c`),"w-30px":"","aspect-square":"","object-cover":"",alt:"",rounded:"1/2","mr-2":""},null,8,Rte),He(" "+G($.owner.name),1)],8,Ite),x("p",Pte,G(w(Af)($.pubdate*1e3,"YYYY-MM-DD HH:mm:ss").value),1)]),x("div",Dte,[F(R,{content:w(e)("watch_later.play_video"),placement:"top"},{default:H(()=>[x("button",{text:"2xl $bew-text-3","hover:color":"$bew-theme-color","opacity-0":"","group-hover:opacity-100":"","p-2":"","duration-300":"",onClick:ft(W=>A(B,$.bvid,$.aid),["prevent","stop"])},[...T[2]||(T[2]=[x("div",{"i-tabler:player-play":""},null,-1)])],8,Ote)]),_:2},1032,["content"]),F(R,{content:w(e)("watch_later.play_in_watch_later"),placement:"top"},{default:H(()=>[x("button",{text:"2xl $bew-text-3","hover:color":"$bew-theme-color","opacity-0":"","group-hover:opacity-100":"","p-2":"","duration-300":"",onClick:ft(W=>y(`https://www.bilibili.com/list/watchlater?bvid=${$.bvid}`),["prevent","stop"])},[...T[3]||(T[3]=[x("div",{"i-tabler:list-check":""},null,-1)])],8,Mte)]),_:2},1032,["content"]),F(R,{content:w(e)("watch_later.remove_from_watch_later"),placement:"top"},{default:H(()=>[x("button",{text:"2xl $bew-text-3","hover:color":"$bew-theme-color","opacity-0":"","group-hover:opacity-100":"","p-2":"","duration-300":"",onClick:ft(W=>g(B,$.aid),["prevent","stop"])},[...T[4]||(T[4]=[x("div",{"i-tabler:trash":""},null,-1)])],8,$te)]),_:2},1032,["content"])])])])]),_:2},1032,["href"]))),128))]),_:1}),F(nt,{name:"fade"},{default:H(()=>[w(n)&&w(r).length!==0&&!w(s)?(L(),_e(M,{key:0,m:"-t-4"})):X("",!0)]),_:1})],64))]),x("aside",Fte,[x("div",Bte,[x("div",Nte,[T[5]||(T[5]=x("div",{absolute:"","w-full":"","h-inherit":"",bg:"$bew-fill-4"},null,-1)),w(r)[0]?(L(),P("img",{key:0,src:w(Li)(`${w(r)[0].pic}@480w_270h_1c`),"w-full":"","h-full":"",object:"cover center","blur-40px":"",relative:"","z--1":""},null,8,Ute)):X("",!0)]),x("main",Vte,[x("picture",jte,[w(r)[0]?(L(),P("img",{key:0,src:w(Li)(`${w(r)[0].pic}@480w_270h_1c`),rounded:"$bew-radius","aspect-video":"","w-full":""},null,8,Hte)):X("",!0)]),x("h3",zte,G(w(e)("watch_later.title"))+" ("+G(w(o))+") ",1),w(o)>0?(L(),P("p",Gte,[F(U,{color:"rgba(255,255,255,.35)",block:"","text-color":"white",strong:"","flex-1":"",onClick:_},{left:H(()=>[...T[6]||(T[6]=[x("div",{"i-tabler:player-play":""},null,-1)])]),default:H(()=>[He(" "+G(w(e)("common.play_all")),1)]),_:1}),F(U,{color:"rgba(255,255,255,.35)",block:"","text-color":"white",strong:"","flex-1":"",onClick:v},{left:H(()=>[...T[7]||(T[7]=[x("div",{"i-tabler:trash":""},null,-1)])]),default:H(()=>[He(" "+G(w(e)("watch_later.clear_all")),1)]),_:1}),F(U,{color:"rgba(255,255,255,.35)",block:"","text-color":"white",strong:"","flex-1":"",onClick:b},{left:H(()=>[...T[8]||(T[8]=[x("div",{"i-tabler:circle-minus":""},null,-1)])]),default:H(()=>[He(" "+G(w(e)("watch_later.remove_watched_videos")),1)]),_:1})])):X("",!0)])])])])):(L(),_e(I,{key:1,"mt-6":"",description:w(e)("common.please_log_in_first")},{default:H(()=>[F(U,{type:"primary",onClick:T[1]||(T[1]=$=>E())},{default:H(()=>[He(G(C.$t("common.login")),1)]),_:1})]),_:1},8,["description"]))}}})},Symbol.toStringTag,{value:"Module"})),Kte={key:0,flex:"~ col md:row lg:row","gap-6":""},Yte={w:"full md:60% lg:70% xl:75%",order:"2 md:1 lg:1",relative:""},Xte=["onClick"],qte={relative:"",w:"full md:40% lg:30% xl:25%",class:"hidden md:block",order:"1 md:2 lg:2"},Zte={pos:"sticky top-120px","w-full":"",h:"auto md:[calc(100vh-160px)]","my-10":"",rounded:"$bew-radius","overflow-hidden":""},Qte={pos:"absolute top-0 left-0","w-full":"","h-full":"","z--1":""},Jte=["src"],eie={pos:"absolute top-0 left-0","w-full":"","h-full":"","overflow-overlay":"",flex:"~ col gap-4 justify-start","p-6":""},tie={rounded:"$bew-radius",style:{"box-shadow":"0 16px 24px -12px rgba(0, 0, 0, .36)"},"aspect-video":"","mb-4":"",bg:"$bew-skeleton"},iie=["src"],nie={key:1,"aspect-video":"","w-full":""},sie={text:"3xl white","fw-600":"",style:{"text-shadow":"0 0 12px rgba(0,0,0,.3)"}},rie={flex:"~ col","gap-4":""},oie={class:"category-list","h-full":"","min-h-200px":"","overflow-overlay":"",border:"1 color-[rgba(255,255,255,.2)]",rounded:"$bew-radius"},aie=["onClick"],lie={key:0,"ml-2":"","color-white":"","color-opacity-60":""},uie=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Favorites",setup(t){const{t:e}=St(),i=Mt([]),n=Mt([]),s=Mt([]),r=z(),o=z(""),a=z(!1),l=z(1),u=z(""),c=z("current"),{handlePageRefresh:d,handleReachBottom:f,haveScrollbar:h}=$t(),p=z(!1),m=z(!0),g=z(!1),v=ge(()=>[{label:e("favorites.search_current_folder"),value:"current"},{label:e("favorites.search_all_folders"),value:"all"}]);st(()=>{rn.off(Na),rn.on(Na,M=>{a.value=!1,k.value.autoHideTopBar&&k.value.showTopBar&&(M?a.value=!1:a.value=!0)}),_(),b()});async function b(){await y(),i.length>0&&S(i[0])}ki(()=>{rn.off(Na)});function _(){f.value=async()=>{p.value||g.value||setTimeout(()=>{if(!p.value&&!g.value)if(c.value==="all"){const M=i.length>0?i[0].id:0;E(M,++l.value,u.value,1)}else E(r.value.id,++l.value,u.value,0)},50)},d.value=()=>{p.value||(n.length=0,l.value=1,g.value=!1,A())}}async function y(){await ze.favorite.getFavoriteCategories({up_mid:Ds()}).then(M=>{M.code===0&&(Object.assign(i,M.data.list),s.length=0,i.forEach(U=>{s.push({label:U.title,value:U})}))})}async function E(M,U,$="",B=0){U===1&&(m.value=!0),p.value=!0;try{const W=await ze.favorite.getFavoriteResources({media_id:M,pn:U,keyword:$,type:B});if(W.code===0&&(c.value==="current"&&(o.value=W.data.info.cover),Array.isArray(W.data.medias)&&W.data.medias.length>0&&n.push(...W.data.medias),W.data.medias||(g.value=!0),!await h()&&!g.value))if(c.value==="all"){const te=i.length>0?i[0].id:0;await E(te,++l.value,$,1)}else await E(r.value.id,++l.value,$,0)}finally{p.value=!1,m.value=!1}}async function S(M){p.value||(l.value=1,r.value=M,n.length=0,g.value=!1,c.value==="current"?(o.value="",E(M.id,1,u.value,0)):o.value="")}function A(){if(!(c.value==="all"&&!u.value.trim()))if(l.value=1,n.length=0,g.value=!1,c.value==="all"){const M=i.length>0?i[0].id:0;E(M,l.value,u.value,1)}else r.value&&E(r.value.id,l.value,u.value,0)}function C(){l.value=1,g.value=!1,c.value==="current"&&r.value&&!o.value&&E(r.value.id,1,u.value,0)}function T(){c.value!=="all"&&Os(`https://www.bilibili.com/list/ml${r.value?.id}`)}function I(){location.href="https://passport.bilibili.com/login"}function D(M){confirm(e("favorites.unfavorite_confirm"))&&ze.favorite.patchDelFavoriteResources({resources:`${M.id}:${M.type}`,media_id:r.value?.id,csrf:oi()}).then($=>{$.code===0&&n.splice(n.indexOf(M),1)})}function R(M){return M.link.includes("bilibili://music")}function O(M){return{id:M.id,duration:M.duration,title:M.title,cover:M.cover,author:{name:M.upper.name,authorFace:M.upper.face,mid:M.upper.mid},view:M.cnt_info.play,danmaku:M.cnt_info.danmaku,publishedTimestamp:M.pubtime,bvid:R(M)?void 0:M.bvid,url:R(M)?`https://www.bilibili.com/audio/au${M.id}`:void 0,threePointV2:[]}}return(M,U)=>{const $=Ge("Select"),B=Ge("Input"),W=Ge("Button"),te=Ge("Empty"),re=Ge("Tooltip");return w(oi)()?(L(),P("div",Kte,[x("main",Yte,[x("div",{fixed:"","z-10":"",absolute:"","p-2":"",flex:"~ gap-2","items-center":"",bg:"$bew-elevated-solid",rounded:"$bew-radius",shadow:"$bew-shadow-2","mt--2":"",transition:"all 300 ease-in-out",class:Ie({hide:w(a)})},[F($,{modelValue:w(r),"onUpdate:modelValue":U[0]||(U[0]=q=>kt(r)?r.value=q:null),"w-150px":"",options:w(s),onChange:U[1]||(U[1]=q=>S(q))},null,8,["modelValue","options"]),F($,{modelValue:w(c),"onUpdate:modelValue":U[2]||(U[2]=q=>kt(c)?c.value=q:null),"w-120px":"",options:w(v),onChange:C},null,8,["modelValue","options"]),F(B,{modelValue:w(u),"onUpdate:modelValue":U[3]||(U[3]=q=>kt(u)?u.value=q:null),"w-250px":"",placeholder:w(c)==="all"?w(e)("favorites.global_search_placeholder"):w(e)("favorites.search_placeholder"),onEnter:A},null,8,["modelValue","placeholder"]),F(W,{type:"primary",disabled:w(c)==="all"&&!w(u).trim(),onClick:A},{left:H(()=>[...U[6]||(U[6]=[x("div",{"i-tabler:search":""},null,-1)])]),_:1},8,["disabled"])],2),w(c)==="all"&&!w(u).trim()&&w(n).length===0&&!w(p)?(L(),_e(te,{key:0,m:"t-55px b-6",description:w(e)("favorites.global_search_hint")},null,8,["description"])):(L(),_e(rs,{key:1,m:"t-55px b-6",items:w(n),"transform-item":O,"get-item-key":q=>q.id,"grid-layout":"adaptive",loading:w(p)||w(m),"no-more-content":w(g),"empty-description":M.$t("common.no_more_content"),"enable-row-padding":"",onRefresh:U[4]||(U[4]=()=>w(d)?.())},{coverTopLeft:H(({item:q})=>[x("button",{p:"x-2 y-1",m:"1",rounded:"$bew-radius",text:"!white xl",bg:"black opacity-60 hover:$bew-error-color-80",onClick:ft(le=>D(q),["prevent","stop"])},[F(re,{content:M.$t("favorites.unfavorite"),placement:"bottom",type:"dark"},{default:H(()=>[...U[7]||(U[7]=[x("div",{"i-ic-baseline-clear":""},null,-1)])]),_:1},8,["content"])],8,Xte)]),_:1},8,["items","get-item-key","loading","no-more-content","empty-description"]))]),x("aside",qte,[x("div",Zte,[x("div",Qte,[U[8]||(U[8]=x("div",{absolute:"","w-full":"","h-full":"",bg:"$bew-fill-4"},null,-1)),w(o)?(L(),P("img",{key:0,src:w(Li)(`${w(o)}@480w_270h_1c`),"w-full":"","h-full":"",object:"cover center","blur-40px":"",relative:"","z--1":""},null,8,Jte)):X("",!0)]),x("main",eie,[x("picture",tie,[w(o)?(L(),P("img",{key:0,src:w(Li)(`${w(o)}@480w_270h_1c`),rounded:"$bew-radius","aspect-video":"","w-full":"","object-cover":""},null,8,iie)):(L(),P("div",nie))]),x("h3",sie,G(w(r)?.title),1),x("p",rie,[F(W,{color:"rgba(255,255,255,.35)",block:"","text-color":"white",strong:"","flex-1":"",onClick:T},{left:H(()=>[...U[9]||(U[9]=[x("div",{"i-tabler:player-play":""},null,-1)])]),default:H(()=>[He(" "+G(w(e)("common.play_all")),1)]),_:1})]),x("ul",oie,[(L(!0),P(Te,null,Ne(w(s),q=>(L(),P("li",{key:q.value.id,"border-b":"1 color-[rgba(255,255,255,.2)]","lh-30px":"","px-4":"","cursor-pointer":"","hover:bg":"[rgba(255,255,255,.35)]","duration-300":"","color-white":"",flex:"","justify-between":"",style:Ue({background:q.value.id===w(r)?.id?"rgba(255,255,255,.35)":"",pointerEvents:w(m)?"none":"auto"}),onClick:le=>S(q.value)},[x("span",null,G(q.label),1),q.value.id!==-1?(L(),P("span",lie,G(q.value.media_count),1)):X("",!0)],12,aie))),128))])])])])])):(L(),_e(te,{key:1,"mt-6":"",description:w(e)("common.please_log_in_first")},{default:H(()=>[F(W,{type:"primary",onClick:U[5]||(U[5]=q=>I())},{default:H(()=>[He(G(M.$t("common.login")),1)]),_:1})]),_:1},8,["description"]))}}}),[["__scopeId","data-v-2b388e02"]])},Symbol.toStringTag,{value:"Module"})),cie={};function die(t,e){return L(),P("div",null," Moments (WIP) ")}const fie=Object.freeze(Object.defineProperty({__proto__:null,default:qe(cie,[["render",die]])},Symbol.toStringTag,{value:"Module"}));function qw(t=location.href){const e=t.match(/\/video\/(BV[a-zA-Z0-9]+)/);if(e)return{bvid:e[1]};const i=t.match(/\/video\/av(\d+)/);return i?{aid:Number.parseInt(i[1])}:{}}function hie(){if(document.querySelector(".bewly-watch-later-btn"))return;const t=document.querySelector(".video-tool-more");if(!t)return;const{bvid:e,aid:i}=qw();if(!e&&!i)return;const n=document.createElement("div");n.className="video-toolbar-right-item bewly-watch-later-btn",n.style.cssText=`
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.2s, transform 0.15s ease;
    height: 32px;
    width: 32px;
    padding: 0;
    margin: 0 4px;
  `,n.innerHTML=`
    <div class="video-toolbar-item-icon" style="
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    ">
      <i class="i-mingcute:carplay-line" style="
        font-size: 18px;
        line-height: 1;
        color: var(--text1);
        transition: color 0.2s ease;
      "></i>
    </div>
  `,n.addEventListener("click",async()=>{try{const s=n.querySelector("i");if(!s)return;n.style.pointerEvents="none";const{default:r}=await Promise.resolve().then(()=>VO),{getCSRF:o}=await Promise.resolve().then(()=>Mk),{useTopBarStore:a}=await Promise.resolve().then(()=>jO),l={csrf:o()};e?l.bvid=e:i&&(l.aid=i),(await r.watchlater.saveToWatchLater(l)).code===0?(s.className="i-mingcute:check-line",s.style.color="var(--bew-theme-color)",n.style.transform="scale(1.1)",setTimeout(()=>{n.style.transform="scale(1)"},150),setTimeout(()=>{a().getAllWatchLaterList()},1e3),setTimeout(()=>{s.className="i-mingcute:carplay-line",s.style.color="var(--text1)",n.style.pointerEvents="auto"},2e3)):n.style.pointerEvents="auto"}catch(s){console.error(":",s),n.style.pointerEvents="auto"}}),t.parentNode?.insertBefore(n,t)}const pie=Object.freeze(Object.defineProperty({__proto__:null,addWatchLaterButton:hie,extractVideoIds:qw},Symbol.toStringTag,{value:"Module"})),mie=["innerHTML"],gie=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"General",setup(t){const{t:e,locale:i}=St(),n=ge(()=>[{label:e("settings.select_language_opt.english"),value:"en"},{label:e("settings.select_language_opt.mandarin_cn"),value:"cmn-CN"},{label:e("settings.select_language_opt.mandarin_tw"),value:"cmn-TW"},{label:e("settings.select_language_opt.jyut"),value:"jyut"}]),s=ge(()=>[{label:e("settings.link_opening_behavior_opt.current_tab"),value:"currentTab"},{label:e("settings.link_opening_behavior_opt.current_tab_if_not_homepage"),value:"currentTabIfNotHomepage"},{label:e("settings.link_opening_behavior_opt.background"),value:"background"},{label:e("settings.link_opening_behavior_opt.new_tab"),value:"newTab"}]),r=ge(()=>[{label:e("settings.link_opening_behavior_opt.current_tab"),value:"currentTab"},{label:e("settings.link_opening_behavior_opt.drawer"),value:"drawer"},{label:e("settings.link_opening_behavior_opt.background"),value:"background"},{label:e("settings.link_opening_behavior_opt.new_tab"),value:"newTab"}]);return Pe(()=>k.value.language,o=>{i.value=o}),(o,a)=>(L(),P("div",null,[F(It,{title:o.$t("settings.group_common")},{default:H(()=>[F(Oe,{title:o.$t("settings.touch_screen_optimization"),desc:o.$t("settings.touch_screen_optimization_desc")},{default:H(()=>[F(Je,{modelValue:w(k).touchScreenOptimization,"onUpdate:modelValue":a[0]||(a[0]=l=>w(k).touchScreenOptimization=l)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:o.$t("settings.enable_grid_layout_switcher")},{default:H(()=>[F(Je,{modelValue:w(k).enableGridLayoutSwitcher,"onUpdate:modelValue":a[1]||(a[1]=l=>w(k).enableGridLayoutSwitcher=l)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:o.$t("settings.enable_horizontal_scrolling"),desc:o.$t("settings.enable_horizontal_scrolling_desc")},{default:H(()=>[F(Je,{modelValue:w(k).enableHorizontalScrolling,"onUpdate:modelValue":a[2]||(a[2]=l=>w(k).enableHorizontalScrolling=l)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"]),F(It,{title:o.$t("settings.group_language")},{default:H(()=>[F(Oe,{title:o.$t("settings.select_language")},{default:H(()=>[F(hi,{modelValue:w(k).language,"onUpdate:modelValue":a[3]||(a[3]=l=>w(k).language=l),options:w(n),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:o.$t("settings.group_link_opening_behavior")},{default:H(()=>[F(Oe,{title:o.$t("settings.top_bar_link_opening_behavior")},{default:H(()=>[F(hi,{modelValue:w(k).topBarLinkOpenMode,"onUpdate:modelValue":a[4]||(a[4]=l=>w(k).topBarLinkOpenMode=l),options:w(s),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,{title:o.$t("settings.video_card_link_opening_behavior")},{default:H(()=>[F(hi,{modelValue:w(k).videoCardLinkOpenMode,"onUpdate:modelValue":a[5]||(a[5]=l=>w(k).videoCardLinkOpenMode=l),options:w(r),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,{title:o.$t("settings.search_bar_link_opening_behavior")},{default:H(()=>[F(hi,{modelValue:w(k).searchBarLinkOpenMode,"onUpdate:modelValue":a[6]||(a[6]=l=>w(k).searchBarLinkOpenMode=l),options:w(s),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,null,{title:H(()=>[x("div",{innerHTML:o.$t("settings.close_drawer_without_pressing_esc_again")},null,8,mie)]),default:H(()=>[F(Je,{modelValue:w(k).closeDrawerWithoutPressingEscAgain,"onUpdate:modelValue":a[7]||(a[7]=l=>w(k).closeDrawerWithoutPressingEscAgain=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["title"]),F(It,{title:o.$t("settings.group_ad_blocking")},{default:H(()=>[F(Oe,{title:o.$t("settings.block_ads")},{default:H(()=>[F(Je,{modelValue:w(k).blockAds,"onUpdate:modelValue":a[8]||(a[8]=l=>w(k).blockAds=l)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:o.$t("settings.block_top_search_page_ads"),desc:o.$t("settings.block_top_search_page_ads_desc")},{default:H(()=>[F(Je,{modelValue:w(k).blockTopSearchPageAds,"onUpdate:modelValue":a[9]||(a[9]=l=>w(k).blockTopSearchPageAds=l)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:o.$t("settings.clean_url_argument"),desc:o.$t("settings.clean_url_argument_desc")},{default:H(()=>[F(Je,{modelValue:w(k).cleanUrlArgument,"onUpdate:modelValue":a[10]||(a[10]=l=>w(k).cleanUrlArgument=l)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"])]))}})},Symbol.toStringTag,{value:"Module"})),vie={class:"shadow-curve-editor"},_ie=["width","height"],bie={class:"hint"},vi=16,yie=qe(Me({__name:"ShadowCurveEditor",props:{modelValue:{},width:{default:280},height:{default:160}},emits:["update:modelValue"],setup(t,{emit:e}){const i=t,n=e,s=z(null),r=z(null),o=z(!1),a=ge(()=>[...i.modelValue].sort((_,y)=>_.position-y.position));function l(_){const y=i.width-vi*2,E=i.height-vi*2;return{x:vi+_.position/100*y,y:vi+(100-_.opacity)/100*E}}function u(_,y){const E=i.width-vi*2,S=i.height-vi*2,A=Math.max(0,Math.min(100,(_-vi)/E*100)),C=Math.max(0,Math.min(100,100-(y-vi)/S*100));return{position:Math.round(A),opacity:Math.round(C)}}function c(_,y,E=10){for(let S=0;S<i.modelValue.length;S++){const A=l(i.modelValue[S]);if(Math.sqrt((_-A.x)**2+(y-A.y)**2)<=E)return S}return null}function d(_,y,E=8){const S=a.value;if(S.length<2)return!1;for(let A=0;A<S.length-1;A++){const C=l(S[A]),T=l(S[A+1]);if(_<Math.min(C.x,T.x)-E||_>Math.max(C.x,T.x)+E)continue;const I=Math.sqrt((T.x-C.x)**2+(T.y-C.y)**2);if(I===0)continue;const D=Math.max(0,Math.min(1,((_-C.x)*(T.x-C.x)+(y-C.y)*(T.y-C.y))/I**2)),R=C.x+D*(T.x-C.x),O=C.y+D*(T.y-C.y);if(Math.sqrt((_-R)**2+(y-O)**2)<=E)return!0}return!1}function f(){const _=s.value;if(!_)return;const y=_.getContext("2d");if(!y)return;const E=window.devicePixelRatio||1;_.width=i.width*E,_.height=i.height*E,y.scale(E,E),y.clearRect(0,0,i.width,i.height);const S=i.width-vi*2,A=i.height-vi*2;y.strokeStyle="var(--bew-border-color, rgba(128, 128, 128, 0.2))",y.lineWidth=1;for(let C=0;C<=10;C++){const T=vi+C/10*S;y.beginPath(),y.moveTo(T,vi),y.lineTo(T,vi+A),y.stroke()}for(let C=0;C<=10;C++){const T=vi+C/10*A;y.beginPath(),y.moveTo(vi,T),y.lineTo(vi+S,T),y.stroke()}if(y.strokeStyle="var(--bew-border-color, rgba(128, 128, 128, 0.5))",y.lineWidth=1.5,y.strokeRect(vi,vi,S,A),a.value.length>=2){y.beginPath();const C=l(a.value[0]);y.moveTo(C.x,vi+A),y.lineTo(C.x,C.y);for(const I of a.value){const D=l(I);y.lineTo(D.x,D.y)}const T=l(a.value[a.value.length-1]);y.lineTo(T.x,vi+A),y.closePath(),y.fillStyle="rgba(0, 0, 0, 0.15)",y.fill()}y.beginPath(),y.strokeStyle="var(--bew-theme-color, #00a1d6)",y.lineWidth=3,y.lineJoin="round",y.lineCap="round",a.value.forEach((C,T)=>{const I=l(C);T===0?y.moveTo(I.x,I.y):y.lineTo(I.x,I.y)}),y.stroke(),a.value.forEach(C=>{const T=i.modelValue.findIndex(O=>O.position===C.position&&O.opacity===C.opacity),I=C.position===0||C.position===100,D=r.value===T,R=l(C);y.beginPath(),y.arc(R.x,R.y,D?7:5,0,Math.PI*2),D?(y.fillStyle="var(--bew-theme-color, #00a1d6)",y.strokeStyle="#fff",y.lineWidth=2,y.fill(),y.stroke()):I?(y.fillStyle="rgba(128, 128, 128, 0.8)",y.strokeStyle="#fff",y.lineWidth=2,y.fill(),y.stroke()):(y.fillStyle="#fff",y.strokeStyle="var(--bew-theme-color, #00a1d6)",y.lineWidth=2,y.fill(),y.stroke())}),y.fillStyle="var(--bew-text-2, rgba(128, 128, 128, 0.8))",y.font="10px sans-serif",y.textAlign="center",y.fillText("0%",vi,i.height-2),y.fillText("100%",i.width-vi,i.height-2),y.textAlign="left",y.fillText("100",2,vi+4),y.fillText("0",2,i.height-vi)}function h(_){const y=s.value?.getBoundingClientRect();if(!y)return;const E=_.clientX-y.left,S=_.clientY-y.top,A=c(E,S);if(A!==null)r.value=A,o.value=!0;else if(d(E,S)){const C=u(E,S);if(C.position>0&&C.position<100){const T=[...i.modelValue,C];n("update:modelValue",T),ot(()=>{const I=i.modelValue.findIndex(D=>D.position===C.position&&D.opacity===C.opacity);I!==-1&&(r.value=I,o.value=!0)})}}else r.value=null}function p(_){const y=s.value?.getBoundingClientRect();if(!y)return;const E=_.clientX-y.left,S=_.clientY-y.top;if(s.value&&!o.value){const I=c(E,S),D=d(E,S);I!==null?s.value.style.cursor="grab":D?s.value.style.cursor="crosshair":s.value.style.cursor="default"}if(!o.value||r.value===null)return;s.value&&(s.value.style.cursor="grabbing");const A=u(E,S),C=i.modelValue[r.value];if(!C)return;(C.position===0||C.position===100)&&(A.position=C.position);const T=[...i.modelValue];T[r.value]=A,n("update:modelValue",T)}function m(){o.value=!1}function g(_){_.preventDefault();const y=s.value?.getBoundingClientRect();if(!y)return;const E=_.clientX-y.left,S=_.clientY-y.top,A=c(E,S);A!==null&&v(A)}function v(_){const y=i.modelValue[_];if(y.position===0||y.position===100)return;const E=i.modelValue.filter((S,A)=>A!==_);n("update:modelValue",E),r.value=null}function b(_){(_.key==="Delete"||_.key==="Backspace")&&r.value!==null&&v(r.value)}return st(()=>{f(),document.addEventListener("mousemove",p),document.addEventListener("mouseup",m),document.addEventListener("keydown",b)}),ki(()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",m),document.removeEventListener("keydown",b)}),Pe(()=>i.modelValue,f,{deep:!0}),Pe(()=>[i.width,i.height],f),(_,y)=>(L(),P("div",vie,[x("canvas",{ref_key:"canvasRef",ref:s,width:_.width,height:_.height,style:Ue({width:`${_.width}px`,height:`${_.height}px`}),class:"curve-canvas",onMousedown:h,onContextmenu:g},null,44,_ie),x("p",bie,G(_.$t("settings.video_card_shadow_curve_hint")),1)]))}}),[["__scopeId","data-v-533dd735"]]),wie=["innerHTML"],Eie={flex:"~ col gap-3","w-full":""},Sie={"text-sm":"","shrink-0":"","min-w-24":""},xie={"text-sm":"","shrink-0":""},Tie={flex:"~ gap-2","mt-2":""},Aie={flex:"~ items-center gap-2","w-full":""},kie={"text-sm":"","min-w-8":"","text-right":""},Cie=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"VideoCard",setup(t){const{t:e}=St(),i=["xs","sm","base","lg"],n=["modern","old"],s=ge(()=>i.map(f=>({label:e(`settings.font_size_option.${f}`),value:f}))),r=ge(()=>n.map(f=>({label:e(`settings.video_card_layout_option.${f}`),value:f}))),o=ge(()=>[{label:e("settings.link_opening_behavior_opt.current_tab"),value:"currentTab"},{label:e("settings.link_opening_behavior_opt.drawer"),value:"drawer"},{label:e("settings.link_opening_behavior_opt.background"),value:"background"},{label:e("settings.link_opening_behavior_opt.new_tab"),value:"newTab"}]),a=ge(()=>k.value.videoCardLayout==="modern");function l(){k.value.videoCardShadowCurve=[...ro.videoCardShadowCurve],k.value.videoCardShadowHeight=ro.videoCardShadowHeight}const u=[{key:"base",label:"< 640px"},{key:"sm",label:` ${oc.sm}px`},{key:"md",label:` ${oc.md}px`},{key:"lg",label:` ${oc.lg}px`},{key:"xl",label:` ${oc.xl}px`},{key:"xxl",label:` ${oc.xxl}px`}];function c(f,h){k.value.gridColumns={...k.value.gridColumns,[f]:h}}function d(){k.value.gridColumns={...Ll}}return(f,h)=>(L(),P("div",null,[F(It,{title:f.$t("settings.group_link_opening_behavior")},{default:H(()=>[F(Oe,{title:f.$t("settings.video_card_link_opening_behavior")},{default:H(()=>[F(hi,{modelValue:w(k).videoCardLinkOpenMode,"onUpdate:modelValue":h[0]||(h[0]=p=>w(k).videoCardLinkOpenMode=p),options:w(o),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,null,{title:H(()=>[x("div",{innerHTML:f.$t("settings.close_drawer_without_pressing_esc_again")},null,8,wie)]),default:H(()=>[F(Je,{modelValue:w(k).closeDrawerWithoutPressingEscAgain,"onUpdate:modelValue":h[1]||(h[1]=p=>w(k).closeDrawerWithoutPressingEscAgain=p)},null,8,["modelValue"])]),_:1})]),_:1},8,["title"]),F(It,{title:f.$t("settings.group_video_card_grid")},{default:H(()=>[F(Oe,{title:f.$t("settings.grid_breakpoints"),desc:f.$t("settings.grid_breakpoints_desc")},{bottom:H(()=>[x("div",Eie,[(L(),P(Te,null,Ne(u,p=>x("div",{key:p.key,flex:"~ items-center gap-3"},[x("span",Sie,G(p.label),1),F(rr,{"model-value":w(k).gridColumns[p.key],type:"number",min:1,max:12,"w-20":"","onUpdate:modelValue":m=>c(p.key,Number(m)||1)},null,8,["model-value","onUpdate:modelValue"]),x("span",xie,G(f.$t("settings.grid_columns_unit")),1)])),64)),x("div",Tie,[F(Ir,{type:"tertiary",size:"small",onClick:d},{default:H(()=>[He(G(f.$t("common.operation.reset")),1)]),_:1})])])]),_:1},8,["title","desc"])]),_:1},8,["title"]),F(It,{title:f.$t("settings.group_video_card")},{default:H(()=>[F(Oe,{title:f.$t("settings.video_card_layout"),desc:f.$t("settings.video_card_layout_desc")},{default:H(()=>[F(hi,{modelValue:w(k).videoCardLayout,"onUpdate:modelValue":h[2]||(h[2]=p=>w(k).videoCardLayout=p),options:w(r),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:f.$t("settings.enable_video_preview")},{default:H(()=>[F(Je,{modelValue:w(k).enableVideoPreview,"onUpdate:modelValue":h[3]||(h[3]=p=>w(k).enableVideoPreview=p)},null,8,["modelValue"])]),_:1},8,["title"]),w(k).enableVideoPreview?(L(),P(Te,{key:0},[F(Oe,{title:f.$t("settings.enable_video_ctrl_bar_on_video_card")},{default:H(()=>[F(Je,{modelValue:w(k).enableVideoCtrlBarOnVideoCard,"onUpdate:modelValue":h[4]||(h[4]=p=>w(k).enableVideoCtrlBarOnVideoCard=p)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:f.$t("settings.hover_video_card_delayed")},{default:H(()=>[F(Je,{modelValue:w(k).hoverVideoCardDelayed,"onUpdate:modelValue":h[5]||(h[5]=p=>w(k).hoverVideoCardDelayed=p)},null,8,["modelValue"])]),_:1},8,["title"])],64)):X("",!0),F(Oe,{title:f.$t("settings.show_video_card_recommend_tag"),desc:f.$t("settings.show_video_card_recommend_tag_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showVideoCardRecommendTag,"onUpdate:modelValue":h[6]||(h[6]=p=>w(k).showVideoCardRecommendTag=p)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:f.$t("settings.video_card_title_font_size"),desc:f.$t("settings.video_card_title_font_size_desc")},{default:H(()=>[F(hi,{modelValue:w(k).videoCardTitleFontSize,"onUpdate:modelValue":h[7]||(h[7]=p=>w(k).videoCardTitleFontSize=p),options:w(s),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:f.$t("settings.video_card_author_font_size"),desc:f.$t("settings.video_card_author_font_size_desc")},{default:H(()=>[F(hi,{modelValue:w(k).videoCardAuthorFontSize,"onUpdate:modelValue":h[8]||(h[8]=p=>w(k).videoCardAuthorFontSize=p),options:w(s),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:f.$t("settings.video_card_meta_font_size"),desc:f.$t("settings.video_card_meta_font_size_desc")},{default:H(()=>[F(hi,{modelValue:w(k).videoCardMetaFontSize,"onUpdate:modelValue":h[9]||(h[9]=p=>w(k).videoCardMetaFontSize=p),options:w(s),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),w(a)?(L(),P(Te,{key:1},[F(Oe,{title:f.$t("settings.video_card_shadow_curve"),desc:f.$t("settings.video_card_shadow_curve_desc")},{default:H(()=>[F(yie,{modelValue:w(k).videoCardShadowCurve,"onUpdate:modelValue":h[10]||(h[10]=p=>w(k).videoCardShadowCurve=p)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:f.$t("settings.video_card_shadow_height"),desc:f.$t("settings.video_card_shadow_height_desc")},{default:H(()=>[x("div",Aie,[Bt(x("input",{"onUpdate:modelValue":h[11]||(h[11]=p=>w(k).videoCardShadowHeight=p),type:"range",min:0,max:2,step:.1,"flex-1":"",class:"shadow-height-slider"},null,512),[[qs,w(k).videoCardShadowHeight,void 0,{number:!0}]]),x("span",kie,G(w(k).videoCardShadowHeight.toFixed(1)),1)])]),_:1},8,["title","desc"]),F(Oe,null,{default:H(()=>[F(Ir,{type:"secondary",center:"",onClick:l},{default:H(()=>[He(G(f.$t("settings.video_card_shadow_reset")),1)]),_:1})]),_:1})],64)):X("",!0)]),_:1},8,["title"])]))}})},Symbol.toStringTag,{value:"Module"})),Lie={class:"topbar-preview",bg:"$bew-fill-1",rounded:"$bew-radius",p:"x-6 y-3","mb-4":"",border:"1 $bew-border-color"},Iie={flex:"~ items-center justify-between gap-4","w-full":""},Rie={flex:"~ items-center gap-2"},Pie={key:0,class:"pinned-count"},Die={"text-sm":"","opacity-60":""},Oie={flex:"~ items-center gap-2"},Mie=["onClick"],$ie={key:0,class:"disabled-overlay"},Fie={key:0,class:"element-config",bg:"$bew-fill-2",rounded:"$bew-radius","p-4":""},Bie={key:0,flex:"~ col gap-4"},Nie={flex:"~ items-center justify-between"},Uie={"text-lg":"","font-semibold":""},Vie={key:0,bg:"$bew-fill-1",rounded:"$bew-radius","p-3":""},jie={"text-sm":"","opacity-70":"","mt-2":""},Hie={"text-sm":"","opacity-80":"","mb-2":""},zie={class:"channel-grid"},Gie=["onClick"],Wie={key:0,class:"channel-grid__icon"},Kie={"aria-hidden":"true"},Yie=["xlink:href"],Xie={key:1,class:"channel-grid__icon"},qie={class:"channel-grid__label"},Zie={key:2,class:"channel-grid__overlay"},Qie={class:"channel-grid__tip",text:"$bew-text-3"},Jie={key:1,flex:"~ col gap-4"},ene={bg:"$bew-fill-1",rounded:"$bew-radius","p-3":""},tne={bg:"$bew-fill-1",rounded:"$bew-radius","p-3":""},ine={key:2,flex:"~ col gap-4"},nne={"text-lg":"","font-semibold":""},sne={key:3,flex:"~ col gap-4"},rne={"text-lg":"","font-semibold":""},one={key:4,flex:"~ col gap-4"},ane={"text-lg":"","font-semibold":""},lne={"mt-6":"","pt-6":"","border-t":"1 $bew-border-color"},une={flex:"~ col gap-4"},cne={flex:"~ items-center justify-end","mt-4":""},dne=qe(Me({__name:"TopBarVisualConfig",setup(t){const{t:e}=St(),i=z(""),n=ge(()=>{const m=[{id:"logoAndChannels",label:`Logo & ${e("settings.topbar_pinned_channels_title")}`,icon:"i-tabler:brand-bilibili",type:"logo"},{id:"switchers",label:"Bewly/Bili ",icon:"i-mingcute:arrows-left-right-line",type:"pageSwitcher"},{id:"search",label:e("settings.group_search_bar"),icon:"i-mingcute:search-line",type:"search"}];return[{id:"moments",label:e("topbar.moments"),icon:"i-tabler:windmill",supportsBadge:!0},{id:"favorites",label:e("topbar.favorites"),icon:"i-mingcute:star-line",supportsBadge:!0},{id:"history",label:e("topbar.history"),icon:"i-mingcute:time-line",supportsBadge:!0},{id:"watchLater",label:e("topbar.watch_later"),icon:"i-mingcute:carplay-line",supportsBadge:!0},{id:"creatorCenter",label:e("topbar.creative_center"),icon:"i-mingcute:bulb-line",supportsBadge:!1},{id:"upload",label:e("topbar.upload"),icon:"i-mingcute:upload-line",supportsBadge:!1},{id:"notifications",label:e("topbar.notifications"),icon:"i-tabler:bell",supportsBadge:!0}].forEach(v=>{const b=k.value.topBarComponentsConfig?.find(_=>_.key===v.id);m.push({...v,type:"popIcon",visible:b?.visible??!0})}),m.push({id:"avatar",label:e("topbar.user_dropdown.account_settings"),icon:"i-mingcute:user-4-line",type:"avatar"}),m});function s(m){i.value=i.value===m?"":m}function r(m){return k.value.topBarComponentsConfig?.find(g=>g.key===m)}const o=ge(()=>[{label:e("settings.top_bar_icon_badges_opt.number"),value:"number"},{label:e("settings.top_bar_icon_badges_opt.dot"),value:"dot"},{label:e("settings.top_bar_icon_badges_opt.none"),value:"none"}]),a=ge(()=>[{label:e("settings.video_page_top_bar_config_opt.alwaysShow"),value:Un.AlwaysShow},{label:e("settings.video_page_top_bar_config_opt.alwaysHide"),value:Un.AlwaysHide},{label:e("settings.video_page_top_bar_config_opt.showOnMouse"),value:Un.ShowOnMouse},{label:e("settings.video_page_top_bar_config_opt.showOnScroll"),value:Un.ShowOnScroll}]);function l(m){const g=k.value.topBarComponentsConfig?.find(v=>v.key===m);g&&(g.visible=!g.visible)}function u(){const m=[{key:"moments",supportsBadge:!0},{key:"favorites",supportsBadge:!0},{key:"history",supportsBadge:!0},{key:"watchLater",supportsBadge:!0},{key:"creatorCenter",supportsBadge:!1},{key:"upload",supportsBadge:!1},{key:"notifications",supportsBadge:!0}];k.value.topBarComponentsConfig=m.map(g=>({key:g.key,visible:!0,badgeType:g.supportsBadge?"number":"none"}))}function c(){k.value.topBarPinnedChannels=[]}const d=ge(()=>j5.map(m=>({value:m.key,label:e(m.nameKey),icon:m.icon,color:m.color}))),f=ge(()=>k.value.topBarPinnedChannels),h=ge(()=>{const m=new Map;return f.value.forEach((g,v)=>{m.set(g,v+1)}),m});function p(m){f.value.includes(m)?k.value.topBarPinnedChannels=f.value.filter(g=>g!==m):k.value.topBarPinnedChannels=[...f.value,m]}return(m,g)=>(L(),_e(It,{title:m.$t("settings.group_topbar")},{default:H(()=>[F(Oe,null,{bottom:H(()=>[g[23]||(g[23]=x("div",{"text-sm":"","opacity-70":"","mb-3":""},"  ",-1)),x("div",Lie,[x("div",Iie,[x("div",Rie,[x("div",{class:Ie(["topbar-element logo-element",{active:w(i)==="logoAndChannels"}]),onClick:g[0]||(g[0]=v=>s("logoAndChannels"))},[x("div",{class:Ie(w(n).find(v=>v.id==="logoAndChannels")?.icon),"text-xl":""},null,2),w(f).length>0?(L(),P("div",Pie,G(w(f).length),1)):X("",!0)],2),x("div",{class:Ie(["topbar-element switchers-element",{active:w(i)==="switchers"}]),onClick:g[1]||(g[1]=v=>s("switchers"))},[...g[17]||(g[17]=[x("div",{"i-mingcute:transfer-3-line":"","text-lg":""},null,-1)])],2)]),x("div",{class:Ie(["topbar-element search-element",{active:w(i)==="search"}]),flex:"1",onClick:g[2]||(g[2]=v=>s("search"))},[x("div",{class:Ie(w(n).find(v=>v.id==="search")?.icon),"text-base":"","mr-2":""},null,2),x("div",Die,G(m.$t("settings.group_search_bar")),1)],2),x("div",Oie,[(L(!0),P(Te,null,Ne(w(n).filter(v=>v.type==="popIcon"),v=>(L(),P("div",{key:v.id,class:Ie(["topbar-element",{active:w(i)===v.id,disabled:!v.visible}]),onClick:b=>s(v.id)},[x("div",{class:Ie(v.icon),"text-base":""},null,2),v.visible?X("",!0):(L(),P("div",$ie))],10,Mie))),128)),x("div",{class:Ie(["topbar-element avatar-element",{active:w(i)==="avatar"}]),onClick:g[3]||(g[3]=v=>s("avatar"))},[x("div",{class:Ie(w(n).find(v=>v.id==="avatar")?.icon),"text-base":""},null,2)],2)])])]),F(nt,{name:"fade",mode:"out-in"},{default:H(()=>[w(i)?(L(),P("div",Fie,[w(i)==="logoAndChannels"?(L(),P("div",Bie,[x("div",Nie,[x("div",Uie," Logo & "+G(m.$t("settings.topbar_pinned_channels_title")),1),F(Ir,{size:"small",type:"secondary",disabled:!w(f).length,onClick:c},{left:H(()=>[...g[18]||(g[18]=[x("div",{"i-mingcute:back-line":""},null,-1)])]),default:H(()=>[He(" "+G(m.$t("common.operation.reset")),1)]),_:1},8,["disabled"])]),w(k).touchScreenOptimization?(L(),P("div",Vie,[F(Oe,{title:m.$t("settings.show_home_button_in_touch_mode")},{default:H(()=>[F(Je,{modelValue:w(k).showHomeButtonInTouchMode,"onUpdate:modelValue":g[4]||(g[4]=v=>w(k).showHomeButtonInTouchMode=v)},null,8,["modelValue"])]),_:1},8,["title"]),x("div",jie,G(m.$t("settings.show_home_button_in_touch_mode_desc")),1)])):X("",!0),x("div",Hie," Logo "+G(m.$t("settings.topbar_pinned_channels_hint")),1),x("div",zie,[(L(!0),P(Te,null,Ne(w(d),v=>(L(),P("button",{key:v.value,type:"button",class:Ie(["channel-grid__item",{selected:w(f).includes(v.value)}]),onClick:b=>p(v.value)},[v.icon.startsWith("#")?(L(),P("div",Wie,[(L(),P("svg",Kie,[x("use",{"xlink:href":v.icon},null,8,Yie)]))])):(L(),P("div",Xie,[x("i",{class:Ie(v.icon),style:Ue({color:v.color??""})},null,6)])),x("span",qie,G(v.label),1),w(h).has(v.value)?(L(),P("div",Zie,G(w(h).get(v.value)),1)):X("",!0)],10,Gie))),128))]),x("div",Qie,G(w(f).length?m.$t("settings.topbar_pinned_channels_order_tip"):m.$t("settings.topbar_pinned_channels_empty")),1)])):w(i)==="switchers"?(L(),P("div",Jie,[g[21]||(g[21]=x("div",{"text-lg":"","font-semibold":""}," Bewly/Bili  ",-1)),x("div",ene,[F(Oe,{title:m.$t("settings.show_bewly_or_bili_page_switcher")},{default:H(()=>[F(Je,{modelValue:w(k).showBewlyOrBiliPageSwitcher,"onUpdate:modelValue":g[5]||(g[5]=v=>w(k).showBewlyOrBiliPageSwitcher=v)},null,8,["modelValue"])]),_:1},8,["title"]),g[19]||(g[19]=x("div",{"text-sm":"","opacity-70":"","mt-2":""},"  Logo  BewlyCat  Bilibili  ",-1))]),x("div",tne,[F(Oe,{title:m.$t("settings.show_bewly_or_bili_top_bar_switcher")},{default:H(()=>[F(Je,{modelValue:w(k).showBewlyOrBiliTopBarSwitcher,"onUpdate:modelValue":g[6]||(g[6]=v=>w(k).showBewlyOrBiliTopBarSwitcher=v)},null,8,["modelValue"])]),_:1},8,["title"]),g[20]||(g[20]=x("div",{"text-sm":"","opacity-70":"","mt-2":""},"  BewlyCat  Bilibili  ",-1))])])):w(i)==="search"?(L(),P("div",ine,[x("div",nne,G(m.$t("settings.group_search_bar")),1),F(Oe,{title:m.$t("settings.show_hot_search_in_top_bar"),desc:m.$t("settings.show_hot_search_in_top_bar_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showHotSearchInTopBar,"onUpdate:modelValue":g[7]||(g[7]=v=>w(k).showHotSearchInTopBar=v)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:m.$t("settings.show_search_recommendation"),desc:m.$t("settings.show_search_recommendation_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showSearchRecommendation,"onUpdate:modelValue":g[8]||(g[8]=v=>w(k).showSearchRecommendation=v)},null,8,["modelValue"])]),_:1},8,["title","desc"])])):w(n).find(v=>v.id===w(i)&&v.type==="popIcon")?(L(),P("div",sne,[x("div",rne,G(w(n).find(v=>v.id===w(i))?.label),1),F(Oe,{title:m.$t("settings.visibility")},{default:H(()=>[F(Je,{"model-value":r(w(i))?.visible??!0,"onUpdate:modelValue":g[9]||(g[9]=v=>l(w(i)))},null,8,["model-value"])]),_:1},8,["title"]),w(n).find(v=>v.id===w(i))?.supportsBadge?(L(),_e(Oe,{key:0,title:m.$t("settings.badge_type")},{default:H(()=>[F(hi,{modelValue:r(w(i)).badgeType,"onUpdate:modelValue":g[10]||(g[10]=v=>r(w(i)).badgeType=v),options:w(o),w:"full",disabled:!r(w(i))?.visible},null,8,["modelValue","options","disabled"])]),_:1},8,["title"])):X("",!0),w(i)==="moments"?(L(),_e(Oe,{key:1,title:"",desc:""},{default:H(()=>[F(Je,{modelValue:w(k).filterArticlesInMoments,"onUpdate:modelValue":g[11]||(g[11]=v=>w(k).filterArticlesInMoments=v)},null,8,["modelValue"])]),_:1})):X("",!0)])):w(i)==="avatar"?(L(),P("div",one,[x("div",ane,G(m.$t("topbar.user_dropdown.account_settings")),1)])):X("",!0)])):X("",!0)]),_:1}),x("div",lne,[x("div",une,[F(Oe,{title:m.$t("settings.auto_hide_top_bar")},{default:H(()=>[F(Je,{modelValue:w(k).autoHideTopBar,"onUpdate:modelValue":g[12]||(g[12]=v=>w(k).autoHideTopBar=v)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:m.$t("settings.video_page_top_bar_config"),desc:m.$t("settings.video_page_top_bar_config_desc")},{default:H(()=>[F(hi,{modelValue:w(k).videoPageTopBarConfig,"onUpdate:modelValue":g[13]||(g[13]=v=>w(k).videoPageTopBarConfig=v),options:w(a),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:m.$t("settings.always_use_transparent_top_bar")},{default:H(()=>[F(Je,{modelValue:w(k).alwaysUseTransparentTopBar,"onUpdate:modelValue":g[14]||(g[14]=v=>w(k).alwaysUseTransparentTopBar=v)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:m.$t("settings.show_top_bar_theme_color_gradient")},{default:H(()=>[F(Je,{modelValue:w(k).showTopBarThemeColorGradient,"onUpdate:modelValue":g[15]||(g[15]=v=>w(k).showTopBarThemeColorGradient=v)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:m.$t("settings.open_notifications_page_as_drawer")},{default:H(()=>[F(Je,{modelValue:w(k).openNotificationsPageAsDrawer,"onUpdate:modelValue":g[16]||(g[16]=v=>w(k).openNotificationsPageAsDrawer=v)},null,8,["modelValue"])]),_:1},8,["title"]),x("div",cne,[F(Ir,{size:"small",type:"secondary",onClick:u},{left:H(()=>[...g[22]||(g[22]=[x("div",{"i-mingcute:back-line":""},null,-1)])]),default:H(()=>[He(" "+G(m.$t("common.operation.reset")),1)]),_:1})])])])]),_:1})]),_:1},8,["title"]))}}),[["__scopeId","data-v-f9228f1d"]]),fne=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"TopBar",setup(t){const{t:e}=St(),i=ge(()=>[{label:e("settings.link_opening_behavior_opt.current_tab"),value:"currentTab"},{label:e("settings.link_opening_behavior_opt.current_tab_if_not_homepage"),value:"currentTabIfNotHomepage"},{label:e("settings.link_opening_behavior_opt.background"),value:"background"},{label:e("settings.link_opening_behavior_opt.new_tab"),value:"newTab"}]);return(n,s)=>(L(),P("div",null,[F(It,{title:n.$t("settings.group_link_opening_behavior")},{default:H(()=>[F(Oe,{title:n.$t("settings.top_bar_link_opening_behavior")},{default:H(()=>[F(hi,{modelValue:w(k).topBarLinkOpenMode,"onUpdate:modelValue":s[0]||(s[0]=r=>w(k).topBarLinkOpenMode=r),options:w(i),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,{title:n.$t("settings.search_bar_link_opening_behavior")},{default:H(()=>[F(hi,{modelValue:w(k).searchBarLinkOpenMode,"onUpdate:modelValue":s[1]||(s[1]=r=>w(k).searchBarLinkOpenMode=r),options:w(i),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"])]),_:1},8,["title"]),F(dne)]))}})},Symbol.toStringTag,{value:"Module"}));var h0={exports:{}},T2={exports:{}},A2={};/**
* @vue/compiler-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const au=Symbol(""),lu=Symbol(""),p0=Symbol(""),Qc=Symbol(""),k2=Symbol(""),ca=Symbol(""),C2=Symbol(""),L2=Symbol(""),m0=Symbol(""),g0=Symbol(""),uu=Symbol(""),v0=Symbol(""),I2=Symbol(""),_0=Symbol(""),b0=Symbol(""),y0=Symbol(""),w0=Symbol(""),E0=Symbol(""),S0=Symbol(""),R2=Symbol(""),P2=Symbol(""),Jc=Symbol(""),ed=Symbol(""),x0=Symbol(""),T0=Symbol(""),cu=Symbol(""),du=Symbol(""),A0=Symbol(""),k0=Symbol(""),Zw=Symbol(""),C0=Symbol(""),td=Symbol(""),Qw=Symbol(""),Jw=Symbol(""),L0=Symbol(""),e7=Symbol(""),t7=Symbol(""),I0=Symbol(""),D2=Symbol(""),il={[au]:"Fragment",[lu]:"Teleport",[p0]:"Suspense",[Qc]:"KeepAlive",[k2]:"BaseTransition",[ca]:"openBlock",[C2]:"createBlock",[L2]:"createElementBlock",[m0]:"createVNode",[g0]:"createElementVNode",[uu]:"createCommentVNode",[v0]:"createTextVNode",[I2]:"createStaticVNode",[_0]:"resolveComponent",[b0]:"resolveDynamicComponent",[y0]:"resolveDirective",[w0]:"resolveFilter",[E0]:"withDirectives",[S0]:"renderList",[R2]:"renderSlot",[P2]:"createSlots",[Jc]:"toDisplayString",[ed]:"mergeProps",[x0]:"normalizeClass",[T0]:"normalizeStyle",[cu]:"normalizeProps",[du]:"guardReactiveProps",[A0]:"toHandlers",[k0]:"camelize",[Zw]:"capitalize",[C0]:"toHandlerKey",[td]:"setBlockTracking",[Qw]:"pushScopeId",[Jw]:"popScopeId",[L0]:"withCtx",[e7]:"unref",[t7]:"isRef",[I0]:"withMemo",[D2]:"isMemoSame"};function i7(t){Object.getOwnPropertySymbols(t).forEach(e=>{il[e]=t[e]})}const hne={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},pne={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},mne={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},gne={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},Qi={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function n7(t,e=""){return{type:0,source:e,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:Qi}}function fu(t,e,i,n,s,r,o,a=!1,l=!1,u=!1,c=Qi){return t&&(a?(t.helper(ca),t.helper(rl(t.inSSR,u))):t.helper(sl(t.inSSR,u)),o&&t.helper(E0)),{type:13,tag:e,props:i,children:n,patchFlag:s,dynamicProps:r,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:c}}function da(t,e=Qi){return{type:17,loc:e,elements:t}}function xs(t,e=Qi){return{type:15,loc:e,properties:t}}function Ri(t,e){return{type:16,loc:Qi,key:ht(t)?yt(t,!0):t,value:e}}function yt(t,e=!1,i=Qi,n=0){return{type:4,loc:i,content:t,isStatic:e,constType:e?3:n}}function vne(t,e){return{type:5,loc:e,content:ht(t)?yt(t,!1,e):t}}function zs(t,e=Qi){return{type:8,loc:e,children:t}}function zi(t,e=[],i=Qi){return{type:14,loc:i,callee:t,arguments:e}}function nl(t,e=void 0,i=!1,n=!1,s=Qi){return{type:18,params:t,returns:e,newline:i,isSlot:n,loc:s}}function R0(t,e,i,n=!0){return{type:19,test:t,consequent:e,alternate:i,newline:n,loc:Qi}}function s7(t,e,i=!1,n=!1){return{type:20,index:t,value:e,needPauseTracking:i,inVOnce:n,needArraySpread:!1,loc:Qi}}function r7(t){return{type:21,body:t,loc:Qi}}function _ne(t){return{type:22,elements:t,loc:Qi}}function bne(t,e,i){return{type:23,test:t,consequent:e,alternate:i,loc:Qi}}function yne(t,e){return{type:24,left:t,right:e,loc:Qi}}function wne(t){return{type:25,expressions:t,loc:Qi}}function Ene(t){return{type:26,returns:t,loc:Qi}}function sl(t,e){return t||e?m0:g0}function rl(t,e){return t||e?C2:L2}function P0(t,{helper:e,removeHelper:i,inSSR:n}){t.isBlock||(t.isBlock=!0,i(sl(n,t.isComponent)),e(ca),e(rl(n,t.isComponent)))}const o7=new Uint8Array([123,123]),a7=new Uint8Array([125,125]);function l7(t){return t>=97&&t<=122||t>=65&&t<=90}function Ts(t){return t===32||t===10||t===9||t===12||t===13}function fa(t){return t===47||t===62||Ts(t)}function D0(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}const kn={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Sne{constructor(e,i){this.stack=e,this.cbs=i,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=o7,this.delimiterClose=a7,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=o7,this.delimiterClose=a7}getPos(e){let i=1,n=e+1;for(let s=this.newlines.length-1;s>=0;s--){const r=this.newlines[s];if(e>r){i=s+2,n=e-r;break}}return{column:n,line:i,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const i=this.index+1-this.delimiterOpen.length;i>this.sectionStart&&this.cbs.ontext(this.sectionStart,i),this.state=3,this.sectionStart=i}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const i=this.sequenceIndex===this.currentSequence.length;if(!(i?fa(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!i){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||Ts(e)){const i=this.index-this.currentSequence.length;if(this.sectionStart<i){const n=this.index;this.index=i,this.cbs.ontext(this.sectionStart,i),this.index=n}this.sectionStart=i+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===kn.TitleEnd||this.currentSequence===kn.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===kn.Cdata[this.sequenceIndex]?++this.sequenceIndex===kn.Cdata.length&&(this.state=28,this.currentSequence=kn.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const i=this.buffer.charCodeAt(this.index);if(i===10&&this.newlines.push(this.index),i===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===kn.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,i){this.enterRCDATA(e,i),this.state=31}enterRCDATA(e,i){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=i}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):l7(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){fa(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(fa(e)){const i=this.buffer.slice(this.sectionStart,this.index);i!=="template"&&this.enterRCDATA(D0("</"+i),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){Ts(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=l7(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||Ts(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):Ts(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):Ts(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||fa(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||fa(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||fa(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||fa(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||fa(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):Ts(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):Ts(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,i){(e===i||this.fastForwardTo(i))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){Ts(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=kn.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===kn.ScriptEnd[3]?this.startSpecial(kn.ScriptEnd,4):e===kn.StyleEnd[3]?this.startSpecial(kn.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===kn.TitleEnd[3]?this.startSpecial(kn.TitleEnd,4):e===kn.TextareaEnd[3]?this.startSpecial(kn.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const i=this.buffer.charCodeAt(this.index);switch(i===10&&this.state!==33&&this.newlines.push(this.index),this.state){case 1:{this.stateText(i);break}case 2:{this.stateInterpolationOpen(i);break}case 3:{this.stateInterpolation(i);break}case 4:{this.stateInterpolationClose(i);break}case 31:{this.stateSpecialStartSequence(i);break}case 32:{this.stateInRCDATA(i);break}case 26:{this.stateCDATASequence(i);break}case 19:{this.stateInAttrValueDoubleQuotes(i);break}case 12:{this.stateInAttrName(i);break}case 13:{this.stateInDirName(i);break}case 14:{this.stateInDirArg(i);break}case 15:{this.stateInDynamicDirArg(i);break}case 16:{this.stateInDirModifier(i);break}case 28:{this.stateInCommentLike(i);break}case 27:{this.stateInSpecialComment(i);break}case 11:{this.stateBeforeAttrName(i);break}case 6:{this.stateInTagName(i);break}case 34:{this.stateInSFCRootTagName(i);break}case 9:{this.stateInClosingTagName(i);break}case 5:{this.stateBeforeTagName(i);break}case 17:{this.stateAfterAttrName(i);break}case 20:{this.stateInAttrValueSingleQuotes(i);break}case 18:{this.stateBeforeAttrValue(i);break}case 8:{this.stateBeforeClosingTagName(i);break}case 10:{this.stateAfterClosingTagName(i);break}case 29:{this.stateBeforeSpecialS(i);break}case 30:{this.stateBeforeSpecialT(i);break}case 21:{this.stateInAttrValueNoQuotes(i);break}case 7:{this.stateInSelfClosingTag(i);break}case 23:{this.stateInDeclaration(i);break}case 22:{this.stateBeforeDeclaration(i);break}case 25:{this.stateBeforeComment(i);break}case 24:{this.stateInProcessingInstruction(i);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===kn.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,i){}}const xne={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},Tne={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:t=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${t}.sync\` should be changed to \`v-model:${t}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function O2(t,{compatConfig:e}){const i=e&&e[t];return t==="MODE"?i||3:i}function ol(t,e){const i=O2("MODE",e),n=O2(t,e);return i===3?n===!0:n!==!1}function hu(t,e,i,...n){return ol(t,e)}function Ane(t,e,i,...n){if(O2(t,e)==="suppress-warning")return;const{message:r,link:o}=Tne[t],a=`(deprecation ${t}) ${typeof r=="function"?r(...n):r}${o?`
  Details: ${o}`:""}`,l=new SyntaxError(a);l.code=t,i&&(l.loc=i),e.onWarn(l)}function M2(t){throw t}function u7(t){}function pi(t,e,i,n){const s=`https://vuejs.org/error-reference/#compiler-${t}`,r=new SyntaxError(String(s));return r.code=t,r.loc=e,r}const kne={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},Cne={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function Lne(t,e,i=!1,n=[],s=Object.create(null)){}function Ine(t,e,i){return!1}function Rne(t,e){if(t&&(t.type==="ObjectProperty"||t.type==="ArrayPattern")){let i=e.length;for(;i--;){const n=e[i];if(n.type==="AssignmentExpression")return!0;if(n.type!=="ObjectProperty"&&!n.type.endsWith("Pattern"))break}}return!1}function Pne(t){let e=t.length;for(;e--;){const i=t[e];if(i.type==="NewExpression")return!0;if(i.type!=="MemberExpression")break}return!1}function Dne(t,e){for(const i of t.params)for(const n of Eo(i))e(n)}function One(t,e){for(const i of t.body)if(i.type==="VariableDeclaration"){if(i.declare)continue;for(const n of i.declarations)for(const s of Eo(n.id))e(s)}else if(i.type==="FunctionDeclaration"||i.type==="ClassDeclaration"){if(i.declare||!i.id)continue;e(i.id)}else Mne(i)&&$ne(i,!0,e)}function Mne(t){return t.type==="ForOfStatement"||t.type==="ForInStatement"||t.type==="ForStatement"}function $ne(t,e,i){const n=t.type==="ForStatement"?t.init:t.left;if(n&&n.type==="VariableDeclaration"&&(n.kind==="var"?e:!e))for(const s of n.declarations)for(const r of Eo(s.id))i(r)}function Eo(t,e=[]){switch(t.type){case"Identifier":e.push(t);break;case"MemberExpression":let i=t;for(;i.type==="MemberExpression";)i=i.object;e.push(i);break;case"ObjectPattern":for(const n of t.properties)n.type==="RestElement"?Eo(n.argument,e):Eo(n.value,e);break;case"ArrayPattern":t.elements.forEach(n=>{n&&Eo(n,e)});break;case"RestElement":Eo(t.argument,e);break;case"AssignmentPattern":Eo(t.left,e);break}return e}const Fne=t=>/Function(?:Expression|Declaration)$|Method$/.test(t.type),c7=t=>t&&(t.type==="ObjectProperty"||t.type==="ObjectMethod")&&!t.computed,Bne=(t,e)=>c7(e)&&e.key===t,d7=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function f7(t){return d7.includes(t.type)?f7(t.expression):t}const Xn=t=>t.type===4&&t.isStatic;function $2(t){switch(t){case"Teleport":case"teleport":return lu;case"Suspense":case"suspense":return p0;case"KeepAlive":case"keep-alive":return Qc;case"BaseTransition":case"base-transition":return k2}}const Nne=/^$|^\d|[^\$\w\xA0-\uFFFF]/,id=t=>!Nne.test(t),Une=/[A-Za-z_$\xA0-\uFFFF]/,Vne=/[\.\?\w$\xA0-\uFFFF]/,jne=/\s+[.[]\s*|\s*[.[]\s+/g,h7=t=>t.type===4?t.content:t.loc.source,p7=t=>{const e=h7(t).trim().replace(jne,a=>a.trim());let i=0,n=[],s=0,r=0,o=null;for(let a=0;a<e.length;a++){const l=e.charAt(a);switch(i){case 0:if(l==="[")n.push(i),i=1,s++;else if(l==="(")n.push(i),i=2,r++;else if(!(a===0?Une:Vne).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(n.push(i),i=3,o=l):l==="["?s++:l==="]"&&(--s||(i=n.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")n.push(i),i=3,o=l;else if(l==="(")r++;else if(l===")"){if(a===e.length-1)return!1;--r||(i=n.pop())}break;case 3:l===o&&(i=n.pop(),o=null);break}}return!s&&!r},Hne=tn,F2=p7,zne=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,m7=t=>zne.test(h7(t)),Gne=tn,g7=m7;function Wne(t,e,i=e.length){return v7({offset:t.offset,line:t.line,column:t.column},e,i)}function v7(t,e,i=e.length){let n=0,s=-1;for(let r=0;r<i;r++)e.charCodeAt(r)===10&&(n++,s=r);return t.offset+=i,t.line+=n,t.column=s===-1?t.column+i:i-s,t}function Kne(t,e){if(!t)throw new Error(e||"unexpected compiler condition")}function qn(t,e,i=!1){for(let n=0;n<t.props.length;n++){const s=t.props[n];if(s.type===7&&(i||s.exp)&&(ht(e)?s.name===e:e.test(s.name)))return s}}function nd(t,e,i=!1,n=!1){for(let s=0;s<t.props.length;s++){const r=t.props[s];if(r.type===6){if(i)continue;if(r.name===e&&(r.value||n))return r}else if(r.name==="bind"&&(r.exp||n)&&ha(r.arg,e))return r}}function ha(t,e){return!!(t&&Xn(t)&&t.content===e)}function _7(t){return t.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function O0(t){return t.type===5||t.type===2}function B2(t){return t.type===7&&t.name==="pre"}function N2(t){return t.type===7&&t.name==="slot"}function pu(t){return t.type===1&&t.tagType===3}function sd(t){return t.type===1&&t.tagType===2}const Yne=new Set([cu,du]);function b7(t,e=[]){if(t&&!ht(t)&&t.type===14){const i=t.callee;if(!ht(i)&&Yne.has(i))return b7(t.arguments[0],e.concat(t))}return[t,e]}function rd(t,e,i){let n,s=t.type===13?t.props:t.arguments[2],r=[],o;if(s&&!ht(s)&&s.type===14){const a=b7(s);s=a[0],r=a[1],o=r[r.length-1]}if(s==null||ht(s))n=xs([e]);else if(s.type===14){const a=s.arguments[0];!ht(a)&&a.type===15?y7(e,a)||a.properties.unshift(e):s.callee===A0?n=zi(i.helper(ed),[xs([e]),s]):s.arguments.unshift(xs([e])),!n&&(n=s)}else s.type===15?(y7(e,s)||s.properties.unshift(e),n=s):(n=zi(i.helper(ed),[xs([e]),s]),o&&o.callee===du&&(o=r[r.length-2]));t.type===13?o?o.arguments[0]=n:t.props=n:o?o.arguments[0]=n:t.arguments[2]=n}function y7(t,e){let i=!1;if(t.key.type===4){const n=t.key.content;i=e.properties.some(s=>s.key.type===4&&s.key.content===n)}return i}function mu(t,e){return`_${e}_${t.replace(/[^\w]/g,(i,n)=>i==="-"?"_":t.charCodeAt(n).toString())}`}function fr(t,e){if(!t||Object.keys(e).length===0)return!1;switch(t.type){case 1:for(let i=0;i<t.props.length;i++){const n=t.props[i];if(n.type===7&&(fr(n.arg,e)||fr(n.exp,e)))return!0}return t.children.some(i=>fr(i,e));case 11:return fr(t.source,e)?!0:t.children.some(i=>fr(i,e));case 9:return t.branches.some(i=>fr(i,e));case 10:return fr(t.condition,e)?!0:t.children.some(i=>fr(i,e));case 4:return!t.isStatic&&id(t.content)&&!!e[t.content];case 8:return t.children.some(i=>Kt(i)&&fr(i,e));case 5:case 12:return fr(t.content,e);case 2:case 3:case 20:return!1;default:return!1}}function w7(t){return t.type===14&&t.callee===I0?t.arguments[1].returns:t}const E7=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,S7={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:ba,isPreTag:ba,isIgnoreNewlineTag:ba,isCustomElement:ba,onError:M2,onWarn:u7,comments:!1,prefixIdentifiers:!1};let qt=S7,od=null,So="",Cn=null,Nt=null,os="",xo=-1,al=-1,U2=0,pa=!1,V2=null;const _i=[],Pi=new Sne(_i,{onerr:To,ontext(t,e){M0(vn(t,e),t,e)},ontextentity(t,e,i){M0(t,e,i)},oninterpolation(t,e){if(pa)return M0(vn(t,e),t,e);let i=t+Pi.delimiterOpen.length,n=e-Pi.delimiterClose.length;for(;Ts(So.charCodeAt(i));)i++;for(;Ts(So.charCodeAt(n-1));)n--;let s=vn(i,n);s.includes("&")&&(s=qt.decodeEntities(s,!1)),j2({type:5,content:F0(s,!1,Ui(i,n)),loc:Ui(t,e)})},onopentagname(t,e){const i=vn(t,e);Cn={type:1,tag:i,ns:qt.getNamespace(i,_i[0],qt.ns),tagType:0,props:[],children:[],loc:Ui(t-1,e),codegenNode:void 0}},onopentagend(t){T7(t)},onclosetag(t,e){const i=vn(t,e);if(!qt.isVoidTag(i)){let n=!1;for(let s=0;s<_i.length;s++)if(_i[s].tag.toLowerCase()===i.toLowerCase()){n=!0,s>0&&To(24,_i[0].loc.start.offset);for(let o=0;o<=s;o++){const a=_i.shift();$0(a,e,o<s)}break}n||To(23,A7(t,60))}},onselfclosingtag(t){const e=Cn.tag;Cn.isSelfClosing=!0,T7(t),_i[0]&&_i[0].tag===e&&$0(_i.shift(),t)},onattribname(t,e){Nt={type:6,name:vn(t,e),nameLoc:Ui(t,e),value:void 0,loc:Ui(t)}},ondirname(t,e){const i=vn(t,e),n=i==="."||i===":"?"bind":i==="@"?"on":i==="#"?"slot":i.slice(2);if(!pa&&n===""&&To(26,t),pa||n==="")Nt={type:6,name:i,nameLoc:Ui(t,e),value:void 0,loc:Ui(t)};else if(Nt={type:7,name:n,rawName:i,exp:void 0,arg:void 0,modifiers:i==="."?[yt("prop")]:[],loc:Ui(t)},n==="pre"){pa=Pi.inVPre=!0,V2=Cn;const s=Cn.props;for(let r=0;r<s.length;r++)s[r].type===7&&(s[r]=rse(s[r]))}},ondirarg(t,e){if(t===e)return;const i=vn(t,e);if(pa&&!B2(Nt))Nt.name+=i,ll(Nt.nameLoc,e);else{const n=i[0]!=="[";Nt.arg=F0(n?i:i.slice(1,-1),n,Ui(t,e),n?3:0)}},ondirmodifier(t,e){const i=vn(t,e);if(pa&&!B2(Nt))Nt.name+="."+i,ll(Nt.nameLoc,e);else if(Nt.name==="slot"){const n=Nt.arg;n&&(n.content+="."+i,ll(n.loc,e))}else{const n=yt(i,!0,Ui(t,e));Nt.modifiers.push(n)}},onattribdata(t,e){os+=vn(t,e),xo<0&&(xo=t),al=e},onattribentity(t,e,i){os+=t,xo<0&&(xo=e),al=i},onattribnameend(t){const e=Nt.loc.start.offset,i=vn(e,t);Nt.type===7&&(Nt.rawName=i),Cn.props.some(n=>(n.type===7?n.rawName:n.name)===i)&&To(2,e)},onattribend(t,e){if(Cn&&Nt){if(ll(Nt.loc,e),t!==0)if(os.includes("&")&&(os=qt.decodeEntities(os,!0)),Nt.type===6)Nt.name==="class"&&(os=L7(os).trim()),t===1&&!os&&To(13,e),Nt.value={type:2,content:os,loc:t===1?Ui(xo,al):Ui(xo-1,al+1)},Pi.inSFCRoot&&Cn.tag==="template"&&Nt.name==="lang"&&os&&os!=="html"&&Pi.enterRCDATA(D0("</template"),0);else{let i=0;Nt.exp=F0(os,!1,Ui(xo,al),0,i),Nt.name==="for"&&(Nt.forParseResult=qne(Nt.exp));let n=-1;Nt.name==="bind"&&(n=Nt.modifiers.findIndex(s=>s.content==="sync"))>-1&&hu("COMPILER_V_BIND_SYNC",qt,Nt.loc,Nt.arg.loc.source)&&(Nt.name="model",Nt.modifiers.splice(n,1))}(Nt.type!==7||Nt.name!=="pre")&&Cn.props.push(Nt)}os="",xo=al=-1},oncomment(t,e){qt.comments&&j2({type:3,content:vn(t,e),loc:Ui(t-4,e+3)})},onend(){const t=So.length;for(let e=0;e<_i.length;e++)$0(_i[e],t-1),To(24,_i[e].loc.start.offset)},oncdata(t,e){_i[0].ns!==0?M0(vn(t,e),t,e):To(1,t-9)},onprocessinginstruction(t){(_i[0]?_i[0].ns:qt.ns)===0&&To(21,t-1)}}),x7=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Xne=/^\(|\)$/g;function qne(t){const e=t.loc,i=t.content,n=i.match(E7);if(!n)return;const[,s,r]=n,o=(d,f,h=!1)=>{const p=e.start.offset+f,m=p+d.length;return F0(d,!1,Ui(p,m),0,h?1:0)},a={source:o(r.trim(),i.indexOf(r,s.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=s.trim().replace(Xne,"").trim();const u=s.indexOf(l),c=l.match(x7);if(c){l=l.replace(x7,"").trim();const d=c[1].trim();let f;if(d&&(f=i.indexOf(d,u+l.length),a.key=o(d,f,!0)),c[2]){const h=c[2].trim();h&&(a.index=o(h,i.indexOf(h,a.key?f+d.length:u+l.length),!0))}}return l&&(a.value=o(l,u,!0)),a}function vn(t,e){return So.slice(t,e)}function T7(t){Pi.inSFCRoot&&(Cn.innerLoc=Ui(t+1,t+1)),j2(Cn);const{tag:e,ns:i}=Cn;i===0&&qt.isPreTag(e)&&U2++,qt.isVoidTag(e)?$0(Cn,t):(_i.unshift(Cn),(i===1||i===2)&&(Pi.inXML=!0)),Cn=null}function M0(t,e,i){{const r=_i[0]&&_i[0].tag;r!=="script"&&r!=="style"&&t.includes("&")&&(t=qt.decodeEntities(t,!1))}const n=_i[0]||od,s=n.children[n.children.length-1];s&&s.type===2?(s.content+=t,ll(s.loc,i)):n.children.push({type:2,content:t,loc:Ui(e,i)})}function $0(t,e,i=!1){i?ll(t.loc,A7(e,60)):ll(t.loc,Zne(e,62)+1),Pi.inSFCRoot&&(t.children.length?t.innerLoc.end=Ot({},t.children[t.children.length-1].loc.end):t.innerLoc.end=Ot({},t.innerLoc.start),t.innerLoc.source=vn(t.innerLoc.start.offset,t.innerLoc.end.offset));const{tag:n,ns:s,children:r}=t;if(pa||(n==="slot"?t.tagType=2:k7(t)?t.tagType=3:Jne(t)&&(t.tagType=1)),Pi.inRCDATA||(t.children=C7(r)),s===0&&qt.isIgnoreNewlineTag(n)){const o=r[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}s===0&&qt.isPreTag(n)&&U2--,V2===t&&(pa=Pi.inVPre=!1,V2=null),Pi.inXML&&(_i[0]?_i[0].ns:qt.ns)===0&&(Pi.inXML=!1);{const o=t.props;if(!Pi.inSFCRoot&&ol("COMPILER_NATIVE_TEMPLATE",qt)&&t.tag==="template"&&!k7(t)){const l=_i[0]||od,u=l.children.indexOf(t);l.children.splice(u,1,...t.children)}const a=o.find(l=>l.type===6&&l.name==="inline-template");a&&hu("COMPILER_INLINE_TEMPLATE",qt,a.loc)&&t.children.length&&(a.value={type:2,content:vn(t.children[0].loc.start.offset,t.children[t.children.length-1].loc.end.offset),loc:a.loc})}}function Zne(t,e){let i=t;for(;So.charCodeAt(i)!==e&&i<So.length-1;)i++;return i}function A7(t,e){let i=t;for(;So.charCodeAt(i)!==e&&i>=0;)i--;return i}const Qne=new Set(["if","else","else-if","for","slot"]);function k7({tag:t,props:e}){if(t==="template"){for(let i=0;i<e.length;i++)if(e[i].type===7&&Qne.has(e[i].name))return!0}return!1}function Jne({tag:t,props:e}){if(qt.isCustomElement(t))return!1;if(t==="component"||ese(t.charCodeAt(0))||$2(t)||qt.isBuiltInComponent&&qt.isBuiltInComponent(t)||qt.isNativeTag&&!qt.isNativeTag(t))return!0;for(let i=0;i<e.length;i++){const n=e[i];if(n.type===6){if(n.name==="is"&&n.value){if(n.value.content.startsWith("vue:"))return!0;if(hu("COMPILER_IS_ON_ELEMENT",qt,n.loc))return!0}}else if(n.name==="bind"&&ha(n.arg,"is")&&hu("COMPILER_IS_ON_ELEMENT",qt,n.loc))return!0}return!1}function ese(t){return t>64&&t<91}const tse=/\r\n/g;function C7(t){const e=qt.whitespace!=="preserve";let i=!1;for(let n=0;n<t.length;n++){const s=t[n];if(s.type===2)if(U2)s.content=s.content.replace(tse,`
`);else if(ise(s.content)){const r=t[n-1]&&t[n-1].type,o=t[n+1]&&t[n+1].type;!r||!o||e&&(r===3&&(o===3||o===1)||r===1&&(o===3||o===1&&nse(s.content)))?(i=!0,t[n]=null):s.content=" "}else e&&(s.content=L7(s.content))}return i?t.filter(Boolean):t}function ise(t){for(let e=0;e<t.length;e++)if(!Ts(t.charCodeAt(e)))return!1;return!0}function nse(t){for(let e=0;e<t.length;e++){const i=t.charCodeAt(e);if(i===10||i===13)return!0}return!1}function L7(t){let e="",i=!1;for(let n=0;n<t.length;n++)Ts(t.charCodeAt(n))?i||(e+=" ",i=!0):(e+=t[n],i=!1);return e}function j2(t){(_i[0]||od).children.push(t)}function Ui(t,e){return{start:Pi.getPos(t),end:e==null?e:Pi.getPos(e),source:e==null?e:vn(t,e)}}function sse(t){return Ui(t.start.offset,t.end.offset)}function ll(t,e){t.end=Pi.getPos(e),t.source=vn(t.start.offset,e)}function rse(t){const e={type:6,name:t.rawName,nameLoc:Ui(t.loc.start.offset,t.loc.start.offset+t.rawName.length),value:void 0,loc:t.loc};if(t.exp){const i=t.exp.loc;i.end.offset<t.loc.end.offset&&(i.start.offset--,i.start.column--,i.end.offset++,i.end.column++),e.value={type:2,content:t.exp.content,loc:i}}return e}function F0(t,e=!1,i,n=0,s=0){return yt(t,e,i,n)}function To(t,e,i){qt.onError(pi(t,Ui(e,e)))}function ose(){Pi.reset(),Cn=null,Nt=null,os="",xo=-1,al=-1,_i.length=0}function H2(t,e){if(ose(),So=t,qt=Ot({},S7),e){let s;for(s in e)e[s]!=null&&(qt[s]=e[s])}Pi.mode=qt.parseMode==="html"?1:qt.parseMode==="sfc"?2:0,Pi.inXML=qt.ns===1||qt.ns===2;const i=e&&e.delimiters;i&&(Pi.delimiterOpen=D0(i[0]),Pi.delimiterClose=D0(i[1]));const n=od=n7([],t);return Pi.parse(So),n.loc=Ui(0,t.length),n.children=C7(n.children),od=null,n}function ase(t,e){B0(t,void 0,e,!!I7(t))}function I7(t){const e=t.children.filter(i=>i.type!==3);return e.length===1&&e[0].type===1&&!sd(e[0])?e[0]:null}function B0(t,e,i,n=!1,s=!1){const{children:r}=t,o=[];for(let c=0;c<r.length;c++){const d=r[c];if(d.type===1&&d.tagType===0){const f=n?0:as(d,i);if(f>0){if(f>=2){d.codegenNode.patchFlag=-1,o.push(d);continue}}else{const h=d.codegenNode;if(h.type===13){const p=h.patchFlag;if((p===void 0||p===512||p===1)&&P7(d,i)>=2){const m=D7(d);m&&(h.props=i.hoist(m))}h.dynamicProps&&(h.dynamicProps=i.hoist(h.dynamicProps))}}}else if(d.type===12&&(n?0:as(d,i))>=2){d.codegenNode.type===14&&d.codegenNode.arguments.length>0&&d.codegenNode.arguments.push("-1"),o.push(d);continue}if(d.type===1){const f=d.tagType===1;f&&i.scopes.vSlot++,B0(d,t,i,!1,s),f&&i.scopes.vSlot--}else if(d.type===11)B0(d,t,i,d.children.length===1,!0);else if(d.type===9)for(let f=0;f<d.branches.length;f++)B0(d.branches[f],t,i,d.branches[f].children.length===1,s)}let a=!1;if(o.length===r.length&&t.type===1){if(t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&Qe(t.codegenNode.children))t.codegenNode.children=l(da(t.codegenNode.children)),a=!0;else if(t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!Qe(t.codegenNode.children)&&t.codegenNode.children.type===15){const c=u(t.codegenNode,"default");c&&(c.returns=l(da(c.returns)),a=!0)}else if(t.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!Qe(e.codegenNode.children)&&e.codegenNode.children.type===15){const c=qn(t,"slot",!0),d=c&&c.arg&&u(e.codegenNode,c.arg);d&&(d.returns=l(da(d.returns)),a=!0)}}if(!a)for(const c of o)c.codegenNode=i.cache(c.codegenNode);function l(c){const d=i.cache(c);return d.needArraySpread=!0,d}function u(c,d){if(c.children&&!Qe(c.children)&&c.children.type===15){const f=c.children.properties.find(h=>h.key===d||h.key.content===d);return f&&f.value}}o.length&&i.transformHoist&&i.transformHoist(r,i,t)}function as(t,e){const{constantCache:i}=e;switch(t.type){case 1:if(t.tagType!==0)return 0;const n=i.get(t);if(n!==void 0)return n;const s=t.codegenNode;if(s.type!==13||s.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject"&&t.tag!=="math")return 0;if(s.patchFlag===void 0){let o=3;const a=P7(t,e);if(a===0)return i.set(t,0),0;a<o&&(o=a);for(let l=0;l<t.children.length;l++){const u=as(t.children[l],e);if(u===0)return i.set(t,0),0;u<o&&(o=u)}if(o>1)for(let l=0;l<t.props.length;l++){const u=t.props[l];if(u.type===7&&u.name==="bind"&&u.exp){const c=as(u.exp,e);if(c===0)return i.set(t,0),0;c<o&&(o=c)}}if(s.isBlock){for(let l=0;l<t.props.length;l++)if(t.props[l].type===7)return i.set(t,0),0;e.removeHelper(ca),e.removeHelper(rl(e.inSSR,s.isComponent)),s.isBlock=!1,e.helper(sl(e.inSSR,s.isComponent))}return i.set(t,o),o}else return i.set(t,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return as(t.content,e);case 4:return t.constType;case 8:let r=3;for(let o=0;o<t.children.length;o++){const a=t.children[o];if(ht(a)||On(a))continue;const l=as(a,e);if(l===0)return 0;l<r&&(r=l)}return r;case 20:return 2;default:return 0}}const lse=new Set([x0,T0,cu,du]);function R7(t,e){if(t.type===14&&!ht(t.callee)&&lse.has(t.callee)){const i=t.arguments[0];if(i.type===4)return as(i,e);if(i.type===14)return R7(i,e)}return 0}function P7(t,e){let i=3;const n=D7(t);if(n&&n.type===15){const{properties:s}=n;for(let r=0;r<s.length;r++){const{key:o,value:a}=s[r],l=as(o,e);if(l===0)return l;l<i&&(i=l);let u;if(a.type===4?u=as(a,e):a.type===14?u=R7(a,e):u=0,u===0)return u;u<i&&(i=u)}}return i}function D7(t){const e=t.codegenNode;if(e.type===13)return e.props}function O7(t,{filename:e="",prefixIdentifiers:i=!1,hoistStatic:n=!1,hmr:s=!1,cacheHandlers:r=!1,nodeTransforms:o=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:u=tn,isCustomElement:c=tn,expressionPlugins:d=[],scopeId:f=null,slotted:h=!0,ssr:p=!1,inSSR:m=!1,ssrCssVars:g="",bindingMetadata:v=Dt,inline:b=!1,isTS:_=!1,onError:y=M2,onWarn:E=u7,compatConfig:S}){const A=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),C={filename:e,selfName:A&&Oo(ci(A[1])),prefixIdentifiers:i,hoistStatic:n,hmr:s,cacheHandlers:r,nodeTransforms:o,directiveTransforms:a,transformHoist:l,isBuiltInComponent:u,isCustomElement:c,expressionPlugins:d,scopeId:f,slotted:h,ssr:p,inSSR:m,ssrCssVars:g,bindingMetadata:v,inline:b,isTS:_,onError:y,onWarn:E,compatConfig:S,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(T){const I=C.helpers.get(T)||0;return C.helpers.set(T,I+1),T},removeHelper(T){const I=C.helpers.get(T);if(I){const D=I-1;D?C.helpers.set(T,D):C.helpers.delete(T)}},helperString(T){return`_${il[C.helper(T)]}`},replaceNode(T){C.parent.children[C.childIndex]=C.currentNode=T},removeNode(T){const I=C.parent.children,D=T?I.indexOf(T):C.currentNode?C.childIndex:-1;!T||T===C.currentNode?(C.currentNode=null,C.onNodeRemoved()):C.childIndex>D&&(C.childIndex--,C.onNodeRemoved()),C.parent.children.splice(D,1)},onNodeRemoved:tn,addIdentifiers(T){},removeIdentifiers(T){},hoist(T){ht(T)&&(T=yt(T)),C.hoists.push(T);const I=yt(`_hoisted_${C.hoists.length}`,!1,T.loc,2);return I.hoisted=T,I},cache(T,I=!1,D=!1){const R=s7(C.cached.length,T,I,D);return C.cached.push(R),R}};return C.filters=new Set,C}function M7(t,e){const i=O7(t,e);ad(t,i),e.hoistStatic&&ase(t,i),e.ssr||use(t,i),t.helpers=new Set([...i.helpers.keys()]),t.components=[...i.components],t.directives=[...i.directives],t.imports=i.imports,t.hoists=i.hoists,t.temps=i.temps,t.cached=i.cached,t.transformed=!0,t.filters=[...i.filters]}function use(t,e){const{helper:i}=e,{children:n}=t;if(n.length===1){const s=I7(t);if(s&&s.codegenNode){const r=s.codegenNode;r.type===13&&P0(r,e),t.codegenNode=r}else t.codegenNode=n[0]}else if(n.length>1){let s=64;t.codegenNode=fu(e,i(au),void 0,t.children,s,void 0,void 0,!0,void 0,!1)}}function cse(t,e){let i=0;const n=()=>{i--};for(;i<t.children.length;i++){const s=t.children[i];ht(s)||(e.grandParent=e.parent,e.parent=t,e.childIndex=i,e.onNodeRemoved=n,ad(s,e))}}function ad(t,e){e.currentNode=t;const{nodeTransforms:i}=e,n=[];for(let r=0;r<i.length;r++){const o=i[r](t,e);if(o&&(Qe(o)?n.push(...o):n.push(o)),e.currentNode)t=e.currentNode;else return}switch(t.type){case 3:e.ssr||e.helper(uu);break;case 5:e.ssr||e.helper(Jc);break;case 9:for(let r=0;r<t.branches.length;r++)ad(t.branches[r],e);break;case 10:case 11:case 1:case 0:cse(t,e);break}e.currentNode=t;let s=n.length;for(;s--;)n[s]()}function z2(t,e){const i=ht(t)?n=>n===t:n=>t.test(n);return(n,s)=>{if(n.type===1){const{props:r}=n;if(n.tagType===3&&r.some(N2))return;const o=[];for(let a=0;a<r.length;a++){const l=r[a];if(l.type===7&&i(l.name)){r.splice(a,1),a--;const u=e(n,l,s);u&&o.push(u)}}return o}}}const N0="/*@__PURE__*/",$7=t=>`${il[t]}: _${il[t]}`;function dse(t,{mode:e="function",prefixIdentifiers:i=e==="module",sourceMap:n=!1,filename:s="template.vue.html",scopeId:r=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:c=!1,isTS:d=!1,inSSR:f=!1}){const h={mode:e,prefixIdentifiers:i,sourceMap:n,filename:s,scopeId:r,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:c,isTS:d,inSSR:f,source:t.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(m){return`_${il[m]}`},push(m,g=-2,v){h.code+=m},indent(){p(++h.indentLevel)},deindent(m=!1){m?--h.indentLevel:p(--h.indentLevel)},newline(){p(h.indentLevel)}};function p(m){h.push(`
`+"  ".repeat(m),0)}return h}function F7(t,e={}){const i=dse(t,e);e.onContextCreated&&e.onContextCreated(i);const{mode:n,push:s,prefixIdentifiers:r,indent:o,deindent:a,newline:l,scopeId:u,ssr:c}=i,d=Array.from(t.helpers),f=d.length>0,h=!r&&n!=="module";fse(t,i);const m=c?"ssrRender":"render",v=(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(s(`function ${m}(${v}) {`),o(),h&&(s("with (_ctx) {"),o(),f&&(s(`const { ${d.map($7).join(", ")} } = _Vue
`,-1),l())),t.components.length&&(G2(t.components,"component",i),(t.directives.length||t.temps>0)&&l()),t.directives.length&&(G2(t.directives,"directive",i),t.temps>0&&l()),t.filters&&t.filters.length&&(l(),G2(t.filters,"filter",i),l()),t.temps>0){s("let ");for(let b=0;b<t.temps;b++)s(`${b>0?", ":""}_temp${b}`)}return(t.components.length||t.directives.length||t.temps)&&(s(`
`,0),l()),c||s("return "),t.codegenNode?Ln(t.codegenNode,i):s("null"),h&&(a(),s("}")),a(),s("}"),{ast:t,code:i.code,preamble:"",map:i.map?i.map.toJSON():void 0}}function fse(t,e){const{ssr:i,prefixIdentifiers:n,push:s,newline:r,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,u=a,c=Array.from(t.helpers);if(c.length>0&&(s(`const _Vue = ${u}
`,-1),t.hoists.length)){const d=[m0,g0,uu,v0,I2].filter(f=>c.includes(f)).map($7).join(", ");s(`const { ${d} } = _Vue
`,-1)}hse(t.hoists,e),r(),s("return ")}function G2(t,e,{helper:i,push:n,newline:s,isTS:r}){const o=i(e==="filter"?w0:e==="component"?_0:y0);for(let a=0;a<t.length;a++){let l=t[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),n(`const ${mu(l,e)} = ${o}(${JSON.stringify(l)}${u?", true":""})${r?"!":""}`),a<t.length-1&&s()}}function hse(t,e){if(!t.length)return;e.pure=!0;const{push:i,newline:n}=e;n();for(let s=0;s<t.length;s++){const r=t[s];r&&(i(`const _hoisted_${s+1} = `),Ln(r,e),n())}e.pure=!1}function W2(t,e){const i=t.length>3||!1;e.push("["),i&&e.indent(),ld(t,e,i),i&&e.deindent(),e.push("]")}function ld(t,e,i=!1,n=!0){const{push:s,newline:r}=e;for(let o=0;o<t.length;o++){const a=t[o];ht(a)?s(a,-3):Qe(a)?W2(a,e):Ln(a,e),o<t.length-1&&(i?(n&&s(","),r()):n&&s(", "))}}function Ln(t,e){if(ht(t)){e.push(t,-3);return}if(On(t)){e.push(e.helper(t));return}switch(t.type){case 1:case 9:case 11:Ln(t.codegenNode,e);break;case 2:pse(t,e);break;case 4:B7(t,e);break;case 5:mse(t,e);break;case 12:Ln(t.codegenNode,e);break;case 8:N7(t,e);break;case 3:vse(t,e);break;case 13:_se(t,e);break;case 14:yse(t,e);break;case 15:wse(t,e);break;case 17:Ese(t,e);break;case 18:Sse(t,e);break;case 19:xse(t,e);break;case 20:Tse(t,e);break;case 21:ld(t.body,e,!0,!1);break}}function pse(t,e){e.push(JSON.stringify(t.content),-3,t)}function B7(t,e){const{content:i,isStatic:n}=t;e.push(n?JSON.stringify(i):i,-3,t)}function mse(t,e){const{push:i,helper:n,pure:s}=e;s&&i(N0),i(`${n(Jc)}(`),Ln(t.content,e),i(")")}function N7(t,e){for(let i=0;i<t.children.length;i++){const n=t.children[i];ht(n)?e.push(n,-3):Ln(n,e)}}function gse(t,e){const{push:i}=e;if(t.type===8)i("["),N7(t,e),i("]");else if(t.isStatic){const n=id(t.content)?t.content:JSON.stringify(t.content);i(n,-2,t)}else i(`[${t.content}]`,-3,t)}function vse(t,e){const{push:i,helper:n,pure:s}=e;s&&i(N0),i(`${n(uu)}(${JSON.stringify(t.content)})`,-3,t)}function _se(t,e){const{push:i,helper:n,pure:s}=e,{tag:r,props:o,children:a,patchFlag:l,dynamicProps:u,directives:c,isBlock:d,disableTracking:f,isComponent:h}=t;let p;l&&(p=String(l)),c&&i(n(E0)+"("),d&&i(`(${n(ca)}(${f?"true":""}), `),s&&i(N0);const m=d?rl(e.inSSR,h):sl(e.inSSR,h);i(n(m)+"(",-2,t),ld(bse([r,o,a,p,u]),e),i(")"),d&&i(")"),c&&(i(", "),Ln(c,e),i(")"))}function bse(t){let e=t.length;for(;e--&&t[e]==null;);return t.slice(0,e+1).map(i=>i||"null")}function yse(t,e){const{push:i,helper:n,pure:s}=e,r=ht(t.callee)?t.callee:n(t.callee);s&&i(N0),i(r+"(",-2,t),ld(t.arguments,e),i(")")}function wse(t,e){const{push:i,indent:n,deindent:s,newline:r}=e,{properties:o}=t;if(!o.length){i("{}",-2,t);return}const a=o.length>1||!1;i(a?"{":"{ "),a&&n();for(let l=0;l<o.length;l++){const{key:u,value:c}=o[l];gse(u,e),i(": "),Ln(c,e),l<o.length-1&&(i(","),r())}a&&s(),i(a?"}":" }")}function Ese(t,e){W2(t.elements,e)}function Sse(t,e){const{push:i,indent:n,deindent:s}=e,{params:r,returns:o,body:a,newline:l,isSlot:u}=t;u&&i(`_${il[L0]}(`),i("(",-2,t),Qe(r)?ld(r,e):r&&Ln(r,e),i(") => "),(l||a)&&(i("{"),n()),o?(l&&i("return "),Qe(o)?W2(o,e):Ln(o,e)):a&&Ln(a,e),(l||a)&&(s(),i("}")),u&&(t.isNonScopedSlot&&i(", undefined, true"),i(")"))}function xse(t,e){const{test:i,consequent:n,alternate:s,newline:r}=t,{push:o,indent:a,deindent:l,newline:u}=e;if(i.type===4){const d=!id(i.content);d&&o("("),B7(i,e),d&&o(")")}else o("("),Ln(i,e),o(")");r&&a(),e.indentLevel++,r||o(" "),o("? "),Ln(n,e),e.indentLevel--,r&&u(),r||o(" "),o(": ");const c=s.type===19;c||e.indentLevel++,Ln(s,e),c||e.indentLevel--,r&&l(!0)}function Tse(t,e){const{push:i,helper:n,indent:s,deindent:r,newline:o}=e,{needPauseTracking:a,needArraySpread:l}=t;l&&i("[...("),i(`_cache[${t.index}] || (`),a&&(s(),i(`${n(td)}(-1`),t.inVOnce&&i(", true"),i("),"),o(),i("(")),i(`_cache[${t.index}] = `),Ln(t.value,e),a&&(i(`).cacheIndex = ${t.index},`),o(),i(`${n(td)}(1),`),o(),i(`_cache[${t.index}]`),r()),i(")"),l&&i(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const Ase=(t,e)=>{if(t.type===5)t.content=U0(t.content,e);else if(t.type===1){const i=qn(t,"memo");for(let n=0;n<t.props.length;n++){const s=t.props[n];if(s.type===7&&s.name!=="for"){const r=s.exp,o=s.arg;r&&r.type===4&&!(s.name==="on"&&o)&&!(i&&o&&o.type===4&&o.content==="key")&&(s.exp=U0(r,e,s.name==="slot")),o&&o.type===4&&!o.isStatic&&(s.arg=U0(o,e))}}}};function U0(t,e,i=!1,n=!1,s=Object.create(e.identifiers)){return t}function U7(t){return ht(t)?t:t.type===4?t.content:t.children.map(U7).join("")}const kse=z2(/^(if|else|else-if)$/,(t,e,i)=>V7(t,e,i,(n,s,r)=>{const o=i.parent.children;let a=o.indexOf(n),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(r)n.codegenNode=H7(s,l,i);else{const u=Cse(n.codegenNode);u.alternate=H7(s,l+n.branches.length-1,i)}}}));function V7(t,e,i,n){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const s=e.exp?e.exp.loc:t.loc;i.onError(pi(28,e.loc)),e.exp=yt("true",!1,s)}if(e.name==="if"){const s=j7(t,e),r={type:9,loc:sse(t.loc),branches:[s]};if(i.replaceNode(r),n)return n(r,s,!0)}else{const s=i.parent.children;let r=s.indexOf(t);for(;r-->=-1;){const o=s[r];if(o&&o.type===3){i.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){i.removeNode(o);continue}if(o&&o.type===9){(e.name==="else-if"||e.name==="else")&&o.branches[o.branches.length-1].condition===void 0&&i.onError(pi(30,t.loc)),i.removeNode();const a=j7(t,e);o.branches.push(a);const l=n&&n(o,a,!1);ad(a,i),l&&l(),i.currentNode=null}else i.onError(pi(30,t.loc));break}}}function j7(t,e){const i=t.tagType===3;return{type:10,loc:t.loc,condition:e.name==="else"?void 0:e.exp,children:i&&!qn(t,"for")?t.children:[t],userKey:nd(t,"key"),isTemplateIf:i}}function H7(t,e,i){return t.condition?R0(t.condition,z7(t,e,i),zi(i.helper(uu),['""',"true"])):z7(t,e,i)}function z7(t,e,i){const{helper:n}=i,s=Ri("key",yt(`${e}`,!1,Qi,2)),{children:r}=t,o=r[0];if(r.length!==1||o.type!==1)if(r.length===1&&o.type===11){const l=o.codegenNode;return rd(l,s,i),l}else return fu(i,n(au),xs([s]),r,64,void 0,void 0,!0,!1,!1,t.loc);else{const l=o.codegenNode,u=w7(l);return u.type===13&&P0(u,i),rd(u,s,i),l}}function Cse(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const G7=(t,e,i)=>{const{modifiers:n,loc:s}=t,r=t.arg;let{exp:o}=t;if(o&&o.type===4&&!o.content.trim()&&(o=void 0),!o){if(r.type!==4||!r.isStatic)return i.onError(pi(52,r.loc)),{props:[Ri(r,yt("",!0,s))]};W7(t),o=t.exp}return r.type!==4?(r.children.unshift("("),r.children.push(') || ""')):r.isStatic||(r.content=r.content?`${r.content} || ""`:'""'),n.some(a=>a.content==="camel")&&(r.type===4?r.isStatic?r.content=ci(r.content):r.content=`${i.helperString(k0)}(${r.content})`:(r.children.unshift(`${i.helperString(k0)}(`),r.children.push(")"))),i.inSSR||(n.some(a=>a.content==="prop")&&K7(r,"."),n.some(a=>a.content==="attr")&&K7(r,"^")),{props:[Ri(r,o)]}},W7=(t,e)=>{const i=t.arg,n=ci(i.content);t.exp=yt(n,!1,i.loc)},K7=(t,e)=>{t.type===4?t.isStatic?t.content=e+t.content:t.content=`\`${e}\${${t.content}}\``:(t.children.unshift(`'${e}' + (`),t.children.push(")"))},Lse=z2("for",(t,e,i)=>{const{helper:n,removeHelper:s}=i;return Y7(t,e,i,r=>{const o=zi(n(S0),[r.source]),a=pu(t),l=qn(t,"memo"),u=nd(t,"key",!1,!0);u&&u.type===7&&!u.exp&&W7(u);let d=u&&(u.type===6?u.value?yt(u.value.content,!0):void 0:u.exp);const f=u&&d?Ri("key",d):null,h=r.source.type===4&&r.source.constType>0,p=h?64:u?128:256;return r.codegenNode=fu(i,n(au),void 0,o,p,void 0,void 0,!0,!h,!1,t.loc),()=>{let m;const{children:g}=r,v=g.length!==1||g[0].type!==1,b=sd(t)?t:a&&t.children.length===1&&sd(t.children[0])?t.children[0]:null;if(b?(m=b.codegenNode,a&&f&&rd(m,f,i)):v?m=fu(i,n(au),f?xs([f]):void 0,t.children,64,void 0,void 0,!0,void 0,!1):(m=g[0].codegenNode,a&&f&&rd(m,f,i),m.isBlock!==!h&&(m.isBlock?(s(ca),s(rl(i.inSSR,m.isComponent))):s(sl(i.inSSR,m.isComponent))),m.isBlock=!h,m.isBlock?(n(ca),n(rl(i.inSSR,m.isComponent))):n(sl(i.inSSR,m.isComponent))),l){const _=nl(V0(r.parseResult,[yt("_cached")]));_.body=r7([zs(["const _memo = (",l.exp,")"]),zs(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${i.helperString(D2)}(_cached, _memo)) return _cached`]),zs(["const _item = ",m]),yt("_item.memo = _memo"),yt("return _item")]),o.arguments.push(_,yt("_cache"),yt(String(i.cached.length))),i.cached.push(null)}else o.arguments.push(nl(V0(r.parseResult),m,!0))}})});function Y7(t,e,i,n){if(!e.exp){i.onError(pi(31,e.loc));return}const s=e.forParseResult;if(!s){i.onError(pi(32,e.loc));return}K2(s);const{addIdentifiers:r,removeIdentifiers:o,scopes:a}=i,{source:l,value:u,key:c,index:d}=s,f={type:11,loc:e.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:d,parseResult:s,children:pu(t)?t.children:[t]};i.replaceNode(f),a.vFor++;const h=n&&n(f);return()=>{a.vFor--,h&&h()}}function K2(t,e){t.finalized||(t.finalized=!0)}function V0({value:t,key:e,index:i},n=[]){return Ise([t,e,i,...n])}function Ise(t){let e=t.length;for(;e--&&!t[e];);return t.slice(0,e+1).map((i,n)=>i||yt("_".repeat(n+1),!1))}const X7=yt("undefined",!1),q7=(t,e)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const i=qn(t,"slot");if(i)return i.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},Rse=(t,e)=>{let i;if(pu(t)&&t.props.some(N2)&&(i=qn(t,"for"))){const n=i.forParseResult;if(n){K2(n);const{value:s,key:r,index:o}=n,{addIdentifiers:a,removeIdentifiers:l}=e;return s&&a(s),r&&a(r),o&&a(o),()=>{s&&l(s),r&&l(r),o&&l(o)}}}},Pse=(t,e,i,n)=>nl(t,i,!1,!0,i.length?i[0].loc:n);function Z7(t,e,i=Pse){e.helper(L0);const{children:n,loc:s}=t,r=[],o=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=qn(t,"slot",!0);if(l){const{arg:g,exp:v}=l;g&&!Xn(g)&&(a=!0),r.push(Ri(g||yt("default",!0),i(v,void 0,n,s)))}let u=!1,c=!1;const d=[],f=new Set;let h=0;for(let g=0;g<n.length;g++){const v=n[g];let b;if(!pu(v)||!(b=qn(v,"slot",!0))){v.type!==3&&d.push(v);continue}if(l){e.onError(pi(37,b.loc));break}u=!0;const{children:_,loc:y}=v,{arg:E=yt("default",!0),exp:S,loc:A}=b;let C;Xn(E)?C=E?E.content:"default":a=!0;const T=qn(v,"for"),I=i(S,T,_,y);let D,R;if(D=qn(v,"if"))a=!0,o.push(R0(D.exp,j0(E,I,h++),X7));else if(R=qn(v,/^else(-if)?$/,!0)){let O=g,M;for(;O--&&(M=n[O],!(M.type!==3&&Y2(M))););if(M&&pu(M)&&qn(M,/^(else-)?if$/)){let U=o[o.length-1];for(;U.alternate.type===19;)U=U.alternate;U.alternate=R.exp?R0(R.exp,j0(E,I,h++),X7):j0(E,I,h++)}else e.onError(pi(30,R.loc))}else if(T){a=!0;const O=T.forParseResult;O?(K2(O),o.push(zi(e.helper(S0),[O.source,nl(V0(O),j0(E,I),!0)]))):e.onError(pi(32,T.loc))}else{if(C){if(f.has(C)){e.onError(pi(38,A));continue}f.add(C),C==="default"&&(c=!0)}r.push(Ri(E,I))}}if(!l){const g=(v,b)=>{const _=i(v,void 0,b,s);return e.compatConfig&&(_.isNonScopedSlot=!0),Ri("default",_)};u?d.length&&d.some(v=>Y2(v))&&(c?e.onError(pi(39,d[0].loc)):r.push(g(void 0,d))):r.push(g(void 0,n))}const p=a?2:H0(t.children)?3:1;let m=xs(r.concat(Ri("_",yt(p+"",!1))),s);return o.length&&(m=zi(e.helper(P2),[m,da(o)])),{slots:m,hasDynamicSlots:a}}function j0(t,e,i){const n=[Ri("name",t),Ri("fn",e)];return i!=null&&n.push(Ri("key",yt(String(i),!0))),xs(n)}function H0(t){for(let e=0;e<t.length;e++){const i=t[e];switch(i.type){case 1:if(i.tagType===2||H0(i.children))return!0;break;case 9:if(H0(i.branches))return!0;break;case 10:case 11:if(H0(i.children))return!0;break}}return!1}function Y2(t){return t.type!==2&&t.type!==12?!0:t.type===2?!!t.content.trim():Y2(t.content)}const Q7=new WeakMap,J7=(t,e)=>function(){if(t=e.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:n,props:s}=t,r=t.tagType===1;let o=r?eE(t,e):`"${n}"`;const a=Kt(o)&&o.callee===b0;let l,u,c=0,d,f,h,p=a||o===lu||o===p0||!r&&(n==="svg"||n==="foreignObject"||n==="math");if(s.length>0){const m=X2(t,e,void 0,r,a);l=m.props,c=m.patchFlag,f=m.dynamicPropNames;const g=m.directives;h=g&&g.length?da(g.map(v=>iE(v,e))):void 0,m.shouldUseBlock&&(p=!0)}if(t.children.length>0)if(o===Qc&&(p=!0,c|=1024),r&&o!==lu&&o!==Qc){const{slots:g,hasDynamicSlots:v}=Z7(t,e);u=g,v&&(c|=1024)}else if(t.children.length===1&&o!==lu){const g=t.children[0],v=g.type,b=v===5||v===8;b&&as(g,e)===0&&(c|=1),b||v===2?u=g:u=t.children}else u=t.children;f&&f.length&&(d=Ose(f)),t.codegenNode=fu(e,o,l,u,c===0?void 0:c,d,h,!!p,!1,r,t.loc)};function eE(t,e,i=!1){let{tag:n}=t;const s=q2(n),r=nd(t,"is",!1,!0);if(r)if(s||ol("COMPILER_IS_ON_ELEMENT",e)){let a;if(r.type===6?a=r.value&&yt(r.value.content,!0):(a=r.exp,a||(a=yt("is",!1,r.arg.loc))),a)return zi(e.helper(b0),[a])}else r.type===6&&r.value.content.startsWith("vue:")&&(n=r.value.content.slice(4));const o=$2(n)||e.isBuiltInComponent(n);return o?(i||e.helper(o),o):(e.helper(_0),e.components.add(n),mu(n,"component"))}function X2(t,e,i=t.props,n,s,r=!1){const{tag:o,loc:a,children:l}=t;let u=[];const c=[],d=[],f=l.length>0;let h=!1,p=0,m=!1,g=!1,v=!1,b=!1,_=!1,y=!1;const E=[],S=I=>{u.length&&(c.push(xs(tE(u),a)),u=[]),I&&c.push(I)},A=()=>{e.scopes.vFor>0&&u.push(Ri(yt("ref_for",!0),yt("true")))},C=({key:I,value:D})=>{if(Xn(I)){const R=I.content,O=Po(R);if(O&&(!n||s)&&R.toLowerCase()!=="onclick"&&R!=="onUpdate:modelValue"&&!zr(R)&&(b=!0),O&&zr(R)&&(y=!0),O&&D.type===14&&(D=D.arguments[0]),D.type===20||(D.type===4||D.type===8)&&as(D,e)>0)return;R==="ref"?m=!0:R==="class"?g=!0:R==="style"?v=!0:R!=="key"&&!E.includes(R)&&E.push(R),n&&(R==="class"||R==="style")&&!E.includes(R)&&E.push(R)}else _=!0};for(let I=0;I<i.length;I++){const D=i[I];if(D.type===6){const{loc:R,name:O,nameLoc:M,value:U}=D;let $=!0;if(O==="ref"&&(m=!0,A()),O==="is"&&(q2(o)||U&&U.content.startsWith("vue:")||ol("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(Ri(yt(O,!0,M),yt(U?U.content:"",$,U?U.loc:R)))}else{const{name:R,arg:O,exp:M,loc:U,modifiers:$}=D,B=R==="bind",W=R==="on";if(R==="slot"){n||e.onError(pi(40,U));continue}if(R==="once"||R==="memo"||R==="is"||B&&ha(O,"is")&&(q2(o)||ol("COMPILER_IS_ON_ELEMENT",e))||W&&r)continue;if((B&&ha(O,"key")||W&&f&&ha(O,"vue:before-update"))&&(h=!0),B&&ha(O,"ref")&&A(),!O&&(B||W)){if(_=!0,M)if(B){if(S(),ol("COMPILER_V_BIND_OBJECT_ORDER",e)){c.unshift(M);continue}A(),S(),c.push(M)}else S({type:14,loc:U,callee:e.helper(A0),arguments:n?[M]:[M,"true"]});else e.onError(pi(B?34:35,U));continue}B&&$.some(re=>re.content==="prop")&&(p|=32);const te=e.directiveTransforms[R];if(te){const{props:re,needRuntime:q}=te(D,t,e);!r&&re.forEach(C),W&&O&&!Xn(O)?S(xs(re,a)):u.push(...re),q&&(d.push(D),On(q)&&Q7.set(D,q))}else Uv(R)||(d.push(D),f&&(h=!0))}}let T;if(c.length?(S(),c.length>1?T=zi(e.helper(ed),c,a):T=c[0]):u.length&&(T=xs(tE(u),a)),_?p|=16:(g&&!n&&(p|=2),v&&!n&&(p|=4),E.length&&(p|=8),b&&(p|=32)),!h&&(p===0||p===32)&&(m||y||d.length>0)&&(p|=512),!e.inSSR&&T)switch(T.type){case 15:let I=-1,D=-1,R=!1;for(let U=0;U<T.properties.length;U++){const $=T.properties[U].key;Xn($)?$.content==="class"?I=U:$.content==="style"&&(D=U):$.isHandlerKey||(R=!0)}const O=T.properties[I],M=T.properties[D];R?T=zi(e.helper(cu),[T]):(O&&!Xn(O.value)&&(O.value=zi(e.helper(x0),[O.value])),M&&(v||M.value.type===4&&M.value.content.trim()[0]==="["||M.value.type===17)&&(M.value=zi(e.helper(T0),[M.value])));break;case 14:break;default:T=zi(e.helper(cu),[zi(e.helper(du),[T])]);break}return{props:T,directives:d,patchFlag:p,dynamicPropNames:E,shouldUseBlock:h}}function tE(t){const e=new Map,i=[];for(let n=0;n<t.length;n++){const s=t[n];if(s.key.type===8||!s.key.isStatic){i.push(s);continue}const r=s.key.content,o=e.get(r);o?(r==="style"||r==="class"||Po(r))&&Dse(o,s):(e.set(r,s),i.push(s))}return i}function Dse(t,e){t.value.type===17?t.value.elements.push(e.value):t.value=da([t.value,e.value],t.loc)}function iE(t,e){const i=[],n=Q7.get(t);n?i.push(e.helperString(n)):(e.helper(y0),e.directives.add(t.name),i.push(mu(t.name,"directive")));const{loc:s}=t;if(t.exp&&i.push(t.exp),t.arg&&(t.exp||i.push("void 0"),i.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||i.push("void 0"),i.push("void 0"));const r=yt("true",!1,s);i.push(xs(t.modifiers.map(o=>Ri(o,r)),s))}return da(i,t.loc)}function Ose(t){let e="[";for(let i=0,n=t.length;i<n;i++)e+=JSON.stringify(t[i]),i<n-1&&(e+=", ");return e+"]"}function q2(t){return t==="component"||t==="Component"}const Mse=(t,e)=>{if(sd(t)){const{children:i,loc:n}=t,{slotName:s,slotProps:r}=nE(t,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",s,"{}","undefined","true"];let a=2;r&&(o[2]=r,a=3),i.length&&(o[3]=nl([],i,!1,!1,n),a=4),e.scopeId&&!e.slotted&&(a=5),o.splice(a),t.codegenNode=zi(e.helper(R2),o,n)}};function nE(t,e){let i='"default"',n;const s=[];for(let r=0;r<t.props.length;r++){const o=t.props[r];if(o.type===6)o.value&&(o.name==="name"?i=JSON.stringify(o.value.content):(o.name=ci(o.name),s.push(o)));else if(o.name==="bind"&&ha(o.arg,"name")){if(o.exp)i=o.exp;else if(o.arg&&o.arg.type===4){const a=ci(o.arg.content);i=o.exp=yt(a,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&Xn(o.arg)&&(o.arg.content=ci(o.arg.content)),s.push(o)}if(s.length>0){const{props:r,directives:o}=X2(t,e,s,!1,!1);n=r,o.length&&e.onError(pi(36,o[0].loc))}return{slotName:i,slotProps:n}}const Z2=(t,e,i,n)=>{const{loc:s,modifiers:r,arg:o}=t;!t.exp&&!r.length&&i.onError(pi(35,s));let a;if(o.type===4)if(o.isStatic){let d=o.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`);const f=e.tagType!==0||d.startsWith("vnode")||!/[A-Z]/.test(d)?Ea(ci(d)):`on:${d}`;a=yt(f,!0,o.loc)}else a=zs([`${i.helperString(C0)}(`,o,")"]);else a=o,a.children.unshift(`${i.helperString(C0)}(`),a.children.push(")");let l=t.exp;l&&!l.content.trim()&&(l=void 0);let u=i.cacheHandlers&&!l&&!i.inVOnce;if(l){const d=F2(l),f=!(d||g7(l)),h=l.content.includes(";");(f||u&&d)&&(l=zs([`${f?"$event":"(...args)"} => ${h?"{":"("}`,l,h?"}":")"]))}let c={props:[Ri(a,l||yt("() => {}",!1,s))]};return n&&(c=n(c)),u&&(c.props[0].value=i.cache(c.props[0].value)),c.props.forEach(d=>d.key.isHandlerKey=!0),c},$se=(t,e)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const i=t.children;let n,s=!1;for(let r=0;r<i.length;r++){const o=i[r];if(O0(o)){s=!0;for(let a=r+1;a<i.length;a++){const l=i[a];if(O0(l))n||(n=i[r]=zs([o],o.loc)),n.children.push(" + ",l),i.splice(a,1),a--;else{n=void 0;break}}}}if(!(!s||i.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(r=>r.type===7&&!e.directiveTransforms[r.name])&&t.tag!=="template")))for(let r=0;r<i.length;r++){const o=i[r];if(O0(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!e.ssr&&as(o,e)===0&&a.push("1"),i[r]={type:12,content:o,loc:o.loc,codegenNode:zi(e.helper(v0),a)}}}}},sE=new WeakSet,Fse=(t,e)=>{if(t.type===1&&qn(t,"once",!0))return sE.has(t)||e.inVOnce||e.inSSR?void 0:(sE.add(t),e.inVOnce=!0,e.helper(td),()=>{e.inVOnce=!1;const i=e.currentNode;i.codegenNode&&(i.codegenNode=e.cache(i.codegenNode,!0,!0))})},Q2=(t,e,i)=>{const{exp:n,arg:s}=t;if(!n)return i.onError(pi(41,t.loc)),z0();const r=n.loc.source.trim(),o=n.type===4?n.content:r,a=i.bindingMetadata[r];if(a==="props"||a==="props-aliased")return i.onError(pi(44,n.loc)),z0();if(!o.trim()||!F2(n))return i.onError(pi(42,n.loc)),z0();const l=s||yt("modelValue",!0),u=s?Xn(s)?`onUpdate:${ci(s.content)}`:zs(['"onUpdate:" + ',s]):"onUpdate:modelValue";let c;const d=i.isTS?"($event: any)":"$event";c=zs([`${d} => ((`,n,") = $event)"]);const f=[Ri(l,t.exp),Ri(u,c)];if(t.modifiers.length&&e.tagType===1){const h=t.modifiers.map(m=>m.content).map(m=>(id(m)?m:JSON.stringify(m))+": true").join(", "),p=s?Xn(s)?`${s.content}Modifiers`:zs([s,' + "Modifiers"']):"modelModifiers";f.push(Ri(p,yt(`{ ${h} }`,!1,t.loc,2)))}return z0(f)};function z0(t=[]){return{props:t}}const Bse=/[\w).+\-_$\]]/,Nse=(t,e)=>{ol("COMPILER_FILTERS",e)&&(t.type===5?G0(t.content,e):t.type===1&&t.props.forEach(i=>{i.type===7&&i.name!=="for"&&i.exp&&G0(i.exp,e)}))};function G0(t,e){if(t.type===4)rE(t,e);else for(let i=0;i<t.children.length;i++){const n=t.children[i];typeof n=="object"&&(n.type===4?rE(n,e):n.type===8?G0(t,e):n.type===5&&G0(n.content,e))}}function rE(t,e){const i=t.content;let n=!1,s=!1,r=!1,o=!1,a=0,l=0,u=0,c=0,d,f,h,p,m=[];for(h=0;h<i.length;h++)if(f=d,d=i.charCodeAt(h),n)d===39&&f!==92&&(n=!1);else if(s)d===34&&f!==92&&(s=!1);else if(r)d===96&&f!==92&&(r=!1);else if(o)d===47&&f!==92&&(o=!1);else if(d===124&&i.charCodeAt(h+1)!==124&&i.charCodeAt(h-1)!==124&&!a&&!l&&!u)p===void 0?(c=h+1,p=i.slice(0,h).trim()):g();else{switch(d){case 34:s=!0;break;case 39:n=!0;break;case 96:r=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(d===47){let v=h-1,b;for(;v>=0&&(b=i.charAt(v),b===" ");v--);(!b||!Bse.test(b))&&(o=!0)}}p===void 0?p=i.slice(0,h).trim():c!==0&&g();function g(){m.push(i.slice(c,h).trim()),c=h+1}if(m.length){for(h=0;h<m.length;h++)p=Use(p,m[h],e);t.content=p,t.ast=void 0}}function Use(t,e,i){i.helper(w0);const n=e.indexOf("(");if(n<0)return i.filters.add(e),`${mu(e,"filter")}(${t})`;{const s=e.slice(0,n),r=e.slice(n+1);return i.filters.add(s),`${mu(s,"filter")}(${t}${r!==")"?","+r:r}`}}const oE=new WeakSet,Vse=(t,e)=>{if(t.type===1){const i=qn(t,"memo");return!i||oE.has(t)||e.inSSR?void 0:(oE.add(t),()=>{const n=t.codegenNode||e.currentNode.codegenNode;n&&n.type===13&&(t.tagType!==1&&P0(n,e),t.codegenNode=zi(e.helper(I0),[i.exp,nl(void 0,n),"_cache",String(e.cached.length)]),e.cached.push(null))})}};function aE(t){return[[Fse,kse,Vse,Lse,Nse,Mse,J7,q7,$se],{on:Z2,bind:G7,model:Q2}]}function lE(t,e={}){const i=e.onError||M2,n=e.mode==="module";e.prefixIdentifiers===!0?i(pi(47)):n&&i(pi(48));const s=!1;e.cacheHandlers&&i(pi(49)),e.scopeId&&!n&&i(pi(50));const r=Ot({},e,{prefixIdentifiers:s}),o=ht(t)?H2(t,r):t,[a,l]=aE();return M7(o,Ot({},r,{nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:Ot({},l,e.directiveTransforms||{})})),F7(o,r)}const jse={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},uE=()=>({props:[]});/**
* @vue/compiler-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const J2=Symbol(""),ev=Symbol(""),tv=Symbol(""),iv=Symbol(""),W0=Symbol(""),nv=Symbol(""),sv=Symbol(""),rv=Symbol(""),ov=Symbol(""),av=Symbol("");i7({[J2]:"vModelRadio",[ev]:"vModelCheckbox",[tv]:"vModelText",[iv]:"vModelSelect",[W0]:"vModelDynamic",[nv]:"withModifiers",[sv]:"withKeys",[rv]:"vShow",[ov]:"Transition",[av]:"TransitionGroup"});let gu;function Hse(t,e=!1){return gu||(gu=document.createElement("div")),e?(gu.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,gu.children[0].getAttribute("foo")):(gu.innerHTML=t,gu.textContent)}const lv={parseMode:"html",isVoidTag:Yv,isNativeTag:t=>Gv(t)||Wv(t)||Kv(t),isPreTag:t=>t==="pre",isIgnoreNewlineTag:t=>t==="pre"||t==="textarea",decodeEntities:Hse,isBuiltInComponent:t=>{if(t==="Transition"||t==="transition")return ov;if(t==="TransitionGroup"||t==="transition-group")return av},getNamespace(t,e,i){let n=e?e.ns:i;if(e&&n===2)if(e.tag==="annotation-xml"){if(t==="svg")return 1;e.props.some(s=>s.type===6&&s.name==="encoding"&&s.value!=null&&(s.value.content==="text/html"||s.value.content==="application/xhtml+xml"))&&(n=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&t!=="mglyph"&&t!=="malignmark"&&(n=0);else e&&n===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(n=0);if(n===0){if(t==="svg")return 1;if(t==="math")return 2}return n}},cE=t=>{t.type===1&&t.props.forEach((e,i)=>{e.type===6&&e.name==="style"&&e.value&&(t.props[i]={type:7,name:"bind",arg:yt("style",!0,e.loc),exp:zse(e.value.content,e.loc),modifiers:[],loc:e.loc})})},zse=(t,e)=>{const i=pp(t);return yt(JSON.stringify(i),!1,e,3)};function Ao(t,e){return pi(t,e)}const Gse={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},Wse={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},Kse=(t,e,i)=>{const{exp:n,loc:s}=t;return n||i.onError(Ao(53,s)),e.children.length&&(i.onError(Ao(54,s)),e.children.length=0),{props:[Ri(yt("innerHTML",!0,s),n||yt("",!0))]}},Yse=(t,e,i)=>{const{exp:n,loc:s}=t;return n||i.onError(Ao(55,s)),e.children.length&&(i.onError(Ao(56,s)),e.children.length=0),{props:[Ri(yt("textContent",!0),n?as(n,i)>0?n:zi(i.helperString(Jc),[n],s):yt("",!0))]}},Xse=(t,e,i)=>{const n=Q2(t,e,i);if(!n.props.length||e.tagType===1)return n;t.arg&&i.onError(Ao(58,t.arg.loc));const{tag:s}=e,r=i.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||r){let o=tv,a=!1;if(s==="input"||r){const l=nd(e,"type");if(l){if(l.type===7)o=W0;else if(l.value)switch(l.value.content){case"radio":o=J2;break;case"checkbox":o=ev;break;case"file":a=!0,i.onError(Ao(59,t.loc));break}}else _7(e)&&(o=W0)}else s==="select"&&(o=iv);a||(n.needRuntime=i.helper(o))}else i.onError(Ao(57,t.loc));return n.props=n.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),n},qse=en("passive,once,capture"),Zse=en("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),Qse=en("left,right"),dE=en("onkeyup,onkeydown,onkeypress"),Jse=(t,e,i,n)=>{const s=[],r=[],o=[];for(let a=0;a<e.length;a++){const l=e[a].content;l==="native"&&hu("COMPILER_V_ON_NATIVE",i)||qse(l)?o.push(l):Qse(l)?Xn(t)?dE(t.content.toLowerCase())?s.push(l):r.push(l):(s.push(l),r.push(l)):Zse(l)?r.push(l):s.push(l)}return{keyModifiers:s,nonKeyModifiers:r,eventOptionModifiers:o}},fE=(t,e)=>Xn(t)&&t.content.toLowerCase()==="onclick"?yt(e,!0):t.type!==4?zs(["(",t,`) === "onClick" ? "${e}" : (`,t,")"]):t,ere=(t,e,i)=>Z2(t,e,i,n=>{const{modifiers:s}=t;if(!s.length)return n;let{key:r,value:o}=n.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=Jse(r,s,i,t.loc);if(l.includes("right")&&(r=fE(r,"onContextmenu")),l.includes("middle")&&(r=fE(r,"onMouseup")),l.length&&(o=zi(i.helper(nv),[o,JSON.stringify(l)])),a.length&&(!Xn(r)||dE(r.content.toLowerCase()))&&(o=zi(i.helper(sv),[o,JSON.stringify(a)])),u.length){const c=u.map(Oo).join("");r=Xn(r)?yt(`${r.content}${c}`,!0):zs(["(",r,`) + "${c}"`])}return{props:[Ri(r,o)]}}),tre=(t,e,i)=>{const{exp:n,loc:s}=t;return n||i.onError(Ao(61,s)),{props:[],needRuntime:i.helper(rv)}},ire=(t,e)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&e.removeNode()},hE=[cE],pE={cloak:uE,html:Kse,text:Yse,model:Xse,on:ere,show:tre};function nre(t,e={}){return lE(t,Ot({},lv,e,{nodeTransforms:[ire,...hE,...e.nodeTransforms||[]],directiveTransforms:Ot({},pE,e.directiveTransforms||{}),transformHoist:null}))}function sre(t,e={}){return H2(t,Ot({},lv,e))}const rre=xf(Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION:k2,BindingTypes:jse,CAMELIZE:k0,CAPITALIZE:Zw,CREATE_BLOCK:C2,CREATE_COMMENT:uu,CREATE_ELEMENT_BLOCK:L2,CREATE_ELEMENT_VNODE:g0,CREATE_SLOTS:P2,CREATE_STATIC:I2,CREATE_TEXT:v0,CREATE_VNODE:m0,CompilerDeprecationTypes:xne,ConstantTypes:gne,DOMDirectiveTransforms:pE,DOMErrorCodes:Gse,DOMErrorMessages:Wse,DOMNodeTransforms:hE,ElementTypes:mne,ErrorCodes:kne,FRAGMENT:au,GUARD_REACTIVE_PROPS:du,IS_MEMO_SAME:D2,IS_REF:t7,KEEP_ALIVE:Qc,MERGE_PROPS:ed,NORMALIZE_CLASS:x0,NORMALIZE_PROPS:cu,NORMALIZE_STYLE:T0,Namespaces:hne,NodeTypes:pne,OPEN_BLOCK:ca,POP_SCOPE_ID:Jw,PUSH_SCOPE_ID:Qw,RENDER_LIST:S0,RENDER_SLOT:R2,RESOLVE_COMPONENT:_0,RESOLVE_DIRECTIVE:y0,RESOLVE_DYNAMIC_COMPONENT:b0,RESOLVE_FILTER:w0,SET_BLOCK_TRACKING:td,SUSPENSE:p0,TELEPORT:lu,TO_DISPLAY_STRING:Jc,TO_HANDLERS:A0,TO_HANDLER_KEY:C0,TRANSITION:ov,TRANSITION_GROUP:av,TS_NODE_TYPES:d7,UNREF:e7,V_MODEL_CHECKBOX:ev,V_MODEL_DYNAMIC:W0,V_MODEL_RADIO:J2,V_MODEL_SELECT:iv,V_MODEL_TEXT:tv,V_ON_WITH_KEYS:sv,V_ON_WITH_MODIFIERS:nv,V_SHOW:rv,WITH_CTX:L0,WITH_DIRECTIVES:E0,WITH_MEMO:I0,advancePositionWithClone:Wne,advancePositionWithMutation:v7,assert:Kne,baseCompile:lE,baseParse:H2,buildDirectiveArgs:iE,buildProps:X2,buildSlots:Z7,checkCompatEnabled:hu,compile:nre,convertToBlock:P0,createArrayExpression:da,createAssignmentExpression:yne,createBlockStatement:r7,createCacheExpression:s7,createCallExpression:zi,createCompilerError:pi,createCompoundExpression:zs,createConditionalExpression:R0,createDOMCompilerError:Ao,createForLoopParams:V0,createFunctionExpression:nl,createIfStatement:bne,createInterpolation:vne,createObjectExpression:xs,createObjectProperty:Ri,createReturnStatement:Ene,createRoot:n7,createSequenceExpression:wne,createSimpleExpression:yt,createStructuralDirectiveTransform:z2,createTemplateLiteral:_ne,createTransformContext:O7,createVNodeCall:fu,errorMessages:Cne,extractIdentifiers:Eo,findDir:qn,findProp:nd,forAliasRE:E7,generate:F7,generateCodeFrame:Hv,getBaseTransformPreset:aE,getConstantType:as,getMemoedVNodeCall:w7,getVNodeBlockHelper:rl,getVNodeHelper:sl,hasDynamicKeyVBind:_7,hasScopeRef:fr,helperNameMap:il,injectProp:rd,isCoreComponent:$2,isFnExpression:g7,isFnExpressionBrowser:m7,isFnExpressionNode:Gne,isFunctionType:Fne,isInDestructureAssignment:Rne,isInNewExpression:Pne,isMemberExpression:F2,isMemberExpressionBrowser:p7,isMemberExpressionNode:Hne,isReferencedIdentifier:Ine,isSimpleIdentifier:id,isSlotOutlet:sd,isStaticArgOf:ha,isStaticExp:Xn,isStaticProperty:c7,isStaticPropertyKey:Bne,isTemplateNode:pu,isText:O0,isVPre:B2,isVSlot:N2,locStub:Qi,noopDirectiveTransform:uE,parse:sre,parserOptions:lv,processExpression:U0,processFor:Y7,processIf:V7,processSlotOutlet:nE,registerRuntimeHelpers:i7,resolveComponentType:eE,stringifyExpression:U7,toValidAssetId:mu,trackSlotScopes:q7,trackVForSlotScopes:Rse,transform:M7,transformBind:G7,transformElement:J7,transformExpression:Ase,transformModel:Q2,transformOn:Z2,transformStyle:cE,traverseNode:ad,unwrapTSNode:f7,walkBlockDeclarations:One,walkFunctionParams:Dne,walkIdentifiers:Lne,warnDeprecation:Ane},Symbol.toStringTag,{value:"Module"}))),ore=xf(HA),are=xf(jS);/**
* vue v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var mE;function lre(){return mE||(mE=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=rre,i=ore,n=are;function s(l){var u=Object.create(null);if(l)for(var c in l)u[c]=l[c];return u.default=l,Object.freeze(u)}var r=s(i);const o=Object.create(null);function a(l,u){if(!n.isString(l))if(l.nodeType)l=l.innerHTML;else return n.NOOP;const c=n.genCacheKey(l,u),d=o[c];if(d)return d;if(l[0]==="#"){const m=document.querySelector(l);l=m?m.innerHTML:""}const f=n.extend({hoistStatic:!0,onError:void 0,onWarn:n.NOOP},u);!f.isCustomElement&&typeof customElements<"u"&&(f.isCustomElement=m=>!!customElements.get(m));const{code:h}=e.compile(l,f),p=new Function("Vue",h)(r);return p._rc=!0,o[c]=p}i.registerRuntimeCompiler(a),t.compile=a,Object.keys(i).forEach(function(l){l!=="default"&&!Object.prototype.hasOwnProperty.call(t,l)&&(t[l]=i[l])})})(A2)),A2}var gE;function ure(){return gE||(gE=1,T2.exports=lre()),T2.exports}/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function vE(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),i.push.apply(i,n)}return i}function Ur(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?vE(Object(i),!0).forEach(function(n){cre(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):vE(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function K0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?K0=function(e){return typeof e}:K0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K0(t)}function cre(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Gs(){return Gs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Gs.apply(this,arguments)}function dre(t,e){if(t==null)return{};var i={},n=Object.keys(t),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(i[s]=t[s]);return i}function fre(t,e){if(t==null)return{};var i=dre(t,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hre(t){return pre(t)||mre(t)||gre(t)||vre()}function pre(t){if(Array.isArray(t))return uv(t)}function mre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gre(t,e){if(t){if(typeof t=="string")return uv(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return uv(t,e)}}function uv(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function vre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var _re="1.14.0";function ko(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Co=ko(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ud=ko(/Edge/i),_E=ko(/firefox/i),cd=ko(/safari/i)&&!ko(/chrome/i)&&!ko(/android/i),bE=ko(/iP(ad|od|hone)/i),bre=ko(/chrome/i)&&ko(/android/i),yE={capture:!1,passive:!1};function Ut(t,e,i){t.addEventListener(e,i,!Co&&yE)}function Pt(t,e,i){t.removeEventListener(e,i,!Co&&yE)}function Y0(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function yre(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function hr(t,e,i,n){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Y0(t,e):Y0(t,e))||n&&t===i)return t;if(t===i)break}while(t=yre(t))}return null}var wE=/\s+/g;function Ai(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(wE," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(wE," ")}}function lt(t,e,i){var n=t&&t.style;if(n){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=i+(typeof i=="string"?"":"px")}}function ul(t,e){var i="";if(typeof t=="string")i=t;else do{var n=lt(t,"transform");n&&n!=="none"&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function EE(t,e,i){if(t){var n=t.getElementsByTagName(e),s=0,r=n.length;if(i)for(;s<r;s++)i(n[s],s);return n}return[]}function Vr(){var t=document.scrollingElement;return t||document.documentElement}function bi(t,e,i,n,s){if(!(!t.getBoundingClientRect&&t!==window)){var r,o,a,l,u,c,d;if(t!==window&&t.parentNode&&t!==Vr()?(r=t.getBoundingClientRect(),o=r.top,a=r.left,l=r.bottom,u=r.right,c=r.height,d=r.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Co))do if(s&&s.getBoundingClientRect&&(lt(s,"transform")!=="none"||i&&lt(s,"position")!=="static")){var f=s.getBoundingClientRect();o-=f.top+parseInt(lt(s,"border-top-width")),a-=f.left+parseInt(lt(s,"border-left-width")),l=o+r.height,u=a+r.width;break}while(s=s.parentNode);if(n&&t!==window){var h=ul(s||t),p=h&&h.a,m=h&&h.d;h&&(o/=m,a/=p,d/=p,c/=m,l=o+c,u=a+d)}return{top:o,left:a,bottom:l,right:u,width:d,height:c}}}function SE(t,e,i){for(var n=ma(t,!0),s=bi(t)[e];n;){var r=bi(n)[i],o=void 0;if(o=s>=r,!o)return n;if(n===Vr())break;n=ma(n,!1)}return!1}function vu(t,e,i,n){for(var s=0,r=0,o=t.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==pt.ghost&&(n||o[r]!==pt.dragged)&&hr(o[r],i.draggable,t,!1)){if(s===e)return o[r];s++}r++}return null}function cv(t,e){for(var i=t.lastElementChild;i&&(i===pt.ghost||lt(i,"display")==="none"||e&&!Y0(i,e));)i=i.previousElementSibling;return i||null}function Di(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==pt.clone&&(!e||Y0(t,e))&&i++;return i}function xE(t){var e=0,i=0,n=Vr();if(t)do{var s=ul(t),r=s.a,o=s.d;e+=t.scrollLeft*r,i+=t.scrollTop*o}while(t!==n&&(t=t.parentNode));return[e,i]}function wre(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i)}return-1}function ma(t,e){if(!t||!t.getBoundingClientRect)return Vr();var i=t,n=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=lt(i);if(i.clientWidth<i.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return Vr();if(n||e)return i;n=!0}}while(i=i.parentNode);return Vr()}function Ere(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function dv(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var dd;function TE(t,e){return function(){if(!dd){var i=arguments,n=this;i.length===1?t.call(n,i[0]):t.apply(n,i),dd=setTimeout(function(){dd=void 0},e)}}}function Sre(){clearTimeout(dd),dd=void 0}function AE(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function fv(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function kE(t,e){lt(t,"position","absolute"),lt(t,"top",e.top),lt(t,"left",e.left),lt(t,"width",e.width),lt(t,"height",e.height)}function hv(t){lt(t,"position",""),lt(t,"top",""),lt(t,"left",""),lt(t,"width",""),lt(t,"height","")}var In="Sortable"+new Date().getTime();function xre(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(lt(s,"display")==="none"||s===pt.ghost)){t.push({target:s,rect:bi(s)});var r=Ur({},t[t.length-1].rect);if(s.thisAnimationDuration){var o=ul(s,!0);o&&(r.top-=o.f,r.left-=o.e)}s.fromRect=r}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(wre(t,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var r=!1,o=0;t.forEach(function(a){var l=0,u=a.target,c=u.fromRect,d=bi(u),f=u.prevFromRect,h=u.prevToRect,p=a.rect,m=ul(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&dv(f,d)&&!dv(c,d)&&(p.top-d.top)/(p.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(l=Are(p,f,h,s.options)),dv(d,c)||(u.prevFromRect=c,u.prevToRect=d,l||(l=s.options.animation),s.animate(u,p,d,l)),l&&(r=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),r?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),t=[]},animate:function(n,s,r,o){if(o){lt(n,"transition",""),lt(n,"transform","");var a=ul(this.el),l=a&&a.a,u=a&&a.d,c=(s.left-r.left)/(l||1),d=(s.top-r.top)/(u||1);n.animatingX=!!c,n.animatingY=!!d,lt(n,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=Tre(n),lt(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),lt(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){lt(n,"transition",""),lt(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function Tre(t){return t.offsetWidth}function Are(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}var _u=[],pv={initializeByDefault:!0},fd={mount:function(e){for(var i in pv)pv.hasOwnProperty(i)&&!(i in e)&&(e[i]=pv[i]);_u.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),_u.push(e)},pluginEvent:function(e,i,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var r=e+"Global";_u.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][r]&&i[o.pluginName][r](Ur({sortable:i},n)),i.options[o.pluginName]&&i[o.pluginName][e]&&i[o.pluginName][e](Ur({sortable:i},n)))})},initializePlugins:function(e,i,n,s){_u.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,i,e.options);u.sortable=e,u.options=e.options,e[l]=u,Gs(n,u.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);typeof o<"u"&&(e.options[r]=o)}},getEventProperties:function(e,i){var n={};return _u.forEach(function(s){typeof s.eventProperties=="function"&&Gs(n,s.eventProperties.call(i[s.pluginName],e))}),n},modifyOption:function(e,i,n){var s;return _u.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[i]=="function"&&(s=r.optionListeners[i].call(e[r.pluginName],n))}),s}};function hd(t){var e=t.sortable,i=t.rootEl,n=t.name,s=t.targetEl,r=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,h=t.putSortable,p=t.extraEventProperties;if(e=e||i&&i[In],!!e){var m,g=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Co&&!ud?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=o||i,m.from=a||i,m.item=s||i,m.clone=r,m.oldIndex=l,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var b=Ur(Ur({},p),fd.getEventProperties(n,e));for(var _ in b)m[_]=b[_];i&&i.dispatchEvent(m),g[v]&&g[v].call(e,m)}}var kre=["evt"],ls=function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,r=fre(n,kre);fd.pluginEvent.bind(pt)(e,i,Ur({dragEl:Ye,parentEl:Oi,ghostEl:xt,rootEl:yi,nextEl:cl,lastDownEl:X0,cloneEl:Mi,cloneHidden:ga,dragStarted:md,putSortable:_n,activeSortable:pt.active,originalEvent:s,oldIndex:bu,oldDraggableIndex:pd,newIndex:As,newDraggableIndex:va,hideGhostForTarget:OE,unhideGhostForTarget:ME,cloneNowHidden:function(){ga=!0},cloneNowShown:function(){ga=!1},dispatchSortableEvent:function(a){Zn({sortable:i,name:a,originalEvent:s})}},r))};function Zn(t){hd(Ur({putSortable:_n,cloneEl:Mi,targetEl:Ye,rootEl:yi,oldIndex:bu,oldDraggableIndex:pd,newIndex:As,newDraggableIndex:va},t))}var Ye,Oi,xt,yi,cl,X0,Mi,ga,bu,As,pd,va,q0,_n,yu=!1,Z0=!1,Q0=[],dl,pr,mv,gv,CE,LE,md,wu,gd,vd=!1,J0=!1,ep,Rn,vv=[],_v=!1,tp=[],ip=typeof document<"u",np=bE,IE=ud||Co?"cssFloat":"float",Cre=ip&&!bre&&!bE&&"draggable"in document.createElement("div"),RE=(function(){if(ip){if(Co)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),PE=function(e,i){var n=lt(e),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=vu(e,0,i),o=vu(e,1,i),a=r&&lt(r),l=o&&lt(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+bi(r).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+bi(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return r&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=s&&n[IE]==="none"||o&&n[IE]==="none"&&u+c>s)?"vertical":"horizontal"},Lre=function(e,i,n){var s=n?e.left:e.top,r=n?e.right:e.bottom,o=n?e.width:e.height,a=n?i.left:i.top,l=n?i.right:i.bottom,u=n?i.width:i.height;return s===a||r===l||s+o/2===a+u/2},Ire=function(e,i){var n;return Q0.some(function(s){var r=s[In].options.emptyInsertThreshold;if(!(!r||cv(s))){var o=bi(s),a=e>=o.left-r&&e<=o.right+r,l=i>=o.top-r&&i<=o.bottom+r;if(a&&l)return n=s}}),n},DE=function(e){function i(r,o){return function(a,l,u,c){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(r==null&&(o||d))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return i(r(a,l,u,c),o)(a,l,u,c);var f=(o?a:l).options.group.name;return r===!0||typeof r=="string"&&r===f||r.join&&r.indexOf(f)>-1}}var n={},s=e.group;(!s||K0(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=i(s.pull,!0),n.checkPut=i(s.put),n.revertClone=s.revertClone,e.group=n},OE=function(){!RE&&xt&&lt(xt,"display","none")},ME=function(){!RE&&xt&&lt(xt,"display","")};ip&&document.addEventListener("click",function(t){if(Z0)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Z0=!1,!1},!0);var fl=function(e){if(Ye){e=e.touches?e.touches[0]:e;var i=Ire(e.clientX,e.clientY);if(i){var n={};for(var s in e)e.hasOwnProperty(s)&&(n[s]=e[s]);n.target=n.rootEl=i,n.preventDefault=void 0,n.stopPropagation=void 0,i[In]._onDragOver(n)}}},Rre=function(e){Ye&&Ye.parentNode[In]._isOutsideThisEl(e.target)};function pt(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Gs({},e),t[In]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return PE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:pt.supportPointer!==!1&&"PointerEvent"in window&&!cd,emptyInsertThreshold:5};fd.initializePlugins(this,t,i);for(var n in i)!(n in e)&&(e[n]=i[n]);DE(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:Cre,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ut(t,"pointerdown",this._onTapStart):(Ut(t,"mousedown",this._onTapStart),Ut(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ut(t,"dragover",this),Ut(t,"dragenter",this)),Q0.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Gs(this,xre())}pt.prototype={constructor:pt,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(wu=null)},_getDirection:function(e,i){return typeof this.options.direction=="function"?this.options.direction.call(this,e,i,Ye):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,n=this.el,s=this.options,r=s.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=s.filter;if(Nre(n),!Ye&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||s.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&cd&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=hr(l,s.draggable,n,!1),!(l&&l.animated)&&X0!==l)){if(bu=Di(l),pd=Di(l,s.draggable),typeof c=="function"){if(c.call(this,e,l,this)){Zn({sortable:i,rootEl:u,name:"filter",targetEl:l,toEl:n,fromEl:n}),ls("filter",i,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=hr(u,d.trim(),n,!1),d)return Zn({sortable:i,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),ls("filter",i,{evt:e}),!0}),c)){r&&e.cancelable&&e.preventDefault();return}s.handle&&!hr(u,s.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,i,n){var s=this,r=s.el,o=s.options,a=r.ownerDocument,l;if(n&&!Ye&&n.parentNode===r){var u=bi(n);if(yi=r,Ye=n,Oi=Ye.parentNode,cl=Ye.nextSibling,X0=n,q0=o.group,pt.dragged=Ye,dl={target:Ye,clientX:(i||e).clientX,clientY:(i||e).clientY},CE=dl.clientX-u.left,LE=dl.clientY-u.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,Ye.style["will-change"]="all",l=function(){if(ls("delayEnded",s,{evt:e}),pt.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!_E&&s.nativeDraggable&&(Ye.draggable=!0),s._triggerDragStart(e,i),Zn({sortable:s,name:"choose",originalEvent:e}),Ai(Ye,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){EE(Ye,c.trim(),bv)}),Ut(a,"dragover",fl),Ut(a,"mousemove",fl),Ut(a,"touchmove",fl),Ut(a,"mouseup",s._onDrop),Ut(a,"touchend",s._onDrop),Ut(a,"touchcancel",s._onDrop),_E&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Ye.draggable=!0),ls("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(ud||Co))){if(pt.eventCanceled){this._onDrop();return}Ut(a,"mouseup",s._disableDelayedDrag),Ut(a,"touchend",s._disableDelayedDrag),Ut(a,"touchcancel",s._disableDelayedDrag),Ut(a,"mousemove",s._delayedDragTouchMoveHandler),Ut(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&Ut(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Ye&&bv(Ye),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Pt(e,"mouseup",this._disableDelayedDrag),Pt(e,"touchend",this._disableDelayedDrag),Pt(e,"touchcancel",this._disableDelayedDrag),Pt(e,"mousemove",this._delayedDragTouchMoveHandler),Pt(e,"touchmove",this._delayedDragTouchMoveHandler),Pt(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||e.pointerType=="touch"&&e,!this.nativeDraggable||i?this.options.supportPointer?Ut(document,"pointermove",this._onTouchMove):i?Ut(document,"touchmove",this._onTouchMove):Ut(document,"mousemove",this._onTouchMove):(Ut(Ye,"dragend",this),Ut(yi,"dragstart",this._onDragStart));try{document.selection?rp(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(yu=!1,yi&&Ye){ls("dragStarted",this,{evt:i}),this.nativeDraggable&&Ut(document,"dragover",Rre);var n=this.options;!e&&Ai(Ye,n.dragClass,!1),Ai(Ye,n.ghostClass,!0),pt.active=this,e&&this._appendGhost(),Zn({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(pr){this._lastX=pr.clientX,this._lastY=pr.clientY,OE();for(var e=document.elementFromPoint(pr.clientX,pr.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pr.clientX,pr.clientY),e!==i);)i=e;if(Ye.parentNode[In]._isOutsideThisEl(e),i)do{if(i[In]){var n=void 0;if(n=i[In]._onDragOver({clientX:pr.clientX,clientY:pr.clientY,target:e,rootEl:i}),n&&!this.options.dragoverBubble)break}e=i}while(i=i.parentNode);ME()}},_onTouchMove:function(e){if(dl){var i=this.options,n=i.fallbackTolerance,s=i.fallbackOffset,r=e.touches?e.touches[0]:e,o=xt&&ul(xt,!0),a=xt&&o&&o.a,l=xt&&o&&o.d,u=np&&Rn&&xE(Rn),c=(r.clientX-dl.clientX+s.x)/(a||1)+(u?u[0]-vv[0]:0)/(a||1),d=(r.clientY-dl.clientY+s.y)/(l||1)+(u?u[1]-vv[1]:0)/(l||1);if(!pt.active&&!yu){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(xt){o?(o.e+=c-(mv||0),o.f+=d-(gv||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");lt(xt,"webkitTransform",f),lt(xt,"mozTransform",f),lt(xt,"msTransform",f),lt(xt,"transform",f),mv=c,gv=d,pr=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!xt){var e=this.options.fallbackOnBody?document.body:yi,i=bi(Ye,!0,np,!0,e),n=this.options;if(np){for(Rn=e;lt(Rn,"position")==="static"&&lt(Rn,"transform")==="none"&&Rn!==document;)Rn=Rn.parentNode;Rn!==document.body&&Rn!==document.documentElement?(Rn===document&&(Rn=Vr()),i.top+=Rn.scrollTop,i.left+=Rn.scrollLeft):Rn=Vr(),vv=xE(Rn)}xt=Ye.cloneNode(!0),Ai(xt,n.ghostClass,!1),Ai(xt,n.fallbackClass,!0),Ai(xt,n.dragClass,!0),lt(xt,"transition",""),lt(xt,"transform",""),lt(xt,"box-sizing","border-box"),lt(xt,"margin",0),lt(xt,"top",i.top),lt(xt,"left",i.left),lt(xt,"width",i.width),lt(xt,"height",i.height),lt(xt,"opacity","0.8"),lt(xt,"position",np?"absolute":"fixed"),lt(xt,"zIndex","100000"),lt(xt,"pointerEvents","none"),pt.ghost=xt,e.appendChild(xt),lt(xt,"transform-origin",CE/parseInt(xt.style.width)*100+"% "+LE/parseInt(xt.style.height)*100+"%")}},_onDragStart:function(e,i){var n=this,s=e.dataTransfer,r=n.options;if(ls("dragStart",this,{evt:e}),pt.eventCanceled){this._onDrop();return}ls("setupClone",this),pt.eventCanceled||(Mi=fv(Ye),Mi.draggable=!1,Mi.style["will-change"]="",this._hideClone(),Ai(Mi,this.options.chosenClass,!1),pt.clone=Mi),n.cloneId=rp(function(){ls("clone",n),!pt.eventCanceled&&(n.options.removeCloneOnHide||yi.insertBefore(Mi,Ye),n._hideClone(),Zn({sortable:n,name:"clone"}))}),!i&&Ai(Ye,r.dragClass,!0),i?(Z0=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Pt(document,"mouseup",n._onDrop),Pt(document,"touchend",n._onDrop),Pt(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",r.setData&&r.setData.call(n,s,Ye)),Ut(document,"drop",n),lt(Ye,"transform","translateZ(0)")),yu=!0,n._dragStartId=rp(n._dragStarted.bind(n,i,e)),Ut(document,"selectstart",n),md=!0,cd&&lt(document.body,"user-select","none")},_onDragOver:function(e){var i=this.el,n=e.target,s,r,o,a=this.options,l=a.group,u=pt.active,c=q0===l,d=a.sort,f=_n||u,h,p=this,m=!1;if(_v)return;function g(W,te){ls(W,p,Ur({evt:e,isOwner:c,axis:h?"vertical":"horizontal",revert:o,dragRect:s,targetRect:r,canSort:d,fromSortable:f,target:n,completed:b,onMove:function(q,le){return sp(yi,i,Ye,s,q,bi(q),e,le)},changed:_},te))}function v(){g("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function b(W){return g("dragOverCompleted",{insertion:W}),W&&(c?u._hideClone():u._showClone(p),p!==f&&(Ai(Ye,_n?_n.options.ghostClass:u.options.ghostClass,!1),Ai(Ye,a.ghostClass,!0)),_n!==p&&p!==pt.active?_n=p:p===pt.active&&_n&&(_n=null),f===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){g("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===Ye&&!Ye.animated||n===i&&!n.animated)&&(wu=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(Ye.parentNode[In]._isOutsideThisEl(e.target),!W&&fl(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function _(){As=Di(Ye),va=Di(Ye,a.draggable),Zn({sortable:p,name:"change",toEl:i,newIndex:As,newDraggableIndex:va,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=hr(n,a.draggable,i,!0),g("dragOver"),pt.eventCanceled)return m;if(Ye.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return b(!1);if(Z0=!1,u&&!a.disabled&&(c?d||(o=Oi!==yi):_n===this||(this.lastPutMode=q0.checkPull(this,u,Ye,e))&&l.checkPut(this,u,Ye,e))){if(h=this._getDirection(e,n)==="vertical",s=bi(Ye),g("dragOverValid"),pt.eventCanceled)return m;if(o)return Oi=yi,v(),this._hideClone(),g("revert"),pt.eventCanceled||(cl?yi.insertBefore(Ye,cl):yi.appendChild(Ye)),b(!0);var y=cv(i,a.draggable);if(!y||Mre(e,h,this)&&!y.animated){if(y===Ye)return b(!1);if(y&&i===e.target&&(n=y),n&&(r=bi(n)),sp(yi,i,Ye,s,n,r,e,!!n)!==!1)return v(),i.appendChild(Ye),Oi=i,_(),b(!0)}else if(y&&Ore(e,h,this)){var E=vu(i,0,a,!0);if(E===Ye)return b(!1);if(n=E,r=bi(n),sp(yi,i,Ye,s,n,r,e,!1)!==!1)return v(),i.insertBefore(Ye,E),Oi=i,_(),b(!0)}else if(n.parentNode===i){r=bi(n);var S=0,A,C=Ye.parentNode!==i,T=!Lre(Ye.animated&&Ye.toRect||s,n.animated&&n.toRect||r,h),I=h?"top":"left",D=SE(n,"top","top")||SE(Ye,"top","top"),R=D?D.scrollTop:void 0;wu!==n&&(A=r[I],vd=!1,J0=!T&&a.invertSwap||C),S=$re(e,n,r,h,T?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,J0,wu===n);var O;if(S!==0){var M=Di(Ye);do M-=S,O=Oi.children[M];while(O&&(lt(O,"display")==="none"||O===xt))}if(S===0||O===n)return b(!1);wu=n,gd=S;var U=n.nextElementSibling,$=!1;$=S===1;var B=sp(yi,i,Ye,s,n,r,e,$);if(B!==!1)return(B===1||B===-1)&&($=B===1),_v=!0,setTimeout(Dre,30),v(),$&&!U?i.appendChild(Ye):n.parentNode.insertBefore(Ye,$?U:n),D&&AE(D,0,R-D.scrollTop),Oi=Ye.parentNode,A!==void 0&&!J0&&(ep=Math.abs(A-bi(n)[I])),_(),b(!0)}if(i.contains(Ye))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Pt(document,"mousemove",this._onTouchMove),Pt(document,"touchmove",this._onTouchMove),Pt(document,"pointermove",this._onTouchMove),Pt(document,"dragover",fl),Pt(document,"mousemove",fl),Pt(document,"touchmove",fl)},_offUpEvents:function(){var e=this.el.ownerDocument;Pt(e,"mouseup",this._onDrop),Pt(e,"touchend",this._onDrop),Pt(e,"pointerup",this._onDrop),Pt(e,"touchcancel",this._onDrop),Pt(document,"selectstart",this)},_onDrop:function(e){var i=this.el,n=this.options;if(As=Di(Ye),va=Di(Ye,n.draggable),ls("drop",this,{evt:e}),Oi=Ye&&Ye.parentNode,As=Di(Ye),va=Di(Ye,n.draggable),pt.eventCanceled){this._nulling();return}yu=!1,J0=!1,vd=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),yv(this.cloneId),yv(this._dragStartId),this.nativeDraggable&&(Pt(document,"drop",this),Pt(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),cd&&lt(document.body,"user-select",""),lt(Ye,"transform",""),e&&(md&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),xt&&xt.parentNode&&xt.parentNode.removeChild(xt),(yi===Oi||_n&&_n.lastPutMode!=="clone")&&Mi&&Mi.parentNode&&Mi.parentNode.removeChild(Mi),Ye&&(this.nativeDraggable&&Pt(Ye,"dragend",this),bv(Ye),Ye.style["will-change"]="",md&&!yu&&Ai(Ye,_n?_n.options.ghostClass:this.options.ghostClass,!1),Ai(Ye,this.options.chosenClass,!1),Zn({sortable:this,name:"unchoose",toEl:Oi,newIndex:null,newDraggableIndex:null,originalEvent:e}),yi!==Oi?(As>=0&&(Zn({rootEl:Oi,name:"add",toEl:Oi,fromEl:yi,originalEvent:e}),Zn({sortable:this,name:"remove",toEl:Oi,originalEvent:e}),Zn({rootEl:Oi,name:"sort",toEl:Oi,fromEl:yi,originalEvent:e}),Zn({sortable:this,name:"sort",toEl:Oi,originalEvent:e})),_n&&_n.save()):As!==bu&&As>=0&&(Zn({sortable:this,name:"update",toEl:Oi,originalEvent:e}),Zn({sortable:this,name:"sort",toEl:Oi,originalEvent:e})),pt.active&&((As==null||As===-1)&&(As=bu,va=pd),Zn({sortable:this,name:"end",toEl:Oi,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ls("nulling",this),yi=Ye=Oi=xt=cl=Mi=X0=ga=dl=pr=md=As=va=bu=pd=wu=gd=_n=q0=pt.dragged=pt.ghost=pt.clone=pt.active=null,tp.forEach(function(e){e.checked=!0}),tp.length=mv=gv=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Ye&&(this._onDragOver(e),Pre(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],i,n=this.el.children,s=0,r=n.length,o=this.options;s<r;s++)i=n[s],hr(i,o.draggable,this.el,!1)&&e.push(i.getAttribute(o.dataIdAttr)||Bre(i));return e},sort:function(e,i){var n={},s=this.el;this.toArray().forEach(function(r,o){var a=s.children[o];hr(a,this.options.draggable,s,!1)&&(n[r]=a)},this),i&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(s.removeChild(n[r]),s.appendChild(n[r]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return hr(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var n=this.options;if(i===void 0)return n[e];var s=fd.modifyOption(this,e,i);typeof s<"u"?n[e]=s:n[e]=i,e==="group"&&DE(n)},destroy:function(){ls("destroy",this);var e=this.el;e[In]=null,Pt(e,"mousedown",this._onTapStart),Pt(e,"touchstart",this._onTapStart),Pt(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Pt(e,"dragover",this),Pt(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Q0.splice(Q0.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ga){if(ls("hideClone",this),pt.eventCanceled)return;lt(Mi,"display","none"),this.options.removeCloneOnHide&&Mi.parentNode&&Mi.parentNode.removeChild(Mi),ga=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ga){if(ls("showClone",this),pt.eventCanceled)return;Ye.parentNode==yi&&!this.options.group.revertClone?yi.insertBefore(Mi,Ye):cl?yi.insertBefore(Mi,cl):yi.appendChild(Mi),this.options.group.revertClone&&this.animate(Ye,Mi),lt(Mi,"display",""),ga=!1}}};function Pre(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function sp(t,e,i,n,s,r,o,a){var l,u=t[In],c=u.options.onMove,d;return window.CustomEvent&&!Co&&!ud?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=s||e,l.relatedRect=r||bi(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),c&&(d=c.call(u,l,o)),d}function bv(t){t.draggable=!1}function Dre(){_v=!1}function Ore(t,e,i){var n=bi(vu(i.el,0,i.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}function Mre(t,e,i){var n=bi(cv(i.el,i.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}function $re(t,e,i,n,s,r,o,a){var l=n?t.clientY:t.clientX,u=n?i.height:i.width,c=n?i.top:i.left,d=n?i.bottom:i.right,f=!1;if(!o){if(a&&ep<u*s){if(!vd&&(gd===1?l>c+u*r/2:l<d-u*r/2)&&(vd=!0),vd)f=!0;else if(gd===1?l<c+ep:l>d-ep)return-gd}else if(l>c+u*(1-s)/2&&l<d-u*(1-s)/2)return Fre(e)}return f=f||o,f&&(l<c+u*r/2||l>d-u*r/2)?l>c+u/2?1:-1:0}function Fre(t){return Di(Ye)<Di(t)?1:-1}function Bre(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Nre(t){tp.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&tp.push(n)}}function rp(t){return setTimeout(t,0)}function yv(t){return clearTimeout(t)}ip&&Ut(document,"touchmove",function(t){(pt.active||yu)&&t.cancelable&&t.preventDefault()}),pt.utils={on:Ut,off:Pt,css:lt,find:EE,is:function(e,i){return!!hr(e,i,e,!1)},extend:Ere,throttle:TE,closest:hr,toggleClass:Ai,clone:fv,index:Di,nextTick:rp,cancelNextTick:yv,detectDirection:PE,getChild:vu},pt.get=function(t){return t[In]},pt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(pt.utils=Ur(Ur({},pt.utils),n.utils)),fd.mount(n)})},pt.create=function(t,e){return new pt(t,e)},pt.version=_re;var Gi=[],_d,wv,Ev=!1,Sv,xv,op,bd;function Ure(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(i){var n=i.originalEvent;this.sortable.nativeDraggable?Ut(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ut(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Ut(document,"touchmove",this._handleFallbackAutoScroll):Ut(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var n=i.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Pt(document,"dragover",this._handleAutoScroll):(Pt(document,"pointermove",this._handleFallbackAutoScroll),Pt(document,"touchmove",this._handleFallbackAutoScroll),Pt(document,"mousemove",this._handleFallbackAutoScroll)),$E(),ap(),Sre()},nulling:function(){op=wv=_d=Ev=bd=Sv=xv=null,Gi.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,n){var s=this,r=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,a=document.elementFromPoint(r,o);if(op=i,n||this.options.forceAutoScrollFallback||ud||Co||cd){Tv(i,this.options,a,n);var l=ma(a,!0);Ev&&(!bd||r!==Sv||o!==xv)&&(bd&&$E(),bd=setInterval(function(){var u=ma(document.elementFromPoint(r,o),!0);u!==l&&(l=u,ap()),Tv(i,s.options,u,n)},10),Sv=r,xv=o)}else{if(!this.options.bubbleScroll||ma(a,!0)===Vr()){ap();return}Tv(i,this.options,ma(a,!1),!1)}}},Gs(t,{pluginName:"scroll",initializeByDefault:!0})}function ap(){Gi.forEach(function(t){clearInterval(t.pid)}),Gi=[]}function $E(){clearInterval(bd)}var Tv=TE(function(t,e,i,n){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Vr(),u=!1,c;wv!==i&&(wv=i,ap(),_d=e.scroll,c=e.scrollFn,_d===!0&&(_d=ma(i,!0)));var d=0,f=_d;do{var h=f,p=bi(h),m=p.top,g=p.bottom,v=p.left,b=p.right,_=p.width,y=p.height,E=void 0,S=void 0,A=h.scrollWidth,C=h.scrollHeight,T=lt(h),I=h.scrollLeft,D=h.scrollTop;h===l?(E=_<A&&(T.overflowX==="auto"||T.overflowX==="scroll"||T.overflowX==="visible"),S=y<C&&(T.overflowY==="auto"||T.overflowY==="scroll"||T.overflowY==="visible")):(E=_<A&&(T.overflowX==="auto"||T.overflowX==="scroll"),S=y<C&&(T.overflowY==="auto"||T.overflowY==="scroll"));var R=E&&(Math.abs(b-s)<=o&&I+_<A)-(Math.abs(v-s)<=o&&!!I),O=S&&(Math.abs(g-r)<=o&&D+y<C)-(Math.abs(m-r)<=o&&!!D);if(!Gi[d])for(var M=0;M<=d;M++)Gi[M]||(Gi[M]={});(Gi[d].vx!=R||Gi[d].vy!=O||Gi[d].el!==h)&&(Gi[d].el=h,Gi[d].vx=R,Gi[d].vy=O,clearInterval(Gi[d].pid),(R!=0||O!=0)&&(u=!0,Gi[d].pid=setInterval((function(){n&&this.layer===0&&pt.active._onTouchMove(op);var U=Gi[this.layer].vy?Gi[this.layer].vy*a:0,$=Gi[this.layer].vx?Gi[this.layer].vx*a:0;typeof c=="function"&&c.call(pt.dragged.parentNode[In],$,U,t,op,Gi[this.layer].el)!=="continue"||AE(Gi[this.layer].el,$,U)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=ma(f,!1)));Ev=u}},30),FE=function(e){var i=e.originalEvent,n=e.putSortable,s=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(i){var u=n||r;a();var c=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,d=document.elementFromPoint(c.clientX,c.clientY);l(),u&&!u.el.contains(d)&&(o("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function Av(){}Av.prototype={startIndex:null,dragStart:function(e){var i=e.oldDraggableIndex;this.startIndex=i},onSpill:function(e){var i=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=vu(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(i,s):this.sortable.el.appendChild(i),this.sortable.animateAll(),n&&n.animateAll()},drop:FE},Gs(Av,{pluginName:"revertOnSpill"});function kv(){}kv.prototype={onSpill:function(e){var i=e.dragEl,n=e.putSortable,s=n||this.sortable;s.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),s.animateAll()},drop:FE},Gs(kv,{pluginName:"removeOnSpill"});var Ws;function Vre(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(i){var n=i.dragEl;Ws=n},dragOverValid:function(i){var n=i.completed,s=i.target,r=i.onMove,o=i.activeSortable,a=i.changed,l=i.cancel;if(o.options.swap){var u=this.sortable.el,c=this.options;if(s&&s!==u){var d=Ws;r(s)!==!1?(Ai(s,c.swapClass,!0),Ws=s):Ws=null,d&&d!==Ws&&Ai(d,c.swapClass,!1)}a(),n(!0),l()}},drop:function(i){var n=i.activeSortable,s=i.putSortable,r=i.dragEl,o=s||this.sortable,a=this.options;Ws&&Ai(Ws,a.swapClass,!1),Ws&&(a.swap||s&&s.options.swap)&&r!==Ws&&(o.captureAnimationState(),o!==n&&n.captureAnimationState(),jre(r,Ws),o.animateAll(),o!==n&&n.animateAll())},nulling:function(){Ws=null}},Gs(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Ws}}})}function jre(t,e){var i=t.parentNode,n=e.parentNode,s,r;!i||!n||i.isEqualNode(e)||n.isEqualNode(t)||(s=Di(t),r=Di(e),i.isEqualNode(n)&&s<r&&r++,i.insertBefore(e,i.children[s]),n.insertBefore(t,n.children[r]))}var wt=[],ks=[],yd,mr,wd=!1,us=!1,Eu=!1,fi,Ed,lp;function Hre(){function t(e){for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));e.options.supportPointer?Ut(document,"pointerup",this._deselectMultiDrag):(Ut(document,"mouseup",this._deselectMultiDrag),Ut(document,"touchend",this._deselectMultiDrag)),Ut(document,"keydown",this._checkKeyDown),Ut(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(s,r){var o="";wt.length&&mr===e?wt.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=r.textContent,s.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(i){var n=i.dragEl;fi=n},delayEnded:function(){this.isMultiDrag=~wt.indexOf(fi)},setupClone:function(i){var n=i.sortable,s=i.cancel;if(this.isMultiDrag){for(var r=0;r<wt.length;r++)ks.push(fv(wt[r])),ks[r].sortableIndex=wt[r].sortableIndex,ks[r].draggable=!1,ks[r].style["will-change"]="",Ai(ks[r],this.options.selectedClass,!1),wt[r]===fi&&Ai(ks[r],this.options.chosenClass,!1);n._hideClone(),s()}},clone:function(i){var n=i.sortable,s=i.rootEl,r=i.dispatchSortableEvent,o=i.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||wt.length&&mr===n&&(BE(!0,s),r("clone"),o()))},showClone:function(i){var n=i.cloneNowShown,s=i.rootEl,r=i.cancel;this.isMultiDrag&&(BE(!1,s),ks.forEach(function(o){lt(o,"display","")}),n(),lp=!1,r())},hideClone:function(i){var n=this;i.sortable;var s=i.cloneNowHidden,r=i.cancel;this.isMultiDrag&&(ks.forEach(function(o){lt(o,"display","none"),n.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),s(),lp=!0,r())},dragStartGlobal:function(i){i.sortable,!this.isMultiDrag&&mr&&mr.multiDrag._deselectMultiDrag(),wt.forEach(function(n){n.sortableIndex=Di(n)}),wt=wt.sort(function(n,s){return n.sortableIndex-s.sortableIndex}),Eu=!0},dragStarted:function(i){var n=this,s=i.sortable;if(this.isMultiDrag){if(this.options.sort&&(s.captureAnimationState(),this.options.animation)){wt.forEach(function(o){o!==fi&&lt(o,"position","absolute")});var r=bi(fi,!1,!0,!0);wt.forEach(function(o){o!==fi&&kE(o,r)}),us=!0,wd=!0}s.animateAll(function(){us=!1,wd=!1,n.options.animation&&wt.forEach(function(o){hv(o)}),n.options.sort&&up()})}},dragOver:function(i){var n=i.target,s=i.completed,r=i.cancel;us&&~wt.indexOf(n)&&(s(!1),r())},revert:function(i){var n=i.fromSortable,s=i.rootEl,r=i.sortable,o=i.dragRect;wt.length>1&&(wt.forEach(function(a){r.addAnimationState({target:a,rect:us?bi(a):o}),hv(a),a.fromRect=o,n.removeAnimationState(a)}),us=!1,zre(!this.options.removeCloneOnHide,s))},dragOverCompleted:function(i){var n=i.sortable,s=i.isOwner,r=i.insertion,o=i.activeSortable,a=i.parentEl,l=i.putSortable,u=this.options;if(r){if(s&&o._hideClone(),wd=!1,u.animation&&wt.length>1&&(us||!s&&!o.options.sort&&!l)){var c=bi(fi,!1,!0,!0);wt.forEach(function(f){f!==fi&&(kE(f,c),a.appendChild(f))}),us=!0}if(!s)if(us||up(),wt.length>1){var d=lp;o._showClone(n),o.options.animation&&!lp&&d&&ks.forEach(function(f){o.addAnimationState({target:f,rect:Ed}),f.fromRect=Ed,f.thisAnimationDuration=null})}else o._showClone(n)}},dragOverAnimationCapture:function(i){var n=i.dragRect,s=i.isOwner,r=i.activeSortable;if(wt.forEach(function(a){a.thisAnimationDuration=null}),r.options.animation&&!s&&r.multiDrag.isMultiDrag){Ed=Gs({},n);var o=ul(fi,!0);Ed.top-=o.f,Ed.left-=o.e}},dragOverAnimationComplete:function(){us&&(us=!1,up())},drop:function(i){var n=i.originalEvent,s=i.rootEl,r=i.parentEl,o=i.sortable,a=i.dispatchSortableEvent,l=i.oldIndex,u=i.putSortable,c=u||this.sortable;if(n){var d=this.options,f=r.children;if(!Eu)if(d.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ai(fi,d.selectedClass,!~wt.indexOf(fi)),~wt.indexOf(fi))wt.splice(wt.indexOf(fi),1),yd=null,hd({sortable:o,rootEl:s,name:"deselect",targetEl:fi});else{if(wt.push(fi),hd({sortable:o,rootEl:s,name:"select",targetEl:fi}),n.shiftKey&&yd&&o.el.contains(yd)){var h=Di(yd),p=Di(fi);if(~h&&~p&&h!==p){var m,g;for(p>h?(g=h,m=p):(g=p,m=h+1);g<m;g++)~wt.indexOf(f[g])||(Ai(f[g],d.selectedClass,!0),wt.push(f[g]),hd({sortable:o,rootEl:s,name:"select",targetEl:f[g]}))}}else yd=fi;mr=c}if(Eu&&this.isMultiDrag){if(us=!1,(r[In].options.sort||r!==s)&&wt.length>1){var v=bi(fi),b=Di(fi,":not(."+this.options.selectedClass+")");if(!wd&&d.animation&&(fi.thisAnimationDuration=null),c.captureAnimationState(),!wd&&(d.animation&&(fi.fromRect=v,wt.forEach(function(y){if(y.thisAnimationDuration=null,y!==fi){var E=us?bi(y):v;y.fromRect=E,c.addAnimationState({target:y,rect:E})}})),up(),wt.forEach(function(y){f[b]?r.insertBefore(y,f[b]):r.appendChild(y),b++}),l===Di(fi))){var _=!1;wt.forEach(function(y){if(y.sortableIndex!==Di(y)){_=!0;return}}),_&&a("update")}wt.forEach(function(y){hv(y)}),c.animateAll()}mr=c}(s===r||u&&u.lastPutMode!=="clone")&&ks.forEach(function(y){y.parentNode&&y.parentNode.removeChild(y)})}},nullingGlobal:function(){this.isMultiDrag=Eu=!1,ks.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Pt(document,"pointerup",this._deselectMultiDrag),Pt(document,"mouseup",this._deselectMultiDrag),Pt(document,"touchend",this._deselectMultiDrag),Pt(document,"keydown",this._checkKeyDown),Pt(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(i){if(!(typeof Eu<"u"&&Eu)&&mr===this.sortable&&!(i&&hr(i.target,this.options.draggable,this.sortable.el,!1))&&!(i&&i.button!==0))for(;wt.length;){var n=wt[0];Ai(n,this.options.selectedClass,!1),wt.shift(),hd({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n})}},_checkKeyDown:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(i){i.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Gs(t,{pluginName:"multiDrag",utils:{select:function(i){var n=i.parentNode[In];!n||!n.options.multiDrag||~wt.indexOf(i)||(mr&&mr!==n&&(mr.multiDrag._deselectMultiDrag(),mr=n),Ai(i,n.options.selectedClass,!0),wt.push(i))},deselect:function(i){var n=i.parentNode[In],s=wt.indexOf(i);!n||!n.options.multiDrag||!~s||(Ai(i,n.options.selectedClass,!1),wt.splice(s,1))}},eventProperties:function(){var i=this,n=[],s=[];return wt.forEach(function(r){n.push({multiDragElement:r,index:r.sortableIndex});var o;us&&r!==fi?o=-1:us?o=Di(r,":not(."+i.options.selectedClass+")"):o=Di(r),s.push({multiDragElement:r,index:o})}),{items:hre(wt),clones:[].concat(ks),oldIndicies:n,newIndicies:s}},optionListeners:{multiDragKey:function(i){return i=i.toLowerCase(),i==="ctrl"?i="Control":i.length>1&&(i=i.charAt(0).toUpperCase()+i.substr(1)),i}}})}function zre(t,e){wt.forEach(function(i,n){var s=e.children[i.sortableIndex+(t?Number(n):0)];s?e.insertBefore(i,s):e.appendChild(i)})}function BE(t,e){ks.forEach(function(i,n){var s=e.children[i.sortableIndex+(t?Number(n):0)];s?e.insertBefore(i,s):e.appendChild(i)})}function up(){wt.forEach(function(t){t!==fi&&t.parentNode&&t.parentNode.removeChild(t)})}pt.mount(new Ure),pt.mount(kv,Av);const Gre=xf(Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:Hre,Sortable:pt,Swap:Vre,default:pt},Symbol.toStringTag,{value:"Module"})));var Wre=h0.exports,NE;function Kre(){return NE||(NE=1,(function(t,e){(function(n,s){t.exports=s(ure(),Gre)})(typeof self<"u"?self:Wre,function(i,n){return(function(s){var r={};function o(a){if(r[a])return r[a].exports;var l=r[a]={i:a,l:!1,exports:{}};return s[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=s,o.c=r,o.d=function(a,l,u){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var c in a)o.d(u,c,(function(d){return a[d]}).bind(null,c));return u},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")})({"00ee":(function(s,r,o){var a=o("b622"),l=a("toStringTag"),u={};u[l]="z",s.exports=String(u)==="[object z]"}),"0366":(function(s,r,o){var a=o("1c0b");s.exports=function(l,u,c){if(a(l),u===void 0)return l;switch(c){case 0:return function(){return l.call(u)};case 1:return function(d){return l.call(u,d)};case 2:return function(d,f){return l.call(u,d,f)};case 3:return function(d,f,h){return l.call(u,d,f,h)}}return function(){return l.apply(u,arguments)}}}),"057f":(function(s,r,o){var a=o("fc6a"),l=o("241c").f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],d=function(f){try{return l(f)}catch{return c.slice()}};s.exports.f=function(h){return c&&u.call(h)=="[object Window]"?d(h):l(a(h))}}),"06cf":(function(s,r,o){var a=o("83ab"),l=o("d1e7"),u=o("5c6c"),c=o("fc6a"),d=o("c04e"),f=o("5135"),h=o("0cfb"),p=Object.getOwnPropertyDescriptor;r.f=a?p:function(g,v){if(g=c(g),v=d(v,!0),h)try{return p(g,v)}catch{}if(f(g,v))return u(!l.f.call(g,v),g[v])}}),"0cfb":(function(s,r,o){var a=o("83ab"),l=o("d039"),u=o("cc12");s.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})}),"13d5":(function(s,r,o){var a=o("23e7"),l=o("d58f").left,u=o("a640"),c=o("ae40"),d=u("reduce"),f=c("reduce",{1:0});a({target:"Array",proto:!0,forced:!d||!f},{reduce:function(p){return l(this,p,arguments.length,arguments.length>1?arguments[1]:void 0)}})}),"14c3":(function(s,r,o){var a=o("c6b6"),l=o("9263");s.exports=function(u,c){var d=u.exec;if(typeof d=="function"){var f=d.call(u,c);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,c)}}),"159b":(function(s,r,o){var a=o("da84"),l=o("fdbc"),u=o("17c2"),c=o("9112");for(var d in l){var f=a[d],h=f&&f.prototype;if(h&&h.forEach!==u)try{c(h,"forEach",u)}catch{h.forEach=u}}}),"17c2":(function(s,r,o){var a=o("b727").forEach,l=o("a640"),u=o("ae40"),c=l("forEach"),d=u("forEach");s.exports=!c||!d?function(h){return a(this,h,arguments.length>1?arguments[1]:void 0)}:[].forEach}),"1be4":(function(s,r,o){var a=o("d066");s.exports=a("document","documentElement")}),"1c0b":(function(s,r){s.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}}),"1c7e":(function(s,r,o){var a=o("b622"),l=a("iterator"),u=!1;try{var c=0,d={next:function(){return{done:!!c++}},return:function(){u=!0}};d[l]=function(){return this},Array.from(d,function(){throw 2})}catch{}s.exports=function(f,h){if(!h&&!u)return!1;var p=!1;try{var m={};m[l]=function(){return{next:function(){return{done:p=!0}}}},f(m)}catch{}return p}}),"1d80":(function(s,r){s.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}}),"1dde":(function(s,r,o){var a=o("d039"),l=o("b622"),u=o("2d00"),c=l("species");s.exports=function(d){return u>=51||!a(function(){var f=[],h=f.constructor={};return h[c]=function(){return{foo:1}},f[d](Boolean).foo!==1})}}),"23cb":(function(s,r,o){var a=o("a691"),l=Math.max,u=Math.min;s.exports=function(c,d){var f=a(c);return f<0?l(f+d,0):u(f,d)}}),"23e7":(function(s,r,o){var a=o("da84"),l=o("06cf").f,u=o("9112"),c=o("6eeb"),d=o("ce4e"),f=o("e893"),h=o("94ca");s.exports=function(p,m){var g=p.target,v=p.global,b=p.stat,_,y,E,S,A,C;if(v?y=a:b?y=a[g]||d(g,{}):y=(a[g]||{}).prototype,y)for(E in m){if(A=m[E],p.noTargetGet?(C=l(y,E),S=C&&C.value):S=y[E],_=h(v?E:g+(b?".":"#")+E,p.forced),!_&&S!==void 0){if(typeof A==typeof S)continue;f(A,S)}(p.sham||S&&S.sham)&&u(A,"sham",!0),c(y,E,A,p)}}}),"241c":(function(s,r,o){var a=o("ca84"),l=o("7839"),u=l.concat("length","prototype");r.f=Object.getOwnPropertyNames||function(d){return a(d,u)}}),"25f0":(function(s,r,o){var a=o("6eeb"),l=o("825a"),u=o("d039"),c=o("ad6d"),d="toString",f=RegExp.prototype,h=f[d],p=u(function(){return h.call({source:"a",flags:"b"})!="/a/b"}),m=h.name!=d;(p||m)&&a(RegExp.prototype,d,function(){var v=l(this),b=String(v.source),_=v.flags,y=String(_===void 0&&v instanceof RegExp&&!("flags"in f)?c.call(v):_);return"/"+b+"/"+y},{unsafe:!0})}),"2ca0":(function(s,r,o){var a=o("23e7"),l=o("06cf").f,u=o("50c4"),c=o("5a34"),d=o("1d80"),f=o("ab13"),h=o("c430"),p="".startsWith,m=Math.min,g=f("startsWith"),v=!h&&!g&&!!(function(){var b=l(String.prototype,"startsWith");return b&&!b.writable})();a({target:"String",proto:!0,forced:!v&&!g},{startsWith:function(_){var y=String(d(this));c(_);var E=u(m(arguments.length>1?arguments[1]:void 0,y.length)),S=String(_);return p?p.call(y,S,E):y.slice(E,E+S.length)===S}})}),"2d00":(function(s,r,o){var a=o("da84"),l=o("342f"),u=a.process,c=u&&u.versions,d=c&&c.v8,f,h;d?(f=d.split("."),h=f[0]+f[1]):l&&(f=l.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=l.match(/Chrome\/(\d+)/),f&&(h=f[1]))),s.exports=h&&+h}),"342f":(function(s,r,o){var a=o("d066");s.exports=a("navigator","userAgent")||""}),"35a1":(function(s,r,o){var a=o("f5df"),l=o("3f8c"),u=o("b622"),c=u("iterator");s.exports=function(d){if(d!=null)return d[c]||d["@@iterator"]||l[a(d)]}}),"37e8":(function(s,r,o){var a=o("83ab"),l=o("9bf2"),u=o("825a"),c=o("df75");s.exports=a?Object.defineProperties:function(f,h){u(f);for(var p=c(h),m=p.length,g=0,v;m>g;)l.f(f,v=p[g++],h[v]);return f}}),"3bbe":(function(s,r,o){var a=o("861d");s.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}}),"3ca3":(function(s,r,o){var a=o("6547").charAt,l=o("69f3"),u=o("7dd0"),c="String Iterator",d=l.set,f=l.getterFor(c);u(String,"String",function(h){d(this,{type:c,string:String(h),index:0})},function(){var p=f(this),m=p.string,g=p.index,v;return g>=m.length?{value:void 0,done:!0}:(v=a(m,g),p.index+=v.length,{value:v,done:!1})})}),"3f8c":(function(s,r){s.exports={}}),4160:(function(s,r,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})}),"428f":(function(s,r,o){var a=o("da84");s.exports=a}),"44ad":(function(s,r,o){var a=o("d039"),l=o("c6b6"),u="".split;s.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return l(c)=="String"?u.call(c,""):Object(c)}:Object}),"44d2":(function(s,r,o){var a=o("b622"),l=o("7c73"),u=o("9bf2"),c=a("unscopables"),d=Array.prototype;d[c]==null&&u.f(d,c,{configurable:!0,value:l(null)}),s.exports=function(f){d[c][f]=!0}}),"44e7":(function(s,r,o){var a=o("861d"),l=o("c6b6"),u=o("b622"),c=u("match");s.exports=function(d){var f;return a(d)&&((f=d[c])!==void 0?!!f:l(d)=="RegExp")}}),4930:(function(s,r,o){var a=o("d039");s.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})}),"4d64":(function(s,r,o){var a=o("fc6a"),l=o("50c4"),u=o("23cb"),c=function(d){return function(f,h,p){var m=a(f),g=l(m.length),v=u(p,g),b;if(d&&h!=h){for(;g>v;)if(b=m[v++],b!=b)return!0}else for(;g>v;v++)if((d||v in m)&&m[v]===h)return d||v||0;return!d&&-1}};s.exports={includes:c(!0),indexOf:c(!1)}}),"4de4":(function(s,r,o){var a=o("23e7"),l=o("b727").filter,u=o("1dde"),c=o("ae40"),d=u("filter"),f=c("filter");a({target:"Array",proto:!0,forced:!d||!f},{filter:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})}),"4df4":(function(s,r,o){var a=o("0366"),l=o("7b0b"),u=o("9bdd"),c=o("e95a"),d=o("50c4"),f=o("8418"),h=o("35a1");s.exports=function(m){var g=l(m),v=typeof this=="function"?this:Array,b=arguments.length,_=b>1?arguments[1]:void 0,y=_!==void 0,E=h(g),S=0,A,C,T,I,D,R;if(y&&(_=a(_,b>2?arguments[2]:void 0,2)),E!=null&&!(v==Array&&c(E)))for(I=E.call(g),D=I.next,C=new v;!(T=D.call(I)).done;S++)R=y?u(I,_,[T.value,S],!0):T.value,f(C,S,R);else for(A=d(g.length),C=new v(A);A>S;S++)R=y?_(g[S],S):g[S],f(C,S,R);return C.length=S,C}}),"4fad":(function(s,r,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(c){return l(c)}})}),"50c4":(function(s,r,o){var a=o("a691"),l=Math.min;s.exports=function(u){return u>0?l(a(u),9007199254740991):0}}),5135:(function(s,r){var o={}.hasOwnProperty;s.exports=function(a,l){return o.call(a,l)}}),5319:(function(s,r,o){var a=o("d784"),l=o("825a"),u=o("7b0b"),c=o("50c4"),d=o("a691"),f=o("1d80"),h=o("8aa5"),p=o("14c3"),m=Math.max,g=Math.min,v=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,y=function(E){return E===void 0?E:String(E)};a("replace",2,function(E,S,A,C){var T=C.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,I=C.REPLACE_KEEPS_$0,D=T?"$":"$0";return[function(M,U){var $=f(this),B=M?.[E];return B!==void 0?B.call(M,$,U):S.call(String($),M,U)},function(O,M){if(!T&&I||typeof M=="string"&&M.indexOf(D)===-1){var U=A(S,O,this,M);if(U.done)return U.value}var $=l(O),B=String(this),W=typeof M=="function";W||(M=String(M));var te=$.global;if(te){var re=$.unicode;$.lastIndex=0}for(var q=[];;){var le=p($,B);if(le===null||(q.push(le),!te))break;var be=String(le[0]);be===""&&($.lastIndex=h(B,c($.lastIndex),re))}for(var se="",ne=0,pe=0;pe<q.length;pe++){le=q[pe];for(var ye=String(le[0]),xe=m(g(d(le.index),B.length),0),Be=[],Ke=1;Ke<le.length;Ke++)Be.push(y(le[Ke]));var Xe=le.groups;if(W){var Re=[ye].concat(Be,xe,B);Xe!==void 0&&Re.push(Xe);var Z=String(M.apply(void 0,Re))}else Z=R(ye,B,xe,Be,Xe,M);xe>=ne&&(se+=B.slice(ne,xe)+Z,ne=xe+ye.length)}return se+B.slice(ne)}];function R(O,M,U,$,B,W){var te=U+O.length,re=$.length,q=_;return B!==void 0&&(B=u(B),q=b),S.call(W,q,function(le,be){var se;switch(be.charAt(0)){case"$":return"$";case"&":return O;case"`":return M.slice(0,U);case"'":return M.slice(te);case"<":se=B[be.slice(1,-1)];break;default:var ne=+be;if(ne===0)return le;if(ne>re){var pe=v(ne/10);return pe===0?le:pe<=re?$[pe-1]===void 0?be.charAt(1):$[pe-1]+be.charAt(1):le}se=$[ne-1]}return se===void 0?"":se})}})}),5692:(function(s,r,o){var a=o("c430"),l=o("c6cd");(s.exports=function(u,c){return l[u]||(l[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})}),"56ef":(function(s,r,o){var a=o("d066"),l=o("241c"),u=o("7418"),c=o("825a");s.exports=a("Reflect","ownKeys")||function(f){var h=l.f(c(f)),p=u.f;return p?h.concat(p(f)):h}}),"5a34":(function(s,r,o){var a=o("44e7");s.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}}),"5c6c":(function(s,r){s.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}}),"5db7":(function(s,r,o){var a=o("23e7"),l=o("a2bf"),u=o("7b0b"),c=o("50c4"),d=o("1c0b"),f=o("65f0");a({target:"Array",proto:!0},{flatMap:function(p){var m=u(this),g=c(m.length),v;return d(p),v=f(m,0),v.length=l(v,m,m,g,0,1,p,arguments.length>1?arguments[1]:void 0),v}})}),6547:(function(s,r,o){var a=o("a691"),l=o("1d80"),u=function(c){return function(d,f){var h=String(l(d)),p=a(f),m=h.length,g,v;return p<0||p>=m?c?"":void 0:(g=h.charCodeAt(p),g<55296||g>56319||p+1===m||(v=h.charCodeAt(p+1))<56320||v>57343?c?h.charAt(p):g:c?h.slice(p,p+2):(g-55296<<10)+(v-56320)+65536)}};s.exports={codeAt:u(!1),charAt:u(!0)}}),"65f0":(function(s,r,o){var a=o("861d"),l=o("e8b5"),u=o("b622"),c=u("species");s.exports=function(d,f){var h;return l(d)&&(h=d.constructor,typeof h=="function"&&(h===Array||l(h.prototype))?h=void 0:a(h)&&(h=h[c],h===null&&(h=void 0))),new(h===void 0?Array:h)(f===0?0:f)}}),"69f3":(function(s,r,o){var a=o("7f9a"),l=o("da84"),u=o("861d"),c=o("9112"),d=o("5135"),f=o("f772"),h=o("d012"),p=l.WeakMap,m,g,v,b=function(T){return v(T)?g(T):m(T,{})},_=function(T){return function(I){var D;if(!u(I)||(D=g(I)).type!==T)throw TypeError("Incompatible receiver, "+T+" required");return D}};if(a){var y=new p,E=y.get,S=y.has,A=y.set;m=function(T,I){return A.call(y,T,I),I},g=function(T){return E.call(y,T)||{}},v=function(T){return S.call(y,T)}}else{var C=f("state");h[C]=!0,m=function(T,I){return c(T,C,I),I},g=function(T){return d(T,C)?T[C]:{}},v=function(T){return d(T,C)}}s.exports={set:m,get:g,has:v,enforce:b,getterFor:_}}),"6eeb":(function(s,r,o){var a=o("da84"),l=o("9112"),u=o("5135"),c=o("ce4e"),d=o("8925"),f=o("69f3"),h=f.get,p=f.enforce,m=String(String).split("String");(s.exports=function(g,v,b,_){var y=_?!!_.unsafe:!1,E=_?!!_.enumerable:!1,S=_?!!_.noTargetGet:!1;if(typeof b=="function"&&(typeof v=="string"&&!u(b,"name")&&l(b,"name",v),p(b).source=m.join(typeof v=="string"?v:"")),g===a){E?g[v]=b:c(v,b);return}else y?!S&&g[v]&&(E=!0):delete g[v];E?g[v]=b:l(g,v,b)})(Function.prototype,"toString",function(){return typeof this=="function"&&h(this).source||d(this)})}),"6f53":(function(s,r,o){var a=o("83ab"),l=o("df75"),u=o("fc6a"),c=o("d1e7").f,d=function(f){return function(h){for(var p=u(h),m=l(p),g=m.length,v=0,b=[],_;g>v;)_=m[v++],(!a||c.call(p,_))&&b.push(f?[_,p[_]]:p[_]);return b}};s.exports={entries:d(!0),values:d(!1)}}),"73d9":(function(s,r,o){var a=o("44d2");a("flatMap")}),7418:(function(s,r){r.f=Object.getOwnPropertySymbols}),"746f":(function(s,r,o){var a=o("428f"),l=o("5135"),u=o("e538"),c=o("9bf2").f;s.exports=function(d){var f=a.Symbol||(a.Symbol={});l(f,d)||c(f,d,{value:u.f(d)})}}),7839:(function(s,r){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"7b0b":(function(s,r,o){var a=o("1d80");s.exports=function(l){return Object(a(l))}}),"7c73":(function(s,r,o){var a=o("825a"),l=o("37e8"),u=o("7839"),c=o("d012"),d=o("1be4"),f=o("cc12"),h=o("f772"),p=">",m="<",g="prototype",v="script",b=h("IE_PROTO"),_=function(){},y=function(T){return m+v+p+T+m+"/"+v+p},E=function(T){T.write(y("")),T.close();var I=T.parentWindow.Object;return T=null,I},S=function(){var T=f("iframe"),I="java"+v+":",D;return T.style.display="none",d.appendChild(T),T.src=String(I),D=T.contentWindow.document,D.open(),D.write(y("document.F=Object")),D.close(),D.F},A,C=function(){try{A=document.domain&&new ActiveXObject("htmlfile")}catch{}C=A?E(A):S();for(var T=u.length;T--;)delete C[g][u[T]];return C()};c[b]=!0,s.exports=Object.create||function(I,D){var R;return I!==null?(_[g]=a(I),R=new _,_[g]=null,R[b]=I):R=C(),D===void 0?R:l(R,D)}}),"7dd0":(function(s,r,o){var a=o("23e7"),l=o("9ed3"),u=o("e163"),c=o("d2bb"),d=o("d44e"),f=o("9112"),h=o("6eeb"),p=o("b622"),m=o("c430"),g=o("3f8c"),v=o("ae93"),b=v.IteratorPrototype,_=v.BUGGY_SAFARI_ITERATORS,y=p("iterator"),E="keys",S="values",A="entries",C=function(){return this};s.exports=function(T,I,D,R,O,M,U){l(D,I,R);var $=function(pe){if(pe===O&&q)return q;if(!_&&pe in te)return te[pe];switch(pe){case E:return function(){return new D(this,pe)};case S:return function(){return new D(this,pe)};case A:return function(){return new D(this,pe)}}return function(){return new D(this)}},B=I+" Iterator",W=!1,te=T.prototype,re=te[y]||te["@@iterator"]||O&&te[O],q=!_&&re||$(O),le=I=="Array"&&te.entries||re,be,se,ne;if(le&&(be=u(le.call(new T)),b!==Object.prototype&&be.next&&(!m&&u(be)!==b&&(c?c(be,b):typeof be[y]!="function"&&f(be,y,C)),d(be,B,!0,!0),m&&(g[B]=C))),O==S&&re&&re.name!==S&&(W=!0,q=function(){return re.call(this)}),(!m||U)&&te[y]!==q&&f(te,y,q),g[I]=q,O)if(se={values:$(S),keys:M?q:$(E),entries:$(A)},U)for(ne in se)(_||W||!(ne in te))&&h(te,ne,se[ne]);else a({target:I,proto:!0,forced:_||W},se);return se}}),"7f9a":(function(s,r,o){var a=o("da84"),l=o("8925"),u=a.WeakMap;s.exports=typeof u=="function"&&/native code/.test(l(u))}),"825a":(function(s,r,o){var a=o("861d");s.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}}),"83ab":(function(s,r,o){var a=o("d039");s.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}),8418:(function(s,r,o){var a=o("c04e"),l=o("9bf2"),u=o("5c6c");s.exports=function(c,d,f){var h=a(d);h in c?l.f(c,h,u(0,f)):c[h]=f}}),"861d":(function(s,r){s.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}}),8875:(function(s,r,o){var a,l,u;(function(c,d){l=[],a=d,u=typeof a=="function"?a.apply(r,l):a,u!==void 0&&(s.exports=u)})(typeof self<"u"?self:this,function(){function c(){var d=Object.getOwnPropertyDescriptor(document,"currentScript");if(!d&&"currentScript"in document&&document.currentScript||d&&d.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(A){var f=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,h=/@([^@]*):(\d+):(\d+)\s*$/ig,p=f.exec(A.stack)||h.exec(A.stack),m=p&&p[1]||!1,g=p&&p[2]||!1,v=document.location.href.replace(document.location.hash,""),b,_,y,E=document.getElementsByTagName("script");m===v&&(b=document.documentElement.outerHTML,_=new RegExp("(?:[^\\n]+?\\n){0,"+(g-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),y=b.replace(_,"$1").trim());for(var S=0;S<E.length;S++)if(E[S].readyState==="interactive"||E[S].src===m||m===v&&E[S].innerHTML&&E[S].innerHTML.trim()===y)return E[S];return null}}return c})}),8925:(function(s,r,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),s.exports=a.inspectSource}),"8aa5":(function(s,r,o){var a=o("6547").charAt;s.exports=function(l,u,c){return u+(c?a(l,u).length:1)}}),"8bbf":(function(s,r){s.exports=i}),"90e3":(function(s,r){var o=0,a=Math.random();s.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}}),9112:(function(s,r,o){var a=o("83ab"),l=o("9bf2"),u=o("5c6c");s.exports=a?function(c,d,f){return l.f(c,d,u(1,f))}:function(c,d,f){return c[d]=f,c}}),9263:(function(s,r,o){var a=o("ad6d"),l=o("9f7f"),u=RegExp.prototype.exec,c=String.prototype.replace,d=u,f=(function(){var g=/a/,v=/b*/g;return u.call(g,"a"),u.call(v,"a"),g.lastIndex!==0||v.lastIndex!==0})(),h=l.UNSUPPORTED_Y||l.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,m=f||p||h;m&&(d=function(v){var b=this,_,y,E,S,A=h&&b.sticky,C=a.call(b),T=b.source,I=0,D=v;return A&&(C=C.replace("y",""),C.indexOf("g")===-1&&(C+="g"),D=String(v).slice(b.lastIndex),b.lastIndex>0&&(!b.multiline||b.multiline&&v[b.lastIndex-1]!==`
`)&&(T="(?: "+T+")",D=" "+D,I++),y=new RegExp("^(?:"+T+")",C)),p&&(y=new RegExp("^"+T+"$(?!\\s)",C)),f&&(_=b.lastIndex),E=u.call(A?y:b,D),A?E?(E.input=E.input.slice(I),E[0]=E[0].slice(I),E.index=b.lastIndex,b.lastIndex+=E[0].length):b.lastIndex=0:f&&E&&(b.lastIndex=b.global?E.index+E[0].length:_),p&&E&&E.length>1&&c.call(E[0],y,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(E[S]=void 0)}),E}),s.exports=d}),"94ca":(function(s,r,o){var a=o("d039"),l=/#|\.prototype\./,u=function(p,m){var g=d[c(p)];return g==h?!0:g==f?!1:typeof m=="function"?a(m):!!m},c=u.normalize=function(p){return String(p).replace(l,".").toLowerCase()},d=u.data={},f=u.NATIVE="N",h=u.POLYFILL="P";s.exports=u}),"99af":(function(s,r,o){var a=o("23e7"),l=o("d039"),u=o("e8b5"),c=o("861d"),d=o("7b0b"),f=o("50c4"),h=o("8418"),p=o("65f0"),m=o("1dde"),g=o("b622"),v=o("2d00"),b=g("isConcatSpreadable"),_=9007199254740991,y="Maximum allowed index exceeded",E=v>=51||!l(function(){var T=[];return T[b]=!1,T.concat()[0]!==T}),S=m("concat"),A=function(T){if(!c(T))return!1;var I=T[b];return I!==void 0?!!I:u(T)},C=!E||!S;a({target:"Array",proto:!0,forced:C},{concat:function(I){var D=d(this),R=p(D,0),O=0,M,U,$,B,W;for(M=-1,$=arguments.length;M<$;M++)if(W=M===-1?D:arguments[M],A(W)){if(B=f(W.length),O+B>_)throw TypeError(y);for(U=0;U<B;U++,O++)U in W&&h(R,O,W[U])}else{if(O>=_)throw TypeError(y);h(R,O++,W)}return R.length=O,R}})}),"9bdd":(function(s,r,o){var a=o("825a");s.exports=function(l,u,c,d){try{return d?u(a(c)[0],c[1]):u(c)}catch(h){var f=l.return;throw f!==void 0&&a(f.call(l)),h}}}),"9bf2":(function(s,r,o){var a=o("83ab"),l=o("0cfb"),u=o("825a"),c=o("c04e"),d=Object.defineProperty;r.f=a?d:function(h,p,m){if(u(h),p=c(p,!0),u(m),l)try{return d(h,p,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(h[p]=m.value),h}}),"9ed3":(function(s,r,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),u=o("5c6c"),c=o("d44e"),d=o("3f8c"),f=function(){return this};s.exports=function(h,p,m){var g=p+" Iterator";return h.prototype=l(a,{next:u(1,m)}),c(h,g,!1,!0),d[g]=f,h}}),"9f7f":(function(s,r,o){var a=o("d039");function l(u,c){return RegExp(u,c)}r.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),r.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})}),a2bf:(function(s,r,o){var a=o("e8b5"),l=o("50c4"),u=o("0366"),c=function(d,f,h,p,m,g,v,b){for(var _=m,y=0,E=v?u(v,b,3):!1,S;y<p;){if(y in h){if(S=E?E(h[y],y,f):h[y],g>0&&a(S))_=c(d,f,S,l(S.length),_,g-1)-1;else{if(_>=9007199254740991)throw TypeError("Exceed the acceptable array length");d[_]=S}_++}y++}return _};s.exports=c}),a352:(function(s,r){s.exports=n}),a434:(function(s,r,o){var a=o("23e7"),l=o("23cb"),u=o("a691"),c=o("50c4"),d=o("7b0b"),f=o("65f0"),h=o("8418"),p=o("1dde"),m=o("ae40"),g=p("splice"),v=m("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,_=Math.min,y=9007199254740991,E="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!g||!v},{splice:function(A,C){var T=d(this),I=c(T.length),D=l(A,I),R=arguments.length,O,M,U,$,B,W;if(R===0?O=M=0:R===1?(O=0,M=I-D):(O=R-2,M=_(b(u(C),0),I-D)),I+O-M>y)throw TypeError(E);for(U=f(T,M),$=0;$<M;$++)B=D+$,B in T&&h(U,$,T[B]);if(U.length=M,O<M){for($=D;$<I-M;$++)B=$+M,W=$+O,B in T?T[W]=T[B]:delete T[W];for($=I;$>I-M+O;$--)delete T[$-1]}else if(O>M)for($=I-M;$>D;$--)B=$+M-1,W=$+O-1,B in T?T[W]=T[B]:delete T[W];for($=0;$<O;$++)T[$+D]=arguments[$+2];return T.length=I-M+O,U}})}),a4d3:(function(s,r,o){var a=o("23e7"),l=o("da84"),u=o("d066"),c=o("c430"),d=o("83ab"),f=o("4930"),h=o("fdbf"),p=o("d039"),m=o("5135"),g=o("e8b5"),v=o("861d"),b=o("825a"),_=o("7b0b"),y=o("fc6a"),E=o("c04e"),S=o("5c6c"),A=o("7c73"),C=o("df75"),T=o("241c"),I=o("057f"),D=o("7418"),R=o("06cf"),O=o("9bf2"),M=o("d1e7"),U=o("9112"),$=o("6eeb"),B=o("5692"),W=o("f772"),te=o("d012"),re=o("90e3"),q=o("b622"),le=o("e538"),be=o("746f"),se=o("d44e"),ne=o("69f3"),pe=o("b727").forEach,ye=W("hidden"),xe="Symbol",Be="prototype",Ke=q("toPrimitive"),Xe=ne.set,Re=ne.getterFor(xe),Z=Object[Be],ae=l.Symbol,ie=u("JSON","stringify"),ue=R.f,ve=O.f,j=I.f,K=M.f,oe=B("symbols"),he=B("op-symbols"),ce=B("string-to-symbol-registry"),me=B("symbol-to-string-registry"),Q=B("wks"),Y=l.QObject,ee=!Y||!Y[Be]||!Y[Be].findChild,we=d&&p(function(){return A(ve({},"a",{get:function(){return ve(this,"a",{value:7}).a}})).a!=7})?function(Fe,je,et){var mt=ue(Z,je);mt&&delete Z[je],ve(Fe,je,et),mt&&Fe!==Z&&ve(Z,je,mt)}:ve,ke=function(Fe,je){var et=oe[Fe]=A(ae[Be]);return Xe(et,{type:xe,tag:Fe,description:je}),d||(et.description=je),et},de=h?function(Fe){return typeof Fe=="symbol"}:function(Fe){return Object(Fe)instanceof ae},N=function(je,et,mt){je===Z&&N(he,et,mt),b(je);var At=E(et,!0);return b(mt),m(oe,At)?(mt.enumerable?(m(je,ye)&&je[ye][At]&&(je[ye][At]=!1),mt=A(mt,{enumerable:S(0,!1)})):(m(je,ye)||ve(je,ye,S(1,{})),je[ye][At]=!0),we(je,At,mt)):ve(je,At,mt)},J=function(je,et){b(je);var mt=y(et),At=C(mt).concat(Ve(mt));return pe(At,function(ln){(!d||Ee.call(mt,ln))&&N(je,ln,mt[ln])}),je},fe=function(je,et){return et===void 0?A(je):J(A(je),et)},Ee=function(je){var et=E(je,!0),mt=K.call(this,et);return this===Z&&m(oe,et)&&!m(he,et)?!1:mt||!m(this,et)||!m(oe,et)||m(this,ye)&&this[ye][et]?mt:!0},Ae=function(je,et){var mt=y(je),At=E(et,!0);if(!(mt===Z&&m(oe,At)&&!m(he,At))){var ln=ue(mt,At);return ln&&m(oe,At)&&!(m(mt,ye)&&mt[ye][At])&&(ln.enumerable=!0),ln}},De=function(je){var et=j(y(je)),mt=[];return pe(et,function(At){!m(oe,At)&&!m(te,At)&&mt.push(At)}),mt},Ve=function(je){var et=je===Z,mt=j(et?he:y(je)),At=[];return pe(mt,function(ln){m(oe,ln)&&(!et||m(Z,ln))&&At.push(oe[ln])}),At};if(f||(ae=function(){if(this instanceof ae)throw TypeError("Symbol is not a constructor");var je=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),et=re(je),mt=function(At){this===Z&&mt.call(he,At),m(this,ye)&&m(this[ye],et)&&(this[ye][et]=!1),we(this,et,S(1,At))};return d&&ee&&we(Z,et,{configurable:!0,set:mt}),ke(et,je)},$(ae[Be],"toString",function(){return Re(this).tag}),$(ae,"withoutSetter",function(Fe){return ke(re(Fe),Fe)}),M.f=Ee,O.f=N,R.f=Ae,T.f=I.f=De,D.f=Ve,le.f=function(Fe){return ke(q(Fe),Fe)},d&&(ve(ae[Be],"description",{configurable:!0,get:function(){return Re(this).description}}),c||$(Z,"propertyIsEnumerable",Ee,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:ae}),pe(C(Q),function(Fe){be(Fe)}),a({target:xe,stat:!0,forced:!f},{for:function(Fe){var je=String(Fe);if(m(ce,je))return ce[je];var et=ae(je);return ce[je]=et,me[et]=je,et},keyFor:function(je){if(!de(je))throw TypeError(je+" is not a symbol");if(m(me,je))return me[je]},useSetter:function(){ee=!0},useSimple:function(){ee=!1}}),a({target:"Object",stat:!0,forced:!f,sham:!d},{create:fe,defineProperty:N,defineProperties:J,getOwnPropertyDescriptor:Ae}),a({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:De,getOwnPropertySymbols:Ve}),a({target:"Object",stat:!0,forced:p(function(){D.f(1)})},{getOwnPropertySymbols:function(je){return D.f(_(je))}}),ie){var tt=!f||p(function(){var Fe=ae();return ie([Fe])!="[null]"||ie({a:Fe})!="{}"||ie(Object(Fe))!="{}"});a({target:"JSON",stat:!0,forced:tt},{stringify:function(je,et,mt){for(var At=[je],ln=1,xd;arguments.length>ln;)At.push(arguments[ln++]);if(xd=et,!(!v(et)&&je===void 0||de(je)))return g(et)||(et=function(Wi,gr){if(typeof xd=="function"&&(gr=xd.call(this,Wi,gr)),!de(gr))return gr}),At[1]=et,ie.apply(null,At)}})}ae[Be][Ke]||U(ae[Be],Ke,ae[Be].valueOf),se(ae,xe),te[ye]=!0}),a630:(function(s,r,o){var a=o("23e7"),l=o("4df4"),u=o("1c7e"),c=!u(function(d){Array.from(d)});a({target:"Array",stat:!0,forced:c},{from:l})}),a640:(function(s,r,o){var a=o("d039");s.exports=function(l,u){var c=[][l];return!!c&&a(function(){c.call(null,u||function(){throw 1},1)})}}),a691:(function(s,r){var o=Math.ceil,a=Math.floor;s.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}}),ab13:(function(s,r,o){var a=o("b622"),l=a("match");s.exports=function(u){var c=/./;try{"/./"[u](c)}catch{try{return c[l]=!1,"/./"[u](c)}catch{}}return!1}}),ac1f:(function(s,r,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})}),ad6d:(function(s,r,o){var a=o("825a");s.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}}),ae40:(function(s,r,o){var a=o("83ab"),l=o("d039"),u=o("5135"),c=Object.defineProperty,d={},f=function(h){throw h};s.exports=function(h,p){if(u(d,h))return d[h];p||(p={});var m=[][h],g=u(p,"ACCESSORS")?p.ACCESSORS:!1,v=u(p,0)?p[0]:f,b=u(p,1)?p[1]:void 0;return d[h]=!!m&&!l(function(){if(g&&!a)return!0;var _={length:-1};g?c(_,1,{enumerable:!0,get:f}):_[1]=1,m.call(_,v,b)})}}),ae93:(function(s,r,o){var a=o("e163"),l=o("9112"),u=o("5135"),c=o("b622"),d=o("c430"),f=c("iterator"),h=!1,p=function(){return this},m,g,v;[].keys&&(v=[].keys(),"next"in v?(g=a(a(v)),g!==Object.prototype&&(m=g)):h=!0),m==null&&(m={}),!d&&!u(m,f)&&l(m,f,p),s.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:h}}),b041:(function(s,r,o){var a=o("00ee"),l=o("f5df");s.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}}),b0c0:(function(s,r,o){var a=o("83ab"),l=o("9bf2").f,u=Function.prototype,c=u.toString,d=/^\s*function ([^ (]*)/,f="name";a&&!(f in u)&&l(u,f,{configurable:!0,get:function(){try{return c.call(this).match(d)[1]}catch{return""}}})}),b622:(function(s,r,o){var a=o("da84"),l=o("5692"),u=o("5135"),c=o("90e3"),d=o("4930"),f=o("fdbf"),h=l("wks"),p=a.Symbol,m=f?p:p&&p.withoutSetter||c;s.exports=function(g){return u(h,g)||(d&&u(p,g)?h[g]=p[g]:h[g]=m("Symbol."+g)),h[g]}}),b64b:(function(s,r,o){var a=o("23e7"),l=o("7b0b"),u=o("df75"),c=o("d039"),d=c(function(){u(1)});a({target:"Object",stat:!0,forced:d},{keys:function(h){return u(l(h))}})}),b727:(function(s,r,o){var a=o("0366"),l=o("44ad"),u=o("7b0b"),c=o("50c4"),d=o("65f0"),f=[].push,h=function(p){var m=p==1,g=p==2,v=p==3,b=p==4,_=p==6,y=p==5||_;return function(E,S,A,C){for(var T=u(E),I=l(T),D=a(S,A,3),R=c(I.length),O=0,M=C||d,U=m?M(E,R):g?M(E,0):void 0,$,B;R>O;O++)if((y||O in I)&&($=I[O],B=D($,O,T),p)){if(m)U[O]=B;else if(B)switch(p){case 3:return!0;case 5:return $;case 6:return O;case 2:f.call(U,$)}else if(b)return!1}return _?-1:v||b?b:U}};s.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}}),c04e:(function(s,r,o){var a=o("861d");s.exports=function(l,u){if(!a(l))return l;var c,d;if(u&&typeof(c=l.toString)=="function"&&!a(d=c.call(l))||typeof(c=l.valueOf)=="function"&&!a(d=c.call(l))||!u&&typeof(c=l.toString)=="function"&&!a(d=c.call(l)))return d;throw TypeError("Can't convert object to primitive value")}}),c430:(function(s,r){s.exports=!1}),c6b6:(function(s,r){var o={}.toString;s.exports=function(a){return o.call(a).slice(8,-1)}}),c6cd:(function(s,r,o){var a=o("da84"),l=o("ce4e"),u="__core-js_shared__",c=a[u]||l(u,{});s.exports=c}),c740:(function(s,r,o){var a=o("23e7"),l=o("b727").findIndex,u=o("44d2"),c=o("ae40"),d="findIndex",f=!0,h=c(d);d in[]&&Array(1)[d](function(){f=!1}),a({target:"Array",proto:!0,forced:f||!h},{findIndex:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),u(d)}),c8ba:(function(s,r){var o;o=(function(){return this})();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o}),c975:(function(s,r,o){var a=o("23e7"),l=o("4d64").indexOf,u=o("a640"),c=o("ae40"),d=[].indexOf,f=!!d&&1/[1].indexOf(1,-0)<0,h=u("indexOf"),p=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:f||!h||!p},{indexOf:function(g){return f?d.apply(this,arguments)||0:l(this,g,arguments.length>1?arguments[1]:void 0)}})}),ca84:(function(s,r,o){var a=o("5135"),l=o("fc6a"),u=o("4d64").indexOf,c=o("d012");s.exports=function(d,f){var h=l(d),p=0,m=[],g;for(g in h)!a(c,g)&&a(h,g)&&m.push(g);for(;f.length>p;)a(h,g=f[p++])&&(~u(m,g)||m.push(g));return m}}),caad:(function(s,r,o){var a=o("23e7"),l=o("4d64").includes,u=o("44d2"),c=o("ae40"),d=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!d},{includes:function(h){return l(this,h,arguments.length>1?arguments[1]:void 0)}}),u("includes")}),cc12:(function(s,r,o){var a=o("da84"),l=o("861d"),u=a.document,c=l(u)&&l(u.createElement);s.exports=function(d){return c?u.createElement(d):{}}}),ce4e:(function(s,r,o){var a=o("da84"),l=o("9112");s.exports=function(u,c){try{l(a,u,c)}catch{a[u]=c}return c}}),d012:(function(s,r){s.exports={}}),d039:(function(s,r){s.exports=function(o){try{return!!o()}catch{return!0}}}),d066:(function(s,r,o){var a=o("428f"),l=o("da84"),u=function(c){return typeof c=="function"?c:void 0};s.exports=function(c,d){return arguments.length<2?u(a[c])||u(l[c]):a[c]&&a[c][d]||l[c]&&l[c][d]}}),d1e7:(function(s,r,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);r.f=u?function(d){var f=l(this,d);return!!f&&f.enumerable}:a}),d28b:(function(s,r,o){var a=o("746f");a("iterator")}),d2bb:(function(s,r,o){var a=o("825a"),l=o("3bbe");s.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var u=!1,c={},d;try{d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,d.call(c,[]),u=c instanceof Array}catch{}return function(h,p){return a(h),l(p),u?d.call(h,p):h.__proto__=p,h}})():void 0)}),d3b7:(function(s,r,o){var a=o("00ee"),l=o("6eeb"),u=o("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})}),d44e:(function(s,r,o){var a=o("9bf2").f,l=o("5135"),u=o("b622"),c=u("toStringTag");s.exports=function(d,f,h){d&&!l(d=h?d:d.prototype,c)&&a(d,c,{configurable:!0,value:f})}}),d58f:(function(s,r,o){var a=o("1c0b"),l=o("7b0b"),u=o("44ad"),c=o("50c4"),d=function(f){return function(h,p,m,g){a(p);var v=l(h),b=u(v),_=c(v.length),y=f?_-1:0,E=f?-1:1;if(m<2)for(;;){if(y in b){g=b[y],y+=E;break}if(y+=E,f?y<0:_<=y)throw TypeError("Reduce of empty array with no initial value")}for(;f?y>=0:_>y;y+=E)y in b&&(g=p(g,b[y],y,v));return g}};s.exports={left:d(!1),right:d(!0)}}),d784:(function(s,r,o){o("ac1f");var a=o("6eeb"),l=o("d039"),u=o("b622"),c=o("9263"),d=o("9112"),f=u("species"),h=!l(function(){var b=/./;return b.exec=function(){var _=[];return _.groups={a:"7"},_},"".replace(b,"$<a>")!=="7"}),p=(function(){return"a".replace(/./,"$0")==="$0"})(),m=u("replace"),g=(function(){return/./[m]?/./[m]("a","$0")==="":!1})(),v=!l(function(){var b=/(?:)/,_=b.exec;b.exec=function(){return _.apply(this,arguments)};var y="ab".split(b);return y.length!==2||y[0]!=="a"||y[1]!=="b"});s.exports=function(b,_,y,E){var S=u(b),A=!l(function(){var O={};return O[S]=function(){return 7},""[b](O)!=7}),C=A&&!l(function(){var O=!1,M=/a/;return b==="split"&&(M={},M.constructor={},M.constructor[f]=function(){return M},M.flags="",M[S]=/./[S]),M.exec=function(){return O=!0,null},M[S](""),!O});if(!A||!C||b==="replace"&&!(h&&p&&!g)||b==="split"&&!v){var T=/./[S],I=y(S,""[b],function(O,M,U,$,B){return M.exec===c?A&&!B?{done:!0,value:T.call(M,U,$)}:{done:!0,value:O.call(U,M,$)}:{done:!1}},{REPLACE_KEEPS_$0:p,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),D=I[0],R=I[1];a(String.prototype,b,D),a(RegExp.prototype,S,_==2?function(O,M){return R.call(O,this,M)}:function(O){return R.call(O,this)})}E&&d(RegExp.prototype[S],"sham",!0)}}),d81d:(function(s,r,o){var a=o("23e7"),l=o("b727").map,u=o("1dde"),c=o("ae40"),d=u("map"),f=c("map");a({target:"Array",proto:!0,forced:!d||!f},{map:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}})}),da84:(function(s,r,o){(function(a){var l=function(u){return u&&u.Math==Math&&u};s.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))}),dbb4:(function(s,r,o){var a=o("23e7"),l=o("83ab"),u=o("56ef"),c=o("fc6a"),d=o("06cf"),f=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(p){for(var m=c(p),g=d.f,v=u(m),b={},_=0,y,E;v.length>_;)E=g(m,y=v[_++]),E!==void 0&&f(b,y,E);return b}})}),dbf1:(function(s,r,o){(function(a){o.d(r,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,o("c8ba"))}),ddb0:(function(s,r,o){var a=o("da84"),l=o("fdbc"),u=o("e260"),c=o("9112"),d=o("b622"),f=d("iterator"),h=d("toStringTag"),p=u.values;for(var m in l){var g=a[m],v=g&&g.prototype;if(v){if(v[f]!==p)try{c(v,f,p)}catch{v[f]=p}if(v[h]||c(v,h,m),l[m]){for(var b in u)if(v[b]!==u[b])try{c(v,b,u[b])}catch{v[b]=u[b]}}}}}),df75:(function(s,r,o){var a=o("ca84"),l=o("7839");s.exports=Object.keys||function(c){return a(c,l)}}),e01a:(function(s,r,o){var a=o("23e7"),l=o("83ab"),u=o("da84"),c=o("5135"),d=o("861d"),f=o("9bf2").f,h=o("e893"),p=u.Symbol;if(l&&typeof p=="function"&&(!("description"in p.prototype)||p().description!==void 0)){var m={},g=function(){var S=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),A=this instanceof g?new p(S):S===void 0?p():p(S);return S===""&&(m[A]=!0),A};h(g,p);var v=g.prototype=p.prototype;v.constructor=g;var b=v.toString,_=String(p("test"))=="Symbol(test)",y=/^Symbol\((.*)\)[^)]+$/;f(v,"description",{configurable:!0,get:function(){var S=d(this)?this.valueOf():this,A=b.call(S);if(c(m,S))return"";var C=_?A.slice(7,-1):A.replace(y,"$1");return C===""?void 0:C}}),a({global:!0,forced:!0},{Symbol:g})}}),e163:(function(s,r,o){var a=o("5135"),l=o("7b0b"),u=o("f772"),c=o("e177"),d=u("IE_PROTO"),f=Object.prototype;s.exports=c?Object.getPrototypeOf:function(h){return h=l(h),a(h,d)?h[d]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}}),e177:(function(s,r,o){var a=o("d039");s.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})}),e260:(function(s,r,o){var a=o("fc6a"),l=o("44d2"),u=o("3f8c"),c=o("69f3"),d=o("7dd0"),f="Array Iterator",h=c.set,p=c.getterFor(f);s.exports=d(Array,"Array",function(m,g){h(this,{type:f,target:a(m),index:0,kind:g})},function(){var m=p(this),g=m.target,v=m.kind,b=m.index++;return!g||b>=g.length?(m.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:b,done:!1}:v=="values"?{value:g[b],done:!1}:{value:[b,g[b]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")}),e439:(function(s,r,o){var a=o("23e7"),l=o("d039"),u=o("fc6a"),c=o("06cf").f,d=o("83ab"),f=l(function(){c(1)}),h=!d||f;a({target:"Object",stat:!0,forced:h,sham:!d},{getOwnPropertyDescriptor:function(m,g){return c(u(m),g)}})}),e538:(function(s,r,o){var a=o("b622");r.f=a}),e893:(function(s,r,o){var a=o("5135"),l=o("56ef"),u=o("06cf"),c=o("9bf2");s.exports=function(d,f){for(var h=l(f),p=c.f,m=u.f,g=0;g<h.length;g++){var v=h[g];a(d,v)||p(d,v,m(f,v))}}}),e8b5:(function(s,r,o){var a=o("c6b6");s.exports=Array.isArray||function(u){return a(u)=="Array"}}),e95a:(function(s,r,o){var a=o("b622"),l=o("3f8c"),u=a("iterator"),c=Array.prototype;s.exports=function(d){return d!==void 0&&(l.Array===d||c[u]===d)}}),f5df:(function(s,r,o){var a=o("00ee"),l=o("c6b6"),u=o("b622"),c=u("toStringTag"),d=l((function(){return arguments})())=="Arguments",f=function(h,p){try{return h[p]}catch{}};s.exports=a?l:function(h){var p,m,g;return h===void 0?"Undefined":h===null?"Null":typeof(m=f(p=Object(h),c))=="string"?m:d?l(p):(g=l(p))=="Object"&&typeof p.callee=="function"?"Arguments":g}}),f772:(function(s,r,o){var a=o("5692"),l=o("90e3"),u=a("keys");s.exports=function(c){return u[c]||(u[c]=l(c))}}),fb15:(function(s,r,o){if(o.r(r),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function c(de,N,J){return N in de?Object.defineProperty(de,N,{value:J,enumerable:!0,configurable:!0,writable:!0}):de[N]=J,de}function d(de,N){var J=Object.keys(de);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(de);N&&(fe=fe.filter(function(Ee){return Object.getOwnPropertyDescriptor(de,Ee).enumerable})),J.push.apply(J,fe)}return J}function f(de){for(var N=1;N<arguments.length;N++){var J=arguments[N]!=null?arguments[N]:{};N%2?d(Object(J),!0).forEach(function(fe){c(de,fe,J[fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(de,Object.getOwnPropertyDescriptors(J)):d(Object(J)).forEach(function(fe){Object.defineProperty(de,fe,Object.getOwnPropertyDescriptor(J,fe))})}return de}function h(de){if(Array.isArray(de))return de}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function p(de,N){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(de)))){var J=[],fe=!0,Ee=!1,Ae=void 0;try{for(var De=de[Symbol.iterator](),Ve;!(fe=(Ve=De.next()).done)&&(J.push(Ve.value),!(N&&J.length===N));fe=!0);}catch(tt){Ee=!0,Ae=tt}finally{try{!fe&&De.return!=null&&De.return()}finally{if(Ee)throw Ae}}return J}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function m(de,N){(N==null||N>de.length)&&(N=de.length);for(var J=0,fe=new Array(N);J<N;J++)fe[J]=de[J];return fe}function g(de,N){if(de){if(typeof de=="string")return m(de,N);var J=Object.prototype.toString.call(de).slice(8,-1);if(J==="Object"&&de.constructor&&(J=de.constructor.name),J==="Map"||J==="Set")return Array.from(de);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return m(de,N)}}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(de,N){return h(de)||p(de,N)||g(de,N)||v()}function _(de){if(Array.isArray(de))return m(de)}function y(de){if(typeof Symbol<"u"&&Symbol.iterator in Object(de))return Array.from(de)}function E(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(de){return _(de)||y(de)||g(de)||E()}var A=o("a352"),C=o.n(A);function T(de){de.parentElement!==null&&de.parentElement.removeChild(de)}function I(de,N,J){var fe=J===0?de.children[0]:de.children[J-1].nextSibling;de.insertBefore(N,fe)}var D=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function R(de){var N=Object.create(null);return function(fe){var Ee=N[fe];return Ee||(N[fe]=de(fe))}}var O=/-(\w)/g,M=R(function(de){return de.replace(O,function(N,J){return J.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],$=["Choose","Unchoose","Sort","Filter","Clone"],B=["Move"],W=[B,U,$].flatMap(function(de){return de}).map(function(de){return"on".concat(de)}),te={manage:B,manageAndEmit:U,emit:$};function re(de){return W.indexOf(de)!==-1}o("caad"),o("2ca0");var q=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function le(de){return q.includes(de)}function be(de){return["transition-group","TransitionGroup"].includes(de)}function se(de){return["id","class","role","style"].includes(de)||de.startsWith("data-")||de.startsWith("aria-")||de.startsWith("on")}function ne(de){return de.reduce(function(N,J){var fe=b(J,2),Ee=fe[0],Ae=fe[1];return N[Ee]=Ae,N},{})}function pe(de){var N=de.$attrs,J=de.componentData,fe=J===void 0?{}:J,Ee=ne(Object.entries(N).filter(function(Ae){var De=b(Ae,2),Ve=De[0];return De[1],se(Ve)}));return f(f({},Ee),fe)}function ye(de){var N=de.$attrs,J=de.callBackBuilder,fe=ne(xe(N));Object.entries(J).forEach(function(Ae){var De=b(Ae,2),Ve=De[0],tt=De[1];te[Ve].forEach(function(Fe){fe["on".concat(Fe)]=tt(Fe)})});var Ee="[data-draggable]".concat(fe.draggable||"");return f(f({},fe),{},{draggable:Ee})}function xe(de){return Object.entries(de).filter(function(N){var J=b(N,2),fe=J[0];return J[1],!se(fe)}).map(function(N){var J=b(N,2),fe=J[0],Ee=J[1];return[M(fe),Ee]}).filter(function(N){var J=b(N,2),fe=J[0];return J[1],!re(fe)})}o("c740");function Be(de,N){if(!(de instanceof N))throw new TypeError("Cannot call a class as a function")}function Ke(de,N){for(var J=0;J<N.length;J++){var fe=N[J];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(de,fe.key,fe)}}function Xe(de,N,J){return N&&Ke(de.prototype,N),de}var Re=function(N){var J=N.el;return J},Z=function(N,J){return N.__draggable_context=J},ae=function(N){return N.__draggable_context},ie=(function(){function de(N){var J=N.nodes,fe=J.header,Ee=J.default,Ae=J.footer,De=N.root,Ve=N.realList;Be(this,de),this.defaultNodes=Ee,this.children=[].concat(S(fe),S(Ee),S(Ae)),this.externalComponent=De.externalComponent,this.rootTransition=De.transition,this.tag=De.tag,this.realList=Ve}return Xe(de,[{key:"render",value:function(J,fe){var Ee=this.tag,Ae=this.children,De=this._isRootComponent,Ve=De?{default:function(){return Ae}}:Ae;return J(Ee,fe,Ve)}},{key:"updated",value:function(){var J=this.defaultNodes,fe=this.realList;J.forEach(function(Ee,Ae){Z(Re(Ee),{element:fe[Ae],index:Ae})})}},{key:"getUnderlyingVm",value:function(J){return ae(J)}},{key:"getVmIndexFromDomIndex",value:function(J,fe){var Ee=this.defaultNodes,Ae=Ee.length,De=fe.children,Ve=De.item(J);if(Ve===null)return Ae;var tt=ae(Ve);if(tt)return tt.index;if(Ae===0)return 0;var Fe=Re(Ee[0]),je=S(De).findIndex(function(et){return et===Fe});return J<je?0:Ae}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),de})(),ue=o("8bbf");function ve(de,N){var J=de[N];return J?J():[]}function j(de){var N=de.$slots,J=de.realList,fe=de.getKey,Ee=J||[],Ae=["header","footer"].map(function(et){return ve(N,et)}),De=b(Ae,2),Ve=De[0],tt=De[1],Fe=N.item;if(!Fe)throw new Error("draggable element must have an item slot");var je=Ee.flatMap(function(et,mt){return Fe({element:et,index:mt}).map(function(At){return At.key=fe(et),At.props=f(f({},At.props||{}),{},{"data-draggable":!0}),At})});if(je.length!==Ee.length)throw new Error("Item slot must have only one child");return{header:Ve,footer:tt,default:je}}function K(de){var N=be(de),J=!le(de)&&!N;return{transition:N,externalComponent:J,tag:J?Object(ue.resolveComponent)(de):N?ue.TransitionGroup:de}}function oe(de){var N=de.$slots,J=de.tag,fe=de.realList,Ee=de.getKey,Ae=j({$slots:N,realList:fe,getKey:Ee}),De=K(J);return new ie({nodes:Ae,root:De,realList:fe})}function he(de,N){var J=this;Object(ue.nextTick)(function(){return J.$emit(de.toLowerCase(),N)})}function ce(de){var N=this;return function(J,fe){if(N.realList!==null)return N["onDrag".concat(de)](J,fe)}}function me(de){var N=this,J=ce.call(this,de);return function(fe,Ee){J.call(N,fe,Ee),he.call(N,de,fe)}}var Q=null,Y={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(N){return N}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ee=["update:modelValue","change"].concat(S([].concat(S(te.manageAndEmit),S(te.emit)).map(function(de){return de.toLowerCase()}))),we=Object(ue.defineComponent)({name:"draggable",inheritAttrs:!1,props:Y,emits:ee,data:function(){return{error:!1}},render:function(){try{this.error=!1;var N=this.$slots,J=this.$attrs,fe=this.tag,Ee=this.componentData,Ae=this.realList,De=this.getKey,Ve=oe({$slots:N,tag:fe,realList:Ae,getKey:De});this.componentStructure=Ve;var tt=pe({$attrs:J,componentData:Ee});return Ve.render(ue.h,tt)}catch(Fe){return this.error=!0,Object(ue.h)("pre",{style:{color:"red"}},Fe.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&D.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var N=this;if(!this.error){var J=this.$attrs,fe=this.$el,Ee=this.componentStructure;Ee.updated();var Ae=ye({$attrs:J,callBackBuilder:{manageAndEmit:function(tt){return me.call(N,tt)},emit:function(tt){return he.bind(N,tt)},manage:function(tt){return ce.call(N,tt)}}}),De=fe.nodeType===1?fe:fe.parentElement;this._sortable=new C.a(De,Ae),this.targetDomElement=De,De.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var N=this.list;return N||this.modelValue},getKey:function(){var N=this.itemKey;return typeof N=="function"?N:function(J){return J[N]}}},watch:{$attrs:{handler:function(N){var J=this._sortable;J&&xe(N).forEach(function(fe){var Ee=b(fe,2),Ae=Ee[0],De=Ee[1];J.option(Ae,De)})},deep:!0}},methods:{getUnderlyingVm:function(N){return this.componentStructure.getUnderlyingVm(N)||null},getUnderlyingPotencialDraggableComponent:function(N){return N.__draggable_component__},emitChanges:function(N){var J=this;Object(ue.nextTick)(function(){return J.$emit("change",N)})},alterList:function(N){if(this.list){N(this.list);return}var J=S(this.modelValue);N(J),this.$emit("update:modelValue",J)},spliceList:function(){var N=arguments,J=function(Ee){return Ee.splice.apply(Ee,S(N))};this.alterList(J)},updatePosition:function(N,J){var fe=function(Ae){return Ae.splice(J,0,Ae.splice(N,1)[0])};this.alterList(fe)},getRelatedContextFromMoveEvent:function(N){var J=N.to,fe=N.related,Ee=this.getUnderlyingPotencialDraggableComponent(J);if(!Ee)return{component:Ee};var Ae=Ee.realList,De={list:Ae,component:Ee};if(J!==fe&&Ae){var Ve=Ee.getUnderlyingVm(fe)||{};return f(f({},Ve),De)}return De},getVmIndexFromDomIndex:function(N){return this.componentStructure.getVmIndexFromDomIndex(N,this.targetDomElement)},onDragStart:function(N){this.context=this.getUnderlyingVm(N.item),N.item._underlying_vm_=this.clone(this.context.element),Q=N.item},onDragAdd:function(N){var J=N.item._underlying_vm_;if(J!==void 0){T(N.item);var fe=this.getVmIndexFromDomIndex(N.newIndex);this.spliceList(fe,0,J);var Ee={element:J,newIndex:fe};this.emitChanges({added:Ee})}},onDragRemove:function(N){if(I(this.$el,N.item,N.oldIndex),N.pullMode==="clone"){T(N.clone);return}var J=this.context,fe=J.index,Ee=J.element;this.spliceList(fe,1);var Ae={element:Ee,oldIndex:fe};this.emitChanges({removed:Ae})},onDragUpdate:function(N){T(N.item),I(N.from,N.item,N.oldIndex);var J=this.context.index,fe=this.getVmIndexFromDomIndex(N.newIndex);this.updatePosition(J,fe);var Ee={element:this.context.element,oldIndex:J,newIndex:fe};this.emitChanges({moved:Ee})},computeFutureIndex:function(N,J){if(!N.element)return 0;var fe=S(J.to.children).filter(function(Ve){return Ve.style.display!=="none"}),Ee=fe.indexOf(J.related),Ae=N.component.getVmIndexFromDomIndex(Ee),De=fe.indexOf(Q)!==-1;return De||!J.willInsertAfter?Ae:Ae+1},onDragMove:function(N,J){var fe=this.move,Ee=this.realList;if(!fe||!Ee)return!0;var Ae=this.getRelatedContextFromMoveEvent(N),De=this.computeFutureIndex(Ae,N),Ve=f(f({},this.context),{},{futureIndex:De}),tt=f(f({},N),{},{relatedContext:Ae,draggedContext:Ve});return fe(tt,J)},onDragEnd:function(){Q=null}}}),ke=we;r.default=ke}),fb6a:(function(s,r,o){var a=o("23e7"),l=o("861d"),u=o("e8b5"),c=o("23cb"),d=o("50c4"),f=o("fc6a"),h=o("8418"),p=o("b622"),m=o("1dde"),g=o("ae40"),v=m("slice"),b=g("slice",{ACCESSORS:!0,0:0,1:2}),_=p("species"),y=[].slice,E=Math.max;a({target:"Array",proto:!0,forced:!v||!b},{slice:function(A,C){var T=f(this),I=d(T.length),D=c(A,I),R=c(C===void 0?I:C,I),O,M,U;if(u(T)&&(O=T.constructor,typeof O=="function"&&(O===Array||u(O.prototype))?O=void 0:l(O)&&(O=O[_],O===null&&(O=void 0)),O===Array||O===void 0))return y.call(T,D,R);for(M=new(O===void 0?Array:O)(E(R-D,0)),U=0;D<R;D++,U++)D in T&&h(M,U,T[D]);return M.length=U,M}})}),fc6a:(function(s,r,o){var a=o("44ad"),l=o("1d80");s.exports=function(u){return a(l(u))}}),fdbc:(function(s,r){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),fdbf:(function(s,r,o){var a=o("4930");s.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"})}).default})})(h0)),h0.exports}var Yre=Kre();const UE=Sf(Yre),Xre={flex:"~ gap-4 items-center"},qre=["onClick"],Zre={flex:"~ gap-2 items-center"},Qre={"w-80px":"","text-ellipsis":""},Jre={flex:"~ gap-4 items-center justify-between wrap"},eoe={flex:"~ items-center"},toe={flex:"~ items-center"},ioe=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"DockAndSidebar",setup(t){const{t:e}=St(),i=Fl(),n=ge(()=>[{label:e("common.position.left"),value:"left"},{label:e("common.position.right"),value:"right"},{label:e("common.position.bottom"),value:"bottom"}]),s=ge(()=>i.dockItems.map(l=>({label:e(l.i18nKey),icon:l.icon,value:l.page}))),r=ge(()=>[{label:e("common.position.left"),value:"left"},{label:e("common.position.right"),value:"right"}]);Pe(()=>k.value.halfHideDock,l=>{l&&(k.value.autoHideDock=!1)}),Pe(()=>k.value.autoHideDock,l=>{l&&(k.value.halfHideDock=!1)});function o(){k.value.dockItemsConfig=i.dockItems.map(l=>({page:l.page,visible:!0,openInNewTab:!1,useOriginalBiliPage:!l.hasBewlyPage}))}function a(l){k.value.dockItemsConfig.filter(u=>u.visible===!0).length>1?l.visible=!l.visible:l.visible=!0}return(l,u)=>(L(),P("div",null,[F(It,{title:l.$t("settings.group_dock")},{default:H(()=>[F(Oe,{title:l.$t("settings.always_use_dock"),desc:l.$t("settings.always_use_dock_desc")},{default:H(()=>[F(Je,{modelValue:w(k).alwaysUseDock,"onUpdate:modelValue":u[0]||(u[0]=c=>w(k).alwaysUseDock=c)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:l.$t("settings.auto_hide_dock")},{default:H(()=>[F(Je,{modelValue:w(k).autoHideDock,"onUpdate:modelValue":u[1]||(u[1]=c=>w(k).autoHideDock=c)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:l.$t("settings.half_hide_dock")},{default:H(()=>[F(Je,{modelValue:w(k).halfHideDock,"onUpdate:modelValue":u[2]||(u[2]=c=>w(k).halfHideDock=c)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:l.$t("settings.dock_position"),desc:l.$t("settings.dock_position_desc")},{default:H(()=>[F(hi,{modelValue:w(k).dockPosition,"onUpdate:modelValue":u[3]||(u[3]=c=>w(k).dockPosition=c),options:w(n),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{desc:l.$t("settings.dock_content_adjustment_desc")},{title:H(()=>[x("div",Xre,[He(G(l.$t("settings.dock_content_adjustment"))+" ",1),F(Ir,{size:"small",type:"secondary",onClick:o},{left:H(()=>[...u[11]||(u[11]=[x("div",{"i-mingcute:back-line":""},null,-1)])]),default:H(()=>[He(" "+G(l.$t("common.operation.reset")),1)]),_:1})])]),bottom:H(()=>[F(w(UE),{modelValue:w(k).dockItemsConfig,"onUpdate:modelValue":u[4]||(u[4]=c=>w(k).dockItemsConfig=c),"item-key":"page","component-data":{style:"display: flex; gap: 0.5rem; flex-wrap: wrap; flex-direction: column;"}},{item:H(({element:c})=>[x("div",{flex:"~ gap-2 justify-between items-center wrap",p:"x-4 y-2",bg:"$bew-fill-1",rounded:"$bew-radius","cursor-all-scroll":"","duration-300":"",style:Ue({background:c.visible?"var(--bew-theme-color-20)":"var(--bew-fill-1)",color:c.visible?"var(--bew-theme-color)":"var(--bew-text-1)"}),onClick:d=>a(c)},[x("div",Zre,[x("div",{class:Ie(w(s).find(d=>d.value===c.page)?.icon)},null,2),x("div",Qre,G(w(s).find(d=>d.value===c.page)?.label),1)]),x("div",Jre,[x("div",eoe,[He(G(l.$t("settings.dock_item_use_original_bili_web_page"))+" ",1),F(Je,{modelValue:c.useOriginalBiliPage,"onUpdate:modelValue":d=>c.useOriginalBiliPage=d},null,8,["modelValue","onUpdate:modelValue"])]),x("div",toe,[He(G(l.$t("settings.dock_item_open_in_new_tab"))+" ",1),F(Je,{modelValue:c.openInNewTab,"onUpdate:modelValue":d=>c.openInNewTab=d},null,8,["modelValue","onUpdate:modelValue"])])])],12,qre)]),_:1},8,["modelValue"])]),_:1},8,["desc"]),F(Oe,{title:l.$t("settings.disable_dock_glowing_effect")},{default:H(()=>[F(Je,{modelValue:w(k).disableDockGlowingEffect,"onUpdate:modelValue":u[5]||(u[5]=c=>w(k).disableDockGlowingEffect=c)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:l.$t("settings.disable_light_dark_mode_switcher")},{default:H(()=>[F(Je,{modelValue:w(k).disableLightDarkModeSwitcherOnDock,"onUpdate:modelValue":u[6]||(u[6]=c=>w(k).disableLightDarkModeSwitcherOnDock=c)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:l.$t("settings.back_to_top_and_refresh_buttons_are_separated")},{default:H(()=>[F(Je,{modelValue:w(k).backToTopAndRefreshButtonsAreSeparated,"onUpdate:modelValue":u[7]||(u[7]=c=>w(k).backToTopAndRefreshButtonsAreSeparated=c)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:l.$t("settings.enable_undo_refresh_button"),desc:l.$t("settings.enable_undo_refresh_button_desc")},{default:H(()=>[F(Je,{modelValue:w(k).enableUndoRefreshButton,"onUpdate:modelValue":u[8]||(u[8]=c=>w(k).enableUndoRefreshButton=c)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"]),F(It,{title:l.$t("settings.group_sidebar"),desc:l.$t("settings.group_sidebar_desc")},{default:H(()=>[F(Oe,{title:l.$t("settings.sidebar_position")},{default:H(()=>[F(hi,{modelValue:w(k).sidebarPosition,"onUpdate:modelValue":u[9]||(u[9]=c=>w(k).sidebarPosition=c),options:w(r),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,{title:l.$t("settings.auto_hide_sidebar")},{default:H(()=>[F(Je,{modelValue:w(k).autoHideSidebar,"onUpdate:modelValue":u[10]||(u[10]=c=>w(k).autoHideSidebar=c)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1},8,["title","desc"])]))}})},Symbol.toStringTag,{value:"Module"}));/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 *  2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var jr=function(){return jr=Object.assign||function(e){for(var i,n=1,s=arguments.length;n<s;n++){i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},jr.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var hl;(function(t){var e=(function(){function o(a,l,u,c){if(this.version=a,this.errorCorrectionLevel=l,this.modules=[],this.isFunction=[],a<o.MIN_VERSION||a>o.MAX_VERSION)throw new RangeError("Version value out of range");if(c<-1||c>7)throw new RangeError("Mask value out of range");this.size=a*4+17;for(var d=[],f=0;f<this.size;f++)d.push(!1);for(var f=0;f<this.size;f++)this.modules.push(d.slice()),this.isFunction.push(d.slice());this.drawFunctionPatterns();var h=this.addEccAndInterleave(u);if(this.drawCodewords(h),c==-1)for(var p=1e9,f=0;f<8;f++){this.applyMask(f),this.drawFormatBits(f);var m=this.getPenaltyScore();m<p&&(c=f,p=m),this.applyMask(f)}s(0<=c&&c<=7),this.mask=c,this.applyMask(c),this.drawFormatBits(c),this.isFunction=[]}return o.encodeText=function(a,l){var u=t.QrSegment.makeSegments(a);return o.encodeSegments(u,l)},o.encodeBinary=function(a,l){var u=t.QrSegment.makeBytes(a);return o.encodeSegments([u],l)},o.encodeSegments=function(a,l,u,c,d,f){if(u===void 0&&(u=1),c===void 0&&(c=40),d===void 0&&(d=-1),f===void 0&&(f=!0),!(o.MIN_VERSION<=u&&u<=c&&c<=o.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");var h,p;for(h=u;;h++){var m=o.getNumDataCodewords(h,l)*8,g=r.getTotalBits(a,h);if(g<=m){p=g;break}if(h>=c)throw new RangeError("Data too long")}for(var v=0,b=[o.Ecc.MEDIUM,o.Ecc.QUARTILE,o.Ecc.HIGH];v<b.length;v++){var _=b[v];f&&p<=o.getNumDataCodewords(h,_)*8&&(l=_)}for(var y=[],E=0,S=a;E<S.length;E++){var A=S[E];i(A.mode.modeBits,4,y),i(A.numChars,A.mode.numCharCountBits(h),y);for(var C=0,T=A.getData();C<T.length;C++){var I=T[C];y.push(I)}}s(y.length==p);var D=o.getNumDataCodewords(h,l)*8;s(y.length<=D),i(0,Math.min(4,D-y.length),y),i(0,(8-y.length%8)%8,y),s(y.length%8==0);for(var R=236;y.length<D;R^=253)i(R,8,y);for(var O=[];O.length*8<y.length;)O.push(0);return y.forEach(function(M,U){return O[U>>>3]|=M<<7-(U&7)}),new o(h,l,O,d)},o.prototype.getModule=function(a,l){return 0<=a&&a<this.size&&0<=l&&l<this.size&&this.modules[l][a]},o.prototype.getModules=function(){return this.modules},o.prototype.drawFunctionPatterns=function(){for(var a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var l=this.getAlignmentPatternPositions(),u=l.length,a=0;a<u;a++)for(var c=0;c<u;c++)a==0&&c==0||a==0&&c==u-1||a==u-1&&c==0||this.drawAlignmentPattern(l[a],l[c]);this.drawFormatBits(0),this.drawVersion()},o.prototype.drawFormatBits=function(a){for(var l=this.errorCorrectionLevel.formatBits<<3|a,u=l,c=0;c<10;c++)u=u<<1^(u>>>9)*1335;var d=(l<<10|u)^21522;s(d>>>15==0);for(var c=0;c<=5;c++)this.setFunctionModule(8,c,n(d,c));this.setFunctionModule(8,7,n(d,6)),this.setFunctionModule(8,8,n(d,7)),this.setFunctionModule(7,8,n(d,8));for(var c=9;c<15;c++)this.setFunctionModule(14-c,8,n(d,c));for(var c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,n(d,c));for(var c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,n(d,c));this.setFunctionModule(8,this.size-8,!0)},o.prototype.drawVersion=function(){if(!(this.version<7)){for(var a=this.version,l=0;l<12;l++)a=a<<1^(a>>>11)*7973;var u=this.version<<12|a;s(u>>>18==0);for(var l=0;l<18;l++){var c=n(u,l),d=this.size-11+l%3,f=Math.floor(l/3);this.setFunctionModule(d,f,c),this.setFunctionModule(f,d,c)}}},o.prototype.drawFinderPattern=function(a,l){for(var u=-4;u<=4;u++)for(var c=-4;c<=4;c++){var d=Math.max(Math.abs(c),Math.abs(u)),f=a+c,h=l+u;0<=f&&f<this.size&&0<=h&&h<this.size&&this.setFunctionModule(f,h,d!=2&&d!=4)}},o.prototype.drawAlignmentPattern=function(a,l){for(var u=-2;u<=2;u++)for(var c=-2;c<=2;c++)this.setFunctionModule(a+c,l+u,Math.max(Math.abs(c),Math.abs(u))!=1)},o.prototype.setFunctionModule=function(a,l,u){this.modules[l][a]=u,this.isFunction[l][a]=!0},o.prototype.addEccAndInterleave=function(a){var l=this.version,u=this.errorCorrectionLevel;if(a.length!=o.getNumDataCodewords(l,u))throw new RangeError("Invalid argument");for(var c=o.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l],d=o.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l],f=Math.floor(o.getNumRawDataModules(l)/8),h=c-f%c,p=Math.floor(f/c),m=[],g=o.reedSolomonComputeDivisor(d),v=0,b=0;v<c;v++){var _=a.slice(b,b+p-d+(v<h?0:1));b+=_.length;var y=o.reedSolomonComputeRemainder(_,g);v<h&&_.push(0),m.push(_.concat(y))}for(var E=[],S=function(A){m.forEach(function(C,T){(A!=p-d||T>=h)&&E.push(C[A])})},v=0;v<m[0].length;v++)S(v);return s(E.length==f),E},o.prototype.drawCodewords=function(a){if(a.length!=Math.floor(o.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var l=0,u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(var c=0;c<this.size;c++)for(var d=0;d<2;d++){var f=u-d,h=(u+1&2)==0,p=h?this.size-1-c:c;!this.isFunction[p][f]&&l<a.length*8&&(this.modules[p][f]=n(a[l>>>3],7-(l&7)),l++)}}s(l==a.length*8)},o.prototype.applyMask=function(a){if(a<0||a>7)throw new RangeError("Mask value out of range");for(var l=0;l<this.size;l++)for(var u=0;u<this.size;u++){var c=void 0;switch(a){case 0:c=(u+l)%2==0;break;case 1:c=l%2==0;break;case 2:c=u%3==0;break;case 3:c=(u+l)%3==0;break;case 4:c=(Math.floor(u/3)+Math.floor(l/2))%2==0;break;case 5:c=u*l%2+u*l%3==0;break;case 6:c=(u*l%2+u*l%3)%2==0;break;case 7:c=((u+l)%2+u*l%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[l][u]&&c&&(this.modules[l][u]=!this.modules[l][u])}},o.prototype.getPenaltyScore=function(){for(var a=0,l=0;l<this.size;l++){for(var u=!1,c=0,d=[0,0,0,0,0,0,0],f=0;f<this.size;f++)this.modules[l][f]==u?(c++,c==5?a+=o.PENALTY_N1:c>5&&a++):(this.finderPenaltyAddHistory(c,d),u||(a+=this.finderPenaltyCountPatterns(d)*o.PENALTY_N3),u=this.modules[l][f],c=1);a+=this.finderPenaltyTerminateAndCount(u,c,d)*o.PENALTY_N3}for(var f=0;f<this.size;f++){for(var u=!1,h=0,d=[0,0,0,0,0,0,0],l=0;l<this.size;l++)this.modules[l][f]==u?(h++,h==5?a+=o.PENALTY_N1:h>5&&a++):(this.finderPenaltyAddHistory(h,d),u||(a+=this.finderPenaltyCountPatterns(d)*o.PENALTY_N3),u=this.modules[l][f],h=1);a+=this.finderPenaltyTerminateAndCount(u,h,d)*o.PENALTY_N3}for(var l=0;l<this.size-1;l++)for(var f=0;f<this.size-1;f++){var p=this.modules[l][f];p==this.modules[l][f+1]&&p==this.modules[l+1][f]&&p==this.modules[l+1][f+1]&&(a+=o.PENALTY_N2)}for(var m=0,g=0,v=this.modules;g<v.length;g++){var b=v[g];m=b.reduce(function(E,S){return E+(S?1:0)},m)}var _=this.size*this.size,y=Math.ceil(Math.abs(m*20-_*10)/_)-1;return s(0<=y&&y<=9),a+=y*o.PENALTY_N4,s(0<=a&&a<=2568888),a},o.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var a=Math.floor(this.version/7)+2,l=Math.floor((this.version*8+a*3+5)/(a*4-4))*2,u=[6],c=this.size-7;u.length<a;c-=l)u.splice(1,0,c);return u},o.getNumRawDataModules=function(a){if(a<o.MIN_VERSION||a>o.MAX_VERSION)throw new RangeError("Version number out of range");var l=(16*a+128)*a+64;if(a>=2){var u=Math.floor(a/7)+2;l-=(25*u-10)*u-55,a>=7&&(l-=36)}return s(208<=l&&l<=29648),l},o.getNumDataCodewords=function(a,l){return Math.floor(o.getNumRawDataModules(a)/8)-o.ECC_CODEWORDS_PER_BLOCK[l.ordinal][a]*o.NUM_ERROR_CORRECTION_BLOCKS[l.ordinal][a]},o.reedSolomonComputeDivisor=function(a){if(a<1||a>255)throw new RangeError("Degree out of range");for(var l=[],u=0;u<a-1;u++)l.push(0);l.push(1);for(var c=1,u=0;u<a;u++){for(var d=0;d<l.length;d++)l[d]=o.reedSolomonMultiply(l[d],c),d+1<l.length&&(l[d]^=l[d+1]);c=o.reedSolomonMultiply(c,2)}return l},o.reedSolomonComputeRemainder=function(a,l){for(var u=l.map(function(p){return 0}),c=function(p){var m=p^u.shift();u.push(0),l.forEach(function(g,v){return u[v]^=o.reedSolomonMultiply(g,m)})},d=0,f=a;d<f.length;d++){var h=f[d];c(h)}return u},o.reedSolomonMultiply=function(a,l){if(a>>>8||l>>>8)throw new RangeError("Byte out of range");for(var u=0,c=7;c>=0;c--)u=u<<1^(u>>>7)*285,u^=(l>>>c&1)*a;return s(u>>>8==0),u},o.prototype.finderPenaltyCountPatterns=function(a){var l=a[1];s(l<=this.size*3);var u=l>0&&a[2]==l&&a[3]==l*3&&a[4]==l&&a[5]==l;return(u&&a[0]>=l*4&&a[6]>=l?1:0)+(u&&a[6]>=l*4&&a[0]>=l?1:0)},o.prototype.finderPenaltyTerminateAndCount=function(a,l,u){return a&&(this.finderPenaltyAddHistory(l,u),l=0),l+=this.size,this.finderPenaltyAddHistory(l,u),this.finderPenaltyCountPatterns(u)},o.prototype.finderPenaltyAddHistory=function(a,l){l[0]==0&&(a+=this.size),l.pop(),l.unshift(a)},o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],o})();t.QrCode=e;function i(o,a,l){if(a<0||a>31||o>>>a)throw new RangeError("Value out of range");for(var u=a-1;u>=0;u--)l.push(o>>>u&1)}function n(o,a){return(o>>>a&1)!=0}function s(o){if(!o)throw new Error("Assertion error")}var r=(function(){function o(a,l,u){if(this.mode=a,this.numChars=l,this.bitData=u,l<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}return o.makeBytes=function(a){for(var l=[],u=0,c=a;u<c.length;u++){var d=c[u];i(d,8,l)}return new o(o.Mode.BYTE,a.length,l)},o.makeNumeric=function(a){if(!o.isNumeric(a))throw new RangeError("String contains non-numeric characters");for(var l=[],u=0;u<a.length;){var c=Math.min(a.length-u,3);i(parseInt(a.substring(u,u+c),10),c*3+1,l),u+=c}return new o(o.Mode.NUMERIC,a.length,l)},o.makeAlphanumeric=function(a){if(!o.isAlphanumeric(a))throw new RangeError("String contains unencodable characters in alphanumeric mode");var l=[],u;for(u=0;u+2<=a.length;u+=2){var c=o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(u))*45;c+=o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(u+1)),i(c,11,l)}return u<a.length&&i(o.ALPHANUMERIC_CHARSET.indexOf(a.charAt(u)),6,l),new o(o.Mode.ALPHANUMERIC,a.length,l)},o.makeSegments=function(a){return a==""?[]:o.isNumeric(a)?[o.makeNumeric(a)]:o.isAlphanumeric(a)?[o.makeAlphanumeric(a)]:[o.makeBytes(o.toUtf8ByteArray(a))]},o.makeEci=function(a){var l=[];if(a<0)throw new RangeError("ECI assignment value out of range");if(a<128)i(a,8,l);else if(a<16384)i(2,2,l),i(a,14,l);else if(a<1e6)i(6,3,l),i(a,21,l);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,l)},o.isNumeric=function(a){return o.NUMERIC_REGEX.test(a)},o.isAlphanumeric=function(a){return o.ALPHANUMERIC_REGEX.test(a)},o.prototype.getData=function(){return this.bitData.slice()},o.getTotalBits=function(a,l){for(var u=0,c=0,d=a;c<d.length;c++){var f=d[c],h=f.mode.numCharCountBits(l);if(f.numChars>=1<<h)return 1/0;u+=4+h+f.bitData.length}return u},o.toUtf8ByteArray=function(a){a=encodeURI(a);for(var l=[],u=0;u<a.length;u++)a.charAt(u)!="%"?l.push(a.charCodeAt(u)):(l.push(parseInt(a.substring(u+1,u+3),16)),u+=2);return l},o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",o})();t.QrSegment=r})(hl||(hl={})),(function(t){(function(e){var i=(function(){function n(s,r){this.ordinal=s,this.formatBits=r}return n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),n})();e.Ecc=i})(t.QrCode||(t.QrCode={}))})(hl||(hl={})),(function(t){(function(e){var i=(function(){function n(s,r){this.modeBits=s,this.numBitsCharCount=r}return n.prototype.numCharCountBits=function(s){return this.numBitsCharCount[Math.floor((s+7)/17)]},n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),n})();e.Mode=i})(t.QrSegment||(t.QrSegment={}))})(hl||(hl={}));var Su=hl,Cv="L",Lv={L:Su.QrCode.Ecc.LOW,M:Su.QrCode.Ecc.MEDIUM,Q:Su.QrCode.Ecc.QUARTILE,H:Su.QrCode.Ecc.HIGH},noe=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function Iv(t){return t in Lv}function VE(t,e){e===void 0&&(e=0);var i=[];return t.forEach(function(n,s){var r=null;n.forEach(function(o,a){if(!o&&r!==null){i.push("M".concat(r+e," ").concat(s+e,"h").concat(a-r,"v1H").concat(r+e,"z")),r=null;return}if(a===n.length-1){if(!o)return;r===null?i.push("M".concat(a+e,",").concat(s+e," h1v1H").concat(a+e,"z")):i.push("M".concat(r+e,",").concat(s+e," h").concat(a+1-r,"v1H").concat(r+e,"z"));return}o&&r===null&&(r=a)})}),i.join("")}function jE(t,e,i,n){var s=n.width,r=n.height,o=n.x,a=n.y,l=t.length+i*2,u=Math.floor(e*.1),c=l/e,d=(s||u)*c,f=(r||u)*c,h=o==null?t.length/2-d/2:o*c,p=a==null?t.length/2-f/2:a*c,m=null;if(n.excavate){var g=Math.floor(h),v=Math.floor(p),b=Math.ceil(d+h-g),_=Math.ceil(f+p-v);m={x:g,y:v,w:b,h:_}}return{x:h,y:p,h:f,w:d,excavation:m}}function HE(t,e){return t.slice().map(function(i,n){return n<e.y||n>=e.y+e.h?i:i.map(function(s,r){return r<e.x||r>=e.x+e.w?s:!1})})}var Rv={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:Cv,validator:function(t){return Iv(t)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(t){return["linear","radial"].indexOf(t)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},soe=jr(jr({},Rv),{renderAs:{type:String,required:!1,default:"canvas",validator:function(t){return["canvas","svg"].indexOf(t)>-1}}}),roe=Me({name:"QRCodeSvg",props:Rv,setup:function(t){var e=z(0),i=z(""),n,s=function(){var o=t.value,a=t.level,l=t.margin,u=l>>>0,c=Iv(a)?a:Cv,d=Su.QrCode.encodeText(o,Lv[c]).getModules();if(e.value=d.length+u*2,t.imageSettings.src){var f=jE(d,t.size,u,t.imageSettings);n={x:f.x+u,y:f.y+u,width:f.w,height:f.h},f.excavation&&(d=HE(d,f.excavation))}i.value=VE(d,u)},r=function(){if(!t.gradient)return null;var o=t.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return nn(t.gradientType==="linear"?"linearGradient":"radialGradient",jr({id:"qr-gradient"},o),[nn("stop",{offset:"0%",style:{stopColor:t.gradientStartColor}}),nn("stop",{offset:"100%",style:{stopColor:t.gradientEndColor}})])};return s(),Ia(s),function(){return nn("svg",{width:t.size,height:t.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(e.value," ").concat(e.value)},[nn("defs",{},[r()]),nn("rect",{width:"100%",height:"100%",fill:t.background}),nn("path",{fill:t.gradient?"url(#qr-gradient)":t.foreground,d:i.value}),t.imageSettings.src&&nn("image",jr({href:t.imageSettings.src},n))])}}}),ooe=Me({name:"QRCodeCanvas",props:Rv,setup:function(t,e){var i=z(null),n=z(null),s=function(){var o=t.value,a=t.level,l=t.size,u=t.margin,c=t.background,d=t.foreground,f=t.gradient,h=t.gradientType,p=t.gradientStartColor,m=t.gradientEndColor,g=u>>>0,v=Iv(a)?a:Cv,b=i.value;if(b){var _=b.getContext("2d");if(_){var y=Su.QrCode.encodeText(o,Lv[v]).getModules(),E=y.length+g*2,S=n.value,A={x:0,y:0,width:0,height:0},C=t.imageSettings.src&&S!=null&&S.naturalWidth!==0&&S.naturalHeight!==0;if(C){var T=jE(y,t.size,g,t.imageSettings);A={x:T.x+g,y:T.y+g,width:T.w,height:T.h},T.excavation&&(y=HE(y,T.excavation))}var I=window.devicePixelRatio||1,D=l/E*I;if(b.height=b.width=l*I,_.scale(D,D),_.fillStyle=c,_.fillRect(0,0,E,E),f){var R=void 0;h==="linear"?R=_.createLinearGradient(0,0,E,E):R=_.createRadialGradient(E/2,E/2,0,E/2,E/2,E/2),R.addColorStop(0,p),R.addColorStop(1,m),_.fillStyle=R}else _.fillStyle=d;noe?_.fill(new Path2D(VE(y,g))):y.forEach(function(O,M){O.forEach(function(U,$){U&&_.fillRect($+g,M+g,1,1)})}),C&&_.drawImage(S,A.x,A.y,A.width,A.height)}}};st(s),Ia(s);var r=e.attrs.style;return function(){return nn(Te,[nn("canvas",jr(jr({},e.attrs),{ref:i,style:jr(jr({},r),{width:"".concat(t.size,"px"),height:"".concat(t.size,"px")})})),t.imageSettings.src&&nn("img",{ref:n,src:t.imageSettings.src,style:{display:"none"},onLoad:s})])}}}),aoe=Me({name:"Qrcode",render:function(){var t=this.$props,e=t.renderAs,i=t.value,n=t.size,s=t.margin,r=t.level,o=t.background,a=t.foreground,l=t.imageSettings,u=t.gradient,c=t.gradientType,d=t.gradientStartColor,f=t.gradientEndColor;return nn(e==="svg"?roe:ooe,{value:i,size:n,margin:s,level:r,background:o,foreground:a,imageSettings:l,gradient:u,gradientType:c,gradientStartColor:d,gradientEndColor:f})},props:soe});const loe={"w-full":"",flex:"",rounded:"$bew-radius",bg:"$bew-fill-1","p-1":""},uoe={color:"$bew-warning-color"},coe={grid:"~ xl:cols-8 lg:cols-6 cols-5 gap-4"},doe=["onClick"],foe=["src"],hoe={"w-full":"",flex:"",rounded:"$bew-radius",bg:"$bew-fill-1","p-1":""},zE=qe(Me({__name:"SearchPage",setup(t){Pe(()=>k.value.individuallySetSearchPageWallpaper,i=>{i?document.documentElement.style.backgroundImage=`url(${k.value.searchPageWallpaper})`:document.documentElement.style.backgroundImage=`url(${k.value.wallpaper})`});function e(i){k.value.searchPageSearchBarFocusCharacter=i}return(i,n)=>{const s=Ge("Radio"),r=Ge("Tooltip");return L(),P("div",null,[F(It,{title:i.$t("settings.group_logo")},{default:H(()=>[F(Oe,{title:i.$t("settings.logo_color")},{default:H(()=>[x("div",loe,[x("div",{flex:"1 ~","items-center":"","justify-center":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(k).searchPageLogoColor==="themeColor"||!w(k).searchPageLogoColor?"var(--bew-theme-color)":"",color:w(k).searchPageLogoColor==="themeColor"||!w(k).searchPageLogoColor?"white":""}),onClick:n[0]||(n[0]=o=>w(k).searchPageLogoColor="themeColor")},G(i.$t("settings.logo_color_opt.theme_color")),5),x("div",{flex:"1 ~","items-center":"","justify-center":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(k).searchPageLogoColor==="white"?"var(--bew-theme-color)":"",color:w(k).searchPageLogoColor==="white"?"white":""}),onClick:n[1]||(n[1]=o=>w(k).searchPageLogoColor="white")},G(i.$t("settings.logo_color_opt.white")),5)])]),_:1},8,["title"]),F(Oe,{title:i.$t("settings.enable_logo_glowing_effect")},{default:H(()=>[F(s,{modelValue:w(k).searchPageLogoGlow,"onUpdate:modelValue":n[2]||(n[2]=o=>w(k).searchPageLogoGlow=o)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:i.$t("settings.logo_visibility")},{default:H(()=>[F(s,{modelValue:w(k).searchPageShowLogo,"onUpdate:modelValue":n[3]||(n[3]=o=>w(k).searchPageShowLogo=o)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:i.$t("settings.group_search_bar")},{default:H(()=>[F(Oe,{title:i.$t("settings.show_search_recommendation"),desc:i.$t("settings.show_search_recommendation_desc")},{default:H(()=>[F(s,{modelValue:w(k).showSearchRecommendation,"onUpdate:modelValue":n[4]||(n[4]=o=>w(k).showSearchRecommendation=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:i.$t("settings.bg_darkens_when_the_search_bar_is_focused")},{default:H(()=>[F(s,{modelValue:w(k).searchPageDarkenOnSearchFocus,"onUpdate:modelValue":n[5]||(n[5]=o=>w(k).searchPageDarkenOnSearchFocus=o)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:i.$t("settings.bg_blurs_when_the_search_bar_is_focused")},{desc:H(()=>[x("span",uoe,G(i.$t("common.performance_impact_warn")),1)]),default:H(()=>[F(s,{modelValue:w(k).searchPageBlurredOnSearchFocus,"onUpdate:modelValue":n[6]||(n[6]=o=>w(k).searchPageBlurredOnSearchFocus=o)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:i.$t("settings.choose_search_bar_focused_character")},{bottom:H(()=>[x("div",coe,[x("picture",{"aspect-square":"",bg:"$bew-fill-1",rounded:"$bew-radius","overflow-hidden":"","un-border":"4 transparent","cursor-pointer":"",grid:"","place-items-center":"",class:Ie({"selected-wallpaper":w(k).searchPageSearchBarFocusCharacter===""}),onClick:n[7]||(n[7]=o=>e(""))},[...n[12]||(n[12]=[x("div",{"i-tabler:photo-off":"",text:"3xl $bew-text-3"},null,-1)])],2),(L(!0),P(Te,null,Ne(w(pY),o=>(L(),_e(r,{key:o.url,placement:"top",content:o.name,"aspect-square":""},{default:H(()=>[x("picture",{"aspect-square":"",bg:"$bew-fill-1",rounded:"$bew-radius","overflow-hidden":"","un-border":"4 transparent","w-full":"",class:Ie({"selected-wallpaper":w(k).searchPageSearchBarFocusCharacter===o.url}),onClick:a=>e(o.url)},[x("img",{src:o.url,alt:"",loading:"lazy","w-full":"","h-full":"","object-contain":""},null,8,foe)],10,doe)]),_:2},1032,["content"]))),128))])]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:i.$t("settings.group_hot_search")},{default:H(()=>[F(Oe,{title:i.$t("settings.show_hot_search_in_search_page")},{desc:H(()=>[x("span",null,G(i.$t("settings.show_hot_search_in_search_page_desc")),1)]),default:H(()=>[F(s,{modelValue:w(k).showHotSearchInTopBar,"onUpdate:modelValue":n[8]||(n[8]=o=>w(k).showHotSearchInTopBar=o)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:i.$t("settings.group_search_results")},{default:H(()=>[F(Oe,{title:i.$t("settings.use_plugin_search_results_page")},{desc:H(()=>[x("span",null,G(i.$t("settings.use_plugin_search_results_page_desc")),1)]),default:H(()=>[F(s,{modelValue:w(k).usePluginSearchResultsPage,"onUpdate:modelValue":n[9]||(n[9]=o=>w(k).usePluginSearchResultsPage=o)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:i.$t("settings.search_results_pagination_mode")},{desc:H(()=>[x("span",null,G(i.$t("settings.search_results_pagination_mode_desc")),1)]),default:H(()=>[x("div",hoe,[x("div",{flex:"1 ~","items-center":"","justify-center":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(k).searchResultsPaginationMode==="scroll"?"var(--bew-theme-color)":"",color:w(k).searchResultsPaginationMode==="scroll"?"white":""}),onClick:n[10]||(n[10]=o=>w(k).searchResultsPaginationMode="scroll")},G(i.$t("settings.search_results_pagination_mode_opt.scroll")),5),x("div",{flex:"1 ~","items-center":"","justify-center":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(k).searchResultsPaginationMode==="pagination"?"var(--bew-theme-color)":"",color:w(k).searchResultsPaginationMode==="pagination"?"white":""}),onClick:n[11]||(n[11]=o=>w(k).searchResultsPaginationMode="pagination")},G(i.$t("settings.search_results_pagination_mode_opt.pagination")),5)])]),_:1},8,["title"])]),_:1},8,["title"]),F(Nw,{type:"searchPage"})])}}}),[["__scopeId","data-v-ce3dc92e"]]),poe=Object.freeze(Object.defineProperty({__proto__:null,default:zE},Symbol.toStringTag,{value:"Module"})),moe={flex:"~ gap-1",bg:"$bew-fill-1","p-2":"","mb-2":"",rounded:"$bew-radius"},goe={"max-w-50px":""},voe={"max-w-80px":""},_oe={"max-w-50px":""},boe=["onDblclick"],yoe=["onDblclick"],woe={flex:"~ gap-1","max-w-80px":""},Eoe=Me({__name:"FilterByTitleTable",setup(t){const{t:e}=St(),i=Ha(),n=z({keyword:"",remark:""}),s=z({keyword:"",remark:""}),r=z(-1),o=z(null),a=z(null);function l(){if(!n.value.keyword.trim())return;if(k.value.filterByTitle.find((p,m)=>p.keyword===n.value.keyword.trim()&&m!==r.value)){i.warning("This title filter already exist!!!");return}k.value.filterByTitle.unshift({...n.value}),ot(()=>{u()})}function u(){n.value={keyword:"",remark:""}}async function c(h,p="keyword"){r.value=h,s.value={...k.value.filterByTitle[h]},await ot();const m=p==="keyword"?o.value:a.value;Array.isArray(m)?m[0]?.focus():m?.focus()}function d(h){if(!s.value.keyword.trim())return;if(k.value.filterByTitle.find((m,g)=>m.keyword===s.value.keyword.trim()&&g!==h)){i.warning(e("settings.filter_item_already_exist"));return}n.value.keyword=n.value.keyword.trim(),n.value.remark=n.value.remark.trim(),k.value.filterByTitle[h]={...s.value},h!==-1&&(r.value=-1)}function f(h){k.value.filterByTitle.splice(h,1)}return Ps("Escape",h=>{h.preventDefault(),r.value=-1}),(h,p)=>{const m=Ge("Input"),g=Ge("Button"),v=Ge("ListItem"),b=Ge("List");return L(),P("div",null,[x("div",moe,[F(m,{modelValue:w(n).keyword,"onUpdate:modelValue":p[0]||(p[0]=_=>w(n).keyword=_),size:"small",placeholder:h.$t("common.table.title"),"w-full":"",onClick:p[1]||(p[1]=_=>r.value=-1),onEnter:l},null,8,["modelValue","placeholder"]),F(m,{modelValue:w(n).remark,"onUpdate:modelValue":p[2]||(p[2]=_=>w(n).remark=_),size:"small",placeholder:h.$t("common.table.remark"),"w-full":"",onClick:p[3]||(p[3]=_=>r.value=-1),onEnter:l},null,8,["modelValue","placeholder"]),F(g,{size:"small",type:"primary",style:{"--b-button-width":"80px"},"shrink-0":"",onClick:l},{left:H(()=>[...p[7]||(p[7]=[x("i",{"i-mingcute:add-line":""},null,-1)])]),default:H(()=>[He(" "+G(h.$t("common.operation.add")),1)]),_:1})]),F(b,{"highlight-first":"","pin-top":"","w-full":"","max-h-400px":"","overflow-overlay":""},{default:H(()=>[F(v,{"min-h-44px":""},{default:H(()=>[x("div",goe,G(h.$t("common.table.index")),1),x("div",null,G(h.$t("common.table.title")),1),x("div",null,G(h.$t("common.table.remark")),1),x("div",voe,G(h.$t("common.table.operations")),1)]),_:1}),(L(!0),P(Te,null,Ne(w(k).filterByTitle,(_,y)=>(L(),_e(v,{key:_.keyword,style:Ue({background:w(r)===y?"var(--bew-theme-color-20) !important":""})},{default:H(()=>[x("div",_oe,G(y),1),w(r)===y?(L(),P(Te,{key:0},[F(m,{ref_for:!0,ref_key:"keywordRef",ref:o,modelValue:w(s).keyword,"onUpdate:modelValue":p[4]||(p[4]=E=>w(s).keyword=E),size:"small",placeholder:h.$t("common.table.title"),"w-full":"",onEnter:E=>d(y)},null,8,["modelValue","placeholder","onEnter"]),F(m,{ref_for:!0,ref_key:"remarkRef",ref:a,modelValue:w(s).remark,"onUpdate:modelValue":p[5]||(p[5]=E=>w(s).remark=E),size:"small",placeholder:h.$t("common.table.remark"),"w-full":"",onEnter:E=>d(y)},null,8,["modelValue","placeholder","onEnter"])],64)):(L(),P(Te,{key:1},[x("div",{"break-anywhere":"",onDblclick:E=>c(y,"keyword")},G(_.keyword),41,boe),x("div",{"break-anywhere":"",onDblclick:E=>c(y,"remark")},G(_.remark),41,yoe)],64)),x("div",woe,[w(r)===y?(L(),P(Te,{key:0},[F(g,{size:"small",type:"tertiary",onClick:E=>d(y)},{left:H(()=>[...p[8]||(p[8]=[x("i",{"i-mingcute:check-line":""},null,-1)])]),_:2},1032,["onClick"]),F(g,{size:"small",type:"tertiary",onClick:p[6]||(p[6]=E=>r.value=-2)},{left:H(()=>[...p[9]||(p[9]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),_:1})],64)):(L(),P(Te,{key:1},[F(g,{size:"small",type:"tertiary",onClick:E=>c(y)},{left:H(()=>[...p[10]||(p[10]=[x("i",{"i-mingcute:edit-2-line":""},null,-1)])]),_:2},1032,["onClick"]),F(g,{size:"small",type:"tertiary",onClick:E=>f(y)},{left:H(()=>[...p[11]||(p[11]=[x("i",{"i-mingcute:delete-2-line":""},null,-1)])]),_:2},1032,["onClick"])],64))])]),_:2},1032,["style"]))),128))]),_:1})])}}}),Soe={flex:"~ gap-1",bg:"$bew-fill-1","p-2":"","mb-2":"",rounded:"$bew-radius"},xoe={"max-w-50px":""},Toe={"max-w-80px":""},Aoe={"max-w-50px":""},koe=["onDblclick"],Coe=["onDblclick"],Loe={flex:"~ gap-1","max-w-80px":""},Ioe=Me({__name:"FilterByUserTable",setup(t){const{t:e}=St(),i=Ha(),n=z({keyword:"",remark:""}),s=z({keyword:"",remark:""}),r=z(-1),o=z(null),a=z(null);function l(){if(!n.value.keyword.trim())return;if(k.value.filterByUser.find((p,m)=>p.keyword===n.value.keyword.trim()&&m!==r.value)){i.warning(e("settings.filter_item_already_exist"));return}n.value.keyword=n.value.keyword.trim(),n.value.remark=n.value.remark.trim(),k.value.filterByUser.unshift({...n.value}),ot(()=>{u()})}function u(){n.value={keyword:"",remark:""}}async function c(h,p="keyword"){r.value=h,s.value={...k.value.filterByUser[h]},await ot();const m=p==="keyword"?o.value:a.value;Array.isArray(m)?m[0]?.focus():m?.focus()}function d(h){if(!s.value.keyword.trim())return;if(k.value.filterByUser.find((m,g)=>m.keyword===s.value.keyword.trim()&&g!==h)){i.warning("This title filter already exist!!!");return}k.value.filterByUser[h]={...s.value},h!==-1&&(r.value=-1)}function f(h){k.value.filterByUser.splice(h,1)}return Ps("Escape",h=>{h.preventDefault(),r.value=-1}),(h,p)=>{const m=Ge("Input"),g=Ge("Button"),v=Ge("ListItem"),b=Ge("List");return L(),P("div",null,[x("div",Soe,[F(m,{modelValue:w(n).keyword,"onUpdate:modelValue":p[0]||(p[0]=_=>w(n).keyword=_),size:"small",placeholder:h.$t("settings.filter_by_user_table.username_or_mid"),"w-full":"",onClick:p[1]||(p[1]=_=>r.value=-1),onEnter:l},null,8,["modelValue","placeholder"]),F(m,{modelValue:w(n).remark,"onUpdate:modelValue":p[2]||(p[2]=_=>w(n).remark=_),size:"small",placeholder:h.$t("common.table.remark"),"w-full":"",onClick:p[3]||(p[3]=_=>r.value=-1),onEnter:l},null,8,["modelValue","placeholder"]),F(g,{size:"small",type:"primary","shrink-0":"",style:{"--b-button-width":"80px"},onClick:l},{left:H(()=>[...p[7]||(p[7]=[x("i",{"i-mingcute:add-line":""},null,-1)])]),default:H(()=>[He(" "+G(h.$t("common.operation.add")),1)]),_:1})]),F(b,{"highlight-first":"","pin-top":"","w-full":"","max-h-400px":"","overflow-overlay":""},{default:H(()=>[F(v,{"min-h-44px":""},{default:H(()=>[x("div",xoe,G(h.$t("common.table.index")),1),x("div",null,G(h.$t("settings.filter_by_user_table.username_or_mid")),1),x("div",null,G(h.$t("common.table.remark")),1),x("div",Toe,G(h.$t("common.table.operations")),1)]),_:1}),(L(!0),P(Te,null,Ne(w(k).filterByUser,(_,y)=>(L(),_e(v,{key:_.keyword,style:Ue({background:w(r)===y?"var(--bew-theme-color-20) !important":""})},{default:H(()=>[x("div",Aoe,G(y),1),w(r)===y?(L(),P(Te,{key:0},[F(m,{ref_for:!0,ref_key:"keywordRef",ref:o,modelValue:w(s).keyword,"onUpdate:modelValue":p[4]||(p[4]=E=>w(s).keyword=E),size:"small",placeholder:h.$t("settings.filter_by_user_table.username_or_mid"),"w-full":"",onEnter:E=>d(y)},null,8,["modelValue","placeholder","onEnter"]),F(m,{ref_for:!0,ref_key:"remarkRef",ref:a,modelValue:w(s).remark,"onUpdate:modelValue":p[5]||(p[5]=E=>w(s).remark=E),size:"small",placeholder:h.$t("common.table.remark"),"w-full":"",onEnter:E=>d(y)},null,8,["modelValue","placeholder","onEnter"])],64)):(L(),P(Te,{key:1},[x("div",{"break-anywhere":"",onDblclick:E=>c(y,"keyword")},G(_.keyword),41,koe),x("div",{"break-anywhere":"",onDblclick:E=>c(y,"remark")},G(_.remark),41,Coe)],64)),x("div",Loe,[w(r)===y?(L(),P(Te,{key:0},[F(g,{size:"small",type:"tertiary",onClick:E=>d(y)},{left:H(()=>[...p[8]||(p[8]=[x("i",{"i-mingcute:check-line":""},null,-1)])]),_:2},1032,["onClick"]),F(g,{size:"small",type:"tertiary",onClick:p[6]||(p[6]=E=>r.value=-2)},{left:H(()=>[...p[9]||(p[9]=[x("i",{"i-mingcute:close-line":""},null,-1)])]),_:1})],64)):(L(),P(Te,{key:1},[F(g,{size:"small",type:"tertiary",onClick:E=>c(y)},{left:H(()=>[...p[10]||(p[10]=[x("i",{"i-mingcute:edit-2-line":""},null,-1)])]),_:2},1032,["onClick"]),F(g,{size:"small",type:"tertiary",onClick:E=>f(y)},{left:H(()=>[...p[11]||(p[11]=[x("i",{"i-mingcute:delete-2-line":""},null,-1)])]),_:2},1032,["onClick"])],64))])]),_:2},1032,["style"]))),128))]),_:1})])}}}),Roe={"w-full":"",flex:"",rounded:"$bew-radius",bg:"$bew-fill-1","p-1":""},Poe={href:"https://github.com/indefined/UserScripts/tree/master/bilibiliHome#%E6%8E%88%E6%9D%83%E8%AF%B4%E6%98%8E",target:"_blank",color:"$bew-theme-color"},Doe={"w-full":""},Ooe={flex:"~ col gap-4 items-center"},Moe={"mb-2":"","text-center":""},$oe={text:"$bew-text-2 sm"},Foe={"bg-white":"",border:"white 4"},Boe={key:1,"w-150px":"","h-150px":"",grid:"~ place-items-center"},Noe={flex:"~ justify-end","w-full":""},Uoe={flex:"~ justify-end","w-full":""},Voe={flex:"~ justify-end","w-full":""},joe={grid:"~ lg:gap-4 lg:cols-2 cols-1","lg:border":"t-1 $bew-border-color"},Hoe=["innerHTML"],zoe={flex:"~ gap-2","mb-2":""},Goe=["innerHTML"],Woe={flex:"~ gap-2","mb-2":""},Koe={flex:"~ gap-4 items-center"},Yoe=["onClick"],Xoe={color:"$bew-warning-color"},qoe={color:"$bew-warning-color"},Zoe=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Home",setup(t){const e=Fl(),i=Ha(),n=z(!1),s=z(!1),r=z(),o=z(null),a=z(""),l=z(""),u=ge(()=>ts.value.accessToken);Gu(()=>{clearInterval(o.value)}),Ki(()=>{clearInterval(o.value)});function c(){k.value.recommendationMode="app",DF()||d()}async function d(){s.value=!0;try{await h(),p()}catch(C){console.error(C)}}function f(){q5()}async function h(){const C=await MF();C.code===0&&(r.value=C.data.url,a.value=C.data.auth_code)}function p(){clearInterval(o.value),o.value=setInterval(async()=>{const C=await OF(a.value);C.code!==0&&(l.value=C.message),C.code===0?(s.value=!1,PF(C.data),clearInterval(o.value),i.success("")):C.code===86038?await h():(C.code===-3||C.code===-400||C.code===-404)&&i.error(C.message)},3e3)}function m(){clearInterval(o.value),s.value=!1}function g(C){const T=C==="title"?k.value.filterByTitle:k.value.filterByUser,I=JSON.stringify(T,null,2),D=new Blob([I],{type:"application/json"}),R=URL.createObjectURL(D),O=document.createElement("a");O.href=R,O.download=`filter-by-${C}.json`,O.click(),URL.revokeObjectURL(R)}function v(C){const T=document.createElement("input");T.type="file",T.accept=".json",T.onchange=async I=>{const D=I.target.files?.[0];if(D)try{const R=await D.text(),O=JSON.parse(R);if(!Array.isArray(O)||!O.every(M=>"keyword"in M&&"remark"in M))throw new Error("Invalid file format");C==="title"?k.value.filterByTitle=O:k.value.filterByUser=O}catch(R){console.error(`Error importing filter by ${C}:`,R),i.error(`Failed to import ${C} filters: ${R instanceof Error?R.message:"Unknown error"}`)}finally{T.remove()}},T.click()}function b(){g("title")}function _(){v("title")}function y(){g("user")}function E(){v("user")}function S(){k.value.homePageTabVisibilityList=e.homeTabs.map(C=>({page:C.page,visible:C.page!==Ni.Precious}))}function A(C){k.value.homePageTabVisibilityList.filter(T=>T.visible===!0).length>1?C.visible=!C.visible:C.visible=!0}return(C,T)=>{const I=Ge("Button"),D=Ge("Dialog");return L(),P("div",null,[F(It,{title:C.$t("settings.group_recommendation_mode")},{default:H(()=>[F(Oe,{title:C.$t("settings.recommendation_mode")},{desc:H(()=>[x("p",null,G(C.$t("settings.recommendation_mode_desc")),1)]),default:H(()=>[x("div",Roe,[x("div",{"flex-1":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(k).recommendationMode==="web"?"var(--bew-theme-color)":"",color:w(k).recommendationMode==="web"?"white":""}),onClick:T[0]||(T[0]=R=>w(k).recommendationMode="web")}," Web ",4),x("div",{"flex-1":"","py-1":"","cursor-pointer":"","text-center":"",rounded:"$bew-radius",style:Ue({background:w(k).recommendationMode==="app"?"var(--bew-theme-color)":"",color:w(k).recommendationMode==="app"?"white":""}),onClick:c}," App ",4)])]),_:1},8,["title"]),w(k).recommendationMode==="app"?(L(),_e(Oe,{key:0,title:C.$t("settings.authorize_app")},{desc:H(()=>[He(G(C.$t("settings.authorize_app_desc"))+" ",1),T[24]||(T[24]=x("br",null,null,-1)),x("a",Poe,G(C.$t("settings.authorize_app_more_info_access_key")),1)]),default:H(()=>[x("div",Doe,[w(u)?(L(),_e(I,{key:1,type:"secondary",center:"",block:"",style:{"--b-button-text-color":"var(--bew-error-color)"},onClick:f},{default:H(()=>[He(G(C.$t("settings.btn.revoke")),1)]),_:1})):(L(),_e(I,{key:0,type:"primary",center:"",block:"",onClick:d},{default:H(()=>[He(G(C.$t("settings.btn.authorize"))+"... ",1)]),_:1}))])]),_:1},8,["title"])):X("",!0),F(Oe,{title:C.$t("settings.auto_switch_recommendation_mode"),desc:C.$t("settings.auto_switch_recommendation_mode_desc")},{default:H(()=>[F(Je,{modelValue:w(k).autoSwitchRecommendationMode,"onUpdate:modelValue":T[1]||(T[1]=R=>w(k).autoSwitchRecommendationMode=R)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.preserve_for_you_state"),desc:C.$t("settings.preserve_for_you_state_desc")},{default:H(()=>[F(Je,{modelValue:w(k).preserveForYouState,"onUpdate:modelValue":T[2]||(T[2]=R=>w(k).preserveForYouState=R)},null,8,["modelValue"])]),_:1},8,["title","desc"]),w(s)?(L(),_e(D,{key:1,width:"50%","max-width":"800px","append-to-bewly-body":"","show-footer":!1,title:C.$t("settings.authorize_app"),center:"",onClose:m},{default:H(()=>[x("div",Ooe,[x("div",null,[x("p",Moe,G(C.$t("settings.scan_qrcode_desc")),1),x("p",$oe,G(C.$t("settings.authorize_app_desc")),1)]),x("div",Foe,[w(r)?(L(),_e(aoe,{key:0,value:w(r),size:150},null,8,["value"])):(L(),P("div",Boe,[...T[25]||(T[25]=[x("div",{"i-svg-spinners:ring-resize":""},null,-1)])]))]),x("p",null,G(w(l)),1),F(I,{type:"secondary",onClick:h},{default:H(()=>[He(G(C.$t("common.operation.refresh")),1)]),_:1})])]),_:1},8,["title"])):X("",!0)]),_:1},8,["title"]),F(It,{title:C.$t("settings.group_recommendation_filters"),desc:C.$t("settings.group_recommendation_filters_desc")},{default:H(()=>[F(Oe,{title:C.$t("settings.disable_filters_for_followed_users"),desc:C.$t("settings.disable_filters_for_followed_users_desc")},{default:H(()=>[F(Je,{modelValue:w(k).disableFilterForFollowedUser,"onUpdate:modelValue":T[3]||(T[3]=R=>w(k).disableFilterForFollowedUser=R)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.filter_out_vertical_videos")},{default:H(()=>[F(Je,{modelValue:w(k).filterOutVerticalVideos,"onUpdate:modelValue":T[4]||(T[4]=R=>w(k).filterOutVerticalVideos=R)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:C.$t("settings.filter_by_view_count"),desc:C.$t("settings.filter_by_view_count_desc")},{default:H(()=>[x("div",Noe,[w(k).enableFilterByViewCount?(L(),_e(rr,{key:0,modelValue:w(k).filterByViewCount,"onUpdate:modelValue":T[5]||(T[5]=R=>w(k).filterByViewCount=R),type:"number",min:1,max:1e6,"flex-1":""},{suffix:H(()=>[He(G(C.$t("settings.filter_by_view_count_unit")),1)]),_:1},8,["modelValue"])):X("",!0),F(Je,{modelValue:w(k).enableFilterByViewCount,"onUpdate:modelValue":T[6]||(T[6]=R=>w(k).enableFilterByViewCount=R)},null,8,["modelValue"])])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.filter_by_duration"),desc:C.$t("settings.filter_by_duration_desc")},{default:H(()=>[x("div",Uoe,[w(k).enableFilterByDuration?(L(),_e(rr,{key:0,modelValue:w(k).filterByDuration,"onUpdate:modelValue":T[7]||(T[7]=R=>w(k).filterByDuration=R),type:"number",min:1,max:1e6,"flex-1":""},{suffix:H(()=>[He(G(C.$t("settings.filter_by_duration_unit")),1)]),_:1},8,["modelValue"])):X("",!0),F(Je,{modelValue:w(k).enableFilterByDuration,"onUpdate:modelValue":T[8]||(T[8]=R=>w(k).enableFilterByDuration=R)},null,8,["modelValue"])])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.filter_by_publish_time"),desc:C.$t("settings.filter_by_publish_time_desc")},{default:H(()=>[x("div",Voe,[w(k).enableFilterByPublishTime?(L(),_e(rr,{key:0,modelValue:w(k).filterByPublishTime,"onUpdate:modelValue":T[9]||(T[9]=R=>w(k).filterByPublishTime=R),type:"number",min:7,max:365,"flex-1":""},{suffix:H(()=>[He(G(C.$t("settings.filter_by_publish_time_unit")),1)]),_:1},8,["modelValue"])):X("",!0),F(Je,{modelValue:w(k).enableFilterByPublishTime,"onUpdate:modelValue":T[10]||(T[10]=R=>w(k).enableFilterByPublishTime=R)},null,8,["modelValue"])])]),_:1},8,["title","desc"]),x("div",joe,[F(Oe,{class:"unrestricted-width-settings-item",title:C.$t("settings.filter_by_title"),border:"lg:none t-1 $bew-border-color"},El({default:H(()=>[F(Je,{modelValue:w(k).enableFilterByTitle,"onUpdate:modelValue":T[11]||(T[11]=R=>w(k).enableFilterByTitle=R)},null,8,["modelValue"])]),_:2},[w(k).enableFilterByTitle?{name:"bottom",fn:H(()=>[x("div",{text:"$bew-text-2 sm","mb-2":"",innerHTML:C.$t("settings.filter_by_title_desc")},null,8,Hoe),x("div",zoe,[F(I,{type:"secondary",size:"small",onClick:_},{left:H(()=>[...T[26]||(T[26]=[x("div",{"i-uil:import":""},null,-1)])]),default:H(()=>[T[27]||(T[27]=x("input",{type:"file",accept:".json",hidden:""},null,-1)),He(" "+G(C.$t("common.operation.import")),1)]),_:1}),F(I,{type:"secondary",size:"small",onClick:b},{left:H(()=>[...T[28]||(T[28]=[x("div",{"i-uil:export":""},null,-1)])]),default:H(()=>[He(" "+G(C.$t("common.operation.export")),1)]),_:1})]),F(Eoe)]),key:"0"}:void 0]),1032,["title"]),F(Oe,{class:"unrestricted-width-settings-item",title:C.$t("settings.filter_by_user"),border:"lg:none b-1 $bew-border-color"},El({default:H(()=>[F(Je,{modelValue:w(k).enableFilterByUser,"onUpdate:modelValue":T[12]||(T[12]=R=>w(k).enableFilterByUser=R)},null,8,["modelValue"])]),_:2},[w(k).enableFilterByUser?{name:"bottom",fn:H(()=>[x("div",{text:"$bew-text-2 sm","mb-2":"",innerHTML:C.$t("settings.filter_by_user_desc")},null,8,Goe),x("div",Woe,[F(I,{type:"secondary",size:"small",onClick:E},{left:H(()=>[...T[29]||(T[29]=[x("div",{"i-uil:import":""},null,-1)])]),default:H(()=>[T[30]||(T[30]=x("input",{type:"file",accept:".json",hidden:""},null,-1)),He(" "+G(C.$t("common.operation.import")),1)]),_:1}),F(I,{type:"secondary",size:"small",onClick:y},{left:H(()=>[...T[31]||(T[31]=[x("div",{"i-uil:export":""},null,-1)])]),default:H(()=>[He(" "+G(C.$t("common.operation.export")),1)]),_:1})]),F(Ioe)]),key:"0"}:void 0]),1032,["title"])])]),_:1},8,["title","desc"]),F(It,{title:C.$t("settings.group_following")},{default:H(()=>[F(Oe,{title:C.$t("settings.use_following_new_layout"),desc:C.$t("settings.use_following_new_layout_desc")},{default:H(()=>[F(Je,{modelValue:w(k).useFollowingNewLayout,"onUpdate:modelValue":T[13]||(T[13]=R=>w(k).useFollowingNewLayout=R)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.following_inactive_days"),desc:C.$t("settings.following_inactive_days_desc")},{default:H(()=>[F(rr,{modelValue:w(k).followingInactiveDays,"onUpdate:modelValue":T[14]||(T[14]=R=>w(k).followingInactiveDays=R),type:"number",min:1,max:365,"w-100px":""},{suffix:H(()=>[He(G(C.$t("common.days")),1)]),_:1},8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.following_tab_show_livestreaming_videos")},{default:H(()=>[F(Je,{modelValue:w(k).followingTabShowLivestreamingVideos,"onUpdate:modelValue":T[15]||(T[15]=R=>w(k).followingTabShowLivestreamingVideos=R)},null,8,["modelValue"])]),_:1},8,["title"]),F(Oe,{title:C.$t("settings.following_filter_charging_videos"),desc:C.$t("settings.following_filter_charging_videos_desc")},{default:H(()=>[F(Je,{modelValue:w(k).followingFilterChargingVideos,"onUpdate:modelValue":T[16]||(T[16]=R=>w(k).followingFilterChargingVideos=R)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:C.$t("settings.following_filter_dynamic_videos"),desc:C.$t("settings.following_filter_dynamic_videos_desc")},{default:H(()=>[F(Je,{modelValue:w(k).followingFilterDynamicVideos,"onUpdate:modelValue":T[17]||(T[17]=R=>w(k).followingFilterDynamicVideos=R)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"]),F(It,{title:C.$t("settings.group_home_tabs")},{default:H(()=>[F(Oe,{desc:C.$t("settings.home_tabs_adjustment_desc")},{title:H(()=>[x("div",Koe,[He(G(C.$t("settings.home_tabs_adjustment"))+" ",1),F(I,{size:"small",type:"secondary",onClick:S},{left:H(()=>[...T[32]||(T[32]=[x("div",{"i-mingcute:back-line":""},null,-1)])]),default:H(()=>[He(" "+G(C.$t("common.operation.reset")),1)]),_:1})])]),bottom:H(()=>[F(w(UE),{modelValue:w(k).homePageTabVisibilityList,"onUpdate:modelValue":T[18]||(T[18]=R=>w(k).homePageTabVisibilityList=R),"item-key":"page","component-data":{style:"display: flex; gap: 0.5rem; flex-wrap: wrap;"}},{item:H(({element:R})=>[x("div",{flex:"~ gap-2 items-center",p:"x-4 y-2",bg:"$bew-fill-1",rounded:"$bew-radius","cursor-all-scroll":"","duration-300":"",style:Ue({background:R.visible?"var(--bew-theme-color-20)":"var(--bew-fill-1)",color:R.visible?"var(--bew-theme-color)":"var(--bew-text-1)"}),onClick:O=>A(R)},G(C.$t(w(e).homeTabs.find(O=>O.page===R.page)?.i18nKey??"")),13,Yoe)]),_:1},8,["modelValue"])]),_:1},8,["desc"]),F(Oe,{title:C.$t("settings.always_show_tabs_on_home_page")},{default:H(()=>[F(Je,{modelValue:w(k).alwaysShowTabsOnHomePage,"onUpdate:modelValue":T[19]||(T[19]=R=>w(k).alwaysShowTabsOnHomePage=R)},null,8,["modelValue"])]),_:1},8,["title"])]),_:1},8,["title"]),F(It,{title:C.$t("settings.group_search_page_mode")},{default:H(()=>[F(Oe,{title:C.$t("settings.use_search_page_mode")},{default:H(()=>[F(Je,{modelValue:w(k).useSearchPageModeOnHomePage,"onUpdate:modelValue":T[20]||(T[20]=R=>w(k).useSearchPageModeOnHomePage=R)},null,8,["modelValue"])]),_:1},8,["title"]),w(k).useSearchPageModeOnHomePage?(L(),P(Te,{key:0},[F(Oe,{title:C.$t("settings.settings_shared_with_the_search_page")},{desc:H(()=>[x("span",Xoe,G(C.$t("settings.settings_shared_with_the_search_page_desc")),1)]),default:H(()=>[F(I,{type:"secondary",block:"",center:"",onClick:T[21]||(T[21]=R=>n.value=!0)},{default:H(()=>[He(G(C.$t("settings.btn.open_settings")),1)]),_:1}),w(n)?(L(),_e(D,{key:0,width:"80%","max-width":"900px","content-height":"64vh","show-footer":!1,title:C.$t("settings.settings_shared_with_the_search_page"),"append-to-bewly-body":"",onClose:T[22]||(T[22]=R=>n.value=!1)},{desc:H(()=>[x("span",qoe,G(C.$t("settings.settings_shared_with_the_search_page_desc")),1)]),default:H(()=>[F(zE)]),_:1},8,["title"])):X("",!0)]),_:1},8,["title"]),F(Oe,{title:C.$t("settings.search_page_mode_wallpaper_fixed")},{default:H(()=>[F(Je,{modelValue:w(k).searchPageModeWallpaperFixed,"onUpdate:modelValue":T[23]||(T[23]=R=>w(k).searchPageModeWallpaperFixed=R)},null,8,["modelValue"])]),_:1},8,["title"])],64)):X("",!0)]),_:1},8,["title"])])}}}),[["__scopeId","data-v-9a38a62b"]])},Symbol.toStringTag,{value:"Module"})),Qoe={flex:"~ justify-end items-center","w-full":"","gap-2":""},Joe={flex:"~ justify-end items-center","w-full":"","gap-2":""},eae={flex:"~ justify-end items-center","w-full":"","gap-2":""},tae={flex:"~ justify-end items-center","w-full":"","gap-2":""},iae={text:"sm $bew-text-2","space-y-2":"","p-4":""},nae={"whitespace-pre-wrap":"","break-words":""},sae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"VolumeBalance",setup(t){const{t:e}=St();function i(s){}function n(s){}return(s,r)=>(L(),P("div",null,[F(It,{title:w(e)("settings.volume_normalization.title")},{default:H(()=>[F(Oe,{title:w(e)("settings.volume_normalization.enable"),desc:w(e)("settings.volume_normalization.enable_desc")},{default:H(()=>[F(Je,{modelValue:w(k).enableVolumeNormalization,"onUpdate:modelValue":r[0]||(r[0]=o=>w(k).enableVolumeNormalization=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),w(k).enableVolumeNormalization?(L(),_e(Oe,{key:0,title:w(e)("settings.volume_normalization.target_volume"),desc:w(e)("settings.volume_normalization.target_volume_desc")},{default:H(()=>[x("div",Qoe,[F(rr,{"model-value":w(k).targetVolume,type:"number",min:0,max:100,"w-20":"","onUpdate:modelValue":r[1]||(r[1]=o=>{w(k).targetVolume=Number(o),Number(o)})},null,8,["model-value"]),r[6]||(r[6]=x("span",{text:"sm $bew-text-2"},"%",-1))])]),_:1},8,["title","desc"])):X("",!0),w(k).enableVolumeNormalization?(L(),_e(Oe,{key:1,title:w(e)("settings.volume_normalization.strength"),desc:w(e)("settings.volume_normalization.strength_desc")},{default:H(()=>[x("div",Joe,[F(rr,{"model-value":w(k).normalizationStrength,type:"number",min:1,max:20,"w-20":"","onUpdate:modelValue":r[2]||(r[2]=o=>{w(k).normalizationStrength=Number(o),Number(o)})},null,8,["model-value"])])]),_:1},8,["title","desc"])):X("",!0),w(k).enableVolumeNormalization?(L(),_e(Oe,{key:2,title:w(e)("settings.volume_normalization.adaptive_speed"),desc:w(e)("settings.volume_normalization.adaptive_speed_desc")},{default:H(()=>[x("div",eae,[F(rr,{modelValue:w(k).adaptiveGainSpeed,"onUpdate:modelValue":r[3]||(r[3]=o=>w(k).adaptiveGainSpeed=o),type:"number",min:1,max:10,"w-20":""},null,8,["modelValue"])])]),_:1},8,["title","desc"])):X("",!0),w(k).enableVolumeNormalization?(L(),_e(Oe,{key:3,title:w(e)("settings.volume_normalization.voice_gate"),desc:w(e)("settings.volume_normalization.voice_gate_desc")},{default:H(()=>[x("div",tae,[F(rr,{modelValue:w(k).voiceGateDb,"onUpdate:modelValue":r[4]||(r[4]=o=>w(k).voiceGateDb=o),type:"number",min:-60,max:-10,"w-20":""},null,8,["modelValue"]),r[7]||(r[7]=x("span",{text:"sm $bew-text-2"},"dB",-1))])]),_:1},8,["title","desc"])):X("",!0),w(k).enableVolumeNormalization?(L(),_e(Oe,{key:4,title:w(e)("settings.volume_normalization.debug"),desc:w(e)("settings.volume_normalization.debug_desc")},{default:H(()=>[F(Je,{modelValue:w(k).volumeNormalizationDebug,"onUpdate:modelValue":r[5]||(r[5]=o=>w(k).volumeNormalizationDebug=o)},null,8,["modelValue"])]),_:1},8,["title","desc"])):X("",!0)]),_:1},8,["title"]),F(It,{title:w(e)("settings.volume_normalization.usage_guide.title")},{default:H(()=>[F(Oe,{title:w(e)("settings.volume_normalization.usage_guide.title")},{desc:H(()=>[x("div",iae,[x("pre",nae,G(w(e)("settings.volume_normalization.usage_guide.desc")),1)])]),_:1},8,["title"])]),_:1},8,["title"])]))}})},Symbol.toStringTag,{value:"Module"})),rae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Comments",setup(t){return(e,i)=>(L(),P("div",null,[F(It,{title:e.$t("settings.group_comments")},{default:H(()=>[F(Oe,{title:e.$t("settings.show_ip_location"),desc:e.$t("settings.show_ip_location_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showIPLocation,"onUpdate:modelValue":i[0]||(i[0]=n=>w(k).showIPLocation=n)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:e.$t("settings.show_sex"),desc:e.$t("settings.show_sex_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showSex,"onUpdate:modelValue":i[1]||(i[1]=n=>w(k).showSex=n)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:e.$t("settings.show_comment_host_tag"),desc:e.$t("settings.show_comment_host_tag_desc")},{default:H(()=>[F(Je,{modelValue:w(k).showCommentHostTag,"onUpdate:modelValue":i[2]||(i[2]=n=>w(k).showCommentHostTag=n)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:e.$t("settings.adjust_comment_image_height"),desc:e.$t("settings.adjust_comment_image_height_desc")},{default:H(()=>[F(Je,{modelValue:w(k).adjustCommentImageHeight,"onUpdate:modelValue":i[3]||(i[3]=n=>w(k).adjustCommentImageHeight=n)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"])]))}})},Symbol.toStringTag,{value:"Module"})),oae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"VideoPlayback",setup(t){const{t:e}=St(),i=ge(()=>[{label:e("settings.video_player_mode.default"),value:"default"},{label:e("settings.video_player_mode.web_fullscreen"),value:"webFullscreen"},{label:e("settings.video_player_mode.widescreen"),value:"widescreen"}]),n=ge(()=>[{label:e("settings.video_danmaku_default_state_opt.system"),value:"system"},{label:e("settings.video_danmaku_default_state_opt.on"),value:"on"},{label:e("settings.video_danmaku_default_state_opt.off"),value:"off"}]);return(s,r)=>(L(),P("div",null,[F(It,{title:s.$t("settings.group_player_settings")},{default:H(()=>[F(Oe,{title:s.$t("settings.video_default_player_mode")},{default:H(()=>[F(hi,{modelValue:w(k).defaultVideoPlayerMode,"onUpdate:modelValue":r[0]||(r[0]=o=>w(k).defaultVideoPlayerMode=o),options:w(i),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title"]),F(Oe,{title:w(e)("settings.keep_collection_video_default_mode"),desc:w(e)("settings.keep_collection_video_default_mode_desc")},{default:H(()=>[F(Je,{modelValue:w(k).keepCollectionVideoDefaultMode,"onUpdate:modelValue":r[1]||(r[1]=o=>w(k).keepCollectionVideoDefaultMode=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.video_player_scroll"),desc:w(e)("settings.video_player_scroll_desc")},{default:H(()=>[F(Je,{modelValue:w(k).videoPlayerScroll,"onUpdate:modelValue":r[2]||(r[2]=o=>w(k).videoPlayerScroll=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.auto_exit_fullscreen_on_end"),desc:w(e)("settings.auto_exit_fullscreen_on_end_desc")},{default:H(()=>[F(Je,{modelValue:w(k).autoExitFullscreenOnEnd,"onUpdate:modelValue":r[3]||(r[3]=o=>w(k).autoExitFullscreenOnEnd=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),w(k).autoExitFullscreenOnEnd?(L(),_e(Oe,{key:0,title:w(e)("settings.auto_exit_fullscreen_exclude_auto_play"),desc:w(e)("settings.auto_exit_fullscreen_exclude_auto_play_desc")},{default:H(()=>[F(Je,{modelValue:w(k).autoExitFullscreenExcludeAutoPlay,"onUpdate:modelValue":r[4]||(r[4]=o=>w(k).autoExitFullscreenExcludeAutoPlay=o)},null,8,["modelValue"])]),_:1},8,["title","desc"])):X("",!0)]),_:1},8,["title"]),F(It,{title:w(e)("settings.group_player_components")},{default:H(()=>[F(Oe,{title:w(e)("settings.video_danmaku_default_state"),desc:w(e)("settings.video_danmaku_default_state_desc")},{default:H(()=>[F(hi,{modelValue:w(k).defaultDanmakuState,"onUpdate:modelValue":r[5]||(r[5]=o=>w(k).defaultDanmakuState=o),options:w(n),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.remember_playback_rate"),desc:w(e)("settings.remember_playback_rate_desc")},{default:H(()=>[F(Je,{modelValue:w(k).rememberPlaybackRate,"onUpdate:modelValue":r[6]||(r[6]=o=>w(k).rememberPlaybackRate=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.enlarge_favorite_dialog"),desc:w(e)("settings.enlarge_favorite_dialog_desc")},{default:H(()=>[F(Je,{modelValue:w(k).enlargeFavoriteDialog,"onUpdate:modelValue":r[7]||(r[7]=o=>w(k).enlargeFavoriteDialog=o)},null,8,["modelValue"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.external_watch_later_button"),desc:w(e)("settings.external_watch_later_button_desc")},{default:H(()=>[F(Je,{modelValue:w(k).externalWatchLaterButton,"onUpdate:modelValue":r[8]||(r[8]=o=>w(k).externalWatchLaterButton=o)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"])]))}})},Symbol.toStringTag,{value:"Module"})),aae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"AutoPlay",setup(t){const{t:e}=St(),i=[{label:"auto_play_mode_auto_play",value:"autoPlay"},{label:"auto_play_mode_auto_play_with_recommend",value:"autoPlayWithRecommend"},{label:"auto_play_mode_pause_at_end",value:"pauseAtEnd"},{label:"auto_play_mode_loop",value:"loop"}],n=ge(()=>[{label:e("settings.random_play_mode_manual"),value:"manual"},{label:e("settings.random_play_mode_auto"),value:"auto"}]);return(s,r)=>{const o=Ge("Radio");return L(),P("div",null,[F(It,{title:s.$t("settings.group_auto_play")},{default:H(()=>[F(Oe,{title:w(e)("settings.use_bilibili_default_auto_play"),desc:w(e)("settings.use_bilibili_default_auto_play_desc")},{default:H(()=>[F(o,{modelValue:w(k).useBilibiliDefaultAutoPlay,"onUpdate:modelValue":r[0]||(r[0]=a=>w(k).useBilibiliDefaultAutoPlay=a)},null,8,["modelValue"])]),_:1},8,["title","desc"]),w(k).useBilibiliDefaultAutoPlay?X("",!0):(L(),P(Te,{key:0},[F(Oe,{title:w(e)("settings.auto_play_multipart"),desc:w(e)("settings.auto_play_multipart_desc")},{default:H(()=>[F(hi,{modelValue:w(k).autoPlayMultipart,"onUpdate:modelValue":r[1]||(r[1]=a=>w(k).autoPlayMultipart=a),options:i.map(a=>({label:s.$t(`settings.${a.label}`),value:a.value}))},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.auto_play_collection"),desc:w(e)("settings.auto_play_collection_desc")},{default:H(()=>[F(hi,{modelValue:w(k).autoPlayCollection,"onUpdate:modelValue":r[2]||(r[2]=a=>w(k).autoPlayCollection=a),options:i.map(a=>({label:s.$t(`settings.${a.label}`),value:a.value}))},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.auto_play_recommend"),desc:w(e)("settings.auto_play_recommend_desc")},{default:H(()=>[F(hi,{modelValue:w(k).autoPlayRecommend,"onUpdate:modelValue":r[3]||(r[3]=a=>w(k).autoPlayRecommend=a),options:i.map(a=>({label:s.$t(`settings.${a.label}`),value:a.value}))},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.auto_play_playlist"),desc:w(e)("settings.auto_play_playlist_desc")},{default:H(()=>[F(hi,{modelValue:w(k).autoPlayPlaylist,"onUpdate:modelValue":r[4]||(r[4]=a=>w(k).autoPlayPlaylist=a),options:i.map(a=>({label:s.$t(`settings.${a.label}`),value:a.value}))},null,8,["modelValue","options"])]),_:1},8,["title","desc"])],64))]),_:1},8,["title"]),F(It,{title:w(e)("settings.group_random_play")},{default:H(()=>[F(Oe,{title:w(e)("settings.enable_random_play"),desc:w(e)("settings.enable_random_play_desc")},{default:H(()=>[F(o,{modelValue:w(k).enableRandomPlay,"onUpdate:modelValue":r[5]||(r[5]=a=>w(k).enableRandomPlay=a)},null,8,["modelValue"])]),_:1},8,["title","desc"]),w(k).enableRandomPlay?(L(),P(Te,{key:0},[F(Oe,{title:w(e)("settings.random_play_mode"),desc:w(e)("settings.random_play_mode_desc")},{default:H(()=>[F(hi,{modelValue:w(k).randomPlayMode,"onUpdate:modelValue":r[6]||(r[6]=a=>w(k).randomPlayMode=a),options:w(n),w:"full"},null,8,["modelValue","options"])]),_:1},8,["title","desc"]),F(Oe,{title:w(e)("settings.min_videos_for_random"),desc:w(e)("settings.min_videos_for_random_desc")},{default:H(()=>[F(rr,{modelValue:w(k).minVideosForRandom,"onUpdate:modelValue":r[7]||(r[7]=a=>w(k).minVideosForRandom=a),type:"number",w:"full"},null,8,["modelValue"])]),_:1},8,["title","desc"])],64)):X("",!0)]),_:1},8,["title"])])}}})},Symbol.toStringTag,{value:"Module"})),lae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"VipFeatures",setup(t){return(e,i)=>(L(),P("div",null,[F(It,{title:e.$t("settings.bilibili_features.vip_features")},{default:H(()=>[F(Oe,{title:e.$t("settings.show_bcoin_receive_reminder")},{default:H(()=>[F(Je,{modelValue:w(k).showBCoinReceiveReminder,"onUpdate:modelValue":i[0]||(i[0]=n=>w(k).showBCoinReceiveReminder=n)},null,8,["modelValue"])]),_:1},8,["title"]),w(k).showBCoinReceiveReminder?(L(),_e(Oe,{key:0,title:e.$t("settings.auto_receive_bcoin_coupon"),desc:e.$t("settings.auto_receive_bcoin_coupon_desc")},{default:H(()=>[F(Je,{modelValue:w(k).autoReceiveBCoinCoupon,"onUpdate:modelValue":i[1]||(i[1]=n=>w(k).autoReceiveBCoinCoupon=n)},null,8,["modelValue"])]),_:1},8,["title","desc"])):X("",!0),F(Oe,{title:e.$t("settings.auto_receive_vip_exp"),desc:e.$t("settings.auto_receive_vip_exp_desc")},{default:H(()=>[F(Je,{modelValue:w(k).autoReceiveVipExp,"onUpdate:modelValue":i[2]||(i[2]=n=>w(k).autoReceiveVipExp=n)},null,8,["modelValue"])]),_:1},8,["title","desc"])]),_:1},8,["title"])]))}})},Symbol.toStringTag,{value:"Module"}));function GE(t){const e=uae(t);return e.player_height==null||e.player_width==null?!1:e.player_height>e.player_width}function uae(t){const e=t.split("?")[1],i=new URLSearchParams(e);return{cid:i.get("cid"),player_height:i.get("player_height")?Number.parseInt(i.get("player_height")):null,player_preload:i.get("player_preload"),player_rotate:i.get("player_rotate")?Number.parseInt(i.get("player_rotate")):null,player_width:i.get("player_width")?Number.parseInt(i.get("player_width")):null,report_flow_data:i.get("report_flow_data"),trackid:i.get("trackid")}}const Lo=(t,e)=>e.reduce((i,n)=>i&&i[n],t);var Cs=(t=>(t[t.filterOutVerticalVideos=0]="filterOutVerticalVideos",t[t.viewCount=1]="viewCount",t[t.viewCountStr=2]="viewCountStr",t[t.duration=3]="duration",t[t.title=4]="title",t[t.user=5]="user",t[t.publishTime=6]="publishTime",t))(Cs||{});function WE(t,e,i){function n(v,b,_){const y=Lo(v,b);return!GE(y)}function s(v,b,_){return Lo(v,b)>_}function r(v,b,_){const y=Lo(v,b);if(typeof y=="string"&&(y.includes("")||y.includes(""))){const S=y.replace(/|/g,"");return Number(S)*1e4>_}const E=Number(y);return!Number.isNaN(E)&&E>_}const o=[],a=[];k.value.filterByTitle.forEach(v=>{v.keyword.startsWith("/")&&v.keyword.endsWith("/")?a.push(new RegExp(v.keyword.slice(1,-1),"i")):o.push(`${v.keyword}`.toUpperCase())});function l(v,b,_){const y=Lo(v,b);return!(o.some(E=>`${y}`.toUpperCase().includes(E))||a.some(E=>E.test(y)))}const u=[],c=[];k.value.filterByUser.forEach(v=>{v.keyword.startsWith("/")&&v.keyword.endsWith("/")?c.push(new RegExp(v.keyword.slice(1,-1),"i")):u.push(`${v.keyword}`.toUpperCase())});function d(v,b,_){const y=Lo(v,b);return!(u.includes(`${y}`.toUpperCase())||c.some(E=>E.test(y)))}function f(v,b,_){const y=Lo(v,b);if(!y)return!1;const E=Math.floor(Date.now()/1e3),S=1440*60,A=_*S;return E-y<=A}const h={0:{func:n,enabledKey:"filterOutVerticalVideos",valueKey:""},1:{func:s,enabledKey:"enableFilterByViewCount",valueKey:"filterByViewCount"},3:{func:s,enabledKey:"enableFilterByDuration",valueKey:"filterByDuration"},2:{func:r,enabledKey:"enableFilterByViewCount",valueKey:"filterByViewCount"},4:{func:l,enabledKey:"enableFilterByTitle",valueKey:""},5:{func:d,enabledKey:"enableFilterByUser",valueKey:""},6:{func:f,enabledKey:"enableFilterByPublishTime",valueKey:"filterByPublishTime"}},p=z(null);Pe(()=>[k.value.filterOutVerticalVideos,k.value.enableFilterByDuration,k.value.enableFilterByViewCount,k.value.enableFilterByTitle,k.value.enableFilterByUser,k.value.enableFilterByPublishTime,k.value.filterByDuration,k.value.filterByViewCount,k.value.filterByTitle,k.value.filterByUser,k.value.filterByPublishTime],([v,b,_,y,E,S])=>{if(!v&&!b&&!_&&!y&&!E&&!S){p.value=null;return}p.value=m(h,e,i)},{immediate:!0});function m(v,b,_){const y=[];return b.forEach((E,S)=>{const{func:A,enabledKey:C,valueKey:T}=v[E];if(k.value[C]){const I={keyPath:_[S],func:A,value:T?k.value[T]:""};y.push(I)}}),E=>y.every(({keyPath:A,func:C,value:T})=>g(E)?!0:C(E,A,T))}function g(v){return k.value.recommendationMode==="web"?Lo(v,t)&&k.value.disableFilterForFollowedUser:k.value.recommendationMode==="app"?(Lo(v,t)===""||Lo(v,t)==="")&&k.value.disableFilterForFollowedUser:!1}return p}const cae=Ff("forYou",()=>{const t=z({videoList:[],appVideoList:[],refreshIdx:1,noMoreContent:!1,isInitialized:!1}),e=r=>{t.value={...r}},i=()=>({...t.value}),n=()=>{t.value={videoList:[],appVideoList:[],refreshIdx:1,noMoreContent:!1,isInitialized:!1}},s=()=>{t.value.isInitialized=!0};return{state:Ta(t),saveCompleteState:e,getCompleteState:i,resetState:n,markAsInitialized:s}});function Tt(t){if(!t||typeof t!="string")return t||"";const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x27;":"'","&apos;":"'","&nbsp;":" ","&copy;":"","&reg;":"","&trade;":"","&euro;":"","&pound;":"","&yen;":"","&cent;":"","&middot;":"","&hellip;":"","&mdash;":"","&ndash;":"","&ldquo;":'"',"&rdquo;":'"',"&lsquo;":"","&rsquo;":""};return t.replace(/&(?:#x?[0-9a-f]+|[a-z]+);/gi,i=>{if(i.startsWith("&#")){const n=i[2]==="x"||i[2]==="X",s=Number.parseInt(i.slice(n?3:2,-1),n?16:10);return Number.isNaN(s)?i:String.fromCharCode(s)}return e[i.toLowerCase()]||i})}const Sd=30,xu=5,dae=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"ForYou",props:{gridLayout:{}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,s=Ha(),r=cae(),o=WE(["is_followed"],[Cs.duration,Cs.viewCount,Cs.title,Cs.user,Cs.user,Cs.publishTime],[["duration"],["stat","view"],["title"],["owner","name"],["owner","mid"],["pubdate"]]),a=WE(["bottom_rcmd_reason"],[Cs.filterOutVerticalVideos,Cs.duration,Cs.viewCountStr,Cs.title,Cs.user,Cs.user],[["uri"],["player_args","duration"],["cover_left_text_1"],["title"],["mask","avatar","text"],["mask","avatar","up_id"]]),{handleReachBottom:l,handlePageRefresh:u,haveScrollbar:c,undoForwardState:d,handleUndoRefresh:f,handleForwardRefresh:h,handleBackToTop:p,scrollViewportRef:m}=$t(),g=z([]),v=z([]),b=ge(()=>k.value.recommendationMode==="web"?g.value:v.value),_=z(!1),y=z(!1),E=z(1),S=z(!1),A=z(),C=z(!1),T=z(!document.hidden),I=z(1),D=z([]),R=z(1),O=z([]),M=z(1),U=z([]),$=z([]),B=z(!1),W=z(!1),te=z(1),re=z(0),q=z(0),le=z(0),be=z(!1);function se(){T.value=!document.hidden}st(()=>{if(document.addEventListener("visibilitychange",se),k.value.preserveForYouState&&r.state.isInitialized){const j=r.getCompleteState();g.value=[...j.videoList],v.value=[...j.appVideoList],E.value=j.refreshIdx,S.value=j.noMoreContent,B.value=!1,W.value=!1,d.value=Vn.Hidden,D.value=[],R.value=1,O.value=[],M.value=1,j.scrollTop&&ot(()=>{const K=m.value;K&&(K.scrollTop=j.scrollTop||0)}),setTimeout(()=>{ae(),setTimeout(()=>{k.value.preserveForYouState&&r.state.isInitialized&&(d.value=Vn.Hidden)},100)},1e3)}else setTimeout(()=>{Xe()},200),ae()}),fs(()=>{ae()}),Ki(()=>{if(k.value.preserveForYouState){const j=m.value?.scrollTop||0,K={videoList:[...g.value],appVideoList:[...v.value],refreshIdx:E.value,noMoreContent:S.value,isInitialized:!0,scrollTop:j};r.saveCompleteState(K)}}),ki(()=>{document.removeEventListener("visibilitychange",se)}),Ps(j=>{if(C.value){const K=A.value?.three_point_v2?.find(oe=>oe.type===bo.Dislike)?.reasons||[];if(j.key>="0"&&j.key<="9")j.preventDefault(),K.forEach(oe=>{K[Number(j.key)-1]&&oe.id===K[Number(j.key)-1].id&&(I.value=oe.id)});else if(j.key==="ArrowUp"){j.preventDefault();const oe=K.findIndex(he=>I.value===he.id);oe>0&&(I.value=K[oe-1].id)}else if(j.key==="ArrowDown"){j.preventDefault();const oe=K.findIndex(he=>I.value===he.id);oe<K.length-1&&(I.value=K[oe+1].id)}}});function ne(j){return{id:j.id,duration:j.duration,title:Tt(j.title),cover:j.pic,author:{name:Tt(j.owner?.name||""),authorFace:j.owner?.face||"",followed:!!j.is_followed,mid:j.owner?.mid||0},tag:Tt(j?.rcmd_reason?.content),view:j.stat?.view||0,danmaku:j.stat?.danmaku||0,like:j.stat?.like,publishedTimestamp:j.pubdate,bvid:j.bvid,cid:j.cid,threePointV2:[]}}function pe(j){const K=j?.bottom_rcmd_reason?.trim(),oe=K===""||K==="",ce=j?.desc?.split("")?.[1]?.trim()||(oe?K:void 0);let me="horizontal";return j.card_goto==="bangumi"?me="bangumi":j.uri&&GE(j.uri)&&(me="vertical"),{id:j.args?.aid??0,durationStr:j.cover_right_text,title:Tt(j.title),cover:j.cover||"",author:{name:Tt(j?.mask?.avatar?.text||""),authorFace:j?.mask?.avatar?.cover||j?.avatar?.cover||"",followed:oe,mid:j?.mask?.avatar?.up_id||0},capsuleText:Tt(ce),bvid:j.bvid||"",viewStr:j.cover_left_text_1,danmakuStr:j.cover_left_text_2,cid:j?.player_args?.cid,goto:j?.goto,url:j?.goto==="bangumi"?j.uri:"",type:me,threePointV2:j?.three_point_v2||[]}}function ye(j){const K=j.bvid?.trim();return K||`${j.id}`}function xe(j){const K=[],oe=new Set;return j.forEach(he=>{if(!he?.id||he.goto!=="av"||oe.has(he.id))return;oe.add(he.id);const ce=he.is_followed?"n_":"";K.push(`av_${ce}${he.id}`)}),K.join("_")}function Be(j,K){const oe=j.map(he=>he.item).filter(he=>!!he&&!!he.id);return xe(oe.slice(-30))}function Ke(j){return j.reduce((K,oe)=>oe.item?K+1:K,0)}Pe(()=>k.value.recommendationMode,()=>{S.value=!1,E.value=1,q.value=0,le.value=0,g.value=[],v.value=[],O.value=[],D.value=[],$.value=[],U.value=[],B.value=!1,W.value=!1,d.value=Vn.Hidden,r.resetState(),Xe()});async function Xe(){g.value=[],v.value=[],te.value=1,q.value=0,le.value=0,await Re()}async function Re(){n("beforeLoading"),_.value=!0;try{if(k.value.recommendationMode==="web")await ie();else try{await ue()}catch(j){console.error("App recommendation failed:",j),k.value.autoSwitchRecommendationMode?(k.value.recommendationMode="web",s.warning("App  Web "),await ie()):s.error("App  Web ")}}finally{_.value=!1,n("afterLoading")}}function Z(){_.value||S.value||be.value||(k.value.recommendationMode==="app"&&(te.value=1,re.value=v.value.length),Re())}function ae(){l.value=async()=>{_.value||S.value||Z()},u.value=async()=>{_.value||(k.value.recommendationMode==="web"?(D.value=JSON.parse(JSON.stringify(g.value)),R.value=E.value,B.value=!0,O.value=[],W.value=!1,d.value=Vn.ShowUndo):k.value.recommendationMode==="app"&&(U.value=JSON.parse(JSON.stringify(v.value)),B.value=!0,$.value=[],W.value=!1,d.value=Vn.ShowUndo),Xe())},f.value=()=>{B.value&&(k.value.recommendationMode==="web"&&D.value.length>0?(p(),O.value=JSON.parse(JSON.stringify(g.value)),M.value=E.value,W.value=!0,g.value=JSON.parse(JSON.stringify(D.value)),E.value=R.value,B.value=!1,d.value=Vn.Hidden,q.value=0):k.value.recommendationMode==="app"&&U.value.length>0&&(p(),$.value=JSON.parse(JSON.stringify(v.value)),W.value=!0,v.value=JSON.parse(JSON.stringify(U.value)),B.value=!1,d.value=Vn.Hidden,le.value=0))},h.value=()=>{if(W.value){if(k.value.recommendationMode==="web"&&O.value.length>0)return p(),D.value=JSON.parse(JSON.stringify(g.value)),R.value=E.value,B.value=!0,g.value=JSON.parse(JSON.stringify(O.value)),E.value=M.value,W.value=!1,d.value=Vn.ShowUndo,q.value=0,!0;if(k.value.recommendationMode==="app"&&$.value.length>0)return p(),U.value=JSON.parse(JSON.stringify(v.value)),B.value=!0,v.value=JSON.parse(JSON.stringify($.value)),W.value=!1,d.value=Vn.ShowUndo,le.value=0,!0}return!1}}async function ie(){try{if(q.value>=xu){console.warn(""),S.value=!0;return}const j=g.value.filter(me=>me.item).length,K=E.value,oe=Ke(g.value),he=Be(g.value,Sd),ce=await ze.video.getRecommendVideos({fresh_idx:K,fresh_idx_1h:K,ps:Sd,fetch_row:oe>0?oe:void 0,last_showlist:he||void 0});if(!ce){console.error("Failed to load web recommendations: Response is undefined"),S.value=!0;return}if(!ce.data){S.value=!0;return}if(ce.code===0){E.value++;const me=[],Q=new Set;g.value.forEach(ee=>{ee.item&&Q.add(ye(ee.item))}),ce.data.item.forEach(ee=>{if(ee.goto==="ad"||!ee.owner||!ee.stat||o.value&&!o.value(ee))return;const we=ye(ee);Q.has(we)||(Q.add(we),me.push(ee))}),j?me.forEach(ee=>{if(!o.value)g.value.push({uniqueId:ye(ee),item:ee,displayData:ne(ee)});else{const we=g.value.findIndex(ke=>!ke.item);we!==-1?g.value[we]={uniqueId:ye(ee),item:ee,displayData:ne(ee)}:g.value.push({uniqueId:ye(ee),item:ee,displayData:ne(ee)})}}):g.value=me.map(ee=>({uniqueId:ye(ee),item:ee,displayData:ne(ee)})),g.value.filter(ee=>ee.item).length>j?q.value=0:q.value++}else ce.code===62011?y.value=!0:(console.error("API returned error code:",ce.code,ce.message),S.value=!0)}finally{const j=g.value.filter(K=>K.item);if(g.value=j,!y.value&&!S.value&&(await ot(),!await c()||j.length<Sd||j.length<1))if(T.value&&q.value<xu){be.value=!0;try{await ie()}finally{be.value=!1}}else q.value>=xu&&(S.value=!0)}}async function ue(){if(le.value>=xu){console.warn("APP"),S.value=!0;return}if(!ts.value.accessToken){console.warn("APP access token "),y.value=!0;return}const j=te.value,K=v.value.length;for(let he=0;he<j;he++)try{const ce=v.value.length>0&&v.value[v.value.length-1].item?v.value[v.value.length-1].item.idx:1,me=await ze.video.getAppRecommendVideos({access_key:ts.value.accessToken,s_locale:k.value.language===Nn.Mandarin_TW||k.value.language===Nn.Cantonese?"zh-Hant_TW":"zh-Hans_CN",c_locate:k.value.language===Nn.Mandarin_TW||k.value.language===Nn.Cantonese?"zh-Hant_TW":"zh-Hans_CN",appkey:po.appkey,idx:ce});if(!me){console.error("Failed to load batch",he,"Response is undefined");break}if(me.code===0)me.data.items.forEach(Q=>{if(Q.card_type.includes("banner")||Q.card_type==="cm_v1"||a.value&&!a.value(Q)||!(Q.args?.aid&&Q.args.aid>0||Q.bvid&&Q.bvid.trim()!==""))return;const ee=Q.args?.aid||Q.bvid;v.value.some(ke=>ke.item&&(ke.item.args?.aid===Q.args?.aid||ke.item.bvid===Q.bvid))||v.value.push({uniqueId:`${ee||Q.idx}`,item:Q,displayData:pe(Q)})});else if(me.code===62011){y.value=!0;break}}catch(ce){console.error("Failed to load batch",he,ce);break}if(v.value.length>K?le.value=0:le.value++,!y.value){await ot();let he=!1;if(!await c()||v.value.length<Sd?he=!0:re.value>0&&(v.value.length-re.value<Sd?he=!0:re.value=0),he&&T.value&&le.value<xu){be.value=!0;try{await ue()}finally{be.value=!1}}else le.value>=xu&&(S.value=!0)}}function ve(){location.href="https://passport.bilibili.com/login"}return e({initData:Xe,undoRefresh:()=>{f.value?.()},goForward:()=>{h.value?.()},canGoBack:()=>k.value.recommendationMode==="web"?B.value&&D.value.length>0:k.value.recommendationMode==="app"?B.value&&U.value.length>0:!1,canGoForward:()=>k.value.recommendationMode==="web"?W.value&&O.value.length>0:k.value.recommendationMode==="app"?W.value&&$.value.length>0:!1}),(j,K)=>{const oe=Ge("Button"),he=Ge("Empty");return L(),P("div",null,[w(y)?X("",!0):(L(),_e(rs,{key:0,items:w(b),"grid-layout":j.gridLayout,loading:w(_),"no-more-content":w(S),"need-to-login-first":w(y),"transform-item":ce=>ce.displayData,"get-item-key":(ce,me)=>`${ce.uniqueId}-${me??0}`,"video-type":w(k).recommendationMode==="web"?"rcmd":"appRcmd","show-preview":"","more-btn":"",onRefresh:Xe,onLogin:ve,onLoadMore:Z},null,8,["items","grid-layout","loading","no-more-content","need-to-login-first","transform-item","get-item-key","video-type"])),w(y)?(L(),_e(he,{key:1,"mt-6":"",description:j.$t("common.please_log_in_first")},{default:H(()=>[F(oe,{type:"primary",onClick:K[0]||(K[0]=ce=>ve())},{default:H(()=>[He(G(j.$t("common.login")),1)]),_:1})]),_:1},8,["description"])):X("",!0)])}}}),[["__scopeId","data-v-f272b1ec"]])},Symbol.toStringTag,{value:"Module"}));var Pv=(t=>(t.="",t.="",t.="",t.="",t))(Pv||{});const fae={flex:"~ gap-40px"},hae={"h-inherit":"",p:"x-20px b-20px t-8px","m--20px":"","of-y-auto":"","of-x-hidden":""},pae={"mb-3":""},mae=["placeholder"],gae={key:"all-uploaders"},vae={"flex-1":"","overflow-hidden":""},_ae={"font-medium":"","text-sm":""},bae={key:0,class:"secondary-text"},yae=["onClick"],wae={pos:"relative","shrink-0":""},Eae=["src"],Sae={key:0,pos:"absolute top-0 right-0","w-8px":"","h-8px":"","rounded-full":"",bg:"red-500",border:"2 $bew-elevated"},xae={"flex-1":"","overflow-hidden":""},Tae={"font-medium":"",truncate:"","text-sm":""},Aae={class:"secondary-text"},kae={"w-full":""},KE="bewlycat_moments_viewed_uploaders",YE="bewlycat_uploader_latest_times",Cae=1,Dv="bewlycat_uploader_blacklist",Lae=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Following",props:{gridLayout:{default:"adaptive"},topBarVisibility:{type:Boolean,default:!0}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=t,s=i;St();const{scrollViewportRef:r,handlePageRefresh:o}=$t(),a=z([]),l=z([]),u=z(null),c=z(null),d=z(!1),f=z(0),h=z(0),p=z(!1);Xu("moments-selected-uploader",u);const m=z(!1),g=z(!1),v=z(!1),b=z(!1),_=z(""),y=z(""),E=z(""),S=z(0);Pe(()=>n.topBarVisibility,()=>{b.value=!1,k.value.autoHideTopBar&&k.value.showTopBar&&(n.topBarVisibility?b.value=!1:b.value=!0)});function A(){try{const Y=localStorage.getItem(KE);return Y?JSON.parse(Y):{}}catch{return{}}}function C(Y,ee){const we=Date.now(),ke=4320*60*1e3;return Y>ee&&we-Y<=ke}function T(Y,ee){const we=A(),ke=l.value.find(N=>N.mid===Y),de=ee||ke?.lastUpdateTime||Date.now();we[Y]=de,localStorage.setItem(KE,JSON.stringify(we)),ke&&(ke.hasUpdate=!1),console.log(`[Following] Marked UP ${Y} as viewed at ${new Date(de).toLocaleString()}`)}function I(){try{const Y=localStorage.getItem(YE);if(!Y)return{};const ee=JSON.parse(Y),we=Date.now(),ke=Cae*24*60*60*1e3,de={};for(const[N,J]of Object.entries(ee))we-J.cachedAt<ke&&(de[Number(N)]=J);return de}catch{return{}}}function D(Y,ee){try{const we=I();we[Y]={...we[Y]||{},...ee,cachedAt:Date.now(),lastSyncTime:Date.now()},localStorage.setItem(YE,JSON.stringify(we))}catch(we){console.error("[Following] Failed to cache uploader data:",we)}}function R(Y){if(Y.length<2)return;const ee=[];for(let ke=1;ke<Math.min(Y.length,10);ke++){const de=Y[ke-1]-Y[ke];de>0&&ee.push(de)}if(ee.length===0)return;ee.sort((ke,de)=>ke-de);const we=Math.floor(ee.length/2);return ee.length%2===0?(ee[we-1]+ee[we])/2:ee[we]}function O(Y){return Y<=864e5?36e5:Y<=6048e5?864e5:Y<=2592e6?6048e5:2*6048e5}function M(Y,ee){if(!Y)return!0;if(Y.predictedNextUpdate&&Y.updateInterval){const ke=Y.predictedNextUpdate-ee,de=Y.updateInterval*.2;if(Math.abs(ke)<=de){const N=Y.lastSyncTime||Y.cachedAt;return ee-N>3600*1e3}}if(Y.updateInterval){const ke=O(Y.updateInterval),de=Y.lastSyncTime||Y.cachedAt;return ee-de>ke}const we=Y.lastSyncTime||Y.cachedAt;return ee-we>720*60*1e3}function U(){try{const Y=localStorage.getItem(Dv);return Y?new Set(JSON.parse(Y)):new Set}catch{return new Set}}function $(Y){try{const ee=U();ee.add(Y),localStorage.setItem(Dv,JSON.stringify([...ee])),console.log(`[Following] Added UP ${Y} to blacklist`)}catch(ee){console.error("[Following] Failed to add to blacklist:",ee)}}function B(Y){try{const ee=U();ee.has(Y)&&(ee.delete(Y),localStorage.setItem(Dv,JSON.stringify([...ee])),console.log(`[Following] Removed UP ${Y} from blacklist`))}catch(ee){console.error("[Following] Failed to remove from blacklist:",ee)}}function W(Y){const we=k.value.followingInactiveDays*24*60*60*1e3;return Date.now()-Y.lastUpdateTime>we}function te(Y){return Y.modules?.module_dynamic?.major?.archive?.badge?.text===Pv.}function re(Y){return Y.modules?.module_dynamic?.major?.archive?.badge?.text===Pv.}function q(Y){return!!(k.value.followingFilterChargingVideos&&te(Y)||k.value.followingFilterDynamicVideos&&re(Y))}function le(Y=null){let ee,we=-1;Y!==null&&(we=l.value.findIndex(de=>de.mid===Y),we!==-1&&(ee=l.value[we],l.value.splice(we,1)));const ke=U();l.value.sort((de,N)=>{const J=ke.has(de.mid),fe=ke.has(N.mid);return J!==fe?J?1:-1:N.lastUpdateTime-de.lastUpdateTime}),ee&&we!==-1&&l.value.splice(we,0,ee)}function be(){const Y=A();l.value=l.value.map(ee=>{const we=Y[ee.mid]||0;return{...ee,hasUpdate:C(ee.lastUpdateTime,we)}}),le(null)}const se=ge(()=>l.value.filter(Y=>Y.hasUpdate).length),ne=z(""),pe=ge(()=>{let Y=l.value;if(ne.value.trim()){const ee=ne.value.trim().toLowerCase();Y=Y.filter(we=>we.name.toLowerCase().includes(ee))}return Y}),ye=ge(()=>`following-grid-${u.value??"all"}`);async function xe(){try{const Y=await ze.user.getUserInfo();if(Y.code===0&&Y.data?.mid)return S.value=Y.data.mid,Y.data.mid}catch(Y){console.error("[Following] Failed to get current user info:",Y)}return 0}async function Be(){if(console.log("[Following] Loading all following list..."),!S.value&&!await xe()){v.value=!0;return}try{let Y=1;const ee=50;let we=!0;const ke=A(),de=I();for(;we;){console.log(`[Following] Loading following list page ${Y}...`);const N=await ze.user.getUserFollowings({vmid:S.value.toString(),ps:ee,pn:Y});if(console.log(`[Following] Following list page ${Y} response:`,N.code,"count:",N.data?.list?.length),N.code===-101){v.value=!0;return}if(N.code===0&&N.data?.list){const J=N.data.list,fe=J.map(Ae=>{const De=de[Ae.mid],Ve=De?De.time:Ae.mtime*1e3,tt=ke[Ae.mid]||0;return{mid:Ae.mid,name:Ae.uname,face:Ae.face,hasUpdate:C(Ve,tt),lastUpdateTime:Ve}});l.value=[...l.value,...fe],be(),console.log(`[Following] Page ${Y} loaded. Current total:`,l.value.length);const Ee=N.data.total;l.value.length>=Ee||J.length<ee?(we=!1,console.log("[Following] All followings loaded. Total:",l.value.length)):Y++}else we=!1,console.log("[Following] API returned error code:",N.code)}l.value.length>0&&(console.log("[Following] Successfully loaded",l.value.length,"followings"),console.log("[Following] Loaded from cache:",Object.keys(de).length,"uploader times"),Ke(!1))}catch(Y){console.error("[Following] Failed to load following list:",Y)}}async function Ke(Y=!1){if(d.value)return;d.value=!0,f.value=0;const ee=2e3+Math.random()*1e3;console.log(`[Following] Will start smart sync in ${Math.round(ee/1e3)}s...`),await new Promise(Fe=>setTimeout(Fe,ee)),console.log("[Following] Starting smart background sync...");const we=I(),ke=U(),de=Date.now(),N=[];u.value!==null&&!ke.has(u.value)&&N.push({mid:u.value,priority:1e3,reason:"selected"});for(const Fe of l.value){if(Fe.mid===u.value||ke.has(Fe.mid))continue;const je=we[Fe.mid];if(Y){N.push({mid:Fe.mid,priority:500,reason:"user-triggered"});continue}if(!M(je,de))continue;let et=100,mt="need-sync";if(!je)et=800,mt="no-cache";else if(je.predictedNextUpdate&&je.updateInterval){const At=je.predictedNextUpdate-de,ln=je.updateInterval*.2;Math.abs(At)<=ln&&(et=900,mt="prediction-window")}N.push({mid:Fe.mid,priority:et,reason:mt})}N.sort((Fe,je)=>je.priority-Fe.priority),console.log(`[Following] Smart sync queue: ${N.length} uploaders`,{selected:N.filter(Fe=>Fe.reason==="selected").length,predictionWindow:N.filter(Fe=>Fe.reason==="prediction-window").length,noCache:N.filter(Fe=>Fe.reason==="no-cache").length,needSync:N.filter(Fe=>Fe.reason==="need-sync").length,userTriggered:N.filter(Fe=>Fe.reason==="user-triggered").length});const J=2,fe=1200,Ee=2e3;let Ae=0,De=0;const Ve=()=>{const Fe=fe+Math.random()*(Ee-fe);return new Promise(je=>setTimeout(je,Fe))};await(async()=>{for(;De<N.length;){for(;Ae>=J;)await new Promise(je=>setTimeout(je,100));const Fe=N[De++];Ae++,Xe(Fe.mid).finally(()=>{Ae--}),await Ve()}for(;Ae>0;)await new Promise(Fe=>setTimeout(Fe,100))})(),le(u.value),d.value=!1,console.log("[Following] Finished loading all uploader times")}async function Xe(Y,ee=0){try{const ke=await ze.moment.getUserMoments({host_mid:Y.toString(),offset:"",features:"itemOpusStyle"});if(ke.code===0&&ke.data.items){const de=[];for(const N of ke.data.items)if(N.modules?.module_dynamic?.major?.archive&&N.modules?.module_author?.pub_ts&&(de.push({item:N,time:N.modules.module_author.pub_ts*1e3}),de.length>=10))break;if(de.length>0){const N=l.value.find(J=>J.mid===Y);if(N){const J=de.map(De=>De.time),fe=de.length===1?de[0].time:Math.max(de[0].time,de[1].time),Ae=I()[Y]?.time||0;if(fe>=Ae){N.lastUpdateTime=fe,f.value++;const De=R(J),Ve=De?fe+De:void 0;D(Y,{time:fe,updateInterval:De,predictedNextUpdate:Ve});const Fe=A()[Y]||0;N.hasUpdate=C(N.lastUpdateTime,Fe),console.log(`[Following] Updated time for UP ${Y} (${f.value}/${l.value.length})${De?`, interval: ${Math.round(De/(1440*60*1e3))}d`:""}`),W(N)&&$(Y),le(u.value)}else console.log(`[Following] Skipped updating UP ${Y}: cached time is newer (cached: ${new Date(Ae).toLocaleString()}, fetched: ${new Date(fe).toLocaleString()})`)}}else l.value.find(J=>J.mid===Y)&&($(Y),console.log(`[Following] No video data for UP ${Y}, added to blacklist`))}else ke.code!==0&&console.log(`[Following] API error (code ${ke.code}) for UP ${Y}, keeping cached data`)}catch(ke){if((ke instanceof Error?ke.message:String(ke)).includes("")&&ee<2){const N=(ee+1)*3e3;return console.warn(`[Following] Rate limited for UP ${Y}, retrying in ${N/1e3}s... (${ee+1}/2)`),await new Promise(J=>setTimeout(J,N)),Xe(Y,ee+1)}console.error(`[Following] Failed to load time for UP ${Y}:`,ke,"- keeping cached data")}}const Re=/|||||/;function Z(Y){if(Number(Y.live_status)!==1)return!1;const we=(Y.text_small??"").trim();return!(we&&Re.test(we))}async function ae(){if(!k.value.followingTabShowLivestreamingVideos)return[];try{console.log("[Following] Loading following live list...");const Y=await ze.live.getFollowingLiveList({page:1,page_size:30});if(Y.code===0&&Y.data.list){const ee=Y.data.list.filter(we=>Z(we)).map(we=>({uniqueId:`live-${we.roomid}`,liveItem:we,displayData:j(we),isLive:!0}));return console.log(`[Following] Loaded ${ee.length} live streams (filtered from ${Y.data.list.length} total)`),ee}}catch(Y){console.error("[Following] Failed to load live list:",Y)}return[]}async function ie(Y=3,ee){console.log("[Following] Loading ALL view videos (max",Y,"pages)..."),s("beforeLoading"),m.value=!0;const we=new Map;try{if(!_.value&&!p.value&&k.value.followingTabShowLivestreamingVideos){const Ee=await ae();Ee.length>0&&(a.value=[...Ee,...a.value]),p.value=!0}let ke=_.value||void 0,de=0;for(;de<Y;){de++,console.log(`[Following] Loading ALL view page ${de}...`);const Ee=await ze.moment.getMoments({type:"video",offset:ke,update_baseline:y.value||void 0});if(ee!==void 0&&ee!==h.value){console.log("[Following] Selection changed during load, aborting...");return}if(Ee.code===-101){v.value=!0,console.log("[Following] Need to login first");return}if(Ee.code===0){const Ae=Ee.data.offset;if(y.value=Ee.data.update_baseline,!Ee.data.items||Ee.data.items.length===0){g.value=!0,console.log("[Following] No items returned in ALL view");break}if(Ae==="0"||Ae===ke){g.value=!0,console.log("[Following] No more content in ALL view");break}else ke=Ae,_.value=Ae;Ee.data.items.forEach(De=>{if(q(De))return;const Ve=[];De.modules?.module_dynamic?.major?.archive?.stat?.coop_num?De.modules.module_dynamic.major.archive.coop_info?.forEach(Fe=>{Ve.push({name:Fe.name,authorFace:Fe.face,mid:Fe.mid})}):Ve.push({name:De.modules?.module_author?.name,authorFace:De.modules?.module_author?.face,mid:De.modules?.module_author?.mid});const tt=De.modules?.module_author?.pub_ts;if(tt){const Fe=tt*1e3;Ve.forEach(je=>{if(je.mid){const et=we.get(je.mid)||0;Fe>et&&we.set(je.mid,Fe)}})}a.value.push({uniqueId:`following-all-${De.id_str}`,bvid:De.modules?.module_dynamic?.major?.archive?.bvid,item:De,authorList:Ve,displayData:K(De,Ve)})}),console.log(`[Following] ALL view page ${de} loaded. Total videos:`,a.value.length)}else{console.error("[Following] API returned error code:",Ee.code),g.value=!0;break}}if(console.log("[Following] ALL view loading complete. Total:",a.value.length,"videos"),ee!==void 0&&ee!==h.value){console.log("[Following] Selection changed during cache update, aborting...");return}let N=0,J=0,fe=0;we.forEach((Ee,Ae)=>{const De=l.value.find(Ve=>Ve.mid===Ae);if(De){const tt=I()[Ae]?.time||0;Ee>tt&&(De.lastUpdateTime=Ee,D(Ae,{time:Ee,lastViewedTime:Date.now()}),N++,console.log(`[Following] Updated cache for UP ${Ae} from ALL view: ${new Date(Ee).toLocaleString()}`));const je=A()[Ae]||0;Ee>=De.lastUpdateTime&&Ee>je?(T(Ae,Ee),fe++):De.hasUpdate=C(De.lastUpdateTime,je),U().has(Ae)&&(B(Ae),J++)}}),N>0&&console.log(`[Following] Updated ${N} uploader times from ALL view`),fe>0&&console.log(`[Following] Marked ${fe} uploaders as viewed from ALL view`),J>0&&console.log(`[Following] Removed ${J} uploaders from blacklist (found in ALL view)`),(N>0||J>0||fe>0)&&(d.value||le(u.value)),a.value.length===0&&(g.value=!0)}catch(ke){console.error("[Following] Failed to load ALL view:",ke),g.value=!0}finally{(ee===void 0||ee===h.value)&&(m.value=!1,s("afterLoading"))}}async function ue(Y,ee=3,we){console.log("[Following] Loading moments for UP",Y,"(max",ee,"pages)..."),s("beforeLoading"),m.value=!0;const ke=[];try{let de=E.value||void 0,N=0;for(;N<ee;){N++,console.log(`[Following] Loading user moments page ${N}...`);const J=await ze.moment.getUserMoments({host_mid:Y.toString(),offset:de,features:"itemOpusStyle"});if(we!==void 0&&we!==h.value){console.log("[Following] Selection changed during load, aborting...");return}if(console.log("[Following] API Response:",J),J.code===-101){v.value=!0,console.log("[Following] Need to login first");return}if(J.code===0){const fe=J.data.offset;if(fe==="0"||fe===de||!J.data.items||J.data.items.length===0){g.value=!0,console.log("[Following] No more content for this UP");break}else de=fe,E.value=fe;const Ee=[];J.data.items.forEach(Ae=>{if(!Ae.modules?.module_dynamic?.major?.archive||q(Ae))return;const De=[];Ae.modules?.module_dynamic?.major?.archive?.stat?.coop_num?Ae.modules.module_dynamic.major.archive.coop_info?.forEach(tt=>{De.push({name:tt.name,authorFace:tt.face,mid:tt.mid})}):De.push({name:Ae.modules?.module_author?.name,authorFace:Ae.modules?.module_author?.face,mid:Ae.modules?.module_author?.mid});const Ve=K(Ae,De);if(Ve){const tt=Ae.modules.module_author.pub_ts*1e3;a.value.push({uniqueId:`user-moment-${Ae.id_str}`,bvid:Ae.modules?.module_dynamic?.major?.archive?.bvid,item:Ae,authorList:De,displayData:Ve}),Ee.push({item:Ae,time:tt}),ke.push(tt)}}),console.log(`[Following] User moments page ${N} loaded. Total:`,a.value.length)}else{console.error("[Following] API returned error code:",J.code),g.value=!0;break}}if(ke.length>0){if(we!==void 0&&we!==h.value){console.log("[Following] Selection changed during cache update, aborting...");return}const J=l.value.find(fe=>fe.mid===Y);if(J){ke.sort((De,Ve)=>Ve-De);const fe=ke.length===1?ke[0]:Math.max(ke[0],ke[1]);J.lastUpdateTime=fe;const Ee=R(ke),Ae=Ee?fe+Ee:void 0;D(Y,{time:fe,updateInterval:Ee,predictedNextUpdate:Ae,lastViewedTime:Date.now()}),T(Y,fe),console.log(`[Following] Updated data for UP ${Y}: time=${new Date(fe).toLocaleString()}${Ee?`, interval=${Math.round(Ee/(1440*60*1e3))}d`:""}`)}}console.log("[Following] User moments loading complete. Total:",a.value.length,"videos"),a.value.length===0&&(g.value=!0)}catch(de){console.error("[Following] Failed to load user moments:",de),g.value=!0}finally{(we===void 0||we===h.value)&&(m.value=!1,s("afterLoading"))}}function ve(Y){console.log("[Following] Selecting uploader:",Y===null?"All":Y);const ee=++h.value,we=r.value;if(we){const ke=k.value.useSearchPageModeOnHomePage?510:0;we.scrollTop=ke}if(a.value=[],g.value=!1,Y===null)console.log("[Following] Switching to All view"),c.value!==null&&le(null),u.value=null,c.value=null,_.value="",y.value="",p.value=!1,ie(3,ee);else{console.log("[Following] Selecting uploader:",Y),T(Y),U().has(Y)&&B(Y),c.value!==null&&c.value!==Y&&le(Y),u.value=Y,c.value=Y,E.value="";const de=l.value.find(N=>N.mid===Y);de&&de.lastUpdateTime&&de.lastUpdateTime<Date.now()-365*24*60*60*1e3&&Xe(Y),ue(Y,3,ee)}}function j(Y){return{id:Y.roomid,title:Tt(Y.title),cover:Y.room_cover,author:{name:Tt(Y.uname),authorFace:Y.face,mid:Y.uid},viewStr:Y.text_small,tag:Tt(Y.area_name_v2),roomid:Y.roomid,liveStatus:Y.live_status,threePointV2:[]}}function K(Y,ee){if(!Y)return;const we=Y.modules?.module_dynamic?.major?.archive;if(!we)return;const ke=we.stat,de=Y.modules?.module_stat?.like?.count,N=ee?.map(De=>({...De,name:Tt(De.name)})),J=N&&N.length>0?N.length===1?N[0]:N:void 0,fe=ee&&ee.length>1,Ee=we.badge?.text&&we.badge.text!==""?{bgColor:we.badge.bg_color,color:we.badge.color,iconUrl:we.badge.icon_url||void 0,text:Tt(we.badge.text)}:void 0,Ae=Number.parseInt(we.aid,10);return{id:Number.isNaN(Ae)?0:Ae,durationStr:we.duration_text,title:Tt(we.title),desc:Tt(we.desc),cover:we.cover,author:J,view:Fs(ke?.play),viewStr:ke?.play,danmaku:Fs(ke?.danmaku),danmakuStr:ke?.danmaku,like:typeof de=="number"?de:Fs(ke?.like),likeStr:ke?.like_str??ke?.like,capsuleText:Tt(Y.modules?.module_author?.pub_time?.trim()||void 0),publishedTimestamp:Y.modules?.module_author?.pub_ts,bvid:we.bvid,badge:Ee,tag:fe?"":void 0,threePointV2:[]}}function oe(Y){return Y.displayData}async function he(){m.value||g.value||(console.log("[Following] Loading more..."),u.value===null?await ie(1,h.value):await ue(u.value,1,h.value))}function ce(){console.log("[Following] Initializing..."),h.value++;const Y=u.value;a.value=[],_.value="",y.value="",E.value="",g.value=!1,v.value=!1,p.value=!1,Y!==null?(console.log("[Following] Refreshing moments for UP",Y),ue(Y,3,h.value)):l.value.length===0?(m.value=!0,s("beforeLoading"),Be().then(()=>{console.log("[Following] Following list loaded"),ve(null)}).catch(ee=>{console.error("[Following] Failed to initialize:",ee),m.value=!1,s("afterLoading")})):(console.log("[Following] Refreshing ALL view"),ie(3,h.value))}function me(){location.href="https://passport.bilibili.com/login"}st(()=>{ce(),ot(()=>{Q()})}),fs(()=>{Q()});function Q(){o.value=async()=>{m.value||ce()}}return e({initData:ce}),(Y,ee)=>(L(),P("div",fae,[x("aside",{pos:"sticky top-150px",h:"[calc(100vh-140px)]","w-200px":"","shrink-0":"","duration-300":"","ease-in-out":"",class:Ie({hide:w(b)})},[x("div",hae,[x("div",pae,[Bt(x("input",{"onUpdate:modelValue":ee[0]||(ee[0]=we=>kt(ne)?ne.value=we:null),type:"text",placeholder:Y.$t("common.search"),"px-4":"","py-2":"","w-full":"","rounded-lg":"",bg:"$bew-fill-1",border:"1 $bew-border-color",text:"sm $bew-text-1","outline-none":"",transition:"all 300","focus:border":"$bew-theme-color","focus:bg":"$bew-fill-2","placeholder:text":"$bew-text-3"},null,8,mae),[[qs,w(ne)]])]),F(so,{name:"list",tag:"ul",flex:"~ col gap-2"},{default:H(()=>[x("li",gae,[x("a",{class:Ie({active:w(u)===null}),"px-4":"","py-2":"","hover:bg":"$bew-fill-2","w-inherit":"",block:"","rounded-lg":"","cursor-pointer":"",transition:"all 300 ease-out","hover:scale-105":"","un-text":"$bew-text-1",flex:"~ items-center gap-3",onClick:ee[1]||(ee[1]=we=>ve(null))},[ee[2]||(ee[2]=x("div",{"w-30px":"","h-30px":"","rounded-full":"",bg:"$bew-fill-2",flex:"~ items-center justify-center","shrink-0":""},[x("div",{"i-mingcute:classify-2-fill":"","text-lg":""})],-1)),x("div",vae,[x("div",_ae,G(Y.$t("topbar.moments_dropdown.tabs.all")),1),w(se)>0?(L(),P("div",bae,G(Y.$t("home.uploaders_with_updates",{count:w(se)})),1)):X("",!0)])],2)]),(L(!0),P(Te,null,Ne(w(pe),we=>(L(),P("li",{key:we.mid},[x("a",{class:Ie({active:w(u)===we.mid}),"px-4":"","py-2":"","hover:bg":"$bew-fill-2","w-inherit":"",block:"","rounded-lg":"","cursor-pointer":"",transition:"all 300 ease-out","hover:scale-105":"","un-text":"$bew-text-1",flex:"~ items-center gap-3",onClick:ke=>ve(we.mid)},[x("div",wae,[x("img",{src:`${we.face}@50w_50h`,"w-30px":"","h-30px":"","rounded-full":"","object-cover":"",loading:"lazy",alt:"Avatar"},null,8,Eae),we.hasUpdate?(L(),P("div",Sae)):X("",!0)]),x("div",xae,[x("div",Tae,G(we.name),1),x("div",Aae,G(w(_c)(we.lastUpdateTime)),1)])],10,yae)]))),128))]),_:1})])],2),x("div",kae,[(L(),_e(rs,{key:w(ye),items:w(a),"grid-layout":Y.gridLayout,loading:w(m),"no-more-content":w(g),"need-to-login-first":w(v),"transform-item":oe,"get-item-key":we=>we.uniqueId,"show-watcher-later":!1,"is-following-page":"","show-preview":"",onRefresh:ce,onLogin:me,onLoadMore:he},null,8,["items","grid-layout","loading","no-more-content","need-to-login-first","get-item-key"]))])]))}}),[["__scopeId","data-v-26841f56"]])},Symbol.toStringTag,{value:"Module"})),Iae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"FollowingOld",props:{gridLayout:{}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,s=z([]),r=z(1),o=z([]),a=z(!1),l=z(!1),u=z(0),c=z(!0),d=z(""),f=z(""),h=z(!1),p=z(!1),{handlePageRefresh:m}=$t(),g=ge(()=>k.value.followingTabShowLivestreamingVideos?[...o.value,...s.value]:s.value),v=/|||||/;function b(M){if(Number(M.live_status)!==1)return!1;const $=(M.text_small??"").trim();return!($&&v.test($))}async function _(){const M=c.value;c.value=!document.hidden,!M&&c.value&&!h.value&&!a.value&&s.value.length<30&&setTimeout(()=>{c.value&&!a.value&&!h.value&&T()},200)}st(()=>{E(),ot(()=>{y()}),document.addEventListener("visibilitychange",_),c.value=!document.hidden}),ki(()=>{document.removeEventListener("visibilitychange",_)}),fs(()=>{y(),c.value=!document.hidden}),Gu(()=>{c.value=!1});function y(){m.value=async()=>{a.value||E()}}async function E(){p.value=!1,d.value="",f.value="",o.value=[],r.value=1,s.value=[],h.value=!1,u.value=0,k.value.followingTabShowLivestreamingVideos&&A(),await S(),p.value=!0}async function S(){n("beforeLoading"),a.value=!0;try{await C()}finally{a.value=!1,n("afterLoading")}}async function A(){if(!c.value)return;const M=o.value.length;try{const U=await ze.live.getFollowingLiveList({page:r.value,page_size:9});if(U.code===-101){h.value=!0,l.value=!0;return}if(U.code===0){U.data.list.length<9&&(h.value=!0),r.value++;const $=[];U.data.list.forEach(B=>{b(B)&&$.push(B)}),o.value.length?$.forEach((B,W)=>{o.value[M+W]={uniqueId:`${B.roomid}`,item:B,displayData:D(B)}}):o.value=$.map(B=>({uniqueId:`${B.roomid}`,item:B,displayData:D(B)}))}else U.code===-101&&(l.value=!0)}catch{}}async function C(){if(!h.value){if(d.value==="0"){h.value=!0;return}if(c.value){if(u.value>=10){h.value=!0;return}u.value++;try{const M=s.value.length,U=await ze.moment.getMoments({type:"video",offset:d.value||void 0,update_baseline:f.value});if(U.code===-101){h.value=!0,l.value=!0;return}if(U.code===0){d.value=U.data.offset,f.value=U.data.update_baseline;const $=[];U.data.items.forEach(B=>{const W=[];B.modules?.module_dynamic?.major?.archive?.stat?.coop_num?B.modules.module_dynamic.major.archive.coop_info?.forEach(te=>{W.push({name:te.name,authorFace:te.face,mid:te.mid})}):W.push({name:B.modules?.module_author?.name,authorFace:B.modules?.module_author?.face,mid:B.modules?.module_author?.mid}),$.push({uniqueId:`${B.id_str}`,bvid:B.modules?.module_dynamic?.major?.archive?.bvid,item:B,authorList:W})}),s.value.length?$.forEach((B,W)=>{s.value[M+W]={...B,displayData:R(B.item,B.authorList)}}):s.value=$.map(B=>({...B,displayData:R(B.item,B.authorList)})),M===0&&s.value.length<30&&!h.value&&await C()}else U.code===-101&&(l.value=!0)}finally{u.value--}}}}async function T(){if(!(a.value||h.value)){a.value=!0;try{await C()}finally{a.value=!1}}}function I(){location.href="https://passport.bilibili.com/login"}function D(M){if(!M)return;const U=M.area_name_v2?.trim()||M.area_name?.trim()||void 0;return{id:M.roomid,title:Tt(M.title),cover:M.room_cover,author:{name:Tt(M.uname),authorFace:M.face,mid:M.uid},view:Fs(M.text_small),viewStr:M.text_small,tag:Tt(U),roomid:M.roomid,liveStatus:M.live_status,threePointV2:[]}}function R(M,U){if(!M)return;const $=M.modules?.module_dynamic?.major?.archive;if(!$)return;const B=$.stat,W=M.modules?.module_stat?.like?.count,te=U?.map(se=>({...se,name:Tt(se.name)})),re=te&&te.length>0?te.length===1?te[0]:te:void 0,q=U&&U.length>1,le=$.badge?.text&&$.badge.text!==""?{bgColor:$.badge.bg_color,color:$.badge.color,iconUrl:$.badge.icon_url||void 0,text:Tt($.badge.text)}:void 0,be=Number.parseInt($.aid,10);return{id:Number.isNaN(be)?0:be,durationStr:$.duration_text,title:Tt($.title),desc:Tt($.desc),cover:$.cover,author:re,view:Fs(B?.play),viewStr:B?.play,danmaku:Fs(B?.danmaku),danmakuStr:B?.danmaku,like:typeof W=="number"?W:Fs(B?.like),likeStr:B?.like_str??B?.like,capsuleText:Tt(M.modules?.module_author?.pub_time?.trim()||void 0),publishedTimestamp:M.modules?.module_author?.pub_ts,bvid:$.bvid,badge:le,tag:q?"":void 0,threePointV2:[]}}function O(M){if(M.item)return"roomid"in M.item,M.displayData}return e({initData:E}),(M,U)=>(L(),P("div",null,[F(rs,{items:w(g),"grid-layout":M.gridLayout,loading:w(a),"no-more-content":w(h),"need-to-login-first":w(l),"transform-item":O,"get-item-key":$=>$.uniqueId,"show-watcher-later":!1,"is-following-page":"","show-preview":"",onRefresh:E,onLogin:I,onLoadMore:T},null,8,["items","grid-layout","loading","no-more-content","need-to-login-first","get-item-key"])]))}})},Symbol.toStringTag,{value:"Module"})),Rae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"SubscribedSeries",props:{gridLayout:{}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,s=z([]),r=z(!1),o=z(!1),a=z(""),l=z(""),u=z(!1),c=z(!1),{handleReachBottom:d,handlePageRefresh:f}=$t();st(()=>{h(),g()}),fs(()=>{g()});async function h(){a.value="",l.value="",s.value=[],u.value=!1,c.value=!1,await m()}function p(y){if(!y.item)return;const E=y.item;return{id:E.modules.module_author.mid,title:Tt(`${E.modules.module_dynamic.major.pgc?.title}`),cover:`${E.modules.module_dynamic.major.pgc?.cover}`,author:{name:Tt(E.modules.module_author.name),authorUrl:E.modules.module_author.jump_url,authorFace:E.modules.module_author.face,mid:E.modules.module_author.mid},viewStr:E.modules.module_dynamic.major.pgc?.stat.play,danmakuStr:E.modules.module_dynamic.major.pgc?.stat.danmaku,likeStr:E.modules.module_dynamic.major.pgc?.stat.like,capsuleText:Tt(E.modules.module_author.pub_time),epid:E.modules.module_dynamic.major.pgc?.epid,threePointV2:[]}}async function m(){n("beforeLoading"),r.value=!0;try{for(let y=0;y<3&&!u.value;y++)await v()}finally{r.value=!1,n("afterLoading")}}function g(){d.value=async()=>{if(!r.value){if(u.value){c.value=!0;return}b()}},f.value=async()=>{r.value||h()}}async function v(){if(!u.value){if(a.value==="0"){u.value=!0;return}try{const y=await ze.moment.getMoments({type:"pgc",offset:a.value||void 0,update_baseline:l.value});if(y.code===-101){u.value=!0,o.value=!0;return}if(y.code===0){a.value=y.data.offset,l.value=y.data.update_baseline;const E=y.data.items.map(S=>({uniqueId:`${S.id_str}`,item:S,displayData:p({uniqueId:`${S.id_str}`,item:S})}));s.value=[...s.value,...E]}else y.code===-101&&(o.value=!0)}catch{}}}async function b(){if(!(r.value||u.value)){r.value=!0;try{await v()}finally{r.value=!1}}}function _(){location.href="https://passport.bilibili.com/login"}return e({initData:h}),(y,E)=>(L(),P("div",null,[F(rs,{items:w(s),"grid-layout":y.gridLayout,loading:w(r),"no-more-content":w(c),"need-to-login-first":w(o),"transform-item":S=>S.displayData,"get-item-key":S=>S.uniqueId,"video-type":"bangumi","show-watcher-later":!1,onRefresh:h,onLogin:_,onLoadMore:b},null,8,["items","grid-layout","loading","no-more-content","need-to-login-first","transform-item","get-item-key"])]))}})},Symbol.toStringTag,{value:"Module"})),Pae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Trending",props:{gridLayout:{}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,s=z([]),r=z(!1),o=z(1),a=z(!1),{handleReachBottom:l,handlePageRefresh:u}=$t();st(()=>{c(),h()}),fs(()=>{h()});async function c(){a.value=!1,s.value=[],o.value=1,await f()}function d(g){if(!g.item)return;const v=g.item;return{id:Number(v.aid),duration:v.duration,title:Tt(v.title),desc:Tt(v.desc),cover:v.pic,author:{name:Tt(v.owner.name),authorFace:v.owner.face,mid:v.owner.mid},view:typeof v.stat.view=="number"?v.stat.view:Number(v.stat.view),danmaku:typeof v.stat.danmaku=="number"?v.stat.danmaku:Number(v.stat.danmaku),like:typeof v.stat.like=="number"?v.stat.like:Number(v.stat.like),likeStr:v.stat?.like_str??v.stat.like,publishedTimestamp:v.pubdate,bvid:v.bvid,tag:Tt(v.rcmd_reason.content),cid:v.cid,threePointV2:[]}}async function f(){n("beforeLoading"),r.value=!0;try{await p()}finally{r.value=!1,n("afterLoading")}}function h(){l.value=async()=>{!r.value&&!a.value&&m()},u.value=async()=>{c()}}async function p(){if(!a.value)try{const g=await ze.video.getPopularVideos({pn:o.value++,ps:30});if(g.code===0){a.value=g.data.no_more;const v=g.data.list.map(b=>({uniqueId:`${b.aid}`,item:b,displayData:d({uniqueId:`${b.aid}`,item:b})}));s.value=[...s.value,...v],s.value.length<30&&!a.value&&await p()}}catch{}}async function m(){if(!(r.value||a.value)){r.value=!0;try{await p()}finally{r.value=!1}}}return e({initData:c}),(g,v)=>(L(),_e(rs,{items:w(s),"grid-layout":g.gridLayout,loading:w(r),"no-more-content":w(a),"transform-item":b=>b.displayData,"get-item-key":b=>b.uniqueId,"show-preview":"",onRefresh:c,onLoadMore:m},null,8,["items","grid-layout","loading","no-more-content","transform-item","get-item-key"]))}})},Symbol.toStringTag,{value:"Module"})),Dae={flex:"~ gap-40px"},Oae={"h-inherit":"","p-20px":"","m--20px":"","of-y-auto":"","of-x-hidden":""},Mae={flex:"~ col gap-2"},$ae=["onClick"],Fae={"w-full":""},Bae=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Ranking",props:{gridLayout:{},topBarVisibility:{type:Boolean}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=t,s=i,{t:r}=St(),{handleBackToTop:o,handlePageRefresh:a}=$t(),l=ge(()=>[{id:1,name:r("ranking.all"),rid:0},{id:2,name:r("topbar.logo_dropdown.anime"),seasonType:1},{id:3,name:r("topbar.logo_dropdown.chinese_anime"),seasonType:4},{id:5,name:r("topbar.logo_dropdown.documentary_films"),seasonType:3},{id:6,name:r("topbar.logo_dropdown.animations"),rid:1005},{id:7,name:r("topbar.logo_dropdown.music"),rid:1003},{id:8,name:r("topbar.logo_dropdown.dance"),rid:1004},{id:9,name:r("topbar.logo_dropdown.gaming"),rid:1008},{id:10,name:r("topbar.logo_dropdown.knowledge"),rid:1010},{id:11,name:r("topbar.logo_dropdown.technology"),rid:1012},{id:12,name:r("topbar.logo_dropdown.sports"),rid:1018},{id:13,name:r("topbar.logo_dropdown.cars"),rid:1013},{id:15,name:r("topbar.logo_dropdown.foods"),rid:1020},{id:16,name:r("topbar.logo_dropdown.animals"),rid:1024},{id:17,name:r("topbar.logo_dropdown.kichiku"),rid:1007},{id:18,name:r("topbar.logo_dropdown.fashion"),rid:1014},{id:19,name:r("topbar.logo_dropdown.showbiz"),rid:1002},{id:20,name:r("topbar.logo_dropdown.cinephile"),rid:1001},{id:21,name:r("topbar.logo_dropdown.movies"),seasonType:2},{id:22,name:r("topbar.logo_dropdown.tv_shows"),seasonType:5},{id:23,name:r("topbar.logo_dropdown.variety_shows"),seasonType:7},{id:24,name:r("ranking.original_content"),rid:0,type:"origin"},{id:25,name:r("ranking.debut_work"),rid:0,type:"rookie"}]),u=z(!1),c=z({...l.value[0]}),d=Mt([]),f=Mt([]),h=z(!1),p=z(!0);function m(E,S){return{id:Number(E.aid),duration:E.duration,title:Tt(E.title),desc:Tt(E.desc),cover:E.pic,author:{name:Tt(E.owner.name),authorFace:E.owner.face,mid:E.owner.mid},view:E.stat.view,danmaku:E.stat.danmaku,like:E.stat.like,likeStr:E.stat?.like_str??E.stat.like,publishedTimestamp:E.pubdate,bvid:E.bvid,rank:S,cid:E.cid,threePointV2:[]}}Pe(()=>c.value.id,()=>{o(k.value.useSearchPageModeOnHomePage?510:0),v()}),Pe(()=>n.topBarVisibility,()=>{h.value=!1,k.value.autoHideTopBar&&k.value.showTopBar&&(n.topBarVisibility?h.value=!1:h.value=!0)}),st(()=>{v(),g()}),fs(()=>{g()});function g(){a.value=async()=>{u.value||v()}}function v(){d.length=0,f.length=0,b()}function b(){"seasonType"in c.value?y():_()}function _(){d.length=0,s("beforeLoading"),u.value=!0,ze.ranking.getRankingVideos({rid:c.value.rid,type:"type"in c.value?c.value.type:"all"}).then(E=>{if(E.code===0){const{list:S}=E.data,A=S.map((C,T)=>({...C,displayData:m(C,T+1)}));Object.assign(d,A)}}).finally(()=>{u.value=!1,s("afterLoading")})}function y(){f.length=0,u.value=!0,ze.ranking.getRankingPgc({season_type:c.value.seasonType}).then(E=>{E.code===0&&Object.assign(f,E.data.list)}).finally(()=>u.value=!1)}return e({initData:v}),(E,S)=>{const A=Ge("BangumiCard"),C=Ge("BangumiCardSkeleton");return L(),P("div",Dae,[x("aside",{pos:"sticky top-150px",h:"[calc(100vh-140px)]","w-200px":"","shrink-0":"","duration-300":"","ease-in-out":"",class:Ie({hide:w(h)})},[x("div",Oae,[x("ul",Mae,[(L(!0),P(Te,null,Ne(w(l),T=>(L(),P("li",{key:T.id},[x("a",{class:Ie({active:w(c).id===T.id}),"px-4":"","lh-30px":"","h-30px":"","hover:bg":"$bew-fill-2","w-inherit":"",block:"",rounded:"$bew-radius","cursor-pointer":"",transition:"all 300 ease-out","hover:scale-105":"","un-text":"$bew-text-1",onClick:I=>c.value=T},G(T.name),11,$ae)]))),128))])])],2),x("div",Fae,["seasonType"in w(c)?(L(),P("div",{key:1,class:Ie({"grid-adaptive-bangumi":E.gridLayout==="adaptive","grid-two-columns":E.gridLayout==="twoColumns","grid-one-column":E.gridLayout==="oneColumn"})},[(L(!0),P(Te,null,Ne(w(f),T=>(L(),_e(A,{key:T.url,bangumi:{url:T.url,cover:T.cover,title:T.title,desc:T.new_ep.index_show,view:T.stat.view,follow:T.stat.follow,rank:T.rank,capsuleText:T.rating.replace("",""),badge:{text:T.badge_info.text||"",bgColor:T.badge_info.bg_color||"",bgColorDark:T.badge_info.bg_color_night||""}},horizontal:E.gridLayout!=="adaptive"},null,8,["bangumi","horizontal"]))),128)),w(u)?(L(),P(Te,{key:0},Ne(30,T=>F(C,{key:T,horizontal:E.gridLayout!=="adaptive"},null,8,["horizontal"])),64)):X("",!0)],2)):(L(),_e(rs,{key:0,items:w(d),"grid-layout":E.gridLayout,loading:w(u),"no-more-content":w(p),"transform-item":T=>T.displayData,"get-item-key":T=>T.aid,"show-preview":"",onRefresh:v,onLoadMore:()=>{}},null,8,["items","grid-layout","loading","no-more-content","transform-item","get-item-key"]))])])}}}),[["__scopeId","data-v-e93bdeff"]])},Symbol.toStringTag,{value:"Module"})),Nae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Precious",props:{gridLayout:{}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,s=z([]),r=z(!1),o=z(!0),{handlePageRefresh:a}=$t();st(()=>{l(),c()}),fs(()=>{c()});async function l(){s.value=[],await u()}async function u(){n("beforeLoading"),r.value=!0;try{await f()}finally{r.value=!1,n("afterLoading")}}function c(){a.value=async()=>{l()}}function d(h){return{id:Number(h.aid),duration:h.duration,title:Tt(h.title),desc:Tt(h.desc),cover:h.pic,author:h.owner?{name:Tt(h.owner.name),authorFace:h.owner.face,mid:h.owner.mid}:void 0,view:h.stat?.view,danmaku:h.stat?.danmaku,like:h.stat?.like,likeStr:h.stat?.like_str??h.stat?.like,publishedTimestamp:h.pubdate,bvid:h.bvid,cid:h.cid,threePointV2:[]}}async function f(){try{const h=await ze.ranking.getPreciousVideos();if(h.code===0){const p=Array.isArray(h.data?.list)?h.data.list:[];s.value=p.map(m=>({uniqueId:`${m.aid}`,item:m,displayData:d(m)}))}}finally{s.value=s.value.filter(h=>h.item)}}return e({initData:l}),(h,p)=>(L(),P("div",null,[F(rs,{items:w(s),"grid-layout":h.gridLayout,loading:w(r),"no-more-content":w(o),"transform-item":m=>m.displayData,"get-item-key":m=>m.uniqueId,"is-skeleton-item":m=>!m.item,"show-preview":"",onRefresh:l,onLoadMore:()=>{}},null,8,["items","grid-layout","loading","no-more-content","transform-item","get-item-key","is-skeleton-item"])]))}})},Symbol.toStringTag,{value:"Module"})),Uae={flex:"~ col","w-full":""},Vae=["ring"],jae={key:0,truncate:"","mr-2":""},Hae={key:1,text:"$bew-text-3",truncate:"","mr-2":""},zae=["border-color","transform"],Gae={"p-3":"","border-b":"1px solid $bew-border-color"},Wae={"of-y-auto":"","max-h-320px":"","p-2":"",flex:"~ col gap-1"},Kae=["onClick"],Yae={key:0,p:"x-2 y-4",text:"center $bew-text-3"},Xae={"w-full":""},qae=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Me({__name:"Weekly",props:{gridLayout:{},topBarVisibility:{type:Boolean}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,{handleBackToTop:s,handlePageRefresh:r,mainAppRef:o}=$t(),a=z(!1),l=z([]),u=z(null),c=z([]),d=z(!0),f=z(""),h=z(!1),p=z(null),m=z({top:0,left:0,width:0}),g=ge(()=>{if(!f.value.trim())return l.value;const D=f.value.toLowerCase();return l.value.filter(R=>(R.name||`${R.number}`).toLowerCase().includes(D)||String(R.number).includes(D))});function v(){if(!p.value)return;const D=p.value.getBoundingClientRect();m.value={top:D.bottom+window.scrollY,left:D.left+window.scrollX,width:D.width}}Jr(()=>{h.value&&v()},{flush:"pre"});function b(D,R){return{id:Number(D.aid),duration:D.duration,title:Tt(D.title),desc:Tt(D.desc),cover:D.pic,author:{name:Tt(D.owner?.name),authorFace:D.owner?.face,mid:D.owner?.mid},view:D.stat?.view,danmaku:D.stat?.danmaku,like:D.stat?.like,likeStr:D.stat?.like_str??D.stat?.like,publishedTimestamp:D.pubdate,bvid:D.bvid,cid:D.cid,rank:R,threePointV2:[]}}st(()=>{y(),_(),window.addEventListener("resize",v)}),fs(()=>{_()}),ki(()=>{window.removeEventListener("resize",v)});function _(){r.value=async()=>{a.value||y()}}function y(){c.value.length=0,l.value.length=0,u.value=null,E()}function E(){ze.ranking.getPopularSeriesList().then(D=>{D&&D.code===0&&D.data&&Array.isArray(D.data.list)&&(l.value=[...D.data.list].sort((R,O)=>(O.number||0)-(R.number||0)),l.value.length&&(u.value=l.value[0],s(k.value.useSearchPageModeOnHomePage?510:0),S()))})}function S(){u.value&&(n("beforeLoading"),a.value=!0,c.value.length=0,ze.ranking.getPopularSeriesOne({number:u.value.number}).then(D=>{D&&D.code===0&&D.data&&Array.isArray(D.data.list)&&(c.value=D.data.list.map((R,O)=>({...R,displayData:b(R,O+1)})))}).finally(()=>{a.value=!1,n("afterLoading")}))}function A(D){u.value=D,h.value=!1,f.value=""}function C(){h.value=!1,f.value=""}function T(){window.addEventListener("click",C)}function I(){window.removeEventListener("click",C)}return Pe(()=>u.value?.number,(D,R)=>{D&&D!==R&&(s(k.value.useSearchPageModeOnHomePage?510:0),S())}),e({initData:y}),(D,R)=>(L(),P("div",Uae,[x("div",{ref_key:"containerRef",ref:p,pos:"relative","mb-20px":"","w-280px":"",onMouseleave:T,onMouseenter:I},[x("div",{p:"x-4 y-2",bg:"$bew-fill-1",rounded:"$bew-radius",text:"$bew-text-1",cursor:"pointer",flex:"~",justify:"between",items:"center",ring:w(h)?"2px $bew-theme-color":"","duration-300":"",onClick:R[0]||(R[0]=O=>h.value=!w(h))},[w(u)?(L(),P("span",jae,G(w(u).name||`${w(u).number}`),1)):(L(),P("span",Hae,"")),x("div",{border:"~ solid t-0 l-0 r-2 b-2","border-color":w(h)?"$bew-theme-color":"$bew-fill-4",p:"3px","ml-2":"",display:"inline-block",transform:`~ ${w(h)?"rotate-225 translate-y-1/4":"rotate-45 -translate-y-1/4"}`,transition:"all duration-300"},null,8,zae)],8,Vae),(L(),_e(La,{to:w(o)},[F(nt,{name:"dropdown"},{default:H(()=>[w(h)?(L(),P("div",{key:0,style:Ue({top:`${w(m).top}px`,left:`${w(m).left}px`,width:`${w(m).width}px`,backdropFilter:"var(--bew-filter-glass-1)"}),pos:"absolute",bg:"$bew-elevated",shadow:"$bew-shadow-2","mt-2":"",rounded:"$bew-radius",z:"10004","max-h-400px":"","of-hidden":"",onMouseenter:I,onMouseleave:T},[x("div",Gae,[Bt(x("input",{"onUpdate:modelValue":R[1]||(R[1]=O=>kt(f)?f.value=O:null),type:"text",placeholder:"...","w-full":"","px-3":"","py-2":"",rounded:"$bew-radius",bg:"$bew-fill-2",border:"1px solid transparent",text:"$bew-text-1","outline-none":"",transition:"all duration-300","focus:border":"$bew-theme-color"},null,512),[[qs,w(f)]])]),x("div",Wae,[(L(!0),P(Te,null,Ne(w(g),O=>(L(),P("div",{key:O.number,class:Ie([{active:w(u)?.number===O.number},"series-item"]),p:"x-2 y-2",rounded:"$bew-radius","cursor-pointer":"",transition:"all duration-300",bg:"hover:$bew-fill-2",onClick:M=>A(O)},G(O.name||`${O.number}`),11,Kae))),128)),w(g).length===0?(L(),P("div",Yae,"  ")):X("",!0)])],36)):X("",!0)]),_:1}),w(h)?(L(),P("div",{key:0,pos:"fixed top-0 left-0","w-full":"","h-full":"",z:"10003",onWheel:C},null,32)):X("",!0)],8,["to"]))],544),x("div",Xae,[F(rs,{items:w(c),"grid-layout":D.gridLayout,loading:w(a),"no-more-content":w(d),"transform-item":O=>O.displayData,"get-item-key":O=>O.aid,"show-preview":"",onRefresh:y,onLoadMore:()=>{}},null,8,["items","grid-layout","loading","no-more-content","transform-item","get-item-key"])])]))}}),[["__scopeId","data-v-1470b262"]])},Symbol.toStringTag,{value:"Module"})),Zae=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"Live",props:{gridLayout:{}},emits:["beforeLoading","afterLoading"],setup(t,{expose:e,emit:i}){const n=i,s=z([]),r=z(!1),o=z(!1),a=z(1),l=z(!1),{handleReachBottom:u,handlePageRefresh:c}=$t();st(()=>{f(),d()}),fs(()=>{d()});function d(){u.value=async()=>{r.value||l.value||g()},c.value=async()=>{r.value||f()}}async function f(){a.value=1,s.value=[],l.value=!1,await p()}function h(b){if(!b.item)return;const _=b.item;return{id:_.roomid,title:Tt(_.title),cover:_.room_cover,author:{name:Tt(_.uname),authorFace:_.face,mid:_.uid},viewStr:_.text_small,tag:Tt(_.area_name_v2),roomid:_.roomid,liveStatus:_.live_status,threePointV2:[]}}async function p(){n("beforeLoading"),r.value=!0;try{for(let b=0;b<3&&!l.value;b++)await m()}finally{r.value=!1,n("afterLoading")}}async function m(){if(!l.value)try{const b=await ze.live.getFollowingLiveList({page:a.value,page_size:9});if(b.code===-101){l.value=!0,o.value=!0;return}if(b.code===0){b.data.list.length<9&&(l.value=!0),a.value++;const _=b.data.list.map(y=>({uniqueId:`${y.roomid}`,item:y,displayData:h({uniqueId:`${y.roomid}`,item:y})}));s.value=[...s.value,..._]}else b.code===-101&&(o.value=!0)}catch{}}async function g(){if(!(r.value||l.value)){r.value=!0;try{await m()}finally{r.value=!1}}}function v(){location.href="https://passport.bilibili.com/login"}return e({initData:f}),(b,_)=>(L(),_e(rs,{items:w(s),"grid-layout":b.gridLayout,loading:w(r),"no-more-content":w(l),"need-to-login-first":w(o),"transform-item":y=>y.displayData,"get-item-key":y=>y.uniqueId,"show-watcher-later":!1,"show-preview":"",onRefresh:f,onLogin:v,onLoadMore:g},null,8,["items","grid-layout","loading","no-more-content","need-to-login-first","transform-item","get-item-key"]))}})},Symbol.toStringTag,{value:"Module"}));Fv.isSupportedIframePages=_2,Object.defineProperty(Fv,Symbol.toStringTag,{value:"Module"})})(this["bewly-cat"]=this["bewly-cat"]||{});
