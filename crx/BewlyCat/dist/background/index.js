var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod));var require_browser_polyfill=__commonJS({"node_modules/.pnpm/webextension-polyfill@0.12.0/node_modules/webextension-polyfill/dist/browser-polyfill.js"(exports,module){"use strict";(function(global2,factory){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],factory);else if(typeof exports<"u")factory(module);else{var mod={exports:{}};factory(mod),global2.browser=mod.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:exports,function(module2){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)module2.exports=globalThis.browser;else{let CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE="The message port closed before a response was received.",wrapAPIs=extensionAPIs=>{let apiMetadata={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(apiMetadata).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class DefaultWeakMap extends WeakMap{constructor(createItem,items=void 0){super(items),this.createItem=createItem}get(key){return this.has(key)||this.set(key,this.createItem(key)),super.get(key)}}let isThenable=value=>value&&typeof value=="object"&&typeof value.then=="function",makeCallback=(promise,metadata)=>(...callbackArgs)=>{extensionAPIs.runtime.lastError?promise.reject(new Error(extensionAPIs.runtime.lastError.message)):metadata.singleCallbackArg||callbackArgs.length<=1&&metadata.singleCallbackArg!==!1?promise.resolve(callbackArgs[0]):promise.resolve(callbackArgs)},pluralizeArguments=numArgs=>numArgs==1?"argument":"arguments",wrapAsyncFunction=(name,metadata)=>function(target,...args){if(args.length<metadata.minArgs)throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);if(args.length>metadata.maxArgs)throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);return new Promise((resolve,reject)=>{if(metadata.fallbackToNoCallback)try{target[name](...args,makeCallback({resolve,reject},metadata))}catch(cbError){console.warn(`${name} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,cbError),target[name](...args),metadata.fallbackToNoCallback=!1,metadata.noCallback=!0,resolve()}else metadata.noCallback?(target[name](...args),resolve()):target[name](...args,makeCallback({resolve,reject},metadata))})},wrapMethod=(target,method,wrapper)=>new Proxy(method,{apply(targetMethod,thisObj,args){return wrapper.call(thisObj,target,...args)}}),hasOwnProperty3=Function.call.bind(Object.prototype.hasOwnProperty),wrapObject=(target,wrappers={},metadata={})=>{let cache=Object.create(null),handlers2={has(proxyTarget2,prop){return prop in target||prop in cache},get(proxyTarget2,prop,receiver){if(prop in cache)return cache[prop];if(!(prop in target))return;let value=target[prop];if(typeof value=="function")if(typeof wrappers[prop]=="function")value=wrapMethod(target,target[prop],wrappers[prop]);else if(hasOwnProperty3(metadata,prop)){let wrapper=wrapAsyncFunction(prop,metadata[prop]);value=wrapMethod(target,target[prop],wrapper)}else value=value.bind(target);else if(typeof value=="object"&&value!==null&&(hasOwnProperty3(wrappers,prop)||hasOwnProperty3(metadata,prop)))value=wrapObject(value,wrappers[prop],metadata[prop]);else if(hasOwnProperty3(metadata,"*"))value=wrapObject(value,wrappers[prop],metadata["*"]);else return Object.defineProperty(cache,prop,{configurable:!0,enumerable:!0,get(){return target[prop]},set(value2){target[prop]=value2}}),value;return cache[prop]=value,value},set(proxyTarget2,prop,value,receiver){return prop in cache?cache[prop]=value:target[prop]=value,!0},defineProperty(proxyTarget2,prop,desc){return Reflect.defineProperty(cache,prop,desc)},deleteProperty(proxyTarget2,prop){return Reflect.deleteProperty(cache,prop)}},proxyTarget=Object.create(target);return new Proxy(proxyTarget,handlers2)},wrapEvent=wrapperMap=>({addListener(target,listener,...args){target.addListener(wrapperMap.get(listener),...args)},hasListener(target,listener){return target.hasListener(wrapperMap.get(listener))},removeListener(target,listener){target.removeListener(wrapperMap.get(listener))}}),onRequestFinishedWrappers=new DefaultWeakMap(listener=>typeof listener!="function"?listener:function(req){let wrappedReq=wrapObject(req,{},{getContent:{minArgs:0,maxArgs:0}});listener(wrappedReq)}),onMessageWrappers=new DefaultWeakMap(listener=>typeof listener!="function"?listener:function(message,sender,sendResponse){let didCallSendResponse=!1,wrappedSendResponse,sendResponsePromise=new Promise(resolve=>{wrappedSendResponse=function(response){didCallSendResponse=!0,resolve(response)}}),result;try{result=listener(message,sender,wrappedSendResponse)}catch(err){result=Promise.reject(err)}let isResultThenable=result!==!0&&isThenable(result);if(result!==!0&&!isResultThenable&&!didCallSendResponse)return!1;let sendPromisedResult=promise=>{promise.then(msg=>{sendResponse(msg)},error=>{let message2;error&&(error instanceof Error||typeof error.message=="string")?message2=error.message:message2="An unexpected error occurred",sendResponse({__mozWebExtensionPolyfillReject__:!0,message:message2})}).catch(err=>{console.error("Failed to send onMessage rejected reply",err)})};return sendPromisedResult(isResultThenable?result:sendResponsePromise),!0}),wrappedSendMessageCallback=({reject,resolve},reply)=>{extensionAPIs.runtime.lastError?extensionAPIs.runtime.lastError.message===CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE?resolve():reject(new Error(extensionAPIs.runtime.lastError.message)):reply&&reply.__mozWebExtensionPolyfillReject__?reject(new Error(reply.message)):resolve(reply)},wrappedSendMessage=(name,metadata,apiNamespaceObj,...args)=>{if(args.length<metadata.minArgs)throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);if(args.length>metadata.maxArgs)throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);return new Promise((resolve,reject)=>{let wrappedCb=wrappedSendMessageCallback.bind(null,{resolve,reject});args.push(wrappedCb),apiNamespaceObj.sendMessage(...args)})},staticWrappers={devtools:{network:{onRequestFinished:wrapEvent(onRequestFinishedWrappers)}},runtime:{onMessage:wrapEvent(onMessageWrappers),onMessageExternal:wrapEvent(onMessageWrappers),sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:wrappedSendMessage.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},settingMetadata={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return apiMetadata.privacy={network:{"*":settingMetadata},services:{"*":settingMetadata},websites:{"*":settingMetadata}},wrapObject(extensionAPIs,staticWrappers,apiMetadata)};module2.exports=wrapAPIs(chrome)}})}});var require_crypt=__commonJS({"node_modules/.pnpm/crypt@0.0.2/node_modules/crypt/crypt.js"(exports,module){"use strict";(function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){if(n.constructor==Number)return crypt.rotl(n,8)&16711935|crypt.rotl(n,24)&4278255360;for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i]);return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(Math.random()*256));return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32;return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<words.length*32;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255);return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),hex.push((bytes[i]&15).toString(16));return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16));return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3)for(var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],j=0;j<4;j++)i*8+j*6<=bytes.length*8?base64.push(base64map.charAt(triplet>>>6*(3-j)&63)):base64.push("=");return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/ig,"");for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4)imod4!=0&&bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<imod4*2|base64map.indexOf(base64.charAt(i))>>>6-imod4*2);return bytes}};module.exports=crypt})()}});var require_charenc=__commonJS({"node_modules/.pnpm/charenc@0.0.2/node_modules/charenc/charenc.js"(exports,module){"use strict";var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(str.charCodeAt(i)&255);return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]));return str.join("")}}};module.exports=charenc}});var require_is_buffer=__commonJS({"node_modules/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js"(exports,module){"use strict";module.exports=function(obj){return obj!=null&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)};function isBuffer(obj){return!!obj.constructor&&typeof obj.constructor.isBuffer=="function"&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return typeof obj.readFloatLE=="function"&&typeof obj.slice=="function"&&isBuffer(obj.slice(0,0))}}});var require_md5=__commonJS({"node_modules/.pnpm/md5@2.3.0/node_modules/md5/md5.js"(exports,module){"use strict";(function(){var crypt=require_crypt(),utf8=require_charenc().utf8,isBuffer=require_is_buffer(),bin=require_charenc().bin,md53=function(message,options){message.constructor==String?options&&options.encoding==="binary"?message=bin.stringToBytes(message):message=utf8.stringToBytes(message):isBuffer(message)?message=Array.prototype.slice.call(message,0):!Array.isArray(message)&&message.constructor!==Uint8Array&&(message=message.toString());for(var m=crypt.bytesToWords(message),l=message.length*8,a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<m.length;i++)m[i]=(m[i]<<8|m[i]>>>24)&16711935|(m[i]<<24|m[i]>>>8)&4278255360;m[l>>>5]|=128<<l%32,m[(l+64>>>9<<4)+14]=l;for(var FF=md53._ff,GG=md53._gg,HH=md53._hh,II=md53._ii,i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d;a=FF(a,b,c,d,m[i+0],7,-680876936),d=FF(d,a,b,c,m[i+1],12,-389564586),c=FF(c,d,a,b,m[i+2],17,606105819),b=FF(b,c,d,a,m[i+3],22,-1044525330),a=FF(a,b,c,d,m[i+4],7,-176418897),d=FF(d,a,b,c,m[i+5],12,1200080426),c=FF(c,d,a,b,m[i+6],17,-1473231341),b=FF(b,c,d,a,m[i+7],22,-45705983),a=FF(a,b,c,d,m[i+8],7,1770035416),d=FF(d,a,b,c,m[i+9],12,-1958414417),c=FF(c,d,a,b,m[i+10],17,-42063),b=FF(b,c,d,a,m[i+11],22,-1990404162),a=FF(a,b,c,d,m[i+12],7,1804603682),d=FF(d,a,b,c,m[i+13],12,-40341101),c=FF(c,d,a,b,m[i+14],17,-1502002290),b=FF(b,c,d,a,m[i+15],22,1236535329),a=GG(a,b,c,d,m[i+1],5,-165796510),d=GG(d,a,b,c,m[i+6],9,-1069501632),c=GG(c,d,a,b,m[i+11],14,643717713),b=GG(b,c,d,a,m[i+0],20,-373897302),a=GG(a,b,c,d,m[i+5],5,-701558691),d=GG(d,a,b,c,m[i+10],9,38016083),c=GG(c,d,a,b,m[i+15],14,-660478335),b=GG(b,c,d,a,m[i+4],20,-405537848),a=GG(a,b,c,d,m[i+9],5,568446438),d=GG(d,a,b,c,m[i+14],9,-1019803690),c=GG(c,d,a,b,m[i+3],14,-187363961),b=GG(b,c,d,a,m[i+8],20,1163531501),a=GG(a,b,c,d,m[i+13],5,-1444681467),d=GG(d,a,b,c,m[i+2],9,-51403784),c=GG(c,d,a,b,m[i+7],14,1735328473),b=GG(b,c,d,a,m[i+12],20,-1926607734),a=HH(a,b,c,d,m[i+5],4,-378558),d=HH(d,a,b,c,m[i+8],11,-2022574463),c=HH(c,d,a,b,m[i+11],16,1839030562),b=HH(b,c,d,a,m[i+14],23,-35309556),a=HH(a,b,c,d,m[i+1],4,-1530992060),d=HH(d,a,b,c,m[i+4],11,1272893353),c=HH(c,d,a,b,m[i+7],16,-155497632),b=HH(b,c,d,a,m[i+10],23,-1094730640),a=HH(a,b,c,d,m[i+13],4,681279174),d=HH(d,a,b,c,m[i+0],11,-358537222),c=HH(c,d,a,b,m[i+3],16,-722521979),b=HH(b,c,d,a,m[i+6],23,76029189),a=HH(a,b,c,d,m[i+9],4,-640364487),d=HH(d,a,b,c,m[i+12],11,-421815835),c=HH(c,d,a,b,m[i+15],16,530742520),b=HH(b,c,d,a,m[i+2],23,-995338651),a=II(a,b,c,d,m[i+0],6,-198630844),d=II(d,a,b,c,m[i+7],10,1126891415),c=II(c,d,a,b,m[i+14],15,-1416354905),b=II(b,c,d,a,m[i+5],21,-57434055),a=II(a,b,c,d,m[i+12],6,1700485571),d=II(d,a,b,c,m[i+3],10,-1894986606),c=II(c,d,a,b,m[i+10],15,-1051523),b=II(b,c,d,a,m[i+1],21,-2054922799),a=II(a,b,c,d,m[i+8],6,1873313359),d=II(d,a,b,c,m[i+15],10,-30611744),c=II(c,d,a,b,m[i+6],15,-1560198380),b=II(b,c,d,a,m[i+13],21,1309151649),a=II(a,b,c,d,m[i+4],6,-145523070),d=II(d,a,b,c,m[i+11],10,-1120210379),c=II(c,d,a,b,m[i+2],15,718787259),b=II(b,c,d,a,m[i+9],21,-343485551),a=a+aa>>>0,b=b+bb>>>0,c=c+cc>>>0,d=d+dd>>>0}return crypt.endian([a,b,c,d])};md53._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md53._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md53._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md53._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t;return(n<<s|n>>>32-s)+b},md53._blocksize=16,md53._digestsize=16,module.exports=function(message,options){if(message==null)throw new Error("Illegal argument "+message);var digestbytes=crypt.wordsToBytes(md53(message,options));return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)}})()}});var import_webextension_polyfill6=__toESM(require_browser_polyfill(),1);function makeMap(str){let map=Object.create(null);for(let key of str.split(","))map[key]=1;return val=>val in map}var EMPTY_OBJ={};var NOOP=()=>{},NO=()=>!1;var extend=Object.assign,remove=(arr,el)=>{let i=arr.indexOf(el);i>-1&&arr.splice(i,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(val,key)=>hasOwnProperty.call(val,key),isArray=Array.isArray,isMap=val=>toTypeString(val)==="[object Map]",isSet=val=>toTypeString(val)==="[object Set]";var isFunction=val=>typeof val=="function",isString=val=>typeof val=="string",isSymbol=val=>typeof val=="symbol",isObject=val=>val!==null&&typeof val=="object",isPromise=val=>(isObject(val)||isFunction(val))&&isFunction(val.then)&&isFunction(val.catch),objectToString=Object.prototype.toString,toTypeString=value=>objectToString.call(value),toRawType=value=>toTypeString(value).slice(8,-1),isPlainObject=val=>toTypeString(val)==="[object Object]",isIntegerKey=key=>isString(key)&&key!=="NaN"&&key[0]!=="-"&&""+parseInt(key,10)===key;var cacheStringFunction=fn=>{let cache=Object.create(null);return(str=>cache[str]||(cache[str]=fn(str)))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(str=>str.replace(camelizeRE,(_,c)=>c?c.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(str=>str.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(str=>str.charAt(0).toUpperCase()+str.slice(1)),toHandlerKey=cacheStringFunction(str=>str?`on${capitalize(str)}`:""),hasChanged=(value,oldValue)=>!Object.is(value,oldValue);var _globalThis,getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});var specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly";var isBooleanAttr=makeMap(specialBooleanAttrs+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function warn(msg,...args){console.warn(`[Vue warn] ${msg}`,...args)}var activeEffectScope;function getCurrentScope(){return activeEffectScope}function onScopeDispose(fn,failSilently=!1){activeEffectScope&&activeEffectScope.cleanups.push(fn)}var activeSub;var pausedQueueEffects=new WeakSet,ReactiveEffect=class{constructor(fn){this.fn=fn,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);let prevEffect=activeSub,prevShouldTrack=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=prevEffect,shouldTrack=prevShouldTrack,this.flags&=-3}}stop(){if(this.flags&1){for(let link=this.deps;link;link=link.nextDep)removeSub(link);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}},batchDepth=0,batchedSub,batchedComputed;function batch(sub,isComputed=!1){if(sub.flags|=8,isComputed){sub.next=batchedComputed,batchedComputed=sub;return}sub.next=batchedSub,batchedSub=sub}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){let next=e.next;e.next=void 0,e.flags&=-9,e=next}}let error;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){let next=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(err){error||(error=err)}e=next}}if(error)throw error}function prepareDeps(sub){for(let link=sub.deps;link;link=link.nextDep)link.version=-1,link.prevActiveLink=link.dep.activeLink,link.dep.activeLink=link}function cleanupDeps(sub){let head,tail=sub.depsTail,link=tail;for(;link;){let prev=link.prevDep;link.version===-1?(link===tail&&(tail=prev),removeSub(link),removeDep(link)):head=link,link.dep.activeLink=link.prevActiveLink,link.prevActiveLink=void 0,link=prev}sub.deps=head,sub.depsTail=tail}function isDirty(sub){for(let link=sub.deps;link;link=link.nextDep)if(link.dep.version!==link.version||link.dep.computed&&(refreshComputed(link.dep.computed)||link.dep.version!==link.version))return!0;return!!sub._dirty}function refreshComputed(computed3){if(computed3.flags&4&&!(computed3.flags&16)||(computed3.flags&=-17,computed3.globalVersion===globalVersion)||(computed3.globalVersion=globalVersion,!computed3.isSSR&&computed3.flags&128&&(!computed3.deps&&!computed3._dirty||!isDirty(computed3))))return;computed3.flags|=2;let dep=computed3.dep,prevSub=activeSub,prevShouldTrack=shouldTrack;activeSub=computed3,shouldTrack=!0;try{prepareDeps(computed3);let value=computed3.fn(computed3._value);(dep.version===0||hasChanged(value,computed3._value))&&(computed3.flags|=128,computed3._value=value,dep.version++)}catch(err){throw dep.version++,err}finally{activeSub=prevSub,shouldTrack=prevShouldTrack,cleanupDeps(computed3),computed3.flags&=-3}}function removeSub(link,soft=!1){let{dep,prevSub,nextSub}=link;if(prevSub&&(prevSub.nextSub=nextSub,link.prevSub=void 0),nextSub&&(nextSub.prevSub=prevSub,link.nextSub=void 0),dep.subs===link&&(dep.subs=prevSub,!prevSub&&dep.computed)){dep.computed.flags&=-5;for(let l=dep.computed.deps;l;l=l.nextDep)removeSub(l,!0)}!soft&&!--dep.sc&&dep.map&&dep.map.delete(dep.key)}function removeDep(link){let{prevDep,nextDep}=link;prevDep&&(prevDep.nextDep=nextDep,link.prevDep=void 0),nextDep&&(nextDep.prevDep=prevDep,link.nextDep=void 0)}var shouldTrack=!0,trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){let last=trackStack.pop();shouldTrack=last===void 0?!0:last}function cleanupEffect(e){let{cleanup}=e;if(e.cleanup=void 0,cleanup){let prevSub=activeSub;activeSub=void 0;try{cleanup()}finally{activeSub=prevSub}}}var globalVersion=0,Link=class{constructor(sub,dep){this.sub=sub,this.dep=dep,this.version=dep.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}},Dep=class{constructor(computed3){this.computed=computed3,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(debugInfo){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let link=this.activeLink;if(link===void 0||link.sub!==activeSub)link=this.activeLink=new Link(activeSub,this),activeSub.deps?(link.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=link,activeSub.depsTail=link):activeSub.deps=activeSub.depsTail=link,addSub(link);else if(link.version===-1&&(link.version=this.version,link.nextDep)){let next=link.nextDep;next.prevDep=link.prevDep,link.prevDep&&(link.prevDep.nextDep=next),link.prevDep=activeSub.depsTail,link.nextDep=void 0,activeSub.depsTail.nextDep=link,activeSub.depsTail=link,activeSub.deps===link&&(activeSub.deps=next)}return link}trigger(debugInfo){this.version++,globalVersion++,this.notify(debugInfo)}notify(debugInfo){startBatch();try{for(let link=this.subs;link;link=link.prevSub)link.sub.notify()&&link.sub.dep.notify()}finally{endBatch()}}};function addSub(link){if(link.dep.sc++,link.sub.flags&4){let computed3=link.dep.computed;if(computed3&&!link.dep.subs){computed3.flags|=20;for(let l=computed3.deps;l;l=l.nextDep)addSub(l)}let currentTail=link.dep.subs;currentTail!==link&&(link.prevSub=currentTail,currentTail&&(currentTail.nextSub=link)),link.dep.subs=link}}var targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(target,type,key){if(shouldTrack&&activeSub){let depsMap=targetMap.get(target);depsMap||targetMap.set(target,depsMap=new Map);let dep=depsMap.get(key);dep||(depsMap.set(key,dep=new Dep),dep.map=depsMap,dep.key=key),dep.track()}}function trigger(target,type,key,newValue,oldValue,oldTarget){let depsMap=targetMap.get(target);if(!depsMap){globalVersion++;return}let run=dep=>{dep&&dep.trigger()};if(startBatch(),type==="clear")depsMap.forEach(run);else{let targetIsArray=isArray(target),isArrayIndex=targetIsArray&&isIntegerKey(key);if(targetIsArray&&key==="length"){let newLength=Number(newValue);depsMap.forEach((dep,key2)=>{(key2==="length"||key2===ARRAY_ITERATE_KEY||!isSymbol(key2)&&key2>=newLength)&&run(dep)})}else switch((key!==void 0||depsMap.has(void 0))&&run(depsMap.get(key)),isArrayIndex&&run(depsMap.get(ARRAY_ITERATE_KEY)),type){case"add":targetIsArray?isArrayIndex&&run(depsMap.get("length")):(run(depsMap.get(ITERATE_KEY)),isMap(target)&&run(depsMap.get(MAP_KEY_ITERATE_KEY)));break;case"delete":targetIsArray||(run(depsMap.get(ITERATE_KEY)),isMap(target)&&run(depsMap.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(target)&&run(depsMap.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(array){let raw=toRaw(array);return raw===array?raw:(track(raw,"iterate",ARRAY_ITERATE_KEY),isShallow(array)?raw:raw.map(toReactive))}function shallowReadArray(arr){return track(arr=toRaw(arr),"iterate",ARRAY_ITERATE_KEY),arr}var arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...args){return reactiveReadArray(this).concat(...args.map(x=>isArray(x)?reactiveReadArray(x):x))},entries(){return iterator(this,"entries",value=>(value[1]=toReactive(value[1]),value))},every(fn,thisArg){return apply(this,"every",fn,thisArg,void 0,arguments)},filter(fn,thisArg){return apply(this,"filter",fn,thisArg,v=>v.map(toReactive),arguments)},find(fn,thisArg){return apply(this,"find",fn,thisArg,toReactive,arguments)},findIndex(fn,thisArg){return apply(this,"findIndex",fn,thisArg,void 0,arguments)},findLast(fn,thisArg){return apply(this,"findLast",fn,thisArg,toReactive,arguments)},findLastIndex(fn,thisArg){return apply(this,"findLastIndex",fn,thisArg,void 0,arguments)},forEach(fn,thisArg){return apply(this,"forEach",fn,thisArg,void 0,arguments)},includes(...args){return searchProxy(this,"includes",args)},indexOf(...args){return searchProxy(this,"indexOf",args)},join(separator){return reactiveReadArray(this).join(separator)},lastIndexOf(...args){return searchProxy(this,"lastIndexOf",args)},map(fn,thisArg){return apply(this,"map",fn,thisArg,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...args){return noTracking(this,"push",args)},reduce(fn,...args){return reduce(this,"reduce",fn,args)},reduceRight(fn,...args){return reduce(this,"reduceRight",fn,args)},shift(){return noTracking(this,"shift")},some(fn,thisArg){return apply(this,"some",fn,thisArg,void 0,arguments)},splice(...args){return noTracking(this,"splice",args)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(comparer){return reactiveReadArray(this).toSorted(comparer)},toSpliced(...args){return reactiveReadArray(this).toSpliced(...args)},unshift(...args){return noTracking(this,"unshift",args)},values(){return iterator(this,"values",toReactive)}};function iterator(self2,method,wrapValue){let arr=shallowReadArray(self2),iter=arr[method]();return arr!==self2&&!isShallow(self2)&&(iter._next=iter.next,iter.next=()=>{let result=iter._next();return result.value&&(result.value=wrapValue(result.value)),result}),iter}var arrayProto=Array.prototype;function apply(self2,method,fn,thisArg,wrappedRetFn,args){let arr=shallowReadArray(self2),needsWrap=arr!==self2&&!isShallow(self2),methodFn=arr[method];if(methodFn!==arrayProto[method]){let result2=methodFn.apply(self2,args);return needsWrap?toReactive(result2):result2}let wrappedFn=fn;arr!==self2&&(needsWrap?wrappedFn=function(item,index){return fn.call(this,toReactive(item),index,self2)}:fn.length>2&&(wrappedFn=function(item,index){return fn.call(this,item,index,self2)}));let result=methodFn.call(arr,wrappedFn,thisArg);return needsWrap&&wrappedRetFn?wrappedRetFn(result):result}function reduce(self2,method,fn,args){let arr=shallowReadArray(self2),wrappedFn=fn;return arr!==self2&&(isShallow(self2)?fn.length>3&&(wrappedFn=function(acc,item,index){return fn.call(this,acc,item,index,self2)}):wrappedFn=function(acc,item,index){return fn.call(this,acc,toReactive(item),index,self2)}),arr[method](wrappedFn,...args)}function searchProxy(self2,method,args){let arr=toRaw(self2);track(arr,"iterate",ARRAY_ITERATE_KEY);let res=arr[method](...args);return(res===-1||res===!1)&&isProxy(args[0])?(args[0]=toRaw(args[0]),arr[method](...args)):res}function noTracking(self2,method,args=[]){pauseTracking(),startBatch();let res=toRaw(self2)[method].apply(self2,args);return endBatch(),resetTracking(),res}var isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(key=>key!=="arguments"&&key!=="caller").map(key=>Symbol[key]).filter(isSymbol));function hasOwnProperty2(key){isSymbol(key)||(key=String(key));let obj=toRaw(this);return track(obj,"has",key),obj.hasOwnProperty(key)}var BaseReactiveHandler=class{constructor(_isReadonly=!1,_isShallow=!1){this._isReadonly=_isReadonly,this._isShallow=_isShallow}get(target,key,receiver){if(key==="__v_skip")return target.__v_skip;let isReadonly2=this._isReadonly,isShallow2=this._isShallow;if(key==="__v_isReactive")return!isReadonly2;if(key==="__v_isReadonly")return isReadonly2;if(key==="__v_isShallow")return isShallow2;if(key==="__v_raw")return receiver===(isReadonly2?isShallow2?shallowReadonlyMap:readonlyMap:isShallow2?shallowReactiveMap:reactiveMap).get(target)||Object.getPrototypeOf(target)===Object.getPrototypeOf(receiver)?target:void 0;let targetIsArray=isArray(target);if(!isReadonly2){let fn;if(targetIsArray&&(fn=arrayInstrumentations[key]))return fn;if(key==="hasOwnProperty")return hasOwnProperty2}let res=Reflect.get(target,key,isRef(target)?target:receiver);return(isSymbol(key)?builtInSymbols.has(key):isNonTrackableKeys(key))||(isReadonly2||track(target,"get",key),isShallow2)?res:isRef(res)?targetIsArray&&isIntegerKey(key)?res:res.value:isObject(res)?isReadonly2?readonly(res):reactive(res):res}},MutableReactiveHandler=class extends BaseReactiveHandler{constructor(isShallow2=!1){super(!1,isShallow2)}set(target,key,value,receiver){let oldValue=target[key];if(!this._isShallow){let isOldValueReadonly=isReadonly(oldValue);if(!isShallow(value)&&!isReadonly(value)&&(oldValue=toRaw(oldValue),value=toRaw(value)),!isArray(target)&&isRef(oldValue)&&!isRef(value))return isOldValueReadonly||(oldValue.value=value),!0}let hadKey=isArray(target)&&isIntegerKey(key)?Number(key)<target.length:hasOwn(target,key),result=Reflect.set(target,key,value,isRef(target)?target:receiver);return target===toRaw(receiver)&&(hadKey?hasChanged(value,oldValue)&&trigger(target,"set",key,value,oldValue):trigger(target,"add",key,value)),result}deleteProperty(target,key){let hadKey=hasOwn(target,key),oldValue=target[key],result=Reflect.deleteProperty(target,key);return result&&hadKey&&trigger(target,"delete",key,void 0,oldValue),result}has(target,key){let result=Reflect.has(target,key);return(!isSymbol(key)||!builtInSymbols.has(key))&&track(target,"has",key),result}ownKeys(target){return track(target,"iterate",isArray(target)?"length":ITERATE_KEY),Reflect.ownKeys(target)}},ReadonlyReactiveHandler=class extends BaseReactiveHandler{constructor(isShallow2=!1){super(!0,isShallow2)}set(target,key){return!0}deleteProperty(target,key){return!0}},mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler;var toShallow=value=>value,getProto=v=>Reflect.getPrototypeOf(v);function createIterableMethod(method,isReadonly2,isShallow2){return function(...args){let target=this.__v_raw,rawTarget=toRaw(target),targetIsMap=isMap(rawTarget),isPair=method==="entries"||method===Symbol.iterator&&targetIsMap,isKeyOnly=method==="keys"&&targetIsMap,innerIterator=target[method](...args),wrap=isShallow2?toShallow:isReadonly2?toReadonly:toReactive;return!isReadonly2&&track(rawTarget,"iterate",isKeyOnly?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){let{value,done}=innerIterator.next();return done?{value,done}:{value:isPair?[wrap(value[0]),wrap(value[1])]:wrap(value),done}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(type){return function(...args){return type==="delete"?!1:type==="clear"?void 0:this}}function createInstrumentations(readonly3,shallow){let instrumentations={get(key){let target=this.__v_raw,rawTarget=toRaw(target),rawKey=toRaw(key);readonly3||(hasChanged(key,rawKey)&&track(rawTarget,"get",key),track(rawTarget,"get",rawKey));let{has}=getProto(rawTarget),wrap=shallow?toShallow:readonly3?toReadonly:toReactive;if(has.call(rawTarget,key))return wrap(target.get(key));if(has.call(rawTarget,rawKey))return wrap(target.get(rawKey));target!==rawTarget&&target.get(key)},get size(){let target=this.__v_raw;return!readonly3&&track(toRaw(target),"iterate",ITERATE_KEY),Reflect.get(target,"size",target)},has(key){let target=this.__v_raw,rawTarget=toRaw(target),rawKey=toRaw(key);return readonly3||(hasChanged(key,rawKey)&&track(rawTarget,"has",key),track(rawTarget,"has",rawKey)),key===rawKey?target.has(key):target.has(key)||target.has(rawKey)},forEach(callback,thisArg){let observed=this,target=observed.__v_raw,rawTarget=toRaw(target),wrap=shallow?toShallow:readonly3?toReadonly:toReactive;return!readonly3&&track(rawTarget,"iterate",ITERATE_KEY),target.forEach((value,key)=>callback.call(thisArg,wrap(value),wrap(key),observed))}};return extend(instrumentations,readonly3?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(value){!shallow&&!isShallow(value)&&!isReadonly(value)&&(value=toRaw(value));let target=toRaw(this);return getProto(target).has.call(target,value)||(target.add(value),trigger(target,"add",value,value)),this},set(key,value){!shallow&&!isShallow(value)&&!isReadonly(value)&&(value=toRaw(value));let target=toRaw(this),{has,get}=getProto(target),hadKey=has.call(target,key);hadKey||(key=toRaw(key),hadKey=has.call(target,key));let oldValue=get.call(target,key);return target.set(key,value),hadKey?hasChanged(value,oldValue)&&trigger(target,"set",key,value,oldValue):trigger(target,"add",key,value),this},delete(key){let target=toRaw(this),{has,get}=getProto(target),hadKey=has.call(target,key);hadKey||(key=toRaw(key),hadKey=has.call(target,key));let oldValue=get?get.call(target,key):void 0,result=target.delete(key);return hadKey&&trigger(target,"delete",key,void 0,oldValue),result},clear(){let target=toRaw(this),hadItems=target.size!==0,oldTarget=void 0,result=target.clear();return hadItems&&trigger(target,"clear",void 0,void 0,oldTarget),result}}),["keys","values","entries",Symbol.iterator].forEach(method=>{instrumentations[method]=createIterableMethod(method,readonly3,shallow)}),instrumentations}function createInstrumentationGetter(isReadonly2,shallow){let instrumentations=createInstrumentations(isReadonly2,shallow);return(target,key,receiver)=>key==="__v_isReactive"?!isReadonly2:key==="__v_isReadonly"?isReadonly2:key==="__v_raw"?target:Reflect.get(hasOwn(instrumentations,key)&&key in target?instrumentations:target,key,receiver)}var mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)};var readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)};var reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(rawType){switch(rawType){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(value){return value.__v_skip||!Object.isExtensible(value)?0:targetTypeMap(toRawType(value))}function reactive(target){return isReadonly(target)?target:createReactiveObject(target,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function readonly(target){return createReactiveObject(target,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(target,isReadonly2,baseHandlers,collectionHandlers,proxyMap){if(!isObject(target)||target.__v_raw&&!(isReadonly2&&target.__v_isReactive))return target;let targetType=getTargetType(target);if(targetType===0)return target;let existingProxy=proxyMap.get(target);if(existingProxy)return existingProxy;let proxy=new Proxy(target,targetType===2?collectionHandlers:baseHandlers);return proxyMap.set(target,proxy),proxy}function isReactive(value){return isReadonly(value)?isReactive(value.__v_raw):!!(value&&value.__v_isReactive)}function isReadonly(value){return!!(value&&value.__v_isReadonly)}function isShallow(value){return!!(value&&value.__v_isShallow)}function isProxy(value){return value?!!value.__v_raw:!1}function toRaw(observed){let raw=observed&&observed.__v_raw;return raw?toRaw(raw):observed}var toReactive=value=>isObject(value)?reactive(value):value,toReadonly=value=>isObject(value)?readonly(value):value;function isRef(r){return r?r.__v_isRef===!0:!1}function ref(value){return createRef(value,!1)}function shallowRef(value){return createRef(value,!0)}function createRef(rawValue,shallow){return isRef(rawValue)?rawValue:new RefImpl(rawValue,shallow)}var RefImpl=class{constructor(value,isShallow2){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=isShallow2?value:toRaw(value),this._value=isShallow2?value:toReactive(value),this.__v_isShallow=isShallow2}get value(){return this.dep.track(),this._value}set value(newValue){let oldValue=this._rawValue,useDirectValue=this.__v_isShallow||isShallow(newValue)||isReadonly(newValue);newValue=useDirectValue?newValue:toRaw(newValue),hasChanged(newValue,oldValue)&&(this._rawValue=newValue,this._value=useDirectValue?newValue:toReactive(newValue),this.dep.trigger())}};function unref(ref2){return isRef(ref2)?ref2.value:ref2}function toValue(source){return isFunction(source)?source():unref(source)}var ComputedRefImpl=class{constructor(fn,setter,isSSR){this.fn=fn,this.setter=setter,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!setter,this.isSSR=isSSR}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){let link=this.dep.track();return refreshComputed(this),link&&(link.version=this.dep.version),this._value}set value(newValue){this.setter&&this.setter(newValue)}};function computed(getterOrOptions,debugOptions,isSSR=!1){let getter,setter;return isFunction(getterOrOptions)?getter=getterOrOptions:(getter=getterOrOptions.get,setter=getterOrOptions.set),new ComputedRefImpl(getter,setter,isSSR)}var INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap,activeWatcher;function onWatcherCleanup(cleanupFn,failSilently=!1,owner=activeWatcher){if(owner){let cleanups=cleanupMap.get(owner);cleanups||cleanupMap.set(owner,cleanups=[]),cleanups.push(cleanupFn)}}function watch(source,cb,options=EMPTY_OBJ){let{immediate,deep,once,scheduler,augmentJob,call}=options,warnInvalidSource=s=>{(options.onWarn||warn)("Invalid watch source: ",s,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},reactiveGetter=source2=>deep?source2:isShallow(source2)||deep===!1||deep===0?traverse(source2,1):traverse(source2),effect2,getter,cleanup,boundCleanup,forceTrigger=!1,isMultiSource=!1;if(isRef(source)?(getter=()=>source.value,forceTrigger=isShallow(source)):isReactive(source)?(getter=()=>reactiveGetter(source),forceTrigger=!0):isArray(source)?(isMultiSource=!0,forceTrigger=source.some(s=>isReactive(s)||isShallow(s)),getter=()=>source.map(s=>{if(isRef(s))return s.value;if(isReactive(s))return reactiveGetter(s);if(isFunction(s))return call?call(s,2):s()})):isFunction(source)?cb?getter=call?()=>call(source,2):source:getter=()=>{if(cleanup){pauseTracking();try{cleanup()}finally{resetTracking()}}let currentEffect=activeWatcher;activeWatcher=effect2;try{return call?call(source,3,[boundCleanup]):source(boundCleanup)}finally{activeWatcher=currentEffect}}:getter=NOOP,cb&&deep){let baseGetter=getter,depth=deep===!0?1/0:deep;getter=()=>traverse(baseGetter(),depth)}let scope=getCurrentScope(),watchHandle=()=>{effect2.stop(),scope&&scope.active&&remove(scope.effects,effect2)};if(once&&cb){let _cb=cb;cb=(...args)=>{_cb(...args),watchHandle()}}let oldValue=isMultiSource?new Array(source.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE,job=immediateFirstRun=>{if(!(!(effect2.flags&1)||!effect2.dirty&&!immediateFirstRun))if(cb){let newValue=effect2.run();if(deep||forceTrigger||(isMultiSource?newValue.some((v,i)=>hasChanged(v,oldValue[i])):hasChanged(newValue,oldValue))){cleanup&&cleanup();let currentWatcher=activeWatcher;activeWatcher=effect2;try{let args=[newValue,oldValue===INITIAL_WATCHER_VALUE?void 0:isMultiSource&&oldValue[0]===INITIAL_WATCHER_VALUE?[]:oldValue,boundCleanup];oldValue=newValue,call?call(cb,3,args):cb(...args)}finally{activeWatcher=currentWatcher}}}else effect2.run()};return augmentJob&&augmentJob(job),effect2=new ReactiveEffect(getter),effect2.scheduler=scheduler?()=>scheduler(job,!1):job,boundCleanup=fn=>onWatcherCleanup(fn,!1,effect2),cleanup=effect2.onStop=()=>{let cleanups=cleanupMap.get(effect2);if(cleanups){if(call)call(cleanups,4);else for(let cleanup2 of cleanups)cleanup2();cleanupMap.delete(effect2)}},cb?immediate?job(!0):oldValue=effect2.run():scheduler?scheduler(job.bind(null,!0),!0):effect2.run(),watchHandle.pause=effect2.pause.bind(effect2),watchHandle.resume=effect2.resume.bind(effect2),watchHandle.stop=watchHandle,watchHandle}function traverse(value,depth=1/0,seen){if(depth<=0||!isObject(value)||value.__v_skip||(seen=seen||new Set,seen.has(value)))return value;if(seen.add(value),depth--,isRef(value))traverse(value.value,depth,seen);else if(isArray(value))for(let i=0;i<value.length;i++)traverse(value[i],depth,seen);else if(isSet(value)||isMap(value))value.forEach(v=>{traverse(v,depth,seen)});else if(isPlainObject(value)){for(let key in value)traverse(value[key],depth,seen);for(let key of Object.getOwnPropertySymbols(value))Object.prototype.propertyIsEnumerable.call(value,key)&&traverse(value[key],depth,seen)}return value}function callWithErrorHandling(fn,instance,type,args){try{return args?fn(...args):fn()}catch(err){handleError(err,instance,type)}}function callWithAsyncErrorHandling(fn,instance,type,args){if(isFunction(fn)){let res=callWithErrorHandling(fn,instance,type,args);return res&&isPromise(res)&&res.catch(err=>{handleError(err,instance,type)}),res}if(isArray(fn)){let values=[];for(let i=0;i<fn.length;i++)values.push(callWithAsyncErrorHandling(fn[i],instance,type,args));return values}}function handleError(err,instance,type,throwInDev=!0){let contextVNode=instance?instance.vnode:null,{errorHandler,throwUnhandledErrorInProduction}=instance&&instance.appContext.config||EMPTY_OBJ;if(instance){let cur=instance.parent,exposedInstance=instance.proxy,errorInfo=`https://vuejs.org/error-reference/#runtime-${type}`;for(;cur;){let errorCapturedHooks=cur.ec;if(errorCapturedHooks){for(let i=0;i<errorCapturedHooks.length;i++)if(errorCapturedHooks[i](err,exposedInstance,errorInfo)===!1)return}cur=cur.parent}if(errorHandler){pauseTracking(),callWithErrorHandling(errorHandler,null,10,[err,exposedInstance,errorInfo]),resetTracking();return}}logError(err,type,contextVNode,throwInDev,throwUnhandledErrorInProduction)}function logError(err,type,contextVNode,throwInDev=!0,throwInProd=!1){if(throwInProd)throw err;console.error(err)}var queue=[],flushIndex=-1,pendingPostFlushCbs=[],activePostFlushCbs=null,postFlushIndex=0,resolvedPromise=Promise.resolve(),currentFlushPromise=null;function findInsertionIndex(id){let start=flushIndex+1,end=queue.length;for(;start<end;){let middle=start+end>>>1,middleJob=queue[middle],middleJobId=getId(middleJob);middleJobId<id||middleJobId===id&&middleJob.flags&2?start=middle+1:end=middle}return start}function queueJob(job){if(!(job.flags&1)){let jobId=getId(job),lastJob=queue[queue.length-1];!lastJob||!(job.flags&2)&&jobId>=getId(lastJob)?queue.push(job):queue.splice(findInsertionIndex(jobId),0,job),job.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(cb){isArray(cb)?pendingPostFlushCbs.push(...cb):activePostFlushCbs&&cb.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,cb):cb.flags&1||(pendingPostFlushCbs.push(cb),cb.flags|=1),queueFlush()}function flushPostFlushCbs(seen){if(pendingPostFlushCbs.length){let deduped=[...new Set(pendingPostFlushCbs)].sort((a,b)=>getId(a)-getId(b));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...deduped);return}for(activePostFlushCbs=deduped,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){let cb=activePostFlushCbs[postFlushIndex];cb.flags&4&&(cb.flags&=-2),cb.flags&8||cb(),cb.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}var getId=job=>job.id==null?job.flags&2?-1:1/0:job.id;function flushJobs(seen){let check=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){let job=queue[flushIndex];job&&!(job.flags&8)&&(job.flags&4&&(job.flags&=-2),callWithErrorHandling(job,job.i,job.i?15:14),job.flags&4||(job.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){let job=queue[flushIndex];job&&(job.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(seen),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs(seen)}}var currentRenderingInstance=null;var TeleportEndKey=Symbol("_vte");var leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");var requestIdleCallback=getGlobalThis().requestIdleCallback||(cb=>setTimeout(cb,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(id=>clearTimeout(id));function injectHook(type,hook,target=currentInstance,prepend=!1){if(target){let hooks=target[type]||(target[type]=[]),wrappedHook=hook.__weh||(hook.__weh=(...args)=>{pauseTracking();let reset=setCurrentInstance(target),res=callWithAsyncErrorHandling(hook,target,type,args);return reset(),resetTracking(),res});return prepend?hooks.unshift(wrappedHook):hooks.push(wrappedHook),wrappedHook}}var createHook=lifecycle=>(hook,target=currentInstance)=>{(!isInSSRComponentSetup||lifecycle==="sp")&&injectHook(lifecycle,(...args)=>hook(...args),target)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");var NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var currentApp=null;function inject(key,defaultValue,treatDefaultAsFactory=!1){let instance=getCurrentInstance();if(instance||currentApp){let provides=currentApp?currentApp._context.provides:instance?instance.parent==null||instance.ce?instance.vnode.appContext&&instance.vnode.appContext.provides:instance.parent.provides:void 0;if(provides&&key in provides)return provides[key];if(arguments.length>1)return treatDefaultAsFactory&&isFunction(defaultValue)?defaultValue.call(instance&&instance.proxy):defaultValue}}var queuePostRenderEffect=queueEffectWithSuspense;var ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>{{let ctx=inject(ssrContextKey);return ctx}};function watch2(source,cb,options){return doWatch(source,cb,options)}function doWatch(source,cb,options=EMPTY_OBJ){let{immediate,deep,flush,once}=options,baseWatchOptions=extend({},options),runsImmediately=cb&&immediate||!cb&&flush!=="post",ssrCleanup;if(isInSSRComponentSetup){if(flush==="sync"){let ctx=useSSRContext();ssrCleanup=ctx.__watcherHandles||(ctx.__watcherHandles=[])}else if(!runsImmediately){let watchStopHandle=()=>{};return watchStopHandle.stop=NOOP,watchStopHandle.resume=NOOP,watchStopHandle.pause=NOOP,watchStopHandle}}let instance=currentInstance;baseWatchOptions.call=(fn,type,args)=>callWithAsyncErrorHandling(fn,instance,type,args);let isPre=!1;flush==="post"?baseWatchOptions.scheduler=job=>{queuePostRenderEffect(job,instance&&instance.suspense)}:flush!=="sync"&&(isPre=!0,baseWatchOptions.scheduler=(job,isFirstRun)=>{isFirstRun?job():queueJob(job)}),baseWatchOptions.augmentJob=job=>{cb&&(job.flags|=4),isPre&&(job.flags|=2,instance&&(job.id=instance.uid,job.i=instance))};let watchHandle=watch(source,cb,baseWatchOptions);return isInSSRComponentSetup&&(ssrCleanup?ssrCleanup.push(watchHandle):runsImmediately&&watchHandle()),watchHandle}function queueEffectWithSuspense(fn,suspense){suspense&&suspense.pendingBranch?isArray(fn)?suspense.effects.push(...fn):suspense.effects.push(fn):queuePostFlushCb(fn)}var Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc");var emptyAppContext=createAppContext();var currentInstance=null,getCurrentInstance=()=>currentInstance||currentRenderingInstance,internalSetCurrentInstance,setInSSRSetupState;{let g=getGlobalThis(),registerGlobalSetter=(key,setter)=>{let setters;return(setters=g[key])||(setters=g[key]=[]),setters.push(setter),v=>{setters.length>1?setters.forEach(set=>set(v)):setters[0](v)}};internalSetCurrentInstance=registerGlobalSetter("__VUE_INSTANCE_SETTERS__",v=>currentInstance=v),setInSSRSetupState=registerGlobalSetter("__VUE_SSR_SETTERS__",v=>isInSSRComponentSetup=v)}var setCurrentInstance=instance=>{let prev=currentInstance;return internalSetCurrentInstance(instance),instance.scope.on(),()=>{instance.scope.off(),internalSetCurrentInstance(prev)}};var isInSSRComponentSetup=!1;var computed2=(getterOrOptions,debugOptions)=>computed(getterOrOptions,debugOptions,isInSSRComponentSetup);var import_webextension_polyfill2=__toESM(require_browser_polyfill(),1);function tryOnScopeDispose(fn){return getCurrentScope()?(onScopeDispose(fn),!0):!1}var isClient=typeof window<"u"&&typeof document<"u",isWorker=typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;var toString=Object.prototype.toString,isObject2=val=>toString.call(val)==="[object Object]";function createFilterWrapper(filter,fn){function wrapper(...args){return new Promise((resolve,reject)=>{Promise.resolve(filter(()=>fn.apply(this,args),{fn,thisArg:this,args})).then(resolve).catch(reject)})}return wrapper}var bypassFilter=invoke=>invoke();function toArray(value){return Array.isArray(value)?value:[value]}function cacheStringFunction2(fn){let cache=Object.create(null);return str=>cache[str]||(cache[str]=fn(str))}var hyphenateRE2=/\B([A-Z])/g,hyphenate2=cacheStringFunction2(str=>str.replace(hyphenateRE2,"-$1").toLowerCase()),camelizeRE2=/-(\w)/g,camelize2=cacheStringFunction2(str=>str.replace(camelizeRE2,(_,c)=>c?c.toUpperCase():""));function watchWithFilter(source,cb,options={}){let{eventFilter=bypassFilter,...watchOptions}=options;return watch2(source,createFilterWrapper(eventFilter,cb),watchOptions)}function watchImmediate(source,cb,options){return watch2(source,cb,{...options,immediate:!0})}var defaultWindow=isClient?window:void 0,defaultDocument=isClient?window.document:void 0,defaultNavigator=isClient?window.navigator:void 0,defaultLocation=isClient?window.location:void 0;function unrefElement(elRef){var _a;let plain=toValue(elRef);return(_a=plain?.$el)!=null?_a:plain}function useEventListener(...args){let cleanups=[],cleanup=()=>{cleanups.forEach(fn=>fn()),cleanups.length=0},register=(el,event,listener,options)=>(el.addEventListener(event,listener,options),()=>el.removeEventListener(event,listener,options)),firstParamTargets=computed2(()=>{let test=toArray(toValue(args[0])).filter(e=>e!=null);return test.every(e=>typeof e!="string")?test:void 0}),stopWatch=watchImmediate(()=>{var _a,_b;return[(_b=(_a=firstParamTargets.value)==null?void 0:_a.map(e=>unrefElement(e)))!=null?_b:[defaultWindow].filter(e=>e!=null),toArray(toValue(firstParamTargets.value?args[1]:args[0])),toArray(unref(firstParamTargets.value?args[2]:args[1])),toValue(firstParamTargets.value?args[3]:args[2])]},([raw_targets,raw_events,raw_listeners,raw_options])=>{if(cleanup(),!raw_targets?.length||!raw_events?.length||!raw_listeners?.length)return;let optionsClone=isObject2(raw_options)?{...raw_options}:raw_options;cleanups.push(...raw_targets.flatMap(el=>raw_events.flatMap(event=>raw_listeners.map(listener=>register(el,event,listener,optionsClone)))))},{flush:"post"}),stop2=()=>{stopWatch(),cleanup()};return tryOnScopeDispose(cleanup),stop2}var ssrWidthSymbol=Symbol("vueuse-ssr-width");var _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(key,fallback){return handlers[key]||fallback}function guessSerializerType(rawInit){return rawInit==null?"any":rawInit instanceof Set?"set":rawInit instanceof Map?"map":rawInit instanceof Date?"date":typeof rawInit=="boolean"?"boolean":typeof rawInit=="string"?"string":typeof rawInit=="object"?"object":Number.isNaN(rawInit)?"any":"number"}var StorageSerializers={boolean:{read:v=>v==="true",write:v=>String(v)},object:{read:v=>JSON.parse(v),write:v=>JSON.stringify(v)},number:{read:v=>Number.parseFloat(v),write:v=>String(v)},any:{read:v=>v,write:v=>String(v)},string:{read:v=>v,write:v=>String(v)},map:{read:v=>new Map(JSON.parse(v)),write:v=>JSON.stringify(Array.from(v.entries()))},set:{read:v=>new Set(JSON.parse(v)),write:v=>JSON.stringify(Array.from(v))},date:{read:v=>new Date(v),write:v=>v.toISOString()}};function useStorageAsync(key,initialValue,storage2,options={}){var _a;let{flush="pre",deep=!0,listenToStorageChanges=!0,writeDefaults=!0,mergeDefaults=!1,shallow,window:window2=defaultWindow,eventFilter,onError=e=>{console.error(e)},onReady}=options,rawInit=toValue(initialValue),type=guessSerializerType(rawInit),data=(shallow?shallowRef:ref)(toValue(initialValue)),serializer=(_a=options.serializer)!=null?_a:StorageSerializers[type];if(!storage2)try{storage2=getSSRHandler("getDefaultStorageAsync",()=>{var _a2;return(_a2=defaultWindow)==null?void 0:_a2.localStorage})()}catch(e){onError(e)}async function read(event){if(!(!storage2||event&&event.key!==key))try{let rawValue=event?event.newValue:await storage2.getItem(key);if(rawValue==null)data.value=rawInit,writeDefaults&&rawInit!==null&&await storage2.setItem(key,await serializer.write(rawInit));else if(mergeDefaults){let value=await serializer.read(rawValue);typeof mergeDefaults=="function"?data.value=mergeDefaults(value,rawInit):type==="object"&&!Array.isArray(value)?data.value={...rawInit,...value}:data.value=value}else data.value=await serializer.read(rawValue)}catch(e){onError(e)}}let promise=new Promise(resolve=>{read().then(()=>{onReady?.(data.value),resolve(data)})});return window2&&listenToStorageChanges&&useEventListener(window2,"storage",e=>Promise.resolve().then(()=>read(e)),{passive:!0}),storage2&&watchWithFilter(data,async()=>{try{data.value==null?await storage2.removeItem(key):await storage2.setItem(key,await serializer.write(data.value))}catch(e){onError(e)}},{flush,deep,eventFilter}),Object.assign(data,{then:promise.then.bind(promise),catch:promise.catch.bind(promise)}),data}var DEFAULT_UNITS=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}];var import_webextension_polyfill=__toESM(require_browser_polyfill(),1),storageLocal={removeItem(key){return import_webextension_polyfill.storage.local.remove(key)},setItem(key,value){return import_webextension_polyfill.storage.local.set({[key]:value})},async getItem(key){let value=(await import_webextension_polyfill.storage.local.get(key))[key];return value!=null?String(value):null}};function useStorageLocal(key,initialValue,options){return useStorageAsync(key,initialValue,storageLocal,options)}var storageDemo=useStorageLocal("webext-demo","Storage Demo"),defaultAppAuthTokens={accessToken:"",refreshToken:"",accessTokenExpiresAt:null,refreshTokenExpiresAt:null,mid:null,lastUpdatedAt:null},appAuthTokens=useStorageLocal("appAuthTokens",defaultAppAuthTokens,{mergeDefaults:!0}),legacyAccessKey=useStorageLocal("accessKey","");watch2(()=>legacyAccessKey.value,value=>{value&&(appAuthTokens.value.accessToken||(appAuthTokens.value={...appAuthTokens.value,accessToken:value,lastUpdatedAt:Date.now()}),legacyAccessKey.value="")},{immediate:!0});function resetAppAuthTokens(){appAuthTokens.value={...defaultAppAuthTokens},legacyAccessKey.value=""}var FROSTED_GLASS_BLUR_MIN_PX=1,FROSTED_GLASS_BLUR_MAX_PX=20,defaultGridColumns={base:1,sm:2,md:3,lg:4,xl:5,xxl:6};var originalLocalSettings={locallyUploadedWallpaper:null,customizeCSS:!1,customizeCSSContent:""},originalSettings={touchScreenOptimization:!1,showHomeButtonInTouchMode:!0,enableGridLayoutSwitcher:!0,enableHorizontalScrolling:!1,showIPLocation:!0,showSex:!0,showCommentHostTag:!0,adjustCommentImageHeight:!0,enlargeFavoriteDialog:!1,externalWatchLaterButton:!1,gridColumns:{...defaultGridColumns},language:"",customizeFont:"default",fontFamily:"",overrideDanmakuFont:!0,removeTheIndentFromChinesePunctuation:!1,enableFrostedGlass:!1,frostedGlassBlurIntensity:10,disableShadow:!1,videoCardLinkOpenMode:"newTab",topBarLinkOpenMode:"currentTabIfNotHomepage",searchBarLinkOpenMode:"currentTabIfNotHomepage",closeDrawerWithoutPressingEscAgain:!1,blockAds:!1,blockTopSearchPageAds:!1,cleanUrlArgument:!0,enableVideoPreview:!0,enableVideoCtrlBarOnVideoCard:!1,hoverVideoCardDelayed:!1,showVideoCardRecommendTag:!0,autoHideTopBar:!1,videoPageTopBarConfig:"showOnScroll",alwaysUseTransparentTopBar:!1,showTopBarThemeColorGradient:!0,showBewlyOrBiliTopBarSwitcher:!0,showBewlyOrBiliPageSwitcher:!0,topBarIconBadges:"number",showWatchLaterBadge:!1,topBarComponentsConfig:[{key:"moments",visible:!0,badgeType:"number"},{key:"favorites",visible:!0,badgeType:"number"},{key:"history",visible:!0,badgeType:"number"},{key:"watchLater",visible:!0,badgeType:"number"},{key:"creatorCenter",visible:!0,badgeType:"none"},{key:"upload",visible:!0,badgeType:"none"},{key:"notifications",visible:!0,badgeType:"number"}],topBarPinnedChannels:[],openNotificationsPageAsDrawer:!0,showBCoinReceiveReminder:!0,autoReceiveBCoinCoupon:!1,autoReceiveVipExp:!1,filterArticlesInMoments:!0,alwaysUseDock:!1,autoHideDock:!1,halfHideDock:!1,dockPosition:"right",dockItemsConfig:[],disableDockGlowingEffect:!1,disableLightDarkModeSwitcherOnDock:!1,backToTopAndRefreshButtonsAreSeparated:!0,enableUndoRefreshButton:!0,sidebarPosition:"right",autoHideSidebar:!1,theme:"auto",themeColor:"#00a1d6",darkModeBaseColor:"#2a2d32",useLinearGradientThemeColorBackground:!1,wallpaperMode:"buildIn",wallpaper:"",enableWallpaperMasking:!1,wallpaperMaskOpacity:80,wallpaperBlurIntensity:0,wallpaperCacheTime:0,searchPageDarkenOnSearchFocus:!0,searchPageBlurredOnSearchFocus:!1,searchPageLogoColor:"themeColor",searchPageLogoGlow:!0,searchPageShowLogo:!0,searchPageSearchBarFocusCharacter:"",individuallySetSearchPageWallpaper:!1,searchPageWallpaperMode:"buildIn",searchPageWallpaper:"",searchPageEnableWallpaperMasking:!1,searchPageWallpaperMaskOpacity:80,searchPageWallpaperBlurIntensity:0,searchPageWallpaperCacheTime:0,showHotSearchInTopBar:!0,showSearchRecommendation:!1,usePluginSearchResultsPage:!0,searchResultsPaginationMode:"scroll",recommendationMode:"web",autoSwitchRecommendationMode:!0,disableFilterForFollowedUser:!1,filterOutVerticalVideos:!1,enableFilterByViewCount:!1,filterByViewCount:1e4,enableFilterByDuration:!1,filterByDuration:3600,enableFilterByTitle:!1,filterByTitle:[],enableFilterByUser:!1,filterByUser:[],enableFilterByPublishTime:!1,filterByPublishTime:30,followingTabShowLivestreamingVideos:!1,followingFilterChargingVideos:!1,followingFilterDynamicVideos:!1,useFollowingNewLayout:!1,followingInactiveDays:100,homePageTabVisibilityList:[],alwaysShowTabsOnHomePage:!1,homeAdaptiveTitleFontSize:16,homeAdaptiveTitleAutoSize:!0,videoCardTitleFontSize:"base",videoCardAuthorFontSize:"sm",videoCardMetaFontSize:"xs",videoCardLayout:"modern",videoCardShadowCurve:[{position:0,opacity:80},{position:30,opacity:70},{position:100,opacity:0}],videoCardShadowHeight:1,useSearchPageModeOnHomePage:!1,searchPageModeWallpaperFixed:!1,preserveForYouState:!1,adaptToOtherPageStyles:!0,showTopBar:!0,useOriginalBilibiliTopBar:!1,useOriginalBilibiliHomepage:!1,defaultVideoPlayerMode:"default",defaultDanmakuState:"system",keepCollectionVideoDefaultMode:!1,autoExitFullscreenOnEnd:!1,autoExitFullscreenExcludeAutoPlay:!1,useBilibiliDefaultAutoPlay:!0,autoPlayMultipart:"autoPlay",autoPlayCollection:"autoPlay",autoPlayRecommend:"autoPlay",autoPlayPlaylist:"autoPlay",keyboard:!0,videoPlayerScroll:!0,shortcuts:{danmuStatus:{key:"Shift+D",enabled:!0},webFullscreen:{key:"W",enabled:!0},widescreen:{key:"T",enabled:!0},shortStepBackward:{key:"J",enabled:!0},longStepBackward:{key:"Shift+J",enabled:!0},playPause:{key:"K",enabled:!0},shortStepForward:{key:"L",enabled:!0},longStepForward:{key:"Shift+L",enabled:!0},pip:{key:"P",enabled:!0},turnOffLight:{key:"I",enabled:!0},caption:{key:"C",enabled:!0},increasePlaybackRate:{key:"+",enabled:!0},decreasePlaybackRate:{key:"-",enabled:!0},resetPlaybackRate:{key:"0",enabled:!0},previousFrame:{key:",",enabled:!0},nextFrame:{key:".",enabled:!0},replay:{key:"Shift+Backspace",enabled:!0},increaseVideoSize:{key:"Shift++",enabled:!0},decreaseVideoSize:{key:"Shift+-",enabled:!0},resetVideoSize:{key:"Shift+0",enabled:!0},videoTitle:{key:"B",enabled:!0},videoTime:{key:"G",enabled:!0},clockTime:{key:"H",enabled:!0},homeRefresh:{key:"R",enabled:!0}},enableVolumeNormalization:!1,targetVolume:50,normalizationStrength:12,adaptiveGainSpeed:5,voiceGateDb:-34,volumeNormalizationDebug:!1,rememberPlaybackRate:!1,savedPlaybackRate:1,enableRandomPlay:!1,randomPlayMode:"manual",minVideosForRandom:5},settings=useStorageLocal("settings",originalSettings,{mergeDefaults:!0});watch2(()=>settings.value,value=>{let record=value;Number.isFinite(record.frostedGlassBlurIntensity)||(record.frostedGlassBlurIntensity=originalSettings.frostedGlassBlurIntensity),"reduceFrostedGlassBlur"in record&&(record.reduceFrostedGlassBlur===!0&&record.frostedGlassBlurIntensity===originalSettings.frostedGlassBlurIntensity&&(record.frostedGlassBlurIntensity=10),Reflect.deleteProperty(record,"reduceFrostedGlassBlur")),record.frostedGlassBlurIntensity<FROSTED_GLASS_BLUR_MIN_PX&&(record.frostedGlassBlurIntensity=FROSTED_GLASS_BLUR_MIN_PX),record.frostedGlassBlurIntensity>FROSTED_GLASS_BLUR_MAX_PX&&(record.frostedGlassBlurIntensity=FROSTED_GLASS_BLUR_MAX_PX);let autoPlayFields=["autoPlayMultipart","autoPlayCollection","autoPlayRecommend","autoPlayPlaylist"];if(autoPlayFields.some(field=>typeof record[field]=="boolean"))for(let field of autoPlayFields)typeof record[field]=="boolean"&&(record[field]=record[field]?"autoPlay":"pauseAtEnd");"useBilibiliDefaultAutoPlay"in record||(record.useBilibiliDefaultAutoPlay=!0),"disableFrostedGlass"in record&&(record.enableFrostedGlass=!record.disableFrostedGlass,Reflect.deleteProperty(record,"disableFrostedGlass")),record.gridColumns&&typeof record.gridColumns=="object"&&"base"in record.gridColumns&&Object.keys(record.gridColumns).length>0||import_webextension_polyfill2.default.storage.local.get(["gridColumns"]).then(result=>{if(result.gridColumns)try{let oldGridColumns=result.gridColumns;typeof oldGridColumns=="string"&&(oldGridColumns=JSON.parse(oldGridColumns)),oldGridColumns&&typeof oldGridColumns=="object"&&"base"in oldGridColumns?(record.gridColumns=oldGridColumns,settings.value=record,import_webextension_polyfill2.default.storage.local.remove(["gridColumns"])):(record.gridColumns={...defaultGridColumns},settings.value=record)}catch{record.gridColumns={...defaultGridColumns},settings.value=record}else record.gridColumns={...defaultGridColumns},settings.value=record})},{immediate:!0});var localSettings=useStorageLocal("localSettings",originalLocalSettings,{mergeDefaults:!0});async function migrateOldSettings(){try{let settingsData=(await import_webextension_polyfill2.default.storage.local.get("settings")).settings;if(settingsData&&typeof settingsData=="string"){let parsedSettings=JSON.parse(settingsData);if("locallyUploadedWallpaper"in parsedSettings||"customizeCSS"in parsedSettings||"customizeCSSContent"in parsedSettings){let migratedLocalSettings={locallyUploadedWallpaper:parsedSettings.locallyUploadedWallpaper||null,customizeCSS:parsedSettings.customizeCSS||!1,customizeCSSContent:parsedSettings.customizeCSSContent||""};await import_webextension_polyfill2.default.storage.local.set({localSettings:JSON.stringify(migratedLocalSettings)}),delete parsedSettings.locallyUploadedWallpaper,delete parsedSettings.customizeCSS,delete parsedSettings.customizeCSSContent,await import_webextension_polyfill2.default.storage.local.set({settings:JSON.stringify(parsedSettings)}),console.log("\u2705 \u8BBE\u7F6E\u8FC1\u79FB\u5B8C\u6210\uFF1A\u5DF2\u5C06\u672C\u5730\u5B58\u50A8\u76F8\u5173\u8BBE\u7F6E\u8FC1\u79FB\u5230\u72EC\u7ACB\u5B58\u50A8")}}}catch(error){console.error("\u274C \u8BBE\u7F6E\u8FC1\u79FB\u5931\u8D25:",error)}}migrateOldSettings();var gridLayout=useStorageLocal("gridLayout",ref({home:"adaptive"}),{mergeDefaults:!0}),gridColumns=useStorageLocal("gridColumns",ref({...defaultGridColumns}),{mergeDefaults:!0}),defaultGridBreakpoints=[{minWidth:0,columns:1},{minWidth:640,columns:2},{minWidth:900,columns:3},{minWidth:1200,columns:4},{minWidth:1500,columns:5},{minWidth:1800,columns:6}],gridBreakpoints=useStorageLocal("gridBreakpoints",ref(defaultGridBreakpoints),{mergeDefaults:!0}),sidePanel=useStorageLocal("sidePanel",ref({home:!0}),{mergeDefaults:!0});var import_md5=__toESM(require_md5(),1);function appSign(params,appkey,appsec){params.appkey=appkey;let searchParams=new URLSearchParams(params);return searchParams.sort(),(0,import_md5.default)(searchParams.toString()+appsec)}var TVAppKey={appkey:"4409e2ce8ffd12b8",appsec:"59b43e04ad6965f34319062b478f83dd"};var APP_TOKEN_REFRESH_ENDPOINTS=["https://passport.bilibili.com/api/v3/oauth2/refresh_token","https://passport.bilibili.com/api/v2/oauth2/refresh_token"];async function refreshAppAccessToken(){let{accessToken,refreshToken}=appAuthTokens.value;if(!accessToken||!refreshToken)return!1;let ts=Math.floor(Date.now()/1e3),basePayload={access_token:accessToken,refresh_token:refreshToken,ts:ts.toString()};for(let endpoint of APP_TOKEN_REFRESH_ENDPOINTS)try{let payload={...basePayload},sign=appSign({...payload},TVAppKey.appkey,TVAppKey.appsec),body=new URLSearchParams({...payload,appkey:TVAppKey.appkey,sign}),response=await fetch(endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body});if(!response.ok)continue;let data=await response.json();if(data.code!==0||!data.data)continue;let tokenInfo=data.data.token_info||{},refreshInfo=data.data.refresh_token_info||{},nextAccessToken=tokenInfo.access_token||appAuthTokens.value.accessToken,nextRefreshToken=tokenInfo.refresh_token||appAuthTokens.value.refreshToken,expiresIn=tokenInfo.expires_in??null,refreshExpiresIn=refreshInfo.expires_in??null;return appAuthTokens.value={accessToken:nextAccessToken,refreshToken:nextRefreshToken,accessTokenExpiresAt:expiresIn?Date.now()+expiresIn*1e3:null,refreshTokenExpiresAt:refreshExpiresIn?Date.now()+refreshExpiresIn*1e3:appAuthTokens.value.refreshTokenExpiresAt,mid:tokenInfo.mid??appAuthTokens.value.mid,lastUpdatedAt:Date.now()},!0}catch(error){console.error("\u5237\u65B0 APP access_token \u5931\u8D25:",error)}return!1}var CHECK_INTERVAL=300*1e3,REFRESH_BUFFER=600*1e3,MIN_INTERVAL=60*1e3,timer=null,refreshing=!1;function clearTimer(){timer&&(clearInterval(timer),timer=null)}async function ensureFreshTokens(){let tokens=appAuthTokens.value;if(!tokens.accessToken||!tokens.refreshToken)return;if(tokens.refreshTokenExpiresAt&&tokens.refreshTokenExpiresAt<=Date.now()){console.warn("[BewlyCat] APP refresh token \u5DF2\u8FC7\u671F\uFF0C\u6E05\u9664\u6388\u6743\u3002"),resetAppAuthTokens();return}if(!(!tokens.accessTokenExpiresAt||!(tokens.accessTokenExpiresAt<=Date.now()+REFRESH_BUFFER))&&!refreshing){refreshing=!0;try{await refreshAppAccessToken()||console.warn("[BewlyCat] APP access token \u5237\u65B0\u5931\u8D25\uFF0C\u8BF7\u91CD\u65B0\u6388\u6743\u3002")}finally{refreshing=!1}}}function setupAppAuthScheduler(){clearTimer(),timer=setInterval(()=>{ensureFreshTokens()},Math.max(CHECK_INTERVAL,MIN_INTERVAL)),ensureFreshTokens()}var import_webextension_polyfill3=__toESM(require_browser_polyfill(),1);function onMessage(type,handler){import_webextension_polyfill3.default.runtime.onMessage.addListener((message,sender)=>{if(message?.type===type){let result=handler(message.data,sender);return result instanceof Promise?result:Promise.resolve(result)}return!1})}var import_webextension_polyfill4=__toESM(require_browser_polyfill(),1);var MIXIN_KEY_ENC_TAB=[46,47,18,2,53,8,23,32,15,50,10,31,58,3,45,35,27,43,5,49,33,9,42,19,29,28,14,39,12,38,41,13,37,48,7,16,24,55,40,61,26,17,0,1,60,51,30,4,22,25,54,21,56,59,6,63,57,62,11,36,20,34,44,52],wbiKeysCache=null,fetchingKeysPromise=null;function md52(text){function rotateLeft(value,amount){return value<<amount|value>>>32-amount}function addUnsigned(x2,y){let result=(x2&2147483647)+(y&2147483647);return(x2&2147483648)!==0||(y&2147483648)!==0?(result&2147483648)!==0?result^2147483648|2147483648:result|2147483648:result}function f(x2,y,z){return x2&y|~x2&z}function g(x2,y,z){return x2&z|y&~z}function h2(x2,y,z){return x2^y^z}function i(x2,y,z){return y^(x2|~z)}function ff(a2,b2,c2,d2,x2,s,ac){return a2=addUnsigned(a2,addUnsigned(addUnsigned(f(b2,c2,d2),x2),ac)),addUnsigned(rotateLeft(a2,s),b2)}function gg(a2,b2,c2,d2,x2,s,ac){return a2=addUnsigned(a2,addUnsigned(addUnsigned(g(b2,c2,d2),x2),ac)),addUnsigned(rotateLeft(a2,s),b2)}function hh(a2,b2,c2,d2,x2,s,ac){return a2=addUnsigned(a2,addUnsigned(addUnsigned(h2(b2,c2,d2),x2),ac)),addUnsigned(rotateLeft(a2,s),b2)}function ii(a2,b2,c2,d2,x2,s,ac){return a2=addUnsigned(a2,addUnsigned(addUnsigned(i(b2,c2,d2),x2),ac)),addUnsigned(rotateLeft(a2,s),b2)}function convertToWordArray(text2){let wordArray=[],stringLength=text2.length,numberOfWords=((stringLength+8-(stringLength+8)%64)/64+1)*16;for(let wordCount=0;wordCount<numberOfWords;wordCount++)wordArray[wordCount]=0;let bytePosition=0,byteCount=0;for(;byteCount<stringLength;)wordArray[bytePosition]=(wordArray[bytePosition]|text2.charCodeAt(byteCount)<<8*(byteCount%4))>>>0,byteCount%4===3&&bytePosition++,byteCount++;return wordArray[bytePosition]=(wordArray[bytePosition]|128<<8*(byteCount%4))>>>0,wordArray[numberOfWords-2]=stringLength<<3,wordArray[numberOfWords-1]=stringLength>>>29,wordArray}function wordToHex(value){let result="";for(let count=0;count<=3;count++){let byte=value>>>count*8&255;result+=(byte<16?"0":"")+byte.toString(16)}return result}let x=convertToWordArray(text),a=1732584193,b=4023233417,c=2562383102,d=271733878;for(let k=0;k<x.length;k+=16){let AA=a,BB=b,CC=c,DD=d;a=ff(a,b,c,d,x[k+0],7,3614090360),d=ff(d,a,b,c,x[k+1],12,3905402710),c=ff(c,d,a,b,x[k+2],17,606105819),b=ff(b,c,d,a,x[k+3],22,3250441966),a=ff(a,b,c,d,x[k+4],7,4118548399),d=ff(d,a,b,c,x[k+5],12,1200080426),c=ff(c,d,a,b,x[k+6],17,2821735955),b=ff(b,c,d,a,x[k+7],22,4249261313),a=ff(a,b,c,d,x[k+8],7,1770035416),d=ff(d,a,b,c,x[k+9],12,2336552879),c=ff(c,d,a,b,x[k+10],17,4294925233),b=ff(b,c,d,a,x[k+11],22,2304563134),a=ff(a,b,c,d,x[k+12],7,1804603682),d=ff(d,a,b,c,x[k+13],12,4254626195),c=ff(c,d,a,b,x[k+14],17,2792965006),b=ff(b,c,d,a,x[k+15],22,1236535329),a=gg(a,b,c,d,x[k+1],5,4129170786),d=gg(d,a,b,c,x[k+6],9,3225465664),c=gg(c,d,a,b,x[k+11],14,643717713),b=gg(b,c,d,a,x[k+0],20,3921069994),a=gg(a,b,c,d,x[k+5],5,3593408605),d=gg(d,a,b,c,x[k+10],9,38016083),c=gg(c,d,a,b,x[k+15],14,3634488961),b=gg(b,c,d,a,x[k+4],20,3889429448),a=gg(a,b,c,d,x[k+9],5,568446438),d=gg(d,a,b,c,x[k+14],9,3275163606),c=gg(c,d,a,b,x[k+3],14,4107603335),b=gg(b,c,d,a,x[k+8],20,1163531501),a=gg(a,b,c,d,x[k+13],5,2850285829),d=gg(d,a,b,c,x[k+2],9,4243563512),c=gg(c,d,a,b,x[k+7],14,1735328473),b=gg(b,c,d,a,x[k+12],20,2368359562),a=hh(a,b,c,d,x[k+5],4,4294588738),d=hh(d,a,b,c,x[k+8],11,2272392833),c=hh(c,d,a,b,x[k+11],16,1839030562),b=hh(b,c,d,a,x[k+14],23,4259657740),a=hh(a,b,c,d,x[k+1],4,2763975236),d=hh(d,a,b,c,x[k+4],11,1272893353),c=hh(c,d,a,b,x[k+7],16,4139469664),b=hh(b,c,d,a,x[k+10],23,3200236656),a=hh(a,b,c,d,x[k+13],4,681279174),d=hh(d,a,b,c,x[k+0],11,3936430074),c=hh(c,d,a,b,x[k+3],16,3572445317),b=hh(b,c,d,a,x[k+6],23,76029189),a=hh(a,b,c,d,x[k+9],4,3654602809),d=hh(d,a,b,c,x[k+12],11,3873151461),c=hh(c,d,a,b,x[k+15],16,530742520),b=hh(b,c,d,a,x[k+2],23,3299628645),a=ii(a,b,c,d,x[k+0],6,4096336452),d=ii(d,a,b,c,x[k+7],10,1126891415),c=ii(c,d,a,b,x[k+14],15,2878612391),b=ii(b,c,d,a,x[k+5],21,4237533241),a=ii(a,b,c,d,x[k+12],6,1700485571),d=ii(d,a,b,c,x[k+3],10,2399980690),c=ii(c,d,a,b,x[k+10],15,4293915773),b=ii(b,c,d,a,x[k+1],21,2240044497),a=ii(a,b,c,d,x[k+8],6,1873313359),d=ii(d,a,b,c,x[k+15],10,4264355552),c=ii(c,d,a,b,x[k+6],15,2734768916),b=ii(b,c,d,a,x[k+13],21,1309151649),a=ii(a,b,c,d,x[k+4],6,4149444226),d=ii(d,a,b,c,x[k+11],10,3174756917),c=ii(c,d,a,b,x[k+2],15,718787259),b=ii(b,c,d,a,x[k+9],21,3951481745),a=addUnsigned(a,AA),b=addUnsigned(b,BB),c=addUnsigned(c,CC),d=addUnsigned(d,DD)}return(wordToHex(a)+wordToHex(b)+wordToHex(c)+wordToHex(d)).toLowerCase()}function extractKeyFromUrl(url){let match=url.match(/\/([^/]+)\.png$/);return match?match[1]:""}function generateMixinKey(imgKey,subKey){let rawWbiKey=imgKey+subKey,mixinKey="";for(let i=0;i<32;i++)mixinKey+=rawWbiKey[MIXIN_KEY_ENC_TAB[i]];return mixinKey}function encodeWbiParam(value){let filtered=String(value).replace(/[!'()*]/g,"");return encodeURIComponent(filtered)}function storeWbiKeys(imgUrl,subUrl){let imgKey=extractKeyFromUrl(imgUrl),subKey=extractKeyFromUrl(subUrl);imgKey&&subKey&&(wbiKeysCache={imgKey,subKey,timestamp:Date.now()},console.log("[WBI] Stored keys from nav interface"))}function getWbiKeys(){let now=Date.now(),maxAge=1440*60*1e3;if(wbiKeysCache){if(now-wbiKeysCache.timestamp<=maxAge)return wbiKeysCache;wbiKeysCache=null}return null}function addWbiSign(params){let keys=getWbiKeys();if(!keys)return params;let wts=Math.floor(Date.now()/1e3),signParams={...params,wts},sortedKeys=Object.keys(signParams).sort(),queryParts=[];for(let key of sortedKeys){let value=signParams[key];value!=null&&value!==""&&queryParts.push(`${encodeWbiParam(key)}=${encodeWbiParam(value)}`)}let queryString=queryParts.join("&"),mixinKey=generateMixinKey(keys.imgKey,keys.subKey),w_rid=md52(queryString+mixinKey);return{...signParams,w_rid}}async function getBilibiliCookies(){try{return(await(await Promise.resolve().then(()=>__toESM(require_browser_polyfill(),1)).then(m=>m.default)).cookies.getAll({domain:".bilibili.com"})).map(cookie=>`${cookie.name}=${cookie.value}`).join("; ")}catch{return""}}async function initWbiKeys(){return getWbiKeys()?!0:fetchingKeysPromise?await fetchingKeysPromise:(fetchingKeysPromise=(async()=>{try{let cookieStr=await getBilibiliCookies(),headers={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Referer:"https://www.bilibili.com/"};cookieStr&&(headers.Cookie=cookieStr);let navData=await(await fetch("https://api.bilibili.com/x/web-interface/nav",{method:"GET",headers,credentials:"include"})).json();if(navData.code===0&&navData.data&&navData.data.wbi_img){let{img_url,sub_url}=navData.data.wbi_img;if(img_url&&sub_url)return storeWbiKeys(img_url,sub_url),!0}else if(navData.code===-101&&navData.data&&navData.data.wbi_img){let{img_url,sub_url}=navData.data.wbi_img;if(img_url&&sub_url)return storeWbiKeys(img_url,sub_url),!0}return console.warn("[WBI] WBI keys not found in nav response"),!1}catch(error){return console.error("[WBI] Failed to initialize WBI keys:",error),!1}finally{fetchingKeysPromise=null}})(),await fetchingKeysPromise)}function needsWbiSign(url){return url.includes("https://api.bilibili.com/x/web-interface/nav")||url.includes("https://api.bilibili.com/x/web-interface/bili_ticket")?!1:url.includes("/wbi/")?!0:/\/x\/.*\/v[123]\//.test(url)}var ApiRiskControlError=class extends Error{constructor(message="\u68C0\u6D4B\u5230\u98CE\u63A7\u9875\u9762\uFF0CAPI\u8FD4\u56DE\u4E86HTML\u800C\u4E0D\u662FJSON"){super(message),this.name="ApiRiskControlError"}};async function toJsonHandler(data){let contentType=data.headers.get("content-type");if(contentType&&contentType.includes("text/html"))throw new ApiRiskControlError;try{return await data.json()}catch(error){let text=await data.clone().text();throw text.trim().startsWith("<!DOCTYPE")||text.trim().startsWith("<html")?new ApiRiskControlError:error}}function toData(data){return data}function sendResponseHandler(sendResponse){return data=>(sendResponse(data),data)}var AHS={J_D:[toJsonHandler,toData],J_S:[toJsonHandler,sendResponseHandler],S:[sendResponseHandler]};function apiListenerFactory(API_MAP){return async(data,sender)=>{let typedMessage=data,contentScriptQuery=typedMessage.contentScriptQuery;if(!contentScriptQuery||!API_MAP[contentScriptQuery])return console.error(`Cannot find this contentScriptQuery: ${contentScriptQuery}`);if(typeof API_MAP[contentScriptQuery]=="function")return API_MAP[contentScriptQuery](typedMessage,sender);let api=API_MAP[contentScriptQuery];return await doRequest(typedMessage,api)}}async function doRequest(message,api,sendResponse,cookies){try{let{contentScriptQuery,...rest}=message;rest=rest||{};let{_fetch,url,params={},afterHandle}=api,{method,headers={},body}=_fetch,isGET=method.toLocaleLowerCase()==="get",targetParams=Object.assign({},params),targetBody=Object.assign({},body);Object.keys(rest).forEach(key=>{body&&body[key]!==void 0?targetBody[key]=rest[key]:targetParams[key]=rest[key]});let baseUrl=url,needsWbi=needsWbiSign(url);if(needsWbi&&!getWbiKeys())try{await initWbiKeys()}catch(error){console.error("[doRequest] Failed to fetch WBI keys:",error)}let performRequest=useWbi=>{let requestUrl=baseUrl,requestParams=Object.assign({},targetParams);if(needsWbi&&useWbi&&(requestParams=addWbiSign(requestParams)),Object.keys(requestParams).length){let urlParams=new URLSearchParams;for(let key in requestParams){let value=requestParams[key];value!=null&&value!==""&&urlParams.append(key,value)}requestUrl+=`?${urlParams.toString()}`}let requestBody=targetBody;isGET||(requestBody=headers&&headers["Content-Type"]&&headers["Content-Type"].includes("application/x-www-form-urlencoded")?new URLSearchParams(targetBody):JSON.stringify(targetBody));let requestHeaders={...headers};if(cookies){let cookieStr=cookies.map(cookie=>`${cookie.name}=${cookie.value}`).join("; ");requestHeaders["firefox-multi-account-cookie"]=cookieStr}requestHeaders.Referer||(requestHeaders.Referer="https://www.bilibili.com/"),requestUrl.includes("/x/space/wbi/arc/search")&&targetParams.mid&&(requestHeaders.Referer=`https://space.bilibili.com/${targetParams.mid}/`);let fetchOpt={method,headers:requestHeaders,credentials:"include"};return isGET||(fetchOpt.body=requestBody),fetch(requestUrl,fetchOpt)},hasTriedWithoutWbi=!1,executeFullRequest=async useWbi=>{let response=await performRequest(useWbi);if(baseUrl.includes("https://api.bilibili.com/x/web-interface/nav")){let clonedResponse=response.clone();try{let data=await clonedResponse.json();if(data.code===0&&data.data&&data.data.wbi_img){let{img_url,sub_url}=data.data.wbi_img;img_url&&sub_url&&storeWbiKeys(img_url,sub_url)}}catch{}}for(let func of afterHandle)func.name===sendResponseHandler.name&&sendResponse?response=await sendResponseHandler(sendResponse)(response):response=await func(response);return response},executeRequestWithRetry=async()=>{try{return await executeFullRequest(!0)}catch(error){if(needsWbi&&!hasTriedWithoutWbi)return hasTriedWithoutWbi=!0,await executeFullRequest(!1);throw error}};return url=baseUrl+(Object.keys(targetParams).length?"?...":""),executeRequestWithRetry().catch(error=>{if(error instanceof ApiRiskControlError){let riskError=new Error(error.message);throw Object.assign(riskError,{code:-412,isRiskControl:!0}),riskError}let apiError=new Error(error.message||"\u8BF7\u6C42\u5931\u8D25");throw Object.assign(apiError,{code:-1,originalError:error.toString()}),apiError})}catch(e){let initError=new Error(e instanceof Error?e.message:"\u8BF7\u6C42\u521D\u59CB\u5316\u5931\u8D25");return Object.assign(initError,{code:-1,originalError:e instanceof Error?e.toString():String(e)}),Promise.reject(initError)}}var API_ANIME={getPopularAnimeList:{url:"https://api.bilibili.com/pgc/web/rank/list",_fetch:{method:"get"},params:{season_type:1,day:3},afterHandle:AHS.J_D},getAnimeWatchList:{url:"https://api.bilibili.com/x/space/bangumi/follow/list",_fetch:{method:"get"},params:{pn:1,ps:15,type:1,follow_status:0,vmid:""},afterHandle:AHS.J_D},getRecommendAnimeList:{url:"https://api.bilibili.com/pgc/page/web/v3/feed",_fetch:{method:"get"},params:{coursor:0,name:"anime"},afterHandle:AHS.J_D},getAnimeTimeTable:{url:"https://api.bilibili.com/pgc/web/timeline",_fetch:{method:"get"},params:{types:1,before:6,after:6},afterHandle:AHS.J_D},getAnimeDetail:{url:"https://api.bilibili.com/pgc/view/web/season",_fetch:{method:"get"},params:{},afterHandle:AHS.J_D}},anime_default=API_ANIME;var API_AUTH={logout:{url:"https://passport.bilibili.com/login/exit/v2",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{biliCSRF:""}},params:{biliCSRF:""},afterHandle:AHS.J_S},getLoginQRCode:{url:"https://passport.bilibili.com/x/passport-tv-login/qrcode/auth_code",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},params:{appkey:"4409e2ce8ffd12b8",local_id:"0",ts:"0",sign:"e134154ed6add881d28fbdf68653cd9c"},afterHandle:AHS.J_S},qrCodeLogin:{url:"https://passport.bilibili.com/x/passport-tv-login/qrcode/auth_code",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}},params:{appkey:"4409e2ce8ffd12b8",auth_code:"",local_id:"0",ts:"0",sign:"e134154ed6add881d28fbdf68653cd9c"},afterHandle:AHS.J_S}},auth_default=API_AUTH;var API_FAVORITE={getFavoriteCategories:{url:"https://api.bilibili.com/x/v3/fav/folder/created/list-all",_fetch:{method:"get"},params:{up_mid:""},afterHandle:AHS.J_D},getFavoriteResources:{url:"https://api.bilibili.com/x/v3/fav/resource/list",_fetch:{method:"get"},params:{media_id:-1,pn:1,ps:20,keyword:"",order:"mtime",type:0,tid:0,platform:"web"},afterHandle:AHS.J_D},patchDelFavoriteResources:{url:"https://api.bilibili.com/x/v3/fav/resource/batch-del",_fetch:{method:"post"},params:{resources:"",media_id:0,csrf:""},afterHandle:AHS.J_D}},favorite_default=API_FAVORITE;var API_HISTORY={getHistoryList:{url:"https://api.bilibili.com/x/web-interface/history/cursor",_fetch:{method:"get"},params:{ps:20,type:"",view_at:0},afterHandle:AHS.J_D},searchHistoryList:{url:"https://api.bilibili.com/x/web-interface/history/search",_fetch:{method:"get"},params:{pn:1,keyword:"",business:"all"},afterHandle:AHS.J_D},deleteHistoryItem:{url:"https://api.bilibili.com/x/v2/history/delete",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{kid:"",csrf:""}},afterHandle:AHS.J_D},clearAllHistory:{url:"https://api.bilibili.com/x/v2/history/clear",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{csrf:""}},afterHandle:AHS.J_D},getHistoryPauseStatus:{url:"https://api.bilibili.com/x/v2/history/shadow",_fetch:{method:"get"},params:{},afterHandle:AHS.J_D},setHistoryPauseStatus:{url:"https://api.bilibili.com/x/v2/history/shadow/set",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{switch:!1,csrf:""}},afterHandle:AHS.J_D}},history_default=API_HISTORY;var API_LIVE={getFollowingLiveList:{url:"https://api.live.bilibili.com/xlive/web-ucenter/user/following",_fetch:{method:"get"},params:{page:1,page_size:9,ignoreRecord:1,hit_ab:!0},afterHandle:AHS.J_D},getLivePlayUrl:{url:"https://api.live.bilibili.com/room/v1/Room/playUrl",_fetch:{method:"get"},params:{cid:0,platform:"web",qn:80},afterHandle:AHS.J_D}},live_default=API_LIVE;var API_MOMENT={getTopBarNewMomentsCount:{url:"https://api.bilibili.com/x/web-interface/dynamic/entrance",_fetch:{method:"get"},params:{},afterHandle:AHS.J_D},getTopBarMoments:{url:"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/nav",_fetch:{method:"get"},params:{type:"video",update_baseline:"",offset:""},afterHandle:AHS.J_D},getTopBarLiveMoments:{url:"https://api.live.bilibili.com/xlive/web-ucenter/v1/xfetter/FeedList",_fetch:{method:"get"},params:{page:1,pagesize:10},afterHandle:AHS.J_D},getMoments:{url:"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/all",_fetch:{method:"get"},params:{type:"all",offset:"",update_baseline:""},afterHandle:AHS.J_D},getUserMoments:{url:"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/space",_fetch:{method:"get"},params:{host_mid:"",offset:"",features:"itemOpusStyle"},afterHandle:AHS.J_D},getMomentsUpdate:{url:"https://api.bilibili.com/x/polymer/web-dynamic/v1/feed/all/update",_fetch:{method:"get"},params:{type:"video",offset:"",update_baseline:"0"},afterHandle:AHS.J_D}},moment_default=API_MOMENT;var API_NOTIFICATION={getUnreadMsg:{url:"https://api.bilibili.com/x/msgfeed/unread",_fetch:{method:"get"},params:{build:0,mobi_app:"web"},afterHandle:AHS.J_D},getUnreadDm:{url:"https://api.vc.bilibili.com/session_svr/v1/session_svr/single_unread",_fetch:{method:"get"},params:{build:0,mobi_app:"web",unread_type:0},afterHandle:AHS.J_D}},notification_default=API_NOTIFICATION;var API_RANKING={getRankingVideos:{url:"https://api.bilibili.com/x/web-interface/ranking/v2",_fetch:{method:"get"},params:{rid:0,type:"all"},afterHandle:AHS.J_D},getRankingPgc:{url:"https://api.bilibili.com/pgc/season/rank/web/list",_fetch:{method:"get"},params:{season_type:1,day:3},afterHandle:AHS.J_D},getPopularSeriesList:{url:"https://api.bilibili.com/x/web-interface/popular/series/list",_fetch:{method:"get"},params:{},afterHandle:AHS.J_D},getPopularSeriesOne:{url:"https://api.bilibili.com/x/web-interface/popular/series/one",_fetch:{method:"get"},params:{number:1},afterHandle:AHS.J_D},getPreciousVideos:{url:"https://api.bilibili.com/x/web-interface/popular/precious",_fetch:{method:"get"},params:{},afterHandle:AHS.J_D}},ranking_default=API_RANKING;var API_SEARCH={getSearchSuggestion:{url:"https://s.search.bilibili.com/main/suggest",_fetch:{method:"get"},params:{term:"",highlight:""},afterHandle:AHS.J_D},getDefaultSearchRecommendation:{url:"https://api.bilibili.com/x/web-interface/wbi/search/default",_fetch:{method:"get"},params:{},afterHandle:AHS.J_D},getHotSearchList:{url:"https://api.bilibili.com/x/web-interface/wbi/search/square",_fetch:{method:"get"},params:{limit:50,platform:"web"},afterHandle:AHS.J_D},searchAll:{url:"https://api.bilibili.com/x/web-interface/wbi/search/all/v2",_fetch:{method:"get"},params:{__refresh__:!0,_extra:"",context:"",ad_resource:5646,platform:"pc",highlight:1,source_tag:3,web_roll_page:1,keyword:"",page:1,page_size:20,order:"",duration:"",from_source:""},afterHandle:AHS.J_D},searchVideo:{url:"https://api.bilibili.com/x/web-interface/wbi/search/type",_fetch:{method:"get"},params:{search_type:"video",keyword:"",page:1,page_size:20,order:"",duration:0,category_id:"",pubtime_begin_s:0,pubtime_end_s:0,context:""},afterHandle:AHS.J_D},searchBangumi:{url:"https://api.bilibili.com/x/web-interface/search/type",_fetch:{method:"get"},params:{search_type:"media_bangumi",keyword:"",page:1,pagesize:20},afterHandle:AHS.J_D},searchMediaFt:{url:"https://api.bilibili.com/x/web-interface/search/type",_fetch:{method:"get"},params:{search_type:"media_ft",keyword:"",page:1,pagesize:20},afterHandle:AHS.J_D},searchUser:{url:"https://api.bilibili.com/x/web-interface/wbi/search/type",_fetch:{method:"get"},params:{search_type:"bili_user",keyword:"",page:1,pagesize:20,order:"",order_sort:0,user_type:0},afterHandle:AHS.J_D},searchLive:{url:"https://api.bilibili.com/x/web-interface/wbi/search/type",_fetch:{method:"get"},params:{search_type:"live",keyword:"",page:1,pagesize:20,order:""},afterHandle:AHS.J_D},searchLiveRoom:{url:"https://api.bilibili.com/x/web-interface/wbi/search/type",_fetch:{method:"get"},params:{search_type:"live_room",keyword:"",page:1,pagesize:20,order:""},afterHandle:AHS.J_D},searchLiveUser:{url:"https://api.bilibili.com/x/web-interface/wbi/search/type",_fetch:{method:"get"},params:{search_type:"live_user",keyword:"",page:1,page_size:20,order:""},afterHandle:AHS.J_D},searchArticle:{url:"https://api.bilibili.com/x/web-interface/wbi/search/type",_fetch:{method:"get"},params:{search_type:"article",keyword:"",page:1,pagesize:20,order:""},afterHandle:AHS.J_D}},search_default=API_SEARCH;var API_USER={getUserInfo:{url:"https://api.bilibili.com/x/web-interface/nav",_fetch:{method:"get"},afterHandle:AHS.J_D},getUserStat:{url:"https://api.bilibili.com/x/web-interface/nav/stat",_fetch:{method:"get"},afterHandle:AHS.J_D},relationModify:{url:"https://api.bilibili.com/x/relation/modify",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{fid:"",act:1,re_src:11,csrf:""}},afterHandle:AHS.J_D},getRelations:{url:"https://api.bilibili.com/x/relation/relations",_fetch:{method:"get"},params:{fids:""},afterHandle:AHS.J_D},getPrivilegeInfo:{url:"https://api.bilibili.com/x/vip/privilege/my",_fetch:{method:"get"},afterHandle:AHS.J_D},exchangeCoupon:{url:"https://api.bilibili.com/x/vip/privilege/receive",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{type:"1",csrf:""}},afterHandle:AHS.J_D},receiveVipExp:{url:"https://api.bilibili.com/x/vip/experience/add",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{csrf:""}},afterHandle:AHS.J_D},getUserFollowings:{url:"https://api.bilibili.com/x/relation/followings",_fetch:{method:"get"},params:{vmid:"",ps:50,pn:1,order_type:""},afterHandle:AHS.J_D},getUserVideos:{url:"https://api.bilibili.com/x/space/wbi/arc/search",_fetch:{method:"get"},params:{mid:"",ps:30,pn:1,order:"pubdate",tid:0},afterHandle:AHS.J_D},getLoginLog:{url:"https://api.bilibili.com/x/member/web/login/log",_fetch:{method:"get"},params:{jsonp:"jsonp"},afterHandle:AHS.J_D}},user_default=API_USER;var API_VIDEO={getRecommendVideos:{url:"https://api.bilibili.com/x/web-interface/wbi/index/top/feed/rcmd",_fetch:{method:"get"},params:{fresh_type:4,feed_version:"V8",homepage_ver:1,ps:12,fresh_idx:1,fresh_idx_1h:1,fetch_row:void 0,last_showlist:""},afterHandle:AHS.J_D},getAppRecommendVideos:{url:"https://app.bilibili.com/x/v2/feed/index",_fetch:{method:"get"},params:{build:74800100,device:"pad",mobi_app:"iphone",c_locate:"CN",s_locale:"zh-CN",idx:0,appkey:"27eb53fc9058f8c3",access_key:""},afterHandle:AHS.J_D},dislikeVideo:{url:"https://app.bilibili.com/x/feed/dislike",_fetch:{method:"get"},params:{access_key:"",goto:"",id:0,idx:"",reason_id:1,device:"",mobi_app:"",build:0,appkey:"",sign:""},afterHandle:AHS.J_D},undoDislikeVideo:{url:"https://app.bilibili.com/x/feed/dislike/cancel",_fetch:{method:"get"},params:{access_key:"",goto:"",id:0,idx:0,reason_id:1,device:"",mobi_app:"",build:0,sign:"",appkey:""},afterHandle:AHS.J_D},getVideoInfo:{url:"https://api.bilibili.com/x/web-interface/view",_fetch:{method:"get"},params:{aid:"",bvid:""},afterHandle:AHS.J_D},getVideoComments:{url:"https://api.bilibili.com/x/v2/reply",_fetch:{method:"get"},params:{csrf:"",type:1,oid:0,sort:0,nohot:0,pn:1,ps:20},afterHandle:AHS.J_D},getPopularVideos:{url:"https://api.bilibili.com/x/web-interface/popular",_fetch:{method:"get"},params:{pn:1,ps:20},afterHandle:AHS.J_D},getVideoPreview:{url:"https://api.bilibili.com/x/player/wbi/playurl",_fetch:{method:"get"},params:{qn:32,fnver:0,fnval:1,bvid:"",cid:0,web_location:"1550101"},afterHandle:AHS.J_D}},video_default=API_VIDEO;var API_WATCHLATER={saveToWatchLater:{url:"https://api.bilibili.com/x/v2/history/toview/add",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{aid:0,bvid:"",csrf:""}},afterHandle:AHS.J_D},removeFromWatchLater:{url:"https://api.bilibili.com/x/v2/history/toview/del",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{viewed:!1,csrf:""}},params:{aid:0},afterHandle:AHS.J_D},getAllWatchLaterList:{url:"https://api.bilibili.com/x/v2/history/toview",_fetch:{method:"get"},afterHandle:AHS.J_D},getWatchLaterListByPage:{url:"https://api.bilibili.com/x/v2/history/toview/web",_fetch:{method:"get"},params:{pn:1,ps:20},afterHandle:AHS.J_D},clearAllWatchLater:{url:"https://api.bilibili.com/x/v2/history/toview/clear",_fetch:{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:{csrf:""}},afterHandle:AHS.J_D}},watchLater_default=API_WATCHLATER;var API_COLLECTION={AUTH:auth_default,ANIME:anime_default,HISTORY:history_default,FAVORITE:favorite_default,MOMENT:moment_default,NOTIFICATION:notification_default,RANKING:ranking_default,SEARCH:search_default,USER:user_default,VIDEO:video_default,WATCHLATER:watchLater_default,LIVE:live_default,[Symbol.iterator](){return Object.values(this).values()}},FullAPI=Object.assign({},...API_COLLECTION),handleMessage=apiListenerFactory(FullAPI);function setupApiMsgListeners(){Object.keys(FullAPI).forEach(apiName=>{onMessage(apiName,handleMessage)})}var import_webextension_polyfill5=__toESM(require_browser_polyfill(),1);async function handleMessage2(data,sender){if(data.contentScriptQuery==="openLinkInBackground"){let url=data.url?.startsWith("//")?`https:${data.url}`:data.url,windowId=sender?.tab?.windowId,index=sender?.tab?.index;if(windowId===void 0||index===void 0){let[activeTab]=await import_webextension_polyfill5.default.tabs.query({active:!0,currentWindow:!0});windowId??=activeTab?.windowId,index??=activeTab?.index}let createProps={url,active:!1};return windowId!==void 0&&(createProps.windowId=windowId),index!==void 0&&(createProps.index=index+1),import_webextension_polyfill5.default.tabs.create(createProps)}}function setupTabMsgListeners(){onMessage("openLinkInBackground",handleMessage2)}import_webextension_polyfill6.default.runtime.onInstalled.addListener(async()=>{console.log("Extension installed")});initWbiKeys().catch(error=>{console.error("[BewlyCat] WBI keys initialization error:",error)});setupApiMsgListeners();setupTabMsgListeners();setupAppAuthScheduler();
/*! Bundled license information:

is-buffer/index.js:
  (*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@vue/shared/dist/shared.esm-bundler.js:
  (**
  * @vue/shared v3.5.19
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
  (*! #__NO_SIDE_EFFECTS__ *)

@vue/reactivity/dist/reactivity.esm-bundler.js:
  (**
  * @vue/reactivity v3.5.19
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)

@vue/runtime-core/dist/runtime-core.esm-bundler.js:
  (**
  * @vue/runtime-core v3.5.19
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)

@vue/runtime-core/dist/runtime-core.esm-bundler.js:
@vue/runtime-core/dist/runtime-core.esm-bundler.js:
@vue/runtime-core/dist/runtime-core.esm-bundler.js:
  (*! #__NO_SIDE_EFFECTS__ *)

vue/dist/vue.runtime.esm-bundler.js:
  (**
  * vue v3.5.19
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
*/
