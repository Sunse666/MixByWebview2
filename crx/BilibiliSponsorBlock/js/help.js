(()=>{"use strict";var e={3105:function(e,o,n){var i=this&&this.__awaiter||function(e,o,n,i){return new(n||(n=Promise))((function(t,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(s,a)}c((i=i.apply(e,o||[])).next())}))};Object.defineProperty(o,"__esModule",{value:!0});const t=n(8856),r=n(7400),s=n(4070),a=n(7139);function c(){return i(this,void 0,void 0,(function*(){(0,a.localizeHtmlPage)(),yield(0,s.waitFor)((()=>null!==t.default.config)),t.default.config.darkMode||document.documentElement.setAttribute("data-theme","light"),(0,r.showDonationLink)()||(document.getElementById("sbDonate").style.display="none")}))}"complete"===document.readyState?c():document.addEventListener("DOMContentLoaded",c)},4070:function(e,o){var n=this&&this.__awaiter||function(e,o,n,i){return new(n||(n=Promise))((function(t,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(s,a)}c((i=i.apply(e,o||[])).next())}))};Object.defineProperty(o,"__esModule",{value:!0}),o.PromiseTimeoutError=void 0,o.waitFor=function(e){return n(this,arguments,void 0,(function*(e,o=5e3,n=100,i){return yield new Promise(((t,r)=>{setTimeout((()=>{clearTimeout(a),r(`TIMEOUT waiting for ${null==e?void 0:e.toString()}: ${Error().stack}`)}),o);const s=()=>{const o=e();(i?i(o):o)&&(t(o),clearTimeout(a))};let a;const c=()=>setTimeout((()=>{s(),a=c()}),n);a=c(),s()}))}))},o.sleep=function(e){return n(this,void 0,void 0,(function*(){return yield new Promise((o=>{setTimeout(o,e)}))}))},o.objectToURI=function(e,o,n){let i=0;for(const t in o){const r=e.includes("?")||i>0?"&":n?"?":"",s="string"==typeof o[t]?o[t]:JSON.stringify(o[t]);e+=r+encodeURIComponent(t)+"="+encodeURIComponent(s),i++}return e},o.timeoutPomise=function(e){return new Promise(((o,n)=>{e&&setTimeout((()=>{n(new i)}),e)}))},o.isFirefoxOrSafari=t,o.isSafari=r,o.isFirefox=function(){return t()&&!r()};class i extends Error{constructor(e){super("Promise timed out"),this.promise=e}}function t(){return"undefined"!=typeof browser}function r(){return"undefined"!=typeof navigator&&"Apple Computer, Inc."===navigator.vendor}o.PromiseTimeoutError=i},7139:(e,o)=>{function n(e){const o=e.replace(/__MSG_(\w+)__/g,(function(e,o){return o?chrome.i18n.getMessage(o).replace(/</g,"&#60;").replace(/"/g,"&quot;").replace(/\n/g,"<br/>"):""}));return o!=e&&o}Object.defineProperty(o,"__esModule",{value:!0}),o.generateUserID=function(e=36){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";const i="undefined"==typeof window?crypto:window.crypto;if(i&&i.getRandomValues){const t=new Uint32Array(e);i.getRandomValues(t);for(let i=0;i<e;i++)n+=o[t[i]%62];return n}for(let i=0;i<e;i++)n+=o[Math.floor(62*Math.random())];return n},o.localizeHtmlPage=function(){const e=n(document.title);e&&(document.title=e);const o=document.querySelector(".sponsorBlockPageBody"),i=n(o.innerHTML.toString());i&&(o.innerHTML=i)},o.getLocalizedMessage=n},7400:(e,o,n)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.showDonationLink=function(){return"Apple Computer, Inc."!==navigator.vendor&&i.default.config.showDonationLink},o.getIconLink=function(e){return i.default.config.showNewIcon?e:"oldIcon/"+e};const i=n(8856)},8272:e=>{e.exports=JSON.parse('{"serverAddress":"https://www.bsbsb.top","testingServerAddress":"http://127.0.0.1:9876","serverAddressComment":"This specifies the default SponsorBlock server to connect to","categoryList":["sponsor","selfpromo","exclusive_access","interaction","poi_highlight","intro","outro","preview","padding","filler","music_offtopic"],"categorySupport":{"sponsor":["skip","mute","full"],"selfpromo":["skip","mute","full"],"exclusive_access":["full"],"interaction":["skip","mute"],"intro":["skip","mute"],"outro":["skip","mute"],"preview":["skip","mute"],"filler":["skip","mute"],"music_offtopic":["skip"],"poi_highlight":["poi"],"padding":["skip"]},"wikiLinks":{"sponsor":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Sponsor","selfpromo":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Unpaid%20Self%20Promotion","exclusive_access":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Full%20Video%20Labels#%E6%9F%94%E6%80%A7%E6%8E%A8%E5%B9%BF%E5%93%81%E7%89%8C%E5%90%88%E4%BD%9C","interaction":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Interaction%20Reminder%20(Subscribe)","intro":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Intermission%20Intro%20Animation","outro":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Endcards%20Credits%20(Outro)","preview":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Preview%20Recap%20Hook","filler":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Tangents%20Jokes","music_offtopic":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Music%20Non-Music%20Section","poi_highlight":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/HighLight","guidelines":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Submitting%20tips","mute":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Mute%20Segment","padding":"https://github.com/hanydd/BilibiliSponsorBlock/wiki/Sponsor"}}')},8856:(e,o,n)=>{Object.defineProperty(o,"__esModule",{value:!0});const i=n(8272),t=n(9209),r=n(9205);class s extends r.ProtoConfig{resetToDefault(){chrome.storage.sync.set(Object.assign(Object.assign({},this.syncDefaults),{userID:this.config.userID,minutesSaved:this.config.minutesSaved,skipCount:this.config.skipCount,sponsorTimesContributed:this.config.sponsorTimesContributed})),chrome.storage.local.set(Object.assign({},this.localDefaults))}}const a={userID:null,isVip:!1,permissions:{},defaultCategory:"chooseACategory",renderSegmentsAsChapters:!1,whitelistedChannels:[],forceChannelCheck:!1,minutesSaved:0,skipCount:0,sponsorTimesContributed:0,submissionCountSinceCategories:0,showTimeWithSkips:!0,disableSkipping:!1,enableDanmakuSkip:!1,enableAutoSkipDanmakuSkip:!1,enableMenuDanmakuSkip:!1,danmakuOffsetMatchingRegexPattern:"(?:^|(å³|å³æ»‘|æŒ‰|å³ä¸‹|å³å‘|å³æ–¹å‘|â†’|â‡’|â‡¢|â‡¨|â®•|ðŸ¡†|ðŸ º|ðŸ ¾|ðŸ¢’|ðŸ‘‰))(\\d+)(ä¸‹|æ¬¡)?",checkTimeDanmakuSkip:!0,muteSegments:!0,fullVideoSegments:!0,fullVideoLabelsOnThumbnailsMode:t.HideFullVideoLabels.Overlay,manualSkipOnFullVideo:!1,trackViewCount:!0,trackViewCountInPrivate:!0,trackDownvotes:!0,trackDownvotesInPrivate:!1,dontShowNotice:!1,noticeVisibilityMode:t.NoticeVisibilityMode.FadedForAutoSkip,hideVideoPlayerControls:!1,hideInfoButtonPlayerControls:!1,hideDeleteButtonPlayerControls:!1,hideUploadButtonPlayerControls:!1,hideSkipButtonPlayerControls:!1,hideDiscordLaunches:0,hideDiscordLink:!1,invidiousInstances:["invidious.snopyta.org"],serverAddress:i.serverAddress,minDuration:0,skipNoticeDuration:4,skipNoticeDurationBefore:3,advanceSkipNotice:!1,audioNotificationOnSkip:!1,checkForUnlistedVideos:!1,testingServer:!1,ytInfoPermissionGranted:!1,allowExperiments:!0,showDonationLink:!0,showPopupDonationCount:0,showNewFeaturePopups:!0,donateClicked:0,autoHideInfoButton:!0,autoSkipOnMusicVideos:!1,scrollToEditTimeUpdate:!1,categoryPillUpdate:!1,showChapterInfoMessage:!0,darkMode:!0,showCategoryGuidelines:!0,showShortcutPopover:!0,showCategoryWithoutPermission:!1,showSegmentNameInChapterBar:!0,useVirtualTime:!0,showSegmentFailedToFetchWarning:!0,allowScrollingToEdit:!0,showPreviewYoutubeButton:!0,showPortVideoButton:!0,cleanPopup:!1,enableCache:!0,dynamicAndCommentSponsorWhitelistedChannels:!1,dynamicAndCommentSponsorBlocker:!1,dynamicAndCommentSponsorRegexPattern:"/618|11(?!1).11(?:æ—¥)?|åŒ(?:11|åä¸€|12|åäºŒ)|å¥³ç¥žèŠ‚|å¼€å­¦å­£|å¹´è´§èŠ‚|æ°(?:ä¸ª|äº†|åˆ°)?é¥­|é‡‘ä¸»|(ä»–|å®ƒ|å¥¹)(?:ä»¬)?å®¶(?:çš„)?|(?:è¯„è®ºåŒº)?(?:é¢†(?:å–|å¼ |åˆ°)?|æŠ¢|é€|å¾—|å )(?:æˆ‘çš„)?(?:ç¥ž|ä¼˜æƒ |çº¢åŒ…|æŠ˜æ‰£|ç¦åˆ©|æ— é—¨æ§›|éšè—|ç§˜å¯†|ä¸“å±ž|(?:è¶…)?å¤§(?:é¢)?|é¢å¤–)+(?:åˆ¸|å·|åŠµ|q(?:uan)?)?(?:åŽ|åˆ°æ‰‹|ä»·|ä½¿ç”¨|ä¸‹å•)?|(?:é¢†|æŠ¢|å¾—|é€)(?:çº¢åŒ…|ä¼˜æƒ |åˆ¸|ç¦åˆ©)|(?:ä¼˜æƒ |(?:åˆ¸|å·|åŠµ)åŽ|åˆ°æ‰‹|ä¿ƒé”€|æ´»åŠ¨|ç¥ž)ä»·|(?:æ·˜å®|tb|äº¬ä¸œ|jd|ç‹—ä¸œ|æ‹¼å¤šå¤š|pdd|å¤©çŒ«|tmall)æœç´¢|(?:éš(ä¾¿|æ—¶)|ä»»æ„)(?:é€€|é€€è´§|æ¢è´§)|(?:å…è´¹|æ— å¿)(?:æ¢(?:ä¸ª)?æ–°|æ›¿æ¢|æ›´æ¢|è¯•ç”¨)(?:å•†å“|ç‰©å“)?|(?:ç‚¹(?:å‡»)?|æˆ³|æ¥|æˆ‘)è¯„è®ºåŒº(?:ç½®é¡¶)?|(?:ç«‹å³|è“é“¾|é“¾æŽ¥|ðŸ”—)(?:è´­ä¹°|ä¸‹å•)|(?:vx|wx|å¾®ä¿¡|è½¯ä»¶)æ‰«ç (?:é¢†)?(?:ä¼˜æƒ |çº¢åŒ…|åˆ¸)?|(?:æˆ‘çš„)?åŒæ¬¾(?:[çš„]?(?:æŽ¨è|å¥½ç‰©|å•†å“|å…¥æ‰‹|è´­ä¹°|æ‹¥æœ‰|åˆ†äº«|å®‰åˆ©)?)|æ»¡\\d+|å¤§ä¿ƒ|ä¿ƒé”€|æŠ˜æ‰£|ç‰¹ä»·|ç§’æ€|å¹¿å‘Š|æŽ¨å¹¿|ä½Žè‡³|çƒ­å–|æŠ¢è´­|æ–°å“|è±ªç¤¼|èµ å“|å¯†ä»¤|(?:é¥¿äº†ä¹ˆ|ç¾Ž(?:å›¢|å›£)|ç™¾åº¦å¤–å–|èœ‚é¸Ÿ|è¾¾è¾¾|UUè·‘è…¿|(?:æ·˜å®)?é—ªè´­)|(?:ç‚¹|è®¢|é€|åƒ)(?:å¤–å–|é¤)|å¤–å–(?:èŠ‚|æœåŠ¡|å¹³å°|app)/gi",dynamicAndCommentSponsorRegexPatternKeywordNumber:1,dynamicSponsorBlock:!0,dynamicSponsorBlockerDebug:!1,dynamicSpaceSponsorBlocker:!1,commentSponsorBlock:!0,commentSponsorReplyBlock:!1,showNewIcon:!0,categoryPillColors:{},skipKeybind:{key:"Enter"},skipToHighlightKeybind:{key:"Enter",ctrl:!0},startSponsorKeybind:{key:";"},submitKeybind:{key:"'"},actuallySubmitKeybind:{key:"'",ctrl:!0},previewKeybind:{key:";",ctrl:!0},nextFrameKeybind:{key:"."},previousFrameKeybind:{key:","},closeSkipNoticeKeybind:{key:"Backspace"},categorySelections:[{name:"sponsor",option:t.CategorySkipOption.AutoSkip},{name:"selfpromo",option:t.CategorySkipOption.ManualSkip},{name:"interaction",option:t.CategorySkipOption.ManualSkip},{name:"intro",option:t.CategorySkipOption.ManualSkip},{name:"outro",option:t.CategorySkipOption.ManualSkip},{name:"preview",option:t.CategorySkipOption.ShowOverlay},{name:"padding",option:t.CategorySkipOption.AutoSkip},{name:"music_offtopic",option:t.CategorySkipOption.AutoSkip},{name:"poi_highlight",option:t.CategorySkipOption.ManualSkip},{name:"exclusive_access",option:t.CategorySkipOption.ShowOverlay}],payments:{licenseKey:null,lastCheck:0,lastFreeCheck:0,freeAccess:!1,chaptersAllowed:!1},colorPalette:{red:"#780303",white:"#ffffff",locked:"#ffc83d"},barTypes:{"preview-chooseACategory":{color:"#ffffff",opacity:"0.7"},sponsor:{color:"#00d400",opacity:"0.7"},"preview-sponsor":{color:"#007800",opacity:"0.7"},selfpromo:{color:"#ffff00",opacity:"0.7"},"preview-selfpromo":{color:"#bfbf35",opacity:"0.7"},exclusive_access:{color:"#008a5c",opacity:"0.7"},interaction:{color:"#cc00ff",opacity:"0.7"},"preview-interaction":{color:"#6c0087",opacity:"0.7"},intro:{color:"#00ffff",opacity:"0.7"},"preview-intro":{color:"#008080",opacity:"0.7"},outro:{color:"#0202ed",opacity:"0.7"},"preview-outro":{color:"#000070",opacity:"0.7"},preview:{color:"#008fd6",opacity:"0.7"},"preview-preview":{color:"#005799",opacity:"0.7"},music_offtopic:{color:"#ff9900",opacity:"0.7"},"preview-music_offtopic":{color:"#a6634a",opacity:"0.7"},poi_highlight:{color:"#ff1684",opacity:"0.7"},"preview-poi_highlight":{color:"#9b044c",opacity:"0.7"},filler:{color:"#7300FF",opacity:"0.9"},"preview-filler":{color:"#2E0066",opacity:"0.7"},padding:{color:"#222222",opacity:"0.7"},"preview-padding":{color:"#111111",opacity:"0.7"}},dynamicSponsorSelections:[{name:"dynamicSponsor_sponsor",option:t.DynamicSponsorOption.Hide},{name:"dynamicSponsor_forward_sponsor",option:t.DynamicSponsorOption.Hide},{name:"dynamicSponsor_suspicion_sponsor",option:t.DynamicSponsorOption.Disabled}],dynamicSponsorTypes:{dynamicSponsor_sponsor:{color:"#007800",opacity:"0.7"},dynamicSponsor_forward_sponsor:{color:"#bfbf35",opacity:"0.7"},dynamicSponsor_suspicion_sponsor:{color:"#a6634a",opacity:"0.7"}}},c=new s(a,{downvotedSegments:{},navigationApiAvailable:null,alreadyInstalled:!1,unsubmittedSegments:{}},(function(e){const o=["skipKeybind","startSponsorKeybind","submitKeybind"];for(let n=o.length-1;n>=0;n--)for(let i=0;i<o.length;i++)n!=i&&(0,r.keybindEquals)(e[o[n]],e[o[i]])&&(e[o[n]]=null);e.serverAddress.includes("47.103.74.95")&&(e.serverAddress=i.serverAddress),e.serverAddress.includes("115.190.32.254")&&(e.serverAddress=i.serverAddress),delete e.danmakuRegexPattern,delete e.danmakuTimeMatchingRegexPattern,["(?:^|(å³|å³æ»‘|æŒ‰|å³ä¸‹|å³å‘|å³æ–¹å‘|â†’|â‡’|â‡¢|â‡¨|â®•|ðŸ¡†|ðŸ º|ðŸ ¾|ðŸ¢’|ðŸ‘‰))(\\d+)(ä¸‹|æ¬¡)?$"].includes(e.danmakuOffsetMatchingRegexPattern)&&(e.danmakuOffsetMatchingRegexPattern=a.danmakuOffsetMatchingRegexPattern),e.dynamicSponsorRegexPattern&&!e.dynamicAndCommentSponsorRegexPattern&&(e.dynamicAndCommentSponsorRegexPattern=e.dynamicSponsorRegexPattern,delete e.dynamicSponsorRegexPattern),["(618|11(?!1).11|åŒ(11|åä¸€|12|åäºŒ))|æ°(?:ä¸ª|äº†|åˆ°)?é¥­|((é¢†(?:å–)?|æŠ¢|æœ‰)(?:ç¥ž|ä¼˜æƒ )?åˆ¸|åˆ¸åŽ)|(æ·˜å®|äº¬ä¸œ|æ‹¼å¤šå¤š)æœç´¢|(ç‚¹(?:å‡»)|æˆ³|æ¥|æˆ‘)è¯„è®ºåŒº(?:ç½®é¡¶)|(ç«‹å³|è“é“¾)(?:è´­ä¹°|ä¸‹å•)|æ»¡\\d+|(å¤§ä¿ƒ|ä¿ƒé”€)|æŠ˜æ‰£|ç‰¹ä»·|ç§’æ€|å¹¿å‘Š|ä½Žè‡³|çƒ­å–|æŠ¢è´­|æ–°å“|è±ªç¤¼|èµ å“","(618|11(?!1).11|åŒ(11|åä¸€|12|åäºŒ))|(æ°|æŽ¥)(?:ä¸ª|äº†|åˆ°)?(é¥­|å¹¿)|((?:é¢†(?:å–|å¼ )?|æŠ¢|æœ‰)(?:ç¥ž|ä¼˜æƒ )?(åˆ¸|å·)|åˆ¸åŽ|å·åŽ)|(æ·˜å®|äº¬ä¸œ|æ‹¼å¤šå¤š)æœç´¢|(ç‚¹(?:å‡»)|æˆ³|æ¥|æˆ‘)è¯„è®ºåŒº(?:ç½®é¡¶)|(ç«‹å³|è“é“¾)(?:è´­ä¹°|ä¸‹å•)|æ»¡\\d+|(å¤§ä¿ƒ|ä¿ƒé”€)|æŠ˜æ‰£|ç‰¹ä»·|ç§’æ€|å¹¿å‘Š|ä½Žè‡³|çƒ­å–|æŠ¢è´­|æ–°å“|è±ªç¤¼|èµ å“|åŒæ¬¾","/(618|11(?!1).11|åŒ(?:11|åä¸€|12|åäºŒ)|å¥³ç¥žèŠ‚)|æ°(?:ä¸ª|äº†|åˆ°)?é¥­|é‡‘ä¸»|(?:è¯„è®ºåŒº)?(?:é¢†(?:å–|å¼ |åˆ°)?|æŠ¢|æœ‰|é€|å¾—)(?:æˆ‘çš„)?(?:ç¥ž|ä¼˜æƒ |çº¢åŒ…|æŠ˜æ‰£|ç¦åˆ©|æ— é—¨æ§›|éšè—|ç§˜å¯†|ä¸“å±ž|(?:è¶…)?å¤§(?:é¢)?|é¢å¤–)*(?:åˆ¸|å·|åŠµ|q(?:uan)?)?(?:åŽ|åˆ°æ‰‹|ä»·|ä½¿ç”¨|ä¸‹å•)?|(?:ä¼˜æƒ |(?:åˆ¸|å·|åŠµ)åŽ|åˆ°æ‰‹|ä¿ƒé”€|æ´»åŠ¨|ç¥ž)ä»·|(?:æ·˜å®|tb|äº¬ä¸œ|jd|ç‹—ä¸œ|æ‹¼å¤šå¤š|pdd|å¤©çŒ«|tmall)æœç´¢|(?:éš(ä¾¿|æ—¶)|ä»»æ„)(?:é€€|é€€è´§|æ¢è´§)|(?:å…è´¹|æ— å¿)(?:æ¢(?:ä¸ª)?æ–°|æ›¿æ¢|æ›´æ¢)(?:å•†å“|ç‰©å“)?|(?:ç‚¹(?:å‡»)?|æˆ³|æ¥|æˆ‘)è¯„è®ºåŒº(?:ç½®é¡¶)?|(?:ç«‹å³|è“é“¾|é“¾æŽ¥|ðŸ”—)(?:è´­ä¹°|ä¸‹å•)|(?:vx|wx|å¾®ä¿¡|è½¯ä»¶)æ‰«ç (?:é¢†)?(?:ä¼˜æƒ |çº¢åŒ…|åˆ¸)?|(?:æˆ‘çš„)?åŒæ¬¾(?:[çš„]?(?:æŽ¨è|å¥½ç‰©|å•†å“|å…¥æ‰‹|è´­ä¹°|æ‹¥æœ‰|åˆ†äº«|å®‰åˆ©)?)|æ»¡\\d+|å¤§ä¿ƒ|ä¿ƒé”€|æŠ˜æ‰£|ç‰¹ä»·|ç§’æ€|å¹¿å‘Š|æŽ¨å¹¿|ä½Žè‡³|çƒ­å–|æŠ¢è´­|æ–°å“|è±ªç¤¼|èµ å“/gi"].includes(e.dynamicAndCommentSponsorRegexPattern)&&(e.dynamicAndCommentSponsorRegexPattern=a.dynamicAndCommentSponsorRegexPattern),e.whitelistedChannels&&e.whitelistedChannels.length>0&&"string"==typeof e.whitelistedChannels[0]&&(e.whitelistedChannels=e.whitelistedChannels.map((e=>({id:e,name:chrome.i18n.getMessage("whitelistUnknownUploader")||"Unknown UP"})))),e.dynamicSponsorBlocker&&(e.dynamicAndCommentSponsorBlocker=e.dynamicSponsorBlocker,delete e.dynamicSponsorBlocker),e.dynamicSponsorWhitelistedChannels&&(e.dynamicAndCommentSponsorWhitelistedChannels=e.dynamicSponsorWhitelistedChannels,delete e.dynamicSponsorWhitelistedChannels),e.fullVideoLabelsOnThumbnails&&(!0===e.fullVideoLabelsOnThumbnails?e.fullVideoLabelsOnThumbnailsMode=t.HideFullVideoLabels.Overlay:e.fullVideoLabelsOnThumbnailsMode=t.HideFullVideoLabels.Disabled,delete e.fullVideoLabelsOnThumbnails)}));o.default=c},9205:function(e,o,n){var i=this&&this.__awaiter||function(e,o,n,i){return new(n||(n=Promise))((function(t,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var o;e.done?t(e.value):(o=e.value,o instanceof n?o:new n((function(e){e(o)}))).then(s,a)}c((i=i.apply(e,o||[])).next())}))};Object.defineProperty(o,"__esModule",{value:!0}),o.ProtoConfig=void 0,o.keybindEquals=function(e,o){return!(null==e||null==o||Boolean(e.alt)!=Boolean(o.alt)||Boolean(e.ctrl)!=Boolean(o.ctrl)||Boolean(e.shift)!=Boolean(o.shift)||null==e.key&&null==e.code||null==o.key&&null==o.code)&&(null!=e.code&&null!=o.code?e.code===o.code:null!=e.key&&null!=o.key&&e.key.toUpperCase()===o.key.toUpperCase())},o.formatKey=r,o.keybindToString=function(e){if(null==e||null==e.key)return"";let o="";return e.ctrl&&(o+="Ctrl + "),e.alt&&(o+="Alt + "),e.shift&&(o+="Shift + "),o+r(e.key)};const t=n(4070);function r(e){return null==e?"":" "==e?"Space":1==e.length?e.toUpperCase():e}o.ProtoConfig=class{constructor(e,o,n,i=!1){this.configLocalListeners=[],this.configSyncListeners=[],this.cachedSyncConfig=null,this.cachedLocalStorage=null,this.config=null,this.local=null,this.inDeArrow=!1,this.syncDefaults=e,this.localDefaults=o,this.inDeArrow=i,this.setupConfig(n).then((e=>{this.config=null==e?void 0:e.sync,this.local=null==e?void 0:e.local}))}configProxy(){chrome.storage.onChanged.addListener(((e,o)=>{if("sync"===o){for(const o in e)this.cachedSyncConfig[o]=e[o].newValue;for(const o of this.configSyncListeners)o(e)}else if("local"===o){for(const o in e)o.startsWith("bsb_cache")||(this.cachedLocalStorage[o]=e[o].newValue);for(const o of this.configLocalListeners)o(e)}}));let e=0;const o=new Set;let n=null;const i=this,t={set(t,r,s){if(i.cachedSyncConfig[r]=s,Date.now()-e<100){if(o.add(r),!n){const e=()=>{const e=[...o];o.clear(),chrome.storage.sync.set(e.map((e=>[e,i.cachedSyncConfig[e]])).reduce(((e,[o,n])=>(e[o]=n,e)),{})),n=null};n=setTimeout(e,20)}return!0}return chrome.storage.sync.set({[r]:s}),e=Date.now(),!0},get(e,o){const n=i.cachedSyncConfig[o];return e[o]||n},deleteProperty:(e,o)=>(chrome.storage.sync.remove(o),!0)},r={set:(e,o,n)=>(i.cachedLocalStorage[o]=n,chrome.storage.local.set({[o]:n}),!0),get(e,o){const n=i.cachedLocalStorage[o];return e[o]||n},deleteProperty:(e,o)=>(chrome.storage.local.remove(o),!0)};return{sync:new Proxy({handler:t},t),local:new Proxy({handler:r},r)}}forceSyncUpdate(e){const o=this.cachedSyncConfig[e];chrome.storage.sync.set({[e]:o})}forceLocalUpdate(e){const o=this.cachedLocalStorage[e];chrome.storage.local.set({[e]:o},(()=>{chrome.runtime.lastError&&alert(chrome.i18n.getMessage("storageFull"))}))}fetchConfig(){return i(this,void 0,void 0,(function*(){yield Promise.all([new Promise((e=>{chrome.storage.sync.get(null,(o=>{this.cachedSyncConfig=o,void 0===this.cachedSyncConfig&&(this.cachedSyncConfig={},(this.inDeArrow||window.location.href.includes("options.html"))&&alert(`${chrome.i18n.getMessage("syncDisabledWarning")}${this.inDeArrow?`\n\n${chrome.i18n.getMessage("syncDisabledWarningDeArrow")}`:""}${(0,t.isFirefox)()?`\n\n${chrome.i18n.getMessage("syncDisabledFirefoxSuggestions")}`:""}`)),e()}))})),new Promise((e=>{chrome.storage.local.get(null,(o=>{this.cachedLocalStorage=null!=o?o:{},e()}))}))])}))}setupConfig(e){return i(this,void 0,void 0,(function*(){if("undefined"==typeof chrome)return null;yield this.fetchConfig(),this.addDefaults();const o=this.configProxy();return e(o.sync),o}))}addDefaults(){for(const e in this.syncDefaults)if(Object.prototype.hasOwnProperty.call(this.cachedSyncConfig,e)){if("barTypes"===e)for(const o in this.syncDefaults[e])Object.prototype.hasOwnProperty.call(this.cachedSyncConfig[e],o)||(this.cachedSyncConfig[e][o]=this.syncDefaults[e][o])}else this.cachedSyncConfig[e]=this.syncDefaults[e];for(const e in this.localDefaults)Object.prototype.hasOwnProperty.call(this.cachedLocalStorage,e)||(this.cachedLocalStorage[e]=this.localDefaults[e])}isReady(){return null!==this.config}}},9209:(e,o)=>{var n,i,t,r,s,a,c,l,d;Object.defineProperty(o,"__esModule",{value:!0}),o.HideFullVideoLabels=o.NoticeVisibilityMode=o.ChannelIDStatus=o.SponsorSourceType=o.ActionTypes=o.ActionType=o.SponsorHideType=o.DynamicSponsorOption=o.CategorySkipOption=o.PageType=void 0,function(e){e.Unknown="unknown",e.Main="main",e.History="history",e.OldHistory="oldHistory",e.Video="video",e.List="list",e.Search="search",e.Dynamic="dynamic",e.Channel="channel",e.Message="message",e.Manga="manga",e.Anime="bangumi",e.Live="live",e.Opus="opus",e.Embed="embed"}(n||(o.PageType=n={})),function(e){e[e.Disabled=-1]="Disabled",e[e.ShowOverlay=0]="ShowOverlay",e[e.ManualSkip=1]="ManualSkip",e[e.AutoSkip=2]="AutoSkip"}(i||(o.CategorySkipOption=i={})),function(e){e[e.Disabled=0]="Disabled",e[e.ShowOverlay=1]="ShowOverlay",e[e.Hide=2]="Hide"}(t||(o.DynamicSponsorOption=t={})),function(e){e[e.Visible=void 0]="Visible",e[e.Downvoted=1]="Downvoted",e[e.MinimumDuration=2]="MinimumDuration",e[e.Hidden=3]="Hidden"}(r||(o.SponsorHideType=r={})),function(e){e.Skip="skip",e.Mute="mute",e.Full="full",e.Poi="poi"}(s||(o.ActionType=s={})),o.ActionTypes=[s.Skip,s.Mute,s.Full,s.Poi],function(e){e[e.Server=void 0]="Server",e[e.Local=1]="Local",e[e.YouTube=2]="YouTube",e[e.Danmaku=3]="Danmaku"}(a||(o.SponsorSourceType=a={})),function(e){e[e.Fetching=0]="Fetching",e[e.Found=1]="Found",e[e.Failed=2]="Failed"}(c||(o.ChannelIDStatus=c={})),function(e){e[e.FullSize=0]="FullSize",e[e.MiniForAutoSkip=1]="MiniForAutoSkip",e[e.MiniForAll=2]="MiniForAll",e[e.FadedForAutoSkip=3]="FadedForAutoSkip",e[e.FadedForAll=4]="FadedForAll"}(l||(o.NoticeVisibilityMode=l={})),function(e){e[e.Disabled=0]="Disabled",e[e.Overlay=1]="Overlay",e[e.Hide=2]="Hide",e[e.BlurRevealOnHover=3]="BlurRevealOnHover",e[e.BlurAlways=4]="BlurAlways",e[e.SolidCover=5]="SolidCover"}(d||(o.HideFullVideoLabels=d={}))}},o={};!function n(i){var t=o[i];if(void 0!==t)return t.exports;var r=o[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(3105)})();